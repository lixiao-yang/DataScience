var __kbnBundles__=typeof __kbnBundles__==="object"?__kbnBundles__:{};__kbnBundles__["kibana"]=function(modules){function webpackJsonpCallback(data){var chunkIds=data[0];var moreModules=data[1];var executeModules=data[2];var moduleId,chunkId,i=0,resolves=[];for(;i<chunkIds.length;i++){chunkId=chunkIds[i];if(installedChunks[chunkId]){resolves.push(installedChunks[chunkId][0])}installedChunks[chunkId]=0}for(moduleId in moreModules){if(Object.prototype.hasOwnProperty.call(moreModules,moduleId)){modules[moduleId]=moreModules[moduleId]}}if(parentJsonpFunction)parentJsonpFunction(data);while(resolves.length){resolves.shift()()}deferredModules.push.apply(deferredModules,executeModules||[]);return checkDeferredModules()}function checkDeferredModules(){var result;for(var i=0;i<deferredModules.length;i++){var deferredModule=deferredModules[i];var fulfilled=true;for(var j=1;j<deferredModule.length;j++){var depId=deferredModule[j];if(installedChunks[depId]!==0)fulfilled=false}if(fulfilled){deferredModules.splice(i--,1);result=__webpack_require__(__webpack_require__.s=deferredModule[0])}}return result}var installedModules={};var installedChunks={332:0};var deferredModules=[];function jsonpScriptSrc(chunkId){return __webpack_require__.p+""+({2:"icon.alert-js",3:"icon.apm_trace-js",4:"icon.app_add_data-js",5:"icon.app_advanced_settings-js",6:"icon.app_apm-js",7:"icon.app_auditbeat-js",8:"icon.app_canvas-js",9:"icon.app_code-js",10:"icon.app_console-js",11:"icon.app_cross_cluster_replication-js",12:"icon.app_dashboard-js",13:"icon.app_devtools-js",14:"icon.app_discover-js",15:"icon.app_ems-js",16:"icon.app_filebeat-js",17:"icon.app_gis-js",18:"icon.app_graph-js",19:"icon.app_grok-js",20:"icon.app_heartbeat-js",21:"icon.app_index_management-js",22:"icon.app_index_pattern-js",23:"icon.app_index_rollup-js",24:"icon.app_infra-js",25:"icon.app_logging-js",26:"icon.app_management-js",27:"icon.app_metricbeat-js",28:"icon.app_ml-js",29:"icon.app_monitoring-js",30:"icon.app_notebook-js",31:"icon.app_packetbeat-js",32:"icon.app_pipeline-js",33:"icon.app_reporting-js",34:"icon.app_saved_objects-js",35:"icon.app_search_profiler-js",36:"icon.app_security-js",37:"icon.app_security_analytics-js",38:"icon.app_spaces-js",39:"icon.app_sql-js",40:"icon.app_timelion-js",41:"icon.app_upgrade_assistant-js",42:"icon.app_uptime-js",43:"icon.app_users_roles-js",44:"icon.app_visualize-js",45:"icon.app_watches-js",46:"icon.apps-js",47:"icon.arrow_down-js",48:"icon.arrow_left-js",49:"icon.arrow_right-js",50:"icon.arrow_up-js",51:"icon.asterisk-js",52:"icon.beaker-js",53:"icon.bell-js",54:"icon.bolt-js",55:"icon.boxes_horizontal-js",56:"icon.boxes_vertical-js",57:"icon.branch-js",58:"icon.broom-js",59:"icon.brush-js",60:"icon.bug-js",61:"icon.bullseye-js",62:"icon.calendar-js",63:"icon.check-js",64:"icon.checkInCircleFilled-js",65:"icon.clock-js",66:"icon.cloudDrizzle-js",67:"icon.cloudStormy-js",68:"icon.cloudSunny-js",69:"icon.compute-js",70:"icon.console-js",71:"icon.controls_horizontal-js",72:"icon.controls_vertical-js",73:"icon.copy-js",74:"icon.copy_clipboard-js",75:"icon.cross-js",76:"icon.crossInACircleFilled-js",77:"icon.crosshairs-js",78:"icon.cut-js",79:"icon.database-js",80:"icon.document-js",81:"icon.documentEdit-js",82:"icon.documents-js",83:"icon.dot-js",84:"icon.editorDistributeHorizontal-js",85:"icon.editorDistributeVertical-js",86:"icon.editorItemAlignBottom-js",87:"icon.editorItemAlignCenter-js",88:"icon.editorItemAlignLeft-js",89:"icon.editorItemAlignMiddle-js",90:"icon.editorItemAlignRight-js",91:"icon.editorItemAlignTop-js",92:"icon.editorPositionBottomLeft-js",93:"icon.editorPositionBottomRight-js",94:"icon.editorPositionTopLeft-js",95:"icon.editorPositionTopRight-js",96:"icon.editor_align_center-js",97:"icon.editor_align_left-js",98:"icon.editor_align_right-js",99:"icon.editor_bold-js",100:"icon.editor_code_block-js",101:"icon.editor_comment-js",102:"icon.editor_heading-js",103:"icon.editor_italic-js",104:"icon.editor_link-js",105:"icon.editor_ordered_list-js",106:"icon.editor_redo-js",107:"icon.editor_strike-js",108:"icon.editor_table-js",109:"icon.editor_underline-js",110:"icon.editor_undo-js",111:"icon.editor_unordered_list-js",112:"icon.email-js",113:"icon.empty-js",114:"icon.exit-js",115:"icon.expand-js",116:"icon.export-js",117:"icon.eye-js",118:"icon.eye_closed-js",119:"icon.faceNeutral-js",120:"icon.face_happy-js",121:"icon.face_neutral-js",122:"icon.face_sad-js",123:"icon.filter-js",124:"icon.flag-js",125:"icon.folder_closed-js",126:"icon.folder_open-js",127:"icon.full_screen-js",128:"icon.gear-js",129:"icon.glasses-js",130:"icon.globe-js",131:"icon.grab-js",132:"icon.grab_horizontal-js",133:"icon.grid-js",134:"icon.heart-js",135:"icon.heatmap-js",136:"icon.help-js",137:"icon.iInCircle-js",138:"icon.import-js",139:"icon.index_close-js",140:"icon.index_edit-js",141:"icon.index_flush-js",142:"icon.index_mapping-js",143:"icon.index_open-js",144:"icon.index_settings-js",145:"icon.inputOutput-js",146:"icon.inspect-js",147:"icon.invert-js",148:"icon.kql_field-js",149:"icon.kql_function-js",150:"icon.kql_operand-js",151:"icon.kql_selector-js",152:"icon.kql_value-js",153:"icon.link-js",154:"icon.list-js",155:"icon.list_add-js",156:"icon.lock-js",157:"icon.lockOpen-js",158:"icon.logo_aerospike-js",159:"icon.logo_apache-js",160:"icon.logo_apm-js",161:"icon.logo_app_search-js",162:"icon.logo_aws-js",163:"icon.logo_aws_mono-js",164:"icon.logo_azure-js",165:"icon.logo_azure_mono-js",166:"icon.logo_beats-js",167:"icon.logo_business_analytics-js",168:"icon.logo_cloud-js",169:"icon.logo_cloud_ece-js",170:"icon.logo_code-js",171:"icon.logo_codesandbox-js",172:"icon.logo_couchbase-js",173:"icon.logo_docker-js",174:"icon.logo_elastic-js",175:"icon.logo_elastic_stack-js",176:"icon.logo_elasticsearch-js",177:"icon.logo_enterprise_search-js",178:"icon.logo_etcd-js",179:"icon.logo_gcp-js",180:"icon.logo_gcp_mono-js",181:"icon.logo_github-js",182:"icon.logo_gmail-js",183:"icon.logo_ibm-js",184:"icon.logo_ibm_mono-js",185:"icon.logo_kafka-js",186:"icon.logo_kibana-js",187:"icon.logo_kubernetes-js",188:"icon.logo_logging-js",189:"icon.logo_logstash-js",190:"icon.logo_maps-js",191:"icon.logo_memcached-js",192:"icon.logo_metrics-js",193:"icon.logo_mongodb-js",194:"icon.logo_mysql-js",195:"icon.logo_nginx-js",196:"icon.logo_osquery-js",197:"icon.logo_php-js",198:"icon.logo_postgres-js",199:"icon.logo_prometheus-js",200:"icon.logo_rabbitmq-js",201:"icon.logo_redis-js",202:"icon.logo_security-js",203:"icon.logo_site_search-js",204:"icon.logo_sketch-js",205:"icon.logo_slack-js",206:"icon.logo_uptime-js",207:"icon.logo_webhook-js",208:"icon.logo_windows-js",209:"icon.logstash_filter-js",210:"icon.logstash_if-js",211:"icon.logstash_input-js",212:"icon.logstash_output-js",213:"icon.logstash_queue-js",214:"icon.magnet-js",215:"icon.magnifyWithMinus-js",216:"icon.magnifyWithPlus-js",217:"icon.map_marker-js",218:"icon.memory-js",219:"icon.menuLeft-js",220:"icon.menuRight-js",221:"icon.merge-js",222:"icon.minus_in_circle-js",223:"icon.minus_in_circle_filled-js",224:"icon.ml_create_advanced_job-js",225:"icon.ml_create_multi_metric_job-js",226:"icon.ml_create_population_job-js",227:"icon.ml_create_single_metric_job-js",228:"icon.ml_data_visualizer-js",229:"icon.moon-js",230:"icon.node-js",231:"icon.number-js",232:"icon.offline-js",233:"icon.online-js",234:"icon.paint-js",236:"icon.pause-js",237:"icon.pencil-js",238:"icon.pin-js",239:"icon.pin_filled-js",240:"icon.play-js",241:"icon.plus_in_circle-js",242:"icon.plus_in_circle_filled-js",243:"icon.popout-js",244:"icon.question_in_circle-js",245:"icon.refresh-js",246:"icon.save-js",247:"icon.scale-js",248:"icon.search-js",249:"icon.shard-js",250:"icon.share-js",251:"icon.snowflake-js",252:"icon.sortLeft-js",253:"icon.sortRight-js",254:"icon.sort_down-js",255:"icon.sort_up-js",256:"icon.sortable-js",257:"icon.starPlusEmpty-js",258:"icon.starPlusFilled-js",259:"icon.star_empty-js",260:"icon.star_empty_space-js",261:"icon.star_filled-js",262:"icon.star_filled_space-js",263:"icon.star_minus_empty-js",264:"icon.star_minus_filled-js",265:"icon.stats-js",266:"icon.stop-js",267:"icon.stop_filled-js",268:"icon.stop_slash-js",269:"icon.storage-js",270:"icon.string-js",271:"icon.submodule-js",272:"icon.swatch_input-js",273:"icon.symlink-js",274:"icon.tableOfContents-js",275:"icon.tag-js",276:"icon.tear-js",277:"icon.temperature-js",278:"icon.tokens-tokenAnnotation-js",279:"icon.tokens-tokenArray-js",280:"icon.tokens-tokenBoolean-js",281:"icon.tokens-tokenClass-js",282:"icon.tokens-tokenConstant-js",283:"icon.tokens-tokenElement-js",284:"icon.tokens-tokenEnum-js",285:"icon.tokens-tokenEnumMember-js",286:"icon.tokens-tokenEvent-js",287:"icon.tokens-tokenException-js",288:"icon.tokens-tokenField-js",289:"icon.tokens-tokenFile-js",290:"icon.tokens-tokenFunction-js",291:"icon.tokens-tokenInterface-js",292:"icon.tokens-tokenKey-js",293:"icon.tokens-tokenMethod-js",294:"icon.tokens-tokenModule-js",295:"icon.tokens-tokenNamespace-js",296:"icon.tokens-tokenNull-js",297:"icon.tokens-tokenNumber-js",298:"icon.tokens-tokenObject-js",299:"icon.tokens-tokenOperator-js",300:"icon.tokens-tokenPackage-js",301:"icon.tokens-tokenParameter-js",302:"icon.tokens-tokenProperty-js",303:"icon.tokens-tokenRepo-js",304:"icon.tokens-tokenString-js",305:"icon.tokens-tokenStruct-js",306:"icon.tokens-tokenSymbol-js",307:"icon.tokens-tokenVariable-js",308:"icon.training-js",309:"icon.trash-js",310:"icon.user-js",311:"icon.vector-js",312:"icon.videoPlayer-js",313:"icon.vis_area-js",314:"icon.vis_bar_horizontal-js",315:"icon.vis_bar_vertical-js",316:"icon.vis_controls-js",317:"icon.vis_gauge-js",318:"icon.vis_goal-js",319:"icon.vis_heatmap-js",320:"icon.vis_line-js",321:"icon.vis_map_coordinate-js",322:"icon.vis_map_region-js",323:"icon.vis_metric-js",324:"icon.vis_pie-js",325:"icon.vis_table-js",326:"icon.vis_tag_cloud-js",327:"icon.vis_text-js",328:"icon.vis_timelion-js",329:"icon.vis_vega-js",330:"icon.vis_visual_builder-js",331:"icon.wrench-js",345:"vendors~icon.logo_ceph-js",346:"vendors~icon.logo_dropwizard-js",347:"vendors~icon.logo_golang-js",348:"vendors~icon.logo_haproxy-js"}[chunkId]||chunkId)+".bundle.js"}function __webpack_require__(moduleId){if(installedModules[moduleId]){return installedModules[moduleId].exports}var module=installedModules[moduleId]={i:moduleId,l:false,exports:{}};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.l=true;return module.exports}__webpack_require__.e=function requireEnsure(chunkId){var promises=[];var installedChunkData=installedChunks[chunkId];if(installedChunkData!==0){if(installedChunkData){promises.push(installedChunkData[2])}else{var promise=new Promise(function(resolve,reject){installedChunkData=installedChunks[chunkId]=[resolve,reject]});promises.push(installedChunkData[2]=promise);var script=document.createElement("script");var onScriptComplete;script.charset="utf-8";script.timeout=120;if(__webpack_require__.nc){script.setAttribute("nonce",__webpack_require__.nc)}script.src=jsonpScriptSrc(chunkId);var error=new Error;onScriptComplete=function(event){script.onerror=script.onload=null;clearTimeout(timeout);var chunk=installedChunks[chunkId];if(chunk!==0){if(chunk){var errorType=event&&(event.type==="load"?"missing":event.type);var realSrc=event&&event.target&&event.target.src;error.message="Loading chunk "+chunkId+" failed.\n("+errorType+": "+realSrc+")";error.type=errorType;error.request=realSrc;chunk[1](error)}installedChunks[chunkId]=undefined}};var timeout=setTimeout(function(){onScriptComplete({type:"timeout",target:script})},12e4);script.onerror=script.onload=onScriptComplete;document.head.appendChild(script)}}return Promise.all(promises)};__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.d=function(exports,name,getter){if(!__webpack_require__.o(exports,name)){Object.defineProperty(exports,name,{enumerable:true,get:getter})}};__webpack_require__.r=function(exports){if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(exports,"__esModule",{value:true})};__webpack_require__.t=function(value,mode){if(mode&1)value=__webpack_require__(value);if(mode&8)return value;if(mode&4&&typeof value==="object"&&value&&value.__esModule)return value;var ns=Object.create(null);__webpack_require__.r(ns);Object.defineProperty(ns,"default",{enumerable:true,value:value});if(mode&2&&typeof value!="string")for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns};__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module["default"]}:function getModuleExports(){return module};__webpack_require__.d(getter,"a",getter);return getter};__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)};__webpack_require__.p="/bundles/";__webpack_require__.oe=function(err){console.error(err);throw err};var jsonpArray=window["webpackJsonp"]=window["webpackJsonp"]||[];var oldJsonpFunction=jsonpArray.push.bind(jsonpArray);jsonpArray.push=webpackJsonpCallback;jsonpArray=jsonpArray.slice();for(var i=0;i<jsonpArray.length;i++)webpackJsonpCallback(jsonpArray[i]);var parentJsonpFunction=oldJsonpFunction;deferredModules.push([5677,0]);return checkDeferredModules()}({1004:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getTitle=exports.newControl=exports.getDefaultOptions=exports.removeControl=exports.moveControl=exports.addControl=exports.setControl=exports.CONTROL_TYPES=void 0;function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}var CONTROL_TYPES={LIST:"list",RANGE:"range"};exports.CONTROL_TYPES=CONTROL_TYPES;var setControl=function setControl(controls,controlIndex,control){return[].concat(_toConsumableArray(controls.slice(0,controlIndex)),[control],_toConsumableArray(controls.slice(controlIndex+1)))};exports.setControl=setControl;var addControl=function addControl(controls,control){return[].concat(_toConsumableArray(controls),[control])};exports.addControl=addControl;var moveControl=function moveControl(controls,controlIndex,direction){var newIndex;if(direction>=0){newIndex=controlIndex+1}else{newIndex=controlIndex-1}if(newIndex<0){return[].concat(_toConsumableArray(controls.slice(1)),[controls[0]])}else if(newIndex>=controls.length){var lastItemIndex=controls.length-1;return[controls[lastItemIndex]].concat(_toConsumableArray(controls.slice(0,lastItemIndex)))}else{var swapped=controls.slice();var temp=swapped[newIndex];swapped[newIndex]=swapped[controlIndex];swapped[controlIndex]=temp;return swapped}};exports.moveControl=moveControl;var removeControl=function removeControl(controls,controlIndex){return[].concat(_toConsumableArray(controls.slice(0,controlIndex)),_toConsumableArray(controls.slice(controlIndex+1)))};exports.removeControl=removeControl;var getDefaultOptions=function getDefaultOptions(type){var defaultOptions={};switch(type){case CONTROL_TYPES.RANGE:defaultOptions.decimalPlaces=0;defaultOptions.step=1;break;case CONTROL_TYPES.LIST:defaultOptions.type="terms";defaultOptions.multiselect=true;defaultOptions.dynamicOptions=true;defaultOptions.size=5;defaultOptions.order="desc";break}return defaultOptions};exports.getDefaultOptions=getDefaultOptions;var newControl=function newControl(type){return{id:(new Date).getTime().toString(),indexPattern:"",fieldName:"",parent:"",label:"",type:type,options:getDefaultOptions(type)}};exports.newControl=newControl;var getTitle=function getTitle(controlParams,controlIndex){var title="".concat(controlParams.type,": ").concat(controlIndex);if(controlParams.label){title="".concat(controlParams.label)}else if(controlParams.fieldName){title="".concat(controlParams.fieldName)}return title};exports.getTitle=getTitle},1005:function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.buildPipeline=exports.getVisParams=exports.buildVislibDimensions=exports.buildPipelineVisFunction=exports.prepareDimension=exports.prepareValue=exports.prepareString=exports.escapeString=exports.prepareJson=exports.getSchemas=void 0;var _lodash=__webpack_require__(1);var _date_histogram=__webpack_require__(1431);var _moment=_interopRequireDefault(__webpack_require__(23));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var vislibCharts=["area","gauge","goal","heatmap","histogram","horizontal_bar","line"];var getSchemas=function getSchemas(vis,timeRange){var createFormat=function createFormat(agg){var format=agg.params.field?agg.params.field.format.toJSON():{};var formats={date_range:function date_range(){return{id:"string"}},percentile_ranks:function percentile_ranks(){return{id:"percent"}},count:function count(){return{id:"number"}},cardinality:function cardinality(){return{id:"number"}},date_histogram:function date_histogram(){return{id:"date",params:{pattern:agg.buckets.getScaledDateFormat()}}},terms:function terms(){return{id:"terms",params:_objectSpread({id:format.id,otherBucketLabel:agg.params.otherBucketLabel,missingBucketLabel:agg.params.missingBucketLabel},format.params)}},range:function range(){return{id:"range",params:_objectSpread({id:format.id},format.params)}}};return formats[agg.type.name]?formats[agg.type.name]():format};var createSchemaConfig=function createSchemaConfig(accessor,agg){if(agg.type.name==="date_histogram"){agg.params.timeRange=timeRange;(0,_date_histogram.setBounds)(agg,true)}var hasSubAgg=["derivative","moving_avg","serial_diff","cumulative_sum","sum_bucket","avg_bucket","min_bucket","max_bucket"].includes(agg.type.name);var format=createFormat(hasSubAgg?agg.params.customMetric||agg.aggConfigs.byId[agg.params.metricAgg]:agg);var params={};if(agg.type.name==="geohash_grid"){params.precision=agg.params.precision;params.useGeocentroid=agg.params.useGeocentroid}return{accessor:accessor,format:format,params:params,aggType:agg.type.name}};var cnt=0;var schemas={metric:[]};var responseAggs=vis.aggs.getResponseAggs().filter(function(agg){return agg.enabled});var isHierarchical=vis.isHierarchical();var metrics=responseAggs.filter(function(agg){return agg.type.type==="metrics"});responseAggs.forEach(function(agg){if(!agg.enabled){cnt++;return}var skipMetrics=false;var schemaName=agg.schema?agg.schema.name||agg.schema:null;if(_typeof(schemaName)==="object"){schemaName=null}if(!schemaName){if(agg.type.name==="geo_centroid"){schemaName="geo_centroid"}else{cnt++;return}}if(schemaName==="split"){schemaName="split_".concat(agg.params.row?"row":"column");skipMetrics=responseAggs.length-metrics.length>1}if(!schemas[schemaName]){schemas[schemaName]=[]}if(!isHierarchical||agg.type.type!=="metrics"){schemas[schemaName].push(createSchemaConfig(cnt++,agg))}if(isHierarchical&&(agg.type.type!=="metrics"||metrics.length===responseAggs.length)){metrics.forEach(function(metric){var schemaConfig=createSchemaConfig(cnt++,metric);if(!skipMetrics){schemas.metric.push(schemaConfig)}})}});return schemas};exports.getSchemas=getSchemas;var prepareJson=function prepareJson(variable,data){if(data===undefined){return""}return"".concat(variable,"='").concat(JSON.stringify(data).replace(/\\/g,"\\\\").replace(/'/g,"\\'"),"' ")};exports.prepareJson=prepareJson;var escapeString=function escapeString(data){return data.replace(/\\/g,"\\\\").replace(/'/g,"\\'")};exports.escapeString=escapeString;var prepareString=function prepareString(variable,data){if(data===undefined){return""}return"".concat(variable,"='").concat(escapeString(data),"' ")};exports.prepareString=prepareString;var prepareValue=function prepareValue(variable,data){var raw=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;if(data===undefined){return""}if(raw){return"".concat(variable,"=").concat(data," ")}switch(_typeof(data)){case"string":return prepareString(variable,data);case"object":return prepareJson(variable,data);default:return"".concat(variable,"=").concat(data," ")}};exports.prepareValue=prepareValue;var prepareDimension=function prepareDimension(variable,data){if(data===undefined){return""}var expr="".concat(variable,"={visdimension ").concat(data.accessor," ");if(data.format){expr+=prepareValue("format",data.format.id);expr+=prepareJson("formatParams",data.format.params)}expr+="} ";return expr};exports.prepareDimension=prepareDimension;var buildPipelineVisFunction={vega:function vega(visState){return"vega ".concat(prepareString("spec",visState.params.spec))},input_control_vis:function input_control_vis(visState){return"input_control_vis ".concat(prepareJson("visConfig",visState.params))},metrics:function metrics(visState,schemas){var uiState=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var paramsJson=prepareJson("params",visState.params);var uiStateJson=prepareJson("uiState",uiState);return"tsvb ".concat(paramsJson," ").concat(uiStateJson)},timelion:function timelion(visState){var expression=prepareString("expression",visState.params.expression);var interval=prepareString("interval",visState.params.interval);return"timelion_vis ".concat(expression).concat(interval)},markdown:function markdown(visState){var _visState$params=visState.params,markdown=_visState$params.markdown,fontSize=_visState$params.fontSize,openLinksInNewTab=_visState$params.openLinksInNewTab;var escapedMarkdown="";if(typeof markdown==="string"||markdown instanceof String){escapedMarkdown=escapeString(markdown.toString())}var expr="markdownvis '".concat(escapedMarkdown,"' ");expr+=prepareValue("font","{font size=".concat(fontSize,"}"),true);expr+=prepareValue("openLinksInNewTab",openLinksInNewTab);return expr},table:function table(visState,schemas){var visConfig=_objectSpread({},visState.params,buildVisConfig.table(schemas,visState.params));return"kibana_table ".concat(prepareJson("visConfig",visConfig))},metric:function metric(visState,schemas){var _visState$params$metr=visState.params.metric,percentageMode=_visState$params$metr.percentageMode,useRanges=_visState$params$metr.useRanges,colorSchema=_visState$params$metr.colorSchema,metricColorMode=_visState$params$metr.metricColorMode,colorsRange=_visState$params$metr.colorsRange,labels=_visState$params$metr.labels,invertColors=_visState$params$metr.invertColors,style=_visState$params$metr.style;var _buildVisConfig$metri=buildVisConfig.metric(schemas).dimensions,metrics=_buildVisConfig$metri.metrics,bucket=_buildVisConfig$metri.bucket;var expr="metricvis ";expr+=prepareValue("percentage",percentageMode);expr+=prepareValue("colorScheme",colorSchema);expr+=prepareValue("colorMode",metricColorMode);expr+=prepareValue("useRanges",useRanges);expr+=prepareValue("invertColors",invertColors);expr+=prepareValue("showLabels",labels&&labels.show);if(style){expr+=prepareValue("bgFill",style.bgFill);expr+=prepareValue("font","{font size=".concat(style.fontSize,"}"),true);expr+=prepareValue("subText",style.subText);expr+=prepareDimension("bucket",bucket)}if(colorsRange){colorsRange.forEach(function(range){expr+=prepareValue("colorRange","{range from=".concat(range.from," to=").concat(range.to,"}"),true)})}metrics.forEach(function(metric){expr+=prepareDimension("metric",metric)});return expr},tagcloud:function tagcloud(visState,schemas){var _visState$params2=visState.params,scale=_visState$params2.scale,orientation=_visState$params2.orientation,minFontSize=_visState$params2.minFontSize,maxFontSize=_visState$params2.maxFontSize,showLabel=_visState$params2.showLabel;var _buildVisConfig$tagcl=buildVisConfig.tagcloud(schemas),metric=_buildVisConfig$tagcl.metric,bucket=_buildVisConfig$tagcl.bucket;var expr="tagcloud metric={visdimension ".concat(metric.accessor,"} ");expr+=prepareValue("scale",scale);expr+=prepareValue("orientation",orientation);expr+=prepareValue("minFontSize",minFontSize);expr+=prepareValue("maxFontSize",maxFontSize);expr+=prepareValue("showLabel",showLabel);expr+=prepareDimension("bucket",bucket);return expr},region_map:function region_map(visState,schemas){var visConfig=_objectSpread({},visState.params,buildVisConfig.region_map(schemas));return"regionmap ".concat(prepareJson("visConfig",visConfig))},tile_map:function tile_map(visState,schemas){var visConfig=_objectSpread({},visState.params,buildVisConfig.tile_map(schemas));return"tilemap ".concat(prepareJson("visConfig",visConfig))},pie:function pie(visState,schemas){var visConfig=_objectSpread({},visState.params,buildVisConfig.pie(schemas));return"kibana_pie ".concat(prepareJson("visConfig",visConfig))}};exports.buildPipelineVisFunction=buildPipelineVisFunction;var buildVisConfig={table:function table(schemas){var visParams=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var visConfig={};var metrics=schemas.metric;var buckets=schemas.bucket||[];visConfig.dimensions={metrics:metrics,buckets:buckets,splitRow:schemas.split_row,splitColumn:schemas.split_column};if(visParams.showMetricsAtAllLevels===false&&visParams.showPartialRows===true){var metricsPerBucket=metrics.length/buckets.length;visConfig.dimensions.metrics.splice(0,metricsPerBucket*buckets.length-metricsPerBucket)}return visConfig},metric:function metric(schemas){var visConfig={dimensions:{}};visConfig.dimensions.metrics=schemas.metric;if(schemas.group){visConfig.dimensions.bucket=schemas.group[0]}return visConfig},tagcloud:function tagcloud(schemas){var visConfig={};visConfig.metric=schemas.metric[0];if(schemas.segment){visConfig.bucket=schemas.segment[0]}return visConfig},region_map:function region_map(schemas){var visConfig={};visConfig.metric=schemas.metric[0];if(schemas.segment){visConfig.bucket=schemas.segment[0]}return visConfig},tile_map:function tile_map(schemas){var visConfig={};visConfig.dimensions={metric:schemas.metric[0],geohash:schemas.segment?schemas.segment[0]:null,geocentroid:schemas.geo_centroid?schemas.geo_centroid[0]:null};return visConfig},pie:function pie(schemas){var visConfig={};visConfig.dimensions={metric:schemas.metric[0],buckets:schemas.segment,splitRow:schemas.split_row,splitColumn:schemas.split_column};return visConfig}};var buildVislibDimensions=function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(vis,params){var schemas,dimensions,xAgg,_xAgg$buckets$getInte,esUnit,esValue,intervalParam,output;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:schemas=getSchemas(vis,params.timeRange);dimensions={x:schemas.segment?schemas.segment[0]:null,y:schemas.metric,z:schemas.radius,width:schemas.width,series:schemas.group,splitRow:schemas.split_row,splitColumn:schemas.split_column};if(!schemas.segment){_context.next=19;break}xAgg=vis.aggs.getResponseAggs()[dimensions.x.accessor];if(!(xAgg.type.name==="date_histogram")){_context.next=12;break}dimensions.x.params.date=true;_xAgg$buckets$getInte=xAgg.buckets.getInterval(),esUnit=_xAgg$buckets$getInte.esUnit,esValue=_xAgg$buckets$getInte.esValue;dimensions.x.params.interval=_moment["default"].duration(esValue,esUnit);dimensions.x.params.format=xAgg.buckets.getScaledDateFormat();dimensions.x.params.bounds=xAgg.buckets.getBounds();_context.next=19;break;case 12:if(!(xAgg.type.name==="histogram")){_context.next=19;break}intervalParam=xAgg.type.params.byName.interval;output={params:{}};_context.next=17;return intervalParam.modifyAggConfigOnSearchRequestStart(xAgg,params.searchSource);case 17:intervalParam.write(xAgg,output);dimensions.x.params.interval=output.params.interval;case 19:return _context.abrupt("return",dimensions);case 20:case"end":return _context.stop()}}},_callee)}));return function buildVislibDimensions(_x,_x2){return _ref.apply(this,arguments)}}();exports.buildVislibDimensions=buildVislibDimensions;var getVisParams=function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(vis,params){var schemas,visConfig;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:schemas=getSchemas(vis,params.timeRange);visConfig=(0,_lodash.cloneDeep)(vis.params);if(!buildVisConfig[vis.type.name]){_context2.next=6;break}visConfig=_objectSpread({},visConfig,buildVisConfig[vis.type.name](schemas,visConfig));_context2.next=10;break;case 6:if(!vislibCharts.includes(vis.type.name)){_context2.next=10;break}_context2.next=9;return buildVislibDimensions(vis,params);case 9:visConfig.dimensions=_context2.sent;case 10:return _context2.abrupt("return",visConfig);case 11:case"end":return _context2.stop()}}},_callee2)}));return function getVisParams(_x3,_x4){return _ref2.apply(this,arguments)}}();exports.getVisParams=getVisParams;var buildPipeline=function(){var _ref3=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(vis,params){var searchSource,indexPattern,query,filters,visState,uiState,pipeline,schemas,visConfig,_visConfig;return regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:searchSource=params.searchSource;indexPattern=vis.indexPattern;query=searchSource.getField("query");filters=searchSource.getField("filter");visState=vis.getCurrentState();uiState=vis.getUiState();pipeline="kibana | kibana_context ";if(query){pipeline+=prepareJson("query",query)}if(filters){pipeline+=prepareJson("filters",filters)}if(vis.savedSearchId){pipeline+=prepareString("savedSearchId",vis.savedSearchId)}pipeline+="| ";if(vis.type.requestHandler==="courier"){pipeline+="esaggs\n    ".concat(prepareString("index",indexPattern.id),"\n    metricsAtAllLevels=").concat(vis.isHierarchical(),"\n    partialRows=").concat(vis.type.requiresPartialRows||vis.params.showPartialRows||false,"\n    ").concat(prepareJson("aggConfigs",visState.aggs)," | ")}schemas=getSchemas(vis,params.timeRange);if(!buildPipelineVisFunction[vis.type.name]){_context3.next=17;break}pipeline+=buildPipelineVisFunction[vis.type.name](visState,schemas,uiState);_context3.next=36;break;case 17:if(!vislibCharts.includes(vis.type.name)){_context3.next=25;break}visConfig=visState.params;_context3.next=21;return buildVislibDimensions(vis,params);case 21:visConfig.dimensions=_context3.sent;pipeline+="vislib type='".concat(vis.type.name,"' ").concat(prepareJson("visConfig",visState.params));_context3.next=36;break;case 25:if(!vis.type.toExpression){_context3.next=32;break}_context3.t0=pipeline;_context3.next=29;return vis.type.toExpression(vis,params);case 29:pipeline=_context3.t0+=_context3.sent;_context3.next=36;break;case 32:_visConfig=visState.params;_visConfig.dimensions=schemas;pipeline+="visualization type='".concat(vis.type.name,"'\n    ").concat(prepareJson("visConfig",_visConfig),"\n    metricsAtAllLevels=").concat(vis.isHierarchical(),"\n    partialRows=").concat(vis.type.requiresPartialRows||vis.params.showPartialRows||false," ");if(indexPattern){pipeline+="".concat(prepareString("index",indexPattern.id))}case 36:return _context3.abrupt("return",pipeline);case 37:case"end":return _context3.stop()}}},_callee3)}));return function buildPipeline(_x5,_x6){return _ref3.apply(this,arguments)}}();exports.buildPipeline=buildPipeline},1006:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getInterval=exports.isIntervalValid=exports.isGteInterval=exports.convertIntervalIntoUnit=exports.unitLookup=exports.AUTO_INTERVAL=void 0;var _moment=_interopRequireDefault(__webpack_require__(23));var _i18n=__webpack_require__(5);var _lodash=__webpack_require__(1);var _relative_options=__webpack_require__(5728);var _interval_regexp=__webpack_require__(1406);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var AUTO_INTERVAL="auto";exports.AUTO_INTERVAL=AUTO_INTERVAL;var unitLookup={s:_i18n.i18n.translate("tsvb.getInterval.secondsLabel",{defaultMessage:"seconds"}),m:_i18n.i18n.translate("tsvb.getInterval.minutesLabel",{defaultMessage:"minutes"}),h:_i18n.i18n.translate("tsvb.getInterval.hoursLabel",{defaultMessage:"hours"}),d:_i18n.i18n.translate("tsvb.getInterval.daysLabel",{defaultMessage:"days"}),w:_i18n.i18n.translate("tsvb.getInterval.weeksLabel",{defaultMessage:"weeks"}),M:_i18n.i18n.translate("tsvb.getInterval.monthsLabel",{defaultMessage:"months"}),y:_i18n.i18n.translate("tsvb.getInterval.yearsLabel",{defaultMessage:"years"})};exports.unitLookup=unitLookup;var convertIntervalIntoUnit=function convertIntervalIntoUnit(interval){var hasTranslateUnitString=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;var units=(0,_lodash.pluck)((0,_lodash.clone)(_relative_options.relativeOptions).reverse(),"value").filter(function(s){return/^[smhdwMy]$/.test(s)});var duration=_moment["default"].duration(interval,"ms");for(var i=0;i<units.length;i++){var as=duration.as(units[i]);if(Math.abs(as)>1){return{unitValue:Math.round(Math.abs(as)),unitString:hasTranslateUnitString?unitLookup[units[i]]:units[i]}}}};exports.convertIntervalIntoUnit=convertIntervalIntoUnit;var isGteInterval=function isGteInterval(interval){return _interval_regexp.GTE_INTERVAL_RE.test(interval)};exports.isGteInterval=isGteInterval;var isIntervalValid=function isIntervalValid(interval){return(0,_lodash.isString)(interval)&&(interval===AUTO_INTERVAL||_interval_regexp.INTERVAL_STRING_RE.test(interval)||isGteInterval(interval))};exports.isIntervalValid=isIntervalValid;var getInterval=function getInterval(visData,model){var series;if(model&&model.type==="table"){series=(0,_lodash.get)(visData,"series[0].series",[])}else{series=(0,_lodash.get)(visData,"".concat(model.id,".series"),[])}return series.reduce(function(currentInterval,item){if(item.data.length>1){var seriesInterval=item.data[1][0]-item.data[0][0];if(!currentInterval||seriesInterval<currentInterval)return seriesInterval}return currentInterval},0)};exports.getInterval=getInterval},1007:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.calculateLabel=calculateLabel;var _lodash=__webpack_require__(1);var _agg_lookup=__webpack_require__(1987);var _i18n=__webpack_require__(5);var paths=["cumulative_sum","derivative","moving_average","avg_bucket","sum_bucket","min_bucket","max_bucket","std_deviation_bucket","variance_bucket","sum_of_squares_bucket","serial_diff","positive_only"];function calculateLabel(metric,metrics){if(!metric)return _i18n.i18n.translate("tsvb.calculateLabel.unknownLabel",{defaultMessage:"Unknown"});if(metric.alias)return metric.alias;if(metric.type==="count")return _i18n.i18n.translate("tsvb.calculateLabel.countLabel",{defaultMessage:"Count"});if(metric.type==="calculation"){return _i18n.i18n.translate("tsvb.calculateLabel.bucketScriptsLabel",{defaultMessage:"Bucket Script"})}if(metric.type==="math")return _i18n.i18n.translate("tsvb.calculateLabel.mathLabel",{defaultMessage:"Math"});if(metric.type==="series_agg"){return _i18n.i18n.translate("tsvb.calculateLabel.seriesAggLabel",{defaultMessage:"Series Agg ({metricFunction})",values:{metricFunction:metric["function"]}})}if(metric.type==="filter_ratio")return _i18n.i18n.translate("tsvb.calculateLabel.filterRatioLabel",{defaultMessage:"Filter Ratio"});if(metric.type==="static"){return _i18n.i18n.translate("tsvb.calculateLabel.staticValueLabel",{defaultMessage:"Static Value of {metricValue}",values:{metricValue:metric.value}})}if((0,_lodash.includes)(paths,metric.type)){var targetMetric=metrics.find(function(m){return(0,_lodash.startsWith)(metric.field,m.id)});var targetLabel=calculateLabel(targetMetric,metrics);if(targetMetric&&targetMetric.type==="percentile"){var percentileValueMatch=/\[([0-9\.]+)\]$/;var matches=metric.field.match(percentileValueMatch);if(matches){return _i18n.i18n.translate("tsvb.calculateLabel.lookupMetricTypeOfTargetWithAdditionalLabel",{defaultMessage:"{lookupMetricType} of {targetLabel} ({additionalLabel})",values:{lookupMetricType:_agg_lookup.lookup[metric.type],targetLabel:targetLabel,additionalLabel:matches[1]}})}}return _i18n.i18n.translate("tsvb.calculateLabel.lookupMetricTypeOfTargetLabel",{defaultMessage:"{lookupMetricType} of {targetLabel}",values:{lookupMetricType:_agg_lookup.lookup[metric.type],targetLabel:targetLabel}})}return _i18n.i18n.translate("tsvb.calculateLabel.lookupMetricTypeOfMetricFieldRankLabel",{defaultMessage:"{lookupMetricType} of {metricField}",values:{lookupMetricType:_agg_lookup.lookup[metric.type],metricField:metric.field}})}},1008:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.calculateCoordinates=calculateCoordinates;var _reactDom=__webpack_require__(27);var _calc_dimensions=__webpack_require__(5758);function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function calculateCoordinates(innerRef,resizeRef,state){var inner=(0,_reactDom.findDOMNode)(innerRef);var resize=(0,_reactDom.findDOMNode)(resizeRef);var scale=state.scale;if(resize.clientWidth-resize.clientHeight<0){scale=resize.clientWidth/inner.clientWidth}else{scale=resize.clientHeight/inner.clientHeight}var _calcDimensions=(0,_calc_dimensions.calcDimensions)(inner,scale),_calcDimensions2=_slicedToArray(_calcDimensions,2),newWidth=_calcDimensions2[0],newHeight=_calcDimensions2[1];if(newWidth>resize.clientWidth){scale=resize.clientWidth/inner.clientWidth}if(newHeight>resize.clientHeight){scale=resize.clientHeight/inner.clientHeight}var _calcDimensions3=(0,_calc_dimensions.calcDimensions)(inner,scale);var _calcDimensions4=_slicedToArray(_calcDimensions3,2);newWidth=_calcDimensions4[0];newHeight=_calcDimensions4[1];var translateX=(newWidth-inner.clientWidth)/2;var translateY=(newHeight-inner.clientHeight)/2;var top=Math.floor((resize.clientHeight-newHeight)/2);var left=Math.floor((resize.clientWidth-newWidth)/2);return{scale:scale,top:top,left:left,translateY:translateY,translateX:translateX}}},1009:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.newMetricAggFn=void 0;var _uuid=_interopRequireDefault(__webpack_require__(105));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var newMetricAggFn=function newMetricAggFn(){return{id:_uuid["default"].v1(),type:"count"}};exports.newMetricAggFn=newMetricAggFn},1010:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DataFormatPicker=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(17));var _react=_interopRequireWildcard(__webpack_require__(0));var _lodash=_interopRequireDefault(__webpack_require__(1));var _eui=__webpack_require__(2);var _durations=__webpack_require__(1981);var _i18n=__webpack_require__(5);var _react2=__webpack_require__(10);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var DEFAULT_OUTPUT_PRECISION="2";var DataFormatPickerUI=function(_Component){_inherits(DataFormatPickerUI,_Component);function DataFormatPickerUI(props){var _this;_classCallCheck(this,DataFormatPickerUI);_this=_possibleConstructorReturn(this,_getPrototypeOf(DataFormatPickerUI).call(this,props));_defineProperty(_assertThisInitialized(_this),"handleCustomChange",function(){_this.props.onChange([{value:_this.custom&&_this.custom.value||""}])});_defineProperty(_assertThisInitialized(_this),"handleChange",function(selectedOptions){if(selectedOptions.length<1){return}if(selectedOptions[0].value==="custom"){_this.handleCustomChange()}else if(selectedOptions[0].value==="duration"){var _this$state=_this.state,from=_this$state.from,to=_this$state.to,decimals=_this$state.decimals;_this.props.onChange([{value:"".concat(from,",").concat(to,",").concat(decimals)}])}else{_this.props.onChange(selectedOptions)}});var _from;var _to;var _decimals;if((0,_durations.isDuration)(props.value)){var _props$value$split=props.value.split(",");var _props$value$split2=_slicedToArray(_props$value$split,3);_from=_props$value$split2[0];_to=_props$value$split2[1];_decimals=_props$value$split2[2]}_this.state={from:_from||"ms",to:_to||"ms",decimals:_decimals||""};return _this}_createClass(DataFormatPickerUI,[{key:"handleDurationChange",value:function handleDurationChange(name){var _this2=this;return function(selectedOptions){if(selectedOptions.length<1){return}var newValue;if(name==="decimals"){newValue=_this2.decimals.value}else{newValue=selectedOptions[0].value}_this2.setState(_defineProperty({},name,newValue),function(){var _this2$state=_this2.state,from=_this2$state.from,to=_this2$state.to,decimals=_this2$state.decimals;_this2.props.onChange([{value:"".concat(from,",").concat(to,",").concat(decimals)}])})}}},{key:"render",value:function render(){var _this3=this;var htmlId=(0,_eui.htmlIdGenerator)();var value=this.props.value||"";var defaultValue=value;if(!_lodash["default"].includes(["bytes","number","percent"],value)){defaultValue="custom"}if((0,_durations.isDuration)(value)){defaultValue="duration"}var intl=this.props.intl;var options=[{label:intl.formatMessage({id:"tsvb.dataFormatPicker.bytesLabel",defaultMessage:"Bytes"}),value:"bytes"},{label:intl.formatMessage({id:"tsvb.dataFormatPicker.numberLabel",defaultMessage:"Number"}),value:"number"},{label:intl.formatMessage({id:"tsvb.dataFormatPicker.percentLabel",defaultMessage:"Percent"}),value:"percent"},{label:intl.formatMessage({id:"tsvb.dataFormatPicker.durationLabel",defaultMessage:"Duration"}),value:"duration"},{label:intl.formatMessage({id:"tsvb.dataFormatPicker.customLabel",defaultMessage:"Custom"}),value:"custom"}];var selectedOption=options.find(function(option){return defaultValue===option.value});var custom;if(defaultValue==="duration"){var _value$split=value.split(","),_value$split2=_slicedToArray(_value$split,3),from=_value$split2[0],to=_value$split2[1],decimals=_value$split2[2];var selectedFrom=_durations.durationInputOptions.find(function(option){return from===option.value});var selectedTo=_durations.durationOutputOptions.find(function(option){return to===option.value});return _react["default"].createElement(_eui.EuiFlexGroup,{responsive:false,gutterSize:"s"},_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiFormRow,{id:htmlId("date"),label:this.props.label},_react["default"].createElement(_eui.EuiComboBox,{isClearable:false,options:options,selectedOptions:selectedOption?[selectedOption]:[],onChange:this.handleChange,singleSelection:{asPlainText:true}}))),_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiFormRow,{id:htmlId("from"),label:_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.dataFormatPicker.fromLabel",defaultMessage:"From"})},_react["default"].createElement(_eui.EuiComboBox,{isClearable:false,options:_durations.durationInputOptions,selectedOptions:selectedFrom?[selectedFrom]:[],onChange:this.handleDurationChange("from"),singleSelection:{asPlainText:true}}))),_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiFormRow,{id:htmlId("to"),label:_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.dataFormatPicker.toLabel",defaultMessage:"To"})},_react["default"].createElement(_eui.EuiComboBox,{isClearable:false,options:_durations.durationOutputOptions,selectedOptions:selectedTo?[selectedTo]:[],onChange:this.handleDurationChange("to"),singleSelection:{asPlainText:true}}))),selectedTo&&selectedTo.value!=="humanize"&&_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiFormRow,{id:htmlId("decimal"),label:_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.dataFormatPicker.decimalPlacesLabel",defaultMessage:"Decimal places"})},_react["default"].createElement(_eui.EuiFieldText,{defaultValue:decimals,inputRef:function inputRef(el){return _this3.decimals=el},placeholder:DEFAULT_OUTPUT_PRECISION,onChange:this.handleDurationChange("decimals")}))))}if(defaultValue==="custom"){custom=_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiFormRow,{label:_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.dataFormatPicker.formatStringLabel",defaultMessage:"Format string"}),helpText:_react["default"].createElement("span",null,_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.dataFormatPicker.formatStringHelpText",defaultMessage:"See {numeralJsLink}",values:{numeralJsLink:_react["default"].createElement(_eui.EuiLink,{href:"http://numeraljs.com/#format",target:"_BLANK"},"Numeral.js")}}))},_react["default"].createElement(_eui.EuiFieldText,{defaultValue:value,inputRef:function inputRef(el){return _this3.custom=el},onChange:this.handleCustomChange})))}return _react["default"].createElement(_eui.EuiFlexGroup,{responsive:false,gutterSize:"s"},_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiFormRow,{label:this.props.label},_react["default"].createElement(_eui.EuiComboBox,{isClearable:false,options:options,selectedOptions:selectedOption?[selectedOption]:[],onChange:this.handleChange,singleSelection:{asPlainText:true}}))),custom)}}]);return DataFormatPickerUI}(_react.Component);DataFormatPickerUI.defaultProps={label:_i18n.i18n.translate("tsvb.defaultDataFormatterLabel",{defaultMessage:"Data Formatter"})};DataFormatPickerUI.propTypes={value:_propTypes["default"].string,label:_propTypes["default"].string,onChange:_propTypes["default"].func};var DataFormatPicker=(0,_react2.injectI18n)(DataFormatPickerUI);exports.DataFormatPicker=DataFormatPicker},1011:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.KibanaMapLayer=void 0;var _events=__webpack_require__(152);function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var KibanaMapLayer=function(_EventEmitter){_inherits(KibanaMapLayer,_EventEmitter);function KibanaMapLayer(){var _this;_classCallCheck(this,KibanaMapLayer);_this=_possibleConstructorReturn(this,_getPrototypeOf(KibanaMapLayer).call(this));_this._leafletLayer=null;return _this}_createClass(KibanaMapLayer,[{key:"getBounds",value:function(){var _getBounds=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:return _context.abrupt("return",this._leafletLayer.getBounds());case 1:case"end":return _context.stop()}}},_callee,this)}));function getBounds(){return _getBounds.apply(this,arguments)}return getBounds}()},{key:"addToLeafletMap",value:function addToLeafletMap(leafletMap){this._leafletLayer.addTo(leafletMap)}},{key:"removeFromLeafletMap",value:function removeFromLeafletMap(leafletMap){leafletMap.removeLayer(this._leafletLayer)}},{key:"appendLegendContents",value:function appendLegendContents(){}},{key:"updateExtent",value:function updateExtent(){}},{key:"movePointer",value:function movePointer(){}},{key:"getAttributions",value:function getAttributions(){return this._attribution}}]);return KibanaMapLayer}(_events.EventEmitter);exports.KibanaMapLayer=KibanaMapLayer},1012:function(module,exports,__webpack_require__){module.exports=__webpack_require__(18)(2029)},1013:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ScaledCirclesMarkers=void 0;var _leaflet=_interopRequireDefault(__webpack_require__(248));var _lodash=_interopRequireDefault(__webpack_require__(1));var _d=_interopRequireDefault(__webpack_require__(33));var _jquery=_interopRequireDefault(__webpack_require__(25));var _events=__webpack_require__(152);var _truncated_colormaps=__webpack_require__(505);var colorUtil=_interopRequireWildcard(__webpack_require__(2e3));function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var ScaledCirclesMarkers=function(_EventEmitter){_inherits(ScaledCirclesMarkers,_EventEmitter);function ScaledCirclesMarkers(featureCollection,featureCollectionMetaData,options,targetZoom,kibanaMap,metricAgg){var _this;_classCallCheck(this,ScaledCirclesMarkers);_this=_possibleConstructorReturn(this,_getPrototypeOf(ScaledCirclesMarkers).call(this));_this._featureCollection=featureCollection;_this._featureCollectionMetaData=featureCollectionMetaData;_this._zoom=targetZoom;_this._metricAgg=metricAgg;_this._valueFormatter=options.valueFormatter||function(x){x};_this._tooltipFormatter=options.tooltipFormatter||function(x){x};_this._label=options.label;_this._colorRamp=options.colorRamp;_this._legendColors=null;_this._legendQuantizer=null;_this._popups=[];var layerOptions={pointToLayer:_this.getMarkerFunction(),style:_this.getStyleFunction(),onEachFeature:function onEachFeature(feature,layer){_this._bindPopup(feature,layer)}};if(!options.isFilteredByCollar){layerOptions.filter=function(feature){var bucketRectBounds=feature.properties.geohash_meta.rectangle;return kibanaMap.isInside(bucketRectBounds)}}_this._leafletLayer=_leaflet["default"].geoJson(null,layerOptions);_this._leafletLayer.addData(_this._featureCollection);return _this}_createClass(ScaledCirclesMarkers,[{key:"getLeafletLayer",value:function getLeafletLayer(){return this._leafletLayer}},{key:"getStyleFunction",value:function getStyleFunction(){var min=_lodash["default"].get(this._featureCollectionMetaData,"min",0);var max=_lodash["default"].get(this._featureCollectionMetaData,"max",1);var quantizeDomain=min!==max?[min,max]:_d["default"].scale.quantize().domain();this._legendColors=makeLegendColors(this._colorRamp);this._legendQuantizer=_d["default"].scale.quantize().domain(quantizeDomain).range(this._legendColors);return makeStyleFunction(this._legendColors,quantizeDomain)}},{key:"movePointer",value:function movePointer(){}},{key:"getLabel",value:function getLabel(){if(this._popups.length){return this._label}return""}},{key:"appendLegendContents",value:function appendLegendContents(jqueryDiv){var _this2=this;if(!this._legendColors||!this._legendQuantizer){return}var titleText=this.getLabel();var $title=(0,_jquery["default"])("<div>").addClass("visMapLegend__title").text(titleText);jqueryDiv.append($title);this._legendColors.forEach(function(color){var labelText=_this2._legendQuantizer.invertExtent(color).map(_this2._valueFormatter).join(" ");var label=(0,_jquery["default"])("<div>");var icon=(0,_jquery["default"])("<i>").css({background:color,"border-color":makeColorDarker(color)});var text=(0,_jquery["default"])("<span>").text(labelText);label.append(icon);label.append(text);jqueryDiv.append(label)})}},{key:"_bindPopup",value:function _bindPopup(feature,layer){var _this3=this;var popup=layer.on({mouseover:function mouseover(e){var layer=e.target;if(!_leaflet["default"].Browser.ie&&!_leaflet["default"].Browser.opera){layer.bringToFront()}_this3._showTooltip(feature)},mouseout:function mouseout(){_this3.emit("hideTooltip")}});this._popups.push(popup)}},{key:"_showTooltip",value:function _showTooltip(feature){var content=this._tooltipFormatter(feature);if(!content){return}var latLng=_leaflet["default"].latLng(feature.geometry.coordinates[1],feature.geometry.coordinates[0]);this.emit("showTooltip",{content:content,position:latLng})}},{key:"getMarkerFunction",value:function getMarkerFunction(){var _this4=this;var scaleFactor=.6;return function(feature,latlng){var value=feature.properties.value;var scaledRadius=_this4._radiusScale(value)*scaleFactor;return _leaflet["default"].circleMarker(latlng).setRadius(scaledRadius)}}},{key:"_radiusScale",value:function _radiusScale(value){var precisionBiasBase=5;var precisionBiasNumerator=200;var precision=_lodash["default"].max(this._featureCollection.features.map(function(feature){return String(feature.properties.geohash).length}));var pct=Math.abs(value)/Math.abs(this._featureCollectionMetaData.max);var zoomRadius=.5*Math.pow(2,this._zoom);var precisionScale=precisionBiasNumerator/Math.pow(precisionBiasBase,precision);return Math.pow(pct,.5)*zoomRadius*precisionScale}},{key:"getBounds",value:function getBounds(){return this._leafletLayer.getBounds()}}]);return ScaledCirclesMarkers}(_events.EventEmitter);exports.ScaledCirclesMarkers=ScaledCirclesMarkers;function makeLegendColors(colorRampKey){var colorRamp=_lodash["default"].get(_truncated_colormaps.truncatedColorMaps[colorRampKey],"value");return colorUtil.getLegendColors(colorRamp)}function makeColorDarker(color){var amount=1.3;return _d["default"].hcl(color).darker(amount).toString()}function makeStyleFunction(legendColors,quantizeDomain){var legendQuantizer=_d["default"].scale.quantize().domain(quantizeDomain).range(legendColors);return function(feature){var value=_lodash["default"].get(feature,"properties.value");var color=legendQuantizer(value);return{fillColor:color,color:makeColorDarker(color),weight:1.5,opacity:1,fillOpacity:.75}}}},1015:function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(12);var _module=_modules.uiModules.get("kibana");_module.directive("cssTruncate",function(){return{restrict:"A",scope:{},link:function link($scope,$elem,attrs){$elem.css({overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis","word-break":"break-all"});if(attrs.cssTruncateExpandable!=null){$scope.$watch(function(){return $elem.html()},function(){if($elem[0].offsetWidth<$elem[0].scrollWidth){$elem.css({cursor:"pointer"});$elem.bind("click",function(){$scope.toggle()})}})}$scope.toggle=function(){if($elem.css("white-space")!=="normal"){$elem.css({"white-space":"normal"})}else{$elem.css({"white-space":"nowrap"})}};$scope.$on("$destroy",function(){$elem.unbind("click");$elem.unbind("mouseenter")})}}})},1018:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"NumberFormatEditor",{enumerable:true,get:function get(){return _number.NumberFormatEditor}});var _number=__webpack_require__(5983)},1019:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getVersion=getVersion;exports.getContentType=getContentType;exports.send=send;exports.constructESUrl=constructESUrl;var _querystring=__webpack_require__(513);var _jquery=_interopRequireDefault(__webpack_require__(25));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var esVersion=[];function getVersion(){return esVersion}function getContentType(body){if(!body)return;return"application/json"}function send(method,path,data){var wrappedDfd=_jquery["default"].Deferred();var isGetRequest=/^get$/i.test(method);if(data&&isGetRequest){method="POST"}var options={url:"../api/console/proxy?"+(0,_querystring.stringify)({path:path,method:method}),data:data,contentType:getContentType(data),cache:false,crossDomain:true,type:"POST",dataType:"text"};_jquery["default"].ajax(options).then(function(data,textStatus,jqXHR){wrappedDfd.resolveWith(this,[data,textStatus,jqXHR])},function(jqXHR,textStatus,errorThrown){if(jqXHR.status===0){jqXHR.responseText="\n\nFailed to connect to Console's backend.\nPlease check the Kibana server is up and running"}wrappedDfd.rejectWith(this,[jqXHR,textStatus,errorThrown])});return wrappedDfd}function constructESUrl(baseUri,path){baseUri=baseUri.replace(/\/+$/,"");path=path.replace(/^\/+/,"");return baseUri+"/"+path}},1020:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=void 0;var _lodash=_interopRequireDefault(__webpack_require__(1));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var utils={};utils.textFromRequest=function(request){var data=request.data;if(typeof data!=="string"){data=data.join("\n")}return request.method+" "+request.url+"\n"+data};utils.jsonToString=function(data,indent){return JSON.stringify(data,null,indent?2:0)};utils.reformatData=function(data,indent){var changed=false;var formattedData=[];for(var i=0;i<data.length;i++){var curDoc=data[i];try{var newDoc=utils.jsonToString(JSON.parse(utils.collapseLiteralStrings(curDoc)),indent?2:0);if(indent){newDoc=utils.expandLiteralStrings(newDoc)}changed=changed||newDoc!==curDoc;formattedData.push(newDoc)}catch(e){console.log(e);formattedData.push(curDoc)}}return{changed:changed,data:formattedData}};utils.collapseLiteralStrings=function(data){return data.replace(/"""(?:\s*\r?\n)?((?:.|\r?\n)*?)(?:\r?\n\s*)?"""/g,function(match,literal){return JSON.stringify(literal)})};utils.expandLiteralStrings=function(data){return data.replace(/("(?:\\"|[^"])*?")/g,function(match,string){if(string.split(/\\./).length>2){string=JSON.parse(string).replace("^s*\n","").replace("\ns*^","");var append=string.includes("\n")?"\n":"";return'"""'+append+string+append+'"""'}else{return string}})};utils.extractDeprecationMessages=function(warnings){var re=/\d{3} [0-9a-zA-Z!#$%&'*+-.^_`|~]+ \"((?:\t| |!|[\x23-\x5b]|[\x5d-\x7e]|[\x80-\xff]|\\\\|\\")*)\"(?: \"[^"]*\")?/;return _lodash["default"].map(utils.splitOnUnquotedCommaSpace(warnings),function(warning){var match=re.exec(warning);return"#! Deprecation: "+(match!==null?utils.unescape(match[1]):warning)})};utils.unescape=function(s){return s.replace(/\\\\/g,"\\").replace(/\\"/g,'"')};utils.splitOnUnquotedCommaSpace=function(s){var quoted=false;var arr=[];var buffer="";var i=0;while(i<s.length){var token=s.charAt(i++);if(token==="\\"&&i<s.length){token+=s.charAt(i++)}else if(token===","&&i<s.length&&s.charAt(i)===" "){token+=s.charAt(i++)}if(token==='"'){quoted=!quoted}else if(!quoted&&token===", "){arr.push(buffer);buffer="";continue}buffer+=token}arr.push(buffer);return arr};var _default=utils;exports["default"]=_default;module.exports=exports.default},1021:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=SenseEditor;function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}var _=__webpack_require__(1);var ace=__webpack_require__(201);var $=__webpack_require__(25);var curl=__webpack_require__(6040);var RowParser=__webpack_require__(6041);var InputMode=__webpack_require__(6042);var utils=__webpack_require__(1020);var es=__webpack_require__(1019);var chrome=__webpack_require__(19);var smartResize=__webpack_require__(2030);function createInstance($el){var aceEditor=ace.edit($el[0]);var CustomSenseEditor=function CustomSenseEditor(){};CustomSenseEditor.prototype={};function bindProp(key){Object.defineProperty(CustomSenseEditor.prototype,key,{get:function get(){return aceEditor[key]},set:function set(val){aceEditor[key]=val}})}for(var key in aceEditor){switch(_typeof(aceEditor[key])){case"function":CustomSenseEditor.prototype[key]=_.bindKey(aceEditor,key);break;default:bindProp(key);break}}var editor=new CustomSenseEditor;editor.__ace=aceEditor;return editor}function SenseEditor($el){var editor=createInstance($el);var CURRENT_REQ_RANGE=null;editor.$el=$el;editor.$actions=null;editor.parser=new RowParser(editor);editor.resize=smartResize(editor);var onceDoneTokenizing=function onceDoneTokenizing(callback,cancelAlreadyScheduledCalls){var session=editor.getSession();var timer=false;var checkInterval=25;return function(){var self=this;var args=[].slice.call(arguments,0);if(cancelAlreadyScheduledCalls){timer=clearTimeout(timer)}setTimeout(function check(){if(session.bgTokenizer){if(session.bgTokenizer.running){timer=setTimeout(check,checkInterval)}else{callback.apply(self,args)}}})}};editor.setShowPrintMargin(false);(function(session){session.setMode(new InputMode.Mode);session.setFoldStyle("markbeginend");session.setTabSize(2);session.setUseWrapMode(true)})(editor.getSession());editor.prevRequestStart=function(rowOrPos){rowOrPos=_.isUndefined(rowOrPos)||rowOrPos===null?editor.getCursorPosition():rowOrPos;var curRow=_.isObject(rowOrPos)?rowOrPos.row:rowOrPos;while(curRow>0&&!editor.parser.isStartRequestRow(curRow,editor)){curRow--}return{row:curRow,column:0}};editor.nextRequestStart=function(rowOrPos){rowOrPos=_.isUndefined(rowOrPos)||rowOrPos===null?editor.getCursorPosition():rowOrPos;var session=editor.getSession();var curRow=_.isObject(rowOrPos)?rowOrPos.row:rowOrPos;var maxLines=session.getLength();for(;curRow<maxLines-1;curRow++){if(editor.parser.isStartRequestRow(curRow,editor)){break}}return{row:curRow,column:0}};editor.autoIndent=onceDoneTokenizing(function(){editor.getRequestRange(function(reqRange){if(!reqRange){return}editor.getRequest(function(parsedReq){if(parsedReq.data&&parsedReq.data.length>0){var indent=parsedReq.data.length===1;var formattedData=utils.reformatData(parsedReq.data,indent);if(!formattedData.changed){indent=!indent;formattedData=utils.reformatData(parsedReq.data,indent)}parsedReq.data=formattedData.data;editor.replaceRequestRange(parsedReq,reqRange)}})})},true);editor.update=function(data,callback){callback=typeof callback==="function"?callback:null;var session=editor.getSession();session.setValue(data);if(callback){setTimeout(function(){var i;for(i=0;i<session.getLength();i++){session.getTokens(i)}callback()})}};editor.replaceRequestRange=function(newRequest,requestRange){var text=utils.textFromRequest(newRequest);if(requestRange){var pos=editor.getCursorPosition();editor.getSession().replace(requestRange,text);var maxRow=Math.max(requestRange.start.row+text.split("\n").length-1,0);pos.row=Math.min(pos.row,maxRow);editor.moveCursorToPosition(pos);editor.clearSelection()}else{editor.insert(text)}};editor.iterForCurrentLoc=function(){var pos=editor.getCursorPosition();return editor.iterForPosition(pos.row,pos.column,editor)};editor.iterForPosition=function(row,column){return new(ace.acequire("ace/token_iterator").TokenIterator)(editor.getSession(),row,column)};editor.getRequestRange=onceDoneTokenizing(function(row,cb){if(_.isUndefined(cb)){cb=row;row=null}if(typeof cb!=="function"){return}if(editor.parser.isInBetweenRequestsRow(row)){cb(null);return}var reqStart=editor.prevRequestStart(row,editor);var reqEnd=editor.nextRequestEnd(reqStart,editor);cb(new(ace.acequire("ace/range").Range)(reqStart.row,reqStart.column,reqEnd.row,reqEnd.column))});editor.getEngulfingRequestsRange=onceDoneTokenizing(function(range,cb){if(_.isUndefined(cb)){cb=range;range=null}range=range||editor.getSelectionRange();var session=editor.getSession();var startRow=range.start.row;var endRow=range.end.row;var maxLine=Math.max(0,session.getLength()-1);if(editor.parser.isInBetweenRequestsRow(startRow)){}else{for(;startRow>=0;startRow--){if(editor.parser.isStartRequestRow(startRow)){break}}}if(startRow<0||startRow>endRow){cb(null);return}if(editor.parser.isInBetweenRequestsRow(endRow)){for(;endRow>=startRow;endRow--){if(editor.parser.isEndRequestRow(endRow)){break}}}else{for(;endRow<=maxLine;endRow++){if(editor.parser.isEndRequestRow(endRow)){break}}}if(endRow<startRow||endRow>maxLine){cb(null);return}var endColumn=(session.getLine(endRow)||"").replace(/\s+$/,"").length;cb(new(ace.acequire("ace/range").Range)(startRow,0,endRow,endColumn))});editor.getRequestInRange=onceDoneTokenizing(function(range,cb){if(!range){return}var request={method:"",data:[],url:null,range:range};var pos=range.start;var tokenIter=editor.iterForPosition(pos.row,pos.column,editor);var t=tokenIter.getCurrentToken();if(editor.parser.isEmptyToken(t)){t=editor.parser.nextNonEmptyToken(tokenIter)}request.method=t.value;t=editor.parser.nextNonEmptyToken(tokenIter);if(!t||t.type==="method"){return null}request.url="";while(t&&t.type&&t.type.indexOf("url")===0){request.url+=t.value;t=tokenIter.stepForward()}if(editor.parser.isEmptyToken(t)){t=editor.parser.nextNonEmptyToken(tokenIter)}var bodyStartRow=(t?0:1)+tokenIter.getCurrentTokenRow();var dataEndPos;while(bodyStartRow<range.end.row||bodyStartRow===range.end.row&&0<range.end.column){dataEndPos=editor.nextDataDocEnd({row:bodyStartRow,column:0});var bodyRange=new(ace.acequire("ace/range").Range)(bodyStartRow,0,dataEndPos.row,dataEndPos.column);var data=editor.getSession().getTextRange(bodyRange);request.data.push(data.trim());bodyStartRow=dataEndPos.row+1}cb(request)});editor.getRequestsInRange=function(range,includeNonRequestBlocks,cb){if(_.isUndefined(includeNonRequestBlocks)){includeNonRequestBlocks=false;cb=range;range=null}else if(_.isUndefined(cb)){cb=includeNonRequestBlocks;includeNonRequestBlocks=false}function explicitRangeToRequests(requestsRange,tempCb){if(!requestsRange){tempCb([]);return}var startRow=requestsRange.start.row;var endRow=requestsRange.end.row;var currentRow=startRow;for(;currentRow<=endRow;currentRow++){if(editor.parser.isStartRequestRow(currentRow)){break}}var nonRequestPrefixBlock=null;if(includeNonRequestBlocks&&currentRow!==startRow){nonRequestPrefixBlock=editor.getSession().getLines(startRow,currentRow-1).join("\n")}if(currentRow>endRow){tempCb(nonRequestPrefixBlock?[nonRequestPrefixBlock]:[]);return}editor.getRequest(currentRow,function(request){if(!request){return}explicitRangeToRequests({start:{row:request.range.end.row+1},end:{row:requestsRange.end.row}},function(restOfRequests){restOfRequests.unshift(request);if(nonRequestPrefixBlock!==null){restOfRequests.unshift(nonRequestPrefixBlock)}tempCb(restOfRequests)})})}editor.getEngulfingRequestsRange(range,function(requestRange){explicitRangeToRequests(requestRange,cb)})};editor.getRequest=onceDoneTokenizing(function(row,cb){if(_.isUndefined(cb)){cb=row;row=null}if(typeof cb!=="function"){return}if(editor.parser.isInBetweenRequestsRow(row)){cb(null);return}editor.getRequestRange(row,function(range){editor.getRequestInRange(range,cb)})});editor.moveToPreviousRequestEdge=onceDoneTokenizing(function(){var pos=editor.getCursorPosition();for(pos.row--;pos.row>0&&!editor.parser.isRequestEdge(pos.row);pos.row--){}editor.moveCursorTo(pos.row,0)});editor.moveToNextRequestEdge=onceDoneTokenizing(function(moveOnlyIfNotOnEdge){var pos=editor.getCursorPosition();var maxRow=editor.getSession().getLength();if(!moveOnlyIfNotOnEdge){pos.row++}for(;pos.row<maxRow&&!editor.parser.isRequestEdge(pos.row);pos.row++){}editor.moveCursorTo(pos.row,0)});editor.nextRequestEnd=function(pos){pos=pos||editor.getCursorPosition();var session=editor.getSession();var curRow=pos.row;var maxLines=session.getLength();for(;curRow<maxLines-1;curRow++){var curRowMode=editor.parser.getRowParseMode(curRow,editor);if((curRowMode&editor.parser.MODE.REQUEST_END)>0){break}if(curRow!==pos.row&&(curRowMode&editor.parser.MODE.REQUEST_START)>0){break}}var column=(session.getLine(curRow)||"").replace(/\s+$/,"").length;return{row:curRow,column:column}};editor.nextDataDocEnd=function(pos){pos=pos||editor.getCursorPosition();var session=editor.getSession();var curRow=pos.row;var maxLines=session.getLength();for(;curRow<maxLines-1;curRow++){var curRowMode=editor.parser.getRowParseMode(curRow,editor);if((curRowMode&RowParser.REQUEST_END)>0){break}if((curRowMode&editor.parser.MODE.MULTI_DOC_CUR_DOC_END)>0){break}if(curRow!==pos.row&&(curRowMode&editor.parser.MODE.REQUEST_START)>0){break}}var column=(session.getLine(curRow)||"").length;return{row:curRow,column:column}};var origOnPaste=editor.__ace.onPaste;editor.__ace.onPaste=function(text){if(text&&curl.detectCURL(text)){editor.handleCURLPaste(text);return}origOnPaste.call(this,text)};editor.handleCURLPaste=function(text){var curlInput=curl.parseCURL(text);editor.insert(curlInput)};editor.highlightCurrentRequestsAndUpdateActionBar=onceDoneTokenizing(function(){var session=editor.getSession();editor.getEngulfingRequestsRange(function(newCurrentReqRange){if(newCurrentReqRange===null&&CURRENT_REQ_RANGE===null){return}if(newCurrentReqRange!==null&&CURRENT_REQ_RANGE!==null&&newCurrentReqRange.start.row===CURRENT_REQ_RANGE.start.row&&newCurrentReqRange.end.row===CURRENT_REQ_RANGE.end.row){var cursorRow=editor.getCursorPosition().row;if(cursorRow===CURRENT_REQ_RANGE.start.row){editor.updateActionsBar()}return}if(CURRENT_REQ_RANGE){session.removeMarker(CURRENT_REQ_RANGE.marker_id)}CURRENT_REQ_RANGE=newCurrentReqRange;if(CURRENT_REQ_RANGE){CURRENT_REQ_RANGE.marker_id=session.addMarker(CURRENT_REQ_RANGE,"ace_snippet-marker","fullLine")}editor.updateActionsBar()})},true);editor.getRequestsAsCURL=function(range,cb){if(_.isUndefined(cb)){cb=range;range=null}if(_.isUndefined(cb)){cb=$.noop}editor.getRequestsInRange(range,true,function(requests){var result=_.map(requests,function requestToCurl(req){if(typeof req==="string"){return req}var esPath=req.url;var esMethod=req.method;var esData=req.data;var elasticsearchBaseUrl=chrome.getInjected("elasticsearchUrl");var url=es.constructESUrl(elasticsearchBaseUrl,esPath);var ret="curl -X"+esMethod+' "'+url+'"';if(esData&&esData.length){ret+=" -H 'Content-Type: application/json' -d'\n";var dataAsString=utils.collapseLiteralStrings(esData.join("\n"));ret+=dataAsString.replace(/'/g,'\\"');if(esData.length>1){ret+="\n"}ret+="'"}return ret});cb(result.join("\n"))})};editor.getSession().on("tokenizerUpdate",function(){editor.highlightCurrentRequestsAndUpdateActionBar()});editor.getSession().selection.on("changeCursor",function(){editor.highlightCurrentRequestsAndUpdateActionBar()});editor.updateActionsBar=function(){var set=function set(top){if(top===null){editor.$actions.css("visibility","hidden")}else{editor.$actions.css({top:top,visibility:"visible"})}};var hide=function hide(){set()};return function(){if(!editor.$actions){return}if(CURRENT_REQ_RANGE){var offsetFromPage=editor.$el.offset().top;var startRow=CURRENT_REQ_RANGE.start.row;var startColumn=CURRENT_REQ_RANGE.start.column;var session=editor.session;var firstLine=session.getLine(startRow);if(firstLine.length>session.getWrapLimit()-5){if(startRow>0){startRow--}else{startRow++}}var topOfReq=editor.renderer.textToScreenCoordinates(startRow,startColumn).pageY-offsetFromPage;if(topOfReq>=0){return set(topOfReq)}var bottomOfReq=editor.renderer.textToScreenCoordinates(CURRENT_REQ_RANGE.end.row,CURRENT_REQ_RANGE.end.column).pageY-offsetFromPage;if(bottomOfReq>=0){return set(0)}}hide()}}();editor.getSession().on("changeScrollTop",editor.updateActionsBar);return editor}module.exports=exports.default},1022:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=void 0;var $=__webpack_require__(25);var storage=__webpack_require__(507);var history={restoreFromHistory:function restoreFromHistory(){throw new Error("not implemented")},getHistoryKeys:function getHistoryKeys(){return storage.keys().filter(function(key){return key.indexOf("hist_elem")===0}).sort().reverse()},getHistory:function getHistory(){return history.getHistoryKeys().map(function(key){return storage.get(key)})},addToHistory:function addToHistory(endpoint,method,data){var keys=history.getHistoryKeys();keys.splice(0,500);$.each(keys,function(i,k){storage["delete"](k)});var timestamp=(new Date).getTime();var k="hist_elem_"+timestamp;storage.set(k,{time:timestamp,endpoint:endpoint,method:method,data:data})},updateCurrentState:function updateCurrentState(content){var timestamp=(new Date).getTime();storage.set("editor_state",{time:timestamp,content:content})},getSavedEditorState:function getSavedEditorState(){var saved=storage.get("editor_state");if(!saved)return;var time=saved.time,content=saved.content;return{time:time,content:content}},clearHistory:function clearHistory(){history.getHistoryKeys().forEach(function(key){return storage["delete"](key)})}};var _default=history;exports["default"]=_default;module.exports=exports.default},1023:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DocViewsRegistryProvider=void 0;var _lodash=_interopRequireDefault(__webpack_require__(1));var _registry=__webpack_require__(107);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var DocViewsRegistryProvider=(0,_registry.uiRegistry)({name:"docViews",index:["name"],order:["order"],constructor:function constructor(){this.forEach(function(docView){docView.shouldShow=docView.shouldShow||_lodash["default"].constant(true);docView.name=docView.name||docView.title})}});exports.DocViewsRegistryProvider=DocViewsRegistryProvider},1024:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _visualize_loader=__webpack_require__(663);Object.keys(_visualize_loader).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _visualize_loader[key]}})})},1026:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Synopsis=Synopsis;var _react=_interopRequireDefault(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(17));var _classnames=_interopRequireDefault(__webpack_require__(61));var _eui=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function Synopsis(_ref){var description=_ref.description,iconUrl=_ref.iconUrl,iconType=_ref.iconType,title=_ref.title,url=_ref.url,wrapInPanel=_ref.wrapInPanel,onClick=_ref.onClick,isBeta=_ref.isBeta;var optionalImg;if(iconUrl){optionalImg=_react["default"].createElement("img",{className:"synopsisIcon",src:iconUrl,alt:""})}else if(iconType){optionalImg=_react["default"].createElement(_eui.EuiIcon,{type:iconType,size:"l"})}var classes=(0,_classnames["default"])("homSynopsis__card",{"homSynopsis__card--noPanel":!wrapInPanel});return _react["default"].createElement(_eui.EuiCard,{className:classes,layout:"horizontal",icon:optionalImg,title:title,description:description,onClick:onClick,href:url,"data-test-subj":"homeSynopsisLink".concat(title.toLowerCase()),betaBadgeLabel:isBeta?"Beta":null})}Synopsis.propTypes={description:_propTypes["default"].string.isRequired,iconUrl:_propTypes["default"].string,iconType:_propTypes["default"].string,title:_propTypes["default"].string.isRequired,url:_propTypes["default"].string,onClick:_propTypes["default"].func,isBeta:_propTypes["default"].bool};Synopsis.defaultProps={isBeta:false}},1027:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Content=Content;var _react=_interopRequireDefault(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(17));var _markdown=__webpack_require__(813);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var whiteListedRules=["backticks","emphasis","link","list"];function Content(_ref){var text=_ref.text;return _react["default"].createElement(_markdown.Markdown,{className:"euiText",markdown:text,openLinksInNewTab:true,whiteListedRules:whiteListedRules})}Content.propTypes={text:_propTypes["default"].string.isRequired}},1028:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.stateMonitorFactory=void 0;var _lodash=__webpack_require__(1);var stateMonitorFactory={create:function create(state,customInitialState){return stateMonitor(state,customInitialState)}};exports.stateMonitorFactory=stateMonitorFactory;function stateMonitor(state,customInitialState){var destroyed=false;var ignoredProps=[];var changeHandlers=[];var initialState;_setInitialState(customInitialState);function _setInitialState(innerCustomInitialState){initialState=(0,_lodash.cloneDeep)(innerCustomInitialState)||(0,_lodash.cloneDeep)(state.toJSON())}function removeIgnoredProps(innerState){ignoredProps.forEach(function(path){(0,_lodash.set)(innerState,path,true)});return innerState}function getStatus(){var currentState=removeIgnoredProps((0,_lodash.cloneDeep)(state.toJSON()));var isClean=(0,_lodash.isEqual)(currentState,initialState);return{clean:isClean,dirty:!isClean}}function dispatchChange(){var type=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var keys=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];var status=getStatus();if(!changeHandlers){throw new Error("Change handlers is undefined, this object has been destroyed")}changeHandlers.forEach(function(changeHandler){changeHandler(status,type,keys)})}function dispatchFetch(keys){dispatchChange("fetch_with_changes",keys)}function dispatchSave(keys){dispatchChange("save_with_changes",keys)}function dispatchReset(keys){dispatchChange("reset_with_changes",keys)}return{setInitialState:function setInitialState(innerCustomInitialState){if(!(0,_lodash.isPlainObject)(innerCustomInitialState)){throw new TypeError("The default state must be an object")}var previousStatus=getStatus();_setInitialState(innerCustomInitialState);removeIgnoredProps(initialState);if(!(0,_lodash.isEqual)(previousStatus,getStatus())){dispatchChange()}},ignoreProps:function ignoreProps(props){ignoredProps=ignoredProps.concat(props);removeIgnoredProps(initialState);return this},onChange:function onChange(callback){if(destroyed||!changeHandlers){throw new Error("Monitor has been destroyed")}if(typeof callback!=="function"){throw new Error("onChange handler must be a function")}changeHandlers.push(callback);state.on("fetch_with_changes",dispatchFetch);state.on("save_with_changes",dispatchSave);state.on("reset_with_changes",dispatchReset);var status=getStatus();if(status.dirty){dispatchChange()}return this},destroy:function destroy(){destroyed=true;changeHandlers=undefined;state.off("fetch_with_changes",dispatchFetch);state.off("save_with_changes",dispatchSave);state.off("reset_with_changes",dispatchReset)}}}},1029:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"getFilterGenerator",{enumerable:true,get:function get(){return _filter_generator.getFilterGenerator}});var _filter_generator=__webpack_require__(6188)},1030:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"showShareContextMenu",{enumerable:true,get:function get(){return _show_share_context_menu.showShareContextMenu}});Object.defineProperty(exports,"ShareContextMenuExtensionsRegistryProvider",{enumerable:true,get:function get(){return _share_action_registry.ShareContextMenuExtensionsRegistryProvider}});var _show_share_context_menu=__webpack_require__(6192);var _share_action_registry=__webpack_require__(6196)},1031:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.showSaveModal=showSaveModal;var _react=_interopRequireDefault(__webpack_require__(0));var _reactDom=_interopRequireDefault(__webpack_require__(27));var _i18n=__webpack_require__(28);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function showSaveModal(saveModal){var container=document.createElement("div");var closeModal=function closeModal(){_reactDom["default"].unmountComponentAtNode(container);document.body.removeChild(container)};var onSave=saveModal.props.onSave;var onSaveConfirmed=function onSaveConfirmed(){onSave.apply(void 0,arguments).then(function(_ref){var id=_ref.id,error=_ref.error;if(id||error){closeModal()}})};document.body.appendChild(container);var element=_react["default"].cloneElement(saveModal,{onSave:onSaveConfirmed,onClose:closeModal});_reactDom["default"].render(_react["default"].createElement(_i18n.I18nContext,null,element),container)}},1032:function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.SavedObjectSaveModal=void 0;var _eui=__webpack_require__(2);var _react=__webpack_require__(10);var _react2=_interopRequireWildcard(__webpack_require__(0));function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var SavedObjectSaveModal=function(_React$Component){_inherits(SavedObjectSaveModal,_React$Component);function SavedObjectSaveModal(){var _getPrototypeOf2;var _this;_classCallCheck(this,SavedObjectSaveModal);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(SavedObjectSaveModal)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"state",{title:_this.props.title,copyOnSave:false,isTitleDuplicateConfirmed:false,hasTitleDuplicate:false,isLoading:false});_defineProperty(_assertThisInitialized(_this),"onTitleDuplicate",function(){_this.setState({isLoading:false,isTitleDuplicateConfirmed:true,hasTitleDuplicate:true})});_defineProperty(_assertThisInitialized(_this),"saveSavedObject",_asyncToGenerator(regeneratorRuntime.mark(function _callee(){return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!_this.state.isLoading){_context.next=2;break}return _context.abrupt("return");case 2:_this.setState({isLoading:true});_context.next=5;return _this.props.onSave({newTitle:_this.state.title,newCopyOnSave:_this.state.copyOnSave,isTitleDuplicateConfirmed:_this.state.isTitleDuplicateConfirmed,onTitleDuplicate:_this.onTitleDuplicate});case 5:case"end":return _context.stop()}}},_callee)})));_defineProperty(_assertThisInitialized(_this),"onTitleChange",function(event){_this.setState({title:event.target.value,isTitleDuplicateConfirmed:false,hasTitleDuplicate:false})});_defineProperty(_assertThisInitialized(_this),"onCopyOnSaveChange",function(event){_this.setState({copyOnSave:event.target.checked})});_defineProperty(_assertThisInitialized(_this),"onFormSubmit",function(event){event.preventDefault();_this.saveSavedObject()});_defineProperty(_assertThisInitialized(_this),"renderDuplicateTitleCallout",function(){if(!_this.state.hasTitleDuplicate){return}return _react2["default"].createElement(_react2.Fragment,null,_react2["default"].createElement(_eui.EuiCallOut,{title:_react2["default"].createElement(_react.FormattedMessage,{id:"common.ui.savedObjects.saveModal.duplicateTitleLabel",defaultMessage:"A {objectType} with the title '{title}' already exists.",values:{objectType:_this.props.objectType,title:_this.state.title}}),color:"warning","data-test-subj":"titleDupicateWarnMsg"},_react2["default"].createElement("p",null,_react2["default"].createElement(_react.FormattedMessage,{id:"common.ui.savedObjects.saveModal.duplicateTitleDescription",defaultMessage:"Click {confirmSaveLabel} to save the {objectType} with the duplicate title.",values:{objectType:_this.props.objectType,confirmSaveLabel:_react2["default"].createElement("strong",null,_react2["default"].createElement(_react.FormattedMessage,{id:"common.ui.savedObjects.saveModal.duplicateTitleDescription.confirmSaveText",defaultMessage:"Confirm Save"}))}}))),_react2["default"].createElement(_eui.EuiSpacer,null))});_defineProperty(_assertThisInitialized(_this),"renderCopyOnSave",function(){if(!_this.props.showCopyOnSave){return}return _react2["default"].createElement(_react2.Fragment,null,_react2["default"].createElement(_eui.EuiSwitch,{"data-test-subj":"saveAsNewCheckbox",checked:_this.state.copyOnSave,onChange:_this.onCopyOnSaveChange,label:_react2["default"].createElement(_react.FormattedMessage,{id:"common.ui.savedObjects.saveModal.saveAsNewLabel",defaultMessage:"Save as a new {objectType}",values:{objectType:_this.props.objectType}})}),_react2["default"].createElement(_eui.EuiSpacer,null))});return _this}_createClass(SavedObjectSaveModal,[{key:"render",value:function render(){var _this$state=this.state,isTitleDuplicateConfirmed=_this$state.isTitleDuplicateConfirmed,hasTitleDuplicate=_this$state.hasTitleDuplicate,title=_this$state.title,isLoading=_this$state.isLoading;return _react2["default"].createElement(_eui.EuiOverlayMask,null,_react2["default"].createElement("form",{onSubmit:this.onFormSubmit},_react2["default"].createElement(_eui.EuiModal,{"data-test-subj":"savedObjectSaveModal",className:"dshSaveModal",onClose:this.props.onClose},_react2["default"].createElement(_eui.EuiModalHeader,null,_react2["default"].createElement(_eui.EuiModalHeaderTitle,null,_react2["default"].createElement(_react.FormattedMessage,{id:"common.ui.savedObjects.saveModal.saveTitle",defaultMessage:"Save {objectType}",values:{objectType:this.props.objectType}}))),_react2["default"].createElement(_eui.EuiModalBody,null,this.renderDuplicateTitleCallout(),_react2["default"].createElement(_eui.EuiForm,null,this.renderCopyOnSave(),_react2["default"].createElement(_eui.EuiFormRow,{fullWidth:true,label:_react2["default"].createElement(_react.FormattedMessage,{id:"common.ui.savedObjects.saveModal.titleLabel",defaultMessage:"Title"})},_react2["default"].createElement(_eui.EuiFieldText,{fullWidth:true,autoFocus:true,"data-test-subj":"savedObjectTitle",value:title,onChange:this.onTitleChange,isInvalid:!isTitleDuplicateConfirmed&&hasTitleDuplicate||title.length===0})),this.props.options)),_react2["default"].createElement(_eui.EuiModalFooter,null,_react2["default"].createElement(_eui.EuiButtonEmpty,{"data-test-subj":"saveCancelButton",onClick:this.props.onClose},_react2["default"].createElement(_react.FormattedMessage,{id:"common.ui.savedObjects.saveModal.cancelButtonLabel",defaultMessage:"Cancel"})),_react2["default"].createElement(_eui.EuiButton,{fill:true,"data-test-subj":"confirmSaveSavedObjectButton",isLoading:isLoading,isDisabled:title.length===0,type:"submit"},this.props.confirmButtonLabel?this.props.confirmButtonLabel:_react2["default"].createElement(_react.FormattedMessage,{id:"common.ui.savedObjects.saveModal.confirmSaveButtonLabel",defaultMessage:"Confirm Save"}))))))}}]);return SavedObjectSaveModal}(_react2["default"].Component);exports.SavedObjectSaveModal=SavedObjectSaveModal},1033:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getRootBreadcrumbs=getRootBreadcrumbs;exports.getSavedSearchBreadcrumbs=getSavedSearchBreadcrumbs;var _i18n=__webpack_require__(5);function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function getRootBreadcrumbs(){return[{text:_i18n.i18n.translate("kbn.discover.rootBreadcrumb",{defaultMessage:"Discover"}),href:"#/discover"}]}function getSavedSearchBreadcrumbs($route){return[].concat(_toConsumableArray(getRootBreadcrumbs()),[{text:$route.current.locals.savedSearch.id}])}},1034:function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.NewVisModal=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(2);var _i18n=__webpack_require__(5);var _chrome=_interopRequireDefault(__webpack_require__(19));var _visualize_constants=__webpack_require__(421);var _search_selection=__webpack_require__(6210);var _type_selection=__webpack_require__(6212);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var baseUrl="#".concat(_visualize_constants.VisualizeConstants.CREATE_PATH,"?");var NewVisModal=function(_React$Component){_inherits(NewVisModal,_React$Component);function NewVisModal(props){var _this;_classCallCheck(this,NewVisModal);_this=_possibleConstructorReturn(this,_getPrototypeOf(NewVisModal).call(this,props));_defineProperty(_assertThisInitialized(_this),"isLabsEnabled",void 0);_defineProperty(_assertThisInitialized(_this),"onCloseModal",function(){_this.setState({showSearchVisModal:false});_this.props.onClose()});_defineProperty(_assertThisInitialized(_this),"onVisTypeSelected",function(visType){if(visType.requiresSearch&&visType.options.showIndexSelection){_this.setState({showSearchVisModal:true,visType:visType})}else{var params=["type=".concat(encodeURIComponent(visType.name))].concat(_toConsumableArray(_this.props.editorParams));_this.props.onClose();location.assign("".concat(baseUrl).concat(params.join("&")))}});_defineProperty(_assertThisInitialized(_this),"onSearchSelected",function(searchId,searchType){_this.props.onClose();var params=["type=".concat(encodeURIComponent(_this.state.visType.name)),"".concat(searchType==="search"?"savedSearchId":"indexPattern","=").concat(searchId)].concat(_toConsumableArray(_this.props.editorParams));location.assign("".concat(baseUrl).concat(params.join("&")))});_this.isLabsEnabled=_chrome["default"].getUiSettingsClient().get("visualize:enableLabs");_this.state={showSearchVisModal:false};return _this}_createClass(NewVisModal,[{key:"render",value:function render(){if(!this.props.isOpen){return null}var visNewVisDialogAriaLabel=_i18n.i18n.translate("kbn.visualize.newVisWizard.helpTextAriaLabel",{defaultMessage:"Start creating your visualization by selecting a type for that visualization. Hit escape to close this modal. Hit Tab key to go further."});var selectionModal=this.state.showSearchVisModal&&this.state.visType?_react["default"].createElement(_eui.EuiModal,{onClose:this.onCloseModal,className:"visNewVisSearchDialog"},_react["default"].createElement(_search_selection.SearchSelection,{onSearchSelected:this.onSearchSelected,visType:this.state.visType})):_react["default"].createElement(_eui.EuiModal,{onClose:this.onCloseModal,className:"visNewVisDialog","aria-label":visNewVisDialogAriaLabel,role:"menu"},_react["default"].createElement(_type_selection.TypeSelection,{showExperimental:this.isLabsEnabled,onVisTypeSelected:this.onVisTypeSelected,visTypesRegistry:this.props.visTypesRegistry,visTypeAliases:this.props.visTypeAliases}));return _react["default"].createElement(_eui.EuiOverlayMask,null,selectionModal)}}]);return NewVisModal}(_react["default"].Component);exports.NewVisModal=NewVisModal;_defineProperty(NewVisModal,"defaultProps",{editorParams:[]})},1035:function(module,exports,__webpack_require__){module.exports=__webpack_require__(18)(712)},1036:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.tryRegisterSettingsComponent=tryRegisterSettingsComponent;exports.registerSettingsComponent=registerSettingsComponent;exports.getSettingsComponent=getSettingsComponent;var registry={};function tryRegisterSettingsComponent(id,component){if(id in registry){return false}registerSettingsComponent(id,component);return true}function registerSettingsComponent(id,component){var allowOverride=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;if(!allowOverride&&id in registry){throw new Error("Component with id ".concat(id," is already registered."))}if(!component.displayName){component.displayName=id}registry[id]=component}function getSettingsComponent(id){if(!(id in registry)){throw new Error("Component not found with id ".concat(id))}return registry[id]}},1037:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.IndexPatternListConfigRegistry=void 0;var _registry=__webpack_require__(107);var IndexPatternListConfigRegistry=(0,_registry.uiRegistry)({name:"indexPatternList",index:["name"],order:["order"]});exports.IndexPatternListConfigRegistry=IndexPatternListConfigRegistry},1038:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.addIndexPatternType=exports.indexPatternTypes=void 0;var indexPatternTypes=[];exports.indexPatternTypes=indexPatternTypes;var addIndexPatternType=function addIndexPatternType(type){return indexPatternTypes.push(type)};exports.addIndexPatternType=addIndexPatternType},1039:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"canAppendWildcard",{enumerable:true,get:function get(){return _can_append_wildcard.canAppendWildcard}});Object.defineProperty(exports,"ensureMinimumTime",{enumerable:true,get:function get(){return _ensure_minimum_time.ensureMinimumTime}});Object.defineProperty(exports,"getIndices",{enumerable:true,get:function get(){return _get_indices.getIndices}});Object.defineProperty(exports,"getMatchedIndices",{enumerable:true,get:function get(){return _get_matched_indices.getMatchedIndices}});Object.defineProperty(exports,"containsIllegalCharacters",{enumerable:true,get:function get(){return _contains_illegal_characters.containsIllegalCharacters}});Object.defineProperty(exports,"extractTimeFields",{enumerable:true,get:function get(){return _extract_time_fields.extractTimeFields}});var _can_append_wildcard=__webpack_require__(6348);var _ensure_minimum_time=__webpack_require__(6349);var _get_indices=__webpack_require__(6350);var _get_matched_indices=__webpack_require__(6351);var _contains_illegal_characters=__webpack_require__(6352);var _extract_time_fields=__webpack_require__(6353)},104:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AggRow=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(17));var _react=_interopRequireDefault(__webpack_require__(0));var _lodash=__webpack_require__(1);var _add_delete_buttons=__webpack_require__(163);var _eui=__webpack_require__(2);var _react2=__webpack_require__(10);var _series_drag_handler=__webpack_require__(345);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function AggRowUi(props){var iconType="eyeClosed";var iconColor="subdued";var lastSibling=(0,_lodash.last)(props.siblings);var intl=props.intl;if(lastSibling.id===props.model.id){iconType="eye";iconColor="text"}return _react["default"].createElement("div",{className:"tvbAggRow"},_react["default"].createElement(_eui.EuiFlexGroup,{"data-test-subj":"aggRow",gutterSize:"s",alignItems:"flexStart",responsive:false},_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiIcon,{className:"tvbAggRow__visibilityIcon",type:iconType,color:iconColor})),_react["default"].createElement(_eui.EuiFlexItem,{className:"tvbAggRow__children"},props.children),_react["default"].createElement(_series_drag_handler.SeriesDragHandler,{dragHandleProps:props.dragHandleProps,hideDragHandler:props.disableDelete}),_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_add_delete_buttons.AddDeleteButtons,{testSubj:"addMetric",addTooltip:intl.formatMessage({id:"tsvb.aggRow.addMetricButtonTooltip",defaultMessage:"Add Metric"}),deleteTooltip:intl.formatMessage({id:"tsvb.aggRow.deleteMetricButtonTooltip",defaultMessage:"Delete Metric"}),onAdd:props.onAdd,onDelete:props.onDelete,disableDelete:props.disableDelete}))))}AggRowUi.propTypes={disableDelete:_propTypes["default"].bool,model:_propTypes["default"].object,onAdd:_propTypes["default"].func,onDelete:_propTypes["default"].func,siblings:_propTypes["default"].array,dragHandleProps:_propTypes["default"].object};var AggRow=(0,_react2.injectI18n)(AggRowUi);exports.AggRow=AggRow},1040:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.extractNanos=extractNanos;exports.convertIsoToNanosAsStr=convertIsoToNanosAsStr;exports.convertIsoToMillis=convertIsoToMillis;exports.convertTimeValueToIso=convertTimeValueToIso;var _moment=_interopRequireDefault(__webpack_require__(23));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function extractNanos(){var timeFieldValue=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";var fieldParts=timeFieldValue.split(".");var fractionSeconds=fieldParts.length===2?fieldParts[1].replace("Z",""):"";return fractionSeconds.length!==9?fractionSeconds.padEnd(9,"0"):fractionSeconds}function convertIsoToNanosAsStr(isoValue){var nanos=extractNanos(isoValue);var millis=convertIsoToMillis(isoValue);return"".concat(millis).concat(nanos.substr(3,6))}function convertIsoToMillis(isoValue){var date=new Date(isoValue);return date.getTime()}function convertTimeValueToIso(timeValueMillis,nanosValue){if(!timeValueMillis){return null}var isoString=(0,_moment["default"])(timeValueMillis).toISOString();if(!isoString){return null}else if(nanosValue!==""){return"".concat(isoString.substring(0,isoString.length-4)).concat(nanosValue,"Z")}return isoString}},1041:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.LOADING_STATUS=exports.FAILURE_REASONS=void 0;var FAILURE_REASONS={UNKNOWN:"unknown",INVALID_TIEBREAKER:"invalid_tiebreaker"};exports.FAILURE_REASONS=FAILURE_REASONS;var LOADING_STATUS={FAILED:"failed",LOADED:"loaded",LOADING:"loading",UNINITIALIZED:"uninitialized"};exports.LOADING_STATUS=LOADING_STATUS},120:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AggSelect=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(17));var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(2);var _i18n=__webpack_require__(5);var _react2=__webpack_require__(10);var _check_ui_restrictions=__webpack_require__(502);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}var metricAggs=[{label:_i18n.i18n.translate("tsvb.aggSelect.metricsAggs.averageLabel",{defaultMessage:"Average"}),value:"avg"},{label:_i18n.i18n.translate("tsvb.aggSelect.metricsAggs.cardinalityLabel",{defaultMessage:"Cardinality"}),value:"cardinality"},{label:_i18n.i18n.translate("tsvb.aggSelect.metricsAggs.countLabel",{defaultMessage:"Count"}),value:"count"},{label:_i18n.i18n.translate("tsvb.aggSelect.metricsAggs.filterRatioLabel",{defaultMessage:"Filter Ratio"}),value:"filter_ratio"},{label:_i18n.i18n.translate("tsvb.aggSelect.metricsAggs.maxLabel",{defaultMessage:"Max"}),value:"max"},{label:_i18n.i18n.translate("tsvb.aggSelect.metricsAggs.minLabel",{defaultMessage:"Min"}),value:"min"},{label:_i18n.i18n.translate("tsvb.aggSelect.metricsAggs.percentileLabel",{defaultMessage:"Percentile"}),value:"percentile"},{label:_i18n.i18n.translate("tsvb.aggSelect.metricsAggs.percentileRankLabel",{defaultMessage:"Percentile Rank"}),value:"percentile_rank"},{label:_i18n.i18n.translate("tsvb.aggSelect.metricsAggs.staticValueLabel",{defaultMessage:"Static Value"}),value:"static"},{label:_i18n.i18n.translate("tsvb.aggSelect.metricsAggs.stdDeviationLabel",{defaultMessage:"Std. Deviation"}),value:"std_deviation"},{label:_i18n.i18n.translate("tsvb.aggSelect.metricsAggs.sumLabel",{defaultMessage:"Sum"}),value:"sum"},{label:_i18n.i18n.translate("tsvb.aggSelect.metricsAggs.sumOfSquaresLabel",{defaultMessage:"Sum of Squares"}),value:"sum_of_squares"},{label:_i18n.i18n.translate("tsvb.aggSelect.metricsAggs.topHitLabel",{defaultMessage:"Top Hit"}),value:"top_hit"},{label:_i18n.i18n.translate("tsvb.aggSelect.metricsAggs.valueCountLabel",{defaultMessage:"Value Count"}),value:"value_count"},{label:_i18n.i18n.translate("tsvb.aggSelect.metricsAggs.varianceLabel",{defaultMessage:"Variance"}),value:"variance"}];var pipelineAggs=[{label:_i18n.i18n.translate("tsvb.aggSelect.pipelineAggs.bucketScriptLabel",{defaultMessage:"Bucket Script"}),value:"calculation"},{label:_i18n.i18n.translate("tsvb.aggSelect.pipelineAggs.cumulativeSumLabel",{defaultMessage:"Cumulative Sum"}),value:"cumulative_sum"},{label:_i18n.i18n.translate("tsvb.aggSelect.pipelineAggs.derivativeLabel",{defaultMessage:"Derivative"}),value:"derivative"},{label:_i18n.i18n.translate("tsvb.aggSelect.pipelineAggs.movingAverageLabel",{defaultMessage:"Moving Average"}),value:"moving_average"},{label:_i18n.i18n.translate("tsvb.aggSelect.pipelineAggs.positiveOnlyLabel",{defaultMessage:"Positive Only"}),value:"positive_only"},{label:_i18n.i18n.translate("tsvb.aggSelect.pipelineAggs.serialDifferenceLabel",{defaultMessage:"Serial Difference"}),value:"serial_diff"}];var siblingAggs=[{label:_i18n.i18n.translate("tsvb.aggSelect.siblingAggs.overallAverageLabel",{defaultMessage:"Overall Average"}),value:"avg_bucket"},{label:_i18n.i18n.translate("tsvb.aggSelect.siblingAggs.overallMaxLabel",{defaultMessage:"Overall Max"}),value:"max_bucket"},{label:_i18n.i18n.translate("tsvb.aggSelect.siblingAggs.overallMinLabel",{defaultMessage:"Overall Min"}),value:"min_bucket"},{label:_i18n.i18n.translate("tsvb.aggSelect.siblingAggs.overallStdDeviationLabel",{defaultMessage:"Overall Std. Deviation"}),value:"std_deviation_bucket"},{label:_i18n.i18n.translate("tsvb.aggSelect.siblingAggs.overallSumLabel",{defaultMessage:"Overall Sum"}),value:"sum_bucket"},{label:_i18n.i18n.translate("tsvb.aggSelect.siblingAggs.overallSumOfSquaresLabel",{defaultMessage:"Overall Sum of Squares"}),value:"sum_of_squares_bucket"},{label:_i18n.i18n.translate("tsvb.aggSelect.siblingAggs.overallVarianceLabel",{defaultMessage:"Overall Variance"}),value:"variance_bucket"}];var specialAggs=[{label:_i18n.i18n.translate("tsvb.aggSelect.specialAggs.seriesAggLabel",{defaultMessage:"Series Agg"}),value:"series_agg"},{label:_i18n.i18n.translate("tsvb.aggSelect.specialAggs.mathLabel",{defaultMessage:"Math"}),value:"math"}];var allAggOptions=[].concat(metricAggs,pipelineAggs,siblingAggs,specialAggs);function filterByPanelType(panelType){return function(agg){if(panelType==="table")return agg.value!=="series_agg";return true}}function AggSelectUi(props){var siblings=props.siblings,panelType=props.panelType,value=props.value,onChange=props.onChange,intl=props.intl,uiRestrictions=props.uiRestrictions,rest=_objectWithoutProperties(props,["siblings","panelType","value","onChange","intl","uiRestrictions"]);var selectedOptions=allAggOptions.filter(function(option){return value===option.value&&(0,_check_ui_restrictions.isMetricEnabled)(option.value,uiRestrictions)});var enablePipelines=siblings.some(function(s){return!!metricAggs.find(function(m){return m.value===s.type})});if(siblings.length<=1)enablePipelines=false;var options;if(panelType==="metrics"){options=metricAggs}else{var disableSiblingAggs=function disableSiblingAggs(agg){return _objectSpread({},agg,{disabled:!enablePipelines||!(0,_check_ui_restrictions.isMetricEnabled)(agg.value,uiRestrictions)})};options=[{label:intl.formatMessage({id:"tsvb.aggSelect.aggGroups.metricAggLabel",defaultMessage:"Metric Aggregations"}),options:metricAggs.map(function(agg){return _objectSpread({},agg,{disabled:!(0,_check_ui_restrictions.isMetricEnabled)(agg.value,uiRestrictions)})})},{label:intl.formatMessage({id:"tsvb.aggSelect.aggGroups.parentPipelineAggLabel",defaultMessage:"Parent Pipeline Aggregations"}),options:pipelineAggs.filter(filterByPanelType(panelType)).map(disableSiblingAggs)},{label:intl.formatMessage({id:"tsvb.aggSelect.aggGroups.siblingPipelineAggLabel",defaultMessage:"Sibling Pipeline Aggregations"}),options:siblingAggs.map(disableSiblingAggs)},{label:intl.formatMessage({id:"tsvb.aggSelect.aggGroups.specialAggLabel",defaultMessage:"Special Aggregations"}),options:specialAggs.map(disableSiblingAggs)}]}var handleChange=function handleChange(selectedOptions){if(!selectedOptions||selectedOptions.length<=0)return;onChange(selectedOptions)};return _react["default"].createElement("div",{"data-test-subj":"aggSelector"},_react["default"].createElement(_eui.EuiComboBox,_extends({isClearable:false,placeholder:intl.formatMessage({id:"tsvb.aggSelect.selectAggPlaceholder",defaultMessage:"Select aggregation"}),options:options,selectedOptions:selectedOptions,onChange:handleChange,singleSelection:{asPlainText:true}},rest)))}AggSelectUi.propTypes={onChange:_propTypes["default"].func,panelType:_propTypes["default"].string,siblings:_propTypes["default"].array,value:_propTypes["default"].string,uiRestrictions:_propTypes["default"].object};var AggSelect=(0,_react2.injectI18n)(AggSelectUi);exports.AggSelect=AggSelect},121:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createChangeHandler=void 0;var _lodash=_interopRequireDefault(__webpack_require__(1));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var createChangeHandler=function createChangeHandler(handleChange,model){return function(part){var doc=_lodash["default"].assign({},model,part);handleChange(doc)}};exports.createChangeHandler=createChangeHandler},139:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DashboardViewMode=void 0;var DashboardViewMode;exports.DashboardViewMode=DashboardViewMode;(function(DashboardViewMode){DashboardViewMode["EDIT"]="edit";DashboardViewMode["VIEW"]="view"})(DashboardViewMode||(exports.DashboardViewMode=DashboardViewMode={}))},163:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AddDeleteButtons=AddDeleteButtons;var _propTypes=_interopRequireDefault(__webpack_require__(17));var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(2);var _i18n=__webpack_require__(5);var _lodash=__webpack_require__(1);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function AddDeleteButtons(props){var testSubj=props.testSubj;var createDelete=function createDelete(){if(props.disableDelete){return null}return _react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiToolTip,{content:props.deleteTooltip},_react["default"].createElement(_eui.EuiButtonIcon,{"data-test-subj":"".concat(testSubj,"DeleteBtn"),"aria-label":props.deleteTooltip,color:"danger",iconType:"trash",onClick:props.onDelete})))};var createAdd=function createAdd(){if(props.disableAdd){return null}return _react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiToolTip,{content:props.addTooltip},_react["default"].createElement(_eui.EuiButtonIcon,{"data-test-subj":"".concat(testSubj,"AddBtn"),"aria-label":props.addTooltip,iconType:"plusInCircle",onClick:props.onAdd})))};var createClone=function createClone(){var cloneBtn=null;if(props.onClone&&!props.disableAdd){cloneBtn=_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiToolTip,{content:props.cloneTooltip},_react["default"].createElement(_eui.EuiButtonIcon,{"data-test-subj":"".concat(testSubj,"CloneBtn"),"aria-label":props.cloneTooltip,iconType:"copy",onClick:props.onClone})))}return cloneBtn};var createActivatePanel=function createActivatePanel(){var activatePanelBtn=null;if((0,_lodash.isBoolean)(props.isPanelActive)){var tooltip=props.isPanelActive?props.deactivatePanelTooltip:props.activatePanelTooltip;var iconType=props.isPanelActive?"eye":"eyeClosed";activatePanelBtn=_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiToolTip,{content:tooltip},_react["default"].createElement(_eui.EuiButtonIcon,{"data-test-subj":"".concat(testSubj,"ActivatePanelBtn"),"aria-label":tooltip,iconType:iconType,onClick:props.togglePanelActivation})))}return activatePanelBtn};var deleteBtn=createDelete();var addBtn=createAdd();var cloneBtn=createClone();var activatePanelBtn=createActivatePanel();return _react["default"].createElement(_eui.EuiFlexGroup,{gutterSize:"s",responsive:props.responsive,justifyContent:"flexEnd"},activatePanelBtn,cloneBtn,addBtn,deleteBtn)}AddDeleteButtons.defaultProps={testSubj:"Add",activeTooltip:_i18n.i18n.translate("tsvb.addDeleteButtons.addButtonDefaultTooltip",{defaultMessage:"Add"}),addTooltip:_i18n.i18n.translate("tsvb.addDeleteButtons.addButtonDefaultTooltip",{defaultMessage:"Add"}),deleteTooltip:_i18n.i18n.translate("tsvb.addDeleteButtons.deleteButtonDefaultTooltip",{defaultMessage:"Delete"}),cloneTooltip:_i18n.i18n.translate("tsvb.addDeleteButtons.cloneButtonDefaultTooltip",{defaultMessage:"Clone"}),activatePanelTooltip:_i18n.i18n.translate("tsvb.addDeleteButtons.reEnableTooltip",{defaultMessage:"Re-enable"}),deactivatePanelTooltip:_i18n.i18n.translate("tsvb.addDeleteButtons.temporarilyDisableTooltip",{defaultMessage:"Temporarily Disable"})};AddDeleteButtons.propTypes={addTooltip:_propTypes["default"].string,deleteTooltip:_propTypes["default"].string,cloneTooltip:_propTypes["default"].string,activatePanelTooltip:_propTypes["default"].string,deactivatePanelTooltip:_propTypes["default"].string,togglePanelActivation:_propTypes["default"].func,isPanelActive:_propTypes["default"].bool,disableAdd:_propTypes["default"].bool,disableDelete:_propTypes["default"].bool,onClone:_propTypes["default"].func,onAdd:_propTypes["default"].func,onDelete:_propTypes["default"].func,responsive:_propTypes["default"].bool}},164:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getDefaultQueryLanguage=getDefaultQueryLanguage;var _chrome=_interopRequireDefault(__webpack_require__(19));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getDefaultQueryLanguage(){return _chrome["default"].getUiSettingsClient().get("search:queryLanguage")}},18:function(module,exports){module.exports=vendors},180:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _exportNames={EmbeddableFactory:true,OnEmbeddableStateChanged:true,EmbeddableFactoriesRegistryProvider:true,ContainerState:true,EmbeddableState:true};Object.defineProperty(exports,"EmbeddableFactory",{enumerable:true,get:function get(){return _embeddable_factory.EmbeddableFactory}});Object.defineProperty(exports,"OnEmbeddableStateChanged",{enumerable:true,get:function get(){return _embeddable_factory.OnEmbeddableStateChanged}});Object.defineProperty(exports,"EmbeddableFactoriesRegistryProvider",{enumerable:true,get:function get(){return _embeddable_factories_registry.EmbeddableFactoriesRegistryProvider}});Object.defineProperty(exports,"ContainerState",{enumerable:true,get:function get(){return _types.ContainerState}});Object.defineProperty(exports,"EmbeddableState",{enumerable:true,get:function get(){return _types.EmbeddableState}});var _embeddable_factory=__webpack_require__(6090);var _embeddable=__webpack_require__(6091);Object.keys(_embeddable).forEach(function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _embeddable[key]}})});var _context_menu_actions=__webpack_require__(6092);Object.keys(_context_menu_actions).forEach(function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _context_menu_actions[key]}})});var _embeddable_factories_registry=__webpack_require__(671);var _types=__webpack_require__(6098)},1969:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FormRow=FormRow;var _propTypes=_interopRequireDefault(__webpack_require__(17));var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function FormRow(props){var control=props.children;if(props.disableMsg){control=_react["default"].createElement(_eui.EuiToolTip,{placement:"top",content:props.disableMsg},control)}var label=props.warningMsg?_react["default"].createElement(_react["default"].Fragment,null,_react["default"].createElement(_eui.EuiToolTip,{position:"top",content:props.warningMsg},_react["default"].createElement(_eui.EuiIcon,{type:"alert"})),props.label):props.label;return _react["default"].createElement(_eui.EuiFormRow,{label:label,id:props.id,"data-test-subj":"inputControl"+props.controlIndex},control)}FormRow.propTypes={label:_propTypes["default"].string.isRequired,warningMsg:_propTypes["default"].string,id:_propTypes["default"].string.isRequired,children:_propTypes["default"].node.isRequired,controlIndex:_propTypes["default"].number.isRequired,disableMsg:_propTypes["default"].string}},1970:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.noValuesDisableMsg=noValuesDisableMsg;exports.noIndexPatternMsg=noIndexPatternMsg;exports.Control=void 0;var _lodash=_interopRequireDefault(__webpack_require__(1));var _i18n=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function noValuesDisableMsg(fieldName,indexPatternName){return _i18n.i18n.translate("inputControl.control.noValuesDisableTooltip",{defaultMessage:'Filtering occurs on the "{fieldName}" field, which doesn\'t exist on any documents in the "{indexPatternName}" index pattern. Choose a different field or index documents that contain values for this field.',values:{fieldName:fieldName,indexPatternName:indexPatternName}})}function noIndexPatternMsg(indexPatternId){return _i18n.i18n.translate("inputControl.control.noIndexPatternTooltip",{defaultMessage:"Could not locate index-pattern id: {indexPatternId}.",values:{indexPatternId:indexPatternId}})}var Control=function(){function Control(controlParams,filterManager,kbnApi,useTimeFilter){var _this=this;_classCallCheck(this,Control);_defineProperty(this,"format",function(value){var field=_this.filterManager.getField();if(field){return field.format.convert(value)}return value});this.id=controlParams.id;this.controlParams=controlParams;this.options=controlParams.options;this.type=controlParams.type;this.label=controlParams.label?controlParams.label:controlParams.fieldName;this.useTimeFilter=useTimeFilter;this.filterManager=filterManager;this.kbnApi=kbnApi;this.reset();this.disable(_i18n.i18n.translate("inputControl.control.notInitializedTooltip",{defaultMessage:"Control has not been initialized"}))}_createClass(Control,[{key:"fetch",value:function(){var _fetch=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:throw new Error("fetch method not defined, subclass are required to implement");case 1:case"end":return _context.stop()}}},_callee)}));function fetch(){return _fetch.apply(this,arguments)}return fetch}()},{key:"setAncestors",value:function setAncestors(ancestors){this.ancestors=ancestors}},{key:"hasAncestors",value:function hasAncestors(){return this.ancestors&&this.ancestors.length>0}},{key:"hasUnsetAncestor",value:function hasUnsetAncestor(){return this.ancestors.reduce(function(accumulator,ancestor){return accumulator||!ancestor.hasValue()},false)}},{key:"getAncestorValues",value:function getAncestorValues(){return this.ancestors.map(function(ancestor){return ancestor.value})}},{key:"getAncestorFilters",value:function getAncestorFilters(){return this.ancestors.map(function(ancestor){return ancestor.filterManager.createFilter(ancestor.value)})}},{key:"isEnabled",value:function isEnabled(){return this.enable}},{key:"disable",value:function disable(reason){this.enable=false;this.disabledReason=reason}},{key:"set",value:function set(newValue){this.value=newValue;if(this.hasValue()){this._kbnFilter=this.filterManager.createFilter(this.value)}else{this._kbnFilter=null}}},{key:"reset",value:function reset(){this._kbnFilter=null;this.value=this.filterManager.getValueFromFilterBar()}},{key:"clear",value:function clear(){this.value=undefined}},{key:"hasChanged",value:function hasChanged(){return!_lodash["default"].isEqual(this.value,this.filterManager.getValueFromFilterBar())}},{key:"hasKbnFilter",value:function hasKbnFilter(){if(this._kbnFilter){return true}return false}},{key:"getKbnFilter",value:function getKbnFilter(){return this._kbnFilter}},{key:"hasValue",value:function hasValue(){return this.value!==undefined}}]);return Control}();exports.Control=Control},1971:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FilterManager=void 0;var _lodash=_interopRequireDefault(__webpack_require__(1));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var FilterManager=function(){function FilterManager(controlId,fieldName,indexPattern,queryFilter){_classCallCheck(this,FilterManager);this.controlId=controlId;this.fieldName=fieldName;this.indexPattern=indexPattern;this.queryFilter=queryFilter}_createClass(FilterManager,[{key:"getIndexPattern",value:function getIndexPattern(){return this.indexPattern}},{key:"getField",value:function getField(){return this.indexPattern.fields.byName[this.fieldName]}},{key:"createFilter",value:function createFilter(){throw new Error("Must implement createFilter.")}},{key:"findFilters",value:function findFilters(){var _this=this;var kbnFilters=_lodash["default"].flatten([this.queryFilter.getAppFilters(),this.queryFilter.getGlobalFilters()]);return kbnFilters.filter(function(kbnFilter){return _lodash["default"].get(kbnFilter,"meta.controlledBy")===_this.controlId})}},{key:"getValueFromFilterBar",value:function getValueFromFilterBar(){throw new Error("Must implement getValueFromFilterBar.")}}]);return FilterManager}();exports.FilterManager=FilterManager},1972:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createSearchSource=createSearchSource;function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function createSearchSource(kbnApi,initialState,indexPattern,aggs,useTimeFilter){var filters=arguments.length>5&&arguments[5]!==undefined?arguments[5]:[];var searchSource=new kbnApi.SearchSource(initialState);searchSource.setParent(false);searchSource.setField("filter",function(){var activeFilters=_toConsumableArray(filters);if(useTimeFilter){activeFilters.push(kbnApi.timeFilter.createFilter(indexPattern))}return activeFilters});searchSource.setField("size",0);searchSource.setField("index",indexPattern);searchSource.setField("aggs",aggs);return searchSource}},1973:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"getLineageMap",{enumerable:true,get:function get(){return _lineage_map.getLineageMap}});Object.defineProperty(exports,"getParentCandidates",{enumerable:true,get:function get(){return _parent_candidates.getParentCandidates}});var _lineage_map=__webpack_require__(5695);var _parent_candidates=__webpack_require__(5696)},1974:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.IndexPatternSelectFormRow=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(17));var _react=_interopRequireDefault(__webpack_require__(0));var _react2=__webpack_require__(10);var _index_pattern_select=__webpack_require__(1353);var _eui=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function IndexPatternSelectFormRowUi(props){var controlIndex=props.controlIndex,indexPatternId=props.indexPatternId,intl=props.intl,onChange=props.onChange;var selectId="indexPatternSelect-".concat(controlIndex);return _react["default"].createElement(_eui.EuiFormRow,{id:selectId,label:intl.formatMessage({id:"inputControl.editor.indexPatternSelect.patternLabel",defaultMessage:"Index Pattern"})},_react["default"].createElement(_index_pattern_select.IndexPatternSelect,{placeholder:intl.formatMessage({id:"inputControl.editor.indexPatternSelect.patternPlaceholder",defaultMessage:"Select index pattern..."}),indexPatternId:indexPatternId,onChange:onChange,"data-test-subj":selectId}))}IndexPatternSelectFormRowUi.propTypes={onChange:_propTypes["default"].func.isRequired,indexPatternId:_propTypes["default"].string,controlIndex:_propTypes["default"].number.isRequired};var IndexPatternSelectFormRow=(0,_react2.injectI18n)(IndexPatternSelectFormRowUi);exports.IndexPatternSelectFormRow=IndexPatternSelectFormRow},1975:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FieldSelect=void 0;var _lodash=_interopRequireDefault(__webpack_require__(1));var _propTypes=_interopRequireDefault(__webpack_require__(17));var _react=_interopRequireWildcard(__webpack_require__(0));var _react2=__webpack_require__(10);var _eui=__webpack_require__(2);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var FieldSelectUi=function(_Component){_inherits(FieldSelectUi,_Component);function FieldSelectUi(props){var _this;_classCallCheck(this,FieldSelectUi);_this=_possibleConstructorReturn(this,_getPrototypeOf(FieldSelectUi).call(this,props));_defineProperty(_assertThisInitialized(_this),"loadFields",function(indexPatternId){_this.setState({isLoading:true,fields:[],indexPatternId:indexPatternId},_this.debouncedLoad.bind(null,indexPatternId))});_defineProperty(_assertThisInitialized(_this),"debouncedLoad",_lodash["default"].debounce(function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(indexPatternId){var indexPattern,fieldsByTypeMap,fields;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(!indexPatternId||indexPatternId.length===0)){_context.next=2;break}return _context.abrupt("return");case 2:_context.prev=2;_context.next=5;return _this.props.getIndexPattern(indexPatternId);case 5:indexPattern=_context.sent;_context.next=11;break;case 8:_context.prev=8;_context.t0=_context["catch"](2);return _context.abrupt("return");case 11:if(!_this._hasUnmounted){_context.next=13;break}return _context.abrupt("return");case 13:if(!(indexPattern.id!==_this.state.indexPatternId)){_context.next=15;break}return _context.abrupt("return");case 15:fieldsByTypeMap=new Map;fields=[];indexPattern.fields.filter(_this.filterField).forEach(function(field){if(fieldsByTypeMap.has(field.type)){var fieldsList=fieldsByTypeMap.get(field.type);fieldsList.push(field.name);fieldsByTypeMap.set(field.type,fieldsList)}else{fieldsByTypeMap.set(field.type,[field.name])}});fieldsByTypeMap.forEach(function(fieldsList,fieldType){fields.push({label:fieldType,options:fieldsList.sort().map(function(fieldName){return{value:fieldName,label:fieldName}})})});fields.sort(function(a,b){if(a.label<b.label)return-1;if(a.label>b.label)return 1;return 0});_this.setState({isLoading:false,fields:fields});case 21:case"end":return _context.stop()}}},_callee,null,[[2,8]])}));return function(_x){return _ref.apply(this,arguments)}}(),300));_defineProperty(_assertThisInitialized(_this),"onChange",function(selectedOptions){_this.props.onChange(_lodash["default"].get(selectedOptions,"0.value"))});_this._hasUnmounted=false;_this.state={isLoading:false,fields:[],indexPatternId:props.indexPatternId};_this.filterField=_lodash["default"].get(props,"filterField",function(){return true});return _this}_createClass(FieldSelectUi,[{key:"componentWillUnmount",value:function componentWillUnmount(){this._hasUnmounted=true}},{key:"componentDidMount",value:function componentDidMount(){this.loadFields(this.state.indexPatternId)}},{key:"componentWillReceiveProps",value:function componentWillReceiveProps(nextProps){if(this.props.indexPatternId!==nextProps.indexPatternId){this.loadFields(nextProps.indexPatternId)}}},{key:"render",value:function render(){if(!this.props.indexPatternId||this.props.indexPatternId.trim().length===0){return null}var selectId="fieldSelect-".concat(this.props.controlIndex);var selectedOptions=[];var intl=this.props.intl;if(this.props.fieldName){selectedOptions.push({value:this.props.fieldName,label:this.props.fieldName})}return _react["default"].createElement(_eui.EuiFormRow,{id:selectId,label:_react["default"].createElement(_react2.FormattedMessage,{id:"inputControl.editor.fieldSelect.fieldLabel",defaultMessage:"Field"})},_react["default"].createElement(_eui.EuiComboBox,{placeholder:intl.formatMessage({id:"inputControl.editor.fieldSelect.selectFieldPlaceholder",defaultMessage:"Select field..."}),singleSelection:true,isLoading:this.state.isLoading,options:this.state.fields,selectedOptions:selectedOptions,onChange:this.onChange,"data-test-subj":selectId}))}}]);return FieldSelectUi}(_react.Component);FieldSelectUi.propTypes={getIndexPattern:_propTypes["default"].func.isRequired,indexPatternId:_propTypes["default"].string,onChange:_propTypes["default"].func.isRequired,fieldName:_propTypes["default"].string,filterField:_propTypes["default"].func,controlIndex:_propTypes["default"].number.isRequired};var FieldSelect=(0,_react2.injectI18n)(FieldSelectUi);exports.FieldSelect=FieldSelect},1976:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]="\x3c!-- vis type specific options --\x3e\n<gauge-options></gauge-options>\n"},1977:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.fetchFields=fetchFields;exports.fetchIndexPatternFields=fetchIndexPatternFields;var _kfetch=__webpack_require__(109);var _notify=__webpack_require__(24);var _i18n=__webpack_require__(5);var _extract_index_patterns=__webpack_require__(1978);function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function fetchFields(){return _fetchFields.apply(this,arguments)}function _fetchFields(){_fetchFields=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var indexPatterns,patterns,indexFields,fields,_args=arguments;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:indexPatterns=_args.length>0&&_args[0]!==undefined?_args[0]:["*"];patterns=Array.isArray(indexPatterns)?indexPatterns:[indexPatterns];_context.prev=2;_context.next=5;return Promise.all(patterns.map(function(pattern){return(0,_kfetch.kfetch)({method:"GET",pathname:"/api/metrics/fields",query:{index:pattern}})}));case 5:indexFields=_context.sent;fields=patterns.reduce(function(cumulatedFields,currentPattern,index){return _objectSpread({},cumulatedFields,_defineProperty({},currentPattern,indexFields[index]))},{});return _context.abrupt("return",fields);case 10:_context.prev=10;_context.t0=_context["catch"](2);_notify.toastNotifications.addDanger({title:_i18n.i18n.translate("tsvb.fetchFields.loadIndexPatternFieldsErrorMessage",{defaultMessage:"Unable to load index_pattern fields"}),text:_context.t0.message});case 13:case"end":return _context.stop()}}},_callee,null,[[2,10]])}));return _fetchFields.apply(this,arguments)}function fetchIndexPatternFields(_x){return _fetchIndexPatternFields.apply(this,arguments)}function _fetchIndexPatternFields(){_fetchIndexPatternFields=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(_ref){var params,_ref$fields,fields,indexPatterns;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:params=_ref.params,_ref$fields=_ref.fields,fields=_ref$fields===void 0?{}:_ref$fields;indexPatterns=(0,_extract_index_patterns.extractIndexPatterns)(params,fields);_context2.next=4;return fetchFields(indexPatterns);case 4:return _context2.abrupt("return",_context2.sent);case 5:case"end":return _context2.stop()}}},_callee2)}));return _fetchIndexPatternFields.apply(this,arguments)}},1978:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.extractIndexPatterns=extractIndexPatterns;var _lodash=__webpack_require__(1);function extractIndexPatterns(panel){var excludedFields=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var patterns=[];if(!excludedFields[panel.index_pattern]){patterns.push(panel.index_pattern)}panel.series.forEach(function(series){var indexPattern=series.series_index_pattern;if(indexPattern&&series.override_index_pattern&&!excludedFields[indexPattern]){patterns.push(indexPattern)}});if(panel.annotations){panel.annotations.forEach(function(item){var indexPattern=item.index_pattern;if(indexPattern&&!excludedFields[indexPattern]){patterns.push(indexPattern)}})}if(patterns.length===0){patterns.push("")}return(0,_lodash.uniq)(patterns).sort()}},1979:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VisEditor=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(17));var _react=_interopRequireWildcard(__webpack_require__(0));var _chrome=_interopRequireDefault(__webpack_require__(19));var Rx=_interopRequireWildcard(__webpack_require__(49));var _operators=__webpack_require__(106);var _lodash=__webpack_require__(1);var _esQuery=__webpack_require__(51);var _vis_editor_visualization=__webpack_require__(5720);var _visualization=__webpack_require__(5729);var _vis_picker=__webpack_require__(5769);var _panel_config=__webpack_require__(5770);var _create_brush_handler=__webpack_require__(5838);var _fetch_fields=__webpack_require__(1977);var _extract_index_patterns=__webpack_require__(1978);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var VIS_STATE_DEBOUNCE_DELAY=200;var queryOptions=_chrome["default"].getUiSettingsClient().get("query:allowLeadingWildcards");var VisEditor=function(_Component){_inherits(VisEditor,_Component);function VisEditor(props){var _this;_classCallCheck(this,VisEditor);_this=_possibleConstructorReturn(this,_getPrototypeOf(VisEditor).call(this,props));_defineProperty(_assertThisInitialized(_this),"getConfig",function(){var _this$props$config;return(_this$props$config=_this.props.config).get.apply(_this$props$config,arguments)});_defineProperty(_assertThisInitialized(_this),"handleUiState",function(field,value){_this.props.vis.uiStateVal(field,value)});_defineProperty(_assertThisInitialized(_this),"updateVisState",(0,_lodash.debounce)(function(){_this.props.vis.params=_this.state.model;_this.props.vis.updateState()},VIS_STATE_DEBOUNCE_DELAY));_defineProperty(_assertThisInitialized(_this),"isValidKueryQuery",function(filterQuery){if(filterQuery&&filterQuery.language==="kuery"){try{(0,_esQuery.fromKueryExpression)(filterQuery.query,{allowLeadingWildcards:queryOptions})}catch(error){return false}}return true});_defineProperty(_assertThisInitialized(_this),"handleChange",function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(partialModel){var hasTypeChanged,nextModel,dirty,extractedIndexPatterns;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(0,_lodash.isEmpty)(partialModel)){_context.next=2;break}return _context.abrupt("return");case 2:hasTypeChanged=partialModel.type&&_this.state.model.type!==partialModel.type;nextModel=_objectSpread({},_this.state.model,partialModel);dirty=true;if(_this.state.autoApply||hasTypeChanged){_this.updateVisState();dirty=false}if(_this.props.isEditorMode){extractedIndexPatterns=(0,_extract_index_patterns.extractIndexPatterns)(nextModel);if(!(0,_lodash.isEqual)(_this.state.extractedIndexPatterns,extractedIndexPatterns)){(0,_fetch_fields.fetchFields)(extractedIndexPatterns).then(function(visFields){return _this.setState({visFields:visFields,extractedIndexPatterns:extractedIndexPatterns})})}}_this.setState({dirty:dirty,model:nextModel});case 8:case"end":return _context.stop()}}},_callee)}));return function(_x){return _ref.apply(this,arguments)}}());_defineProperty(_assertThisInitialized(_this),"handleCommit",function(){_this.updateVisState();_this.setState({dirty:false})});_defineProperty(_assertThisInitialized(_this),"handleAutoApplyToggle",function(event){_this.setState({autoApply:event.target.checked})});_defineProperty(_assertThisInitialized(_this),"onDataChange",function(_ref2){var visData=_ref2.visData;_this.visDataSubject.next(visData)});var vis=props.vis;_this.appState=vis.API.getAppState();_this.state={model:props.visParams,dirty:false,autoApply:true,visFields:props.visFields,extractedIndexPatterns:[""]};_this.onBrush=(0,_create_brush_handler.brushHandler)(props.vis.API.timeFilter);_this.visDataSubject=new Rx.BehaviorSubject(_this.props.visData);_this.visData$=_this.visDataSubject.asObservable().pipe((0,_operators.share)());return _this}_createClass(VisEditor,[{key:"render",value:function render(){if(!this.props.isEditorMode){if(!this.props.visParams||!this.props.visData){return null}return _react["default"].createElement(_visualization.Visualization,{dateFormat:this.props.config.get("dateFormat"),onBrush:this.onBrush,onUiState:this.handleUiState,uiState:this.uiState,model:this.props.visParams,visData:this.props.visData,getConfig:this.getConfig})}var model=this.state.model;if(model){return _react["default"].createElement("div",{className:"tvbEditor","data-test-subj":"tvbVisEditor"},_react["default"].createElement("div",{className:"tvbEditor--hideForReporting"},_react["default"].createElement(_vis_picker.VisPicker,{model:model,onChange:this.handleChange})),_react["default"].createElement(_vis_editor_visualization.VisEditorVisualization,{dirty:this.state.dirty,autoApply:this.state.autoApply,model:model,appState:this.appState,savedObj:this.props.savedObj,timeRange:this.props.timeRange,uiState:this.uiState,onCommit:this.handleCommit,onToggleAutoApply:this.handleAutoApplyToggle,title:this.props.vis.title,description:this.props.vis.description,onDataChange:this.onDataChange}),_react["default"].createElement("div",{className:"tvbEditor--hideForReporting"},_react["default"].createElement(_panel_config.PanelConfig,{fields:this.state.visFields,model:model,visData$:this.visData$,dateFormat:this.props.config.get("dateFormat"),onChange:this.handleChange,getConfig:this.getConfig})))}return null}},{key:"componentDidMount",value:function componentDidMount(){this.props.renderComplete()}},{key:"componentDidUpdate",value:function componentDidUpdate(){this.props.renderComplete()}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.updateVisState.cancel()}},{key:"uiState",get:function get(){return this.props.vis.getUiState()}}]);return VisEditor}(_react.Component);exports.VisEditor=VisEditor;VisEditor.defaultProps={visData:{}};VisEditor.propTypes={vis:_propTypes["default"].object,visData:_propTypes["default"].object,visFields:_propTypes["default"].object,renderComplete:_propTypes["default"].func,config:_propTypes["default"].object,isEditorMode:_propTypes["default"].bool,savedObj:_propTypes["default"].object,timeRange:_propTypes["default"].object}},198:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ColorPicker=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(17));var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(2);var _custom_color_picker=__webpack_require__(5775);var _react2=__webpack_require__(10);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var ColorPickerUI=function(_Component){_inherits(ColorPickerUI,_Component);function ColorPickerUI(props){var _this;_classCallCheck(this,ColorPickerUI);_this=_possibleConstructorReturn(this,_getPrototypeOf(ColorPickerUI).call(this,props));_this.state={displayPicker:false,color:{}};_this.handleClick=_this.handleClick.bind(_assertThisInitialized(_this));_this.handleChange=_this.handleChange.bind(_assertThisInitialized(_this));_this.handleClear=_this.handleClear.bind(_assertThisInitialized(_this));_this.handleClose=_this.handleClose.bind(_assertThisInitialized(_this));return _this}_createClass(ColorPickerUI,[{key:"handleChange",value:function handleChange(color){var rgb=color.rgb;var part={};part[this.props.name]="rgba(".concat(rgb.r,",").concat(rgb.g,",").concat(rgb.b,",").concat(rgb.a,")");if(this.props.onChange)this.props.onChange(part)}},{key:"handleClick",value:function handleClick(){this.setState({displayPicker:!this.state.displayColorPicker})}},{key:"handleClose",value:function handleClose(){this.setState({displayPicker:false})}},{key:"handleClear",value:function handleClear(){var part={};part[this.props.name]=null;this.props.onChange(part)}},{key:"renderSwatch",value:function renderSwatch(){if(!this.props.value){return _react["default"].createElement("button",{"aria-label":this.props.intl.formatMessage({id:"tsvb.colorPicker.notAccessibleAriaLabel",defaultMessage:"Color picker, not accessible"}),className:"tvbColorPicker__swatch-empty",onClick:this.handleClick})}return _react["default"].createElement("button",{"aria-label":this.props.intl.formatMessage({id:"tsvb.colorPicker.notAccessibleWithValueAriaLabel",defaultMessage:"Color picker ({value}), not accessible"},{value:this.props.value}),style:{backgroundColor:this.props.value},className:"tvbColorPicker__swatch",onClick:this.handleClick})}},{key:"render",value:function render(){var swatch=this.renderSwatch();var value=this.props.value||undefined;var clear;if(!this.props.disableTrash){clear=_react["default"].createElement("div",{className:"tvbColorPicker__clear",onClick:this.handleClear},_react["default"].createElement(_eui.EuiIconTip,{size:"s",type:"cross",color:"danger",content:this.props.intl.formatMessage({id:"tsvb.colorPicker.clearIconLabel",defaultMessage:"Clear"})}))}return _react["default"].createElement("div",{className:"tvbColorPicker","data-test-subj":"tvbColorPicker"},swatch,clear,this.state.displayPicker?_react["default"].createElement("div",{className:"tvbColorPicker__popover"},_react["default"].createElement("div",{className:"tvbColorPicker__cover",onClick:this.handleClose}),_react["default"].createElement(_custom_color_picker.CustomColorPicker,{color:value,onChangeComplete:this.handleChange})):null)}}]);return ColorPickerUI}(_react.Component);ColorPickerUI.propTypes={name:_propTypes["default"].string.isRequired,value:_propTypes["default"].oneOfType([_propTypes["default"].string,_propTypes["default"].number]),disableTrash:_propTypes["default"].bool,onChange:_propTypes["default"].func};var ColorPicker=(0,_react2.injectI18n)(ColorPickerUI);exports.ColorPicker=ColorPicker},1980:function(module,exports,__webpack_require__){module.exports=__webpack_require__(18)(2208)},1981:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isDuration=exports.outputFormats=exports.inputFormats=exports.durationInputOptions=exports.durationOutputOptions=void 0;var _i18n=__webpack_require__(5);function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var durationBaseOptions=[{label:_i18n.i18n.translate("tsvb.durationOptions.millisecondsLabel",{defaultMessage:"Milliseconds"}),value:"ms"},{label:_i18n.i18n.translate("tsvb.durationOptions.secondsLabel",{defaultMessage:"Seconds"}),value:"s"},{label:_i18n.i18n.translate("tsvb.durationOptions.minutesLabel",{defaultMessage:"Minutes"}),value:"m"},{label:_i18n.i18n.translate("tsvb.durationOptions.hoursLabel",{defaultMessage:"Hours"}),value:"h"},{label:_i18n.i18n.translate("tsvb.durationOptions.daysLabel",{defaultMessage:"Days"}),value:"d"},{label:_i18n.i18n.translate("tsvb.durationOptions.weeksLabel",{defaultMessage:"Weeks"}),value:"w"},{label:_i18n.i18n.translate("tsvb.durationOptions.monthsLabel",{defaultMessage:"Months"}),value:"M"},{label:_i18n.i18n.translate("tsvb.durationOptions.yearsLabel",{defaultMessage:"Years"}),value:"Y"}];var durationOutputOptions=[{label:_i18n.i18n.translate("tsvb.durationOptions.humanize",{defaultMessage:"Human readable"}),value:"humanize"}].concat(durationBaseOptions);exports.durationOutputOptions=durationOutputOptions;var durationInputOptions=[{label:_i18n.i18n.translate("tsvb.durationOptions.picosecondsLabel",{defaultMessage:"Picoseconds"}),value:"ps"},{label:_i18n.i18n.translate("tsvb.durationOptions.nanosecondsLabel",{defaultMessage:"Nanoseconds"}),value:"ns"},{label:_i18n.i18n.translate("tsvb.durationOptions.microsecondsLabel",{defaultMessage:"Microseconds"}),value:"us"}].concat(durationBaseOptions);exports.durationInputOptions=durationInputOptions;var inputFormats={ps:"picoseconds",ns:"nanoseconds",us:"microseconds",ms:"milliseconds",s:"seconds",m:"minutes",h:"hours",d:"days",w:"weeks",M:"months",Y:"years"};exports.inputFormats=inputFormats;var outputFormats={humanize:"humanize",ms:"asMilliseconds",s:"asSeconds",m:"asMinutes",h:"asHours",d:"asDays",w:"asWeeks",M:"asMonths",Y:"asYears"};exports.outputFormats=outputFormats;var isDuration=function isDuration(format){var splittedFormat=format.split(",");var _splittedFormat=_slicedToArray(splittedFormat,2),input=_splittedFormat[0],output=_splittedFormat[1];return Boolean(inputFormats[input]&&outputFormats[output])&&splittedFormat.length===3};exports.isDuration=isDuration},1982:function(module,exports,__webpack_require__){module.exports=__webpack_require__(18)(2187)},1983:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.eventBus=void 0;var _jquery=_interopRequireDefault(__webpack_require__(25));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var eventBus=(0,_jquery["default"])({});exports.eventBus=eventBus},1984:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.COLORS=void 0;var COLORS={lineColor:"rgba(105,112,125,0.2)",textColor:"rgba(0,0,0,0.4)",textColorReversed:"rgba(255,255,255,0.5)",valueColor:"rgba(0,0,0,0.7)",valueColorReversed:"rgba(255,255,255,0.8)"};exports.COLORS=COLORS},1985:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createLegendSeries=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _lodash=_interopRequireDefault(__webpack_require__(1));var _eui=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var createLegendSeries=function createLegendSeries(props){return function(row){var index=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;function tickFormatter(value){if(_lodash["default"].isFunction(props.tickFormatter))return props.tickFormatter(value);return value}var key="tvbLegend__item".concat(row.id).concat(index);var formatter=row.tickFormatter||tickFormatter;var value=formatter(props.seriesValues[row.id]);var classes=["tvbLegend__item"];if(!_lodash["default"].includes(props.seriesFilter,row.id))classes.push("disabled");if(row.label==null||row.legend===false)return _react["default"].createElement("div",{key:key,style:{display:"none"}});return _react["default"].createElement("div",{key:key,className:classes.join(" "),"data-test-subj":"tsvbLegendItem"},_react["default"].createElement("button",{onClick:function onClick(event){return props.onToggle(event,row.id)},className:"tvbLegend__button"},_react["default"].createElement("span",{className:"tvbLegend__itemLabel",title:"".concat(row.label,": ").concat(value)},_react["default"].createElement(_eui.EuiIcon,{size:"m",type:"dot",color:row.color}),_react["default"].createElement("span",null,row.label)),_react["default"].createElement("span",{className:"tvbLegend__itemValue"},value)))}};exports.createLegendSeries=createLegendSeries},1986:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.visWithSplits=visWithSplits;var _react=_interopRequireDefault(__webpack_require__(0));var _get_display_name=__webpack_require__(5756);var _lodash=__webpack_require__(1);var _calculate_label=__webpack_require__(1007);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function visWithSplits(WrappedComponent){function SplitVisComponent(props){var model=props.model,visData=props.visData;if(!model||!visData||!visData[model.id])return _react["default"].createElement(WrappedComponent,props);if(visData[model.id].series.every(function(s){return s.id.split(":").length===1})){return _react["default"].createElement(WrappedComponent,props)}var splitsVisData=visData[model.id].series.reduce(function(acc,series){var _series$id$split=series.id.split(":"),_series$id$split2=_slicedToArray(_series$id$split,2),seriesId=_series$id$split2[0],splitId=_series$id$split2[1];var seriesModel=model.series.find(function(s){return s.id===seriesId});if(!seriesModel||!splitId)return acc;var metric=(0,_lodash.last)(seriesModel.metrics);var label=(0,_calculate_label.calculateLabel)(metric,seriesModel.metrics);if(!acc[splitId]){acc[splitId]={series:[],label:series.label.toString()}}acc[splitId].series.push(_objectSpread({},series,{id:seriesId,color:series.color||seriesModel.color,label:seriesModel.label||label}));return acc},{});var nonSplitSeries=(0,_lodash.first)(visData[model.id].series.filter(function(series){var seriesModel=model.series.find(function(s){return s.id===series.id});if(!seriesModel)return false;return["everything","filter"].includes(seriesModel.split_mode)}));var indexOfNonSplit=nonSplitSeries?(0,_lodash.findIndex)(model.series,function(s){return s.id===nonSplitSeries.id}):null;var rows=Object.keys(splitsVisData).map(function(key){var splitData=splitsVisData[key];var series=splitData.series,label=splitData.label;var newSeries=indexOfNonSplit!=null&&indexOfNonSplit>0?[].concat(_toConsumableArray(series),[nonSplitSeries]):[nonSplitSeries].concat(_toConsumableArray(series));var newVisData=_defineProperty({},model.id,{id:model.id,series:newSeries||series});return _react["default"].createElement("div",{key:key,className:"tvbSplitVis__split"},_react["default"].createElement(WrappedComponent,{model:model,visData:newVisData,onBrush:props.onBrush,additionalLabel:label,backgroundColor:props.backgroundColor,getConfig:props.getConfig}))});return _react["default"].createElement("div",{className:"tvbSplitVis"},rows)}SplitVisComponent.displayName="SplitVisComponent(".concat((0,_get_display_name.getDisplayName)(WrappedComponent),")");return SplitVisComponent}},1987:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isBasicAgg=isBasicAgg;exports.createOptions=createOptions;exports.lookup=void 0;var _lodash=_interopRequireDefault(__webpack_require__(1));var _i18n=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var lookup={count:_i18n.i18n.translate("tsvb.aggLookup.countLabel",{defaultMessage:"Count"}),calculation:_i18n.i18n.translate("tsvb.aggLookup.calculationLabel",{defaultMessage:"Calculation"}),std_deviation:_i18n.i18n.translate("tsvb.aggLookup.deviationLabel",{defaultMessage:"Std. Deviation"}),variance:_i18n.i18n.translate("tsvb.aggLookup.varianceLabel",{defaultMessage:"Variance"}),sum_of_squares:_i18n.i18n.translate("tsvb.aggLookup.sumOfSqLabel",{defaultMessage:"Sum of Sq."}),avg:_i18n.i18n.translate("tsvb.aggLookup.averageLabel",{defaultMessage:"Average"}),max:_i18n.i18n.translate("tsvb.aggLookup.maxLabel",{defaultMessage:"Max"}),min:_i18n.i18n.translate("tsvb.aggLookup.minLabel",{defaultMessage:"Min"}),sum:_i18n.i18n.translate("tsvb.aggLookup.sumLabel",{defaultMessage:"Sum"}),percentile:_i18n.i18n.translate("tsvb.aggLookup.percentileLabel",{defaultMessage:"Percentile"}),percentile_rank:_i18n.i18n.translate("tsvb.aggLookup.percentileRankLabel",{defaultMessage:"Percentile Rank"}),cardinality:_i18n.i18n.translate("tsvb.aggLookup.cardinalityLabel",{defaultMessage:"Cardinality"}),value_count:_i18n.i18n.translate("tsvb.aggLookup.valueCountLabel",{defaultMessage:"Value Count"}),derivative:_i18n.i18n.translate("tsvb.aggLookup.derivativeLabel",{defaultMessage:"Derivative"}),cumulative_sum:_i18n.i18n.translate("tsvb.aggLookup.cumulativeSumLabel",{defaultMessage:"Cumulative Sum"}),moving_average:_i18n.i18n.translate("tsvb.aggLookup.movingAverageLabel",{defaultMessage:"Moving Average"}),avg_bucket:_i18n.i18n.translate("tsvb.aggLookup.overallAverageLabel",{defaultMessage:"Overall Average"}),min_bucket:_i18n.i18n.translate("tsvb.aggLookup.overallMinLabel",{defaultMessage:"Overall Min"}),max_bucket:_i18n.i18n.translate("tsvb.aggLookup.overallMaxLabel",{defaultMessage:"Overall Max"}),sum_bucket:_i18n.i18n.translate("tsvb.aggLookup.overallSumLabel",{defaultMessage:"Overall Sum"}),variance_bucket:_i18n.i18n.translate("tsvb.aggLookup.overallVarianceLabel",{defaultMessage:"Overall Variance"}),sum_of_squares_bucket:_i18n.i18n.translate("tsvb.aggLookup.overallSumOfSqLabel",{defaultMessage:"Overall Sum of Sq."}),std_deviation_bucket:_i18n.i18n.translate("tsvb.aggLookup.overallStdDeviationLabel",{defaultMessage:"Overall Std. Deviation"}),series_agg:_i18n.i18n.translate("tsvb.aggLookup.seriesAggLabel",{defaultMessage:"Series Agg"}),math:_i18n.i18n.translate("tsvb.aggLookup.mathLabel",{defaultMessage:"Math"}),serial_diff:_i18n.i18n.translate("tsvb.aggLookup.serialDifferenceLabel",{defaultMessage:"Serial Difference"}),filter_ratio:_i18n.i18n.translate("tsvb.aggLookup.filterRatioLabel",{defaultMessage:"Filter Ratio"}),positive_only:_i18n.i18n.translate("tsvb.aggLookup.positiveOnlyLabel",{defaultMessage:"Positive Only"}),static:_i18n.i18n.translate("tsvb.aggLookup.staticValueLabel",{defaultMessage:"Static Value"}),top_hit:_i18n.i18n.translate("tsvb.aggLookup.topHitLabel",{defaultMessage:"Top Hit"})};exports.lookup=lookup;var pipeline=["calculation","derivative","cumulative_sum","moving_average","avg_bucket","min_bucket","max_bucket","sum_bucket","variance_bucket","sum_of_squares_bucket","std_deviation_bucket","series_agg","math","serial_diff","positive_only"];var byType={_all:lookup,pipeline:pipeline,basic:_lodash["default"].omit(lookup,pipeline),metrics:_lodash["default"].pick(lookup,["count","avg","min","max","sum","cardinality","value_count"])};function isBasicAgg(item){return _lodash["default"].includes(Object.keys(byType.basic),item.type)}function createOptions(){var type=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"_all";var siblings=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];var aggs=byType[type];if(!aggs)aggs=byType._all;var enablePipelines=siblings.some(isBasicAgg);if(siblings.length<=1)enablePipelines=false;return(0,_lodash["default"])(aggs).map(function(label,value){var disabled=_lodash["default"].includes(pipeline,value)?!enablePipelines:false;return{label:disabled?_i18n.i18n.translate("tsvb.aggLookup.addPipelineAggDescription",{defaultMessage:'{label} (use the "+" button to add this pipeline agg)',values:{label:label}}):label,value:value,disabled:disabled}}).value()}},1988:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.basicAggs=void 0;var basicAggs=["count","avg","max","min","sum","std_deviation","variance","sum_of_squares","value_count","cardinality"];exports.basicAggs=basicAggs},1989:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ErrorComponent=ErrorComponent;var _eui=__webpack_require__(2);var _propTypes=_interopRequireDefault(__webpack_require__(17));var _react=_interopRequireDefault(__webpack_require__(0));var _lodash=_interopRequireDefault(__webpack_require__(1));var _react2=__webpack_require__(10);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var guidPattern=/\[[[a-f\d-\\]{36}\]/g;function ErrorComponent(props){var error=props.error;var additionalInfo;var type=_lodash["default"].get(error,"error.caused_by.type")||_lodash["default"].get(error,"error.type");var reason=_lodash["default"].get(error,"error.caused_by.reason");var title=_lodash["default"].get(error,"error.caused_by.title");if(!reason){reason=_lodash["default"].get(error,"message")}if(["runtime_exception","illegal_argument_exception"].includes(type)){reason=_lodash["default"].get(error,"error.reason").replace(guidPattern,"")}if(type==="script_exception"){var scriptStack=_lodash["default"].get(error,"error.caused_by.script_stack");reason=_lodash["default"].get(error,"error.caused_by.caused_by.reason");additionalInfo=_react["default"].createElement("div",{className:"tvbError__additional"},_react["default"].createElement("div",null,reason),_react["default"].createElement("div",{className:"tvbError__stack"},scriptStack.join("\n")))}else if(reason){additionalInfo=_react["default"].createElement("div",{className:"tvbError__additional"},reason)}return _react["default"].createElement("div",{className:"visError"},_react["default"].createElement(_eui.EuiText,{size:"xs",color:"subdued"},_react["default"].createElement(_eui.EuiIcon,{type:"alert",size:"m",color:"danger","aria-hidden":"true"}),_react["default"].createElement(_eui.EuiSpacer,{size:"s"}),title||_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.error.requestForPanelFailedErrorMessage",defaultMessage:"The request for this panel failed"}),additionalInfo))}ErrorComponent.propTypes={error:_propTypes["default"].object}},199:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FieldSelect=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(17));var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(2);var _react2=__webpack_require__(10);var _check_ui_restrictions=__webpack_require__(502);var _i18n=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}var isFieldTypeEnabled=function isFieldTypeEnabled(fieldRestrictions,fieldType){return fieldRestrictions.length?fieldRestrictions.includes(fieldType):true};function FieldSelectUi(_ref){var type=_ref.type,fields=_ref.fields,indexPattern=_ref.indexPattern,value=_ref.value,onChange=_ref.onChange,disabled=_ref.disabled,restrict=_ref.restrict,placeholder=_ref.placeholder,uiRestrictions=_ref.uiRestrictions,rest=_objectWithoutProperties(_ref,["type","fields","indexPattern","value","onChange","disabled","restrict","placeholder","uiRestrictions"]);if(type==="count"){return null}var selectedOptions=[];var options=Object.values((fields[indexPattern]||[]).reduce(function(acc,field){if(isFieldTypeEnabled(restrict,field.type)&&(0,_check_ui_restrictions.isFieldEnabled)(field.name,type,uiRestrictions)){var item={label:field.name,value:field.name};if(acc[field.type]){acc[field.type].options.push(item)}else{acc[field.type]={options:[item],label:field.type}}if(value===item.value){selectedOptions.push(item)}}return acc},{}));if(onChange&&value&&!selectedOptions.length){onChange()}return _react["default"].createElement(_eui.EuiComboBox,_extends({placeholder:placeholder,isDisabled:disabled,options:options,selectedOptions:selectedOptions,onChange:onChange,singleSelection:{asPlainText:true}},rest))}FieldSelectUi.defaultProps={indexPattern:"*",disabled:false,restrict:[],placeholder:_i18n.i18n.translate("tsvb.fieldSelect.selectFieldPlaceholder",{defaultMessage:"Select field..."})};FieldSelectUi.propTypes={disabled:_propTypes["default"].bool,fields:_propTypes["default"].object,id:_propTypes["default"].string,indexPattern:_propTypes["default"].string,onChange:_propTypes["default"].func,restrict:_propTypes["default"].array,type:_propTypes["default"].string,value:_propTypes["default"].string,uiRestrictions:_propTypes["default"].object,placeholder:_propTypes["default"].string};var FieldSelect=(0,_react2.injectI18n)(FieldSelectUi);exports.FieldSelect=FieldSelect},1990:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.convertSeriesToVars=void 0;var _lodash=_interopRequireDefault(__webpack_require__(1));var _get_last_value=__webpack_require__(287);var _tick_formatter=__webpack_require__(344);var _moment=_interopRequireDefault(__webpack_require__(23));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var convertSeriesToVars=function convertSeriesToVars(series,model){var dateFormat=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"lll";var getConfig=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;var variables={};model.series.forEach(function(seriesModel){series.filter(function(row){return _lodash["default"].startsWith(row.id,seriesModel.id)}).forEach(function(row){var varName=[_lodash["default"].snakeCase(row.label),_lodash["default"].snakeCase(seriesModel.var_name)].filter(function(v){return v}).join(".");var formatter=(0,_tick_formatter.tickFormatter)(seriesModel.formatter,seriesModel.value_template,getConfig);var lastValue=(0,_get_last_value.getLastValue)(row.data);var data={last:{raw:lastValue,formatted:formatter(lastValue)},data:{raw:row.data,formatted:row.data.map(function(point){return[(0,_moment["default"])(point[0]).format(dateFormat),formatter(point[1])]})}};_lodash["default"].set(variables,varName,data);_lodash["default"].set(variables,"".concat(_lodash["default"].snakeCase(row.label),".label"),row.label)})});return variables};exports.convertSeriesToVars=convertSeriesToVars},1991:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createNumberHandler=void 0;var _lodash=_interopRequireDefault(__webpack_require__(1));var _detect_ie=__webpack_require__(1992);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var createNumberHandler=function createNumberHandler(handleChange){return function(name,defaultValue){return function(e){if(!(0,_detect_ie.detectIE)()||e.keyCode===13)e.preventDefault();var value=Number(_lodash["default"].get(e,"target.value",defaultValue));if(_lodash["default"].isFunction(handleChange)){return handleChange(_defineProperty({},name,value))}}}};exports.createNumberHandler=createNumberHandler},1992:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.detectIE=detectIE;function detectIE(){var ua=window.navigator.userAgent;var msie=ua.indexOf("MSIE ");if(msie>0){return parseInt(ua.substring(msie+5,ua.indexOf(".",msie)),10)}var trident=ua.indexOf("Trident/");if(trident>0){var rv=ua.indexOf("rv:");return parseInt(ua.substring(rv+3,ua.indexOf(".",rv)),10)}var edge=ua.indexOf("Edge/");if(edge>0){return parseInt(ua.substring(edge+5,ua.indexOf(".",edge)),10)}return false}},1993:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.CalculationVars=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(17));var _react=_interopRequireWildcard(__webpack_require__(0));var _lodash=_interopRequireDefault(__webpack_require__(1));var _add_delete_buttons=__webpack_require__(163);var _collection_actions=__webpack_require__(289);var _metric_select=__webpack_require__(288);var _eui=__webpack_require__(2);var _react2=__webpack_require__(10);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var CalculationVarsUi=function(_Component){_inherits(CalculationVarsUi,_Component);function CalculationVarsUi(props){var _this;_classCallCheck(this,CalculationVarsUi);_this=_possibleConstructorReturn(this,_getPrototypeOf(CalculationVarsUi).call(this,props));_this.renderRow=_this.renderRow.bind(_assertThisInitialized(_this));return _this}_createClass(CalculationVarsUi,[{key:"handleChange",value:function handleChange(item,name){var _this2=this;return function(e){var handleChange=_collection_actions.collectionActions.handleChange.bind(null,_this2.props);var part={};part[name]=_lodash["default"].get(e,"[0].value",_lodash["default"].get(e,"target.value"));handleChange(_lodash["default"].assign({},item,part))}}},{key:"renderRow",value:function renderRow(row,i,items){var handleAdd=_collection_actions.collectionActions.handleAdd.bind(null,this.props);var handleDelete=_collection_actions.collectionActions.handleDelete.bind(null,this.props,row);var intl=this.props.intl;return _react["default"].createElement(_eui.EuiFlexItem,{key:row.id,"data-test-subj":"varRow"},_react["default"].createElement(_eui.EuiFlexGroup,{alignItems:"center",responsive:false,gutterSize:"s"},_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiFieldText,{className:"tvbAggs__varName","aria-label":intl.formatMessage({id:"tsvb.vars.variableNameAriaLabel",defaultMessage:"Variable name"}),placeholder:intl.formatMessage({id:"tsvb.vars.variableNamePlaceholder",defaultMessage:"Variable name"}),onChange:this.handleChange(row,"name"),value:row.name})),_react["default"].createElement(_eui.EuiFlexItem,{className:"tvbAggs__varMetricWrapper"},_react["default"].createElement(_metric_select.MetricSelect,{onChange:this.handleChange(row,"field"),metrics:this.props.metrics,metric:this.props.model,value:row.field,includeSiblings:this.props.includeSiblings})),_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_add_delete_buttons.AddDeleteButtons,{onAdd:handleAdd,onDelete:handleDelete,disableDelete:items.length<2,responsive:false}))))}},{key:"render",value:function render(){var _this$props=this.props,model=_this$props.model,name=_this$props.name;if(!model[name])return _react["default"].createElement("div",null);var rows=model[name].map(this.renderRow);return _react["default"].createElement(_eui.EuiFlexGroup,{direction:"column",gutterSize:"s"},rows)}}]);return CalculationVarsUi}(_react.Component);CalculationVarsUi.defaultProps={name:"variables",includeSiblings:false};CalculationVarsUi.propTypes={metrics:_propTypes["default"].array,model:_propTypes["default"].object,name:_propTypes["default"].string,onChange:_propTypes["default"].func,includeSiblings:_propTypes["default"].bool};var CalculationVars=(0,_react2.injectI18n)(CalculationVarsUi);exports.CalculationVars=CalculationVars},1994:function(module,exports,__webpack_require__){module.exports=__webpack_require__(18)(2179)},1995:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.mapToLayerWithId=mapToLayerWithId;var _lodash=_interopRequireDefault(__webpack_require__(1));var _origin=__webpack_require__(346);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function mapToLayerWithId(prefix,layer){var clonedLayer=_lodash["default"].cloneDeep(layer);clonedLayer.layerId=prefix+"."+layer.name;clonedLayer.isEMS=_origin.ORIGIN.EMS===prefix?true:false;return clonedLayer}},1996:function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(12);var _i18n=__webpack_require__(5);var _wms_options=_interopRequireDefault(__webpack_require__(5842));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _module=_modules.uiModules.get("kibana");_module.directive("wmsOptions",function(serviceSettings){return{restrict:"E",template:_wms_options["default"],replace:true,scope:{options:"=",collections:"="},link:function link($scope){$scope.wmsLinkText=_i18n.i18n.translate("tileMap.wmsOptions.wmsLinkText",{defaultMessage:"here"});new Promise(function(resolve,reject){serviceSettings.getTMSServices().then(function(allTMSServices){var newBaseLayers=$scope.collections.tmsLayers.slice();var _loop=function _loop(i){var layerFromService=allTMSServices[i];var alreadyAdded=newBaseLayers.some(function(layer){return layerFromService.id===layer.id});if(!alreadyAdded){newBaseLayers.push(layerFromService)}};for(var i=0;i<allTMSServices.length;i+=1){_loop(i)}$scope.collections.tmsLayers=newBaseLayers;if(!$scope.options.selectedTmsLayer&&$scope.collections.tmsLayers.length){$scope.options.selectedTmsLayer=$scope.collections.tmsLayers[0]}resolve(true)})["catch"](function(e){reject(e)})})}}})},1997:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.BaseMapsVisualizationProvider=BaseMapsVisualizationProvider;var _lodash=_interopRequireDefault(__webpack_require__(1));var _i18n=__webpack_require__(5);var _kibana_map=__webpack_require__(1998);var Rx=_interopRequireWildcard(__webpack_require__(49));var _operators=__webpack_require__(106);__webpack_require__(1999);var _notify=__webpack_require__(24);var _modules=__webpack_require__(12);var _chrome=_interopRequireDefault(__webpack_require__(19));function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var WMS_MINZOOM=0;var WMS_MAXZOOM=22;var emsServiceSettings=new Promise(function(resolve){_modules.uiModules.get("kibana").run(function($injector){var serviceSttings=$injector.get("serviceSettings");resolve(serviceSttings)})});function BaseMapsVisualizationProvider(serviceSettings){return function(){function BaseMapsVisualization(element,vis){_classCallCheck(this,BaseMapsVisualization);this.vis=vis;this._container=element;this._kibanaMap=null;this._chartData=null;this._baseLayerDirty=true;this._mapIsLoaded=this._makeKibanaMap()}_createClass(BaseMapsVisualization,[{key:"isLoaded",value:function isLoaded(){return this._mapIsLoaded}},{key:"destroy",value:function destroy(){if(this._kibanaMap){this._kibanaMap.destroy();this._kibanaMap=null}}},{key:"render",value:function(){var _render=_asyncToGenerator(regeneratorRuntime.mark(function _callee(esResponse,visParams,status){return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(this._kibanaMap){_context.next=2;break}return _context.abrupt("return");case 2:_context.next=4;return this._mapIsLoaded;case 4:if(status.resize){this._kibanaMap.resize()}if(!(status.params||status.aggs)){_context.next=9;break}this._params=visParams;_context.next=9;return this._updateParams();case 9:if(!this._hasESResponseChanged(esResponse)){_context.next=12;break}_context.next=12;return this._updateData(esResponse);case 12:if(status.uiState){this._kibanaMap.useUiStateFromVisualization(this.vis)}_context.next=15;return this._whenBaseLayerIsLoaded();case 15:case"end":return _context.stop()}}},_callee,this)}));function render(_x,_x2,_x3){return _render.apply(this,arguments)}return render}()},{key:"_makeKibanaMap",value:function(){var _makeKibanaMap2=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(){var _this=this;var options,uiState,zoomFromUiState,centerFromUIState;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:options={};uiState=this.vis.getUiState();zoomFromUiState=parseInt(uiState.get("mapZoom"));centerFromUIState=uiState.get("mapCenter");options.zoom=!isNaN(zoomFromUiState)?zoomFromUiState:this.vis.params.mapZoom;options.center=centerFromUIState?centerFromUIState:this.vis.params.mapCenter;this._kibanaMap=new _kibana_map.KibanaMap(this._container,options);this._kibanaMap.setMinZoom(WMS_MINZOOM);this._kibanaMap.setMaxZoom(WMS_MAXZOOM);this._kibanaMap.addLegendControl();this._kibanaMap.addFitControl();this._kibanaMap.persistUiStateForVisualization(this.vis);this._kibanaMap.on("baseLayer:loaded",function(){_this._baseLayerDirty=false});this._kibanaMap.on("baseLayer:loading",function(){_this._baseLayerDirty=true});_context2.next=16;return this._updateBaseLayer();case 16:case"end":return _context2.stop()}}},_callee2,this)}));function _makeKibanaMap(){return _makeKibanaMap2.apply(this,arguments)}return _makeKibanaMap}()},{key:"_tmsConfigured",value:function _tmsConfigured(){var _this$_getMapsParams=this._getMapsParams(),wms=_this$_getMapsParams.wms;var hasTmsBaseLayer=!!wms.selectedTmsLayer;return hasTmsBaseLayer}},{key:"_wmsConfigured",value:function _wmsConfigured(){var _this$_getMapsParams2=this._getMapsParams(),wms=_this$_getMapsParams2.wms;var hasWmsBaseLayer=!!wms.enabled;return hasWmsBaseLayer}},{key:"_updateBaseLayer",value:function(){var _updateBaseLayer2=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(){var emsTileLayerId,mapParams,tmsServices,userConfiguredTmsLayer,initBasemapLayer,selectedTmsLayer;return regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:emsTileLayerId=_chrome["default"].getInjected("emsTileLayerId",true);if(this._kibanaMap){_context3.next=3;break}return _context3.abrupt("return");case 3:mapParams=this._getMapsParams();if(this._tmsConfigured()){_context3.next=19;break}_context3.prev=5;_context3.next=8;return serviceSettings.getTMSServices();case 8:tmsServices=_context3.sent;userConfiguredTmsLayer=tmsServices[0];initBasemapLayer=userConfiguredTmsLayer?userConfiguredTmsLayer:tmsServices.find(function(s){return s.id===emsTileLayerId.bright});if(initBasemapLayer){this._setTmsLayer(initBasemapLayer)}_context3.next=18;break;case 14:_context3.prev=14;_context3.t0=_context3["catch"](5);_notify.toastNotifications.addWarning(_context3.t0.message);return _context3.abrupt("return");case 18:return _context3.abrupt("return");case 19:try{if(this._wmsConfigured()){if(WMS_MINZOOM>this._kibanaMap.getMaxZoomLevel()){this._kibanaMap.setMinZoom(WMS_MINZOOM);this._kibanaMap.setMaxZoom(WMS_MAXZOOM)}this._kibanaMap.setBaseLayer({baseLayerType:"wms",options:_objectSpread({minZoom:WMS_MINZOOM,maxZoom:WMS_MAXZOOM,url:mapParams.wms.url},mapParams.wms.options)})}else if(this._tmsConfigured()){selectedTmsLayer=mapParams.wms.selectedTmsLayer;this._setTmsLayer(selectedTmsLayer)}}catch(tmsLoadingError){_notify.toastNotifications.addWarning(tmsLoadingError.message)}case 20:case"end":return _context3.stop()}}},_callee3,this,[[5,14]])}));function _updateBaseLayer(){return _updateBaseLayer2.apply(this,arguments)}return _updateBaseLayer}()},{key:"_setTmsLayer",value:function(){var _setTmsLayer2=_asyncToGenerator(regeneratorRuntime.mark(function _callee4(tmsLayer){var isDesaturated,isDarkMode,meta,showZoomMessage,options;return regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:this._kibanaMap.setMinZoom(tmsLayer.minZoom);this._kibanaMap.setMaxZoom(tmsLayer.maxZoom);if(this._kibanaMap.getZoomLevel()>tmsLayer.maxZoom){this._kibanaMap.setZoomLevel(tmsLayer.maxZoom)}isDesaturated=this._getMapsParams().isDesaturated;if(typeof isDesaturated!=="boolean"){isDesaturated=true}isDarkMode=_chrome["default"].getUiSettingsClient().get("theme:darkMode");_context4.next=8;return emsServiceSettings;case 8:_context4.t0=tmsLayer;_context4.t1=isDesaturated;_context4.t2=isDarkMode;_context4.next=13;return _context4.sent.getAttributesForTMSLayer(_context4.t0,_context4.t1,_context4.t2);case 13:meta=_context4.sent;showZoomMessage=serviceSettings.shouldShowZoomMessage(tmsLayer);options=_lodash["default"].cloneDeep(tmsLayer);delete options.id;delete options.subdomains;this._kibanaMap.setBaseLayer({baseLayerType:"tms",options:_objectSpread({},options,{showZoomMessage:showZoomMessage},meta)});case 19:case"end":return _context4.stop()}}},_callee4,this)}));function _setTmsLayer(_x4){return _setTmsLayer2.apply(this,arguments)}return _setTmsLayer}()},{key:"_updateData",value:function(){var _updateData2=_asyncToGenerator(regeneratorRuntime.mark(function _callee5(){return regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:throw new Error(_i18n.i18n.translate("tileMap.baseMapsVisualization.childShouldImplementMethodErrorMessage",{defaultMessage:"Child should implement this method to respond to data-update"}));case 1:case"end":return _context5.stop()}}},_callee5)}));function _updateData(){return _updateData2.apply(this,arguments)}return _updateData}()},{key:"_hasESResponseChanged",value:function _hasESResponseChanged(data){return this._chartData!==data}},{key:"_updateParams",value:function(){var _updateParams2=_asyncToGenerator(regeneratorRuntime.mark(function _callee6(){var mapParams;return regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:mapParams=this._getMapsParams();_context6.next=3;return this._updateBaseLayer();case 3:this._kibanaMap.setLegendPosition(mapParams.legendPosition);this._kibanaMap.setShowTooltip(mapParams.addTooltip);this._kibanaMap.useUiStateFromVisualization(this.vis);case 6:case"end":return _context6.stop()}}},_callee6,this)}));function _updateParams(){return _updateParams2.apply(this,arguments)}return _updateParams}()},{key:"_getMapsParams",value:function _getMapsParams(){return _lodash["default"].assign({},this.vis.type.visConfig.defaults,{type:this.vis.type.name},this._params)}},{key:"_whenBaseLayerIsLoaded",value:function _whenBaseLayerIsLoaded(){var _this2=this;if(!this._tmsConfigured()){return true}var maxTimeForBaseLayer=1e4;var interval$=Rx.interval(10).pipe((0,_operators.filter)(function(){return!_this2._baseLayerDirty}));var timer$=Rx.timer(maxTimeForBaseLayer);return Rx.race(interval$,timer$).pipe((0,_operators.first)()).toPromise()}}]);return BaseMapsVisualization}()}},1998:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.KibanaMap=void 0;var _events=__webpack_require__(152);var _map_messages=__webpack_require__(5844);var _leaflet=_interopRequireDefault(__webpack_require__(248));var _jquery=_interopRequireDefault(__webpack_require__(25));var _lodash=_interopRequireDefault(__webpack_require__(1));var _zoom_to_precision=__webpack_require__(5845);var _i18n=__webpack_require__(5);var _origin=__webpack_require__(346);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function makeFitControl(fitContainer,kibanaMap){var FitControl=_leaflet["default"].Control.extend({options:{position:"topleft"},initialize:function initialize(fitContainer,kibanaMap){this._fitContainer=fitContainer;this._kibanaMap=kibanaMap;this._leafletMap=null},onAdd:function onAdd(leafletMap){var _this=this;this._leafletMap=leafletMap;var fitDatBoundsLabel=_i18n.i18n.translate("common.ui.vis.kibanaMap.leaflet.fitDataBoundsAriaLabel",{defaultMessage:"Fit Data Bounds"});(0,_jquery["default"])(this._fitContainer).html('<a class="kuiIcon fa-crop" href="#" title="'.concat(fitDatBoundsLabel,'" aria-label="').concat(fitDatBoundsLabel,'"></a>')).on("click",function(e){e.preventDefault();_this._kibanaMap.fitToData()});return this._fitContainer},onRemove:function onRemove(){(0,_jquery["default"])(this._fitContainer).off("click")}});return new FitControl(fitContainer,kibanaMap)}function makeLegendControl(container,kibanaMap,position){var LegendControl=_leaflet["default"].Control.extend({options:{position:"topright"},initialize:function initialize(container,kibanaMap,position){this._legendContainer=container;this._kibanaMap=kibanaMap;this.options.position=position},updateContents:function updateContents(){this._legendContainer.empty();var $div=(0,_jquery["default"])("<div>").addClass("visMapLegend");this._legendContainer.append($div);var layers=this._kibanaMap.getLayers();layers.forEach(function(layer){return layer.appendLegendContents($div)})},onAdd:function onAdd(){var _this2=this;this._layerUpdateHandle=function(){return _this2.updateContents()};this._kibanaMap.on("layers:update",this._layerUpdateHandle);this.updateContents();return this._legendContainer.get(0)},onRemove:function onRemove(){this._kibanaMap.removeListener("layers:update",this._layerUpdateHandle);this._legendContainer.empty()}});return new LegendControl(container,kibanaMap,position)}var KibanaMap=function(_EventEmitter){_inherits(KibanaMap,_EventEmitter);function KibanaMap(containerNode,options){var _this3;_classCallCheck(this,KibanaMap);_this3=_possibleConstructorReturn(this,_getPrototypeOf(KibanaMap).call(this));_defineProperty(_assertThisInitialized(_this3),"getZoomLevel",function(){return _this3._leafletMap.getZoom()});_defineProperty(_assertThisInitialized(_this3),"getMaxZoomLevel",function(){return _this3._leafletMap.getMaxZoom()});_defineProperty(_assertThisInitialized(_this3),"_addMaxZoomMessage",function(layer){var zoomWarningMsg=(0,_map_messages.createZoomWarningMsg)(_this3.getZoomLevel,_this3.getMaxZoomLevel);_this3._leafletMap.on("zoomend",zoomWarningMsg);_this3._containerNode.setAttribute("data-test-subj","zoomWarningEnabled");layer.on("remove",function(){_this3._leafletMap.off("zoomend",zoomWarningMsg);_this3._containerNode.removeAttribute("data-test-subj")})});_this3._containerNode=containerNode;_this3._leafletBaseLayer=null;_this3._baseLayerSettings=null;_this3._baseLayerIsDesaturated=true;_this3._leafletDrawControl=null;_this3._leafletFitControl=null;_this3._leafletLegendControl=null;_this3._legendPosition="topright";_this3._layers=[];_this3._listeners=[];_this3._showTooltip=false;var leafletOptions={minZoom:options.minZoom,maxZoom:options.maxZoom,center:options.center?options.center:[0,0],zoom:options.zoom?options.zoom:2,renderer:_leaflet["default"].canvas(),zoomAnimation:false,zoomControl:options.zoomControl===undefined?true:options.zoomControl};_this3._leafletMap=_leaflet["default"].map(containerNode,leafletOptions);_this3._leafletMap.attributionControl.setPrefix("");if(!options.scrollWheelZoom){_this3._leafletMap.scrollWheelZoom.disable()}var previousZoom=_this3._leafletMap.getZoom();_this3._leafletMap.on("zoomend",function(){if(previousZoom!==_this3._leafletMap.getZoom()){previousZoom=_this3._leafletMap.getZoom();_this3.emit("zoomchange")}});_this3._leafletMap.on("zoomend",function(){return _this3.emit("zoomend")});_this3._leafletMap.on("dragend",function(){return _this3.emit("dragend")});_this3._leafletMap.on("zoomend",function(){return _this3._updateExtent()});_this3._leafletMap.on("dragend",function(){return _this3._updateExtent()});_this3._leafletMap.on("mousemove",function(e){return _this3._layers.forEach(function(layer){return layer.movePointer("mousemove",e)})});_this3._leafletMap.on("mouseout",function(e){return _this3._layers.forEach(function(layer){return layer.movePointer("mouseout",e)})});_this3._leafletMap.on("mousedown",function(e){return _this3._layers.forEach(function(layer){return layer.movePointer("mousedown",e)})});_this3._leafletMap.on("mouseup",function(e){return _this3._layers.forEach(function(layer){return layer.movePointer("mouseup",e)})});_this3._leafletMap.on("draw:created",function(event){var drawType=event.layerType;if(drawType==="rectangle"){var bounds=event.layer.getBounds();var southEast=bounds.getSouthEast();var northWest=bounds.getNorthWest();var southEastLng=southEast.lng;if(southEastLng>180){southEastLng-=360}var northWestLng=northWest.lng;if(northWestLng<-180){northWestLng+=360}var southEastLat=southEast.lat;var northWestLat=northWest.lat;if(southEastLat===northWestLat||southEastLng===northWestLng){return}_this3.emit("drawCreated:rectangle",{bounds:{bottom_right:{lat:southEastLat,lon:southEastLng},top_left:{lat:northWestLat,lon:northWestLng}}})}else if(drawType==="polygon"){var latLongs=event.layer.getLatLngs()[0];_this3.emit("drawCreated:polygon",{points:latLongs.map(function(leafletLatLng){return{lat:leafletLatLng.lat,lon:leafletLatLng.lng}})})}});_this3.resize();return _this3}_createClass(KibanaMap,[{key:"setShowTooltip",value:function setShowTooltip(showTooltip){this._showTooltip=showTooltip}},{key:"getLayers",value:function getLayers(){return this._layers.slice()}},{key:"addLayer",value:function addLayer(kibanaLayer){var _this4=this;var onshowTooltip=function onshowTooltip(event){if(!_this4._showTooltip){return}if(!_this4._popup){_this4._popup=_leaflet["default"].responsivePopup({autoPan:false});_this4._popup.setLatLng(event.position);_this4._popup.setContent(event.content);_this4._popup.openOn(_this4._leafletMap)}else{if(!_this4._popup.getLatLng().equals(event.position)){_this4._popup.setLatLng(event.position)}if(_this4._popup.getContent()!==event.content){_this4._popup.setContent(event.content)}}};kibanaLayer.on("showTooltip",onshowTooltip);this._listeners.push({name:"showTooltip",handle:onshowTooltip,layer:kibanaLayer});var onHideTooltip=function onHideTooltip(){_this4._leafletMap.closePopup();_this4._popup=null};kibanaLayer.on("hideTooltip",onHideTooltip);this._listeners.push({name:"hideTooltip",handle:onHideTooltip,layer:kibanaLayer});var onStyleChanged=function onStyleChanged(){if(_this4._leafletLegendControl){_this4._leafletLegendControl.updateContents()}};kibanaLayer.on("styleChanged",onStyleChanged);this._listeners.push({name:"styleChanged",handle:onStyleChanged,layer:kibanaLayer});this._layers.push(kibanaLayer);kibanaLayer.addToLeafletMap(this._leafletMap);this.emit("layers:update");this._addAttributions(kibanaLayer.getAttributions())}},{key:"removeLayer",value:function removeLayer(kibanaLayer){var _this5=this;if(!kibanaLayer){return}this._removeAttributions(kibanaLayer.getAttributions());var index=this._layers.indexOf(kibanaLayer);if(index>=0){this._layers.splice(index,1);kibanaLayer.removeFromLeafletMap(this._leafletMap)}this._listeners.forEach(function(listener){if(listener.layer===kibanaLayer){listener.layer.removeListener(listener.name,listener.handle)}});this._layers.forEach(function(layer){return _this5._addAttributions(layer.getAttributions())});if(this._baseLayerSettings){this._addAttributions(this._baseLayerSettings.options.attribution)}}},{key:"_addAttributions",value:function _addAttributions(attribution){var _this6=this;var attributions=getAttributionArray(attribution);attributions.forEach(function(attribution){_this6._leafletMap.attributionControl.removeAttribution(attribution);_this6._leafletMap.attributionControl.addAttribution(attribution)})}},{key:"_removeAttributions",value:function _removeAttributions(attribution){var _this7=this;var attributions=getAttributionArray(attribution);attributions.forEach(function(attribution){_this7._leafletMap.attributionControl.removeAttribution(attribution)})}},{key:"destroy",value:function destroy(){if(this._leafletFitControl){this._leafletMap.removeControl(this._leafletFitControl)}if(this._leafletDrawControl){this._leafletMap.removeControl(this._leafletDrawControl)}if(this._leafletLegendControl){this._leafletMap.removeControl(this._leafletLegendControl)}this.setBaseLayer(null);var layer;while(this._layers.length){layer=this._layers.pop();layer.removeFromLeafletMap(this._leafletMap)}this._leafletMap.remove();this._containerNode.innerHTML="";this._listeners.forEach(function(listener){return listener.layer.removeListener(listener.name,listener.handle)})}},{key:"getCenter",value:function getCenter(){var center=this._leafletMap.getCenter();return{lon:center.lng,lat:center.lat}}},{key:"setCenter",value:function setCenter(latitude,longitude){var latLong=_leaflet["default"].latLng(latitude,longitude);if(latLong.equals&&!latLong.equals(this._leafletMap.getCenter())){this._leafletMap.setView(latLong)}}},{key:"setZoomLevel",value:function setZoomLevel(zoomLevel){if(this._leafletMap.getZoom()!==zoomLevel){this._leafletMap.setZoom(zoomLevel)}}},{key:"getGeohashPrecision",value:function getGeohashPrecision(){return(0,_zoom_to_precision.zoomToPrecision)(this._leafletMap.getZoom(),12,this._leafletMap.getMaxZoom())}},{key:"getLeafletBounds",value:function getLeafletBounds(){return this._leafletMap.getBounds()}},{key:"getMetersPerPixel",value:function getMetersPerPixel(){var pointC=this._leafletMap.latLngToContainerPoint(this._leafletMap.getCenter());var pointX=[pointC.x+1,pointC.y];var pointY=[pointC.x,pointC.y+1];var latLngC=this._leafletMap.containerPointToLatLng(pointC);var latLngX=this._leafletMap.containerPointToLatLng(pointX);var latLngY=this._leafletMap.containerPointToLatLng(pointY);var distanceX=latLngC.distanceTo(latLngX);var distanceY=latLngC.distanceTo(latLngY);return _lodash["default"].min([distanceX,distanceY])}},{key:"_getLeafletBounds",value:function _getLeafletBounds(resizeOnFail){var boundsRaw=this._leafletMap.getBounds();var bounds=this._leafletMap.wrapLatLngBounds(boundsRaw);if(!bounds){return null}var southEast=bounds.getSouthEast();var northWest=bounds.getNorthWest();if(southEast.lng===northWest.lng||southEast.lat===northWest.lat){if(resizeOnFail){this._leafletMap.invalidateSize();return this._getLeafletBounds(false)}else{return null}}else{return bounds}}},{key:"getBounds",value:function getBounds(){var bounds=this._getLeafletBounds(true);if(!bounds){return null}var southEast=bounds.getSouthEast();var northWest=bounds.getNorthWest();var southEastLng=southEast.lng;var northWestLng=northWest.lng;var southEastLat=southEast.lat;var northWestLat=northWest.lat;return{bottom_right:{lat:southEastLat,lon:southEastLng},top_left:{lat:northWestLat,lon:northWestLng}}}},{key:"setDesaturateBaseLayer",value:function setDesaturateBaseLayer(isDesaturated){if(isDesaturated===this._baseLayerIsDesaturated){return}this._baseLayerIsDesaturated=isDesaturated;this._updateDesaturation();if(this._leafletBaseLayer){this._leafletBaseLayer.redraw()}}},{key:"addDrawControl",value:function addDrawControl(){var drawColor="#000";var drawOptions={draw:{polyline:false,marker:false,circle:false,rectangle:{shapeOptions:{stroke:false,color:drawColor}},polygon:{shapeOptions:{color:drawColor}},circlemarker:false}};this._leafletDrawControl=new _leaflet["default"].Control.Draw(drawOptions);this._leafletMap.addControl(this._leafletDrawControl)}},{key:"addFitControl",value:function addFitControl(){if(this._leafletFitControl||!this._leafletMap){return}var fitContainer=_leaflet["default"].DomUtil.create("div","leaflet-control leaflet-bar leaflet-control-fit");this._leafletFitControl=makeFitControl(fitContainer,this);this._leafletMap.addControl(this._leafletFitControl)}},{key:"addLegendControl",value:function addLegendControl(){if(this._leafletLegendControl||!this._leafletMap){return}this._updateLegend()}},{key:"setLegendPosition",value:function setLegendPosition(position){if(this._legendPosition===position){if(!this._leafletLegendControl){this._updateLegend()}}else{this._legendPosition=position;this._updateLegend()}}},{key:"_updateLegend",value:function _updateLegend(){if(this._leafletLegendControl){this._leafletMap.removeControl(this._leafletLegendControl)}var $wrapper=(0,_jquery["default"])("<div>").addClass("visMapLegend__wrapper");this._leafletLegendControl=makeLegendControl($wrapper,this,this._legendPosition);this._leafletMap.addControl(this._leafletLegendControl)}},{key:"resize",value:function resize(){this._leafletMap.invalidateSize();this._updateExtent()}},{key:"setMinZoom",value:function setMinZoom(zoom){this._leafletMap.setMinZoom(zoom)}},{key:"setMaxZoom",value:function setMaxZoom(zoom){this._leafletMap.setMaxZoom(zoom)}},{key:"getLeafletBaseLayer",value:function getLeafletBaseLayer(){return this._leafletBaseLayer}},{key:"setBaseLayer",value:function setBaseLayer(settings){var _this8=this;if(_lodash["default"].isEqual(settings,this._baseLayerSettings)){return}if(settings===null){if(this._leafletBaseLayer&&this._leafletMap){this._removeAttributions(this._baseLayerSettings.options.attribution);this._leafletMap.removeLayer(this._leafletBaseLayer);this._leafletBaseLayer=null;this._baseLayerSettings=null}return}this._baseLayerSettings=settings;if(this._leafletBaseLayer){this._leafletMap.removeLayer(this._leafletBaseLayer);this._leafletBaseLayer=null}var baseLayer;if(settings.baseLayerType==="wms"){baseLayer=this._getWMSBaseLayer(settings.options)}else if(settings.baseLayerType==="tms"){baseLayer=this._getTMSBaseLayer(settings.options)}if(baseLayer){baseLayer.on("tileload",function(){return _this8._updateDesaturation()});baseLayer.on("load",function(){_this8.emit("baseLayer:loaded")});baseLayer.on("loading",function(){_this8.emit("baseLayer:loading")});this._leafletBaseLayer=baseLayer;if(settings.options.showZoomMessage){baseLayer.on("add",function(){_this8._addMaxZoomMessage(baseLayer)})}this._leafletBaseLayer.addTo(this._leafletMap);this._leafletBaseLayer.bringToBack();if(settings.options.minZoom>this._leafletMap.getZoom()){this._leafletMap.setZoom(settings.options.minZoom)}this._addAttributions(settings.options.attribution);this.resize()}}},{key:"isInside",value:function isInside(bucketRectBounds){var mapBounds=this._leafletMap.getBounds();return mapBounds.intersects(bucketRectBounds)}},{key:"fitToData",value:function(){var _fitToData=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(){var boundsArray,bounds;return regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(this._leafletMap){_context3.next=2;break}return _context3.abrupt("return");case 2:_context3.next=4;return Promise.all(this._layers.map(function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(layer){return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return layer.getBounds();case 2:return _context.abrupt("return",_context.sent);case 3:case"end":return _context.stop()}}},_callee)}));return function(_x){return _ref.apply(this,arguments)}}()));case 4:boundsArray=_context3.sent;bounds=null;boundsArray.forEach(function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(b){return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(bounds){bounds.extend(b)}else{bounds=b}case 1:case"end":return _context2.stop()}}},_callee2)}));return function(_x2){return _ref2.apply(this,arguments)}}());if(bounds&&bounds.isValid()){this._leafletMap.fitBounds(bounds)}case 8:case"end":return _context3.stop()}}},_callee3,this)}));function fitToData(){return _fitToData.apply(this,arguments)}return fitToData}()},{key:"_getTMSBaseLayer",value:function _getTMSBaseLayer(options){return _leaflet["default"].tileLayer(options.url,{minZoom:options.minZoom,maxZoom:options.maxZoom,subdomains:options.subdomains||[]})}},{key:"_getWMSBaseLayer",value:function _getWMSBaseLayer(options){var wmsOptions={format:options.format||"",layers:options.layers||"",minZoom:options.minZoom,maxZoom:options.maxZoom,styles:options.styles||"",transparent:options.transparent,version:options.version||"1.3.0"};return typeof options.url==="string"&&options.url.length?_leaflet["default"].tileLayer.wms(options.url,wmsOptions):null}},{key:"_updateExtent",value:function _updateExtent(){this._layers.forEach(function(layer){return layer.updateExtent()})}},{key:"_updateDesaturation",value:function _updateDesaturation(){var tiles=(0,_jquery["default"])("img.leaflet-tile-loaded");if(_lodash["default"].get(this._baseLayerSettings,"options.origin")===_origin.ORIGIN.EMS){tiles.addClass("filters-off")}else{if(this._baseLayerIsDesaturated){tiles.removeClass("filters-off")}else if(!this._baseLayerIsDesaturated){tiles.addClass("filters-off")}}}},{key:"persistUiStateForVisualization",value:function persistUiStateForVisualization(visualization){var _this9=this;function persistMapStateInUiState(){var uiState=visualization.getUiState();var centerFromUIState=uiState.get("mapCenter");var zoomFromUiState=parseInt(uiState.get("mapZoom"));if(isNaN(zoomFromUiState)||this.getZoomLevel()!==zoomFromUiState){visualization.uiStateVal("mapZoom",this.getZoomLevel())}var centerFromMap=this.getCenter();if(!centerFromUIState||centerFromMap.lon!==centerFromUIState[1]||centerFromMap.lat!==centerFromUIState[0]){visualization.uiStateVal("mapCenter",[centerFromMap.lat,centerFromMap.lon])}}this._leafletMap.on("resize",function(){visualization.sessionState.mapBounds=_this9.getBounds()});this._leafletMap.on("load",function(){visualization.sessionState.mapBounds=_this9.getBounds()});this.on("dragend",persistMapStateInUiState);this.on("zoomend",persistMapStateInUiState)}},{key:"useUiStateFromVisualization",value:function useUiStateFromVisualization(visualization){var uiState=visualization.getUiState();var zoomFromUiState=parseInt(uiState.get("mapZoom"));var centerFromUIState=uiState.get("mapCenter");if(!isNaN(zoomFromUiState)){this.setZoomLevel(zoomFromUiState)}if(centerFromUIState){this.setCenter(centerFromUIState[0],centerFromUIState[1])}}}]);return KibanaMap}(_events.EventEmitter);exports.KibanaMap=KibanaMap;function getAttributionArray(attribution){var attributionString=attribution||"";var attributions=attributionString.split(/\s*\|\s*/);if(attributions.length===1){attributions=attributions[0].split(",")}return attributions}},1999:function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(12);var _lodash=_interopRequireDefault(__webpack_require__(1));var _markdownIt=_interopRequireDefault(__webpack_require__(429));var _origin=__webpack_require__(346);var _ems_client=__webpack_require__(5846);var _i18n=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var markdownIt=new _markdownIt["default"]({html:false,linkify:true});var TMS_IN_YML_ID="TMS in config/kibana.yml";_modules.uiModules.get("kibana").service("serviceSettings",function($sanitize,mapConfig,tilemapsConfig,kbnVersion){var attributionFromConfig=$sanitize(markdownIt.render(tilemapsConfig.deprecated.config.options.attribution||""));var tmsOptionsFromConfig=_lodash["default"].assign({},tilemapsConfig.deprecated.config.options,{attribution:attributionFromConfig});var ServiceSettings=function(){function ServiceSettings(){_classCallCheck(this,ServiceSettings);this._showZoomMessage=true;this._emsClient=new _ems_client.EMSClient({language:_i18n.i18n.getLocale(),kbnVersion:kbnVersion,manifestServiceUrl:mapConfig.manifestServiceUrl,htmlSanitizer:$sanitize,landingPageUrl:mapConfig.emsLandingPageUrl})}_createClass(ServiceSettings,[{key:"shouldShowZoomMessage",value:function shouldShowZoomMessage(_ref){var origin=_ref.origin;return origin===_origin.ORIGIN.EMS&&this._showZoomMessage}},{key:"disableZoomMessage",value:function disableZoomMessage(){this._showZoomMessage=false}},{key:"__debugStubManifestCalls",value:function __debugStubManifestCalls(manifestRetrieval){var _this=this;var oldGetManifest=this._emsClient.getManifest;this._emsClient.getManifest=manifestRetrieval;return{removeStub:function removeStub(){delete _this._emsClient.getManifest;if(_this._emsClient.getManifest!==oldGetManifest){_this._emsClient.getManifest=oldGetManifest}}}}},{key:"getFileLayers",value:function(){var _getFileLayers=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var fileLayers;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(mapConfig.includeElasticMapsService){_context.next=2;break}return _context.abrupt("return",[]);case 2:_context.next=4;return this._emsClient.getFileLayers();case 4:fileLayers=_context.sent;return _context.abrupt("return",fileLayers.map(function(fileLayer){var format=fileLayer.getDefaultFormatType();var meta=fileLayer.getDefaultFormatMeta();return{name:fileLayer.getDisplayName(),origin:fileLayer.getOrigin(),id:fileLayer.getId(),created_at:fileLayer.getCreatedAt(),attribution:fileLayer.getHTMLAttribution(),fields:fileLayer.getFieldsInLanguage(),format:format,meta:meta}}));case 6:case"end":return _context.stop()}}},_callee,this)}));function getFileLayers(){return _getFileLayers.apply(this,arguments)}return getFileLayers}()},{key:"getTMSServices",value:function(){var _getTMSServices=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(){var allServices,tmsService,servicesFromManifest,strippedServiceFromManifest;return regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:allServices=[];if(tilemapsConfig.deprecated.isOverridden){tmsService=_lodash["default"].cloneDeep(tmsOptionsFromConfig);tmsService.id=TMS_IN_YML_ID;tmsService.origin=_origin.ORIGIN.KIBANA_YML;allServices.push(tmsService)}if(!mapConfig.includeElasticMapsService){_context3.next=10;break}_context3.next=5;return this._emsClient.getTMSServices();case 5:servicesFromManifest=_context3.sent;_context3.next=8;return Promise.all(servicesFromManifest.filter(function(tmsService){return tmsService.getId()===mapConfig.emsTileLayerId.bright}).map(function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(tmsService){var shim;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.t0=tmsService.getOrigin();_context2.t1=tmsService.getId();_context2.next=4;return tmsService.getMinZoom();case 4:_context2.t2=_context2.sent;_context2.next=7;return tmsService.getMaxZoom();case 7:_context2.t3=_context2.sent;_context2.t4=tmsService.getHTMLAttribution();shim={origin:_context2.t0,id:_context2.t1,minZoom:_context2.t2,maxZoom:_context2.t3,attribution:_context2.t4};return _context2.abrupt("return",shim);case 11:case"end":return _context2.stop()}}},_callee2)}));return function(_x){return _ref2.apply(this,arguments)}}()));case 8:strippedServiceFromManifest=_context3.sent;allServices=allServices.concat(strippedServiceFromManifest);case 10:return _context3.abrupt("return",allServices);case 11:case"end":return _context3.stop()}}},_callee3,this)}));function getTMSServices(){return _getTMSServices.apply(this,arguments)}return getTMSServices}()},{key:"addQueryParams",value:function addQueryParams(additionalQueryParams){this._emsClient.addQueryParams(additionalQueryParams)}},{key:"getEMSHotLink",value:function(){var _getEMSHotLink=_asyncToGenerator(regeneratorRuntime.mark(function _callee4(fileLayerConfig){var fileLayers,layer;return regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return this._emsClient.getFileLayers();case 2:fileLayers=_context4.sent;layer=fileLayers.find(function(fileLayer){var hasIdByName=fileLayer.hasId(fileLayerConfig.name);var hasIdById=fileLayer.hasId(fileLayerConfig.id);return hasIdByName||hasIdById});return _context4.abrupt("return",layer?layer.getEMSHotLink():null);case 5:case"end":return _context4.stop()}}},_callee4,this)}));function getEMSHotLink(_x2){return _getEMSHotLink.apply(this,arguments)}return getEMSHotLink}()},{key:"_getAttributesForEMSTMSLayer",value:function(){var _getAttributesForEMSTMSLayer2=_asyncToGenerator(regeneratorRuntime.mark(function _callee5(isDesaturated,isDarkMode){var tmsServices,emsTileLayerId,serviceId,tmsService;return regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return this._emsClient.getTMSServices();case 2:tmsServices=_context5.sent;emsTileLayerId=mapConfig.emsTileLayerId;if(isDarkMode){serviceId=emsTileLayerId.dark}else{if(isDesaturated){serviceId=emsTileLayerId.desaturated}else{serviceId=emsTileLayerId.bright}}tmsService=tmsServices.find(function(service){return service.getId()===serviceId});_context5.next=8;return tmsService.getUrlTemplate();case 8:_context5.t0=_context5.sent;_context5.next=11;return tmsService.getMinZoom();case 11:_context5.t1=_context5.sent;_context5.next=14;return tmsService.getMaxZoom();case 14:_context5.t2=_context5.sent;_context5.next=17;return tmsService.getHTMLAttribution();case 17:_context5.t3=_context5.sent;_context5.t4=_origin.ORIGIN.EMS;return _context5.abrupt("return",{url:_context5.t0,minZoom:_context5.t1,maxZoom:_context5.t2,attribution:_context5.t3,origin:_context5.t4});case 20:case"end":return _context5.stop()}}},_callee5,this)}));function _getAttributesForEMSTMSLayer(_x3,_x4){return _getAttributesForEMSTMSLayer2.apply(this,arguments)}return _getAttributesForEMSTMSLayer}()},{key:"getAttributesForTMSLayer",value:function(){var _getAttributesForTMSLayer=_asyncToGenerator(regeneratorRuntime.mark(function _callee6(tmsServiceConfig,isDesaturated,isDarkMode){var config,attrs,_config,_attrs;return regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:if(!(tmsServiceConfig.origin===_origin.ORIGIN.EMS)){_context6.next=4;break}return _context6.abrupt("return",this._getAttributesForEMSTMSLayer(isDesaturated,isDarkMode));case 4:if(!(tmsServiceConfig.origin===_origin.ORIGIN.KIBANA_YML)){_context6.next=10;break}config=tilemapsConfig.deprecated.config;attrs=_lodash["default"].pick(config,["url","minzoom","maxzoom","attribution"]);return _context6.abrupt("return",_objectSpread({},attrs,{origin:_origin.ORIGIN.KIBANA_YML}));case 10:if(!(tmsServiceConfig.id===TMS_IN_YML_ID)){_context6.next=16;break}_config=tilemapsConfig.deprecated.config;_attrs=_lodash["default"].pick(_config,["url","minzoom","maxzoom","attribution"]);return _context6.abrupt("return",_objectSpread({},_attrs,{origin:_origin.ORIGIN.KIBANA_YML}));case 16:return _context6.abrupt("return",this._getAttributesForEMSTMSLayer(isDesaturated,isDarkMode));case 17:case"end":return _context6.stop()}}},_callee6,this)}));function getAttributesForTMSLayer(_x5,_x6,_x7){return _getAttributesForTMSLayer.apply(this,arguments)}return getAttributesForTMSLayer}()},{key:"_getFileUrlFromEMS",value:function(){var _getFileUrlFromEMS2=_asyncToGenerator(regeneratorRuntime.mark(function _callee7(fileLayerConfig){var fileLayers,layer;return regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.next=2;return this._emsClient.getFileLayers();case 2:fileLayers=_context7.sent;layer=fileLayers.find(function(fileLayer){var hasIdByName=fileLayer.hasId(fileLayerConfig.name);var hasIdById=fileLayer.hasId(fileLayerConfig.id);return hasIdByName||hasIdById});if(!layer){_context7.next=8;break}return _context7.abrupt("return",layer.getDefaultFormatUrl());case 8:throw new Error("File  ".concat(fileLayerConfig.name," not recognized"));case 9:case"end":return _context7.stop()}}},_callee7,this)}));function _getFileUrlFromEMS(_x8){return _getFileUrlFromEMS2.apply(this,arguments)}return _getFileUrlFromEMS}()},{key:"getUrlForRegionLayer",value:function(){var _getUrlForRegionLayer=_asyncToGenerator(regeneratorRuntime.mark(function _callee8(fileLayerConfig){var url;return regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:if(fileLayerConfig.origin===_origin.ORIGIN.EMS){url=this._getFileUrlFromEMS(fileLayerConfig)}else if(fileLayerConfig.layerId&&fileLayerConfig.layerId.startsWith("".concat(_origin.ORIGIN.EMS,"."))){url=this._getFileUrlFromEMS(fileLayerConfig)}else if(fileLayerConfig.layerId&&fileLayerConfig.layerId.startsWith("".concat(_origin.ORIGIN.KIBANA_YML,"."))){url=fileLayerConfig.url}else{url=fileLayerConfig.url}return _context8.abrupt("return",url);case 2:case"end":return _context8.stop()}}},_callee8,this)}));function getUrlForRegionLayer(_x9){return _getUrlForRegionLayer.apply(this,arguments)}return getUrlForRegionLayer}()},{key:"getJsonForRegionLayer",value:function(){var _getJsonForRegionLayer=_asyncToGenerator(regeneratorRuntime.mark(function _callee9(fileLayerConfig){var url,response;return regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:_context9.next=2;return this.getUrlForRegionLayer(fileLayerConfig);case 2:url=_context9.sent;_context9.next=5;return fetch(url);case 5:response=_context9.sent;_context9.next=8;return response.json();case 8:return _context9.abrupt("return",_context9.sent);case 9:case"end":return _context9.stop()}}},_callee9,this)}));function getJsonForRegionLayer(_x10){return _getJsonForRegionLayer.apply(this,arguments)}return getJsonForRegionLayer}()}]);return ServiceSettings}();return new ServiceSettings})},200:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.YesNo=YesNo;var _propTypes=_interopRequireDefault(__webpack_require__(17));var _react=_interopRequireDefault(__webpack_require__(0));var _lodash=_interopRequireDefault(__webpack_require__(1));var _eui=__webpack_require__(2);var _react2=__webpack_require__(10);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function YesNo(props){var name=props.name,value=props.value;var handleChange=function handleChange(value){var name=props.name;return function(){var parts=_defineProperty({},name,value);props.onChange(parts)}};var htmlId=(0,_eui.htmlIdGenerator)();var inputName=name+_lodash["default"].uniqueId();return _react["default"].createElement("div",null,_react["default"].createElement(_eui.EuiRadio,{id:htmlId("yes"),label:_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.yesButtonLabel",defaultMessage:"Yes",description:"The 'yes' in a yes/no answer choice."}),className:"eui-displayInlineBlock",name:inputName,checked:Boolean(value),value:"yes",onChange:handleChange(1)}),"",_react["default"].createElement(_eui.EuiRadio,{id:htmlId("no"),label:_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.noButtonLabel",defaultMessage:"No",description:"The 'no' in a yes/no answer choice."}),className:"eui-displayInlineBlock",name:inputName,checked:!Boolean(value),value:"no",onChange:handleChange(0)}))}YesNo.propTypes={name:_propTypes["default"].string,value:_propTypes["default"].oneOfType([_propTypes["default"].number,_propTypes["default"].string])}},2000:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getLegendColors=getLegendColors;exports.getColor=getColor;function getLegendColors(colorRamp){var numLegendColors=arguments.length>1&&arguments[1]!==undefined?arguments[1]:4;var colors=[];colors[0]=getColor(colorRamp,0);for(var i=1;i<numLegendColors-1;i++){colors[i]=getColor(colorRamp,Math.floor(colorRamp.length*i/numLegendColors))}colors[numLegendColors-1]=getColor(colorRamp,colorRamp.length-1);return colors}function getColor(colorRamp,i){var color=colorRamp[i][1];var red=Math.floor(color[0]*255);var green=Math.floor(color[1]*255);var blue=Math.floor(color[2]*255);return"rgb(".concat(red,",").concat(green,",").concat(blue,")")}},2001:function(module,exports,__webpack_require__){"use strict";__webpack_require__(5858)},2002:function(module,exports,__webpack_require__){module.exports=__webpack_require__(18)(2168)},2007:function(module,exports,__webpack_require__){module.exports=__webpack_require__(18)(2174)},2008:function(module,exports,__webpack_require__){"use strict";var _angular=_interopRequireDefault(__webpack_require__(31));var _modules=__webpack_require__(12);var _eui=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var aceKeyboardModeId=0;_modules.uiModules.get("kibana").factory("kbnUiAceKeyboardModeService",function(){return{initialize:function initialize(scope,element){var uniqueId="kbnUiAceKeyboardHint-".concat(scope.$id,"-").concat(aceKeyboardModeId++);var hint=_angular["default"].element('<div\n          class="kbnUiAceKeyboardHint"\n          id="'.concat(uniqueId,'"\n          tabindex="0"\n          role="application"\n        >\n          <p class="kuiText kuiVerticalRhythmSmall">\n            Press Enter to start editing.\n          </p>\n          <p class="kuiText kuiVerticalRhythmSmall">\n            When you&rsquo;re done, press Escape to stop editing.\n          </p>\n        </div>'));var uiAceTextbox=element.find("textarea");function startEditing(){hint.addClass("kbnUiAceKeyboardHint-isInactive");uiAceTextbox.focus()}function enableOverlay(){hint.removeClass("kbnUiAceKeyboardHint-isInactive")}hint.keydown(function(ev){if(ev.keyCode===_eui.keyCodes.ENTER){ev.preventDefault();startEditing()}});uiAceTextbox.blur(function(){enableOverlay()});var isAutoCompleterOpen;document.addEventListener("keydown",function(){var autoCompleter=document.querySelector(".ace_autocomplete");if(!autoCompleter){isAutoCompleterOpen=false;return}isAutoCompleterOpen=autoCompleter.style.display!=="none"},{capture:true});uiAceTextbox.keydown(function(ev){if(ev.keyCode===_eui.keyCodes.ESCAPE){if(!isAutoCompleterOpen){ev.preventDefault();ev.stopPropagation();enableOverlay();hint.focus()}}});hint.click(startEditing);uiAceTextbox.attr("tabindex","-1");element.prepend(hint)}}}).directive("kbnUiAceKeyboardMode",function(kbnUiAceKeyboardModeService){return{restrict:"A",link:function link(scope,element){kbnUiAceKeyboardModeService.initialize(scope,element)}}})},2009:function(module,exports,__webpack_require__){"use strict";var _lodash=_interopRequireDefault(__webpack_require__(1));__webpack_require__(5928);__webpack_require__(2011);__webpack_require__(1015);var _modules=__webpack_require__(12);var _sidebar=_interopRequireDefault(__webpack_require__(5948));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_modules.uiModules.get("app/visualize").directive("visEditorSidebar",function(){return{restrict:"E",template:_sidebar["default"],scope:true,controllerAs:"sidebar",controller:function controller($scope){var _this=this;$scope.$watch("vis.type",function(visType){if(visType){_this.showData=visType.schemas.buckets||visType.schemas.metrics;if(_lodash["default"].has(visType,"editorConfig.optionTabs")){var activeTabs=visType.editorConfig.optionTabs.filter(function(tab){return _lodash["default"].get(tab,"active",false)});if(activeTabs.length>0){_this.section=activeTabs[0].name}}_this.section=_this.section||(_this.showData?"data":_lodash["default"].get(visType,"editorConfig.optionTabs[0].name"))}})}}})},201:function(module,exports,__webpack_require__){module.exports=__webpack_require__(18)(280)},2010:function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(12);var _default_editor_agg_add=__webpack_require__(5931);var _i18n=__webpack_require__(28);_modules.uiModules.get("kibana").directive("visEditorAggAdd",function(reactDirective){return reactDirective((0,_i18n.wrapInI18nContext)(_default_editor_agg_add.DefaultEditorAggAdd),[["group",{watchDepth:"collection"}],["schemas",{watchDepth:"collection"}],["stats",{watchDepth:"reference"}],"groupName","addSchema"])})},2011:function(module,exports,__webpack_require__){"use strict";var _lodash=_interopRequireDefault(__webpack_require__(1));var _react=_interopRequireDefault(__webpack_require__(0));var _reactDom=__webpack_require__(27);var _modules=__webpack_require__(12);var _vis_options=_interopRequireDefault(__webpack_require__(5947));var _i18n=__webpack_require__(28);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_modules.uiModules.get("app/visualize").directive("visEditorVisOptions",function($compile){return{restrict:"E",template:_vis_options["default"],scope:{vis:"=",visData:"=",uiState:"=",editor:"=",visualizeEditor:"=",editorState:"="},link:function link($scope,$el){var $optionContainer=$el.find("[data-visualization-options]");var reactOptionsComponent=typeof $scope.editor!=="string";var stageEditorParams=function stageEditorParams(params){$scope.editorState.params=_lodash["default"].cloneDeep(params);$scope.$apply()};var renderReactComponent=function renderReactComponent(){var Component=$scope.editor;(0,_reactDom.render)(_react["default"].createElement(_i18n.I18nContext,null,_react["default"].createElement(Component,{scope:$scope,editorState:$scope.editorState,stageEditorParams:stageEditorParams})),$el[0])};if(reactOptionsComponent){renderReactComponent()}else{var $editor=$compile($scope.editor)($scope);$optionContainer.append($editor)}$scope.$watchGroup(["visData","visualizeEditor","editorState.params"],function(){if(reactOptionsComponent){renderReactComponent()}});$scope.$watch("vis.type.schemas.all.length",function(len){$scope.alwaysShowOptions=len===0});$el.on("$destroy",function(){if(reactOptionsComponent){(0,_reactDom.unmountComponentAtNode)($el[0])}})}}})},2012:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VisEditorTypesRegistryProvider=void 0;var _registry=__webpack_require__(107);var VisEditorTypesRegistryProvider=(0,_registry.uiRegistry)({name:"visEditorTypes",index:["name"],order:["title"]});exports.VisEditorTypesRegistryProvider=VisEditorTypesRegistryProvider},2020:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.RegistryFieldFormatEditorsProvider=void 0;var _registry=__webpack_require__(107);var RegistryFieldFormatEditorsProvider=(0,_registry.uiRegistry)({name:"fieldFormatEditors",index:["formatId"],constructor:function constructor(){this.getEditor=function(formatId){return this.byFormatId[formatId]}}});exports.RegistryFieldFormatEditorsProvider=RegistryFieldFormatEditorsProvider},2022:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.applyResizeCheckerToEditors=applyResizeCheckerToEditors;var _resize_checker=__webpack_require__(1442);function applyResizeCheckerToEditors($scope,$el){for(var _len=arguments.length,editors=new Array(_len>2?_len-2:0),_key=2;_key<_len;_key++){editors[_key-2]=arguments[_key]}var checker=new _resize_checker.ResizeChecker($el);checker.on("resize",function(){return editors.forEach(function(e){return e.resize()})});$scope.$on("$destroy",function(){return checker.destroy()})}},2023:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.initializeInput=initializeInput;exports["default"]=getInput;var _autocomplete=_interopRequireDefault(__webpack_require__(2024));var _mappings=_interopRequireDefault(__webpack_require__(294));var _modules=__webpack_require__(12);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}__webpack_require__(201);__webpack_require__(2007);var SenseEditor=__webpack_require__(1021);var settings=__webpack_require__(506);var utils=__webpack_require__(1020);var es=__webpack_require__(1019);var history=__webpack_require__(1022);var input;function initializeInput($el,$actionsEl,$copyAsCurlEl,output){var openDocumentation=arguments.length>4&&arguments[4]!==undefined?arguments[4]:function(){};input=new SenseEditor($el);if(_modules.uiModules){var appSense=_modules.uiModules.get("app/sense");if(appSense&&appSense.setupResizeCheckerForRootEditors){appSense.setupResizeCheckerForRootEditors($el,input,output)}}input.autocomplete=new _autocomplete["default"](input);input.$actions=$actionsEl;input.commands.addCommand({name:"auto indent request",bindKey:{win:"Ctrl-I",mac:"Command-I"},exec:function exec(){input.autoIndent()}});input.commands.addCommand({name:"move to previous request start or end",bindKey:{win:"Ctrl-Up",mac:"Command-Up"},exec:function exec(){input.moveToPreviousRequestEdge()}});input.commands.addCommand({name:"move to next request start or end",bindKey:{win:"Ctrl-Down",mac:"Command-Down"},exec:function exec(){input.moveToNextRequestEdge()}});var CURRENT_REQ_ID=0;function sendCurrentRequestToES(addedToHistoryCb){var reqId=++CURRENT_REQ_ID;input.getRequestsInRange(function(requests){if(reqId!==CURRENT_REQ_ID){return}output.update("");if(requests.length===0){return}var isMultiRequest=requests.length>1;var finishChain=function finishChain(){};var isFirstRequest=true;var sendNextRequest=function sendNextRequest(){if(reqId!==CURRENT_REQ_ID){return}if(requests.length===0){finishChain();return}var req=requests.shift();var esPath=req.url;var esMethod=req.method;var esData=utils.collapseLiteralStrings(req.data.join("\n"));if(esData){esData+="\n"}es.send(esMethod,esPath,esData).always(function(dataOrjqXHR,textStatus,jqXhrORerrorThrown){if(reqId!==CURRENT_REQ_ID){return}var xhr=dataOrjqXHR.promise?dataOrjqXHR:jqXhrORerrorThrown;function modeForContentType(contentType){if(contentType.indexOf("text/plain")>=0){return"ace/mode/text"}else if(contentType.indexOf("application/yaml")>=0){return"ace/mode/yaml"}return null}var isSuccess=typeof xhr.status==="number"&&(xhr.status>=200&&xhr.status<300||xhr.status===404);if(isSuccess){if(xhr.status!==404&&settings.getPolling()){_mappings["default"].retrieveAutoCompleteInfo()}history.addToHistory(esPath,esMethod,esData);if(addedToHistoryCb){addedToHistoryCb()}var value=xhr.responseText;var mode=modeForContentType(xhr.getAllResponseHeaders("Content-Type")||"");if(settings.getTripleQuotes()&&(mode===null||mode==="application/json")){try{value=utils.expandLiteralStrings(value)}catch(e){}}var warnings=xhr.getResponseHeader("warning");if(warnings){var deprecationMessages=utils.extractDeprecationMessages(warnings);value=deprecationMessages.join("\n")+"\n"+value}if(isMultiRequest){value="# "+req.method+" "+req.url+"\n"+value}if(isFirstRequest){output.update(value,mode)}else{output.append("\n"+value)}isFirstRequest=false;sendNextRequest()}else{var _value;var _mode;if(xhr.responseText){_value=xhr.responseText;_mode=modeForContentType(xhr.getAllResponseHeaders("Content-Type")||"");if(_value[0]==="{"){try{_value=JSON.stringify(JSON.parse(_value),null,2)}catch(e){}}}else{_value="Request failed to get to the server (status code: "+xhr.status+")";_mode="ace/mode/text"}if(isMultiRequest){_value="# "+req.method+" "+req.url+"\n"+_value}if(isFirstRequest){output.update(_value,_mode)}else{output.append("\n"+_value)}finishChain()}})};sendNextRequest()})}input.commands.addCommand({name:"send to elasticsearch",bindKey:{win:"Ctrl-Enter",mac:"Command-Enter"},exec:function exec(){return sendCurrentRequestToES()}});input.commands.addCommand({name:"open documentation",bindKey:{win:"Ctrl-/",mac:"Command-/"},exec:function exec(){openDocumentation()}});if(settings){settings.applyCurrentSettings(input)}input.focus();input.highlightCurrentRequestsAndUpdateActionBar();input.sendCurrentRequestToES=sendCurrentRequestToES;__webpack_require__(6047)(input,output);return input}function getInput(){return input}},2024:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getEndpointFromPosition=getEndpointFromPosition;exports["default"]=_default;var _kb=__webpack_require__(6020);var _utils=_interopRequireDefault(__webpack_require__(1020));var _engine=__webpack_require__(2031);var _components=__webpack_require__(348);var _lodash=_interopRequireDefault(__webpack_require__(1));var _brace=_interopRequireDefault(__webpack_require__(201));__webpack_require__(6039);var _i18n=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var AceRange=_brace["default"].acequire("ace/range").Range;var LAST_EVALUATED_TOKEN=null;function isUrlParamsToken(token){switch((token||{}).type){case"url.param":case"url.equal":case"url.value":case"url.questionmark":case"url.amp":return true;default:return false}}function getCurrentMethodAndTokenPaths(editor,pos,forceEndOfUrl){var tokenIter=editor.iterForPosition(pos.row,pos.column);var startPos=pos;var bodyTokenPath=[];var ret={};var STATES={looking_for_key:0,looking_for_scope_start:1,start:3};var state=STATES.start;var t=tokenIter.getCurrentToken();if(t){if(startPos.column===0){t=tokenIter.stepBackward();state=STATES.looking_for_scope_start}}else{if(startPos.column===0){t=tokenIter.stepBackward();state=STATES.start}}var walkedSomeBody=false;for(;t&&t.type.indexOf("url")===-1&&t.type!=="method";t=tokenIter.stepBackward()){if(t.type!=="whitespace"){walkedSomeBody=true}switch(t.type){case"variable":if(state===STATES.looking_for_key){bodyTokenPath.unshift(t.value.trim().replace(/"/g,""))}state=STATES.looking_for_scope_start;break;case"paren.lparen":bodyTokenPath.unshift(t.value);if(state===STATES.looking_for_scope_start){state=STATES.looking_for_key}break;case"paren.rparen":state=STATES.looking_for_scope_start;var parenCount=1;t=tokenIter.stepBackward();while(t&&parenCount>0){switch(t.type){case"paren.lparen":parenCount--;break;case"paren.rparen":parenCount++;break}if(parenCount>0){t=tokenIter.stepBackward()}}if(!t){return{}}continue;case"punctuation.end_triple_quote":state=STATES.looking_for_scope_start;for(t=tokenIter.stepBackward();t;t=tokenIter.stepBackward()){if(t.type==="punctuation.start_triple_quote"){t=tokenIter.stepBackward();break}}if(!t){return{}}continue;case"punctuation.start_triple_quote":if(state===STATES.start){state=STATES.looking_for_key}else if(state===STATES.looking_for_key){state=STATES.looking_for_scope_start}bodyTokenPath.unshift('"""');continue;case"string":case"constant.numeric":case"constant.language.boolean":case"text":if(state===STATES.start){state=STATES.looking_for_key}else if(state===STATES.looking_for_key){state=STATES.looking_for_scope_start}break;case"punctuation.comma":if(state===STATES.start){state=STATES.looking_for_scope_start}break;case"punctuation.colon":case"whitespace":if(state===STATES.start){state=STATES.looking_for_key}break}}if(walkedSomeBody&&(!bodyTokenPath||bodyTokenPath.length===0)){return{}}ret.urlTokenPath=[];if(tokenIter.getCurrentTokenRow()===startPos.row){if(t&&(t.type==="url.part"||t.type==="url.param"||t.type==="url.value")){if(forceEndOfUrl&&t.type==="url.part"){ret.urlTokenPath.push(t.value);ret.urlTokenPath.push(_components.URL_PATH_END_MARKER)}t=tokenIter.stepBackward();while(t.type==="whitespace"){t=tokenIter.stepBackward()}}bodyTokenPath=null}ret.bodyTokenPath=bodyTokenPath;ret.urlParamsTokenPath=null;ret.requestStartRow=tokenIter.getCurrentTokenRow();var curUrlPart;while(t&&isUrlParamsToken(t)){switch(t.type){case"url.value":if(Array.isArray(curUrlPart)){curUrlPart.unshift(t.value)}else if(curUrlPart){curUrlPart=[t.value,curUrlPart]}else{curUrlPart=t.value}break;case"url.comma":if(!curUrlPart){curUrlPart=[]}else if(!Array.isArray(curUrlPart)){curUrlPart=[curUrlPart]}break;case"url.param":var v=curUrlPart;curUrlPart={};curUrlPart[t.value]=v;break;case"url.amp":case"url.questionmark":if(!ret.urlParamsTokenPath){ret.urlParamsTokenPath=[]}ret.urlParamsTokenPath.unshift(curUrlPart||{});curUrlPart=null;break}t=tokenIter.stepBackward()}curUrlPart=null;while(t&&t.type.indexOf("url")!==-1){switch(t.type){case"url.part":if(Array.isArray(curUrlPart)){curUrlPart.unshift(t.value)}else if(curUrlPart){curUrlPart=[t.value,curUrlPart]}else{curUrlPart=t.value}break;case"url.comma":if(!curUrlPart){curUrlPart=[]}else if(!Array.isArray(curUrlPart)){curUrlPart=[curUrlPart]}break;case"url.slash":if(curUrlPart){ret.urlTokenPath.unshift(curUrlPart);curUrlPart=null}break}t=editor.parser.prevNonEmptyToken(tokenIter)}if(curUrlPart){ret.urlTokenPath.unshift(curUrlPart)}if(!ret.bodyTokenPath&&!ret.urlParamsTokenPath){if(ret.urlTokenPath.length>0){ret.otherTokenValues=ret.urlTokenPath[0]}}else{ret.urlTokenPath.push(_components.URL_PATH_END_MARKER)}if(t&&t.type==="method"){ret.method=t.value}return ret}function getEndpointFromPosition(editor,pos){var context=_objectSpread({},getCurrentMethodAndTokenPaths(editor,pos,true));var components=(0,_kb.getTopLevelUrlCompleteComponents)(context.method);(0,_engine.populateContext)(context.urlTokenPath,context,editor,true,components);return context.endpoint}function _default(editor){function isUrlPathToken(token){switch((token||{}).type){case"url.slash":case"url.comma":case"url.part":return true;default:return false}}function addMetaToTermsList(list,meta,template){return _lodash["default"].map(list,function(t){if(_typeof(t)!=="object"){t={name:t}}return _lodash["default"].defaults(t,{meta:meta,template:template})})}function applyTerm(term){var session=editor.getSession();var context=term.context;addReplacementInfoToContext(context,editor.getCursorPosition(),term.insertValue);var termAsString;if(context.autoCompleteType==="body"){termAsString=typeof term.insertValue==="string"?'"'+term.insertValue+'"':term.insertValue+"";if(term.insertValue==="["||term.insertValue==="{"){termAsString=""}}else{termAsString=term.insertValue+""}var valueToInsert=termAsString;var templateInserted=false;if(context.addTemplate&&!_lodash["default"].isUndefined(term.template)&&!_lodash["default"].isNull(term.template)){var indentedTemplateLines=_utils["default"].jsonToString(term.template,true).split("\n");var currentIndentation=session.getLine(context.rangeToReplace.start.row);currentIndentation=currentIndentation.match(/^\s*/)[0];for(var i=1;i<indentedTemplateLines.length;i++){indentedTemplateLines[i]=currentIndentation+indentedTemplateLines[i]}valueToInsert+=": "+indentedTemplateLines.join("\n");templateInserted=true}else{templateInserted=true;if(term.value==="["){valueToInsert+="[]"}else if(term.value==="{"){valueToInsert+="{}"}else{templateInserted=false}}valueToInsert=context.prefixToAdd+valueToInsert+context.suffixToAdd;removeChangeListener();if(context.rangeToReplace.start.column!==context.rangeToReplace.end.column){session.replace(context.rangeToReplace,valueToInsert)}else{editor.insert(valueToInsert)}editor.clearSelection();var newPos={row:context.rangeToReplace.start.row,column:context.rangeToReplace.start.column+termAsString.length+context.prefixToAdd.length+(templateInserted?0:context.suffixToAdd.length)};var tokenIter=editor.iterForPosition(newPos.row,newPos.column);if(context.autoCompleteType==="body"){var nonEmptyToken=editor.parser.nextNonEmptyToken(tokenIter);switch(nonEmptyToken?nonEmptyToken.type:"NOTOKEN"){case"paren.rparen":newPos={row:tokenIter.getCurrentTokenRow(),column:tokenIter.getCurrentTokenColumn()};break;case"punctuation.colon":nonEmptyToken=editor.parser.nextNonEmptyToken(tokenIter);if((nonEmptyToken||{}).type==="paren.lparen"){nonEmptyToken=editor.parser.nextNonEmptyToken(tokenIter);newPos={row:tokenIter.getCurrentTokenRow(),column:tokenIter.getCurrentTokenColumn()};if(nonEmptyToken&&nonEmptyToken.value.indexOf('"')===0){newPos.column++}}break;case"paren.lparen":case"punctuation.comma":tokenIter.stepForward();newPos={row:tokenIter.getCurrentTokenRow(),column:tokenIter.getCurrentTokenColumn()};break}editor.moveCursorToPosition(newPos)}addChangeListener()}function getAutoCompleteContext(editor,session,pos){var context={autoCompleteSet:null,endpoint:null,urlPath:null,method:null,activeScheme:null,editor:editor};context.autoCompleteType=getAutoCompleteType(pos);switch(context.autoCompleteType){case"path":addPathAutoCompleteSetToContext(context,pos);break;case"url_params":addUrlParamsAutoCompleteSetToContext(context,pos);break;case"method":addMethodAutoCompleteSetToContext(context,pos);break;case"body":addBodyAutoCompleteSetToContext(context,pos);break;default:return null}if(!context.autoCompleteSet){return null}addReplacementInfoToContext(context,pos);context.createdWithToken=_lodash["default"].clone(context.updatedForToken);return context}function getAutoCompleteType(pos){var rowMode=editor.parser.getRowParseMode();if(rowMode&editor.parser.MODE.IN_REQUEST){return"body"}if(rowMode&editor.parser.MODE.REQUEST_START){var tokenIter=editor.iterForPosition(pos.row,pos.column);var t=tokenIter.getCurrentToken();while(t.type==="url.comma"){t=tokenIter.stepBackward()}switch(t.type){case"method":return"method";case"whitespace":t=editor.parser.prevNonEmptyToken(tokenIter);switch((t||{}).type){case"method":return"path";break;default:if(isUrlPathToken(t)){return"path"}if(isUrlParamsToken(t)){return"url_params"}return null}break;default:if(isUrlPathToken(t)){return"path"}if(isUrlParamsToken(t)){return"url_params"}return null}}if(rowMode&editor.parser.MODE.REQUEST_END){return"body"}if((editor.getSession().getLine(pos.row)||"").trim()===""){rowMode=editor.parser.getRowParseMode(pos.row-1);if(rowMode&editor.parser.MODE.REQUEST_START&&rowMode&editor.parser.MODE.REQUEST_END){return"body"}return"method"}return null}function addReplacementInfoToContext(context,pos,replacingTerm){var session=editor.getSession();context.updatedForToken=_lodash["default"].clone(session.getTokenAt(pos.row,pos.column));if(!context.updatedForToken){context.updatedForToken={value:"",start:pos.column}}var anchorToken=context.createdWithToken;if(!anchorToken){anchorToken=context.updatedForToken}switch(context.updatedForToken.type){case"variable":case"string":case"text":case"constant.numeric":case"constant.language.boolean":case"method":case"url.index":case"url.type":case"url.id":case"url.method":case"url.endpoint":case"url.part":case"url.param":case"url.value":context.rangeToReplace=new AceRange(pos.row,anchorToken.start,pos.row,context.updatedForToken.start+context.updatedForToken.value.length);context.replacingToken=true;break;default:if(replacingTerm&&context.updatedForToken.value===replacingTerm){context.rangeToReplace=new AceRange(pos.row,anchorToken.start,pos.row,context.updatedForToken.start+context.updatedForToken.value.length);context.replacingToken=true}else{context.rangeToReplace=new AceRange(pos.row,pos.column,pos.row,pos.column);context.replacingToken=false}break}context.textBoxPosition={row:context.rangeToReplace.start.row,column:context.rangeToReplace.start.column};switch(context.autoCompleteType){case"path":addPathPrefixSuffixToContext(context);break;case"url_params":addUrlParamsPrefixSuffixToContext(context);break;case"method":addMethodPrefixSuffixToContext(context);break;case"body":addBodyPrefixSuffixToContext(context);break}}function addBodyPrefixSuffixToContext(context){context.prefixToAdd="";context.suffixToAdd="";var tokenIter=editor.iterForCurrentLoc();var nonEmptyToken=editor.parser.nextNonEmptyToken(tokenIter);switch(nonEmptyToken?nonEmptyToken.type:"NOTOKEN"){case"NOTOKEN":case"paren.lparen":case"paren.rparen":case"punctuation.comma":context.addTemplate=true;break;case"punctuation.colon":context.addTemplate=false;nonEmptyToken=editor.parser.nextNonEmptyToken(tokenIter);if(!(nonEmptyToken&&nonEmptyToken.value==="{")){break}nonEmptyToken=editor.parser.nextNonEmptyToken(tokenIter);if(!(nonEmptyToken&&nonEmptyToken.value==="}")){break}context.addTemplate=true;context.rangeToReplace.end.row=tokenIter.getCurrentTokenRow();context.rangeToReplace.end.column=tokenIter.getCurrentTokenColumn()+nonEmptyToken.value.length;nonEmptyToken=editor.parser.nextNonEmptyToken(tokenIter);switch(nonEmptyToken?nonEmptyToken.type:"NOTOKEN"){case"NOTOKEN":case"paren.rparen":case"punctuation.comma":case"punctuation.colon":break;default:context.suffixToAdd=", "}break;default:context.addTemplate=true;context.suffixToAdd=", ";break}tokenIter=editor.iterForCurrentLoc();nonEmptyToken=tokenIter.getCurrentToken();var insertingRelativeToToken;if(context.replacingToken){insertingRelativeToToken=0}else{var pos=editor.getCursorPosition();if(pos.column===context.updatedForToken.start){insertingRelativeToToken=-1}else if(pos.column<context.updatedForToken.start+context.updatedForToken.value.length){insertingRelativeToToken=0}else{insertingRelativeToToken=1}}if(editor.parser.isEmptyToken(nonEmptyToken)||insertingRelativeToToken<=0){nonEmptyToken=editor.parser.prevNonEmptyToken(tokenIter)}switch(nonEmptyToken?nonEmptyToken.type:"NOTOKEN"){case"NOTOKEN":case"paren.lparen":case"punctuation.comma":case"punctuation.colon":case"method":break;default:if(nonEmptyToken&&nonEmptyToken.type.indexOf("url")<0){context.prefixToAdd=", "}}return context}function addUrlParamsPrefixSuffixToContext(context){context.prefixToAdd="";context.suffixToAdd=""}function addMethodPrefixSuffixToContext(context){context.prefixToAdd="";context.suffixToAdd="";var tokenIter=editor.iterForCurrentLoc();var row=tokenIter.getCurrentTokenRow();var t=editor.parser.nextNonEmptyToken(tokenIter);if(tokenIter.getCurrentTokenRow()!==row||!t){context.suffixToAdd=" "}}function addPathPrefixSuffixToContext(context){context.prefixToAdd="";context.suffixToAdd=""}function addMethodAutoCompleteSetToContext(context){context.autoCompleteSet=["GET","PUT","POST","DELETE","HEAD"].map(function(m,i){return{name:m,score:-i,meta:_i18n.i18n.translate("console.autocomplete.addMethodMetaText",{defaultMessage:"method"})}})}function addPathAutoCompleteSetToContext(context,pos){var ret=getCurrentMethodAndTokenPaths(editor,pos);context.method=ret.method;context.token=ret.token;context.otherTokenValues=ret.otherTokenValues;context.urlTokenPath=ret.urlTokenPath;var components=(0,_kb.getTopLevelUrlCompleteComponents)(context.method);(0,_engine.populateContext)(ret.urlTokenPath,context,editor,true,components);context.autoCompleteSet=addMetaToTermsList(context.autoCompleteSet,"endpoint")}function addUrlParamsAutoCompleteSetToContext(context,pos){var ret=getCurrentMethodAndTokenPaths(editor,pos);context.method=ret.method;context.otherTokenValues=ret.otherTokenValues;context.urlTokenPath=ret.urlTokenPath;if(!ret.urlTokenPath){console.log("Can't extract a valid url token path.");return context}(0,_engine.populateContext)(ret.urlTokenPath,context,editor,false,(0,_kb.getTopLevelUrlCompleteComponents)(context.method));if(!context.endpoint){console.log("couldn't resolve an endpoint.");return context}if(!ret.urlParamsTokenPath){console.log("Can't extract a valid urlParams token path.");return context}var tokenPath=[];var currentParam=ret.urlParamsTokenPath.pop();if(currentParam){tokenPath=Object.keys(currentParam);context.otherTokenValues=currentParam[tokenPath[0]]}(0,_engine.populateContext)(tokenPath,context,editor,true,context.endpoint.paramsAutocomplete.getTopLevelComponents(context.method));return context}function addBodyAutoCompleteSetToContext(context,pos){var ret=getCurrentMethodAndTokenPaths(editor,pos);context.method=ret.method;context.otherTokenValues=ret.otherTokenValues;context.urlTokenPath=ret.urlTokenPath;context.requestStartRow=ret.requestStartRow;if(!ret.urlTokenPath){console.log("Can't extract a valid url token path.");return context}(0,_engine.populateContext)(ret.urlTokenPath,context,editor,false,(0,_kb.getTopLevelUrlCompleteComponents)(context.method));context.bodyTokenPath=ret.bodyTokenPath;if(!ret.bodyTokenPath){console.log("Can't extract a valid body token path.");return context}context.endpointComponentResolver=_kb.getEndpointBodyCompleteComponents;context.globalComponentResolver=_kb.getGlobalAutocompleteComponents;var components;if(context.endpoint){components=context.endpoint.bodyAutocompleteRootComponents}else{components=(0,_kb.getUnmatchedEndpointComponents)()}(0,_engine.populateContext)(ret.bodyTokenPath,context,editor,true,components);return context}var evaluateCurrentTokenAfterAChange=_lodash["default"].debounce(function evaluateCurrentTokenAfterAChange(pos){var session=editor.getSession();var currentToken=session.getTokenAt(pos.row,pos.column);if(!currentToken){if(pos.row===0){LAST_EVALUATED_TOKEN=null;return}currentToken={start:0,value:""}}currentToken.row=pos.row;if(editor.parser.isEmptyToken(currentToken)){var nextToken=session.getTokenAt(pos.row,pos.column+1);if(editor.parser.isEmptyToken(nextToken)){currentToken.start=pos.column;LAST_EVALUATED_TOKEN=currentToken}else{nextToken.row=pos.row;LAST_EVALUATED_TOKEN=nextToken}return}if(!LAST_EVALUATED_TOKEN){LAST_EVALUATED_TOKEN=currentToken;return}if(LAST_EVALUATED_TOKEN.start!==currentToken.start||LAST_EVALUATED_TOKEN.row!==currentToken.row||LAST_EVALUATED_TOKEN.value===currentToken.value){LAST_EVALUATED_TOKEN=currentToken;return}switch(currentToken.type||"UNKNOWN"){case"paren.lparen":case"paren.rparen":case"punctuation.colon":case"punctuation.comma":case"UNKNOWN":return}LAST_EVALUATED_TOKEN=currentToken;editor.execCommand("startAutocomplete")},100);function editorChangeListener(){var cursor=editor.selection.lead;if(editor.__ace.completer&&editor.__ace.completer.activated){return}evaluateCurrentTokenAfterAChange(cursor)}function addChangeListener(){editor.on("changeSelection",editorChangeListener)}function removeChangeListener(){editor.off("changeSelection",editorChangeListener)}function getCompletions(aceEditor,session,pos,prefix,callback){try{var context=getAutoCompleteContext(editor,session,pos);if(!context){callback(null,[])}else{var terms=_lodash["default"].map(context.autoCompleteSet,function(term){if(_typeof(term)!=="object"){term={name:term}}else{term=_lodash["default"].clone(term)}var defaults={value:term.name,meta:"API",score:0,context:context};if(context.autoCompleteType==="body"){defaults.completer={insertMatch:function insertMatch(){return applyTerm(term)}}}return _lodash["default"].defaults(term,defaults)});terms.sort(function(t1,t2){if(t1.score>t2.score){return-1}if(t1.score<t2.score){return 1}if(t1.name<t2.name){return-1}if(t1.name===t2.name){return 0}return 1});callback(null,_lodash["default"].map(terms,function(t,i){t.insertValue=t.insertValue||t.value;t.value=""+t.value;t.score=-i;return t}))}}catch(e){console.log("error while getting completion terms",e);callback(e,null)}}addChangeListener();_brace["default"].define("ace/autocomplete/text_completer",["require","exports","module"],function(require,exports){exports.getCompletions=function(editor,session,pos,prefix,callback){callback(null,[])}});var langTools=_brace["default"].acequire("ace/ext/language_tools");langTools.setCompleters([{identifierRegexps:[/[a-zA-Z_0-9\.\$\-\u00A2-\uFFFF]/],getCompletions:getCompletions}]);editor.setOptions({enableBasicAutocompletion:true});editor.$blockScrolling=Infinity;return{_test:{getCompletions:getCompletions,addReplacementInfoToContext:addReplacementInfoToContext,addChangeListener:addChangeListener,removeChangeListener:removeChangeListener}}}},2025:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AutocompleteComponent=void 0;function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var AutocompleteComponent=function(){function AutocompleteComponent(name){_classCallCheck(this,AutocompleteComponent);this.name=name}_createClass(AutocompleteComponent,[{key:"getTerms",value:function getTerms(){return[]}},{key:"match",value:function match(){return{next:this.next}}}]);return AutocompleteComponent}();exports.AutocompleteComponent=AutocompleteComponent},2026:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.initializeOutput=initializeOutput;exports["default"]=getOutput;var _lodash=_interopRequireDefault(__webpack_require__(1));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ace=__webpack_require__(201);var settings=__webpack_require__(506);var OutputMode=__webpack_require__(6029);var smartResize=__webpack_require__(2030);var output;function initializeOutput($el){output=ace.acequire("ace/ace").edit($el[0]);var outputMode=new OutputMode.Mode;output.$blockScrolling=Infinity;output.resize=smartResize(output);output.update=function(val,mode,cb){if(typeof mode==="function"){cb=mode;mode=void 0}var session=output.getSession();session.setMode(val?mode||outputMode:"ace/mode/text");session.setValue(val);if(typeof cb==="function"){setTimeout(cb)}};output.append=function(val,foldPrevious,cb){if(typeof foldPrevious==="function"){cb=foldPrevious;foldPrevious=true}if(_lodash["default"].isUndefined(foldPrevious)){foldPrevious=true}var session=output.getSession();var lastLine=session.getLength();if(foldPrevious){output.moveCursorTo(Math.max(0,lastLine-1),0)}session.insert({row:lastLine,column:0},"\n"+val);output.moveCursorTo(lastLine+1,0);if(typeof cb==="function"){setTimeout(cb)}};output.$el=$el;(function(session){session.setMode("ace/mode/text");session.setFoldStyle("markbeginend");session.setTabSize(2);session.setUseWrapMode(true)})(output.getSession());output.setShowPrintMargin(false);output.setReadOnly(true);if(settings){settings.applyCurrentSettings(output)}return output}function getOutput(){return output}},2027:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.OutputJsonHighlightRules=OutputJsonHighlightRules;__webpack_require__(6030);var _x_json_highlight_rules=__webpack_require__(2028);var ace=__webpack_require__(201);var oop=ace.acequire("ace/lib/oop");var JsonHighlightRules=ace.acequire("ace/mode/json_highlight_rules").JsonHighlightRules;function OutputJsonHighlightRules(){this.$rules={};(0,_x_json_highlight_rules.addToRules)(this,"start");this.$rules.start.unshift({token:"warning",regex:"#!.*$"},{token:"comment",regex:"#.*$"});if(this.constructor===OutputJsonHighlightRules){this.normalizeRules()}}oop.inherits(OutputJsonHighlightRules,JsonHighlightRules)},2028:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.addToRules=addToRules;var _=__webpack_require__(1);var ScriptHighlightRules=__webpack_require__(2029).ScriptHighlightRules;var jsonRules=function jsonRules(root){root=root?root:"json";var rules={};rules[root]=[{token:["variable","whitespace","ace.punctuation.colon","whitespace","punctuation.start_triple_quote"],regex:'("(?:[^"]*_)?script"|"inline"|"source")(\\s*?)(:)(\\s*?)(""")',next:"script-start",merge:false,push:true},{token:"variable",regex:'["](?:(?:\\\\.)|(?:[^"\\\\]))*?["]\\s*(?=:)'},{token:"punctuation.start_triple_quote",regex:'"""',next:"string_literal",merge:false,push:true},{token:"string",regex:'["](?:(?:\\\\.)|(?:[^"\\\\]))*?["]'},{token:"constant.numeric",regex:"0[xX][0-9a-fA-F]+\\b"},{token:"constant.numeric",regex:"[+-]?\\d+(?:(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)?\\b"},{token:"constant.language.boolean",regex:"(?:true|false)\\b"},{token:"invalid.illegal",regex:"['](?:(?:\\\\.)|(?:[^'\\\\]))*?[']"},{token:"invalid.illegal",regex:"\\/\\/.*$"},{token:"paren.lparen",merge:false,regex:"{",next:root,push:true},{token:"paren.lparen",merge:false,regex:"[[(]"},{token:"paren.rparen",merge:false,regex:"[\\])]"},{token:"paren.rparen",regex:"}",merge:false,next:"pop"},{token:"punctuation.comma",regex:","},{token:"punctuation.colon",regex:":"},{token:"whitespace",regex:"\\s+"},{token:"text",regex:".+?"}];rules.string_literal=[{token:"punctuation.end_triple_quote",regex:'"""',next:"pop"},{token:"multi_string",regex:"."}];return rules};function addToRules(otherRules,embedUnder){otherRules.$rules=_.defaultsDeep(otherRules.$rules,jsonRules(embedUnder));otherRules.embedRules(ScriptHighlightRules,"script-",[{token:"punctuation.end_triple_quote",regex:'"""',next:"pop"}])}},2029:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ScriptHighlightRules=ScriptHighlightRules;var ace=__webpack_require__(201);var oop=ace.acequire("ace/lib/oop");var _ace$acequire=ace.acequire("ace/mode/text_highlight_rules"),TextHighlightRules=_ace$acequire.TextHighlightRules;var painlessKeywords="def|int|long|byte|String|float|double|char|null|if|else|while|do|for|continue|break|new|try|catch|throw|this|instanceof|return|ctx";function ScriptHighlightRules(){this.name="ScriptHighlightRules";this.$rules={start:[{token:"script.comment",regex:"\\/\\/.*$"},{token:"script.string.regexp",regex:"[/](?:(?:\\[(?:\\\\]|[^\\]])+\\])|(?:\\\\/|[^\\]/]))*[/]\\w*\\s*(?=[).,;]|$)"},{token:"script.string",regex:"['](?:(?:\\\\.)|(?:[^'\\\\]))*?[']"},{token:"script.constant.numeric",regex:"0[xX][0-9a-fA-F]+\\b"},{token:"script.constant.numeric",regex:"[+-]?\\d+(?:(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)?\\b"},{token:"script.constant.language.boolean",regex:"(?:true|false)\\b"},{token:"script.keyword",regex:painlessKeywords},{token:"script.text",regex:"[a-zA-Z_$][a-zA-Z0-9_$]*\\b"},{token:"script.keyword.operator",regex:"\\?\\.|\\*\\.|=~|==~|!|%|&|\\*|\\-\\-|\\-|\\+\\+|\\+|~|===|==|=|!=|!==|<=|>=|<<=|>>=|>>>=|<>|<|>|->|!|&&|\\|\\||\\?\\:|\\*=|%=|\\+=|\\-=|&=|\\^=|\\b(?:in|instanceof|new|typeof|void)"},{token:"script.lparen",regex:"[[({]"},{token:"script.rparen",regex:"[\\])}]"},{token:"script.text",regex:"\\s+"}]}}oop.inherits(ScriptHighlightRules,TextHighlightRules)},2030:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=_default;var _lodash=__webpack_require__(1);function _default(editor){var resize=editor.resize;var throttledResize=(0,_lodash.throttle)(function(){resize.call(editor);var userRow=(0,_lodash.get)(throttledResize,"topRow",0);if(userRow!==0){editor.renderer.scrollToLine(userRow,false,false,function(){})}},35);return throttledResize}module.exports=exports.default},2031:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.wrapComponentWithDefaults=wrapComponentWithDefaults;exports.WalkingState=WalkingState;exports.walkTokenPath=walkTokenPath;exports.populateContext=populateContext;var _=__webpack_require__(1);function wrapComponentWithDefaults(component,defaults){var originalGetTerms=component.getTerms;component.getTerms=function(context,editor){var result=originalGetTerms.call(component,context,editor);if(!result){return result}result=_.map(result,function(term){if(!_.isObject(term)){term={name:term}}return _.defaults(term,defaults)},this);return result};return component}var tracer=function tracer(){if(window.engine_trace){console.log.call(console,arguments)}};function passThroughContext(context,extensionList){function PTC(){}PTC.prototype=context;var result=new PTC;if(extensionList){extensionList.unshift(result);_.assign.apply(_,extensionList);extensionList.shift()}return result}function WalkingState(parentName,components,contextExtensionList,depth,priority){this.parentName=parentName;this.components=components;this.contextExtensionList=contextExtensionList;this.depth=depth||0;this.priority=priority}function walkTokenPath(tokenPath,walkingStates,context,editor){if(!tokenPath||tokenPath.length===0){return walkingStates}var token=tokenPath[0];var nextWalkingStates=[];tracer("starting token evaluation ["+token+"]");_.each(walkingStates,function(ws){var contextForState=passThroughContext(context,ws.contextExtensionList);_.each(ws.components,function(component){tracer("evaluating ["+token+"] with ["+component.name+"]",component);var result=component.match(token,contextForState,editor);if(result&&!_.isEmpty(result)){tracer("matched ["+token+"] with:",result);var next;var extensionList;if(result.next&&!Array.isArray(result.next)){next=[result.next]}else{next=result.next}if(result.context_values){extensionList=[];[].push.apply(extensionList,ws.contextExtensionList);extensionList.push(result.context_values)}else{extensionList=ws.contextExtensionList}var priority=ws.priority;if(_.isNumber(result.priority)){if(_.isNumber(priority)){priority=Math.min(priority,result.priority)}else{priority=result.priority}}nextWalkingStates.push(new WalkingState(component.name,next,extensionList,ws.depth+1,priority))}})});if(nextWalkingStates.length===0){return _.map(walkingStates,function(ws){return new WalkingState(ws.name,[],ws.contextExtensionList)})}return walkTokenPath(tokenPath.slice(1),nextWalkingStates,context,editor)}function populateContext(tokenPath,context,editor,includeAutoComplete,components){var walkStates=walkTokenPath(tokenPath,[new WalkingState("ROOT",components,[])],context,editor);if(includeAutoComplete){var autoCompleteSet=[];_.each(walkStates,function(ws){var contextForState=passThroughContext(context,ws.contextExtensionList);_.each(ws.components,function(component){_.each(component.getTerms(contextForState,editor),function(term){if(!_.isObject(term)){term={name:term}}autoCompleteSet.push(term)})})});autoCompleteSet=_.uniq(autoCompleteSet,false);context.autoCompleteSet=autoCompleteSet}if(walkStates.length!==0){var wsToUse;walkStates=_.sortBy(walkStates,function(ws){return _.isNumber(ws.priority)?ws.priority:Number.MAX_VALUE});wsToUse=_.find(walkStates,function(ws){return _.isEmpty(ws.components)});if(!wsToUse&&walkStates.length>1&&!includeAutoComplete){console.info("more then one context active for current path, but autocomplete isn't requested",walkStates)}if(!wsToUse){wsToUse=walkStates[0]}_.each(wsToUse.contextExtensionList,function(extension){_.assign(context,extension)})}}},2032:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.EditorExample=EditorExample;var _react=_interopRequireWildcard(__webpack_require__(0));var _help_example=_interopRequireDefault(__webpack_require__(6051));var _jquery=_interopRequireDefault(__webpack_require__(25));var _editor=_interopRequireDefault(__webpack_require__(1021));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function EditorExample(props){var elemId="help-example-".concat(props.panel);(0,_react.useEffect)(function(){var el=(0,_jquery["default"])("#".concat(elemId));el.text(_help_example["default"].trim());var editor=new _editor["default"](el);editor.setReadOnly(true);editor.$blockScrolling=Infinity;return function(){editor.destroy()}},[]);return _react["default"].createElement("div",{id:elemId,className:"conHelp__example"})}},2033:function(module,exports,__webpack_require__){"use strict";__webpack_require__(6072)},2034:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getSort=getSort;var _lodash=_interopRequireDefault(__webpack_require__(1));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getSort(sort,indexPattern){var defaultSortOrder=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"desc";var sortObj={};var field;var direction;function isSortable(field){return indexPattern.fields.byName[field]&&indexPattern.fields.byName[field].sortable}if(Array.isArray(sort)&&sort.length===2&&isSortable(sort[0])){field=sort[0];direction=sort[1]}else if(indexPattern.timeFieldName&&isSortable(indexPattern.timeFieldName)){field=indexPattern.timeFieldName;direction=defaultSortOrder}if(field){sortObj[field]=direction}else{sortObj._score="desc"}return sortObj}getSort.array=function(sort,indexPattern,defaultSortOrder){return(0,_lodash["default"])(getSort(sort,indexPattern,defaultSortOrder)).pairs().pop()}},2035:function(module,exports,__webpack_require__){"use strict";var _lodash=_interopRequireDefault(__webpack_require__(1));var _jquery=_interopRequireDefault(__webpack_require__(25));var _risonNode=_interopRequireDefault(__webpack_require__(251));__webpack_require__(2036);var _no_white_space=__webpack_require__(2018);var _open=_interopRequireDefault(__webpack_require__(6078));var _details=_interopRequireDefault(__webpack_require__(6079));var _modules=__webpack_require__(12);var _esQuery=__webpack_require__(51);var _render_complete=__webpack_require__(312);var _cell=_interopRequireDefault(__webpack_require__(6080));var _truncate_by_height=_interopRequireDefault(__webpack_require__(6081));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _module=_modules.uiModules.get("app/discover");var MIN_LINE_LENGTH=20;_module.directive("kbnTableRow",function($compile,$httpParamSerializer,kbnUrl,config){var cellTemplate=_lodash["default"].template((0,_no_white_space.noWhiteSpace)(_cell["default"]));var truncateByHeightTemplate=_lodash["default"].template((0,_no_white_space.noWhiteSpace)(_truncate_by_height["default"]));return{restrict:"A",scope:{columns:"=",filter:"=",filters:"=?",indexPattern:"=",row:"=kbnTableRow",onAddColumn:"=?",onRemoveColumn:"=?"},link:function link($scope,$el){$el.after('<tr data-test-subj="docTableDetailsRow" class="kbnDocTableDetails__row">');$el.empty();var $detailsScope;var $toggleScope;$scope.toggleRow=function(){var $detailsTr=$el.next();$scope.open=!$scope.open;$detailsTr.toggle($scope.open);if(!$scope.open){$detailsScope.$destroy();return}else{$detailsScope=$scope.$new()}$detailsTr.html(_details["default"]);$detailsScope.row=$scope.row;$detailsScope.uriEncodedId=encodeURIComponent($detailsScope.row._id);$compile($detailsTr)($detailsScope)};$scope.$watchMulti(["indexPattern.timeFieldName","row.highlight","[]columns"],function(){createSummaryRow($scope.row,$scope.row._id)});$scope.inlineFilter=function inlineFilter($event,type){var column=(0,_jquery["default"])($event.target).data().column;var field=$scope.indexPattern.fields.byName[column];$scope.filter(field,$scope.flattenedRow[column],type)};$scope.getContextAppHref=function(){var path=kbnUrl.eval("#/context/{{ indexPattern }}/{{ anchorType }}/{{ anchorId }}",{anchorId:$scope.row._id,anchorType:$scope.row._type,indexPattern:$scope.indexPattern.id});var hash=$httpParamSerializer({_a:_risonNode["default"].encode({columns:$scope.columns,filters:($scope.filters||[]).map(_esQuery.disableFilter)})});return"".concat(path,"?").concat(hash)};function createSummaryRow(row){var indexPattern=$scope.indexPattern;$scope.flattenedRow=indexPattern.flattenHit(row);var newHtmls=[_open["default"]];var mapping=indexPattern.fields.byName;var hideTimeColumn=config.get("doc_table:hideTimeColumn");if(indexPattern.timeFieldName&&!hideTimeColumn){newHtmls.push(cellTemplate({timefield:true,formatted:_displayField(row,indexPattern.timeFieldName),filterable:mapping[indexPattern.timeFieldName].filterable&&_lodash["default"].isFunction($scope.filter),column:indexPattern.timeFieldName}))}$scope.columns.forEach(function(column){var isFilterable=$scope.flattenedRow[column]!==undefined&&mapping[column]&&mapping[column].filterable&&_lodash["default"].isFunction($scope.filter);newHtmls.push(cellTemplate({timefield:false,sourcefield:column==="_source",formatted:_displayField(row,column,true),filterable:isFilterable,column:column}))});var $cells=$el.children();newHtmls.forEach(function(html,i){var $cell=$cells.eq(i);if($cell.data("discover:html")===html)return;var reuse=_lodash["default"].find($cells.slice(i+1),function(cell){return _jquery["default"].data(cell,"discover:html")===html});var $target=reuse?(0,_jquery["default"])(reuse).detach():(0,_jquery["default"])(html);$target.data("discover:html",html);var $before=$cells.eq(i-1);if($before.length){$before.after($target)}else{$el.append($target)}$cells=$el.children();if(!reuse){$toggleScope=$scope.$new();$compile($target)($toggleScope)}});if($scope.open){$detailsScope.row=row}$cells.filter(":gt("+(newHtmls.length-1)+")").remove();(0,_render_complete.dispatchRenderComplete)($el[0])}function _displayField(row,fieldName,truncate){var indexPattern=$scope.indexPattern;var text=indexPattern.formatField(row,fieldName);if(truncate&&text.length>MIN_LINE_LENGTH){return truncateByHeightTemplate({body:text})}return text}}}})},2036:function(module,exports,__webpack_require__){"use strict";__webpack_require__(6077)},2037:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Pager=void 0;function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function clamp(val,min,max){return Math.min(Math.max(min,val),max)}var Pager=function(){function Pager(totalItems,pageSize,startingPage){_classCallCheck(this,Pager);this.currentPage=startingPage;this.totalItems=totalItems;this.pageSize=pageSize;this.startIndex=0;this.updateMeta()}_createClass(Pager,[{key:"nextPage",value:function nextPage(){this.currentPage+=1;this.updateMeta()}},{key:"previousPage",value:function previousPage(){this.currentPage-=1;this.updateMeta()}},{key:"setTotalItems",value:function setTotalItems(count){this.totalItems=count;this.updateMeta()}},{key:"setPageSize",value:function setPageSize(count){this.pageSize=count;this.updateMeta()}},{key:"updateMeta",value:function updateMeta(){this.totalPages=Math.ceil(this.totalItems/this.pageSize);this.currentPage=clamp(this.currentPage,1,this.totalPages);this.startItem=(this.currentPage-1)*this.pageSize+1;this.startItem=clamp(this.startItem,0,this.totalItems);this.endItem=this.startItem-1+this.pageSize;this.endItem=clamp(this.endItem,0,this.totalItems);this.startIndex=this.startItem-1}},{key:"pageCount",get:function get(){return Math.ceil(this.totalItems/this.pageSize)}},{key:"hasNextPage",get:function get(){return this.currentPage<this.totalPages}},{key:"hasPreviousPage",get:function get(){return this.currentPage>1}}]);return Pager}();exports.Pager=Pager},2038:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.addColumn=addColumn;exports.removeColumn=removeColumn;exports.moveColumn=moveColumn;function addColumn(columns,columnName){if(columns.includes(columnName)){return}columns.push(columnName)}function removeColumn(columns,columnName){if(!columns.includes(columnName)){return}columns.splice(columns.indexOf(columnName),1)}function moveColumn(columns,columnName,newIndex){if(newIndex<0){return}if(newIndex>=columns.length){return}if(!columns.includes(columnName)){return}columns.splice(columns.indexOf(columnName),1);columns.splice(newIndex,0,columnName)}},2042:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getTutorials=getTutorials;exports.getTutorial=getTutorial;var _lodash=_interopRequireDefault(__webpack_require__(1));var _chrome=_interopRequireDefault(__webpack_require__(19));var _i18n=__webpack_require__(5);var _notify=__webpack_require__(24);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}var baseUrl=_chrome["default"].addBasePath("/api/kibana/home/tutorials");var headers=new Headers;headers.append("Accept","application/json");headers.append("Content-Type","application/json");headers.append("kbn-xsrf","kibana");var tutorials=[];var tutorialsLoaded=false;function loadTutorials(){return _loadTutorials.apply(this,arguments)}function _loadTutorials(){_loadTutorials=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var response;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch(baseUrl,{method:"get",credentials:"include",headers:headers});case 3:response=_context.sent;if(!(response.status>=300)){_context.next=6;break}throw new Error(_i18n.i18n.translate("kbn.home.loadTutorials.requestFailedErrorMessage",{defaultMessage:"Request failed with status code: {status}",values:{status:response.status}}));case 6:_context.next=8;return response.json();case 8:tutorials=_context.sent;tutorialsLoaded=true;_context.next=15;break;case 12:_context.prev=12;_context.t0=_context["catch"](0);_notify.toastNotifications.addDanger({title:_i18n.i18n.translate("kbn.home.loadTutorials.unableToLoadErrorMessage",{defaultMessage:"Unable to load tutorials"}),text:_context.t0.message});case 15:case"end":return _context.stop()}}},_callee,null,[[0,12]])}));return _loadTutorials.apply(this,arguments)}function getTutorials(){return _getTutorials.apply(this,arguments)}function _getTutorials(){_getTutorials=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(){return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(tutorialsLoaded){_context2.next=3;break}_context2.next=3;return loadTutorials();case 3:return _context2.abrupt("return",_lodash["default"].cloneDeep(tutorials));case 4:case"end":return _context2.stop()}}},_callee2)}));return _getTutorials.apply(this,arguments)}function getTutorial(_x){return _getTutorial.apply(this,arguments)}function _getTutorial(){_getTutorial=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(id){var tutorial;return regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(tutorialsLoaded){_context3.next=3;break}_context3.next=3;return loadTutorials();case 3:tutorial=tutorials.find(function(tutorial){return tutorial.id===id});if(!tutorial){_context3.next=6;break}return _context3.abrupt("return",_lodash["default"].cloneDeep(tutorial));case 6:case"end":return _context3.stop()}}},_callee3)}));return _getTutorial.apply(this,arguments)}},2043:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ERROR=exports.NOT_CHECKED=exports.NO_DATA=exports.FETCHING=exports.HAS_DATA=void 0;var HAS_DATA="has_data";exports.HAS_DATA=HAS_DATA;var FETCHING="FETCHING";exports.FETCHING=FETCHING;var NO_DATA="NO_DATA";exports.NO_DATA=NO_DATA;var NOT_CHECKED="NOT_CHECKED";exports.NOT_CHECKED=NOT_CHECKED;var ERROR="ERROR";exports.ERROR=ERROR},2044:function(module,exports,__webpack_require__){"use strict";__webpack_require__(6166)},2045:function(module,exports,__webpack_require__){"use strict";var _jquery=_interopRequireDefault(__webpack_require__(25));var _i18n=__webpack_require__(5);var _lodash=__webpack_require__(1);var _shorten_dotted_string=__webpack_require__(452);var _boolean_field_name_icon=_interopRequireDefault(__webpack_require__(6168));var _conflict_field_name_icon=_interopRequireDefault(__webpack_require__(6169));var _date_field_name_icon=_interopRequireDefault(__webpack_require__(6170));var _geo_point_field_name_icon=_interopRequireDefault(__webpack_require__(6171));var _ip_field_name_icon=_interopRequireDefault(__webpack_require__(6172));var _murmur3_field_name_icon=_interopRequireDefault(__webpack_require__(6173));var _number_field_name_icon=_interopRequireDefault(__webpack_require__(6174));var _source_field_name_icon=_interopRequireDefault(__webpack_require__(6175));var _string_field_name_icon=_interopRequireDefault(__webpack_require__(6176));var _unknown_field_name_icon=_interopRequireDefault(__webpack_require__(6177));var _modules=__webpack_require__(12);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _module=_modules.uiModules.get("kibana");var compiledBooleanFieldNameIcon=(0,_lodash.template)(_boolean_field_name_icon["default"]);var compiledConflictFieldNameIcon=(0,_lodash.template)(_conflict_field_name_icon["default"]);var compiledDateFieldNameIcon=(0,_lodash.template)(_date_field_name_icon["default"]);var compiledGeoPointFieldNameIcon=(0,_lodash.template)(_geo_point_field_name_icon["default"]);var compiledIpFieldNameIcon=(0,_lodash.template)(_ip_field_name_icon["default"]);var compiledMurmur3FieldNameIcon=(0,_lodash.template)(_murmur3_field_name_icon["default"]);var compiledNumberFieldNameIcon=(0,_lodash.template)(_number_field_name_icon["default"]);var compiledSourceFieldNameIcon=(0,_lodash.template)(_source_field_name_icon["default"]);var compiledStringFieldNameIcon=(0,_lodash.template)(_string_field_name_icon["default"]);var compiledUnknownFieldNameIcon=(0,_lodash.template)(_unknown_field_name_icon["default"]);_module.directive("fieldName",function($rootScope,config){return{restrict:"AE",scope:{field:"=",fieldName:"=",fieldType:"="},link:function link($scope,$el){var typeToIconMap={boolean:compiledBooleanFieldNameIcon({booleanFieldAriaLabel:_i18n.i18n.translate("common.ui.directives.fieldNameIcons.booleanAriaLabel",{defaultMessage:"Boolean field"})}),conflict:compiledConflictFieldNameIcon({conflictingFieldAriaLabel:_i18n.i18n.translate("common.ui.directives.fieldNameIcons.conflictFieldAriaLabel",{defaultMessage:"Conflicting field"})}),date:compiledDateFieldNameIcon({dateFieldAriaLabel:_i18n.i18n.translate("common.ui.directives.fieldNameIcons.dateFieldAriaLabel",{defaultMessage:"Date field"})}),geo_point:compiledGeoPointFieldNameIcon({geoPointFieldAriaLabel:_i18n.i18n.translate("common.ui.directives.fieldNameIcons.geoPointFieldAriaLabel",{defaultMessage:"Date field"})}),ip:compiledIpFieldNameIcon({ipAddressFieldAriaLabel:_i18n.i18n.translate("common.ui.directives.fieldNameIcons.ipAddressFieldAriaLabel",{defaultMessage:"IP address field"})}),murmur3:compiledMurmur3FieldNameIcon({murmur3FieldAriaLabel:_i18n.i18n.translate("common.ui.directives.fieldNameIcons.murmur3FieldAriaLabel",{defaultMessage:"Murmur3 field"})}),number:compiledNumberFieldNameIcon({numberFieldAriaLabel:_i18n.i18n.translate("common.ui.directives.fieldNameIcons.numberFieldAriaLabel",{defaultMessage:"Number field"})}),source:compiledSourceFieldNameIcon({sourceFieldAriaLabel:_i18n.i18n.translate("common.ui.directives.fieldNameIcons.sourceFieldAriaLabel",{defaultMessage:"Source field"})}),string:compiledStringFieldNameIcon({stringFieldAriaLabel:_i18n.i18n.translate("common.ui.directives.fieldNameIcons.stringFieldAriaLabel",{defaultMessage:"String field"})})};function typeIcon(fieldType){if(typeToIconMap.hasOwnProperty(fieldType)){return typeToIconMap[fieldType]}return compiledUnknownFieldNameIcon({unknownFieldAriaLabel:_i18n.i18n.translate("common.ui.directives.fieldNameIcons.unknownFieldAriaLabel",{defaultMessage:"Unknown field"})})}$rootScope.$watchMulti.call($scope,["field","fieldName","fieldType","field.rowCount"],function(){var type=$scope.field?$scope.field.type:$scope.fieldType;var name=$scope.field?$scope.field.name:$scope.fieldName;var results=$scope.field?!$scope.field.rowCount&&!$scope.field.scripted:false;var scripted=$scope.field?$scope.field.scripted:false;var isShortDots=config.get("shortDots:enable");var displayName=isShortDots?(0,_shorten_dotted_string.shortenDottedString)(name):name;$el.attr("title",name).toggleClass("dscField--noResults",results).toggleClass("scripted",scripted).prepend(typeIcon(type)).append((0,_jquery["default"])("<span>").text(displayName).addClass("dscFieldName"))})}}})},2046:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.addFilter=addFilter;function addFilter(field){var values=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];var operation=arguments.length>2?arguments[2]:undefined;var index=arguments.length>3?arguments[3]:undefined;var state=arguments.length>4?arguments[4]:undefined;var filterGen=arguments.length>5?arguments[5]:undefined;if(!Array.isArray(values)){values=[values]}filterGen.add(field,values,operation,index)}},2047:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _loader=__webpack_require__(1024);Object.keys(_loader).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _loader[key]}})})},2048:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getLandingBreadcrumbs=getLandingBreadcrumbs;exports.getWizardStep1Breadcrumbs=getWizardStep1Breadcrumbs;exports.getWizardStep2Breadcrumbs=getWizardStep2Breadcrumbs;exports.getCreateBreadcrumbs=getCreateBreadcrumbs;exports.getEditBreadcrumbs=getEditBreadcrumbs;var _i18n=__webpack_require__(5);var _visualize_constants=__webpack_require__(421);function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function getLandingBreadcrumbs(){return[{text:_i18n.i18n.translate("kbn.visualize.listing.breadcrumb",{defaultMessage:"Visualize"}),href:"#".concat(_visualize_constants.VisualizeConstants.LANDING_PAGE_PATH)}]}function getWizardStep1Breadcrumbs(){return[].concat(_toConsumableArray(getLandingBreadcrumbs()),[{text:_i18n.i18n.translate("kbn.visualize.wizard.step1Breadcrumb",{defaultMessage:"Create"})}])}function getWizardStep2Breadcrumbs(){return[].concat(_toConsumableArray(getLandingBreadcrumbs()),[{text:_i18n.i18n.translate("kbn.visualize.wizard.step2Breadcrumb",{defaultMessage:"Create"})}])}function getCreateBreadcrumbs(){return[].concat(_toConsumableArray(getLandingBreadcrumbs()),[{text:_i18n.i18n.translate("kbn.visualize.editor.createBreadcrumb",{defaultMessage:"Create"})}])}function getEditBreadcrumbs($route){return[].concat(_toConsumableArray(getLandingBreadcrumbs()),[{text:$route.current.locals.savedVis.title}])}},2049:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"TableListView",{enumerable:true,get:function get(){return _table_list_view.TableListView}});var _table_list_view=__webpack_require__(6209)},2050:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.store=void 0;var _redux=__webpack_require__(1035);var _reduxThunk=_interopRequireDefault(__webpack_require__(6220));var _dashboard_view_mode=__webpack_require__(139);var _reducers=__webpack_require__(6221);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var enhancers=[(0,_redux.applyMiddleware)(_reduxThunk["default"])];var store=(0,_redux.createStore)(_reducers.reducers,{dashboard:{embeddables:{},metadata:{title:"New Dashboard"},panels:{},view:{filters:[],hidePanelTitles:false,isFullScreenMode:false,query:{language:"lucene",query:""},timeRange:{from:"now-15m",to:"now"},useMargins:true,viewMode:_dashboard_view_mode.DashboardViewMode.VIEW}}},_redux.compose.apply(void 0,enhancers));exports.store=store},2051:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.setPanels=exports.updatePanels=exports.setPanelTitle=exports.resetPanelTitle=exports.updatePanel=exports.deletePanel=exports.PanelActionTypeKeys=void 0;var _reduxActions=__webpack_require__(672);var PanelActionTypeKeys;exports.PanelActionTypeKeys=PanelActionTypeKeys;(function(PanelActionTypeKeys){PanelActionTypeKeys["DELETE_PANEL"]="DELETE_PANEL";PanelActionTypeKeys["UPDATE_PANEL"]="UPDATE_PANEL";PanelActionTypeKeys["RESET_PANEL_TITLE"]="RESET_PANEL_TITLE";PanelActionTypeKeys["SET_PANEL_TITLE"]="SET_PANEL_TITLE";PanelActionTypeKeys["UPDATE_PANELS"]="UPDATE_PANELS";PanelActionTypeKeys["SET_PANELS"]="SET_PANELS"})(PanelActionTypeKeys||(exports.PanelActionTypeKeys=PanelActionTypeKeys={}));var deletePanel=(0,_reduxActions.createAction)(PanelActionTypeKeys.DELETE_PANEL);exports.deletePanel=deletePanel;var updatePanel=(0,_reduxActions.createAction)(PanelActionTypeKeys.UPDATE_PANEL);exports.updatePanel=updatePanel;var resetPanelTitle=(0,_reduxActions.createAction)(PanelActionTypeKeys.RESET_PANEL_TITLE);exports.resetPanelTitle=resetPanelTitle;var setPanelTitle=(0,_reduxActions.createAction)(PanelActionTypeKeys.SET_PANEL_TITLE);exports.setPanelTitle=setPanelTitle;var updatePanels=(0,_reduxActions.createAction)(PanelActionTypeKeys.UPDATE_PANELS);exports.updatePanels=updatePanels;var setPanels=(0,_reduxActions.createAction)(PanelActionTypeKeys.SET_PANELS);exports.setPanels=setPanels},2052:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _exportNames={CoreKibanaState:true};Object.defineProperty(exports,"CoreKibanaState",{enumerable:true,get:function get(){return _types.CoreKibanaState}});var _dashboard_selectors=__webpack_require__(6226);Object.keys(_dashboard_selectors).forEach(function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _dashboard_selectors[key]}})});var _types=__webpack_require__(6229)},2053:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"DashboardPanel",{enumerable:true,get:function get(){return _dashboard_panel_container.DashboardPanelContainer}});Object.defineProperty(exports,"createPanelState",{enumerable:true,get:function get(){return _panel_state.createPanelState}});var _dashboard_panel_container=__webpack_require__(6239);var _panel_state=__webpack_require__(6254)},2054:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.panelActionsStore=void 0;function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var PanelActionsStore=function(){function PanelActionsStore(){_classCallCheck(this,PanelActionsStore);_defineProperty(this,"actions",[])}_createClass(PanelActionsStore,[{key:"initializeFromRegistry",value:function initializeFromRegistry(panelActionsRegistry){var _this=this;panelActionsRegistry.forEach(function(panelAction){if(!_this.actions.includes(panelAction)){_this.actions.push(panelAction)}})}}]);return PanelActionsStore}();var panelActionsStore=new PanelActionsStore;exports.panelActionsStore=panelActionsStore},2055:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"saveDashboard",{enumerable:true,get:function get(){return _save_dashboard.saveDashboard}});Object.defineProperty(exports,"getAppStateDefaults",{enumerable:true,get:function get(){return _get_app_state_defaults.getAppStateDefaults}});Object.defineProperty(exports,"migrateAppState",{enumerable:true,get:function get(){return _migrate_app_state.migrateAppState}});var _save_dashboard=__webpack_require__(6265);var _get_app_state_defaults=__webpack_require__(6267);var _migrate_app_state=__webpack_require__(6268)},2056:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FilterUtils=void 0;var _lodash=_interopRequireDefault(__webpack_require__(1));var _moment=_interopRequireDefault(__webpack_require__(23));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var FilterUtils=function(){function FilterUtils(){_classCallCheck(this,FilterUtils)}_createClass(FilterUtils,null,[{key:"convertTimeToUTCString",value:function convertTimeToUTCString(time){if((0,_moment["default"])(time).isValid()){return(0,_moment["default"])(time).utc().format("YYYY-MM-DDTHH:mm:ss.SSS[Z]")}else{return time}}},{key:"areTimesEqual",value:function areTimesEqual(timeA,timeB){return this.convertTimeToUTCString(timeA)===this.convertTimeToUTCString(timeB)}},{key:"cleanFiltersForComparison",value:function cleanFiltersForComparison(filters){return _lodash["default"].map(filters,function(filter){return _lodash["default"].omit(filter,["$$hashKey","$state"])})}}]);return FilterUtils}();exports.FilterUtils=FilterUtils},2057:function(module,exports,__webpack_require__){module.exports=__webpack_require__(18)(2876)},2058:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TopNavIds=void 0;var TopNavIds={ADD:"add",SHARE:"share",OPTIONS:"options",SAVE:"save",EXIT_EDIT_MODE:"exitEditMode",ENTER_EDIT_MODE:"enterEditMode",CLONE:"clone",FULL_SCREEN:"fullScreenMode"};exports.TopNavIds=TopNavIds},2059:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.registerDefaultComponents=registerDefaultComponents;exports.PAGE_FOOTER_COMPONENT=exports.PAGE_SUBTITLE_COMPONENT=exports.PAGE_TITLE_COMPONENT=void 0;var _component_registry=__webpack_require__(1036);var _page_title=__webpack_require__(6280);var _page_subtitle=__webpack_require__(6282);var _page_footer=__webpack_require__(6284);var PAGE_TITLE_COMPONENT="advanced_settings_page_title";exports.PAGE_TITLE_COMPONENT=PAGE_TITLE_COMPONENT;var PAGE_SUBTITLE_COMPONENT="advanced_settings_page_subtitle";exports.PAGE_SUBTITLE_COMPONENT=PAGE_SUBTITLE_COMPONENT;var PAGE_FOOTER_COMPONENT="advanced_settings_page_footer";exports.PAGE_FOOTER_COMPONENT=PAGE_FOOTER_COMPONENT;function registerDefaultComponents(){(0,_component_registry.tryRegisterSettingsComponent)(PAGE_TITLE_COMPONENT,_page_title.PageTitle);(0,_component_registry.tryRegisterSettingsComponent)(PAGE_SUBTITLE_COMPONENT,_page_subtitle.PageSubtitle);(0,_component_registry.tryRegisterSettingsComponent)(PAGE_FOOTER_COMPONENT,_page_footer.PageFooter)}},2060:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Field=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(17));__webpack_require__(6286);__webpack_require__(1994);var _notify=__webpack_require__(24);var _eui=__webpack_require__(2);var _lib=__webpack_require__(673);var _react2=__webpack_require__(10);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var FieldUI=function(_PureComponent){_inherits(FieldUI,_PureComponent);function FieldUI(props){var _this;_classCallCheck(this,FieldUI);_this=_possibleConstructorReturn(this,_getPrototypeOf(FieldUI).call(this,props));_defineProperty(_assertThisInitialized(_this),"onCodeEditorChange",function(value){var type=_this.props.setting.type;var isJsonArray=_this.state.isJsonArray;var newUnsavedValue=undefined;var isInvalid=false;var error=null;switch(type){case"json":newUnsavedValue=value.trim()||(isJsonArray?"[]":"{}");try{JSON.parse(newUnsavedValue)}catch(e){isInvalid=true;error=_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.settings.field.codeEditorSyntaxErrorMessage",defaultMessage:"Invalid JSON syntax"})}break;default:newUnsavedValue=value}_this.setState({error:error,isInvalid:isInvalid,unsavedValue:newUnsavedValue})});_defineProperty(_assertThisInitialized(_this),"onFieldChange",function(e){var value=e.target.value;var type=_this.props.setting.type;var unsavedValue=_this.state.unsavedValue;var newUnsavedValue=undefined;switch(type){case"boolean":newUnsavedValue=!unsavedValue;break;case"number":newUnsavedValue=Number(value);break;default:newUnsavedValue=value}_this.setState({unsavedValue:newUnsavedValue})});_defineProperty(_assertThisInitialized(_this),"onFieldKeyDown",function(_ref){var keyCode=_ref.keyCode;if(keyCode===_eui.keyCodes.ENTER){_this.saveEdit()}if(keyCode===_eui.keyCodes.ESCAPE){_this.cancelEdit()}});_defineProperty(_assertThisInitialized(_this),"onFieldEscape",function(_ref2){var keyCode=_ref2.keyCode;if(keyCode===_eui.keyCodes.ESCAPE){_this.cancelEdit()}});_defineProperty(_assertThisInitialized(_this),"onImageChange",function(){var _ref3=_asyncToGenerator(regeneratorRuntime.mark(function _callee(files){var file,maxSize,base64Image,isInvalid;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(files.length){_context.next=4;break}_this.clearError();_this.setState({unsavedValue:null});return _context.abrupt("return");case 4:file=files[0];maxSize=_this.props.setting.options.maxSize;_context.prev=6;_context.next=9;return _this.getImageAsBase64(file);case 9:base64Image=_context.sent;isInvalid=!!(maxSize&&maxSize.length&&base64Image.length>maxSize.length);_this.setState({isInvalid:isInvalid,error:isInvalid?_this.props.intl.formattedMessage({id:"kbn.management.settings.field.imageTooLargeErrorMessage",defaultMessage:"Image is too large, maximum size is {maxSizeDescription}"},{maxSizeDescription:maxSize.description}):null,changeImage:true,unsavedValue:base64Image});_context.next=18;break;case 14:_context.prev=14;_context.t0=_context["catch"](6);_notify.toastNotifications.addDanger(_this.props.intl.formatMessage({id:"kbn.management.settings.field.imageChangeErrorMessage",defaultMessage:"Image could not be saved"}));_this.cancelChangeImage();case 18:case"end":return _context.stop()}}},_callee,null,[[6,14]])}));return function(_x){return _ref3.apply(this,arguments)}}());_defineProperty(_assertThisInitialized(_this),"changeImage",function(){_this.setState({changeImage:true})});_defineProperty(_assertThisInitialized(_this),"cancelChangeImage",function(){var savedValue=_this.state.savedValue;if(_this.changeImageForm){_this.changeImageForm.fileInput.value=null;_this.changeImageForm.handleChange()}_this.setState({changeImage:false,unsavedValue:savedValue})});_defineProperty(_assertThisInitialized(_this),"cancelEdit",function(){var savedValue=_this.state.savedValue;_this.clearError();_this.setState({unsavedValue:savedValue})});_defineProperty(_assertThisInitialized(_this),"showPageReloadToast",function(){if(_this.props.setting.requiresPageReload){_notify.toastNotifications.add({title:_this.props.intl.formatMessage({id:"kbn.management.settings.field.requiresPageReloadToastDescription",defaultMessage:'Please reload the page for the "{settingName}" setting to take effect.'},{settingName:_this.props.setting.displayName||_this.props.setting.name}),text:_react["default"].createElement(_react["default"].Fragment,null,_react["default"].createElement(_eui.EuiFlexGroup,{justifyContent:"flexEnd",gutterSize:"s"},_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiButton,{size:"s",onClick:function onClick(){return window.location.reload()}},_this.props.intl.formatMessage({id:"kbn.management.settings.field.requiresPageReloadToastButtonLabel",defaultMessage:"Reload page"}))))),color:"success"})}});_defineProperty(_assertThisInitialized(_this),"saveEdit",_asyncToGenerator(regeneratorRuntime.mark(function _callee2(){var _this$props$setting,name,defVal,type,_this$state,changeImage,savedValue,unsavedValue,isJsonArray,valueToSave,isSameValue;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_this$props$setting=_this.props.setting,name=_this$props$setting.name,defVal=_this$props$setting.defVal,type=_this$props$setting.type;_this$state=_this.state,changeImage=_this$state.changeImage,savedValue=_this$state.savedValue,unsavedValue=_this$state.unsavedValue,isJsonArray=_this$state.isJsonArray;if(!(savedValue===unsavedValue)){_context2.next=4;break}return _context2.abrupt("return");case 4:valueToSave=unsavedValue;isSameValue=false;_context2.t0=type;_context2.next=_context2.t0==="array"?9:_context2.t0==="json"?12:14;break;case 9:valueToSave=valueToSave.split(",").map(function(val){return val.trim()});isSameValue=valueToSave.join(",")===defVal.join(",");return _context2.abrupt("break",15);case 12:valueToSave=valueToSave.trim();valueToSave=valueToSave||(isJsonArray?"[]":"{}");case 14:isSameValue=valueToSave===defVal;case 15:_this.setLoading(true);_context2.prev=16;if(!isSameValue){_context2.next=22;break}_context2.next=20;return _this.props.clear(name);case 20:_context2.next=24;break;case 22:_context2.next=24;return _this.props.save(name,valueToSave);case 24:_this.showPageReloadToast();if(changeImage){_this.cancelChangeImage()}_context2.next=31;break;case 28:_context2.prev=28;_context2.t1=_context2["catch"](16);_notify.toastNotifications.addDanger(_this.props.intl.formatMessage({id:"kbn.management.settings.field.saveFieldErrorMessage",defaultMessage:"Unable to save {name}"},{name:name}));case 31:_this.setLoading(false);case 32:case"end":return _context2.stop()}}},_callee2,null,[[16,28]])})));_defineProperty(_assertThisInitialized(_this),"resetField",_asyncToGenerator(regeneratorRuntime.mark(function _callee3(){var name;return regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:name=_this.props.setting.name;_this.setLoading(true);_context3.prev=2;_context3.next=5;return _this.props.clear(name);case 5:_this.showPageReloadToast();_this.cancelChangeImage();_this.clearError();_context3.next=13;break;case 10:_context3.prev=10;_context3.t0=_context3["catch"](2);_notify.toastNotifications.addDanger(_this.props.intl.formatMessage({id:"kbn.management.settings.field.resetFieldErrorMessage",defaultMessage:"Unable to reset {name}"},{name:name}));case 13:_this.setLoading(false);case 14:case"end":return _context3.stop()}}},_callee3,null,[[2,10]])})));var _this$props$setting2=_this.props.setting,_type=_this$props$setting2.type,_value=_this$props$setting2.value,_defVal=_this$props$setting2.defVal;var editableValue=_this.getEditableValue(_type,_value,_defVal);_this.state={isInvalid:false,error:null,loading:false,changeImage:false,savedValue:editableValue,unsavedValue:editableValue,isJsonArray:_type==="json"?Array.isArray(JSON.parse(_defVal||"{}")):false};_this.changeImageForm=null;return _this}_createClass(FieldUI,[{key:"componentWillReceiveProps",value:function componentWillReceiveProps(nextProps){var unsavedValue=this.state.unsavedValue;var _nextProps$setting=nextProps.setting,type=_nextProps$setting.type,value=_nextProps$setting.value,defVal=_nextProps$setting.defVal;var editableValue=this.getEditableValue(type,value,defVal);this.setState({savedValue:editableValue,unsavedValue:value===null||value===undefined?editableValue:unsavedValue})}},{key:"getEditableValue",value:function getEditableValue(type,value,defVal){var val=value===null||value===undefined?defVal:value;switch(type){case"array":return val.join(", ");case"boolean":return!!val;case"number":return Number(val);case"image":return val;default:return val||""}}},{key:"getDisplayedDefaultValue",value:function getDisplayedDefaultValue(type,defVal){var optionLabels=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};if(defVal===undefined||defVal===null||defVal===""){return"null"}switch(type){case"array":return defVal.join(", ");case"select":return optionLabels.hasOwnProperty(defVal)?optionLabels[defVal]:String(defVal);default:return String(defVal)}}},{key:"setLoading",value:function setLoading(loading){this.setState({loading:loading})}},{key:"clearError",value:function clearError(){this.setState({isInvalid:false,error:null})}},{key:"getImageAsBase64",value:function getImageAsBase64(file){if(!file instanceof File){return null}var reader=new FileReader;reader.readAsDataURL(file);return new Promise(function(resolve,reject){reader.onload=function(){resolve(reader.result)};reader.onerror=function(err){reject(err)}})}},{key:"renderField",value:function renderField(setting){var _this2=this;var enableSaving=this.props.enableSaving;var _this$state2=this.state,loading=_this$state2.loading,changeImage=_this$state2.changeImage,unsavedValue=_this$state2.unsavedValue;var name=setting.name,value=setting.value,type=setting.type,options=setting.options,_setting$optionLabels=setting.optionLabels,optionLabels=_setting$optionLabels===void 0?{}:_setting$optionLabels,isOverridden=setting.isOverridden,ariaName=setting.ariaName;switch(type){case"boolean":return _react["default"].createElement(_eui.EuiSwitch,{label:!!unsavedValue?_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.settings.field.onLabel",defaultMessage:"On"}):_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.settings.field.offLabel",defaultMessage:"Off"}),checked:!!unsavedValue,onChange:this.onFieldChange,disabled:loading||isOverridden||!enableSaving,onKeyDown:this.onFieldKeyDown,"data-test-subj":"advancedSetting-editField-".concat(name),"aria-label":ariaName});case"markdown":case"json":return _react["default"].createElement("div",{"data-test-subj":"advancedSetting-editField-".concat(name)},_react["default"].createElement(_eui.EuiCodeEditor,{"aria-label":ariaName,mode:type,theme:"textmate",value:unsavedValue,onChange:this.onCodeEditorChange,width:"100%",height:"auto",minLines:6,maxLines:30,isReadOnly:isOverridden||!enableSaving,setOptions:{showLineNumbers:false,tabSize:2},editorProps:{$blockScrolling:Infinity},showGutter:false}));case"image":if(!(0,_lib.isDefaultValue)(setting)&&!changeImage){return _react["default"].createElement(_eui.EuiImage,{"aria-label":ariaName,allowFullScreen:true,url:value,alt:name})}else{return _react["default"].createElement(_eui.EuiFilePicker,{disabled:loading||isOverridden||!enableSaving,onChange:this.onImageChange,accept:".jpg,.jpeg,.png",ref:function ref(input){_this2.changeImageForm=input},onKeyDown:this.onFieldEscape,"data-test-subj":"advancedSetting-editField-".concat(name)})}case"select":return _react["default"].createElement(_eui.EuiSelect,{"aria-label":ariaName,value:unsavedValue,options:options.map(function(option){return{text:optionLabels.hasOwnProperty(option)?optionLabels[option]:option,value:option}}),onChange:this.onFieldChange,isLoading:loading,disabled:loading||isOverridden||!enableSaving,onKeyDown:this.onFieldKeyDown,"data-test-subj":"advancedSetting-editField-".concat(name)});case"number":return _react["default"].createElement(_eui.EuiFieldNumber,{"aria-label":ariaName,value:unsavedValue,onChange:this.onFieldChange,isLoading:loading,disabled:loading||isOverridden||!enableSaving,onKeyDown:this.onFieldKeyDown,"data-test-subj":"advancedSetting-editField-".concat(name)});default:return _react["default"].createElement(_eui.EuiFieldText,{"aria-label":ariaName,value:unsavedValue,onChange:this.onFieldChange,isLoading:loading,disabled:loading||isOverridden||!enableSaving,onKeyDown:this.onFieldKeyDown,"data-test-subj":"advancedSetting-editField-".concat(name)})}}},{key:"renderLabel",value:function renderLabel(setting){return setting.name}},{key:"renderHelpText",value:function renderHelpText(setting){if(setting.isOverridden){return _react["default"].createElement(_eui.EuiText,{size:"xs"},_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.settings.field.helpText",defaultMessage:"This setting is overridden by the Kibana server and can not be changed."}))}var canUpdateSetting=this.props.enableSaving;var defaultLink=this.renderResetToDefaultLink(setting);var imageLink=this.renderChangeImageLink(setting);if(canUpdateSetting&&(defaultLink||imageLink)){return _react["default"].createElement("span",null,defaultLink,imageLink)}return null}},{key:"renderTitle",value:function renderTitle(setting){return _react["default"].createElement("h3",null,setting.displayName||setting.name,setting.isCustom?_react["default"].createElement(_eui.EuiIconTip,{type:"asterisk",color:"primary","aria-label":this.props.intl.formatMessage({id:"kbn.management.settings.field.customSettingAriaLabel",defaultMessage:"Custom setting"}),content:_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.settings.field.customSettingTooltip",defaultMessage:"Custom setting"})}):"")}},{key:"renderDescription",value:function renderDescription(setting){var description;if(_react["default"].isValidElement(setting.description)){description=setting.description}else{description=_react["default"].createElement("div",{dangerouslySetInnerHTML:{__html:setting.description}})}return _react["default"].createElement(_react.Fragment,null,description,this.renderDefaultValue(setting))}},{key:"renderDefaultValue",value:function renderDefaultValue(setting){var type=setting.type,defVal=setting.defVal,optionLabels=setting.optionLabels;if((0,_lib.isDefaultValue)(setting)){return}return _react["default"].createElement(_react.Fragment,null,_react["default"].createElement(_eui.EuiSpacer,{size:"s"}),_react["default"].createElement(_eui.EuiText,{size:"xs"},type==="json"?_react["default"].createElement(_react.Fragment,null,_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.settings.field.defaultValueTypeJsonText",defaultMessage:"Default: {value}",values:{value:_react["default"].createElement(_eui.EuiCodeBlock,{language:"json",paddingSize:"s",overflowHeight:defVal.length>=500?300:null},this.getDisplayedDefaultValue(type,defVal))}})):_react["default"].createElement(_react.Fragment,null,_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.settings.field.defaultValueText",defaultMessage:"Default: {value}",values:{value:_react["default"].createElement(_eui.EuiCode,null,this.getDisplayedDefaultValue(type,defVal,optionLabels))}}))))}},{key:"renderResetToDefaultLink",value:function renderResetToDefaultLink(setting){var ariaName=setting.ariaName,name=setting.name;if((0,_lib.isDefaultValue)(setting)){return}return _react["default"].createElement("span",null,_react["default"].createElement(_eui.EuiLink,{"aria-label":this.props.intl.formatMessage({id:"kbn.management.settings.field.resetToDefaultLinkAriaLabel",defaultMessage:"Reset {ariaName} to default"},{ariaName:ariaName}),onClick:this.resetField,"data-test-subj":"advancedSetting-resetField-".concat(name)},_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.settings.field.resetToDefaultLinkText",defaultMessage:"Reset to default"})),"")}},{key:"renderChangeImageLink",value:function renderChangeImageLink(setting){var changeImage=this.state.changeImage;var type=setting.type,value=setting.value,ariaName=setting.ariaName,name=setting.name;if(type!=="image"||!value||changeImage){return}return _react["default"].createElement("span",null,_react["default"].createElement(_eui.EuiLink,{"aria-label":this.props.intl.formatMessage({id:"kbn.management.settings.field.changeImageLinkAriaLabel",defaultMessage:"Change {ariaName}"},{ariaName:ariaName}),onClick:this.changeImage,"data-test-subj":"advancedSetting-changeImage-".concat(name)},_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.settings.field.changeImageLinkText",defaultMessage:"Change image"})))}},{key:"renderActions",value:function renderActions(setting){var _this3=this;var ariaName=setting.ariaName,name=setting.name;var _this$state3=this.state,loading=_this$state3.loading,isInvalid=_this$state3.isInvalid,changeImage=_this$state3.changeImage,savedValue=_this$state3.savedValue,unsavedValue=_this$state3.unsavedValue;var isDisabled=loading||setting.isOverridden;var intl=this.props.intl;if(savedValue===unsavedValue&&!changeImage){return}return _react["default"].createElement(_eui.EuiFormRow,{className:"mgtAdvancedSettings__fieldActions",hasEmptyLabelSpace:true},_react["default"].createElement(_eui.EuiFlexGroup,null,_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiButton,{fill:true,"aria-label":intl.formatMessage({id:"kbn.management.settings.field.saveButtonAriaLabel",defaultMessage:"Save {ariaName}"},{ariaName:ariaName}),onClick:this.saveEdit,disabled:isDisabled||isInvalid,"data-test-subj":"advancedSetting-saveEditField-".concat(name)},_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.settings.field.saveButtonLabel",defaultMessage:"Save"}))),_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiButtonEmpty,{"aria-label":intl.formatMessage({id:"kbn.management.settings.field.cancelEditingButtonAriaLabel",defaultMessage:"Cancel editing {ariaName}"},{ariaName:ariaName}),onClick:function onClick(){return changeImage?_this3.cancelChangeImage():_this3.cancelEdit()},disabled:isDisabled,"data-test-subj":"advancedSetting-cancelEditField-".concat(name)},_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.settings.field.cancelEditingButtonLabel",defaultMessage:"Cancel"})))))}},{key:"render",value:function render(){var setting=this.props.setting;var _this$state4=this.state,error=_this$state4.error,isInvalid=_this$state4.isInvalid;return _react["default"].createElement(_eui.EuiFlexGroup,{className:"mgtAdvancedSettings__field"},_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiDescribedFormGroup,{className:"mgtAdvancedSettings__fieldWrapper",title:this.renderTitle(setting),description:this.renderDescription(setting),idAria:"".concat(setting.name,"-aria")},_react["default"].createElement(_eui.EuiFormRow,{isInvalid:isInvalid,error:error,label:this.renderLabel(setting),helpText:this.renderHelpText(setting),describedByIds:["".concat(setting.name,"-aria")],className:"mgtAdvancedSettings__fieldRow"},this.renderField(setting)))),_react["default"].createElement(_eui.EuiFlexItem,{grow:false},this.renderActions(setting)))}}]);return FieldUI}(_react.PureComponent);_defineProperty(FieldUI,"propTypes",{setting:_propTypes["default"].object.isRequired,save:_propTypes["default"].func.isRequired,clear:_propTypes["default"].func.isRequired,enableSaving:_propTypes["default"].bool.isRequired});var Field=(0,_react2.injectI18n)(FieldUI);exports.Field=Field},2061:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getAriaName=getAriaName;var _lodash=__webpack_require__(1);function getAriaName(name){return(0,_lodash.words)(name).map(function(word){return word.toLowerCase()}).join(" ")}},2062:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DEFAULT_CATEGORY=void 0;var DEFAULT_CATEGORY="general";exports.DEFAULT_CATEGORY=DEFAULT_CATEGORY},2063:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.canViewInApp=canViewInApp;function canViewInApp(uiCapabilities,type){switch(type){case"search":case"searches":return uiCapabilities.discover.show;case"visualization":case"visualizations":return uiCapabilities.visualize.show;case"index-pattern":case"index-patterns":case"indexPatterns":return uiCapabilities.management.kibana.index_patterns;case"dashboard":case"dashboards":return uiCapabilities.dashboard.show;default:return uiCapabilities[type].show}}},2064:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getIndexBreadcrumbs=getIndexBreadcrumbs;exports.getViewBreadcrumbs=getViewBreadcrumbs;var _management=__webpack_require__(349);var _i18n=__webpack_require__(5);var _saved_object_registry=__webpack_require__(347);function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function getIndexBreadcrumbs(){return[_management.MANAGEMENT_BREADCRUMB,{text:_i18n.i18n.translate("kbn.management.savedObjects.indexBreadcrumb",{defaultMessage:"Saved objects"}),href:"#/management/kibana/objects"}]}function getViewBreadcrumbs($routeParams,$injector){var serviceObj=_saved_object_registry.savedObjectManagementRegistry.get($routeParams.service);var service=$injector.get(serviceObj.service);return[].concat(_toConsumableArray(getIndexBreadcrumbs()),[{text:_i18n.i18n.translate("kbn.management.savedObjects.editBreadcrumb",{defaultMessage:"Edit {savedObjectType}",values:{savedObjectType:service.type}})}])}},2065:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ObjectsTable=exports.POSSIBLE_TYPES=void 0;var _chrome=_interopRequireDefault(__webpack_require__(19));var _filesaver=__webpack_require__(1012);var _react=_interopRequireWildcard(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(17));var _lodash=__webpack_require__(1);var _header=__webpack_require__(6316);var _flyout=__webpack_require__(6318);var _relationships=__webpack_require__(6333);var _table=__webpack_require__(6335);var _notify=__webpack_require__(24);var _eui=__webpack_require__(2);var _lib=__webpack_require__(674);var _react2=__webpack_require__(10);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var POSSIBLE_TYPES=_chrome["default"].getInjected("importAndExportableTypes");exports.POSSIBLE_TYPES=POSSIBLE_TYPES;var ObjectsTableUI=function(_Component){_inherits(ObjectsTableUI,_Component);function ObjectsTableUI(props){var _this;_classCallCheck(this,ObjectsTableUI);_this=_possibleConstructorReturn(this,_getPrototypeOf(ObjectsTableUI).call(this,props));_defineProperty(_assertThisInitialized(_this),"fetchCounts",_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var _parseQuery,queryText,visibleTypes,filteredTypes,filteredSavedObjectCounts,exportAllOptions,exportAllSelectedOptions,savedObjectCounts;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_parseQuery=(0,_lib.parseQuery)(_this.state.activeQuery),queryText=_parseQuery.queryText,visibleTypes=_parseQuery.visibleTypes;filteredTypes=_this.savedObjectTypes.filter(function(type){return!visibleTypes||visibleTypes.includes(type)});_context.next=4;return(0,_lib.getSavedObjectCounts)(_this.props.$http,filteredTypes,queryText);case 4:filteredSavedObjectCounts=_context.sent;exportAllOptions=[];exportAllSelectedOptions={};Object.keys(filteredSavedObjectCounts).forEach(function(id){exportAllOptions.push({id:id,label:"".concat(id," (").concat(filteredSavedObjectCounts[id]||0,")")});exportAllSelectedOptions[id]=true});_context.next=10;return(0,_lib.getSavedObjectCounts)(_this.props.$http,_this.savedObjectTypes,queryText);case 10:savedObjectCounts=_context.sent;_this.setState(function(state){return _objectSpread({},state,{savedObjectCounts:savedObjectCounts,exportAllOptions:exportAllOptions,exportAllSelectedOptions:exportAllSelectedOptions})});case 12:case"end":return _context.stop()}}},_callee)})));_defineProperty(_assertThisInitialized(_this),"fetchSavedObjects",function(){_this.setState({isSearching:true},_this.debouncedFetch)});_defineProperty(_assertThisInitialized(_this),"debouncedFetch",(0,_lodash.debounce)(_asyncToGenerator(regeneratorRuntime.mark(function _callee2(){var intl,_this$state,query,page,perPage,_parseQuery2,queryText,visibleTypes,findOptions,resp;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:intl=_this.props.intl;_this$state=_this.state,query=_this$state.activeQuery,page=_this$state.page,perPage=_this$state.perPage;_parseQuery2=(0,_lib.parseQuery)(query),queryText=_parseQuery2.queryText,visibleTypes=_parseQuery2.visibleTypes;findOptions={search:queryText?"".concat(queryText,"*"):undefined,perPage:perPage,page:page+1,fields:["id"],type:_this.savedObjectTypes.filter(function(type){return!visibleTypes||visibleTypes.includes(type)})};if(findOptions.type.length>1){findOptions.sortField="type"}_context2.prev=5;_context2.next=8;return(0,_lib.findObjects)(findOptions);case 8:resp=_context2.sent;_context2.next=16;break;case 11:_context2.prev=11;_context2.t0=_context2["catch"](5);if(_this._isMounted){_this.setState({isSearching:false})}_notify.toastNotifications.addDanger({title:intl.formatMessage({id:"kbn.management.objects.objectsTable.unableFindSavedObjectsNotificationMessage",defaultMessage:"Unable find saved objects"}),text:"".concat(_context2.t0)});return _context2.abrupt("return");case 16:if(_this._isMounted){_context2.next=18;break}return _context2.abrupt("return");case 18:_this.setState(function(_ref3){var activeQuery=_ref3.activeQuery;if(activeQuery.text!==query.text){return{}}return{savedObjects:resp.savedObjects,filteredItemCount:resp.total,isSearching:false}});case 19:case"end":return _context2.stop()}}},_callee2,null,[[5,11]])})),300));_defineProperty(_assertThisInitialized(_this),"refreshData",_asyncToGenerator(regeneratorRuntime.mark(function _callee3(){return regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return Promise.all([_this.fetchSavedObjects(),_this.fetchCounts()]);case 2:case"end":return _context3.stop()}}},_callee3)})));_defineProperty(_assertThisInitialized(_this),"onSelectionChanged",function(selection){_this.setState({selectedSavedObjects:selection})});_defineProperty(_assertThisInitialized(_this),"onQueryChange",function(_ref5){var query=_ref5.query;_this.setState({activeQuery:query,page:0,selectedSavedObjects:[]},function(){_this.fetchSavedObjects();_this.fetchCounts()})});_defineProperty(_assertThisInitialized(_this),"onTableChange",function(){var _ref6=_asyncToGenerator(regeneratorRuntime.mark(function _callee4(table){var _ref7,page,perPage;return regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_ref7=table.page||{},page=_ref7.index,perPage=_ref7.size;_this.setState({page:page,perPage:perPage,selectedSavedObjects:[]},_this.fetchSavedObjects);case 2:case"end":return _context4.stop()}}},_callee4)}));return function(_x){return _ref6.apply(this,arguments)}}());_defineProperty(_assertThisInitialized(_this),"onShowRelationships",function(object){_this.setState({isShowingRelationships:true,relationshipObject:object})});_defineProperty(_assertThisInitialized(_this),"onHideRelationships",function(){_this.setState({isShowingRelationships:false,relationshipObject:undefined})});_defineProperty(_assertThisInitialized(_this),"onExport",function(){var _ref8=_asyncToGenerator(regeneratorRuntime.mark(function _callee5(includeReferencesDeep){var intl,selectedSavedObjects,objectsToExport,blob;return regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:intl=_this.props.intl;selectedSavedObjects=_this.state.selectedSavedObjects;objectsToExport=selectedSavedObjects.map(function(obj){return{id:obj.id,type:obj.type}});_context5.prev=3;_context5.next=6;return(0,_lib.fetchExportObjects)(objectsToExport,includeReferencesDeep);case 6:blob=_context5.sent;_context5.next=13;break;case 9:_context5.prev=9;_context5.t0=_context5["catch"](3);_notify.toastNotifications.addDanger({title:intl.formatMessage({id:"kbn.management.objects.objectsTable.export.dangerNotification",defaultMessage:"Unable to generate export"})});throw _context5.t0;case 13:(0,_filesaver.saveAs)(blob,"export.ndjson");_notify.toastNotifications.addSuccess({title:intl.formatMessage({id:"kbn.management.objects.objectsTable.export.successNotification",defaultMessage:"Your file is downloading in the background"})});case 15:case"end":return _context5.stop()}}},_callee5,null,[[3,9]])}));return function(_x2){return _ref8.apply(this,arguments)}}());_defineProperty(_assertThisInitialized(_this),"onExportAll",_asyncToGenerator(regeneratorRuntime.mark(function _callee6(){var intl,_this$state2,exportAllSelectedOptions,isIncludeReferencesDeepChecked,exportTypes,blob;return regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:intl=_this.props.intl;_this$state2=_this.state,exportAllSelectedOptions=_this$state2.exportAllSelectedOptions,isIncludeReferencesDeepChecked=_this$state2.isIncludeReferencesDeepChecked;exportTypes=Object.entries(exportAllSelectedOptions).reduce(function(accum,_ref10){var _ref11=_slicedToArray(_ref10,2),id=_ref11[0],selected=_ref11[1];if(selected){accum.push(id)}return accum},[]);_context6.prev=3;_context6.next=6;return(0,_lib.fetchExportByType)(exportTypes,isIncludeReferencesDeepChecked);case 6:blob=_context6.sent;_context6.next=13;break;case 9:_context6.prev=9;_context6.t0=_context6["catch"](3);_notify.toastNotifications.addDanger({title:intl.formatMessage({id:"kbn.management.objects.objectsTable.exportAll.dangerNotification",defaultMessage:"Unable to generate export"})});throw _context6.t0;case 13:(0,_filesaver.saveAs)(blob,"export.ndjson");_notify.toastNotifications.addSuccess({title:intl.formatMessage({id:"kbn.management.objects.objectsTable.exportAll.successNotification",defaultMessage:"Your file is downloading in the background"})});_this.setState({isShowingExportAllOptionsModal:false});case 16:case"end":return _context6.stop()}}},_callee6,null,[[3,9]])})));_defineProperty(_assertThisInitialized(_this),"finishImport",function(){_this.hideImportFlyout();_this.fetchSavedObjects();_this.fetchCounts()});_defineProperty(_assertThisInitialized(_this),"showImportFlyout",function(){_this.setState({isShowingImportFlyout:true})});_defineProperty(_assertThisInitialized(_this),"hideImportFlyout",function(){_this.setState({isShowingImportFlyout:false})});_defineProperty(_assertThisInitialized(_this),"onDelete",function(){_this.setState({isShowingDeleteConfirmModal:true})});_defineProperty(_assertThisInitialized(_this),"delete",_asyncToGenerator(regeneratorRuntime.mark(function _callee7(){var savedObjectsClient,_this$state3,selectedSavedObjects,isDeleting,indexPatterns,objects,deletes;return regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:savedObjectsClient=_this.props.savedObjectsClient;_this$state3=_this.state,selectedSavedObjects=_this$state3.selectedSavedObjects,isDeleting=_this$state3.isDeleting;if(!isDeleting){_context7.next=4;break}return _context7.abrupt("return");case 4:_this.setState({isDeleting:true});indexPatterns=selectedSavedObjects.filter(function(object){return object.type==="index-pattern"});if(!indexPatterns.length){_context7.next=9;break}_context7.next=9;return _this.props.indexPatterns.cache.clearAll();case 9:_context7.next=11;return savedObjectsClient.bulkGet(selectedSavedObjects);case 11:objects=_context7.sent;deletes=objects.savedObjects.map(function(object){return savedObjectsClient["delete"](object.type,object.id)});_context7.next=15;return Promise.all(deletes);case 15:_this.setState({selectedSavedObjects:[]});_context7.next=18;return _this.fetchSavedObjects();case 18:_context7.next=20;return _this.fetchCounts();case 20:_this.setState({isShowingDeleteConfirmModal:false,isDeleting:false});case 21:case"end":return _context7.stop()}}},_callee7)})));_defineProperty(_assertThisInitialized(_this),"getRelationships",function(){var _ref13=_asyncToGenerator(regeneratorRuntime.mark(function _callee8(type,id){return regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:_context8.next=2;return(0,_lib.getRelationships)(type,id,_this.savedObjectTypes,_this.props.$http,_this.props.basePath);case 2:return _context8.abrupt("return",_context8.sent);case 3:case"end":return _context8.stop()}}},_callee8)}));return function(_x3,_x4){return _ref13.apply(this,arguments)}}());_defineProperty(_assertThisInitialized(_this),"changeIncludeReferencesDeep",function(){_this.setState(function(state){return{isIncludeReferencesDeepChecked:!state.isIncludeReferencesDeepChecked}})});_defineProperty(_assertThisInitialized(_this),"closeExportAllModal",function(){_this.setState({isShowingExportAllOptionsModal:false})});_this.savedObjectTypes=POSSIBLE_TYPES;_this.state={totalCount:0,page:0,perPage:props.perPageConfig||50,savedObjects:[],savedObjectCounts:_this.savedObjectTypes.reduce(function(typeToCountMap,type){typeToCountMap[type]=0;return typeToCountMap},{}),activeQuery:_eui.Query.parse(""),selectedSavedObjects:[],isShowingImportFlyout:false,isSearching:false,filteredItemCount:0,isShowingRelationships:false,relationshipObject:undefined,isShowingDeleteConfirmModal:false,isShowingExportAllOptionsModal:false,isDeleting:false,exportAllOptions:[],exportAllSelectedOptions:{},isIncludeReferencesDeepChecked:true};return _this}_createClass(ObjectsTableUI,[{key:"componentDidMount",value:function componentDidMount(){this._isMounted=true;this.fetchSavedObjects();this.fetchCounts()}},{key:"componentWillUnmount",value:function componentWillUnmount(){this._isMounted=false;this.debouncedFetch.cancel()}},{key:"renderFlyout",value:function renderFlyout(){if(!this.state.isShowingImportFlyout){return null}return _react["default"].createElement(_flyout.Flyout,{close:this.hideImportFlyout,done:this.finishImport,services:this.props.services,indexPatterns:this.props.indexPatterns,newIndexPatternUrl:this.props.newIndexPatternUrl,savedObjectTypes:this.props.savedObjectTypes,confirmModalPromise:this.props.confirmModalPromise})}},{key:"renderRelationships",value:function renderRelationships(){if(!this.state.isShowingRelationships){return null}return _react["default"].createElement(_relationships.Relationships,{savedObject:this.state.relationshipObject,getRelationships:this.getRelationships,close:this.onHideRelationships,getDashboardUrl:this.props.getDashboardUrl,goInspectObject:this.props.goInspectObject,canGoInApp:this.props.canGoInApp})}},{key:"renderDeleteConfirmModal",value:function renderDeleteConfirmModal(){var _this2=this;var _this$state4=this.state,isShowingDeleteConfirmModal=_this$state4.isShowingDeleteConfirmModal,isDeleting=_this$state4.isDeleting,selectedSavedObjects=_this$state4.selectedSavedObjects;var intl=this.props.intl;if(!isShowingDeleteConfirmModal){return null}var modal;if(isDeleting){modal=_react["default"].createElement(_eui.EuiLoadingKibana,{size:"xl"})}else{var onCancel=function onCancel(){_this2.setState({isShowingDeleteConfirmModal:false})};var onConfirm=function onConfirm(){_this2["delete"]()};modal=_react["default"].createElement(_eui.EuiConfirmModal,{title:_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.objects.objectsTable.deleteSavedObjectsConfirmModalTitle",defaultMessage:"Delete saved objects"}),onCancel:onCancel,onConfirm:onConfirm,buttonColor:"danger",cancelButtonText:_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.objects.objectsTable.deleteSavedObjectsConfirmModal.cancelButtonLabel",defaultMessage:"Cancel"}),confirmButtonText:isDeleting?_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.objects.objectsTable.deleteSavedObjectsConfirmModal.deleteProcessButtonLabel",defaultMessage:"Deleting"}):_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.objects.objectsTable.deleteSavedObjectsConfirmModal.deleteButtonLabel",defaultMessage:"Delete"}),defaultFocusedButton:_eui.EUI_MODAL_CONFIRM_BUTTON},_react["default"].createElement("p",null,_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.objects.deleteSavedObjectsConfirmModalDescription",defaultMessage:"This action will delete the following saved objects:"})),_react["default"].createElement(_eui.EuiInMemoryTable,{items:selectedSavedObjects,columns:[{field:"type",name:intl.formatMessage({id:"kbn.management.objects.objectsTable.deleteSavedObjectsConfirmModal.typeColumnName",defaultMessage:"Type"}),width:"50px",render:function render(type,object){return _react["default"].createElement(_eui.EuiToolTip,{position:"top",content:(0,_lib.getSavedObjectLabel)(type)},_react["default"].createElement(_eui.EuiIcon,{type:object.meta.icon||"apps"}))}},{field:"id",name:intl.formatMessage({id:"kbn.management.objects.objectsTable.deleteSavedObjectsConfirmModal.idColumnName",defaultMessage:"Id"})},{field:"meta.title",name:intl.formatMessage({id:"kbn.management.objects.objectsTable.deleteSavedObjectsConfirmModal.titleColumnName",defaultMessage:"Title"})}],pagination:true,sorting:false}))}return _react["default"].createElement(_eui.EuiOverlayMask,null,modal)}},{key:"renderExportAllOptionsModal",value:function renderExportAllOptionsModal(){var _this3=this;var _this$state5=this.state,isShowingExportAllOptionsModal=_this$state5.isShowingExportAllOptionsModal,filteredItemCount=_this$state5.filteredItemCount,exportAllOptions=_this$state5.exportAllOptions,exportAllSelectedOptions=_this$state5.exportAllSelectedOptions,isIncludeReferencesDeepChecked=_this$state5.isIncludeReferencesDeepChecked;if(!isShowingExportAllOptionsModal){return null}return _react["default"].createElement(_eui.EuiOverlayMask,null,_react["default"].createElement(_eui.EuiModal,{onClose:this.closeExportAllModal},_react["default"].createElement(_eui.EuiModalHeader,null,_react["default"].createElement(_eui.EuiModalHeaderTitle,null,_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.objects.objectsTable.exportObjectsConfirmModalTitle",defaultMessage:"Export {filteredItemCount, plural, one{# object} other {# objects}}",values:{filteredItemCount:filteredItemCount}}))),_react["default"].createElement(_eui.EuiModalBody,null,_react["default"].createElement(_eui.EuiFormRow,{label:_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.objects.objectsTable.exportObjectsConfirmModalDescription",defaultMessage:"Select which types to export"}),labelType:"legend"},_react["default"].createElement(_eui.EuiCheckboxGroup,{options:exportAllOptions,idToSelectedMap:exportAllSelectedOptions,onChange:function onChange(optionId){var newExportAllSelectedOptions=_objectSpread({},exportAllSelectedOptions,_defineProperty({},optionId,!exportAllSelectedOptions[optionId]));_this3.setState({exportAllSelectedOptions:newExportAllSelectedOptions})}})),_react["default"].createElement(_eui.EuiSwitch,{name:"includeReferencesDeep",label:_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.objects.objectsTable.exportObjectsConfirmModal.includeReferencesDeepLabel",defaultMessage:"Include related objects"}),checked:isIncludeReferencesDeepChecked,onChange:this.changeIncludeReferencesDeep})),_react["default"].createElement(_eui.EuiModalFooter,null,_react["default"].createElement(_eui.EuiFlexGroup,{justifyContent:"flexEnd"},_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiFlexGroup,null,_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiButtonEmpty,{onClick:this.closeExportAllModal},_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.objects.objectsTable.exportObjectsConfirmModal.cancelButtonLabel",defaultMessage:"Cancel"}))),_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiButton,{fill:true,onClick:this.onExportAll},_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.objects.objectsTable.exportObjectsConfirmModal.exportAllButtonLabel",defaultMessage:"Export all"})))))))))}},{key:"render",value:function render(){var _this4=this;var _this$state6=this.state,selectedSavedObjects=_this$state6.selectedSavedObjects,page=_this$state6.page,perPage=_this$state6.perPage,savedObjects=_this$state6.savedObjects,filteredItemCount=_this$state6.filteredItemCount,isSearching=_this$state6.isSearching,savedObjectCounts=_this$state6.savedObjectCounts;var selectionConfig={onSelectionChange:this.onSelectionChanged};var filterOptions=this.savedObjectTypes.map(function(type){return{value:type,name:type,view:"".concat(type," (").concat(savedObjectCounts[type]||0,")")}});return _react["default"].createElement(_eui.EuiPageContent,{horizontalPosition:"center"},this.renderFlyout(),this.renderRelationships(),this.renderDeleteConfirmModal(),this.renderExportAllOptionsModal(),_react["default"].createElement(_header.Header,{onExportAll:function onExportAll(){return _this4.setState({isShowingExportAllOptionsModal:true})},onImport:this.showImportFlyout,onRefresh:this.refreshData,filteredCount:filteredItemCount}),_react["default"].createElement(_eui.EuiSpacer,{size:"xs"}),_react["default"].createElement(_table.Table,{itemId:"id",selectionConfig:selectionConfig,selectedSavedObjects:selectedSavedObjects,onQueryChange:this.onQueryChange,onTableChange:this.onTableChange,filterOptions:filterOptions,onExport:this.onExport,canDelete:this.props.uiCapabilities.savedObjectsManagement["delete"],onDelete:this.onDelete,goInspectObject:this.props.goInspectObject,pageIndex:page,pageSize:perPage,items:savedObjects,totalItemCount:filteredItemCount,isSearching:isSearching,onShowRelationships:this.onShowRelationships,canGoInApp:this.props.canGoInApp}))}}]);return ObjectsTableUI}(_react.Component);_defineProperty(ObjectsTableUI,"propTypes",{savedObjectsClient:_propTypes["default"].object.isRequired,indexPatterns:_propTypes["default"].object.isRequired,$http:_propTypes["default"].func.isRequired,basePath:_propTypes["default"].string.isRequired,perPageConfig:_propTypes["default"].number,newIndexPatternUrl:_propTypes["default"].string.isRequired,confirmModalPromise:_propTypes["default"].func.isRequired,services:_propTypes["default"].array.isRequired,uiCapabilities:_propTypes["default"].object.isRequired,goInspectObject:_propTypes["default"].func.isRequired,canGoInApp:_propTypes["default"].func.isRequired});var ObjectsTable=(0,_react2.injectI18n)(ObjectsTableUI);exports.ObjectsTable=ObjectsTable},2066:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.resolveIndexPatternConflicts=resolveIndexPatternConflicts;exports.saveObjects=saveObjects;exports.saveObject=saveObject;exports.resolveSavedSearches=resolveSavedSearches;exports.resolveSavedObjects=resolveSavedObjects;var _errors=__webpack_require__(80);var _i18n=__webpack_require__(5);function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function getSavedObject(_x,_x2){return _getSavedObject.apply(this,arguments)}function _getSavedObject(){_getSavedObject=_asyncToGenerator(regeneratorRuntime.mark(function _callee(doc,services){var service,obj;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:service=services.find(function(service){return service.type===doc._type});if(service){_context.next=3;break}return _context.abrupt("return");case 3:_context.next=5;return service.get();case 5:obj=_context.sent;obj.id=doc._id;obj.migrationVersion=doc._migrationVersion;return _context.abrupt("return",obj);case 9:case"end":return _context.stop()}}},_callee)}));return _getSavedObject.apply(this,arguments)}function addJsonFieldToIndexPattern(target,sourceString,fieldName,indexName){if(sourceString){try{target[fieldName]=JSON.parse(sourceString)}catch(error){throw new Error(_i18n.i18n.translate("kbn.management.objects.parsingFieldErrorMessage",{defaultMessage:"Error encountered parsing {fieldName} for index pattern {indexName}: {errorMessage}",values:{fieldName:fieldName,indexName:indexName,errorMessage:error.message}}))}}}function importIndexPattern(_x3,_x4,_x5,_x6){return _importIndexPattern.apply(this,arguments)}function _importIndexPattern(){_importIndexPattern=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(doc,indexPatterns,overwriteAll,confirmModalPromise){var emptyPattern,_doc$_source,title,timeFieldName,fields,fieldFormatMap,sourceFilters,type,typeMeta,importedIndexPattern,newId;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return indexPatterns.get();case 2:emptyPattern=_context2.sent;_doc$_source=doc._source,title=_doc$_source.title,timeFieldName=_doc$_source.timeFieldName,fields=_doc$_source.fields,fieldFormatMap=_doc$_source.fieldFormatMap,sourceFilters=_doc$_source.sourceFilters,type=_doc$_source.type,typeMeta=_doc$_source.typeMeta;importedIndexPattern={id:doc._id,title:title,timeFieldName:timeFieldName};if(type){importedIndexPattern.type=type}addJsonFieldToIndexPattern(importedIndexPattern,fields,"fields",title);addJsonFieldToIndexPattern(importedIndexPattern,fieldFormatMap,"fieldFormatMap",title);addJsonFieldToIndexPattern(importedIndexPattern,sourceFilters,"sourceFilters",title);addJsonFieldToIndexPattern(importedIndexPattern,typeMeta,"typeMeta",title);Object.assign(emptyPattern,importedIndexPattern);_context2.next=13;return emptyPattern.create(overwriteAll);case 13:newId=_context2.sent;if(newId){_context2.next=26;break}_context2.prev=15;_context2.next=18;return confirmModalPromise(_i18n.i18n.translate("kbn.management.indexPattern.confirmOverwriteLabel",{values:{title:this.title},defaultMessage:"Are you sure you want to overwrite '{title}'?"}),{title:_i18n.i18n.translate("kbn.management.indexPattern.confirmOverwriteTitle",{defaultMessage:"Overwrite {type}?",values:{type:type}}),confirmButtonText:_i18n.i18n.translate("kbn.management.indexPattern.confirmOverwriteButton",{defaultMessage:"Overwrite"})});case 18:_context2.next=20;return emptyPattern.create(true);case 20:newId=_context2.sent;_context2.next=26;break;case 23:_context2.prev=23;_context2.t0=_context2["catch"](15);return _context2.abrupt("return");case 26:indexPatterns.cache.clear(newId);return _context2.abrupt("return",newId);case 28:case"end":return _context2.stop()}}},_callee2,this,[[15,23]])}));return _importIndexPattern.apply(this,arguments)}function importDocument(_x7,_x8,_x9){return _importDocument.apply(this,arguments)}function _importDocument(){_importDocument=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(obj,doc,overwriteAll){return regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return obj.applyESResp(_objectSpread({references:doc._references||[]},doc));case 2:_context3.next=4;return obj.save({confirmOverwrite:!overwriteAll});case 4:return _context3.abrupt("return",_context3.sent);case 5:case"end":return _context3.stop()}}},_callee3)}));return _importDocument.apply(this,arguments)}function groupByType(docs){var defaultDocTypes={searches:[],indexPatterns:[],other:[]};return docs.reduce(function(types,doc){switch(doc._type){case"search":types.searches.push(doc);break;case"index-pattern":types.indexPatterns.push(doc);break;default:types.other.push(doc)}return types},defaultDocTypes)}function awaitEachItemInParallel(_x10,_x11){return _awaitEachItemInParallel.apply(this,arguments)}function _awaitEachItemInParallel(){_awaitEachItemInParallel=_asyncToGenerator(regeneratorRuntime.mark(function _callee4(list,op){return regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return Promise.all(list.map(function(item){return op(item)}));case 2:return _context4.abrupt("return",_context4.sent);case 3:case"end":return _context4.stop()}}},_callee4)}));return _awaitEachItemInParallel.apply(this,arguments)}function resolveIndexPatternConflicts(_x12,_x13,_x14){return _resolveIndexPatternConflicts.apply(this,arguments)}function _resolveIndexPatternConflicts(){_resolveIndexPatternConflicts=_asyncToGenerator(regeneratorRuntime.mark(function _callee6(resolutions,conflictedIndexPatterns,overwriteAll){var importCount;return regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:importCount=0;_context6.next=3;return awaitEachItemInParallel(conflictedIndexPatterns,function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark(function _callee5(_ref){var obj,oldIndexId,resolution,newIndexId,filter;return regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:obj=_ref.obj;oldIndexId=obj.searchSource.getOwnField("index");if(typeof oldIndexId!=="string"){oldIndexId=oldIndexId.id}resolution=resolutions.find(function(_ref3){var oldId=_ref3.oldId;return oldId===oldIndexId});if(!resolution){_context5.next=8;break}newIndexId=resolution.newId;_context5.next=8;return obj.hydrateIndexPattern(newIndexId);case 8:filter=(obj.searchSource.getOwnField("filter")||[]).map(function(filter){if(!(filter.meta&&filter.meta.index)){return filter}resolution=resolutions.find(function(_ref4){var oldId=_ref4.oldId;return oldId===filter.meta.index});return resolution?_objectSpread({},filter,{meta:_objectSpread({},filter.meta,{index:resolution.newId})}):filter});if(filter.length>0){obj.searchSource.setField("filter",filter)}if(resolution){_context5.next=12;break}return _context5.abrupt("return");case 12:_context5.next=14;return saveObject(obj,overwriteAll);case 14:if(!_context5.sent){_context5.next=16;break}importCount++;case 16:case"end":return _context5.stop()}}},_callee5)}));return function(_x28){return _ref2.apply(this,arguments)}}());case 3:return _context6.abrupt("return",importCount);case 4:case"end":return _context6.stop()}}},_callee6)}));return _resolveIndexPatternConflicts.apply(this,arguments)}function saveObjects(_x15,_x16){return _saveObjects.apply(this,arguments)}function _saveObjects(){_saveObjects=_asyncToGenerator(regeneratorRuntime.mark(function _callee8(objs,overwriteAll){var importCount;return regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:importCount=0;_context8.next=3;return awaitEachItemInParallel(objs,function(){var _ref5=_asyncToGenerator(regeneratorRuntime.mark(function _callee7(obj){return regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.next=2;return saveObject(obj,overwriteAll);case 2:if(!_context7.sent){_context7.next=4;break}importCount++;case 4:case"end":return _context7.stop()}}},_callee7)}));return function(_x29){return _ref5.apply(this,arguments)}}());case 3:return _context8.abrupt("return",importCount);case 4:case"end":return _context8.stop()}}},_callee8)}));return _saveObjects.apply(this,arguments)}function saveObject(_x17,_x18){return _saveObject.apply(this,arguments)}function _saveObject(){_saveObject=_asyncToGenerator(regeneratorRuntime.mark(function _callee9(obj,overwriteAll){return regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:_context9.next=2;return obj.save({confirmOverwrite:!overwriteAll});case 2:return _context9.abrupt("return",_context9.sent);case 3:case"end":return _context9.stop()}}},_callee9)}));return _saveObject.apply(this,arguments)}function resolveSavedSearches(_x19,_x20,_x21,_x22){return _resolveSavedSearches.apply(this,arguments)}function _resolveSavedSearches(){_resolveSavedSearches=_asyncToGenerator(regeneratorRuntime.mark(function _callee11(savedSearches,services,indexPatterns,overwriteAll){var importCount;return regeneratorRuntime.wrap(function _callee11$(_context11){while(1){switch(_context11.prev=_context11.next){case 0:importCount=0;_context11.next=3;return awaitEachItemInParallel(savedSearches,function(){var _ref6=_asyncToGenerator(regeneratorRuntime.mark(function _callee10(searchDoc){var obj;return regeneratorRuntime.wrap(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:_context10.next=2;return getSavedObject(searchDoc,services);case 2:obj=_context10.sent;if(obj){_context10.next=5;break}return _context10.abrupt("return");case 5:_context10.next=7;return importDocument(obj,searchDoc,overwriteAll);case 7:if(!_context10.sent){_context10.next=9;break}importCount++;case 9:case"end":return _context10.stop()}}},_callee10)}));return function(_x30){return _ref6.apply(this,arguments)}}());case 3:return _context11.abrupt("return",importCount);case 4:case"end":return _context11.stop()}}},_callee11)}));return _resolveSavedSearches.apply(this,arguments)}function resolveSavedObjects(_x23,_x24,_x25,_x26,_x27){return _resolveSavedObjects.apply(this,arguments)}function _resolveSavedObjects(){_resolveSavedObjects=_asyncToGenerator(regeneratorRuntime.mark(function _callee15(savedObjects,overwriteAll,services,indexPatterns,confirmModalPromise){var docTypes,importedObjectCount,failedImports,conflictedSearchDocs,conflictedIndexPatterns,conflictedSavedObjectsLinkedToSavedSearches;return regeneratorRuntime.wrap(function _callee15$(_context15){while(1){switch(_context15.prev=_context15.next){case 0:docTypes=groupByType(savedObjects);importedObjectCount=0;failedImports=[];_context15.next=5;return awaitEachItemInParallel(docTypes.indexPatterns,function(){var _ref7=_asyncToGenerator(regeneratorRuntime.mark(function _callee12(indexPatternDoc){var importedIndexPatternId;return regeneratorRuntime.wrap(function _callee12$(_context12){while(1){switch(_context12.prev=_context12.next){case 0:_context12.prev=0;_context12.next=3;return importIndexPattern(indexPatternDoc,indexPatterns,overwriteAll,confirmModalPromise);case 3:importedIndexPatternId=_context12.sent;if(importedIndexPatternId){importedObjectCount++}_context12.next=10;break;case 7:_context12.prev=7;_context12.t0=_context12["catch"](0);failedImports.push({indexPatternDoc:indexPatternDoc,error:_context12.t0});case 10:case"end":return _context12.stop()}}},_callee12,null,[[0,7]])}));return function(_x31){return _ref7.apply(this,arguments)}}());case 5:conflictedSearchDocs=[];conflictedIndexPatterns=[];conflictedSavedObjectsLinkedToSavedSearches=[];_context15.next=10;return awaitEachItemInParallel(docTypes.searches,function(){var _ref8=_asyncToGenerator(regeneratorRuntime.mark(function _callee13(searchDoc){var obj;return regeneratorRuntime.wrap(function _callee13$(_context13){while(1){switch(_context13.prev=_context13.next){case 0:_context13.next=2;return getSavedObject(searchDoc,services);case 2:obj=_context13.sent;_context13.prev=3;_context13.next=6;return importDocument(obj,searchDoc,overwriteAll);case 6:if(!_context13.sent){_context13.next=8;break}importedObjectCount++;case 8:_context13.next=13;break;case 10:_context13.prev=10;_context13.t0=_context13["catch"](3);if(_context13.t0 instanceof _errors.SavedObjectNotFound){if(_context13.t0.savedObjectType==="index-pattern"){conflictedIndexPatterns.push({obj:obj,doc:searchDoc})}else{conflictedSearchDocs.push(searchDoc)}}else{failedImports.push({obj:obj,error:_context13.t0})}case 13:case"end":return _context13.stop()}}},_callee13,null,[[3,10]])}));return function(_x32){return _ref8.apply(this,arguments)}}());case 10:_context15.next=12;return awaitEachItemInParallel(docTypes.other,function(){var _ref9=_asyncToGenerator(regeneratorRuntime.mark(function _callee14(otherDoc){var obj,isIndexPatternNotFound;return regeneratorRuntime.wrap(function _callee14$(_context14){while(1){switch(_context14.prev=_context14.next){case 0:_context14.next=2;return getSavedObject(otherDoc,services);case 2:obj=_context14.sent;_context14.prev=3;_context14.next=6;return importDocument(obj,otherDoc,overwriteAll);case 6:if(!_context14.sent){_context14.next=8;break}importedObjectCount++;case 8:_context14.next=14;break;case 10:_context14.prev=10;_context14.t0=_context14["catch"](3);isIndexPatternNotFound=_context14.t0 instanceof _errors.SavedObjectNotFound&&_context14.t0.savedObjectType==="index-pattern";if(isIndexPatternNotFound&&obj.savedSearchId){conflictedSavedObjectsLinkedToSavedSearches.push(obj)}else if(isIndexPatternNotFound){conflictedIndexPatterns.push({obj:obj,doc:otherDoc})}else{failedImports.push({obj:obj,error:_context14.t0})}case 14:case"end":return _context14.stop()}}},_callee14,null,[[3,10]])}));return function(_x33){return _ref9.apply(this,arguments)}}());case 12:return _context15.abrupt("return",{conflictedIndexPatterns:conflictedIndexPatterns,conflictedSavedObjectsLinkedToSavedSearches:conflictedSavedObjectsLinkedToSavedSearches,conflictedSearchDocs:conflictedSearchDocs,importedObjectCount:importedObjectCount,failedImports:failedImports});case 13:case"end":return _context15.stop()}}},_callee15)}));return _resolveSavedObjects.apply(this,arguments)}},2067:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"IndexPatternListFactory",{enumerable:true,get:function get(){return _index_pattern_list.IndexPatternListFactory}});Object.defineProperty(exports,"IndexPatternListConfig",{enumerable:true,get:function get(){return _index_pattern_list_config.IndexPatternListConfig}});Object.defineProperty(exports,"IndexPatternListConfigRegistry",{enumerable:true,get:function get(){return _index_pattern_list_config_registry.IndexPatternListConfigRegistry}});__webpack_require__(6338);var _index_pattern_list=__webpack_require__(6339);var _index_pattern_list_config=__webpack_require__(2068);var _index_pattern_list_config_registry=__webpack_require__(1037)},2068:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.IndexPatternListConfig=void 0;function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var IndexPatternListConfig=function IndexPatternListConfig(){_classCallCheck(this,IndexPatternListConfig);_defineProperty(this,"getIndexPatternTags",function(indexPattern,isDefault){return isDefault?[{key:"default",name:"Default"}]:[]});_defineProperty(this,"getFieldInfo",function(){return[]});_defineProperty(this,"areScriptedFieldsEnabled",function(){return true})};exports.IndexPatternListConfig=IndexPatternListConfig;_defineProperty(IndexPatternListConfig,"key","default")},2069:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"IndexPatternCreationFactory",{enumerable:true,get:function get(){return _index_pattern_creation.IndexPatternCreationFactory}});Object.defineProperty(exports,"IndexPatternCreationConfig",{enumerable:true,get:function get(){return _index_pattern_creation_config.IndexPatternCreationConfig}});Object.defineProperty(exports,"indexPatternTypes",{enumerable:true,get:function get(){return _index_pattern_types.indexPatternTypes}});Object.defineProperty(exports,"addIndexPatternType",{enumerable:true,get:function get(){return _index_pattern_types.addIndexPatternType}});__webpack_require__(6340);var _index_pattern_creation=__webpack_require__(6341);var _index_pattern_creation_config=__webpack_require__(2070);var _index_pattern_types=__webpack_require__(1038)},2070:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.IndexPatternCreationConfig=void 0;var _i18n=__webpack_require__(5);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var indexPatternTypeName=_i18n.i18n.translate("common.ui.management.editIndexPattern.createIndex.defaultTypeName",{defaultMessage:"index pattern"});var indexPatternButtonText=_i18n.i18n.translate("common.ui.management.editIndexPattern.createIndex.defaultButtonText",{defaultMessage:"Standard index pattern"});var indexPatternButtonDescription=_i18n.i18n.translate("common.ui.management.editIndexPattern.createIndex.defaultButtonDescription",{defaultMessage:"Perform full aggregations against any data"});var IndexPatternCreationConfig=function(){function IndexPatternCreationConfig(_ref){var _this=this;var _ref$type=_ref.type,type=_ref$type===void 0?undefined:_ref$type,_ref$name=_ref.name,name=_ref$name===void 0?indexPatternTypeName:_ref$name,_ref$showSystemIndice=_ref.showSystemIndices,showSystemIndices=_ref$showSystemIndice===void 0?true:_ref$showSystemIndice,_ref$httpClient=_ref.httpClient,httpClient=_ref$httpClient===void 0?null:_ref$httpClient,_ref$isBeta=_ref.isBeta,isBeta=_ref$isBeta===void 0?false:_ref$isBeta;_classCallCheck(this,IndexPatternCreationConfig);_defineProperty(this,"getIndexPatternType",function(){return _this.type});_defineProperty(this,"getIndexPatternName",function(){return _this.name});_defineProperty(this,"getIsBeta",function(){return _this.isBeta});_defineProperty(this,"getShowSystemIndices",function(){return _this.showSystemIndices});_defineProperty(this,"checkIndicesForErrors",function(){return undefined});_defineProperty(this,"getIndexPatternMappings",function(){return{}});_defineProperty(this,"renderPrompt",function(){return null});_defineProperty(this,"getFetchForWildcardOptions",function(){return{}});this.type=type;this.name=name;this.showSystemIndices=showSystemIndices;this.httpClient=httpClient;this.isBeta=isBeta}_createClass(IndexPatternCreationConfig,[{key:"getIndexPatternCreationOption",value:function(){var _getIndexPatternCreationOption=_asyncToGenerator(regeneratorRuntime.mark(function _callee(urlHandler){return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:return _context.abrupt("return",{text:indexPatternButtonText,description:indexPatternButtonDescription,testSubj:"createStandardIndexPatternButton",onClick:function onClick(){urlHandler("/management/kibana/index_pattern")}});case 1:case"end":return _context.stop()}}},_callee)}));function getIndexPatternCreationOption(_x){return _getIndexPatternCreationOption.apply(this,arguments)}return getIndexPatternCreationOption}()},{key:"getIndexTags",value:function getIndexTags(){return[]}}]);return IndexPatternCreationConfig}();exports.IndexPatternCreationConfig=IndexPatternCreationConfig;_defineProperty(IndexPatternCreationConfig,"key","default")},2071:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getSupportedScriptingLanguages=getSupportedScriptingLanguages;exports.getDeprecatedScriptingLanguages=getDeprecatedScriptingLanguages;exports.GetEnabledScriptingLanguagesProvider=GetEnabledScriptingLanguagesProvider;var _chrome=_interopRequireDefault(__webpack_require__(19));var _notify=__webpack_require__(24);var _i18n=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getSupportedScriptingLanguages(){return["painless"]}function getDeprecatedScriptingLanguages(){return[]}function GetEnabledScriptingLanguagesProvider($http){return function(){return $http.get(_chrome["default"].addBasePath("/api/kibana/scripts/languages")).then(function(res){return res.data})["catch"](function(){_notify.toastNotifications.addDanger(_i18n.i18n.translate("common.ui.scriptingLanguages.errorFetchingToastDescription",{defaultMessage:"Error getting available scripting languages from Elasticsearch"}));return[]})}}},2072:function(module,exports,__webpack_require__){module.exports=__webpack_require__(18)(2760)},2073:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"UICapabilitiesProvider",{enumerable:true,get:function get(){return _ui_capabilities_provider.UICapabilitiesProvider}});Object.defineProperty(exports,"injectUICapabilities",{enumerable:true,get:function get(){return _inject_ui_capabilities.injectUICapabilities}});var _ui_capabilities_provider=__webpack_require__(6436);var _inject_ui_capabilities=__webpack_require__(6437)},2074:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.UICapabilitiesContext=void 0;var _react=_interopRequireDefault(__webpack_require__(0));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var UICapabilitiesContext=_react["default"].createContext({navLinks:{},catalogue:{},management:{}});exports.UICapabilitiesContext=UICapabilitiesContext},2075:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"InitAfterBindingsWorkaround",{enumerable:true,get:function get(){return _init_after_bindings_workaround.InitAfterBindingsWorkaround}});Object.defineProperty(exports,"callAfterBindingsWorkaround",{enumerable:true,get:function get(){return _init_after_bindings_workaround.callAfterBindingsWorkaround}});var _init_after_bindings_workaround=__webpack_require__(6451)},2076:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"QueryParameterActionsProvider",{enumerable:true,get:function get(){return _actions.QueryParameterActionsProvider}});Object.defineProperty(exports,"MAX_CONTEXT_SIZE",{enumerable:true,get:function get(){return _constants.MAX_CONTEXT_SIZE}});Object.defineProperty(exports,"MIN_CONTEXT_SIZE",{enumerable:true,get:function get(){return _constants.MIN_CONTEXT_SIZE}});Object.defineProperty(exports,"QUERY_PARAMETER_KEYS",{enumerable:true,get:function get(){return _constants.QUERY_PARAMETER_KEYS}});Object.defineProperty(exports,"createInitialQueryParametersState",{enumerable:true,get:function get(){return _state.createInitialQueryParametersState}});var _actions=__webpack_require__(6458);var _constants=__webpack_require__(2077);var _state=__webpack_require__(2078)},2077:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.QUERY_PARAMETER_KEYS=exports.MIN_CONTEXT_SIZE=exports.MAX_CONTEXT_SIZE=void 0;var _state=__webpack_require__(2078);var MAX_CONTEXT_SIZE=1e4;exports.MAX_CONTEXT_SIZE=MAX_CONTEXT_SIZE;var MIN_CONTEXT_SIZE=0;exports.MIN_CONTEXT_SIZE=MIN_CONTEXT_SIZE;var QUERY_PARAMETER_KEYS=Object.keys((0,_state.createInitialQueryParametersState)());exports.QUERY_PARAMETER_KEYS=QUERY_PARAMETER_KEYS},2078:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createInitialQueryParametersState=createInitialQueryParametersState;function createInitialQueryParametersState(defaultStepSize,tieBreakerField){return{anchorType:null,anchorId:null,columns:[],defaultStepSize:defaultStepSize,filters:[],indexPatternId:null,predecessorCount:0,successorCount:0,sort:[],tieBreakerField:tieBreakerField}}},247:function(module,exports,__webpack_require__){module.exports=__webpack_require__(18)(69)},248:function(module,exports,__webpack_require__){module.exports=__webpack_require__(18)(832)},249:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _view=__webpack_require__(6224);Object.keys(_view).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _view[key]}})});var _panels=__webpack_require__(2051);Object.keys(_panels).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _panels[key]}})});var _embeddables=__webpack_require__(6225);Object.keys(_embeddables).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _embeddables[key]}})});var _metadata=__webpack_require__(6230);Object.keys(_metadata).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _metadata[key]}})})},287:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getLastValue=void 0;var _lodash=__webpack_require__(1);var DEFAULT_VALUE=0;var extractValue=function extractValue(data){return data&&data[1]||null};var getLastValue=function getLastValue(data){var defaultValue=arguments.length>1&&arguments[1]!==undefined?arguments[1]:DEFAULT_VALUE;if(!(0,_lodash.isArray)(data)){return data||defaultValue}return extractValue((0,_lodash.last)(data))||defaultValue};exports.getLastValue=getLastValue},288:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.filterRows=filterRows;exports.MetricSelect=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(17));var _react=_interopRequireDefault(__webpack_require__(0));var _lodash=__webpack_require__(1);var _react2=__webpack_require__(10);var _eui=__webpack_require__(2);var _calculate_siblings=__webpack_require__(5786);var _calculate_label=__webpack_require__(1007);var _basic_aggs=__webpack_require__(1988);var _to_percentile_number=__webpack_require__(5787);var _metric_types=__webpack_require__(665);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}function createTypeFilter(restrict,exclude){return function(metric){if((0,_lodash.includes)(exclude,metric.type))return false;switch(restrict){case"basic":return(0,_lodash.includes)(_basic_aggs.basicAggs,metric.type);default:return true}}}function filterRows(includeSiblings){return function(row){if(includeSiblings){return!/^series/.test(row.type)&&!/^percentile/.test(row.type)&&row.type!=="math"}return!/_bucket$/.test(row.type)&&!/^series/.test(row.type)&&!/^percentile/.test(row.type)&&row.type!=="math"}}function MetricSelectUi(props){var additionalOptions=props.additionalOptions,restrict=props.restrict,metric=props.metric,metrics=props.metrics,onChange=props.onChange,value=props.value,exclude=props.exclude,includeSiblings=props.includeSiblings,clearable=props.clearable,intl=props.intl,rest=_objectWithoutProperties(props,["additionalOptions","restrict","metric","metrics","onChange","value","exclude","includeSiblings","clearable","intl"]);var calculatedMetrics=metrics.filter(createTypeFilter(restrict,exclude));var siblings=(0,_calculate_siblings.calculateSiblings)(calculatedMetrics,metric);var percentileOptions=siblings.filter(function(row){return/^percentile/.test(row.type)}).reduce(function(acc,row){var label=(0,_calculate_label.calculateLabel)(row,calculatedMetrics);switch(row.type){case _metric_types.METRIC_TYPES.PERCENTILE_RANK:(row.values||[]).forEach(function(p){var value=(0,_to_percentile_number.toPercentileNumber)(p);acc.push({value:"".concat(row.id,"[").concat(value,"]"),label:"".concat(label," (").concat(value,")")})});case _metric_types.METRIC_TYPES.PERCENTILE:(row.percentiles||[]).forEach(function(p){if(p.value){var _value=(0,_to_percentile_number.toPercentileNumber)(p.value);acc.push({value:"".concat(row.id,"[").concat(_value,"]"),label:"".concat(label," (").concat(_value,")")})}})}return acc},[]);var options=siblings.filter(filterRows(includeSiblings)).map(function(row){var label=(0,_calculate_label.calculateLabel)(row,calculatedMetrics);return{value:row.id,label:label}});var allOptions=[].concat(_toConsumableArray(options),_toConsumableArray(additionalOptions),_toConsumableArray(percentileOptions));var selectedOption=allOptions.find(function(option){return value===option.value});var selectedOptions=selectedOption?[selectedOption]:[];return _react["default"].createElement(_eui.EuiComboBox,_extends({placeholder:intl.formatMessage({id:"tsvb.metricSelect.selectMetricPlaceholder",defaultMessage:"Select metric"}),options:allOptions,selectedOptions:selectedOptions,onChange:onChange,singleSelection:{asPlainText:true},isClearable:clearable},rest))}MetricSelectUi.defaultProps={additionalOptions:[],exclude:[],metric:{},restrict:"none",includeSiblings:false};MetricSelectUi.propTypes={additionalOptions:_propTypes["default"].array,exclude:_propTypes["default"].array,metric:_propTypes["default"].object,onChange:_propTypes["default"].func,restrict:_propTypes["default"].string,value:_propTypes["default"].string,includeSiblings:_propTypes["default"].bool};var MetricSelect=(0,_react2.injectI18n)(MetricSelectUi);exports.MetricSelect=MetricSelect},289:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.handleChange=handleChange;exports.handleDelete=handleDelete;exports.handleAdd=handleAdd;exports.collectionActions=void 0;var _uuid=_interopRequireDefault(__webpack_require__(105));var _lodash=_interopRequireDefault(__webpack_require__(1));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var newFn=function newFn(){return{id:_uuid["default"].v1()}};function handleChange(props,doc){var model=props.model,name=props.name;var collection=model[name]||[];var part={};part[name]=collection.map(function(row){if(row.id===doc.id)return doc;return row});if(_lodash["default"].isFunction(props.onChange)){props.onChange(_lodash["default"].assign({},model,part))}}function handleDelete(props,doc){var model=props.model,name=props.name;var collection=model[name]||[];var part={};part[name]=collection.filter(function(row){return row.id!==doc.id});if(_lodash["default"].isFunction(props.onChange)){props.onChange(_lodash["default"].assign({},model,part))}}function handleAdd(props){var fn=arguments.length>1&&arguments[1]!==undefined?arguments[1]:newFn;if(!_lodash["default"].isFunction(fn))fn=newFn;var model=props.model,name=props.name;var collection=model[name]||[];var part={};part[name]=collection.concat([fn()]);if(_lodash["default"].isFunction(props.onChange)){props.onChange(_lodash["default"].assign({},model,part))}}var collectionActions={handleAdd:handleAdd,handleDelete:handleDelete,handleChange:handleChange};exports.collectionActions=collectionActions},290:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ES_TYPES=void 0;var ES_TYPES={NUMBER:"number",STRING:"string",KEYWORD:"keyword",TEXT:"text",DATE:"date"};exports.ES_TYPES=ES_TYPES},291:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.IndexPattern=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(17));var _react=_interopRequireDefault(__webpack_require__(0));var _field_select=__webpack_require__(199);var _create_select_handler=__webpack_require__(50);var _create_text_handler=__webpack_require__(64);var _yes_no=__webpack_require__(200);var _eui=__webpack_require__(2);var _react2=__webpack_require__(10);var _es_types=__webpack_require__(290);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var RESTRICT_FIELDS=[_es_types.ES_TYPES.DATE];var IndexPattern=function IndexPattern(props){var _defaults;var fields=props.fields,prefix=props.prefix;var handleSelectChange=(0,_create_select_handler.createSelectHandler)(props.onChange);var handleTextChange=(0,_create_text_handler.createTextHandler)(props.onChange);var timeFieldName="".concat(prefix,"time_field");var indexPatternName="".concat(prefix,"index_pattern");var intervalName="".concat(prefix,"interval");var dropBucketName="".concat(prefix,"drop_last_bucket");var defaults=(_defaults={default_index_pattern:""},_defineProperty(_defaults,indexPatternName,"*"),_defineProperty(_defaults,intervalName,"auto"),_defineProperty(_defaults,dropBucketName,1),_defaults);var htmlId=(0,_eui.htmlIdGenerator)();var model=_objectSpread({},defaults,props.model);var isDefaultIndexPatternUsed=model.default_index_pattern&&!model[indexPatternName];return _react["default"].createElement("div",{className:props.className},_react["default"].createElement(_eui.EuiFlexGroup,{responsive:false,wrap:true},_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiFormRow,{id:htmlId("indexPattern"),label:_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.indexPatternLabel",defaultMessage:"Index pattern"}),helpText:isDefaultIndexPatternUsed&&_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.indexPattern.searchByDefaultIndex",defaultMessage:"Default index pattern is used. To query all indexes use *"}),fullWidth:true},_react["default"].createElement(_eui.EuiFieldText,{"data-test-subj":"metricsIndexPatternInput",disabled:props.disabled,placeholder:model.default_index_pattern,onChange:handleTextChange(indexPatternName,"*"),value:model[indexPatternName],fullWidth:true}))),_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiFormRow,{id:htmlId("timeField"),label:_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.indexPattern.timeFieldLabel",defaultMessage:"Time field"}),fullWidth:true},_react["default"].createElement(_field_select.FieldSelect,{"data-test-subj":"metricsIndexPatternFieldsSelect",restrict:RESTRICT_FIELDS,value:model[timeFieldName],disabled:props.disabled,onChange:handleSelectChange(timeFieldName),indexPattern:model[indexPatternName],fields:fields,placeholder:isDefaultIndexPatternUsed?model.default_timefield:undefined,fullWidth:true}))),_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiFormRow,{id:htmlId("interval"),label:_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.indexPattern.intervalLabel",defaultMessage:"Interval"}),helpText:_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.indexPattern.intervalHelpText",defaultMessage:"Examples: auto, 1m, 1d, 7d, 1y, >=1m",description:"auto, 1m, 1d, 7d, 1y, >=1m are required values and must not be translated."})},_react["default"].createElement(_eui.EuiFieldText,{disabled:props.disabled,onChange:handleTextChange(intervalName,"auto"),value:model[intervalName],placeholder:"auto"}))),_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiFormLabel,null,_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.indexPattern.dropLastBucketLabel",defaultMessage:"Drop last bucket?"})),_react["default"].createElement(_eui.EuiSpacer,{size:"s"}),_react["default"].createElement(_yes_no.YesNo,{value:model[dropBucketName],name:dropBucketName,onChange:props.onChange}))))};exports.IndexPattern=IndexPattern;IndexPattern.defaultProps={prefix:"",disabled:false};IndexPattern.propTypes={model:_propTypes["default"].object.isRequired,fields:_propTypes["default"].object.isRequired,onChange:_propTypes["default"].func.isRequired,prefix:_propTypes["default"].string,disabled:_propTypes["default"].bool,className:_propTypes["default"].string}},292:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"DefaultFormatEditor",{enumerable:true,get:function get(){return _default.DefaultFormatEditor}});var _default=__webpack_require__(5984)},293:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SharedComponent=void 0;var _lodash=_interopRequireDefault(__webpack_require__(1));var _autocomplete_component=__webpack_require__(2025);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var SharedComponent=function(_AutocompleteComponen){_inherits(SharedComponent,_AutocompleteComponen);function SharedComponent(name,parent){var _this;_classCallCheck(this,SharedComponent);_this=_possibleConstructorReturn(this,_getPrototypeOf(SharedComponent).call(this,name));_this._nextDict={};if(parent){parent.addComponent(_assertThisInitialized(_this))}_this._parent=parent;return _this}_createClass(SharedComponent,[{key:"getComponent",value:function getComponent(name){return(this._nextDict[name]||[undefined])[0]}},{key:"addComponent",value:function addComponent(component){var current=this._nextDict[component.name]||[];current.push(component);this._nextDict[component.name]=current;this.next=[].concat.apply([],_lodash["default"].values(this._nextDict))}}]);return SharedComponent}(_autocomplete_component.AutocompleteComponent);exports.SharedComponent=SharedComponent},294:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=void 0;function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}var $=__webpack_require__(25);var _=__webpack_require__(1);var es=__webpack_require__(1019);var settings=__webpack_require__(506);var POLL_INTERVAL=6e4;var pollTimeoutId;var perIndexTypes={};var perAliasIndexes=[];var templates=[];var mappingObj={};function expandAliases(indicesOrAliases){if(!indicesOrAliases){return indicesOrAliases}if(typeof indicesOrAliases==="string"){indicesOrAliases=[indicesOrAliases]}indicesOrAliases=$.map(indicesOrAliases,function(iOrA){if(perAliasIndexes[iOrA]){return perAliasIndexes[iOrA]}return[iOrA]});var ret=[].concat.apply([],indicesOrAliases);ret.sort();var last;ret=$.map(ret,function(v){var r=last===v?null:v;last=v;return r});return ret.length>1?ret:ret[0]}function getTemplates(){return _toConsumableArray(templates)}function getFields(indices,types){var ret=[];indices=expandAliases(indices);if(typeof indices==="string"){var typeDict=perIndexTypes[indices];if(!typeDict){return[]}if(typeof types==="string"){var f=typeDict[types];ret=f?f:[]}else{$.each(typeDict,function(type,fields){if(!types||types.length===0||$.inArray(type,types)!==-1){ret.push(fields)}});ret=[].concat.apply([],ret)}}else{$.each(perIndexTypes,function(index){if(!indices||indices.length===0||$.inArray(index,indices)!==-1){ret.push(getFields(index,types))}});ret=[].concat.apply([],ret)}return _.uniq(ret,function(f){return f.name+":"+f.type})}function getTypes(indices){var ret=[];indices=expandAliases(indices);if(typeof indices==="string"){var typeDict=perIndexTypes[indices];if(!typeDict){return[]}$.each(typeDict,function(type){ret.push(type)})}else{$.each(perIndexTypes,function(index){if(!indices||$.inArray(index,indices)!==-1){ret.push(getTypes(index))}});ret=[].concat.apply([],ret)}return _.uniq(ret)}function getIndices(includeAliases){var ret=[];$.each(perIndexTypes,function(index){ret.push(index)});if(typeof includeAliases==="undefined"?true:includeAliases){$.each(perAliasIndexes,function(alias){ret.push(alias)})}return ret}function getFieldNamesFromFieldMapping(fieldName,fieldMapping){if(fieldMapping.enabled===false){return[]}var nestedFields;function applyPathSettings(nestedFieldNames){var pathType=fieldMapping.path||"full";if(pathType==="full"){return $.map(nestedFieldNames,function(f){f.name=fieldName+"."+f.name;return f})}return nestedFieldNames}if(fieldMapping.properties){nestedFields=getFieldNamesFromProperties(fieldMapping.properties);return applyPathSettings(nestedFields)}var fieldType=fieldMapping.type;if(fieldType==="multi_field"){nestedFields=$.map(fieldMapping.fields,function(fieldMapping,fieldName){return getFieldNamesFromFieldMapping(fieldName,fieldMapping)});return applyPathSettings(nestedFields)}var ret={name:fieldName,type:fieldType};if(fieldMapping.index_name){ret.name=fieldMapping.index_name}if(fieldMapping.fields){nestedFields=$.map(fieldMapping.fields,function(fieldMapping,fieldName){return getFieldNamesFromFieldMapping(fieldName,fieldMapping)});nestedFields=applyPathSettings(nestedFields);nestedFields.unshift(ret);return nestedFields}return[ret]}function getFieldNamesFromProperties(){var properties=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var fieldList=$.map(properties,function(fieldMapping,fieldName){return getFieldNamesFromFieldMapping(fieldName,fieldMapping)});return _.uniq(fieldList,function(f){return f.name+":"+f.type})}function loadTemplates(){var templatesObject=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};templates=Object.keys(templatesObject)}function loadMappings(mappings){perIndexTypes={};$.each(mappings,function(index,indexMapping){var normalizedIndexMappings={};if(indexMapping.mappings&&_.keys(indexMapping).length===1){indexMapping=indexMapping.mappings}$.each(indexMapping,function(typeName,typeMapping){if(typeName==="properties"){var fieldList=getFieldNamesFromProperties(typeMapping);normalizedIndexMappings[typeName]=fieldList}else{normalizedIndexMappings[typeName]=[]}});perIndexTypes[index]=normalizedIndexMappings})}function loadAliases(aliases){perAliasIndexes={};$.each(aliases||{},function(index,omdexAliases){perIndexTypes[index]=perIndexTypes[index]||{};$.each(omdexAliases.aliases||{},function(alias){if(alias===index){return}var curAliases=perAliasIndexes[alias];if(!curAliases){curAliases=[];perAliasIndexes[alias]=curAliases}curAliases.push(index)})});perAliasIndexes._all=getIndices(false)}function clear(){perIndexTypes={};perAliasIndexes={};templates=[]}function retrieveSettings(settingsKey,settingsToRetrieve){var currentSettings=settings.getAutocomplete();var settingKeyToPathMap={fields:"_mapping",indices:"_aliases",templates:"_template"};if(currentSettings[settingsKey]&&settingsToRetrieve[settingsKey]){return es.send("GET",settingKeyToPathMap[settingsKey],null,null,true)}else{var settingsPromise=new $.Deferred;if(currentSettings[settingsKey]){return settingsPromise.resolve()}return settingsPromise.resolveWith(this,[[JSON.stringify({})]])}}function retrieveAutoCompleteInfo(){var settingsToRetrieve=arguments.length>0&&arguments[0]!==undefined?arguments[0]:settings.getAutocomplete();if(pollTimeoutId){clearTimeout(pollTimeoutId)}var mappingPromise=retrieveSettings("fields",settingsToRetrieve);var aliasesPromise=retrieveSettings("indices",settingsToRetrieve);var templatesPromise=retrieveSettings("templates",settingsToRetrieve);$.when(mappingPromise,aliasesPromise,templatesPromise).done(function(mappings,aliases,templates){var mappingsResponse;if(mappings){var maxMappingSize=mappings[0].length>10*1024*1024;if(maxMappingSize){console.warn("Mapping size is larger than 10MB (".concat(mappings[0].length/1024/1024," MB). Ignoring..."));mappingsResponse="[{}]"}else{mappingsResponse=mappings[0]}loadMappings(JSON.parse(mappingsResponse))}if(aliases){loadAliases(JSON.parse(aliases[0]))}if(templates){loadTemplates(JSON.parse(templates[0]))}if(mappings&&aliases){$(mappingObj).trigger("update",[mappingsResponse,aliases[0]])}pollTimeoutId=setTimeout(function(){if(settings.getPolling()){retrieveAutoCompleteInfo()}},POLL_INTERVAL)})}var _default={getFields:getFields,getTemplates:getTemplates,getIndices:getIndices,getTypes:getTypes,loadMappings:loadMappings,loadAliases:loadAliases,expandAliases:expandAliases,clear:clear,retrieveAutoCompleteInfo:retrieveAutoCompleteInfo};exports["default"]=_default;module.exports=exports.default},344:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.tickFormatter=void 0;var _handlebars=_interopRequireDefault(__webpack_require__(1980));var _lodash=__webpack_require__(1);var _field_formats=__webpack_require__(111);var _durations=__webpack_require__(1981);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var tickFormatter=function tickFormatter(){var format=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"0,0.[00]";var template=arguments.length>1?arguments[1]:undefined;var getConfig=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;if(!template)template="{{value}}";var render=_handlebars["default"].compile(template,{knownHelpersOnly:true});var formatter;if((0,_durations.isDuration)(format)){var _format$split=format.split(","),_format$split2=_slicedToArray(_format$split,3),from=_format$split2[0],to=_format$split2[1],decimals=_format$split2[2];var DurationFormat=_field_formats.fieldFormats.getType("duration");formatter=new DurationFormat({inputFormat:_durations.inputFormats[from],outputFormat:_durations.outputFormats[to],outputPrecision:decimals})}else{var FieldFormat=_field_formats.fieldFormats.getType(format);if(FieldFormat){formatter=new FieldFormat(null,getConfig)}else{FieldFormat=_field_formats.fieldFormats.getType("number");formatter=new FieldFormat({pattern:format},getConfig)}}return function(val){var value;if(!(0,_lodash.isNumber)(val)){value=val}else{try{value=formatter.convert(val,"text")}catch(e){value=val}}try{return render({value:value})}catch(e){return String(value)}}};exports.tickFormatter=tickFormatter},345:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SeriesDragHandler=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(17));var _eui=__webpack_require__(2);var _i18n=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var SeriesDragHandler=function(_PureComponent){_inherits(SeriesDragHandler,_PureComponent);function SeriesDragHandler(){_classCallCheck(this,SeriesDragHandler);return _possibleConstructorReturn(this,_getPrototypeOf(SeriesDragHandler).apply(this,arguments))}_createClass(SeriesDragHandler,[{key:"render",value:function render(){var _this$props=this.props,dragHandleProps=_this$props.dragHandleProps,hideDragHandler=_this$props.hideDragHandler;return _react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement("div",dragHandleProps,!hideDragHandler&&_react["default"].createElement(_eui.EuiToolTip,{content:_i18n.i18n.translate("tsvb.sort.dragToSortTooltip",{defaultMessage:"Drag to sort"})},_react["default"].createElement(_eui.EuiIcon,{className:"tvbSeries__sortHandle","aria-label":_i18n.i18n.translate("tsvb.sort.dragToSortAriaLabel",{defaultMessage:"Drag to sort"}),type:"grab"}))))}}]);return SeriesDragHandler}(_react.PureComponent);exports.SeriesDragHandler=SeriesDragHandler;SeriesDragHandler.defaultProps={hideDragHandler:true};SeriesDragHandler.propTypes={hideDragHandler:_propTypes["default"].bool,dragHandleProps:_propTypes["default"].object.isRequired}},346:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ORIGIN=void 0;var ORIGIN={EMS:"elastic_maps_service",KIBANA_YML:"self_hosted"};exports.ORIGIN=ORIGIN},348:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"AutocompleteComponent",{enumerable:true,get:function get(){return _autocomplete_component.AutocompleteComponent}});Object.defineProperty(exports,"SharedComponent",{enumerable:true,get:function get(){return _shared_component.SharedComponent}});Object.defineProperty(exports,"ConstantComponent",{enumerable:true,get:function get(){return _constant_component.ConstantComponent}});Object.defineProperty(exports,"ListComponent",{enumerable:true,get:function get(){return _list_component.ListComponent}});Object.defineProperty(exports,"SimpleParamComponent",{enumerable:true,get:function get(){return _simple_param_component.SimpleParamComponent}});Object.defineProperty(exports,"ConditionalProxy",{enumerable:true,get:function get(){return _conditional_proxy.ConditionalProxy}});Object.defineProperty(exports,"GlobalOnlyComponent",{enumerable:true,get:function get(){return _global_only_component.GlobalOnlyComponent}});Object.defineProperty(exports,"ObjectComponent",{enumerable:true,get:function get(){return _object_component.ObjectComponent}});Object.defineProperty(exports,"AcceptEndpointComponent",{enumerable:true,get:function get(){return _accept_endpoint_component.AcceptEndpointComponent}});Object.defineProperty(exports,"URL_PATH_END_MARKER",{enumerable:true,get:function get(){return _accept_endpoint_component.URL_PATH_END_MARKER}});Object.defineProperty(exports,"UrlPatternMatcher",{enumerable:true,get:function get(){return _url_pattern_matcher.UrlPatternMatcher}});Object.defineProperty(exports,"IndexAutocompleteComponent",{enumerable:true,get:function get(){return _index_autocomplete_component.IndexAutocompleteComponent}});Object.defineProperty(exports,"FieldAutocompleteComponent",{enumerable:true,get:function get(){return _field_autocomplete_component.FieldAutocompleteComponent}});Object.defineProperty(exports,"TypeAutocompleteComponent",{enumerable:true,get:function get(){return _type_autocomplete_component.TypeAutocompleteComponent}});Object.defineProperty(exports,"IdAutocompleteComponent",{enumerable:true,get:function get(){return _id_autocomplete_component.IdAutocompleteComponent}});Object.defineProperty(exports,"TemplateAutocompleteComponent",{enumerable:true,get:function get(){return _template_autocomplete_component.TemplateAutocompleteComponent}});Object.defineProperty(exports,"UsernameAutocompleteComponent",{enumerable:true,get:function get(){return _username_autocomplete_component.UsernameAutocompleteComponent}});var _autocomplete_component=__webpack_require__(2025);var _shared_component=__webpack_require__(293);var _constant_component=__webpack_require__(6021);var _list_component=__webpack_require__(424);var _simple_param_component=__webpack_require__(6022);var _conditional_proxy=__webpack_require__(6023);var _global_only_component=__webpack_require__(6024);var _object_component=__webpack_require__(6025);var _accept_endpoint_component=__webpack_require__(6026);var _url_pattern_matcher=__webpack_require__(6027);var _index_autocomplete_component=__webpack_require__(6028);var _field_autocomplete_component=__webpack_require__(6031);var _type_autocomplete_component=__webpack_require__(6032);var _id_autocomplete_component=__webpack_require__(6033);var _template_autocomplete_component=__webpack_require__(6034);var _username_autocomplete_component=__webpack_require__(6035)},349:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"PAGE_TITLE_COMPONENT",{enumerable:true,get:function get(){return _default_component_registry.PAGE_TITLE_COMPONENT}});Object.defineProperty(exports,"PAGE_SUBTITLE_COMPONENT",{enumerable:true,get:function get(){return _default_component_registry.PAGE_SUBTITLE_COMPONENT}});Object.defineProperty(exports,"PAGE_FOOTER_COMPONENT",{enumerable:true,get:function get(){return _default_component_registry.PAGE_FOOTER_COMPONENT}});Object.defineProperty(exports,"registerSettingsComponent",{enumerable:true,get:function get(){return _component_registry.registerSettingsComponent}});Object.defineProperty(exports,"Field",{enumerable:true,get:function get(){return _field.Field}});Object.defineProperty(exports,"management",{enumerable:true,get:function get(){return _sections_register.management}});Object.defineProperty(exports,"SidebarNav",{enumerable:true,get:function get(){return _components.SidebarNav}});Object.defineProperty(exports,"MANAGEMENT_BREADCRUMB",{enumerable:true,get:function get(){return _breadcrumbs.MANAGEMENT_BREADCRUMB}});var _default_component_registry=__webpack_require__(2059);var _component_registry=__webpack_require__(1036);var _field=__webpack_require__(2060);var _sections_register=__webpack_require__(6291);var _components=__webpack_require__(6293);var _breadcrumbs=__webpack_require__(6295)},418:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isBackgroundInverted=exports.isBackgroundDark=exports.isThemeDark=void 0;var _color=_interopRequireDefault(__webpack_require__(1982));var _chrome=_interopRequireDefault(__webpack_require__(19));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var IS_DARK_THEME=_chrome["default"].getUiSettingsClient().get("theme:darkMode");var isColorDark=function isColorDark(c){return(0,_color["default"])(c).luminosity()<.45};var isThemeDark=function isThemeDark(currentTheme){var themeIsDark=currentTheme||IS_DARK_THEME;if(typeof currentTheme==="string"){themeIsDark=isColorDark(currentTheme)}return themeIsDark};exports.isThemeDark=isThemeDark;var isBackgroundDark=function isBackgroundDark(backgroundColor,currentTheme){var themeIsDark=isThemeDark(currentTheme);if(backgroundColor===undefined||backgroundColor==="inherit"){return themeIsDark}return isColorDark(backgroundColor)};exports.isBackgroundDark=isBackgroundDark;var isBackgroundInverted=function isBackgroundInverted(backgroundColor,currentTheme){var backgroundIsDark=isBackgroundDark(backgroundColor,currentTheme);var themeIsDark=isThemeDark(currentTheme);return backgroundIsDark!==themeIsDark};exports.isBackgroundInverted=isBackgroundInverted},419:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SeriesEditor=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(17));var _react=_interopRequireWildcard(__webpack_require__(0));var _lodash=__webpack_require__(1);var _re_id_series=__webpack_require__(5772);var _series=__webpack_require__(5773);var _collection_actions=__webpack_require__(289);var _new_series_fn=__webpack_require__(5825);var _eui=__webpack_require__(2);var _reorder=__webpack_require__(5826);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var DROPPABLE_ID="series_editor_dnd";var SeriesEditor=function(_Component){_inherits(SeriesEditor,_Component);function SeriesEditor(){var _getPrototypeOf2;var _this;_classCallCheck(this,SeriesEditor);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(SeriesEditor)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"handleClone",function(series){var newSeries=(0,_re_id_series.reIdSeries)(series);_collection_actions.handleAdd.call(null,_this.props,function(){return newSeries})});_defineProperty(_assertThisInitialized(_this),"sortHandler",function(_ref){var destination=_ref.destination,source=_ref.source;var canSort=destination&&source;if(canSort){var sortFunction=_this.getSortFunction({destination:destination,source:source});sortFunction({destination:destination,source:source})}});_defineProperty(_assertThisInitialized(_this),"getSortFunction",function(_ref2){var destination=_ref2.destination,source=_ref2.source;return destination.droppableId===source.droppableId&&source.droppableId===DROPPABLE_ID?_this.sortSeries:_this.sortAggregations});_defineProperty(_assertThisInitialized(_this),"sortSeries",function(_ref3){var destination=_ref3.destination,source=_ref3.source;_this.props.onChange({series:(0,_reorder.reorder)(_toConsumableArray(_this.props.model.series),source.index,destination.index)})});_defineProperty(_assertThisInitialized(_this),"sortAggregations",function(_ref4){var destination=_ref4.destination,source=_ref4.source;var extractId=function extractId(_ref5){var droppableId=_ref5.droppableId;return droppableId.split(":")[1]};var id=extractId(source);var canSort=id===extractId(destination);if(canSort){var model=_toConsumableArray(_this.props.model.series);var series=(0,_lodash.find)(model,{id:id});series.metrics=(0,_reorder.reorder)(_toConsumableArray(series.metrics),source.index,destination.index);_this.props.onChange({series:model})}});return _this}_createClass(SeriesEditor,[{key:"render",value:function render(){var _this2=this;var _this$props=this.props,limit=_this$props.limit,model=_this$props.model,name=_this$props.name,fields=_this$props.fields,colorPicker=_this$props.colorPicker;var list=model[name].filter(function(val,index){return index<(limit||Infinity)});return _react["default"].createElement(_eui.EuiDragDropContext,{onDragEnd:this.sortHandler},_react["default"].createElement(_eui.EuiDroppable,{droppableId:DROPPABLE_ID,spacing:"l",type:"MACRO"},list.map(function(row,idx){return _react["default"].createElement(_eui.EuiDraggable,{spacing:"m",key:row.id,index:idx,customDragHandle:true,draggableId:"".concat(DROPPABLE_ID,":").concat(row.id),disableInteractiveElementBlocking:true},function(provided){return _react["default"].createElement(_series.Series,{className:"tvbSeriesEditor",colorPicker:colorPicker,disableAdd:model[name].length>=limit,disableDelete:model[name].length<2,fields:fields,onAdd:function onAdd(){return(0,_collection_actions.handleAdd)(_this2.props,_new_series_fn.newSeriesFn)},onChange:function onChange(doc){return(0,_collection_actions.handleChange)(_this2.props,doc)},onClone:function onClone(){return _this2.handleClone(row)},onDelete:function onDelete(){return(0,_collection_actions.handleDelete)(_this2.props,row)},visData$:_this2.props.visData$,model:row,panel:model,dragHandleProps:provided.dragHandleProps})})})))}}]);return SeriesEditor}(_react.Component);exports.SeriesEditor=SeriesEditor;SeriesEditor.defaultProps={name:"series",limit:Infinity,colorPicker:true};SeriesEditor.propTypes={colorPicker:_propTypes["default"].bool,fields:_propTypes["default"].object,limit:_propTypes["default"].number,model:_propTypes["default"].object,name:_propTypes["default"].string,onChange:_propTypes["default"].func,visData$:_propTypes["default"].object}},420:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Aggs=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(17));var _eui=__webpack_require__(2);var _agg=__webpack_require__(5783);var _new_metric_agg_fn=__webpack_require__(1009);var _series_change_handler=__webpack_require__(5810);var _collection_actions=__webpack_require__(289);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var DROPPABLE_ID="aggs_dnd";var Aggs=function(_PureComponent){_inherits(Aggs,_PureComponent);function Aggs(){_classCallCheck(this,Aggs);return _possibleConstructorReturn(this,_getPrototypeOf(Aggs).apply(this,arguments))}_createClass(Aggs,[{key:"render",value:function render(){var _this=this;var _this$props=this.props,panel=_this$props.panel,model=_this$props.model,fields=_this$props.fields,uiRestrictions=_this$props.uiRestrictions;var list=model.metrics;var onChange=(0,_series_change_handler.seriesChangeHandler)(this.props,list);return _react["default"].createElement(_eui.EuiDroppable,{droppableId:"".concat(DROPPABLE_ID,":").concat(model.id),type:"MICRO",spacing:"s"},list.map(function(row,idx){return _react["default"].createElement(_eui.EuiDraggable,{spacing:"s",key:row.id,index:idx,customDragHandle:true,draggableId:"".concat(DROPPABLE_ID,":").concat(model.id,":").concat(row.id)},function(provided){return _react["default"].createElement(_agg.Agg,{key:row.id,disableDelete:list.length<2,fields:fields,model:row,onAdd:function onAdd(){return(0,_collection_actions.handleAdd)(_this.props,_new_metric_agg_fn.newMetricAggFn)},onChange:onChange,onDelete:function onDelete(){return(0,_collection_actions.handleDelete)(_this.props,row)},panel:panel,series:model,siblings:list,uiRestrictions:uiRestrictions,dragHandleProps:provided.dragHandleProps})})}))}}]);return Aggs}(_react.PureComponent);exports.Aggs=Aggs;Aggs.propTypes={name:_propTypes["default"].string.isRequired,fields:_propTypes["default"].object.isRequired,model:_propTypes["default"].object.isRequired,onChange:_propTypes["default"].func.isRequired,panel:_propTypes["default"].object.isRequired,dragHandleProps:_propTypes["default"].object}},422:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"FormatEditorSamples",{enumerable:true,get:function get(){return _samples.FormatEditorSamples}});var _samples=__webpack_require__(5985)},424:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ListComponent=void 0;var _lodash=_interopRequireDefault(__webpack_require__(1));var _shared_component=__webpack_require__(293);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _get(target,property,receiver){if(typeof Reflect!=="undefined"&&Reflect.get){_get=Reflect.get}else{_get=function _get(target,property,receiver){var base=_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(receiver)}return desc.value}}return _get(target,property,receiver||target)}function _superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=_getPrototypeOf(object);if(object===null)break}return object}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var ListComponent=function(_SharedComponent){_inherits(ListComponent,_SharedComponent);function ListComponent(name,list,parent,multiValued,allowNonValidValues){var _this;_classCallCheck(this,ListComponent);_this=_possibleConstructorReturn(this,_getPrototypeOf(ListComponent).call(this,name,parent));_this.listGenerator=Array.isArray(list)?function(){return list}:list;_this.multiValued=_lodash["default"].isUndefined(multiValued)?true:multiValued;_this.allowNonValidValues=_lodash["default"].isUndefined(allowNonValidValues)?false:allowNonValidValues;return _this}_createClass(ListComponent,[{key:"getTerms",value:function getTerms(context,editor){if(!this.multiValued&&context.otherTokenValues){return[]}var alreadySet=context.otherTokenValues||[];if(_lodash["default"].isString(alreadySet)){alreadySet=[alreadySet]}var ret=_lodash["default"].difference(this.listGenerator(context,editor),alreadySet);if(this.getDefaultTermMeta()){var meta=this.getDefaultTermMeta();ret=_lodash["default"].map(ret,function(term){if(_lodash["default"].isString(term)){term={name:term}}return _lodash["default"].defaults(term,{meta:meta})})}return ret}},{key:"validateTokens",value:function validateTokens(tokens){if(!this.multiValued&&tokens.length>1){return false}var list=this.listGenerator();var notFound=_lodash["default"].any(tokens,function(token){return list.indexOf(token)===-1});if(notFound){return false}return true}},{key:"getContextKey",value:function getContextKey(){return this.name}},{key:"getDefaultTermMeta",value:function getDefaultTermMeta(){return this.name}},{key:"match",value:function match(token,context,editor){if(!Array.isArray(token)){token=[token]}if(!this.allowNonValidValues&&!this.validateTokens(token,context,editor)){return null}var result=_get(_getPrototypeOf(ListComponent.prototype),"match",this).call(this,token,context,editor);result.context_values=result.context_values||{};result.context_values[this.getContextKey()]=token;return result}}]);return ListComponent}(_shared_component.SharedComponent);exports.ListComponent=ListComponent},425:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _types=__webpack_require__(6227);Object.keys(_types).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _types[key]}})});var _dashboard=__webpack_require__(6228);Object.keys(_dashboard).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _dashboard[key]}})})},426:function(module,exports,__webpack_require__){module.exports=__webpack_require__(18)(708)},50:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createSelectHandler=void 0;var _lodash=_interopRequireDefault(__webpack_require__(1));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var createSelectHandler=function createSelectHandler(handleChange){return function(name){return function(selectedOptions){if(_lodash["default"].isFunction(handleChange)){return handleChange(_defineProperty({},name,_lodash["default"].get(selectedOptions,"[0].value",null)))}}}};exports.createSelectHandler=createSelectHandler},502:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isGroupByFieldsEnabled=exports.isFieldEnabled=exports.isMetricEnabled=exports.DEFAULT_UI_RESTRICTION=void 0;var _lodash=__webpack_require__(1);var DEFAULT_UI_RESTRICTION={"*":true};exports.DEFAULT_UI_RESTRICTION=DEFAULT_UI_RESTRICTION;var RESTRICTION_TYPES={WHITE_LISTED_GROUP_BY_FIELDS:"whiteListedGroupByFields",WHITE_LISTER_METRICS:"whiteListedMetrics"};var checkUIRestrictions=function checkUIRestrictions(key){var restrictions=arguments.length>1&&arguments[1]!==undefined?arguments[1]:DEFAULT_UI_RESTRICTION;var type=arguments.length>2?arguments[2]:undefined;var isAllEnabled=(0,_lodash.get)(restrictions,"".concat(type,".*"),true);return isAllEnabled||(0,_lodash.get)(restrictions,type,{})[key]};var isMetricEnabled=function isMetricEnabled(key,restrictions){return checkUIRestrictions(key,restrictions,RESTRICTION_TYPES.WHITE_LISTER_METRICS)};exports.isMetricEnabled=isMetricEnabled;var isFieldEnabled=function isFieldEnabled(field,metricType){var restrictions=arguments.length>2&&arguments[2]!==undefined?arguments[2]:DEFAULT_UI_RESTRICTION;if(isMetricEnabled(metricType,restrictions)){return checkUIRestrictions(field,restrictions[RESTRICTION_TYPES.WHITE_LISTER_METRICS],metricType)}return false};exports.isFieldEnabled=isFieldEnabled;var isGroupByFieldsEnabled=function isGroupByFieldsEnabled(key,restrictions){return checkUIRestrictions(key,restrictions,RESTRICTION_TYPES.WHITE_LISTED_GROUP_BY_FIELDS)};exports.isGroupByFieldsEnabled=isGroupByFieldsEnabled},503:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Split=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(17));var _react=_interopRequireWildcard(__webpack_require__(0));var _uuid=_interopRequireDefault(__webpack_require__(105));var _lodash=__webpack_require__(1);var _terms=__webpack_require__(5812);var _filter=__webpack_require__(5814);var _filters=__webpack_require__(5815);var _everything=__webpack_require__(5817);var _unsupported_split=__webpack_require__(5818);var _check_ui_restrictions=__webpack_require__(502);var _get_default_query_language=__webpack_require__(164);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var SPLIT_MODES={FILTERS:"filters",FILTER:"filter",TERMS:"terms",EVERYTHING:"everything"};var Split=function(_Component){_inherits(Split,_Component);function Split(){_classCallCheck(this,Split);return _possibleConstructorReturn(this,_getPrototypeOf(Split).apply(this,arguments))}_createClass(Split,[{key:"componentWillReceiveProps",value:function componentWillReceiveProps(nextProps){var model=nextProps.model;if(model.split_mode==="filters"&&!model.split_filters){this.props.onChange({split_filters:[{color:model.color,id:_uuid["default"].v1(),filter:{query:"",language:(0,_get_default_query_language.getDefaultQueryLanguage)()}}]})}}},{key:"getComponent",value:function getComponent(splitMode,uiRestrictions){if(!(0,_check_ui_restrictions.isGroupByFieldsEnabled)(splitMode,uiRestrictions)){return _unsupported_split.SplitUnsupported}switch(splitMode){case SPLIT_MODES.TERMS:return _terms.SplitByTerms;case SPLIT_MODES.FILTER:return _filter.SplitByFilter;case SPLIT_MODES.FILTERS:return _filters.SplitByFilters;default:return _everything.SplitByEverything}}},{key:"render",value:function render(){var _this$props=this.props,model=_this$props.model,panel=_this$props.panel,uiRestrictions=_this$props.uiRestrictions;var indexPattern=model.override_index_pattern&&model.series_index_pattern||panel.index_pattern;var splitMode=(0,_lodash.get)(this.props,"model.split_mode",SPLIT_MODES.EVERYTHING);var Component=this.getComponent(splitMode,uiRestrictions);return _react["default"].createElement(Component,{model:model,indexPattern:indexPattern,fields:this.props.fields,onChange:this.props.onChange,uiRestrictions:uiRestrictions})}}]);return Split}(_react.Component);exports.Split=Split;Split.propTypes={fields:_propTypes["default"].object,model:_propTypes["default"].object,onChange:_propTypes["default"].func,panel:_propTypes["default"].object}},504:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.GroupBySelect=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(17));var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(2);var _react2=__webpack_require__(10);var _check_ui_restrictions=__webpack_require__(502);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function GroupBySelectUi(props){var intl=props.intl,uiRestrictions=props.uiRestrictions;var modeOptions=[{label:intl.formatMessage({id:"tsvb.splits.groupBySelect.modeOptions.everythingLabel",defaultMessage:"Everything"}),value:"everything"},{label:intl.formatMessage({id:"tsvb.splits.groupBySelect.modeOptions.filterLabel",defaultMessage:"Filter"}),value:"filter"},{label:intl.formatMessage({id:"tsvb.splits.groupBySelect.modeOptions.filtersLabel",defaultMessage:"Filters"}),value:"filters"},{label:intl.formatMessage({id:"tsvb.splits.groupBySelect.modeOptions.termsLabel",defaultMessage:"Terms"}),value:"terms"}].map(function(field){return _objectSpread({},field,{disabled:!(0,_check_ui_restrictions.isGroupByFieldsEnabled)(field.value,uiRestrictions)})});var selectedValue=props.value||"everything";var selectedOption=modeOptions.find(function(option){return selectedValue===option.value});return _react["default"].createElement(_eui.EuiComboBox,{id:props.id,isClearable:false,options:modeOptions,selectedOptions:[selectedOption],onChange:props.onChange,singleSelection:{asPlainText:true}})}GroupBySelectUi.propTypes={onChange:_propTypes["default"].func,value:_propTypes["default"].string,uiRestrictions:_propTypes["default"].object};var GroupBySelect=(0,_react2.injectI18n)(GroupBySelectUi);exports.GroupBySelect=GroupBySelect},505:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.truncatedColorMaps=void 0;var _colormaps=__webpack_require__(311);function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var truncatedColorMaps={};exports.truncatedColorMaps=truncatedColorMaps;var colormaps=_colormaps.vislibColorMaps;for(var key in colormaps){if(colormaps.hasOwnProperty(key)){truncatedColorMaps[key]=_objectSpread({},colormaps[key],{value:colormaps[key].value.slice(Math.floor(colormaps[key].value.length/4))})}}},506:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getTripleQuotes=getTripleQuotes;exports.getAutocomplete=getAutocomplete;exports.getPolling=getPolling;exports.applyCurrentSettings=applyCurrentSettings;exports.getCurrentSettings=getCurrentSettings;exports.updateSettings=updateSettings;var _input=_interopRequireDefault(__webpack_require__(2023));var _output=_interopRequireDefault(__webpack_require__(2026));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var storage=__webpack_require__(507);function getFontSize(){return storage.get("font_size",14)}function setFontSize(size){storage.set("font_size",size);applyCurrentSettings();return true}function getWrapMode(){return storage.get("wrap_mode",true)}function setWrapMode(mode){storage.set("wrap_mode",mode);applyCurrentSettings();return true}function setTripleQuotes(tripleQuotes){storage.set("triple_quotes",tripleQuotes);return true}function getTripleQuotes(){return storage.get("triple_quotes",true)}function getAutocomplete(){return storage.get("autocomplete_settings",{fields:true,indices:true,templates:true})}function setAutocomplete(settings){storage.set("autocomplete_settings",settings);return true}function getPolling(){return storage.get("console_polling",true)}function setPolling(polling){storage.set("console_polling",polling);applyCurrentSettings();return true}function applyCurrentSettings(editor){if(typeof editor==="undefined"){applyCurrentSettings((0,_input["default"])());applyCurrentSettings((0,_output["default"])())}if(editor){editor.getSession().setUseWrapMode(getWrapMode());editor.$el.css("font-size",getFontSize()+"px")}}function getCurrentSettings(){return{autocomplete:getAutocomplete(),wrapMode:getWrapMode(),tripleQuotes:getTripleQuotes(),fontSize:parseFloat(getFontSize()),polling:Boolean(getPolling())}}function updateSettings(_ref){var fontSize=_ref.fontSize,wrapMode=_ref.wrapMode,tripleQuotes=_ref.tripleQuotes,autocomplete=_ref.autocomplete,polling=_ref.polling;setFontSize(fontSize);setWrapMode(wrapMode);setTripleQuotes(tripleQuotes);setAutocomplete(autocomplete);setPolling(polling);(0,_input["default"])().focus();return getCurrentSettings()}},507:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=void 0;function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var _require=__webpack_require__(1),transform=_require.transform,_keys=_require.keys,startsWith=_require.startsWith;var Storage=function(){function Storage(engine,prefix){_classCallCheck(this,Storage);this.engine=engine;this.prefix=prefix}_createClass(Storage,[{key:"encode",value:function encode(val){return JSON.stringify(val)}},{key:"decode",value:function decode(val){if(typeof val==="string"){return JSON.parse(val)}}},{key:"encodeKey",value:function encodeKey(key){return"".concat(this.prefix).concat(key)}},{key:"decodeKey",value:function decodeKey(key){if(startsWith(key,this.prefix)){return"".concat(key.slice(this.prefix.length))}}},{key:"set",value:function set(key,val){this.engine.setItem(this.encodeKey(key),this.encode(val));return val}},{key:"has",value:function has(key){return this.engine.getItem(this.encodeKey(key))!=null}},{key:"get",value:function get(key,_default){if(this.has(key)){return this.decode(this.engine.getItem(this.encodeKey(key)))}else{return _default}}},{key:"delete",value:function _delete(key){return this.engine.removeItem(this.encodeKey(key))}},{key:"keys",value:function keys(){var _this=this;return transform(_keys(this.engine),function(ours,key){var ourKey=_this.decodeKey(key);if(ourKey!=null)ours.push(ourKey)})}}]);return Storage}();var instance=new Storage(window.localStorage,"sense:");var _default2=instance;exports["default"]=_default2;module.exports=exports.default},5677:function(module,exports,__webpack_require__){"use strict";__webpack_require__(165);var _symbolObservable=_interopRequireDefault(__webpack_require__(166));__webpack_require__(167);__webpack_require__(168);__webpack_require__(169);__webpack_require__(170);__webpack_require__(171);var _i18n=__webpack_require__(5);var _kibanaCore__=__webpack_require__(140);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}__webpack_require__.nc=window.__kbnNonce__;var injectedMetadata=JSON.parse(document.querySelector("kbn-injected-metadata").getAttribute("data"));_i18n.i18n.load(injectedMetadata.i18n.translationsUrl)["catch"](function(e){return e}).then(function(i18nError){var coreSystem=new _kibanaCore__.CoreSystem({injectedMetadata:injectedMetadata,rootDomElement:document.body,browserSupportsCsp:!window.__kbnCspNotEnforced__,requireLegacyFiles:function requireLegacyFiles(){__webpack_require__(5678)}});coreSystem.setup().then(function(coreSetup){if(i18nError){coreSetup.fatalErrors.add(i18nError)}return coreSystem.start()})})},5678:function(module,exports,__webpack_require__){"use strict";var _chrome=_interopRequireDefault(__webpack_require__(19));var _routes=_interopRequireDefault(__webpack_require__(34));var _modules=__webpack_require__(12);__webpack_require__(5679);__webpack_require__(5681);__webpack_require__(5916);__webpack_require__(5918);__webpack_require__(5920);__webpack_require__(5952);__webpack_require__(2013);__webpack_require__(2017);__webpack_require__(5979);__webpack_require__(6012);__webpack_require__(6013);__webpack_require__(6014);__webpack_require__(6015);__webpack_require__(6016);__webpack_require__(6062);__webpack_require__(6069);__webpack_require__(6107);__webpack_require__(6120);__webpack_require__(6122);__webpack_require__(6123);__webpack_require__(2039);__webpack_require__(2040);__webpack_require__(6137);__webpack_require__(6161);__webpack_require__(6200);__webpack_require__(6217);__webpack_require__(6277);__webpack_require__(6443);__webpack_require__(6446);__webpack_require__(6449);__webpack_require__(809);__webpack_require__(6469);__webpack_require__(567);__webpack_require__(2041);var _notify=__webpack_require__(24);__webpack_require__(248);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_routes["default"].enable();_routes["default"].otherwise({redirectTo:"/".concat(_chrome["default"].getInjected("kbnDefaultAppId","discover"))});_modules.uiModules.get("kibana").run(_notify.showAppRedirectNotification)},5679:function(module,exports,__webpack_require__){__webpack_require__(5680)},5680:function(module,exports,__webpack_require__){"use strict";var _feature_catalogue=__webpack_require__(128);var _i18n=__webpack_require__(5);_feature_catalogue.FeatureCatalogueRegistryProvider.register(function(){return{id:"timelion",title:"Timelion",description:_i18n.i18n.translate("timelion.registerFeatureDescription",{defaultMessage:"Use an expression language to analyze time series data and visualize the results."}),icon:"timelionApp",path:"/app/timelion",showOnHomePage:false,category:_feature_catalogue.FeatureCatalogueCategory.DATA}})},5681:function(module,exports,__webpack_require__){__webpack_require__(5682);__webpack_require__(5702);__webpack_require__(5713);__webpack_require__(5718);__webpack_require__(5839);__webpack_require__(5854);__webpack_require__(5869);__webpack_require__(5881);__webpack_require__(2004);__webpack_require__(5903)},5682:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=void 0;var _vis_factory=__webpack_require__(97);var _vis_types=__webpack_require__(85);var _vis_controller=__webpack_require__(5683);var _controls_tab=__webpack_require__(5697);var _options_tab=__webpack_require__(5701);var _default_feedback_message=__webpack_require__(571);var _update_status=__webpack_require__(313);var _i18n=__webpack_require__(5);function InputControlVisProvider(Private){var VisFactory=Private(_vis_factory.VisFactoryProvider);return VisFactory.createBaseVisualization({name:"input_control_vis",title:_i18n.i18n.translate("inputControl.register.controlsTitle",{defaultMessage:"Controls"}),icon:"visControls",description:_i18n.i18n.translate("inputControl.register.controlsDescription",{defaultMessage:"Create interactive controls for easy dashboard manipulation."}),stage:"experimental",requiresUpdateStatus:[_update_status.Status.PARAMS,_update_status.Status.TIME],feedbackMessage:_default_feedback_message.defaultFeedbackMessage,visualization:_vis_controller.VisController,visConfig:{defaults:{controls:[],updateFiltersOnChange:false,useTimeFilter:false,pinFilters:false}},editor:"default",editorConfig:{optionTabs:[{name:"controls",title:_i18n.i18n.translate("inputControl.register.tabs.controlsTitle",{defaultMessage:"Controls"}),editor:_controls_tab.ControlsTab},{name:"options",title:_i18n.i18n.translate("inputControl.register.tabs.optionsTitle",{defaultMessage:"Options"}),editor:_options_tab.OptionsTab}]},requestHandler:"none",responseHandler:"none"})}_vis_types.VisTypesRegistryProvider.register(InputControlVisProvider);var _default=InputControlVisProvider;exports["default"]=_default;module.exports=exports.default},5683:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VisController=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _reactDom=__webpack_require__(27);var _i18n=__webpack_require__(28);var _input_control_vis=__webpack_require__(5684);var _control_factory=__webpack_require__(5690);var _lineage=__webpack_require__(1973);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var VisController=function(){function VisController(el,vis){var _this=this;_classCallCheck(this,VisController);_defineProperty(this,"drawVis",function(){(0,_reactDom.render)(_react["default"].createElement(_i18n.I18nContext,null,_react["default"].createElement(_input_control_vis.InputControlVis,{updateFiltersOnChange:_this.visParams.updateFiltersOnChange,controls:_this.controls,stageFilter:_this.stageFilter,submitFilters:_this.submitFilters,resetControls:_this.updateControlsFromKbn,clearControls:_this.clearControls,hasChanges:_this.hasChanges,hasValues:_this.hasValues,refreshControl:_this.refreshControl})),_this.el)});_defineProperty(this,"stageFilter",function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(controlIndex,newValue){return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this.controls[controlIndex].set(newValue);if(!_this.visParams.updateFiltersOnChange){_context.next=5;break}_this.submitFilters();_context.next=8;break;case 5:_context.next=7;return _this.updateNestedControls();case 7:_this.drawVis();case 8:case"end":return _context.stop()}}},_callee)}));return function(_x,_x2){return _ref.apply(this,arguments)}}());_defineProperty(this,"submitFilters",function(){_this.controls.map(function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(control){return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(control.hasAncestors()&&control.hasUnsetAncestor()){control.filterManager.findFilters().forEach(function(existingFilter){_this.vis.API.queryFilter.removeFilter(existingFilter)})}case 1:case"end":return _context2.stop()}}},_callee2)}));return function(_x3){return _ref2.apply(this,arguments)}}());var stagedControls=_this.controls.filter(function(control){return control.hasChanged()});var newFilters=stagedControls.filter(function(control){return control.hasKbnFilter()}).map(function(control){return control.getKbnFilter()});stagedControls.forEach(function(control){control.filterManager.findFilters().forEach(function(existingFilter){_this.vis.API.queryFilter.removeFilter(existingFilter)})});_this.vis.API.queryFilter.addFilters(newFilters,_this.visParams.pinFilters)});_defineProperty(this,"clearControls",_asyncToGenerator(regeneratorRuntime.mark(function _callee3(){return regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_this.controls.forEach(function(control){control.clear()});_context3.next=3;return _this.updateNestedControls();case 3:_this.drawVis();case 4:case"end":return _context3.stop()}}},_callee3)})));_defineProperty(this,"updateControlsFromKbn",_asyncToGenerator(regeneratorRuntime.mark(function _callee4(){return regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_this.controls.forEach(function(control){control.reset()});_context4.next=3;return _this.updateNestedControls();case 3:_this.drawVis();case 4:case"end":return _context4.stop()}}},_callee4)})));_defineProperty(this,"hasChanges",function(){return _this.controls.map(function(control){return control.hasChanged()}).reduce(function(a,b){return a||b})});_defineProperty(this,"hasValues",function(){return _this.controls.map(function(control){return control.hasValue()}).reduce(function(a,b){return a||b})});_defineProperty(this,"refreshControl",function(){var _ref5=_asyncToGenerator(regeneratorRuntime.mark(function _callee5(controlIndex,query){return regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return _this.controls[controlIndex].fetch(query);case 2:_this.drawVis();case 3:case"end":return _context5.stop()}}},_callee5)}));return function(_x4,_x5){return _ref5.apply(this,arguments)}}());this.el=el;this.vis=vis;this.controls=[];this.queryBarUpdateHandler=this.updateControlsFromKbn.bind(this);this.updateSubsciption=this.vis.API.queryFilter.getUpdates$().subscribe(this.queryBarUpdateHandler)}_createClass(VisController,[{key:"render",value:function(){var _render=_asyncToGenerator(regeneratorRuntime.mark(function _callee6(visData,visParams,status){return regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:if(!(status.params||visParams.useTimeFilter&&status.time)){_context6.next=8;break}this.visParams=visParams;this.controls=[];_context6.next=5;return this.initControls();case 5:this.controls=_context6.sent;this.drawVis();return _context6.abrupt("return");case 8:return _context6.abrupt("return");case 9:case"end":return _context6.stop()}}},_callee6,this)}));function render(_x6,_x7,_x8){return _render.apply(this,arguments)}return render}()},{key:"destroy",value:function destroy(){this.updateSubsciption.unsubscribe();(0,_reactDom.unmountComponentAtNode)(this.el)}},{key:"initControls",value:function(){var _initControls=_asyncToGenerator(regeneratorRuntime.mark(function _callee7(){var _this2=this;var controlParamsList,controlFactoryPromises,controls,getControl,controlInitPromises;return regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:controlParamsList=this.visParams.controls.filter(function(controlParams){return controlParams.indexPattern&&controlParams.fieldName});controlFactoryPromises=controlParamsList.map(function(controlParams){var factory=(0,_control_factory.controlFactory)(controlParams);return factory(controlParams,_this2.vis.API,_this2.visParams.useTimeFilter)});_context7.next=4;return Promise.all(controlFactoryPromises);case 4:controls=_context7.sent;getControl=function getControl(id){return controls.find(function(control){return id===control.id})};controlInitPromises=[];(0,_lineage.getLineageMap)(controlParamsList).forEach(function(lineage,controlId){lineage.shift();var ancestors=[];lineage.forEach(function(ancestorId){ancestors.push(getControl(ancestorId))});var control=getControl(controlId);control.setAncestors(ancestors);controlInitPromises.push(control.fetch())});_context7.next=10;return Promise.all(controlInitPromises);case 10:return _context7.abrupt("return",controls);case 11:case"end":return _context7.stop()}}},_callee7,this)}));function initControls(){return _initControls.apply(this,arguments)}return initControls}()},{key:"updateNestedControls",value:function(){var _updateNestedControls=_asyncToGenerator(regeneratorRuntime.mark(function _callee9(){var fetchPromises;return regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:fetchPromises=this.controls.map(function(){var _ref6=_asyncToGenerator(regeneratorRuntime.mark(function _callee8(control){return regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:if(!control.hasAncestors()){_context8.next=3;break}_context8.next=3;return control.fetch();case 3:case"end":return _context8.stop()}}},_callee8)}));return function(_x9){return _ref6.apply(this,arguments)}}());_context9.next=3;return Promise.all(fetchPromises);case 3:return _context9.abrupt("return",_context9.sent);case 4:case"end":return _context9.stop()}}},_callee9,this)}));function updateNestedControls(){return _updateNestedControls.apply(this,arguments)}return updateNestedControls}()}]);return VisController}();exports.VisController=VisController},5684:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.InputControlVis=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(17));var _react=_interopRequireWildcard(__webpack_require__(0));var _range_control=__webpack_require__(5685);var _list_control=__webpack_require__(5689);var _eui=__webpack_require__(2);var _react2=__webpack_require__(10);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var InputControlVis=function(_Component){_inherits(InputControlVis,_Component);function InputControlVis(props){var _this;_classCallCheck(this,InputControlVis);_this=_possibleConstructorReturn(this,_getPrototypeOf(InputControlVis).call(this,props));_this.handleSubmit=_this.handleSubmit.bind(_assertThisInitialized(_this));_this.handleReset=_this.handleReset.bind(_assertThisInitialized(_this));_this.handleClearAll=_this.handleClearAll.bind(_assertThisInitialized(_this));return _this}_createClass(InputControlVis,[{key:"handleSubmit",value:function handleSubmit(){this.props.submitFilters()}},{key:"handleReset",value:function handleReset(){this.props.resetControls()}},{key:"handleClearAll",value:function handleClearAll(){this.props.clearControls()}},{key:"renderControls",value:function renderControls(){var _this2=this;return this.props.controls.map(function(control,index){var controlComponent=null;switch(control.type){case"list":controlComponent=_react["default"].createElement(_list_control.ListControl,{id:control.id,label:control.label,options:control.selectOptions,selectedOptions:control.value,formatOptionLabel:control.format,disableMsg:control.isEnabled()?null:control.disabledReason,multiselect:control.options.multiselect,partialResults:control.partialResults,dynamicOptions:control.options.dynamicOptions,controlIndex:index,stageFilter:_this2.props.stageFilter,fetchOptions:function fetchOptions(query){_this2.props.refreshControl(index,query)}});break;case"range":controlComponent=_react["default"].createElement(_range_control.RangeControl,{control:control,controlIndex:index,stageFilter:_this2.props.stageFilter});break;default:throw new Error("Unhandled control type ".concat(control.type))}return _react["default"].createElement(_eui.EuiFlexItem,{key:control.id,style:{minWidth:"250px"},"data-test-subj":"inputControlItem"},controlComponent)})}},{key:"renderStagingButtons",value:function renderStagingButtons(){return _react["default"].createElement(_eui.EuiFlexGroup,{wrap:true},_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiButton,{fill:true,onClick:this.handleSubmit,disabled:!this.props.hasChanges(),"data-test-subj":"inputControlSubmitBtn"},_react["default"].createElement(_react2.FormattedMessage,{id:"inputControl.vis.inputControlVis.applyChangesButtonLabel",defaultMessage:"Apply changes"}))),_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiButtonEmpty,{onClick:this.handleReset,disabled:!this.props.hasChanges(),"data-test-subj":"inputControlCancelBtn"},_react["default"].createElement(_react2.FormattedMessage,{id:"inputControl.vis.inputControlVis.cancelChangesButtonLabel",defaultMessage:"Cancel changes"}))),_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiButtonEmpty,{onClick:this.handleClearAll,disabled:!this.props.hasValues(),"data-test-subj":"inputControlClearBtn"},_react["default"].createElement(_react2.FormattedMessage,{id:"inputControl.vis.inputControlVis.clearFormButtonLabel",defaultMessage:"Clear form"}))))}},{key:"render",value:function render(){var stagingButtons;if(this.props.controls.length>0&&!this.props.updateFiltersOnChange){stagingButtons=this.renderStagingButtons()}return _react["default"].createElement("div",{className:"icvContainer"},_react["default"].createElement(_eui.EuiFlexGroup,{wrap:true},this.renderControls()),stagingButtons)}}]);return InputControlVis}(_react.Component);exports.InputControlVis=InputControlVis;InputControlVis.propTypes={stageFilter:_propTypes["default"].func.isRequired,submitFilters:_propTypes["default"].func.isRequired,resetControls:_propTypes["default"].func.isRequired,clearControls:_propTypes["default"].func.isRequired,controls:_propTypes["default"].array.isRequired,updateFiltersOnChange:_propTypes["default"].bool,hasChanges:_propTypes["default"].func.isRequired,hasValues:_propTypes["default"].func.isRequired,refreshControl:_propTypes["default"].func.isRequired}},5685:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ceilWithPrecision=ceilWithPrecision;exports.floorWithPrecision=floorWithPrecision;exports.RangeControl=void 0;var _lodash=_interopRequireDefault(__webpack_require__(1));var _propTypes=_interopRequireDefault(__webpack_require__(17));var _react=_interopRequireWildcard(__webpack_require__(0));var _form_row=__webpack_require__(1969);var _validated_range=__webpack_require__(5686);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function roundWithPrecision(value,decimalPlaces,roundFunction){if(decimalPlaces<=0){return roundFunction(value)}var results=value;results=results*Math.pow(10,decimalPlaces);results=roundFunction(results);results=results/Math.pow(10,decimalPlaces);return results}function ceilWithPrecision(value,decimalPlaces){return roundWithPrecision(value,decimalPlaces,Math.ceil)}function floorWithPrecision(value,decimalPlaces){return roundWithPrecision(value,decimalPlaces,Math.floor)}var RangeControl=function(_Component){_inherits(RangeControl,_Component);function RangeControl(){var _getPrototypeOf2;var _this;_classCallCheck(this,RangeControl);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(RangeControl)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"state",{});_defineProperty(_assertThisInitialized(_this),"onChangeComplete",_lodash["default"].debounce(function(value){var controlValue={min:value[0],max:value[1]};_this.props.stageFilter(_this.props.controlIndex,controlValue)},200));return _this}_createClass(RangeControl,[{key:"renderControl",value:function renderControl(){if(!this.props.control.isEnabled()){return _react["default"].createElement(_validated_range.ValidatedDualRange,{disabled:true,showInput:true})}var decimalPlaces=_lodash["default"].get(this.props,"control.options.decimalPlaces",0);var min=floorWithPrecision(this.props.control.min,decimalPlaces);var max=ceilWithPrecision(this.props.control.max,decimalPlaces);var ticks=[{value:min,label:min},{value:max,label:max}];return _react["default"].createElement(_validated_range.ValidatedDualRange,{id:this.props.control.id,min:min,max:max,value:this.state.value,onChange:this.onChangeComplete,showInput:true,showRange:true,showTicks:true,ticks:ticks})}},{key:"render",value:function render(){return _react["default"].createElement(_form_row.FormRow,{id:this.props.control.id,label:this.props.control.label,controlIndex:this.props.controlIndex,disableMsg:this.props.control.isEnabled()?null:this.props.control.disabledReason},this.renderControl())}}],[{key:"getDerivedStateFromProps",value:function getDerivedStateFromProps(nextProps,prevState){var nextValue=nextProps.control.hasValue()?[nextProps.control.value.min,nextProps.control.value.max]:["",""];if(nextProps.control.hasValue()&&nextProps.control.value.min==null){nextValue[0]=""}if(nextProps.control.hasValue()&&nextProps.control.value.max==null){nextValue[1]=""}if(nextValue!==prevState.prevValue){return{value:nextValue,prevValue:nextValue}}return null}}]);return RangeControl}(_react.Component);exports.RangeControl=RangeControl;RangeControl.propTypes={control:_propTypes["default"].object.isRequired,controlIndex:_propTypes["default"].number.isRequired,stageFilter:_propTypes["default"].func.isRequired}},5686:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"ValidatedDualRange",{enumerable:true,get:function get(){return _validated_dual_range.ValidatedDualRange}});var _validated_dual_range=__webpack_require__(5687)},5687:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ValidatedDualRange=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(17));var _is_range_valid=__webpack_require__(5688);var _eui=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ValidatedDualRange=function(_Component){_inherits(ValidatedDualRange,_Component);function ValidatedDualRange(){var _getPrototypeOf2;var _this;_classCallCheck(this,ValidatedDualRange);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(ValidatedDualRange)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"state",{});_defineProperty(_assertThisInitialized(_this),"_onChange",function(value){var _isRangeValid=(0,_is_range_valid.isRangeValid)(value,_this.props.min,_this.props.max,_this.props.allowEmptyRange),isValid=_isRangeValid.isValid,errorMessage=_isRangeValid.errorMessage;_this.setState({value:value,isValid:isValid,errorMessage:errorMessage});if(isValid){_this.props.onChange(value)}});return _this}_createClass(ValidatedDualRange,[{key:"render",value:function render(){var _this$props=this.props,value=_this$props.value,onChange=_this$props.onChange,allowEmptyRange=_this$props.allowEmptyRange,rest=_objectWithoutProperties(_this$props,["value","onChange","allowEmptyRange"]);return _react["default"].createElement(_eui.EuiFormRow,{isInvalid:!this.state.isValid,error:this.state.errorMessage?[this.state.errorMessage]:[]},_react["default"].createElement(_eui.EuiDualRange,_extends({value:this.state.value,onChange:this._onChange},rest)))}}],[{key:"getDerivedStateFromProps",value:function getDerivedStateFromProps(nextProps,prevState){if(nextProps.value!==prevState.prevValue){var _isRangeValid2=(0,_is_range_valid.isRangeValid)(nextProps.value,nextProps.min,nextProps.max,nextProps.allowEmptyRange),isValid=_isRangeValid2.isValid,errorMessage=_isRangeValid2.errorMessage;return{value:nextProps.value,prevValue:nextProps.value,isValid:isValid,errorMessage:errorMessage}}return null}}]);return ValidatedDualRange}(_react.Component);exports.ValidatedDualRange=ValidatedDualRange;ValidatedDualRange.propTypes={allowEmptyRange:_propTypes["default"].bool};ValidatedDualRange.defaultProps={allowEmptyRange:true}},5688:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isRangeValid=isRangeValid;var _i18n=__webpack_require__(5);var LOWER_VALUE_INDEX=0;var UPPER_VALUE_INDEX=1;function isRangeValid(value,min,max,allowEmptyRange){allowEmptyRange=typeof allowEmptyRange==="boolean"?allowEmptyRange:true;var lowerValue=isNaN(value[LOWER_VALUE_INDEX])?"":value[LOWER_VALUE_INDEX];var upperValue=isNaN(value[UPPER_VALUE_INDEX])?"":value[UPPER_VALUE_INDEX];var isLowerValueValid=lowerValue.toString()!=="";var isUpperValueValid=upperValue.toString()!=="";if(isLowerValueValid){lowerValue=parseFloat(lowerValue)}if(isUpperValueValid){upperValue=parseFloat(upperValue)}var isValid=true;var errorMessage="";var bothMustBeSetErrorMessage=_i18n.i18n.translate("common.ui.dualRangeControl.mustSetBothErrorMessage",{defaultMessage:"Both lower and upper values must be set"});if(!allowEmptyRange&&(!isLowerValueValid||!isUpperValueValid)){isValid=false;errorMessage=bothMustBeSetErrorMessage}else if(!isLowerValueValid&&isUpperValueValid||isLowerValueValid&&!isUpperValueValid){isValid=false;errorMessage=bothMustBeSetErrorMessage}else if(isLowerValueValid&&lowerValue<min||isUpperValueValid&&upperValue>max){isValid=false;errorMessage=_i18n.i18n.translate("common.ui.dualRangeControl.outsideOfRangeErrorMessage",{defaultMessage:"Values must be on or between {min} and {max}",values:{min:min,max:max}})}else if(isLowerValueValid&&isUpperValueValid&&upperValue<lowerValue){isValid=false;errorMessage=_i18n.i18n.translate("common.ui.dualRangeControl.upperValidErrorMessage",{defaultMessage:"Upper value must be greater or equal to lower value"})}return{isValid:isValid,errorMessage:errorMessage}}},5689:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ListControl=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(17));var _react=_interopRequireWildcard(__webpack_require__(0));var _lodash=_interopRequireDefault(__webpack_require__(1));var _form_row=__webpack_require__(1969);var _react2=__webpack_require__(10);var _eui=__webpack_require__(2);var _i18n=__webpack_require__(5);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ListControlUi=function(_Component){_inherits(ListControlUi,_Component);function ListControlUi(){var _getPrototypeOf2;var _this;_classCallCheck(this,ListControlUi);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(ListControlUi)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"state",{isLoading:false});_defineProperty(_assertThisInitialized(_this),"componentDidMount",function(){_this._isMounted=true});_defineProperty(_assertThisInitialized(_this),"componentWillUnmount",function(){_this._isMounted=false});_defineProperty(_assertThisInitialized(_this),"handleOnChange",function(selectedOptions){var selectedValues=selectedOptions.map(function(_ref){var value=_ref.value;return value});_this.props.stageFilter(_this.props.controlIndex,selectedValues)});_defineProperty(_assertThisInitialized(_this),"debouncedFetch",_lodash["default"].debounce(function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark(function _callee(searchValue){return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return _this.props.fetchOptions(searchValue);case 2:if(_this._isMounted){_this.setState({isLoading:false})}case 3:case"end":return _context.stop()}}},_callee)}));return function(_x){return _ref2.apply(this,arguments)}}(),300));_defineProperty(_assertThisInitialized(_this),"onSearchChange",function(searchValue){_this.setState({isLoading:true},_this.debouncedFetch.bind(null,searchValue))});return _this}_createClass(ListControlUi,[{key:"renderControl",value:function renderControl(){var _this2=this;var intl=this.props.intl;if(this.props.disableMsg){return _react["default"].createElement(_eui.EuiFieldText,{placeholder:intl.formatMessage({id:"inputControl.vis.listControl.selectTextPlaceholder",defaultMessage:"Select..."}),disabled:true})}var options=this.props.options.map(function(option){return _defineProperty({label:_this2.props.formatOptionLabel(option).toString(),value:option},"data-test-subj","option_".concat(option.toString().replace(" ","_")))}).sort(function(a,b){return a.label.toLowerCase().localeCompare(b.label.toLowerCase())});var selectedOptions=this.props.selectedOptions.map(function(selectedOption){return{label:_this2.props.formatOptionLabel(selectedOption).toString(),value:selectedOption}});return _react["default"].createElement(_eui.EuiComboBox,{placeholder:intl.formatMessage({id:"inputControl.vis.listControl.selectPlaceholder",defaultMessage:"Select..."}),options:options,isLoading:this.state.isLoading,async:this.props.dynamicOptions,onSearchChange:this.props.dynamicOptions?this.onSearchChange:undefined,selectedOptions:selectedOptions,onChange:this.handleOnChange,singleSelection:!this.props.multiselect,"data-test-subj":"listControlSelect".concat(this.props.controlIndex)})}},{key:"render",value:function render(){var partialResultsWarningMessage=_i18n.i18n.translate("inputControl.vis.listControl.partialResultsWarningMessage",{defaultMessage:"Terms list is incomplete. Adjust the autocomplete settings in kibana.yml for more results."});return _react["default"].createElement(_form_row.FormRow,{id:this.props.id,label:this.props.label,warningMsg:this.props.partialResults?partialResultsWarningMessage:undefined,controlIndex:this.props.controlIndex,disableMsg:this.props.disableMsg},this.renderControl())}}]);return ListControlUi}(_react.Component);ListControlUi.propTypes={id:_propTypes["default"].string.isRequired,label:_propTypes["default"].string.isRequired,selectedOptions:_propTypes["default"].array.isRequired,options:_propTypes["default"].array,formatOptionLabel:_propTypes["default"].func.isRequired,disableMsg:_propTypes["default"].string,multiselect:_propTypes["default"].bool,dynamicOptions:_propTypes["default"].bool,partialResults:_propTypes["default"].bool,controlIndex:_propTypes["default"].number.isRequired,stageFilter:_propTypes["default"].func.isRequired,fetchOptions:_propTypes["default"].func};ListControlUi.defaultProps={dynamicOptions:false,multiselect:true};ListControlUi.defaultProps={selectedOptions:[],options:[]};var ListControl=(0,_react2.injectI18n)(ListControlUi);exports.ListControl=ListControl},5690:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.controlFactory=controlFactory;var _range_control_factory=__webpack_require__(5691);var _list_control_factory=__webpack_require__(5693);function controlFactory(controlParams){var factory=null;switch(controlParams.type){case"range":factory=_range_control_factory.rangeControlFactory;break;case"list":factory=_list_control_factory.listControlFactory;break;default:throw new Error("Unhandled control type ".concat(controlParams.type))}return factory}},5691:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.rangeControlFactory=rangeControlFactory;var _lodash=_interopRequireDefault(__webpack_require__(1));var _control=__webpack_require__(1970);var _range_filter_manager=__webpack_require__(5692);var _create_search_source=__webpack_require__(1972);var _i18n=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var minMaxAgg=function minMaxAgg(field){var aggBody={};if(field.scripted){aggBody.script={source:field.script,lang:field.lang}}else{aggBody.field=field.name}return{maxAgg:{max:aggBody},minAgg:{min:aggBody}}};var RangeControl=function(_Control){_inherits(RangeControl,_Control);function RangeControl(){_classCallCheck(this,RangeControl);return _possibleConstructorReturn(this,_getPrototypeOf(RangeControl).apply(this,arguments))}_createClass(RangeControl,[{key:"fetch",value:function(){var _fetch=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var indexPattern,fieldName,aggs,searchSource,resp,min,max;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:indexPattern=this.filterManager.getIndexPattern();if(indexPattern){_context.next=4;break}this.disable((0,_control.noIndexPatternMsg)(this.controlParams.indexPattern));return _context.abrupt("return");case 4:fieldName=this.filterManager.fieldName;aggs=minMaxAgg(indexPattern.fields.byName[fieldName]);searchSource=(0,_create_search_source.createSearchSource)(this.kbnApi,null,indexPattern,aggs,this.useTimeFilter);_context.prev=7;_context.next=10;return searchSource.fetch();case 10:resp=_context.sent;_context.next=17;break;case 13:_context.prev=13;_context.t0=_context["catch"](7);this.disable(_i18n.i18n.translate("inputControl.rangeControl.unableToFetchTooltip",{defaultMessage:"Unable to fetch range min and max, error: {errorMessage}",values:{errorMessage:_context.t0.message}}));return _context.abrupt("return");case 17:min=_lodash["default"].get(resp,"aggregations.minAgg.value",null);max=_lodash["default"].get(resp,"aggregations.maxAgg.value",null);if(!(min===null||max===null)){_context.next=22;break}this.disable((0,_control.noValuesDisableMsg)(fieldName,indexPattern.title));return _context.abrupt("return");case 22:this.min=min;this.max=max;this.enable=true;case 25:case"end":return _context.stop()}}},_callee,this,[[7,13]])}));function fetch(){return _fetch.apply(this,arguments)}return fetch}()}]);return RangeControl}(_control.Control);function rangeControlFactory(_x,_x2,_x3){return _rangeControlFactory.apply(this,arguments)}function _rangeControlFactory(){_rangeControlFactory=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(controlParams,kbnApi,useTimeFilter){var indexPattern;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return kbnApi.indexPatterns.get(controlParams.indexPattern);case 3:indexPattern=_context2.sent;_context2.next=8;break;case 6:_context2.prev=6;_context2.t0=_context2["catch"](0);case 8:return _context2.abrupt("return",new RangeControl(controlParams,new _range_filter_manager.RangeFilterManager(controlParams.id,controlParams.fieldName,indexPattern,kbnApi.queryFilter),kbnApi,useTimeFilter));case 9:case"end":return _context2.stop()}}},_callee2,null,[[0,6]])}));return _rangeControlFactory.apply(this,arguments)}},5692:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.RangeFilterManager=void 0;var _lodash=_interopRequireDefault(__webpack_require__(1));var _filter_manager=__webpack_require__(1971);var _esQuery=__webpack_require__(51);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function toRange(sliderValue){return{gte:sliderValue.min,lte:sliderValue.max}}function fromRange(range){var sliderValue={};if(_lodash["default"].has(range,"gte")){sliderValue.min=_lodash["default"].get(range,"gte")}if(_lodash["default"].has(range,"gt")){sliderValue.min=_lodash["default"].get(range,"gt")}if(_lodash["default"].has(range,"lte")){sliderValue.max=_lodash["default"].get(range,"lte")}if(_lodash["default"].has(range,"lt")){sliderValue.max=_lodash["default"].get(range,"lt")}return sliderValue}var RangeFilterManager=function(_FilterManager){_inherits(RangeFilterManager,_FilterManager);function RangeFilterManager(){_classCallCheck(this,RangeFilterManager);return _possibleConstructorReturn(this,_getPrototypeOf(RangeFilterManager).apply(this,arguments))}_createClass(RangeFilterManager,[{key:"createFilter",value:function createFilter(value){var newFilter=(0,_esQuery.buildRangeFilter)(this.indexPattern.fields.byName[this.fieldName],toRange(value),this.indexPattern);newFilter.meta.key=this.fieldName;newFilter.meta.controlledBy=this.controlId;return newFilter}},{key:"getValueFromFilterBar",value:function getValueFromFilterBar(){var kbnFilters=this.findFilters();if(kbnFilters.length===0){return}var range;if(_lodash["default"].has(kbnFilters[0],"script")){range=_lodash["default"].get(kbnFilters[0],"script.script.params")}else{range=_lodash["default"].get(kbnFilters[0],["range",this.fieldName])}if(!range){return}return fromRange(range)}}]);return RangeFilterManager}(_filter_manager.FilterManager);exports.RangeFilterManager=RangeFilterManager},5693:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.listControlFactory=listControlFactory;var _lodash=_interopRequireDefault(__webpack_require__(1));var _control=__webpack_require__(1970);var _phrase_filter_manager=__webpack_require__(5694);var _create_search_source=__webpack_require__(1972);var _i18n=__webpack_require__(5);var _chrome=_interopRequireDefault(__webpack_require__(19));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function getEscapedQuery(){var query=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";return query.replace(/[.?+*|{}[\]()"\\#@&<>~]/g,function(match){return"\\".concat(match)})}var termsAgg=function termsAgg(_ref){var field=_ref.field,size=_ref.size,direction=_ref.direction,query=_ref.query;var terms={order:{_count:direction}};if(size){terms.size=size<1?1:size}if(field.scripted){terms.script={source:field.script,lang:field.lang};terms.value_type=field.type==="number"?"float":field.type}else{terms.field=field.name}if(query){terms.include=".*".concat(getEscapedQuery(query),".*")}return{termsAgg:{terms:terms}}};var ListControl=function(_Control){_inherits(ListControl,_Control);function ListControl(){var _getPrototypeOf2;var _this;_classCallCheck(this,ListControl);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(ListControl)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"fetch",function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark(function _callee(query){var indexPattern,ancestorFilters,ancestorValues,fieldName,initialSearchSourceState,aggs,searchSource,resp,selectOptions;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:indexPattern=_this.filterManager.getIndexPattern();if(indexPattern){_context.next=4;break}_this.disable((0,_control.noIndexPatternMsg)(_this.controlParams.indexPattern));return _context.abrupt("return");case 4:if(!_this.hasAncestors()){_context.next=15;break}if(!_this.hasUnsetAncestor()){_context.next=9;break}_this.disable(_i18n.i18n.translate("inputControl.listControl.disableTooltip",{defaultMessage:"Disabled until '{label}' is set.",values:{label:_this.ancestors[0].label}}));_this.lastAncestorValues=undefined;return _context.abrupt("return");case 9:ancestorValues=_this.getAncestorValues();if(!(_lodash["default"].isEqual(ancestorValues,_this.lastAncestorValues)&&_lodash["default"].isEqual(query,_this.lastQuery))){_context.next=12;break}return _context.abrupt("return");case 12:_this.lastAncestorValues=ancestorValues;_this.lastQuery=query;ancestorFilters=_this.getAncestorFilters();case 15:fieldName=_this.filterManager.fieldName;initialSearchSourceState={timeout:"".concat(_chrome["default"].getInjected("autocompleteTimeout"),"ms"),terminate_after:_chrome["default"].getInjected("autocompleteTerminateAfter")};aggs=termsAgg({field:indexPattern.fields.byName[fieldName],size:_this.options.dynamicOptions?null:_lodash["default"].get(_this.options,"size",5),direction:"desc",query:query});searchSource=(0,_create_search_source.createSearchSource)(_this.kbnApi,initialSearchSourceState,indexPattern,aggs,_this.useTimeFilter,ancestorFilters);_this.lastQuery=query;_context.prev=20;_context.next=23;return searchSource.fetch();case 23:resp=_context.sent;_context.next=30;break;case 26:_context.prev=26;_context.t0=_context["catch"](20);_this.disable(_i18n.i18n.translate("inputControl.listControl.unableToFetchTooltip",{defaultMessage:"Unable to fetch terms, error: {errorMessage}",values:{errorMessage:_context.t0.message}}));return _context.abrupt("return");case 30:if(!(query&&_this.lastQuery!==query)){_context.next=32;break}return _context.abrupt("return");case 32:selectOptions=_lodash["default"].get(resp,"aggregations.termsAgg.buckets",[]).map(function(bucket){return bucket.key});if(!(selectOptions.length===0&&!query)){_context.next=36;break}_this.disable((0,_control.noValuesDisableMsg)(fieldName,indexPattern.title));return _context.abrupt("return");case 36:_this.partialResults=resp.terminated_early||resp.timed_out;_this.selectOptions=selectOptions;_this.enable=true;_this.disabledReason="";case 40:case"end":return _context.stop()}}},_callee,null,[[20,26]])}));return function(_x){return _ref2.apply(this,arguments)}}());return _this}_createClass(ListControl,[{key:"hasValue",value:function hasValue(){return typeof this.value!=="undefined"&&this.value.length>0}}]);return ListControl}(_control.Control);function listControlFactory(_x2,_x3,_x4){return _listControlFactory.apply(this,arguments)}function _listControlFactory(){_listControlFactory=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(controlParams,kbnApi,useTimeFilter){var indexPattern,field;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return kbnApi.indexPatterns.get(controlParams.indexPattern);case 3:indexPattern=_context2.sent;field=indexPattern.fields.find(function(field){return field.name===controlParams.fieldName});if(field&&field.type!=="string"){controlParams.options.dynamicOptions=false}_context2.next=10;break;case 8:_context2.prev=8;_context2.t0=_context2["catch"](0);case 10:return _context2.abrupt("return",new ListControl(controlParams,new _phrase_filter_manager.PhraseFilterManager(controlParams.id,controlParams.fieldName,indexPattern,kbnApi.queryFilter),kbnApi,useTimeFilter));case 11:case"end":return _context2.stop()}}},_callee2,null,[[0,8]])}));return _listControlFactory.apply(this,arguments)}},5694:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PhraseFilterManager=void 0;var _lodash=_interopRequireDefault(__webpack_require__(1));var _filter_manager=__webpack_require__(1971);var _esQuery=__webpack_require__(51);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var PhraseFilterManager=function(_FilterManager){_inherits(PhraseFilterManager,_FilterManager);function PhraseFilterManager(controlId,fieldName,indexPattern,queryFilter){_classCallCheck(this,PhraseFilterManager);return _possibleConstructorReturn(this,_getPrototypeOf(PhraseFilterManager).call(this,controlId,fieldName,indexPattern,queryFilter))}_createClass(PhraseFilterManager,[{key:"createFilter",value:function createFilter(phrases){var newFilter;if(phrases.length===1){newFilter=(0,_esQuery.buildPhraseFilter)(this.indexPattern.fields.byName[this.fieldName],phrases[0],this.indexPattern)}else{newFilter=(0,_esQuery.buildPhrasesFilter)(this.indexPattern.fields.byName[this.fieldName],phrases,this.indexPattern)}newFilter.meta.key=this.fieldName;newFilter.meta.controlledBy=this.controlId;return newFilter}},{key:"getValueFromFilterBar",value:function getValueFromFilterBar(){var _this=this;var kbnFilters=this.findFilters();if(kbnFilters.length===0){return}var values=kbnFilters.map(function(kbnFilter){return _this._getValueFromFilter(kbnFilter)}).filter(function(value){return value!=null});if(values.length===0){return}return values.reduce(function(accumulator,currentValue){return accumulator.concat(currentValue)},[])}},{key:"_getValueFromFilter",value:function _getValueFromFilter(kbnFilter){var _this2=this;if(_lodash["default"].has(kbnFilter,"query.bool.should")){return _lodash["default"].get(kbnFilter,"query.bool.should").map(function(kbnFilter){return _this2._getValueFromFilter(kbnFilter)}).filter(function(value){if(value){return true}return false})}if(_lodash["default"].has(kbnFilter,"script")){return _lodash["default"].get(kbnFilter,"script.script.params.value")}if(_lodash["default"].has(kbnFilter,["query","match",this.fieldName])){return _lodash["default"].get(kbnFilter,["query","match",this.fieldName,"query"])}if(_lodash["default"].has(kbnFilter,["match_phrase",this.fieldName])){return _lodash["default"].get(kbnFilter,["match_phrase",this.fieldName])}}}]);return PhraseFilterManager}(_filter_manager.FilterManager);exports.PhraseFilterManager=PhraseFilterManager},5695:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getLineageMap=getLineageMap;var _lodash=_interopRequireDefault(__webpack_require__(1));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getLineageMap(controlParamsList){function getControlParamsById(controlId){return controlParamsList.find(function(controlParams){return controlParams.id===controlId})}var lineageMap=new Map;controlParamsList.forEach(function(rootControlParams){var lineage=[rootControlParams.id];var getLineage=function getLineage(controlParams){if(_lodash["default"].has(controlParams,"parent")&&controlParams.parent!==""&&!lineage.includes(controlParams.parent)){lineage.push(controlParams.parent);var parent=getControlParamsById(controlParams.parent);getLineage(parent)}};getLineage(rootControlParams);lineageMap.set(rootControlParams.id,lineage)});return lineageMap}},5696:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getParentCandidates=getParentCandidates;var _editor_utils=__webpack_require__(1004);function getParentCandidates(controlParamsList,controlId,lineageMap){return controlParamsList.filter(function(controlParams){if(!controlParams.indexPattern||!controlParams.fieldName){return false}var lineage=lineageMap.get(controlParams.id);if(lineage.includes(controlId)){return false}return true}).map(function(controlParams,controlIndex){return{value:controlParams.id,text:(0,_editor_utils.getTitle)(controlParams,controlIndex)}})}},5697:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ControlsTab=void 0;var _lodash=_interopRequireDefault(__webpack_require__(1));var _propTypes=_interopRequireDefault(__webpack_require__(17));var _react=_interopRequireWildcard(__webpack_require__(0));var _control_editor=__webpack_require__(5698);var _editor_utils=__webpack_require__(1004);var _lineage=__webpack_require__(1973);var _react2=__webpack_require__(10);var _eui=__webpack_require__(2);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ControlsTabUi=function(_Component){_inherits(ControlsTabUi,_Component);function ControlsTabUi(){var _getPrototypeOf2;var _this;_classCallCheck(this,ControlsTabUi);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(ControlsTabUi)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"state",{type:"list"});_defineProperty(_assertThisInitialized(_this),"getIndexPattern",function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(indexPatternId){return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return _this.props.scope.vis.API.indexPatterns.get(indexPatternId);case 2:return _context.abrupt("return",_context.sent);case 3:case"end":return _context.stop()}}},_callee)}));return function(_x){return _ref.apply(this,arguments)}}());_defineProperty(_assertThisInitialized(_this),"handleLabelChange",function(controlIndex,evt){var updatedControl=_this.props.editorState.params.controls[controlIndex];updatedControl.label=evt.target.value;_this.setVisParam("controls",(0,_editor_utils.setControl)(_this.props.editorState.params.controls,controlIndex,updatedControl))});_defineProperty(_assertThisInitialized(_this),"handleIndexPatternChange",function(controlIndex,indexPatternId){var updatedControl=_this.props.editorState.params.controls[controlIndex];updatedControl.indexPattern=indexPatternId;updatedControl.fieldName="";_this.setVisParam("controls",(0,_editor_utils.setControl)(_this.props.editorState.params.controls,controlIndex,updatedControl))});_defineProperty(_assertThisInitialized(_this),"handleFieldNameChange",function(controlIndex,fieldName){var updatedControl=_this.props.editorState.params.controls[controlIndex];updatedControl.fieldName=fieldName;_this.setVisParam("controls",(0,_editor_utils.setControl)(_this.props.editorState.params.controls,controlIndex,updatedControl))});_defineProperty(_assertThisInitialized(_this),"handleCheckboxOptionChange",function(controlIndex,optionName,evt){var updatedControl=_this.props.editorState.params.controls[controlIndex];updatedControl.options[optionName]=evt.target.checked;_this.setVisParam("controls",(0,_editor_utils.setControl)(_this.props.editorState.params.controls,controlIndex,updatedControl))});_defineProperty(_assertThisInitialized(_this),"handleNumberOptionChange",function(controlIndex,optionName,evt){var updatedControl=_this.props.editorState.params.controls[controlIndex];updatedControl.options[optionName]=parseFloat(evt.target.value);_this.setVisParam("controls",(0,_editor_utils.setControl)(_this.props.editorState.params.controls,controlIndex,updatedControl))});_defineProperty(_assertThisInitialized(_this),"handleRemoveControl",function(controlIndex){_this.setVisParam("controls",(0,_editor_utils.removeControl)(_this.props.editorState.params.controls,controlIndex))});_defineProperty(_assertThisInitialized(_this),"moveControl",function(controlIndex,direction){_this.setVisParam("controls",(0,_editor_utils.moveControl)(_this.props.editorState.params.controls,controlIndex,direction))});_defineProperty(_assertThisInitialized(_this),"handleAddControl",function(){_this.setVisParam("controls",(0,_editor_utils.addControl)(_this.props.editorState.params.controls,(0,_editor_utils.newControl)(_this.state.type)))});_defineProperty(_assertThisInitialized(_this),"handleParentChange",function(controlIndex,evt){var updatedControl=_this.props.editorState.params.controls[controlIndex];updatedControl.parent=evt.target.value;_this.setVisParam("controls",(0,_editor_utils.setControl)(_this.props.editorState.params.controls,controlIndex,updatedControl))});return _this}_createClass(ControlsTabUi,[{key:"setVisParam",value:function setVisParam(paramName,paramValue){var params=_lodash["default"].cloneDeep(this.props.editorState.params);params[paramName]=paramValue;this.props.stageEditorParams(params)}},{key:"renderControls",value:function renderControls(){var _this2=this;var lineageMap=(0,_lineage.getLineageMap)(this.props.editorState.params.controls);return this.props.editorState.params.controls.map(function(controlParams,controlIndex){var parentCandidates=(0,_lineage.getParentCandidates)(_this2.props.editorState.params.controls,controlParams.id,lineageMap);return _react["default"].createElement(_control_editor.ControlEditor,{key:controlParams.id,controlIndex:controlIndex,controlParams:controlParams,handleLabelChange:_this2.handleLabelChange,moveControl:_this2.moveControl,handleRemoveControl:_this2.handleRemoveControl,handleIndexPatternChange:_this2.handleIndexPatternChange,handleFieldNameChange:_this2.handleFieldNameChange,getIndexPattern:_this2.getIndexPattern,handleCheckboxOptionChange:_this2.handleCheckboxOptionChange,handleNumberOptionChange:_this2.handleNumberOptionChange,parentCandidates:parentCandidates,handleParentChange:_this2.handleParentChange})})}},{key:"render",value:function render(){var _this3=this;var intl=this.props.intl;return _react["default"].createElement("div",null,this.renderControls(),_react["default"].createElement(_eui.EuiPanel,{grow:false},_react["default"].createElement(_eui.EuiFlexGroup,null,_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiFormRow,{id:"selectControlType"},_react["default"].createElement(_eui.EuiSelect,{options:[{value:"range",text:intl.formatMessage({id:"inputControl.editor.controlsTab.select.rangeDropDownOptionLabel",defaultMessage:"Range slider"})},{value:"list",text:intl.formatMessage({id:"inputControl.editor.controlsTab.select.listDropDownOptionLabel",defaultMessage:"Options list"})}],value:this.state.type,onChange:function onChange(evt){return _this3.setState({type:evt.target.value})},"aria-label":intl.formatMessage({id:"inputControl.editor.controlsTab.select.controlTypeAriaLabel",defaultMessage:"Select control type"})}))),_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiFormRow,{id:"addControl"},_react["default"].createElement(_eui.EuiButton,{fill:true,onClick:this.handleAddControl,iconType:"plusInCircle","data-test-subj":"inputControlEditorAddBtn","aria-label":intl.formatMessage({id:"inputControl.editor.controlsTab.select.addControlAriaLabel",defaultMessage:"Add control"})},_react["default"].createElement(_react2.FormattedMessage,{id:"inputControl.editor.controlsTab.addButtonLabel",defaultMessage:"Add"})))))))}}]);return ControlsTabUi}(_react.Component);ControlsTabUi.propTypes={scope:_propTypes["default"].object.isRequired,stageEditorParams:_propTypes["default"].func.isRequired};var ControlsTab=(0,_react2.injectI18n)(ControlsTabUi);exports.ControlsTab=ControlsTab},5698:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ControlEditor=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(17));var _react=_interopRequireWildcard(__webpack_require__(0));var _range_control_editor=__webpack_require__(5699);var _list_control_editor=__webpack_require__(5700);var _editor_utils=__webpack_require__(1004);var _react2=__webpack_require__(10);var _eui=__webpack_require__(2);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ControlEditorUi=function(_Component){_inherits(ControlEditorUi,_Component);function ControlEditorUi(){var _getPrototypeOf2;var _this;_classCallCheck(this,ControlEditorUi);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(ControlEditorUi)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"changeLabel",function(evt){_this.props.handleLabelChange(_this.props.controlIndex,evt)});_defineProperty(_assertThisInitialized(_this),"removeControl",function(){_this.props.handleRemoveControl(_this.props.controlIndex)});_defineProperty(_assertThisInitialized(_this),"moveUpControl",function(){_this.props.moveControl(_this.props.controlIndex,-1)});_defineProperty(_assertThisInitialized(_this),"moveDownControl",function(){_this.props.moveControl(_this.props.controlIndex,1)});_defineProperty(_assertThisInitialized(_this),"changeIndexPattern",function(evt){_this.props.handleIndexPatternChange(_this.props.controlIndex,evt)});_defineProperty(_assertThisInitialized(_this),"changeFieldName",function(evt){_this.props.handleFieldNameChange(_this.props.controlIndex,evt)});return _this}_createClass(ControlEditorUi,[{key:"renderEditor",value:function renderEditor(){var controlEditor=null;switch(this.props.controlParams.type){case"list":controlEditor=_react["default"].createElement(_list_control_editor.ListControlEditor,{controlIndex:this.props.controlIndex,controlParams:this.props.controlParams,handleIndexPatternChange:this.changeIndexPattern,handleFieldNameChange:this.changeFieldName,getIndexPattern:this.props.getIndexPattern,handleNumberOptionChange:this.props.handleNumberOptionChange,handleCheckboxOptionChange:this.props.handleCheckboxOptionChange,parentCandidates:this.props.parentCandidates,handleParentChange:this.props.handleParentChange});break;case"range":controlEditor=_react["default"].createElement(_range_control_editor.RangeControlEditor,{controlIndex:this.props.controlIndex,controlParams:this.props.controlParams,handleIndexPatternChange:this.changeIndexPattern,handleFieldNameChange:this.changeFieldName,getIndexPattern:this.props.getIndexPattern,handleNumberOptionChange:this.props.handleNumberOptionChange});break;default:throw new Error("Unhandled control editor type ".concat(this.props.controlParams.type))}var labelId="controlLabel".concat(this.props.controlIndex);return _react["default"].createElement(_eui.EuiForm,null,_react["default"].createElement(_eui.EuiFormRow,{id:labelId,label:_react["default"].createElement(_react2.FormattedMessage,{id:"inputControl.editor.controlEditor.controlLabel",defaultMessage:"Control Label"})},_react["default"].createElement(_eui.EuiFieldText,{value:this.props.controlParams.label,onChange:this.changeLabel})),controlEditor)}},{key:"renderEditorButtons",value:function renderEditorButtons(){return _react["default"].createElement("div",null,_react["default"].createElement(_eui.EuiButtonIcon,{"aria-label":this.props.intl.formatMessage({id:"inputControl.editor.controlEditor.moveControlUpAriaLabel",defaultMessage:"Move control up"}),color:"primary",onClick:this.moveUpControl,iconType:"sortUp","data-test-subj":"inputControlEditorMoveUpControl".concat(this.props.controlIndex)}),_react["default"].createElement(_eui.EuiButtonIcon,{"aria-label":this.props.intl.formatMessage({id:"inputControl.editor.controlEditor.moveControlDownAriaLabel",defaultMessage:"Move control down"}),color:"primary",onClick:this.moveDownControl,iconType:"sortDown","data-test-subj":"inputControlEditorMoveDownControl".concat(this.props.controlIndex)}),_react["default"].createElement(_eui.EuiButtonIcon,{"aria-label":this.props.intl.formatMessage({id:"inputControl.editor.controlEditor.removeControlAriaLabel",defaultMessage:"Remove control"}),color:"danger",onClick:this.removeControl,iconType:"cross","data-test-subj":"inputControlEditorRemoveControl".concat(this.props.controlIndex)}))}},{key:"render",value:function render(){return _react["default"].createElement(_eui.EuiPanel,{grow:false,className:"icvControlEditor__panel"},_react["default"].createElement(_eui.EuiAccordion,{id:"controlEditorAccordion",buttonContent:(0,_editor_utils.getTitle)(this.props.controlParams,this.props.controlIndex),extraAction:this.renderEditorButtons(),initialIsOpen:true},_react["default"].createElement(_eui.EuiSpacer,{size:"s"}),this.renderEditor()))}}]);return ControlEditorUi}(_react.Component);ControlEditorUi.propTypes={controlIndex:_propTypes["default"].number.isRequired,controlParams:_propTypes["default"].object.isRequired,handleLabelChange:_propTypes["default"].func.isRequired,moveControl:_propTypes["default"].func.isRequired,handleRemoveControl:_propTypes["default"].func.isRequired,handleIndexPatternChange:_propTypes["default"].func.isRequired,handleFieldNameChange:_propTypes["default"].func.isRequired,getIndexPattern:_propTypes["default"].func.isRequired,handleCheckboxOptionChange:_propTypes["default"].func.isRequired,handleNumberOptionChange:_propTypes["default"].func.isRequired,parentCandidates:_propTypes["default"].arrayOf(_propTypes["default"].shape({value:_propTypes["default"].string.isRequired,text:_propTypes["default"].string.isRequired})).isRequired,handleParentChange:_propTypes["default"].func.isRequired};var ControlEditor=(0,_react2.injectI18n)(ControlEditorUi);exports.ControlEditor=ControlEditor},5699:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.RangeControlEditor=RangeControlEditor;var _propTypes=_interopRequireDefault(__webpack_require__(17));var _react=_interopRequireDefault(__webpack_require__(0));var _index_pattern_select_form_row=__webpack_require__(1974);var _field_select=__webpack_require__(1975);var _eui=__webpack_require__(2);var _react2=__webpack_require__(10);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function filterField(field){return field.type==="number"}function RangeControlEditor(props){var stepSizeId="stepSize-".concat(props.controlIndex);var decimalPlacesId="decimalPlaces-".concat(props.controlIndex);var handleDecimalPlacesChange=function handleDecimalPlacesChange(evt){props.handleNumberOptionChange(props.controlIndex,"decimalPlaces",evt)};var handleStepChange=function handleStepChange(evt){props.handleNumberOptionChange(props.controlIndex,"step",evt)};return _react["default"].createElement("div",null,_react["default"].createElement(_index_pattern_select_form_row.IndexPatternSelectFormRow,{indexPatternId:props.controlParams.indexPattern,onChange:props.handleIndexPatternChange,controlIndex:props.controlIndex}),_react["default"].createElement(_field_select.FieldSelect,{fieldName:props.controlParams.fieldName,indexPatternId:props.controlParams.indexPattern,filterField:filterField,onChange:props.handleFieldNameChange,getIndexPattern:props.getIndexPattern,controlIndex:props.controlIndex}),_react["default"].createElement(_eui.EuiFormRow,{id:stepSizeId,label:_react["default"].createElement(_react2.FormattedMessage,{id:"inputControl.editor.rangeControl.stepSizeLabel",defaultMessage:"Step Size"})},_react["default"].createElement(_eui.EuiFieldNumber,{value:props.controlParams.options.step,onChange:handleStepChange,"data-test-subj":"rangeControlSizeInput".concat(props.controlIndex)})),_react["default"].createElement(_eui.EuiFormRow,{id:decimalPlacesId,label:_react["default"].createElement(_react2.FormattedMessage,{id:"inputControl.editor.rangeControl.decimalPlacesLabel",defaultMessage:"Decimal Places"})},_react["default"].createElement(_eui.EuiFieldNumber,{min:0,value:props.controlParams.options.decimalPlaces,onChange:handleDecimalPlacesChange,"data-test-subj":"rangeControlDecimalPlacesInput".concat(props.controlIndex)})))}RangeControlEditor.propTypes={getIndexPattern:_propTypes["default"].func.isRequired,controlIndex:_propTypes["default"].number.isRequired,controlParams:_propTypes["default"].object.isRequired,handleFieldNameChange:_propTypes["default"].func.isRequired,handleIndexPatternChange:_propTypes["default"].func.isRequired,handleNumberOptionChange:_propTypes["default"].func.isRequired}},5700:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ListControlEditor=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(17));var _react=_interopRequireWildcard(__webpack_require__(0));var _index_pattern_select_form_row=__webpack_require__(1974);var _field_select=__webpack_require__(1975);var _react2=__webpack_require__(10);var _eui=__webpack_require__(2);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function filterField(field){return field.aggregatable&&["number","boolean","date","ip","string"].includes(field.type)}var ListControlEditor=function(_Component){_inherits(ListControlEditor,_Component);function ListControlEditor(){var _getPrototypeOf2;var _this;_classCallCheck(this,ListControlEditor);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(ListControlEditor)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"state",{isLoadingFieldType:true,isStringField:false,prevFieldName:_this.props.controlParams.fieldName});_defineProperty(_assertThisInitialized(_this),"componentDidUpdate",function(){if(_this.state.isLoadingFieldType){_this.loadIsStringField()}});_defineProperty(_assertThisInitialized(_this),"loadIsStringField",_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var indexPattern,field;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(!_this.props.controlParams.indexPattern||!_this.props.controlParams.fieldName)){_context.next=3;break}_this.setState({isLoadingFieldType:false});return _context.abrupt("return");case 3:_context.prev=3;_context.next=6;return _this.props.getIndexPattern(_this.props.controlParams.indexPattern);case 6:indexPattern=_context.sent;_context.next=12;break;case 9:_context.prev=9;_context.t0=_context["catch"](3);return _context.abrupt("return");case 12:if(_this._isMounted){_context.next=14;break}return _context.abrupt("return");case 14:field=indexPattern.fields.find(function(field){return field.name===_this.props.controlParams.fieldName});if(field){_context.next=17;break}return _context.abrupt("return");case 17:_this.setState({isLoadingFieldType:false,isStringField:field.type==="string"});case 18:case"end":return _context.stop()}}},_callee,null,[[3,9]])})));_defineProperty(_assertThisInitialized(_this),"renderOptions",function(){if(_this.state.isLoadingFieldType||!_this.props.controlParams.fieldName){return}var options=[];if(_this.props.parentCandidates&&_this.props.parentCandidates.length>0){var parentCandidatesOptions=[{value:"",text:""}].concat(_toConsumableArray(_this.props.parentCandidates));options.push(_react["default"].createElement(_eui.EuiFormRow,{id:"parentSelect-".concat(_this.props.controlIndex),label:_react["default"].createElement(_react2.FormattedMessage,{id:"inputControl.editor.listControl.parentLabel",defaultMessage:"Parent control"}),helpText:_react["default"].createElement(_react2.FormattedMessage,{id:"inputControl.editor.listControl.parentDescription",defaultMessage:"Options are based on the value of parent control. Disabled if parent is not set."}),key:"parentSelect"},_react["default"].createElement(_eui.EuiSelect,{options:parentCandidatesOptions,value:_this.props.controlParams.parent,onChange:function onChange(evt){_this.props.handleParentChange(_this.props.controlIndex,evt)}})))}options.push(_react["default"].createElement(_eui.EuiFormRow,{id:"multiselect-".concat(_this.props.controlIndex),key:"multiselect",helpText:_react["default"].createElement(_react2.FormattedMessage,{id:"inputControl.editor.listControl.multiselectDescription",defaultMessage:"Allow multiple selection"})},_react["default"].createElement(_eui.EuiSwitch,{label:_react["default"].createElement(_react2.FormattedMessage,{id:"inputControl.editor.listControl.multiselectLabel",defaultMessage:"Multiselect"}),checked:_this.props.controlParams.options.multiselect,onChange:function onChange(evt){_this.props.handleCheckboxOptionChange(_this.props.controlIndex,"multiselect",evt)},"data-test-subj":"listControlMultiselectInput"})));var dynamicOptionsHelpText=_this.state.isStringField?_react["default"].createElement(_react2.FormattedMessage,{id:"inputControl.editor.listControl.dynamicOptions.updateDescription",defaultMessage:"Update options in response to user input"}):_react["default"].createElement(_react2.FormattedMessage,{id:"inputControl.editor.listControl.dynamicOptions.stringFieldDescription",defaultMessage:'Only available for "string" fields'});options.push(_react["default"].createElement(_eui.EuiFormRow,{id:"dynamicOptions-".concat(_this.props.controlIndex),key:"dynamicOptions",helpText:dynamicOptionsHelpText},_react["default"].createElement(_eui.EuiSwitch,{label:_react["default"].createElement(_react2.FormattedMessage,{id:"inputControl.editor.listControl.dynamicOptionsLabel",defaultMessage:"Dynamic Options"}),checked:_this.props.controlParams.options.dynamicOptions,onChange:function onChange(evt){_this.props.handleCheckboxOptionChange(_this.props.controlIndex,"dynamicOptions",evt)},disabled:_this.state.isStringField?false:true,"data-test-subj":"listControlDynamicOptionsSwitch"})));if(!_this.props.controlParams.options.dynamicOptions||!_this.state.isStringField){options.push(_react["default"].createElement(_eui.EuiFormRow,{id:"size-".concat(_this.props.controlIndex),label:_react["default"].createElement(_react2.FormattedMessage,{id:"inputControl.editor.listControl.sizeLabel",defaultMessage:"Size"}),key:"size",helpText:_react["default"].createElement(_react2.FormattedMessage,{id:"inputControl.editor.listControl.sizeDescription",defaultMessage:"Number of options"})},_react["default"].createElement(_eui.EuiFieldNumber,{min:1,value:_this.props.controlParams.options.size,onChange:function onChange(evt){_this.props.handleNumberOptionChange(_this.props.controlIndex,"size",evt)},"data-test-subj":"listControlSizeInput"})))}return options});return _this}_createClass(ListControlEditor,[{key:"componentDidMount",value:function componentDidMount(){this._isMounted=true;this.loadIsStringField()}},{key:"componentWillUnmount",value:function componentWillUnmount(){this._isMounted=false}},{key:"render",value:function render(){return _react["default"].createElement("div",null,_react["default"].createElement(_index_pattern_select_form_row.IndexPatternSelectFormRow,{indexPatternId:this.props.controlParams.indexPattern,onChange:this.props.handleIndexPatternChange,controlIndex:this.props.controlIndex}),_react["default"].createElement(_field_select.FieldSelect,{fieldName:this.props.controlParams.fieldName,indexPatternId:this.props.controlParams.indexPattern,filterField:filterField,onChange:this.props.handleFieldNameChange,getIndexPattern:this.props.getIndexPattern,controlIndex:this.props.controlIndex}),this.renderOptions())}}]);return ListControlEditor}(_react.Component);exports.ListControlEditor=ListControlEditor;_defineProperty(ListControlEditor,"getDerivedStateFromProps",function(nextProps,prevState){var isNewFieldName=prevState.prevFieldName!==nextProps.controlParams.fieldName;if(!prevState.isLoadingFieldType&&isNewFieldName){return{prevFieldName:nextProps.controlParams.fieldName,isLoadingFieldType:true}}return null});ListControlEditor.propTypes={getIndexPattern:_propTypes["default"].func.isRequired,controlIndex:_propTypes["default"].number.isRequired,controlParams:_propTypes["default"].object.isRequired,handleFieldNameChange:_propTypes["default"].func.isRequired,handleIndexPatternChange:_propTypes["default"].func.isRequired,handleCheckboxOptionChange:_propTypes["default"].func.isRequired,handleNumberOptionChange:_propTypes["default"].func.isRequired,parentCandidates:_propTypes["default"].arrayOf(_propTypes["default"].shape({value:_propTypes["default"].string.isRequired,text:_propTypes["default"].string.isRequired})).isRequired,handleParentChange:_propTypes["default"].func.isRequired}},5701:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.OptionsTab=void 0;var _lodash=_interopRequireDefault(__webpack_require__(1));var _propTypes=_interopRequireDefault(__webpack_require__(17));var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(2);var _react2=__webpack_require__(10);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var OptionsTab=function(_Component){_inherits(OptionsTab,_Component);function OptionsTab(){var _getPrototypeOf2;var _this;_classCallCheck(this,OptionsTab);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(OptionsTab)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"setVisParam",function(paramName,paramValue){var params=_lodash["default"].cloneDeep(_this.props.editorState.params);params[paramName]=paramValue;_this.props.stageEditorParams(params)});_defineProperty(_assertThisInitialized(_this),"handleUpdateFiltersChange",function(evt){_this.setVisParam("updateFiltersOnChange",evt.target.checked)});_defineProperty(_assertThisInitialized(_this),"handleUseTimeFilter",function(evt){_this.setVisParam("useTimeFilter",evt.target.checked)});_defineProperty(_assertThisInitialized(_this),"handlePinFilters",function(evt){_this.setVisParam("pinFilters",evt.target.checked)});return _this}_createClass(OptionsTab,[{key:"render",value:function render(){return _react["default"].createElement(_eui.EuiForm,null,_react["default"].createElement(_eui.EuiFormRow,{id:"updateFiltersOnChange"},_react["default"].createElement(_eui.EuiSwitch,{label:_react["default"].createElement(_react2.FormattedMessage,{id:"inputControl.editor.optionsTab.updateFilterLabel",defaultMessage:"Update Kibana filters on each change"}),checked:this.props.editorState.params.updateFiltersOnChange,onChange:this.handleUpdateFiltersChange,"data-test-subj":"inputControlEditorUpdateFiltersOnChangeCheckbox"})),_react["default"].createElement(_eui.EuiFormRow,{id:"useTimeFilter"},_react["default"].createElement(_eui.EuiSwitch,{label:_react["default"].createElement(_react2.FormattedMessage,{id:"inputControl.editor.optionsTab.useTimeFilterLabel",defaultMessage:"Use time filter"}),checked:this.props.editorState.params.useTimeFilter,onChange:this.handleUseTimeFilter,"data-test-subj":"inputControlEditorUseTimeFilterCheckbox"})),_react["default"].createElement(_eui.EuiFormRow,{id:"pinFilters"},_react["default"].createElement(_eui.EuiSwitch,{label:_react["default"].createElement(_react2.FormattedMessage,{id:"inputControl.editor.optionsTab.pinFiltersLabel",defaultMessage:"Pin filters for all applications"}),checked:this.props.editorState.params.pinFilters,onChange:this.handlePinFilters,"data-test-subj":"inputControlEditorPinFiltersCheckbox"})))}}]);return OptionsTab}(_react.Component);exports.OptionsTab=OptionsTab;OptionsTab.propTypes={scope:_propTypes["default"].object.isRequired,stageEditorParams:_propTypes["default"].func.isRequired}},5702:function(module,exports,__webpack_require__){"use strict";var _vis_types=__webpack_require__(85);var _histogram=_interopRequireDefault(__webpack_require__(5703));var _line=_interopRequireDefault(__webpack_require__(5704));var _pie=_interopRequireDefault(__webpack_require__(5705));var _area=_interopRequireDefault(__webpack_require__(5707));var _heatmap=_interopRequireDefault(__webpack_require__(5708));var _horizontal_bar=_interopRequireDefault(__webpack_require__(5710));var _gauge=_interopRequireDefault(__webpack_require__(5711));var _goal=_interopRequireDefault(__webpack_require__(5712));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_vis_types.VisTypesRegistryProvider.register(_histogram["default"]);_vis_types.VisTypesRegistryProvider.register(_line["default"]);_vis_types.VisTypesRegistryProvider.register(_pie["default"]);_vis_types.VisTypesRegistryProvider.register(_area["default"]);_vis_types.VisTypesRegistryProvider.register(_heatmap["default"]);_vis_types.VisTypesRegistryProvider.register(_horizontal_bar["default"]);_vis_types.VisTypesRegistryProvider.register(_gauge["default"]);_vis_types.VisTypesRegistryProvider.register(_goal["default"])},5703:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=PointSeriesVisType;var _vis_factory=__webpack_require__(97);var _i18n=__webpack_require__(5);var _schemas=__webpack_require__(113);var _point_series=_interopRequireDefault(__webpack_require__(661));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function PointSeriesVisType(Private){var VisFactory=Private(_vis_factory.VisFactoryProvider);return VisFactory.createVislibVisualization({name:"histogram",title:_i18n.i18n.translate("kbnVislibVisTypes.histogram.histogramTitle",{defaultMessage:"Vertical Bar"}),icon:"visBarVertical",description:_i18n.i18n.translate("kbnVislibVisTypes.histogram.histogramDescription",{defaultMessage:"Assign a continuous variable to each axis"}),visConfig:{defaults:{type:"histogram",grid:{categoryLines:false},categoryAxes:[{id:"CategoryAxis-1",type:"category",position:"bottom",show:true,style:{},scale:{type:"linear"},labels:{show:true,filter:true,truncate:100},title:{}}],valueAxes:[{id:"ValueAxis-1",name:"LeftAxis-1",type:"value",position:"left",show:true,style:{},scale:{type:"linear",mode:"normal"},labels:{show:true,rotate:0,filter:false,truncate:100},title:{text:"Count"}}],seriesParams:[{show:"true",type:"histogram",mode:"stacked",data:{label:"Count",id:"1"},valueAxis:"ValueAxis-1",drawLinesBetweenPoints:true,showCircles:true}],addTooltip:true,addLegend:true,legendPosition:"right",times:[],addTimeMarker:false,labels:{show:false}}},editorConfig:{collections:{positions:["top","left","right","bottom"],chartTypes:[{value:"line",text:"line"},{value:"area",text:"area"},{value:"histogram",text:"bar"}],axisModes:["normal","percentage","wiggle","silhouette"],scaleTypes:["linear","log","square root"],chartModes:["normal","stacked"],interpolationModes:[{value:"linear",text:"straight"},{value:"cardinal",text:"smoothed"},{value:"step-after",text:"stepped"}]},optionTabs:[{name:"advanced",title:"Metrics & Axes",editor:"<div><vislib-series></vislib-series><vislib-value-axes>"+"</vislib-value-axes><vislib-category-axis></vislib-category-axis></div>"},{name:"options",title:"Panel Settings",editor:_point_series["default"]}],schemas:new _schemas.Schemas([{group:"metrics",name:"metric",title:_i18n.i18n.translate("kbnVislibVisTypes.histogram.metricTitle",{defaultMessage:"Y-axis"}),min:1,aggFilter:["!geo_centroid","!geo_bounds"],defaults:[{schema:"metric",type:"count"}]},{group:"metrics",name:"radius",title:_i18n.i18n.translate("kbnVislibVisTypes.histogram.radiusTitle",{defaultMessage:"Dot size"}),min:0,max:1,aggFilter:["count","avg","sum","min","max","cardinality"]},{group:"buckets",name:"segment",title:_i18n.i18n.translate("kbnVislibVisTypes.histogram.segmentTitle",{defaultMessage:"X-axis"}),min:0,max:1,aggFilter:["!geohash_grid","!geotile_grid","!filter"]},{group:"buckets",name:"group",title:_i18n.i18n.translate("kbnVislibVisTypes.histogram.groupTitle",{defaultMessage:"Split series"}),min:0,max:3,aggFilter:["!geohash_grid","!geotile_grid","!filter"]},{group:"buckets",name:"split",title:_i18n.i18n.translate("kbnVislibVisTypes.histogram.splitTitle",{defaultMessage:"Split chart"}),min:0,max:1,aggFilter:["!geohash_grid","!geotile_grid","!filter"]}])}})}module.exports=exports.default},5704:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=PointSeriesVisType;var _vis_factory=__webpack_require__(97);var _i18n=__webpack_require__(5);var _schemas=__webpack_require__(113);var _point_series=_interopRequireDefault(__webpack_require__(661));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function PointSeriesVisType(Private){var VisFactory=Private(_vis_factory.VisFactoryProvider);return VisFactory.createVislibVisualization({name:"line",title:_i18n.i18n.translate("kbnVislibVisTypes.line.lineTitle",{defaultMessage:"Line"}),icon:"visLine",description:_i18n.i18n.translate("kbnVislibVisTypes.line.lineDescription",{defaultMessage:"Emphasize trends"}),visConfig:{defaults:{type:"line",grid:{categoryLines:false},categoryAxes:[{id:"CategoryAxis-1",type:"category",position:"bottom",show:true,style:{},scale:{type:"linear"},labels:{show:true,filter:true,truncate:100},title:{}}],valueAxes:[{id:"ValueAxis-1",name:"LeftAxis-1",type:"value",position:"left",show:true,style:{},scale:{type:"linear",mode:"normal"},labels:{show:true,rotate:0,filter:false,truncate:100},title:{text:"Count"}}],seriesParams:[{show:"true",type:"line",mode:"normal",data:{label:"Count",id:"1"},valueAxis:"ValueAxis-1",drawLinesBetweenPoints:true,showCircles:true}],addTooltip:true,addLegend:true,legendPosition:"right",times:[],addTimeMarker:false}},editorConfig:{collections:{positions:["top","left","right","bottom"],chartTypes:[{value:"line",text:"line"},{value:"area",text:"area"},{value:"histogram",text:"bar"}],axisModes:["normal","percentage","wiggle","silhouette"],scaleTypes:["linear","log","square root"],chartModes:["normal","stacked"],interpolationModes:[{value:"linear",text:"straight"},{value:"cardinal",text:"smoothed"},{value:"step-after",text:"stepped"}]},optionTabs:[{name:"advanced",title:"Metrics & Axes",editor:"<div><vislib-series></vislib-series><vislib-value-axes>"+"</vislib-value-axes><vislib-category-axis></vislib-category-axis></div>"},{name:"options",title:"Panel Settings",editor:_point_series["default"]}],schemas:new _schemas.Schemas([{group:"metrics",name:"metric",title:_i18n.i18n.translate("kbnVislibVisTypes.line.metricTitle",{defaultMessage:"Y-axis"}),min:1,aggFilter:["!geo_centroid","!geo_bounds"],defaults:[{schema:"metric",type:"count"}]},{group:"metrics",name:"radius",title:_i18n.i18n.translate("kbnVislibVisTypes.line.radiusTitle",{defaultMessage:"Dot size"}),min:0,max:1,aggFilter:["count","avg","sum","min","max","cardinality","top_hits"]},{group:"buckets",name:"segment",title:_i18n.i18n.translate("kbnVislibVisTypes.line.segmentTitle",{defaultMessage:"X-axis"}),min:0,max:1,aggFilter:["!geohash_grid","!geotile_grid","!filter"]},{group:"buckets",name:"group",title:_i18n.i18n.translate("kbnVislibVisTypes.line.groupTitle",{defaultMessage:"Split series"}),min:0,max:3,aggFilter:["!geohash_grid","!geotile_grid","!filter"]},{group:"buckets",name:"split",title:_i18n.i18n.translate("kbnVislibVisTypes.line.splitTitle",{defaultMessage:"Split chart"}),min:0,max:1,aggFilter:["!geohash_grid","!geotile_grid","!filter"]}])}})}module.exports=exports.default},5705:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=HistogramVisType;var _vis_factory=__webpack_require__(97);var _i18n=__webpack_require__(5);var _schemas=__webpack_require__(113);var _pie=_interopRequireDefault(__webpack_require__(5706));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function HistogramVisType(Private){var VisFactory=Private(_vis_factory.VisFactoryProvider);return VisFactory.createVislibVisualization({name:"pie",title:_i18n.i18n.translate("kbnVislibVisTypes.pie.pieTitle",{defaultMessage:"Pie"}),icon:"visPie",description:_i18n.i18n.translate("kbnVislibVisTypes.pie.pieDescription",{defaultMessage:"Compare parts of a whole"}),visConfig:{defaults:{type:"pie",addTooltip:true,addLegend:true,legendPosition:"right",isDonut:true,labels:{show:false,values:true,last_level:true,truncate:100}}},events:{brush:{disabled:true}},editorConfig:{collections:{legendPositions:[{value:"left",text:"left"},{value:"right",text:"right"},{value:"top",text:"top"},{value:"bottom",text:"bottom"}]},optionsTemplate:_pie["default"],schemas:new _schemas.Schemas([{group:"metrics",name:"metric",title:_i18n.i18n.translate("kbnVislibVisTypes.pie.metricTitle",{defaultMessage:"Slice size"}),min:1,max:1,aggFilter:["sum","count","cardinality","top_hits"],defaults:[{schema:"metric",type:"count"}]},{group:"buckets",name:"segment",title:_i18n.i18n.translate("kbnVislibVisTypes.pie.segmentTitle",{defaultMessage:"Split slices"}),min:0,max:Infinity,aggFilter:["!geohash_grid","!geotile_grid","!filter"]},{group:"buckets",name:"split",title:_i18n.i18n.translate("kbnVislibVisTypes.pie.splitTitle",{defaultMessage:"Split chart"}),mustBeFirst:true,min:0,max:1,aggFilter:["!geohash_grid","!geotile_grid","!filter"]}])},hierarchicalData:true,responseHandler:"vislib_slices"})}module.exports=exports.default},5706:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<div class="visEditorSidebar__section">\n  <div class="form-group">\n    <div class="visEditorSidebar__sectionTitle">\n      <div\n        i18n-id="kbnVislibVisTypes.editors.pie.pieSettingsTitle"\n        i18n-default-message="Pie Settings"\n      ></div>\n    </div>\n\n    <div class="visEditorSidebar__formRow">\n      <label\n        class="visEditorSidebar__formLabel"\n        for="isDonut"\n        i18n-id="kbnVislibVisTypes.editors.pie.donutLabel"\n        i18n-default-message="Donut"\n      ></label>\n      <div class="visEditorSidebar__formControl">\n        <input id="isDonut" name="isDonut" type="checkbox" value="{{isDonut}}"\n               ng-checked="editorState.params.isDonut"\n               ng-model="editorState.params.isDonut"\n        >\n      </div>\n    </div>\n  </div>\n\n  <vislib-basic-options></vislib-basic-options>\n</div>\n\n\x3c!-- Labels --\x3e\n<div class="visEditorSidebar__section">\n  <div class="form-group">\n    <div class="visEditorSidebar__sectionTitle">\n      <div\n        i18n-id="kbnVislibVisTypes.editors.pie.labelsSettingsTitle"\n        i18n-default-message="Labels Settings"\n      ></div>\n    </div>\n\n    <div class="visEditorSidebar__formRow">\n      <label\n        class="visEditorSidebar__formLabel"\n        for="showLabels"\n        i18n-id="kbnVislibVisTypes.editors.pie.showLabelsLabel"\n        i18n-default-message="Show Labels"\n      ></label>\n      <div class="visEditorSidebar__formControl">\n        <input class="kuiCheckBox" id="showLabels" type="checkbox" ng-model="editorState.params.labels.show">\n      </div>\n    </div>\n\n    <div class="visEditorSidebar__formRow">\n      <label\n        class="visEditorSidebar__formLabel"\n        for="showLastLevel"\n        i18n-id="kbnVislibVisTypes.editors.pie.showTopLevelOnlyLabel"\n        i18n-default-message="Show Top Level Only"\n      ></label>\n      <div class="visEditorSidebar__formControl">\n        <input class="kuiCheckBox" id="showLastLevel" type="checkbox" ng-model="editorState.params.labels.last_level">\n      </div>\n    </div>\n\n    <div class="visEditorSidebar__formRow">\n      <label\n        class="visEditorSidebar__formLabel"\n        for="showValues"\n        i18n-id="kbnVislibVisTypes.editors.pie.showValuesLabel"\n        i18n-default-message="Show Values"\n      ></label>\n      <div class="visEditorSidebar__formControl">\n        <input class="kuiCheckBox" id="showValues" type="checkbox" ng-model="editorState.params.labels.values">\n      </div>\n    </div>\n\n    <div class="visEditorSidebar__formRow">\n      <label\n        class="visEditorSidebar__formLabel"\n        for="truncateLabels"\n        i18n-id="kbnVislibVisTypes.editors.pie.truncateLabel"\n        i18n-default-message="Truncate"\n      ></label>\n      <div class="visEditorSidebar__formControl">\n        <input\n          id="truncateLabels"\n          class="kuiInput visEditorSidebar__input"\n          type="number"\n          ng-model="editorState.params.labels.truncate"\n        >\n      </div>\n    </div>\n  </div>\n</div>\n'},5707:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=PointSeriesVisType;var _vis_factory=__webpack_require__(97);var _i18n=__webpack_require__(5);var _schemas=__webpack_require__(113);var _point_series=_interopRequireDefault(__webpack_require__(661));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function PointSeriesVisType(Private){var VisFactory=Private(_vis_factory.VisFactoryProvider);return VisFactory.createVislibVisualization({name:"area",title:_i18n.i18n.translate("kbnVislibVisTypes.area.areaTitle",{defaultMessage:"Area"}),icon:"visArea",description:_i18n.i18n.translate("kbnVislibVisTypes.area.areaDescription",{defaultMessage:"Emphasize the quantity beneath a line chart"}),visConfig:{defaults:{type:"area",grid:{categoryLines:false},categoryAxes:[{id:"CategoryAxis-1",type:"category",position:"bottom",show:true,style:{},scale:{type:"linear"},labels:{show:true,filter:true,truncate:100},title:{}}],valueAxes:[{id:"ValueAxis-1",name:"LeftAxis-1",type:"value",position:"left",show:true,style:{},scale:{type:"linear",mode:"normal"},labels:{show:true,rotate:0,filter:false,truncate:100},title:{text:"Count"}}],seriesParams:[{show:"true",type:"area",mode:"stacked",data:{label:"Count",id:"1"},drawLinesBetweenPoints:true,showCircles:true,interpolate:"linear",valueAxis:"ValueAxis-1"}],addTooltip:true,addLegend:true,legendPosition:"right",times:[],addTimeMarker:false}},editorConfig:{collections:{positions:["top","left","right","bottom"],chartTypes:[{value:"line",text:"line"},{value:"area",text:"area"},{value:"histogram",text:"bar"}],axisModes:["normal","percentage","wiggle","silhouette"],scaleTypes:["linear","log","square root"],chartModes:["normal","stacked"],interpolationModes:[{value:"linear",text:"straight"},{value:"cardinal",text:"smoothed"},{value:"step-after",text:"stepped"}]},optionTabs:[{name:"advanced",title:"Metrics & Axes",editor:"<div><vislib-series></vislib-series><vislib-value-axes>"+"</vislib-value-axes><vislib-category-axis></vislib-category-axis></div>"},{name:"options",title:"Panel Settings",editor:_point_series["default"]}],schemas:new _schemas.Schemas([{group:"metrics",name:"metric",title:_i18n.i18n.translate("kbnVislibVisTypes.area.metricsTitle",{defaultMessage:"Y-axis"}),aggFilter:["!geo_centroid","!geo_bounds"],min:1,defaults:[{schema:"metric",type:"count"}]},{group:"metrics",name:"radius",title:_i18n.i18n.translate("kbnVislibVisTypes.area.radiusTitle",{defaultMessage:"Dot size"}),min:0,max:1,aggFilter:["count","avg","sum","min","max","cardinality"]},{group:"buckets",name:"segment",title:_i18n.i18n.translate("kbnVislibVisTypes.area.segmentTitle",{defaultMessage:"X-axis"}),min:0,max:1,aggFilter:["!geohash_grid","!geotile_grid","!filter"]},{group:"buckets",name:"group",title:_i18n.i18n.translate("kbnVislibVisTypes.area.groupTitle",{defaultMessage:"Split series"}),min:0,max:3,aggFilter:["!geohash_grid","!geotile_grid","!filter"]},{group:"buckets",name:"split",title:_i18n.i18n.translate("kbnVislibVisTypes.area.splitTitle",{defaultMessage:"Split chart"}),min:0,max:1,aggFilter:["!geohash_grid","!geotile_grid","!filter"]}])}})}module.exports=exports.default},5708:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=HeatmapVisType;var _vis_factory=__webpack_require__(97);var _i18n=__webpack_require__(5);var _schemas=__webpack_require__(113);var _heatmap=_interopRequireDefault(__webpack_require__(5709));var _colormaps=__webpack_require__(311);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function HeatmapVisType(Private){var VisFactory=Private(_vis_factory.VisFactoryProvider);return VisFactory.createVislibVisualization({name:"heatmap",title:_i18n.i18n.translate("kbnVislibVisTypes.heatmap.heatmapTitle",{defaultMessage:"Heat Map"}),icon:"visHeatmap",description:_i18n.i18n.translate("kbnVislibVisTypes.heatmap.heatmapDescription",{defaultMessage:"Shade cells within a matrix"}),visConfig:{defaults:{type:"heatmap",addTooltip:true,addLegend:true,enableHover:false,legendPosition:"right",times:[],colorsNumber:4,colorSchema:"Greens",setColorRange:false,colorsRange:[],invertColors:false,percentageMode:false,valueAxes:[{show:false,id:"ValueAxis-1",type:"value",scale:{type:"linear",defaultYExtents:false},labels:{show:false,rotate:0,overwriteColor:false,color:"black"}}]}},editorConfig:{collections:{legendPositions:[{value:"left",text:"left"},{value:"right",text:"right"},{value:"top",text:"top"},{value:"bottom",text:"bottom"}],scales:["linear","log","square root"],colorSchemas:Object.values(_colormaps.vislibColorMaps).map(function(value){return{id:value.id,label:value.label}})},optionsTemplate:_heatmap["default"],schemas:new _schemas.Schemas([{group:"metrics",name:"metric",title:_i18n.i18n.translate("kbnVislibVisTypes.heatmap.metricTitle",{defaultMessage:"Value"}),min:1,max:1,aggFilter:["count","avg","median","sum","min","max","cardinality","std_dev","top_hits"],defaults:[{schema:"metric",type:"count"}]},{group:"buckets",name:"segment",title:_i18n.i18n.translate("kbnVislibVisTypes.heatmap.segmentTitle",{defaultMessage:"X-axis"}),min:0,max:1,aggFilter:["!geohash_grid","!geotile_grid","!filter"]},{group:"buckets",name:"group",title:_i18n.i18n.translate("kbnVislibVisTypes.heatmap.groupTitle",{defaultMessage:"Y-axis"}),min:0,max:1,aggFilter:["!geohash_grid","!geotile_grid","!filter"]},{group:"buckets",name:"split",title:_i18n.i18n.translate("kbnVislibVisTypes.heatmap.splitTitle",{defaultMessage:"Split chart"}),min:0,max:1,aggFilter:["!geohash_grid","!geotile_grid","!filter"]}])}})}module.exports=exports.default},5709:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<div class="visEditorSidebar__section">\n  <div class="visEditorSidebar__sectionTitle">\n    <div\n      i18n-id="kbnVislibVisTypes.editors.heatmap.basicSettingsTitle"\n      i18n-default-message="Basic Settings"\n    ></div>\n  </div>\n\n  <div class="visEditorSidebar__formRow">\n    <label\n      class="visEditorSidebar__formLabel"\n      for="addTooltip"\n      i18n-id="kbnVislibVisTypes.editors.heatmap.showTooltipsLabel"\n      i18n-default-message="Show Tooltips"\n    ></label>\n    <div class="visEditorSidebar__formControl">\n      <input class="kuiCheckBox" id="addTooltip" type="checkbox" ng-model="editorState.params.addTooltip">\n    </div>\n  </div>\n\n  <div class="visEditorSidebar__formRow">\n    <label\n      class="visEditorSidebar__formLabel"\n      for="enableHover"\n      i18n-id="kbnVislibVisTypes.editors.heatmap.highlightLabel"\n      i18n-default-message="Highlight"\n    ></label>\n    <div class="visEditorSidebar__formControl">\n      <input class="kuiCheckBox" id="enableHover" type="checkbox" ng-model="editorState.params.enableHover">\n    </div>\n  </div>\n\n  <div class="visEditorSidebar__formRow" ng-show="editorState.params.addLegend">\n    <label\n      class="visEditorSidebar__formLabel"\n      for="legendPosition"\n      i18n-id="kbnVislibVisTypes.editors.heatmap.legendPositionLabel"\n      i18n-default-message="Legend Position"\n    ></label>\n    <div class="visEditorSidebar__formControl">\n      <select\n        id="legendPosition"\n        class="kuiSelect visEditorSidebar__select"\n        ng-model="editorState.params.legendPosition"\n        ng-options="position.value as position.text for position in vis.type.editorConfig.collections.legendPositions"\n      ></select>\n    </div>\n  </div>\n</div>\n\n<div class="visEditorSidebar__section">\n\n  <div class="visEditorSidebar__sectionTitle">\n    <div\n      i18n-id="kbnVislibVisTypes.editors.heatmap.heatmapSettingsTitle"\n      i18n-default-message="Heatmap Settings"\n    ></div>\n  </div>\n\n  <heatmap-options></heatmap-options>\n\n</div>\n'},5710:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=PointSeriesVisType;var _vis_factory=__webpack_require__(97);var _i18n=__webpack_require__(5);var _schemas=__webpack_require__(113);var _point_series=_interopRequireDefault(__webpack_require__(661));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function PointSeriesVisType(Private){var VisFactory=Private(_vis_factory.VisFactoryProvider);return VisFactory.createVislibVisualization({name:"horizontal_bar",title:_i18n.i18n.translate("kbnVislibVisTypes.horizontalBar.horizontalBarTitle",{defaultMessage:"Horizontal Bar"}),icon:"visBarHorizontal",description:_i18n.i18n.translate("kbnVislibVisTypes.horizontalBar.horizontalBarDescription",{defaultMessage:"Assign a continuous variable to each axis"}),visConfig:{defaults:{type:"histogram",grid:{categoryLines:false},categoryAxes:[{id:"CategoryAxis-1",type:"category",position:"left",show:true,style:{},scale:{type:"linear"},labels:{show:true,rotate:0,filter:false,truncate:200},title:{}}],valueAxes:[{id:"ValueAxis-1",name:"LeftAxis-1",type:"value",position:"bottom",show:true,style:{},scale:{type:"linear",mode:"normal"},labels:{show:true,rotate:75,filter:true,truncate:100},title:{text:"Count"}}],seriesParams:[{show:true,type:"histogram",mode:"normal",data:{label:"Count",id:"1"},valueAxis:"ValueAxis-1",drawLinesBetweenPoints:true,showCircles:true}],addTooltip:true,addLegend:true,legendPosition:"right",times:[],addTimeMarker:false}},editorConfig:{collections:{positions:["top","left","right","bottom"],chartTypes:[{value:"line",text:"line"},{value:"area",text:"area"},{value:"histogram",text:"bar"}],axisModes:["normal","percentage","wiggle","silhouette"],scaleTypes:["linear","log","square root"],chartModes:["normal","stacked"],interpolationModes:[{value:"linear",text:"straight"},{value:"cardinal",text:"smoothed"},{value:"step-after",text:"stepped"}]},optionTabs:[{name:"advanced",title:"Metrics & Axes",editor:"<div><vislib-series></vislib-series><vislib-value-axes>"+"</vislib-value-axes><vislib-category-axis></vislib-category-axis></div>"},{name:"options",title:"Panel Settings",editor:_point_series["default"]}],schemas:new _schemas.Schemas([{group:"metrics",name:"metric",title:_i18n.i18n.translate("kbnVislibVisTypes.horizontalBar.metricTitle",{defaultMessage:"Y-axis"}),min:1,aggFilter:["!geo_centroid","!geo_bounds"],defaults:[{schema:"metric",type:"count"}]},{group:"metrics",name:"radius",title:_i18n.i18n.translate("kbnVislibVisTypes.horizontalBar.radiusTitle",{defaultMessage:"Dot size"}),min:0,max:1,aggFilter:["count","avg","sum","min","max","cardinality"]},{group:"buckets",name:"segment",title:_i18n.i18n.translate("kbnVislibVisTypes.horizontalBar.segmentTitle",{defaultMessage:"X-axis"}),min:0,max:1,aggFilter:["!geohash_grid","!geotile_grid","!filter"]},{group:"buckets",name:"group",title:_i18n.i18n.translate("kbnVislibVisTypes.horizontalBar.groupTitle",{defaultMessage:"Split series"}),min:0,max:3,aggFilter:["!geohash_grid","!geotile_grid","!filter"]},{group:"buckets",name:"split",title:_i18n.i18n.translate("kbnVislibVisTypes.horizontalBar.splitTitle",{defaultMessage:"Split chart"}),min:0,max:1,aggFilter:["!geohash_grid","!geotile_grid","!filter"]}])}})}module.exports=exports.default},5711:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=GaugeVisType;var _vis_factory=__webpack_require__(97);var _i18n=__webpack_require__(5);var _schemas=__webpack_require__(113);var _gauge=_interopRequireDefault(__webpack_require__(1976));var _colormaps=__webpack_require__(311);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function GaugeVisType(Private){var VisFactory=Private(_vis_factory.VisFactoryProvider);return VisFactory.createVislibVisualization({name:"gauge",title:_i18n.i18n.translate("kbnVislibVisTypes.gauge.gaugeTitle",{defaultMessage:"Gauge"}),icon:"visGauge",description:_i18n.i18n.translate("kbnVislibVisTypes.gauge.gaugeDescription",{defaultMessage:"Gauges indicate the status of a metric. Use it to show how a metric's value relates to reference threshold values."}),visConfig:{defaults:{type:"gauge",addTooltip:true,addLegend:true,isDisplayWarning:false,gauge:{alignment:"automatic",extendRange:true,percentageMode:false,gaugeType:"Arc",gaugeStyle:"Full",backStyle:"Full",orientation:"vertical",colorSchema:"Green to Red",gaugeColorMode:"Labels",colorsRange:[{from:0,to:50},{from:50,to:75},{from:75,to:100}],invertColors:false,labels:{show:true,color:"black"},scale:{show:true,labels:false,color:"rgba(105,112,125,0.2)"},type:"meter",style:{bgWidth:.9,width:.9,mask:false,bgMask:false,maskBars:50,bgFill:"rgba(105,112,125,0.2)",bgColor:true,subText:"",fontSize:60}}}},events:{brush:{disabled:true}},editorConfig:{collections:{gaugeTypes:["Arc","Circle"],gaugeColorMode:["None","Labels","Background"],alignments:[{id:"automatic",label:_i18n.i18n.translate("kbnVislibVisTypes.gauge.alignmentAutomaticTitle",{defaultMessage:"Automatic"})},{id:"horizontal",label:_i18n.i18n.translate("kbnVislibVisTypes.gauge.alignmentHorizontalTitle",{defaultMessage:"Horizontal"})},{id:"vertical",label:_i18n.i18n.translate("kbnVislibVisTypes.gauge.alignmentVerticalTitle",{defaultMessage:"Vertical"})}],scales:["linear","log","square root"],colorSchemas:Object.values(_colormaps.vislibColorMaps).map(function(value){return{id:value.id,label:value.label}})},optionsTemplate:_gauge["default"],schemas:new _schemas.Schemas([{group:"metrics",name:"metric",title:_i18n.i18n.translate("kbnVislibVisTypes.gauge.metricTitle",{defaultMessage:"Metric"}),min:1,aggFilter:["!std_dev","!geo_centroid","!percentiles","!percentile_ranks","!derivative","!serial_diff","!moving_avg","!cumulative_sum","!geo_bounds"],defaults:[{schema:"metric",type:"count"}]},{group:"buckets",name:"group",title:_i18n.i18n.translate("kbnVislibVisTypes.gauge.groupTitle",{defaultMessage:"Split group"}),min:0,max:1,aggFilter:["!geohash_grid","!geotile_grid","!filter"]}])},useCustomNoDataScreen:true})}module.exports=exports.default},5712:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=GoalVisType;var _vis_factory=__webpack_require__(97);var _i18n=__webpack_require__(5);var _schemas=__webpack_require__(113);var _gauge=_interopRequireDefault(__webpack_require__(1976));var _colormaps=__webpack_require__(311);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function GoalVisType(Private){var VisFactory=Private(_vis_factory.VisFactoryProvider);return VisFactory.createVislibVisualization({name:"goal",title:_i18n.i18n.translate("kbnVislibVisTypes.goal.goalTitle",{defaultMessage:"Goal"}),icon:"visGoal",description:_i18n.i18n.translate("kbnVislibVisTypes.goal.goalDescription",{defaultMessage:"A goal chart indicates how close you are to your final goal."}),visConfig:{defaults:{addTooltip:true,addLegend:false,isDisplayWarning:false,type:"gauge",gauge:{verticalSplit:false,autoExtend:false,percentageMode:true,gaugeType:"Arc",gaugeStyle:"Full",backStyle:"Full",orientation:"vertical",useRanges:false,colorSchema:"Green to Red",gaugeColorMode:"None",colorsRange:[{from:0,to:1e4}],invertColors:false,labels:{show:true,color:"black"},scale:{show:false,labels:false,color:"rgba(105,112,125,0.2)",width:2},type:"meter",style:{bgFill:"rgba(105,112,125,0.2)",bgColor:false,labelColor:false,subText:"",fontSize:60}}}},events:{brush:{disabled:true}},editorConfig:{collections:{gaugeTypes:["Arc","Circle"],gaugeColorMode:["None","Labels","Background"],scales:["linear","log","square root"],colorSchemas:Object.values(_colormaps.vislibColorMaps).map(function(value){return{id:value.id,label:value.label}})},optionsTemplate:_gauge["default"],schemas:new _schemas.Schemas([{group:"metrics",name:"metric",title:_i18n.i18n.translate("kbnVislibVisTypes.goal.metricTitle",{defaultMessage:"Metric"}),min:1,aggFilter:["!std_dev","!geo_centroid","!percentiles","!percentile_ranks","!derivative","!serial_diff","!moving_avg","!cumulative_sum","!geo_bounds"],defaults:[{schema:"metric",type:"count"}]},{group:"buckets",name:"group",title:_i18n.i18n.translate("kbnVislibVisTypes.goal.groupTitle",{defaultMessage:"Split group"}),min:0,max:1,aggFilter:["!geohash_grid","!geotile_grid","!filter"]}])},useCustomNoDataScreen:true})}module.exports=exports.default},5713:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=void 0;__webpack_require__(5714);var _i18n=__webpack_require__(5);var _vis_factory=__webpack_require__(97);var _schemas=__webpack_require__(113);var _vis_types=__webpack_require__(85);var _colormaps=__webpack_require__(311);var _metric_vis_controller=__webpack_require__(5716);_vis_types.VisTypesRegistryProvider.register(MetricVisProvider);function MetricVisProvider(Private){var VisFactory=Private(_vis_factory.VisFactoryProvider);return VisFactory.createReactVisualization({name:"metric",title:_i18n.i18n.translate("metricVis.metricTitle",{defaultMessage:"Metric"}),icon:"visMetric",description:_i18n.i18n.translate("metricVis.metricDescription",{defaultMessage:"Display a calculation as a single number"}),visConfig:{component:_metric_vis_controller.MetricVisComponent,defaults:{addTooltip:true,addLegend:false,type:"metric",metric:{percentageMode:false,useRanges:false,colorSchema:"Green to Red",metricColorMode:"None",colorsRange:[{from:0,to:1e4}],labels:{show:true},invertColors:false,style:{bgFill:"#000",bgColor:false,labelColor:false,subText:"",fontSize:60}}}},editorConfig:{collections:{metricColorMode:[{id:"None",label:_i18n.i18n.translate("metricVis.colorModes.noneOptionLabel",{defaultMessage:"None"})},{id:"Labels",label:_i18n.i18n.translate("metricVis.colorModes.labelsOptionLabel",{defaultMessage:"Labels"})},{id:"Background",label:_i18n.i18n.translate("metricVis.colorModes.backgroundOptionLabel",{defaultMessage:"Background"})}],colorSchemas:Object.values(_colormaps.vislibColorMaps).map(function(value){return{id:value.id,label:value.label}})},optionsTemplate:"<metric-vis-params></metric-vis-params>",schemas:new _schemas.Schemas([{group:"metrics",name:"metric",title:_i18n.i18n.translate("metricVis.schemas.metricTitle",{defaultMessage:"Metric"}),min:1,aggFilter:["!std_dev","!geo_centroid","!derivative","!serial_diff","!moving_avg","!cumulative_sum","!geo_bounds"],aggSettings:{top_hits:{allowStrings:true}},defaults:[{type:"count",schema:"metric"}]},{group:"buckets",name:"group",title:_i18n.i18n.translate("metricVis.schemas.splitGroupTitle",{defaultMessage:"Split group"}),min:0,max:1,aggFilter:["!geohash_grid","!geotile_grid","!filter"]}])}})}var _default=MetricVisProvider;exports["default"]=_default;module.exports=exports.default},5714:function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(12);var _i18n=__webpack_require__(5);__webpack_require__(1443);var _metric_vis_params=_interopRequireDefault(__webpack_require__(5715));var _lodash=_interopRequireDefault(__webpack_require__(1));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _module=_modules.uiModules.get("kibana");_module.directive("metricVisParams",function(){return{restrict:"E",template:_metric_vis_params["default"],replace:true,link:function link($scope){$scope.collections=$scope.vis.type.editorConfig.collections;$scope.showColorRange=true;$scope.$watch("editorState.params.metric.metricColorMode",function(newValue){switch(newValue){case"Labels":$scope.editorState.params.metric.style.labelColor=true;$scope.editorState.params.metric.style.bgColor=false;break;case"Background":$scope.editorState.params.metric.style.labelColor=false;$scope.editorState.params.metric.style.bgColor=true;break;case"None":$scope.editorState.params.metric.style.labelColor=false;$scope.editorState.params.metric.style.bgColor=false;break}});$scope.resetColors=function(){$scope.uiState.set("vis.colors",null);$scope.customColors=false};$scope.getGreaterThan=function(index){if(index===0)return-Infinity;return $scope.editorState.params.metric.colorsRange[index-1].to};$scope.addRange=function(){var previousRange=_lodash["default"].last($scope.editorState.params.metric.colorsRange);var from=previousRange?previousRange.to:0;var to=previousRange?from+(previousRange.to-previousRange.from):100;$scope.editorState.params.metric.colorsRange.push({from:from,to:to})};$scope.removeRange=function(index){$scope.editorState.params.metric.colorsRange.splice(index,1)};$scope.getColor=function(index){var defaultColors=this.uiState.get("vis.defaultColors");var overwriteColors=this.uiState.get("vis.colors");var colors=defaultColors?_lodash["default"].defaults({},overwriteColors,defaultColors):overwriteColors;return colors?Object.values(colors)[index]:"transparent"};$scope.uiState.on("colorChanged",function(){$scope.customColors=true});$scope.editorState.requiredDescription=_i18n.i18n.translate("metricVis.params.ranges.warning.requiredDescription",{defaultMessage:"Required:"})}}})},5715:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<div class="visEditorSidebar__section">\n\n  <div class="visEditorSidebar__formRow">\n    <label\n      class="visEditorSidebar__formLabel"\n      for="percentageMode"\n      i18n-id="metricVis.params.percentageModeLabel"\n      i18n-default-message="Percentage Mode"\n    >\n    </label>\n    <div class="visEditorSidebar__formControl">\n      <input class="kuiCheckBox" id="percentageMode" type="checkbox" ng-model="editorState.params.metric.percentageMode">\n    </div>\n  </div>\n\n  <div class="visEditorSidebar__formRow">\n    <label\n      class="visEditorSidebar__formLabel"\n      for="showLabels"\n      i18n-id="metricVis.params.showLabelsLabel"\n      i18n-default-message="Show Labels"\n    >\n    </label>\n    <div class="visEditorSidebar__formControl">\n      <input class="kuiCheckBox" id="showLabels" type="checkbox" ng-model="editorState.params.metric.labels.show">\n    </div>\n  </div>\n\n  <div class="visEditorSidebar__collapsible--margin">\n    <div class="visEditorSidebar__collapsibleTitle">\n      <div\n        kbn-accessible-click\n        aria-expanded="{{!!showColorRange}}"\n        aria-controls="metricOptionsRanges"\n        aria-label="{{::\'metricVis.params.ranges.toggleOptionsAriaLabel\' | i18n: { defaultMessage: \'Toggle range options\' } }}"\n        class="visEditorSidebar__collapsibleTitleLabel"\n        ng-click="showColorRange = !showColorRange"\n      >\n        <icon color="\'primary\'" aria-hidden="true" ng-if="showColorRange" type="\'arrowDown\'" size="\'s\'"></icon>\n        <icon color="\'primary\'" aria-hidden="true" ng-if="!showColorRange" type="\'arrowRight\'" size="\'s\'"></icon>\n\n        <span\n          class="visEditorSidebar__collapsibleTitleText"\n          i18n-id="metricVis.params.rangesTitle"\n          i18n-default-message="Ranges"\n        >\n      </span>\n      </div>\n    </div>\n\n    <div id="metricOptionsRanges" ng-show="showColorRange">\n\n      <table class="visEditorAgg__rangesTable form-group" ng-show="editorState.params.metric.colorsRange.length">\n        <tr>\n          <th scope="col">\n            <label\n              id="metricOptionsCustomRangeFrom"\n              i18n-id="metricVis.params.ranges.fromLabel"\n              i18n-default-message="From"\n            >\n            </label>\n          </th>\n          <th scope="col" colspan="2">\n            <label\n              id="metricOptionsCustomRangeTo"\n              i18n-id="metricVis.params.ranges.toLabel"\n              i18n-default-message="To"\n            >\n            </label>\n          </th>\n        </tr>\n\n        <tr ng-repeat="range in editorState.params.metric.colorsRange track by $index">\n          <td>\n            <input\n              aria-labelledby="metricOptionsCustomRangeFrom"\n              ng-model="range.from"\n              type="number"\n              class="form-control"\n              name="range.from"\n              greater-or-equal-than="getGreaterThan($index)"\n              required\n              step="any" />\n          </td>\n          <td>\n            <input\n              aria-labelledby="metricOptionsCustomRangeTo"\n              ng-model="range.to"\n              type="number"\n              class="form-control"\n              name="range.to"\n              greater-or-equal-than="range.from"\n              required\n              step="any" />\n          </td>\n          <td>\n            <button\n              type="button"\n              ng-click="removeRange($index)"\n              ng-show="editorState.params.metric.colorsRange.length > 1"\n              class="kuiButton kuiButton--danger kuiButton--small">\n              <i class="fa fa-times"></i>\n            </button>\n          </td>\n        </tr>\n      </table>\n\n      <div class="hintbox" ng-show="!editorState.params.metric.colorsRange.length">\n        <p>\n          <i class="fa fa-danger text-danger"></i>\n          <span\n            i18n-id="metricVis.params.ranges.warning.specifyRangeDescription"\n            i18n-default-message="{requiredDescription} You must specify at least one range."\n            i18n-values="{ html_requiredDescription: \'<strong>\' + editorState.requiredDescription + \'</strong>\' }"\n          >\n          </span>\n        </p>\n      </div>\n\n      <div\n        ng-click="addRange()"\n        class="kuiButton kuiButton--primary kuiButton--fullWidth"\n        i18n-id="metricVis.params.ranges.addRangeButtonLabel"\n        i18n-default-message="Add Range"\n      >\n      </div>\n\n    </div>\n  </div>\n\n  <div ng-show="editorState.params.metric.colorsRange.length > 1" class="visEditorSidebar__collapsible--margin">\n    <div class="visEditorSidebar__collapsibleTitle">\n      <div\n        kbn-accessible-click\n        aria-expanded="{{!!showColorOptions}}"\n        aria-controls="metricOptionsColors"\n        aria-label="{{::\'metricVis.params.color.toggleOptionsAriaLabel\' | i18n: { defaultMessage: \'Toggle color options\' } }}"\n        class="visEditorSidebar__collapsibleTitleLabel"\n        ng-click="showColorOptions = !showColorOptions"\n      >\n        <icon color="\'primary\'" aria-hidden="true" ng-if="showColorOptions" type="\'arrowDown\'" size="\'s\'"></icon>\n        <icon color="\'primary\'" aria-hidden="true" ng-if="!showColorOptions" type="\'arrowRight\'" size="\'s\'"></icon>\n\n        <span\n          class="visEditorSidebar__collapsibleTitleText"\n          i18n-id="metricVis.params.color.colorOptionsTitle"\n          i18n-default-message="Color Options"\n        >\n      </span>\n      </div>\n    </div>\n    <div id="metricOptionsColors" ng-if="showColorOptions">\n\n      <div class="visEditorSidebar__formRow" ng-show="editorState.params.metric.colorsRange.length > 1">\n        <label\n          class="visEditorSidebar__formLabel"\n          for="metricColorMode"\n          i18n-id="metricVis.params.color.useForLabel"\n          i18n-default-message="Use Color For"\n        >\n        </label>\n        <div class="visEditorSidebar__formControl">\n          <select\n            id="metricColorMode"\n            class="kuiSelect visEditorSidebar__select"\n            ng-model="editorState.params.metric.metricColorMode"\n            ng-options="mode.id as mode.label for mode in collections.metricColorMode"\n          ></select>\n        </div>\n      </div>\n      <div class="visEditorSidebar__formRow" ng-show="editorState.params.metric.metricColorMode !== \'None\'">\n        <label\n          class="visEditorSidebar__formLabel"\n          for="colorSchema"\n          i18n-id="metricVis.params.color.schemaLabel"\n          i18n-default-message="Color Schema"\n        >\n        </label>\n        <div class="visEditorSidebar__formControl">\n          <select\n            id="colorSchema"\n            class="kuiSelect visEditorSidebar__select"\n            ng-model="editorState.params.metric.colorSchema"\n            ng-options="mode.id as mode.label for mode in collections.colorSchemas"\n          ></select>\n        </div>\n        <div class="text-info text-center" ng-show="customColors" ng-click="resetColors()"\n          i18n-id="metricVis.params.color.resetColorDescription"\n          i18n-default-message="reset colors"\n        >\n        </div>\n      </div>\n\n      <div class="visEditorSidebar__formRow"  ng-show="editorState.params.metric.metricColorMode !== \'None\'">\n        <label\n          class="visEditorSidebar__formLabel"\n          for="invertColors"\n          i18n-id="metricVis.params.color.reverseSchemaLabel"\n          i18n-default-message="Reverse Color Schema"\n        >\n        </label>\n        <div class="visEditorSidebar__formControl">\n          <input class="kuiCheckBox" id="invertColors" type="checkbox" ng-model="editorState.params.metric.invertColors">\n        </div>\n      </div>\n\n    </div>\n  </div>\n\n  <div class="visEditorSidebar__collapsible--margin">\n    <div class="visEditorSidebar__collapsibleTitle">\n      <div\n        kbn-accessible-click\n        aria-expanded="{{!!showStyle}}"\n        aria-controls="metricOptionsStyle"\n        aria-label="{{::\'metricVis.params.style.toggleOptionsAriaLabel\' | i18n: { defaultMessage: \'Toggle style options\' } }}"\n        class="visEditorSidebar__collapsibleTitleLabel"\n        ng-click="showStyle = !showStyle"\n      >\n        <icon color="\'primary\'" aria-hidden="true" ng-if="showStyle" type="\'arrowDown\'" size="\'s\'"></icon>\n        <icon color="\'primary\'" aria-hidden="true" ng-if="!showStyle" type="\'arrowRight\'" size="\'s\'"></icon>\n        <span\n          class="visEditorSidebar__collapsibleTitleText"\n          i18n-id="metricVis.params.style.styleTitle"\n          i18n-default-message="Style"\n        >\n        </span>\n      </div>\n    </div>\n\n    <div id="metricOptionsStyle" ng-if="showStyle">\n\n      <div class="visEditorSidebar__formRow">\n        <label class="visEditorSidebar__formLabel" for="metricFontSize">\n          <span\n            i18n-id="metricVis.params.style.fontSizeLabel"\n            i18n-default-message="Font Size ({fontSize}pt)"\n            i18n-values="{ fontSize: editorState.params.metric.style.fontSize }"\n          >\n          </span>\n        </label>\n        <div class="visEditorSidebar__formControl">\n          <input id="metricFontSize" type="range" ng-model="editorState.params.metric.style.fontSize" class="form-control" min="12" max="120" />\n        </div>\n      </div>\n\n    </div>\n  </div>\n</div>\n'},5716:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.MetricVisComponent=void 0;var _lodash=_interopRequireDefault(__webpack_require__(1));var _react=_interopRequireWildcard(__webpack_require__(0));var _heatmap_color=__webpack_require__(812);var _utilities=__webpack_require__(173);var _eui=__webpack_require__(2);var _metric_vis_value=__webpack_require__(5717);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var MetricVisComponent=function(_Component){_inherits(MetricVisComponent,_Component);function MetricVisComponent(){var _getPrototypeOf2;var _this;_classCallCheck(this,MetricVisComponent);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(MetricVisComponent)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"_getFormattedValue",function(fieldFormatter,value){var format=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"text";if(_lodash["default"].isNaN(value))return"-";return fieldFormatter.convert(value,format)});_defineProperty(_assertThisInitialized(_this),"_filterBucket",function(metric){var dimensions=_this.props.visParams.dimensions;if(!dimensions.bucket){return}var table=_this.props.visData;_this.props.vis.API.events.filter({table:table,column:dimensions.bucket.accessor,row:metric.rowIndex})});_defineProperty(_assertThisInitialized(_this),"_renderMetric",function(metric,index){return _react["default"].createElement(_metric_vis_value.MetricVisValue,{key:index,metric:metric,fontSize:_this.props.visParams.metric.style.fontSize,onFilter:_this.props.visParams.dimensions.bucket?_this._filterBucket:null,showLabel:_this.props.visParams.metric.labels.show})});return _this}_createClass(MetricVisComponent,[{key:"_getLabels",value:function _getLabels(){var config=this.props.visParams.metric;var isPercentageMode=config.percentageMode;var colorsRange=config.colorsRange;var max=_lodash["default"].last(colorsRange).to;var labels=[];colorsRange.forEach(function(range){var from=isPercentageMode?Math.round(100*range.from/max):range.from;var to=isPercentageMode?Math.round(100*range.to/max):range.to;labels.push("".concat(from," - ").concat(to))});return labels}},{key:"_getColors",value:function _getColors(){var config=this.props.visParams.metric;var invertColors=config.invertColors;var colorSchema=config.colorSchema;var colorsRange=config.colorsRange;var labels=this._getLabels();var colors={};for(var i=0;i<labels.length;i+=1){var divider=Math.max(colorsRange.length-1,1);var val=invertColors?1-i/divider:i/divider;colors[labels[i]]=(0,_heatmap_color.getHeatmapColors)(val,colorSchema)}return colors}},{key:"_getBucket",value:function _getBucket(val){var config=this.props.visParams.metric;var bucket=_lodash["default"].findIndex(config.colorsRange,function(range){return range.from<=val&&range.to>val});if(bucket===-1){if(val<config.colorsRange[0].from)bucket=0;else bucket=config.colorsRange.length-1}return bucket}},{key:"_getColor",value:function _getColor(val,labels,colors){var bucket=this._getBucket(val);var label=labels[bucket];return colors[label]}},{key:"_needsLightText",value:function _needsLightText(bgColor){var color=/rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(bgColor);if(!color){return false}return(0,_eui.isColorDark)(parseInt(color[1]),parseInt(color[2]),parseInt(color[3]))}},{key:"_processTableGroups",value:function _processTableGroups(table){var _this2=this;var config=this.props.visParams.metric;var dimensions=this.props.visParams.dimensions;var isPercentageMode=config.percentageMode;var min=config.colorsRange[0].from;var max=_lodash["default"].last(config.colorsRange).to;var colors=this._getColors();var labels=this._getLabels();var metrics=[];var bucketColumnId;var bucketFormatter;if(dimensions.bucket){bucketColumnId=table.columns[dimensions.bucket.accessor].id;bucketFormatter=(0,_utilities.getFormat)(dimensions.bucket.format)}dimensions.metrics.forEach(function(metric){var columnIndex=metric.accessor;var column=table.columns[columnIndex];var formatter=(0,_utilities.getFormat)(metric.format);table.rows.forEach(function(row,rowIndex){var title=column.name;var value=row[column.id];var color=_this2._getColor(value,labels,colors);if(isPercentageMode){var percentage=Math.round(100*(value-min)/(max-min));value="".concat(percentage,"%")}else{value=_this2._getFormattedValue(formatter,value,"html")}if(bucketColumnId){var bucketValue=_this2._getFormattedValue(bucketFormatter,row[bucketColumnId]);title="".concat(bucketValue," - ").concat(title)}var shouldColor=config.colorsRange.length>1;metrics.push({label:title,value:value,color:shouldColor&&config.style.labelColor?color:null,bgColor:shouldColor&&config.style.bgColor?color:null,lightText:shouldColor&&config.style.bgColor&&_this2._needsLightText(color),rowIndex:rowIndex})})});return metrics}},{key:"render",value:function render(){var metricsHtml;if(this.props.visData){var metrics=this._processTableGroups(this.props.visData);metricsHtml=metrics.map(this._renderMetric)}return _react["default"].createElement("div",{className:"mtrVis"},metricsHtml)}},{key:"componentDidMount",value:function componentDidMount(){this.props.renderComplete()}},{key:"componentDidUpdate",value:function componentDidUpdate(){this.props.renderComplete()}}]);return MetricVisComponent}(_react.Component);exports.MetricVisComponent=MetricVisComponent},5717:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.MetricVisValue=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(17));var _classnames=_interopRequireDefault(__webpack_require__(61));var _eui=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var MetricVisValue=function(_Component){_inherits(MetricVisValue,_Component);function MetricVisValue(){var _getPrototypeOf2;var _this;_classCallCheck(this,MetricVisValue);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(MetricVisValue)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"onClick",function(){_this.props.onFilter(_this.props.metric)});return _this}_createClass(MetricVisValue,[{key:"render",value:function render(){var _this$props=this.props,fontSize=_this$props.fontSize,metric=_this$props.metric,onFilter=_this$props.onFilter,showLabel=_this$props.showLabel;var hasFilter=!!onFilter;var metricValueStyle={fontSize:"".concat(fontSize,"pt"),color:metric.color};var containerClassName=(0,_classnames["default"])("mtrVis__container",{"mtrVis__container--light":metric.lightText,"mtrVis__container-isfilterable":hasFilter});var metricComponent=_react["default"].createElement("div",{className:containerClassName,style:{backgroundColor:metric.bgColor},onClick:hasFilter?this.onClick:null,tabIndex:hasFilter?0:null,role:hasFilter?"button":null},_react["default"].createElement("div",{className:"mtrVis__value",style:metricValueStyle,dangerouslySetInnerHTML:{__html:metric.value}}),showLabel&&_react["default"].createElement("div",null,metric.label));if(hasFilter){return _react["default"].createElement(_eui.EuiKeyboardAccessible,null,metricComponent)}return metricComponent}}]);return MetricVisValue}(_react.Component);exports.MetricVisValue=MetricVisValue;MetricVisValue.propTypes={fontSize:_propTypes["default"].number.isRequired,metric:_propTypes["default"].object.isRequired,onFilter:_propTypes["default"].func,showLabel:_propTypes["default"].bool}},5718:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.MetricsVisProvider=MetricsVisProvider;var _request_handler=__webpack_require__(1404);var _i18n=__webpack_require__(5);var _editor_controller=__webpack_require__(5719);var _vis_factory=__webpack_require__(97);var _default_feedback_message=__webpack_require__(571);var _panel_types=__webpack_require__(662);var _vis_types=__webpack_require__(85);_vis_types.VisTypesRegistryProvider.register(MetricsVisProvider);function MetricsVisProvider(Private){var VisFactory=Private(_vis_factory.VisFactoryProvider);var ReactEditorController=Private(_editor_controller.ReactEditorControllerProvider).handler;var metricsRequestHandler=Private(_request_handler.MetricsRequestHandlerProvider).handler;return VisFactory.createReactVisualization({name:"metrics",title:_i18n.i18n.translate("tsvb.kbnVisTypes.metricsTitle",{defaultMessage:"TSVB"}),description:_i18n.i18n.translate("tsvb.kbnVisTypes.metricsDescription",{defaultMessage:"Build time-series using a visual pipeline interface"}),icon:"visVisualBuilder",feedbackMessage:_default_feedback_message.defaultFeedbackMessage,visConfig:{defaults:{id:"61ca57f0-469d-11e7-af02-69e470af7417",type:_panel_types.PANEL_TYPES.TIMESERIES,series:[{id:"61ca57f1-469d-11e7-af02-69e470af7417",color:"#68BC00",split_mode:"everything",metrics:[{id:"61ca57f2-469d-11e7-af02-69e470af7417",type:"count"}],separate_axis:0,axis_position:"right",formatter:"number",chart_type:"line",line_width:1,point_size:1,fill:.5,stacked:"none"}],time_field:"",index_pattern:"",interval:"",axis_position:"left",axis_formatter:"number",axis_scale:"normal",show_legend:1,show_grid:1},component:__webpack_require__(1979).VisEditor},editor:ReactEditorController,editorConfig:{component:__webpack_require__(1979).VisEditor},options:{showQueryBar:false,showFilterBar:false,showIndexSelection:false},requestHandler:metricsRequestHandler,responseHandler:"none"})}},5719:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ReactEditorControllerProvider=ReactEditorControllerProvider;var _react=_interopRequireDefault(__webpack_require__(0));var _reactDom=__webpack_require__(27);var _i18n=__webpack_require__(28);var _chrome=_interopRequireDefault(__webpack_require__(19));var _fetch_fields=__webpack_require__(1977);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function ReactEditorControllerProvider(config){var ReactEditorController=function(){function ReactEditorController(el,savedObj){var _this=this;_classCallCheck(this,ReactEditorController);_defineProperty(this,"fetchDefaultIndexPattern",_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var savedObjectsClient,indexPattern;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:savedObjectsClient=_chrome["default"].getSavedObjectsClient();_context.next=3;return savedObjectsClient.get("index-pattern",config.get("defaultIndex"));case 3:indexPattern=_context.sent;return _context.abrupt("return",indexPattern.attributes);case 5:case"end":return _context.stop()}}},_callee)})));_defineProperty(this,"fetchDefaultParams",_asyncToGenerator(regeneratorRuntime.mark(function _callee2(){var _ref3,title,timeFieldName;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return _this.fetchDefaultIndexPattern();case 2:_ref3=_context2.sent;title=_ref3.title;timeFieldName=_ref3.timeFieldName;_this.state.vis.params.default_index_pattern=title;_this.state.vis.params.default_timefield=timeFieldName;_context2.next=9;return(0,_fetch_fields.fetchIndexPatternFields)(_this.state.vis);case 9:_this.state.vis.fields=_context2.sent;_this.state.isLoaded=true;case 11:case"end":return _context2.stop()}}},_callee2)})));_defineProperty(this,"getComponent",function(){return _this.state.vis.type.editorConfig.component});this.el=el;this.state={savedObj:savedObj,vis:savedObj.vis,isLoaded:false}}_createClass(ReactEditorController,[{key:"render",value:function(){var _render2=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(params){var Component;return regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:Component=this.getComponent();_context3.t0=!this.state.isLoaded;if(!_context3.t0){_context3.next=5;break}_context3.next=5;return this.fetchDefaultParams();case 5:(0,_reactDom.render)(_react["default"].createElement(_i18n.I18nContext,null,_react["default"].createElement(Component,{config:config,vis:this.state.vis,visFields:this.state.vis.fields,visParams:this.state.vis.params,savedObj:this.state.savedObj,timeRange:params.timeRange,renderComplete:function renderComplete(){},isEditorMode:true,appState:params.appState})),this.el);case 6:case"end":return _context3.stop()}}},_callee3,this)}));function render(_x){return _render2.apply(this,arguments)}return render}()},{key:"destroy",value:function destroy(){(0,_reactDom.unmountComponentAtNode)(this.el)}}]);return ReactEditorController}();return{name:"react_editor",handler:ReactEditorController}}},5720:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VisEditorVisualization=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(17));var _react=_interopRequireWildcard(__webpack_require__(0));var _lodash=__webpack_require__(1);var _eui=__webpack_require__(2);var _visualize_loader=__webpack_require__(663);var _react2=__webpack_require__(10);var _get_interval=__webpack_require__(1006);var _panel_types=__webpack_require__(662);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var MIN_CHART_HEIGHT=250;var VisEditorVisualizationUI=function(_Component){_inherits(VisEditorVisualizationUI,_Component);function VisEditorVisualizationUI(props){var _this;_classCallCheck(this,VisEditorVisualizationUI);_this=_possibleConstructorReturn(this,_getPrototypeOf(VisEditorVisualizationUI).call(this,props));_defineProperty(_assertThisInitialized(_this),"handleMouseDown",function(){window.addEventListener("mouseup",_this.handleMouseUp);_this.setState({dragging:true})});_defineProperty(_assertThisInitialized(_this),"handleMouseUp",function(){window.removeEventListener("mouseup",_this.handleMouseUp);_this.setState({dragging:false})});_defineProperty(_assertThisInitialized(_this),"handleMouseMove",function(event){if(_this.state.dragging){_this.setState(function(prevState){return{height:Math.max(MIN_CHART_HEIGHT,prevState.height+event.movementY)}})}});_defineProperty(_assertThisInitialized(_this),"onSizeHandleKeyDown",function(ev){var keyCode=ev.keyCode;if(keyCode===_eui.keyCodes.UP||keyCode===_eui.keyCodes.DOWN){ev.preventDefault();_this.setState(function(prevState){var newHeight=prevState.height+(keyCode===_eui.keyCodes.UP?-15:15);return{height:Math.max(MIN_CHART_HEIGHT,newHeight)}})}});_this.state={height:MIN_CHART_HEIGHT,dragging:false,panelInterval:0};_this._visEl=_react["default"].createRef();_this._subscription=null;return _this}_createClass(VisEditorVisualizationUI,[{key:"_loadVisualization",value:function(){var _loadVisualization2=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var _this2=this;var loader,_this$props,uiState,timeRange,appState,savedObj,onDataChange;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return(0,_visualize_loader.getVisualizeLoader)();case 2:loader=_context.sent;if(this._visEl.current){_context.next=5;break}return _context.abrupt("return");case 5:_this$props=this.props,uiState=_this$props.uiState,timeRange=_this$props.timeRange,appState=_this$props.appState,savedObj=_this$props.savedObj,onDataChange=_this$props.onDataChange;this._handler=loader.embedVisualizationWithSavedObject(this._visEl.current,savedObj,{listenOnChange:false,uiState:uiState,timeRange:timeRange,appState:appState});this._subscription=this._handler.data$.subscribe(function(data){_this2.setPanelInterval(data.visData);onDataChange(data)});case 8:case"end":return _context.stop()}}},_callee,this)}));function _loadVisualization(){return _loadVisualization2.apply(this,arguments)}return _loadVisualization}()},{key:"setPanelInterval",value:function setPanelInterval(visData){var panelInterval=(0,_get_interval.getInterval)(visData,this.props.model);if(this.state.panelInterval!==panelInterval){this.setState({panelInterval:panelInterval})}}},{key:"hasShowPanelIntervalValue",value:function hasShowPanelIntervalValue(){var type=(0,_lodash.get)(this.props,"model.type","");var interval=(0,_lodash.get)(this.props,"model.interval",_get_interval.AUTO_INTERVAL);return[_panel_types.PANEL_TYPES.METRIC,_panel_types.PANEL_TYPES.TOP_N,_panel_types.PANEL_TYPES.GAUGE,_panel_types.PANEL_TYPES.MARKDOWN,_panel_types.PANEL_TYPES.TABLE].includes(type)&&(interval===_get_interval.AUTO_INTERVAL||(0,_get_interval.isGteInterval)(interval)||!(0,_get_interval.isIntervalValid)(interval))}},{key:"getFormattedPanelInterval",value:function getFormattedPanelInterval(){var interval=(0,_get_interval.convertIntervalIntoUnit)(this.state.panelInterval,false);return interval?"".concat(interval.unitValue).concat(interval.unitString):null}},{key:"componentWillUnmount",value:function componentWillUnmount(){window.removeEventListener("mousemove",this.handleMouseMove);window.removeEventListener("mouseup",this.handleMouseUp);if(this._handler){this._handler.destroy()}if(this._subscription){this._subscription.unsubscribe()}}},{key:"componentDidMount",value:function componentDidMount(){window.addEventListener("mousemove",this.handleMouseMove);this._loadVisualization()}},{key:"componentDidUpdate",value:function componentDidUpdate(prevProps){if(this._handler&&!(0,_lodash.isEqual)(this.props.timeRange,prevProps.timeRange)){this._handler.update({timeRange:this.props.timeRange})}}},{key:"render",value:function render(){var _this$props2=this.props,dirty=_this$props2.dirty,autoApply=_this$props2.autoApply,title=_this$props2.title,description=_this$props2.description,onToggleAutoApply=_this$props2.onToggleAutoApply,onCommit=_this$props2.onCommit;var style={height:this.state.height};if(this.state.dragging){style.userSelect="none"}var panelInterval=this.hasShowPanelIntervalValue()&&this.getFormattedPanelInterval();var applyMessage=_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.visEditorVisualization.changesSuccessfullyAppliedMessage",defaultMessage:"The latest changes have been applied."});if(dirty){applyMessage=_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.visEditorVisualization.changesHaveNotBeenAppliedMessage",defaultMessage:"The changes to this visualization have not been applied."})}if(autoApply){applyMessage=_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.visEditorVisualization.changesWillBeAutomaticallyAppliedMessage",defaultMessage:"The changes will be automatically applied."})}var applyButton=_react["default"].createElement(_eui.EuiFlexGroup,{className:"tvbEditorVisualization__apply",alignItems:"center"},_react["default"].createElement(_eui.EuiFlexItem,{grow:true},_react["default"].createElement(_eui.EuiSwitch,{id:"tsvbAutoApplyInput",label:_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.visEditorVisualization.autoApplyLabel",defaultMessage:"Auto apply"}),checked:autoApply,onChange:onToggleAutoApply})),panelInterval&&_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiText,{color:"default",size:"xs"},_react["default"].createElement("p",null,_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.visEditorVisualization.panelInterval",defaultMessage:"Interval: {panelInterval}",values:{panelInterval:panelInterval}})))),_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiText,{color:dirty?"default":"subdued",size:"xs"},_react["default"].createElement("p",null,applyMessage))),!autoApply&&_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiButton,{iconType:"play",fill:true,size:"s",onClick:onCommit,disabled:!dirty,"data-test-subj":"applyBtn"},_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.visEditorVisualization.applyChangesLabel",defaultMessage:"Apply changes"}))));return _react["default"].createElement("div",null,_react["default"].createElement("div",{style:style,className:"tvbEditorVisualization","data-shared-items-container":true,"data-title":title,"data-description":description,ref:this._visEl}),_react["default"].createElement("div",{className:"tvbEditor--hideForReporting"},applyButton,_react["default"].createElement("button",{className:"tvbEditorVisualization__draghandle",onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onKeyDown:this.onSizeHandleKeyDown,"aria-label":this.props.intl.formatMessage({id:"tsvb.colorRules.adjustChartSizeAriaLabel",defaultMessage:"Press up/down to adjust the chart size"})},_react["default"].createElement("i",{className:"fa fa-ellipsis-h"}))))}}]);return VisEditorVisualizationUI}(_react.Component);VisEditorVisualizationUI.propTypes={model:_propTypes["default"].object,onCommit:_propTypes["default"].func,uiState:_propTypes["default"].object,onToggleAutoApply:_propTypes["default"].func,savedObj:_propTypes["default"].object,timeRange:_propTypes["default"].object,dirty:_propTypes["default"].bool,autoApply:_propTypes["default"].bool,appState:_propTypes["default"].object};var VisEditorVisualization=(0,_react2.injectI18n)(VisEditorVisualizationUI);exports.VisEditorVisualization=VisEditorVisualization},5721:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.EmbeddedVisualizeHandler=void 0;var _events=__webpack_require__(152);var _lodash=__webpack_require__(1);var Rx=_interopRequireWildcard(__webpack_require__(49));var _operators=__webpack_require__(106);var _i18n=__webpack_require__(5);var _notify=__webpack_require__(24);var _registries=__webpack_require__(129);var _inspector=__webpack_require__(310);var _render_complete=__webpack_require__(312);var _timefilter=__webpack_require__(74);var _vis_filters=__webpack_require__(374);var _pipeline_data_loader=__webpack_require__(5722);var _visualization_loader=__webpack_require__(1439);var _visualize_data_loader=__webpack_require__(5725);var _adapters=__webpack_require__(375);var _utilities=__webpack_require__(173);var _utils=__webpack_require__(5726);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var RENDER_COMPLETE_EVENT="render_complete";var DATA_SHARED_ITEM="data-shared-item";var LOADING_ATTRIBUTE="data-loading";var RENDERING_COUNT_ATTRIBUTE="data-rendering-count";var EmbeddedVisualizeHandler=function(){function EmbeddedVisualizeHandler(element,savedObject,params){var _this=this;_classCallCheck(this,EmbeddedVisualizeHandler);this.element=element;_defineProperty(this,"data$",void 0);_defineProperty(this,"inspectorAdapters",{});_defineProperty(this,"vis",void 0);_defineProperty(this,"handlers",void 0);_defineProperty(this,"loaded",false);_defineProperty(this,"destroyed",false);_defineProperty(this,"pipelineDataLoader",false);_defineProperty(this,"listeners",new _events.EventEmitter);_defineProperty(this,"firstRenderComplete",void 0);_defineProperty(this,"renderCompleteHelper",void 0);_defineProperty(this,"shouldForceNextFetch",false);_defineProperty(this,"debouncedFetchAndRender",(0,_lodash.debounce)(function(){if(_this.destroyed){return}var forceFetch=_this.shouldForceNextFetch;_this.shouldForceNextFetch=false;_this.fetch(forceFetch).then(_this.render)},100));_defineProperty(this,"dataLoaderParams",void 0);_defineProperty(this,"appState",void 0);_defineProperty(this,"uiState",void 0);_defineProperty(this,"dataLoader",void 0);_defineProperty(this,"dataSubject",void 0);_defineProperty(this,"actions",{});_defineProperty(this,"events$",void 0);_defineProperty(this,"autoFetch",void 0);_defineProperty(this,"render",function(){var response=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var executeRenderer=_this.rendererProvider(response);if(!executeRenderer){return}executeRenderer().then(function(){if(!_this.loaded){_this.loaded=true;if(_this.autoFetch){_this.fetchAndRender()}}})});_defineProperty(this,"openInspector",function(){return _inspector.Inspector.open(_this.inspectorAdapters,{title:_this.vis.title})});_defineProperty(this,"hasInspector",function(){return _inspector.Inspector.isAvailable(_this.inspectorAdapters)});_defineProperty(this,"reload",function(){_this.fetchAndRender(true)});_defineProperty(this,"incrementRenderingCount",function(){var renderingCount=Number(_this.element.getAttribute(RENDERING_COUNT_ATTRIBUTE)||0);_this.element.setAttribute(RENDERING_COUNT_ATTRIBUTE,"".concat(renderingCount+1))});_defineProperty(this,"onRenderCompleteListener",function(){_this.listeners.emit(RENDER_COMPLETE_EVENT);_this.element.removeAttribute(LOADING_ATTRIBUTE);_this.incrementRenderingCount()});_defineProperty(this,"onUiStateChange",function(){_this.fetchAndRender()});_defineProperty(this,"getActiveInspectorAdapters",function(){var adapters={};var typeAdapters=_this.vis.type.inspectorAdapters;if(typeAdapters&&typeAdapters.requests||_this.vis.type.requestHandler==="courier"){adapters.requests=new _adapters.RequestAdapter}if(typeAdapters&&typeAdapters.data||_this.vis.type.requestHandler==="courier"){adapters.data=new _adapters.DataAdapter}if(typeAdapters&&typeAdapters.custom){Object.entries(typeAdapters.custom).forEach(function(_ref){var _ref2=_slicedToArray(_ref,2),key=_ref2[0],Adapter=_ref2[1];adapters[key]=new Adapter})}return adapters});_defineProperty(this,"fetchAndRender",function(){var forceFetch=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;_this.shouldForceNextFetch=forceFetch||_this.shouldForceNextFetch;_this.element.setAttribute(LOADING_ATTRIBUTE,"");_this.debouncedFetchAndRender()});_defineProperty(this,"handleVisUpdate",function(){if(_this.appState){_this.appState.vis=_this.vis.getState();_this.appState.save()}_this.fetchAndRender()});_defineProperty(this,"fetch",function(){var forceFetch=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;_this.dataLoaderParams.aggs=_this.vis.getAggConfig();_this.dataLoaderParams.forceFetch=forceFetch;_this.dataLoaderParams.inspectorAdapters=_this.inspectorAdapters;_this.vis.filters={timeRange:_this.dataLoaderParams.timeRange};_this.vis.requestError=undefined;_this.vis.showRequestError=false;return _this.dataLoader.fetch(_this.dataLoaderParams).then(function(data){if(data&&data.type==="error"){throw data.error}if(data&&data.value){_this.dataSubject.next(data.value)}return data})["catch"](_this.handleDataLoaderError)});_defineProperty(this,"handleDataLoaderError",function(error){if(_this.dataLoaderParams.searchSource&&_this.dataLoaderParams.searchSource.cancelQueued){_this.dataLoaderParams.searchSource.cancelQueued()}_this.vis.requestError=error;_this.vis.showRequestError=error.type&&["NO_OP_SEARCH_STRATEGY","UNSUPPORTED_QUERY"].includes(error.type);_notify.toastNotifications.addDanger({title:_i18n.i18n.translate("common.ui.visualize.dataLoaderError",{defaultMessage:"Error in visualization"}),text:error.message})});_defineProperty(this,"rendererProvider",function(response){var renderer=null;var args=[];if(_this.pipelineDataLoader){renderer=_registries.registries.renderers.get((0,_lodash.get)(response||{},"as","visualization"));args=[_this.element,(0,_lodash.get)(response,"value",{visType:_this.vis.type.name}),_this.handlers]}else{renderer=_visualization_loader.visualizationLoader;args=[_this.element,_this.vis,(0,_lodash.get)(response,"value.visData",null),(0,_lodash.get)(response,"value.visConfig",_this.vis.params),_this.uiState,{listenOnChange:false}]}if(!renderer){return null}return function(){var _renderer;return(_renderer=renderer).render.apply(_renderer,_toConsumableArray(args))}});var searchSource=savedObject.searchSource,vis=savedObject.vis;var appState=params.appState,uiState=params.uiState,queryFilter=params.queryFilter,timeRange=params.timeRange,filters=params.filters,query=params.query,_params$autoFetch=params.autoFetch,autoFetch=_params$autoFetch===void 0?true:_params$autoFetch,_params$pipelineDataL=params.pipelineDataLoader,pipelineDataLoader=_params$pipelineDataL===void 0?false:_params$pipelineDataL,Private=params.Private;this.dataLoaderParams={searchSource:searchSource,timeRange:timeRange,query:query,queryFilter:queryFilter,filters:filters,uiState:uiState,aggs:vis.getAggConfig(),forceFetch:false};this.pipelineDataLoader=pipelineDataLoader;this.firstRenderComplete=new Promise(function(resolve){_this.listeners.once(RENDER_COMPLETE_EVENT,resolve)});element.setAttribute(LOADING_ATTRIBUTE,"");element.setAttribute(DATA_SHARED_ITEM,"");element.setAttribute(RENDERING_COUNT_ATTRIBUTE,"0");element.addEventListener("renderComplete",this.onRenderCompleteListener);this.autoFetch=autoFetch;this.appState=appState;this.vis=vis;if(uiState){vis._setUiState(uiState)}this.uiState=this.vis.getUiState();this.handlers={vis:this.vis,uiState:this.uiState,onDestroy:function onDestroy(fn){return _this.handlers.destroyFn=fn}};this.vis.on("update",this.handleVisUpdate);this.vis.on("reload",this.reload);this.uiState.on("change",this.onUiStateChange);if(autoFetch){_timefilter.timefilter.on("autoRefreshFetch",this.reload)}this.vis.API.getGeohashBounds=function(){return(0,_utils.queryGeohashBounds)(_this.vis,{filters:_this.dataLoaderParams.filters,query:_this.dataLoaderParams.query})};this.dataLoader=pipelineDataLoader?new _pipeline_data_loader.PipelineDataLoader(vis):new _visualize_data_loader.VisualizeDataLoader(vis,Private);var visFilters=Private(_vis_filters.VisFiltersProvider);this.renderCompleteHelper=new _render_complete.RenderCompleteHelper(element);this.inspectorAdapters=this.getActiveInspectorAdapters();this.vis.openInspector=this.openInspector;this.vis.hasInspector=this.hasInspector;(0,_lodash.forEach)(this.vis.type.events,function(event,eventName){if(event.disabled||!eventName){return}else{_this.actions[eventName]=event.defaultAction}});this.handlers.eventsSubject=new Rx.Subject;this.vis.eventsSubject=this.handlers.eventsSubject;this.events$=this.handlers.eventsSubject.asObservable().pipe((0,_operators.share)());this.events$.subscribe(function(event){if(_this.actions[event.name]){event.data.aggConfigs=(0,_utilities.getTableAggs)(_this.vis);var newFilters=_this.actions[event.name](event.data)||[];visFilters.pushFilters(newFilters)}});this.dataSubject=new Rx.Subject;this.data$=this.dataSubject.asObservable().pipe((0,_operators.share)());this.render()}_createClass(EmbeddedVisualizeHandler,[{key:"update",value:function update(){var _this2=this;var params=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var dataAttrs=params.dataAttrs;if(dataAttrs){Object.keys(dataAttrs).forEach(function(key){if(dataAttrs[key]===null){_this2.element.removeAttribute("data-".concat(key));return}_this2.element.setAttribute("data-".concat(key),dataAttrs[key])})}var fetchRequired=false;if(params.hasOwnProperty("timeRange")){fetchRequired=true;this.dataLoaderParams.timeRange=params.timeRange}if(params.hasOwnProperty("filters")){fetchRequired=true;this.dataLoaderParams.filters=params.filters}if(params.hasOwnProperty("query")){fetchRequired=true;this.dataLoaderParams.query=params.query}if(fetchRequired){this.fetchAndRender()}}},{key:"destroy",value:function destroy(){this.destroyed=true;this.debouncedFetchAndRender.cancel();if(this.autoFetch){_timefilter.timefilter.off("autoRefreshFetch",this.reload)}this.vis.removeListener("reload",this.reload);this.vis.removeListener("update",this.handleVisUpdate);this.element.removeEventListener("renderComplete",this.onRenderCompleteListener);this.uiState.off("change",this.onUiStateChange);_visualization_loader.visualizationLoader.destroy(this.element);this.renderCompleteHelper.destroy();if(this.handlers.destroyFn){this.handlers.destroyFn()}}},{key:"getElement",value:function getElement(){return this.element}},{key:"whenFirstRenderComplete",value:function whenFirstRenderComplete(){return this.firstRenderComplete}},{key:"addRenderCompleteListener",value:function addRenderCompleteListener(listener){this.listeners.addListener(RENDER_COMPLETE_EVENT,listener)}},{key:"removeRenderCompleteListener",value:function removeRenderCompleteListener(listener){this.listeners.removeListener(RENDER_COMPLETE_EVENT,listener)}}]);return EmbeddedVisualizeHandler}();exports.EmbeddedVisualizeHandler=EmbeddedVisualizeHandler},5722:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PipelineDataLoader=void 0;var _pipeline_helpers=__webpack_require__(5723);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var PipelineDataLoader=function(){function PipelineDataLoader(vis){_classCallCheck(this,PipelineDataLoader);this.vis=vis}_createClass(PipelineDataLoader,[{key:"fetch",value:function(){var _fetch=_asyncToGenerator(regeneratorRuntime.mark(function _callee(params){return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return(0,_pipeline_helpers.buildPipeline)(this.vis,params);case 2:this.vis.pipelineExpression=_context.sent;_context.next=5;return(0,_pipeline_helpers.runPipeline)(this.vis.pipelineExpression,{},{getInitialContext:function getInitialContext(){return{type:"kibana_context",query:params.query,timeRange:params.timeRange,filters:params.filters?params.filters.filter(function(filter){return!filter.meta.disabled}):undefined}},inspectorAdapters:params.inspectorAdapters});case 5:return _context.abrupt("return",_context.sent);case 6:case"end":return _context.stop()}}},_callee,this)}));function fetch(_x){return _fetch.apply(this,arguments)}return fetch}()}]);return PipelineDataLoader}();exports.PipelineDataLoader=PipelineDataLoader},5723:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"buildPipeline",{enumerable:true,get:function get(){return _build_pipeline.buildPipeline}});Object.defineProperty(exports,"runPipeline",{enumerable:true,get:function get(){return _run_pipeline.runPipeline}});var _build_pipeline=__webpack_require__(1005);var _run_pipeline=__webpack_require__(5724)},5724:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.runPipeline=void 0;var _common=__webpack_require__(226);var _interpreter=__webpack_require__(1400);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}var runPipeline=function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(expression,context,handlers){var ast,_ref2,interpreter,pipelineResponse;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:ast=(0,_common.fromExpression)(expression);_context.next=3;return(0,_interpreter.getInterpreter)();case 3:_ref2=_context.sent;interpreter=_ref2.interpreter;_context.next=7;return interpreter.interpretAst(ast,context,handlers);case 7:pipelineResponse=_context.sent;return _context.abrupt("return",pipelineResponse);case 9:case"end":return _context.stop()}}},_callee)}));return function runPipeline(_x,_x2,_x3){return _ref.apply(this,arguments)}}();exports.runPipeline=runPipeline},5725:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VisualizeDataLoader=void 0;var _lodash=__webpack_require__(1);var _build_pipeline=__webpack_require__(1005);var _vis_request_handlers=__webpack_require__(565);var _vis_response_handlers=__webpack_require__(562);function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function getHandler(from,type){if(typeof type==="function"){return type}var handlerDesc=from.find(function(handler){return handler.name===type});if(!handlerDesc){throw new Error('Could not find handler "'.concat(type,'".'))}return handlerDesc.handler}var VisualizeDataLoader=function(){function VisualizeDataLoader(vis,Private){_classCallCheck(this,VisualizeDataLoader);this.vis=vis;_defineProperty(this,"requestHandler",void 0);_defineProperty(this,"responseHandler",void 0);_defineProperty(this,"visData",void 0);_defineProperty(this,"previousVisState",void 0);_defineProperty(this,"previousRequestHandlerResponse",void 0);var _vis$type=vis.type,requestHandler=_vis$type.requestHandler,responseHandler=_vis$type.responseHandler;var requestHandlers=Private(_vis_request_handlers.VisRequestHandlersRegistryProvider);var responseHandlers=Private(_vis_response_handlers.VisResponseHandlersRegistryProvider);this.requestHandler=getHandler(requestHandlers,requestHandler);this.responseHandler=getHandler(responseHandlers,responseHandler)}_createClass(VisualizeDataLoader,[{key:"fetch",value:function(){var _fetch=_asyncToGenerator(regeneratorRuntime.mark(function _callee(params){var visParams,filters,savedFilters,query,requestHandlerResponse,canSkipResponseHandler;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return(0,_build_pipeline.getVisParams)(this.vis,{searchSource:params.searchSource,timeRange:params.timeRange});case 2:visParams=_context.sent;filters=params.filters||[];savedFilters=params.searchSource.getField("filter")||[];query=params.query||params.searchSource.getField("query");_context.next=8;return this.requestHandler(_objectSpread({partialRows:this.vis.params.partialRows||this.vis.type.requiresPartialRows,metricsAtAllLevels:this.vis.isHierarchical(),visParams:visParams},params,{query:query,filters:filters.concat(savedFilters).filter(function(f){return!f.meta.disabled})}));case 8:requestHandlerResponse=_context.sent;canSkipResponseHandler=this.previousRequestHandlerResponse&&this.previousRequestHandlerResponse===requestHandlerResponse&&this.previousVisState&&(0,_lodash.isEqual)(this.previousVisState,this.vis.getState());this.previousVisState=this.vis.getState();this.previousRequestHandlerResponse=requestHandlerResponse;if(canSkipResponseHandler){_context.next=16;break}_context.next=15;return Promise.resolve(this.responseHandler(requestHandlerResponse,visParams.dimensions));case 15:this.visData=_context.sent;case 16:return _context.abrupt("return",{as:"visualization",value:{visType:this.vis.type.name,visData:this.visData,visConfig:visParams,params:{}}});case 17:case"end":return _context.stop()}}},_callee,this)}));function fetch(_x){return _fetch.apply(this,arguments)}return fetch}()}]);return VisualizeDataLoader}();exports.VisualizeDataLoader=VisualizeDataLoader},5726:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"queryGeohashBounds",{enumerable:true,get:function get(){return _query_geohash_bounds.queryGeohashBounds}});var _query_geohash_bounds=__webpack_require__(5727)},5727:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.queryGeohashBounds=queryGeohashBounds;var _i18n=__webpack_require__(5);var _lodash=__webpack_require__(1);var _notify=__webpack_require__(24);function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function queryGeohashBounds(_x,_x2){return _queryGeohashBounds.apply(this,arguments)}function _queryGeohashBounds(){_queryGeohashBounds=_asyncToGenerator(regeneratorRuntime.mark(function _callee(vis,params){var agg,searchSource,filters,query,esResp;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:agg=vis.getAggConfig().find(function(a){return(0,_lodash.get)(a,"type.dslName")==="geohash_grid"});if(!agg){_context.next=19;break}searchSource=vis.searchSource.createChild();searchSource.setField("size",0);searchSource.setField("aggs",function(){var geoBoundsAgg=vis.getAggConfig().createAggConfig({type:"geo_bounds",enabled:true,params:{field:agg.getField()},schema:"metric"},{addToAggConfigs:false});return{1:geoBoundsAgg.toDsl()}});filters=params.filters,query=params.query;if(filters){searchSource.setField("filter",function(){var activeFilters=_toConsumableArray(filters);var indexPattern=agg.getIndexPattern();var useTimeFilter=!!indexPattern.timeFieldName;if(useTimeFilter){activeFilters.push(vis.API.timeFilter.createFilter(indexPattern))}return activeFilters})}if(query){searchSource.setField("query",query)}_context.prev=8;_context.next=11;return searchSource.fetch();case 11:esResp=_context.sent;return _context.abrupt("return",(0,_lodash.get)(esResp,"aggregations.1.bounds"));case 15:_context.prev=15;_context.t0=_context["catch"](8);_notify.toastNotifications.addDanger({title:_i18n.i18n.translate("common.ui.visualize.queryGeohashBounds.unableToGetBoundErrorTitle",{defaultMessage:"Unable to get bounds"}),text:"".concat(_context.t0.message)});return _context.abrupt("return");case 19:case"end":return _context.stop()}}},_callee,null,[[8,15]])}));return _queryGeohashBounds.apply(this,arguments)}},5728:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.relativeOptions=void 0;var _i18n=__webpack_require__(5);var relativeOptions=[{text:_i18n.i18n.translate("common.ui.timepicker.relOpts.secondsAgo",{defaultMessage:"Seconds ago"}),value:"s"},{text:_i18n.i18n.translate("common.ui.timepicker.relOpts.minutesAgo",{defaultMessage:"Minutes ago"}),value:"m"},{text:_i18n.i18n.translate("common.ui.timepicker.relOpts.hoursAgo",{defaultMessage:"Hours ago"}),value:"h"},{text:_i18n.i18n.translate("common.ui.timepicker.relOpts.daysAgo",{defaultMessage:"Days ago"}),value:"d"},{text:_i18n.i18n.translate("common.ui.timepicker.relOpts.weeksAgo",{defaultMessage:"Weeks ago"}),value:"w"},{text:_i18n.i18n.translate("common.ui.timepicker.relOpts.monthsAgo",{defaultMessage:"Months ago"}),value:"M"},{text:_i18n.i18n.translate("common.ui.timepicker.relOpts.yearsAgo",{defaultMessage:"Years ago"}),value:"y"},{text:_i18n.i18n.translate("common.ui.timepicker.relOpts.secondsFromNow",{defaultMessage:"Seconds from now"}),value:"s+"},{text:_i18n.i18n.translate("common.ui.timepicker.relOpts.minutesFromNow",{defaultMessage:"Minutes from now"}),value:"m+"},{text:_i18n.i18n.translate("common.ui.timepicker.relOpts.hoursFromNow",{defaultMessage:"Hours from now"}),value:"h+"},{text:_i18n.i18n.translate("common.ui.timepicker.relOpts.daysFromNow",{defaultMessage:"Days from now"}),value:"d+"},{text:_i18n.i18n.translate("common.ui.timepicker.relOpts.weeksFromNow",{defaultMessage:"Weeks from now"}),value:"w+"},{text:_i18n.i18n.translate("common.ui.timepicker.relOpts.monthsFromNow",{defaultMessage:"Months from now"}),value:"M+"},{text:_i18n.i18n.translate("common.ui.timepicker.relOpts.yearsFromNow",{defaultMessage:"Years from now"}),value:"y+"}];exports.relativeOptions=relativeOptions},5729:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Visualization=Visualization;var _propTypes=_interopRequireDefault(__webpack_require__(17));var _react=_interopRequireDefault(__webpack_require__(0));var _lodash=_interopRequireDefault(__webpack_require__(1));var _vis=__webpack_require__(5730);var _vis2=__webpack_require__(5755);var _vis3=__webpack_require__(5759);var _vis4=__webpack_require__(5761);var _vis5=__webpack_require__(5763);var _vis6=__webpack_require__(5767);var _error=__webpack_require__(1989);var _no_data=__webpack_require__(5768);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var types={timeseries:_vis.TimeseriesVisualization,metric:_vis2.metric,top_n:_vis3.TopNVisualization,table:_vis4.TableVis,gauge:_vis5.gauge,markdown:_vis6.MarkdownVisualization};function Visualization(props){var visData=props.visData,model=props.model;var error=_lodash["default"].get(visData,"".concat(model.id,".error"));if(error){return _react["default"].createElement("div",{className:props.className},_react["default"].createElement(_error.ErrorComponent,{error:error}))}var path=visData.type==="table"?"series":"".concat(model.id,".series");var noData=_lodash["default"].get(visData,path,[]).length===0;if(noData){return _react["default"].createElement("div",{className:props.className},_react["default"].createElement(_no_data.NoDataComponent,null))}var component=types[model.type];if(component){return _react["default"].createElement(component,{dateFormat:props.dateFormat,backgroundColor:props.backgroundColor,model:props.model,onBrush:props.onBrush,onChange:props.onChange,onUiState:props.onUiState,uiState:props.uiState,visData:visData.type===model.type?visData:{},getConfig:props.getConfig})}return _react["default"].createElement("div",{className:props.className})}Visualization.propTypes={backgroundColor:_propTypes["default"].string,className:_propTypes["default"].string,model:_propTypes["default"].object,onBrush:_propTypes["default"].func,onChange:_propTypes["default"].func,onUiState:_propTypes["default"].func,uiState:_propTypes["default"].object,visData:_propTypes["default"].object,dateFormat:_propTypes["default"].string,getConfig:_propTypes["default"].func};Visualization.defaultProps={className:"tvbVis"}},5730:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TimeseriesVisualization=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(17));var _react=_interopRequireWildcard(__webpack_require__(0));var _notify=__webpack_require__(24);var _markdown=__webpack_require__(508);var _tick_formatter=__webpack_require__(344);var _lodash=_interopRequireDefault(__webpack_require__(1));var _timeseries=__webpack_require__(5731);var _replace_vars=__webpack_require__(664);var _get_axis_label_string=__webpack_require__(5753);var _get_interval=__webpack_require__(1006);var _create_xaxis_formatter=__webpack_require__(5754);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function hasSeparateAxis(row){return row.separate_axis}var TimeseriesVisualization=function(_Component){_inherits(TimeseriesVisualization,_Component);function TimeseriesVisualization(){var _getPrototypeOf2;var _this;_classCallCheck(this,TimeseriesVisualization);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(TimeseriesVisualization)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"getInterval",function(){var _this$props=_this.props,visData=_this$props.visData,model=_this$props.model;return(0,_get_interval.getInterval)(visData,model)});_defineProperty(_assertThisInitialized(_this),"xaxisFormatter",function(val){var _this$props$visData=_this.props.visData,scaledDataFormat=_this$props$visData.scaledDataFormat,dateFormat=_this$props$visData.dateFormat;if(!scaledDataFormat||!dateFormat)return val;var formatter=(0,_create_xaxis_formatter.createXaxisFormatter)(_this.getInterval(),scaledDataFormat,dateFormat);return formatter(val)});return _this}_createClass(TimeseriesVisualization,[{key:"componentDidUpdate",value:function componentDidUpdate(){if(this.showToastNotification&&this.notificationReason!==this.showToastNotification.reason){if(this.notification){_notify.toastNotifications.remove(this.notification)}this.notificationReason=this.showToastNotification.reason;this.notification=_notify.toastNotifications.addDanger({title:this.showToastNotification.title,text:_react["default"].createElement(_markdown.MarkdownSimple,null,this.showToastNotification.reason)})}if(!this.showToastNotification&&this.notification){_notify.toastNotifications.remove(this.notification);this.notificationReason=null;this.notification=null}}},{key:"render",value:function render(){var _this2=this;var _this$props2=this.props,backgroundColor=_this$props2.backgroundColor,model=_this$props2.model,visData=_this$props2.visData;var series=_lodash["default"].get(visData,"".concat(model.id,".series"),[]);var annotations;this.showToastNotification=null;if(model.annotations&&Array.isArray(model.annotations)){annotations=model.annotations.map(function(annotation){var data=_lodash["default"].get(visData,"".concat(model.id,".annotations.").concat(annotation.id),[]).map(function(item){return[item.key,item.docs]});return{id:annotation.id,color:annotation.color,icon:annotation.icon,series:data.map(function(s){return[s[0],s[1].map(function(doc){var vars=(0,_replace_vars.replaceVars)(annotation.template,null,doc);if(vars instanceof Error){_this2.showToastNotification=vars.error.caused_by;return annotation.template}return vars})]})}})}var seriesModel=model.series.map(function(s){return _lodash["default"].cloneDeep(s)});var firstSeries=seriesModel.find(function(s){return s.formatter&&!s.separate_axis});var formatter=(0,_tick_formatter.tickFormatter)(_lodash["default"].get(firstSeries,"formatter"),_lodash["default"].get(firstSeries,"value_template"),this.props.getConfig);var mainAxis={position:model.axis_position,tickFormatter:formatter,axisFormatter:_lodash["default"].get(firstSeries,"formatter","number"),axisFormatterTemplate:_lodash["default"].get(firstSeries,"value_template")};if(model.axis_min)mainAxis.min=model.axis_min;if(model.axis_max)mainAxis.max=model.axis_max;if(model.axis_scale==="log"){mainAxis.mode="log";mainAxis.transform=function(value){return value>0?Math.log(value)/Math.LN10:null};mainAxis.inverseTransform=function(value){return Math.pow(10,value)}}var yaxes=[mainAxis];seriesModel.forEach(function(s){series.filter(function(r){return _lodash["default"].startsWith(r.id,s.id)}).forEach(function(r){return r.tickFormatter=(0,_tick_formatter.tickFormatter)(s.formatter,s.value_template,_this2.props.getConfig)});if(s.hide_in_legend){series.filter(function(r){return _lodash["default"].startsWith(r.id,s.id)}).forEach(function(r){return delete r.label})}if(s.stacked!=="none"){series.filter(function(r){return _lodash["default"].startsWith(r.id,s.id)}).forEach(function(row){row.data=row.data.map(function(point){if(!point[1])return[point[0],0];return point})})}if(s.stacked==="percent"){s.separate_axis=true;s.axisFormatter="percent";s.axis_min=0;s.axis_max=1;s.axis_position=model.axis_position;var seriesData=series.filter(function(r){return _lodash["default"].startsWith(r.id,s.id)});var first=seriesData[0];if(first){first.data.forEach(function(row,index){var rowSum=seriesData.reduce(function(acc,item){return item.data[index][1]+acc},0);seriesData.forEach(function(item){item.data[index][1]=rowSum&&item.data[index][1]/rowSum||0})})}}});var interval=this.getInterval();var axisCount=1;if(seriesModel.some(hasSeparateAxis)){seriesModel.forEach(function(row){if(row.separate_axis){axisCount++;var _formatter=(0,_tick_formatter.tickFormatter)(row.formatter,row.value_template,_this2.props.getConfig);var yaxis={alignTicksWithAxis:1,position:row.axis_position,tickFormatter:_formatter,axisFormatter:row.axis_formatter,axisFormatterTemplate:row.value_template};if(row.axis_min!=null)yaxis.min=row.axis_min;if(row.axis_max!=null)yaxis.max=row.axis_max;yaxes.push(yaxis);series.filter(function(r){return _lodash["default"].startsWith(r.id,row.id)}).forEach(function(r){r.yaxis=axisCount})}})}var panelBackgroundColor=model.background_color||backgroundColor;var style={backgroundColor:panelBackgroundColor};var params={dateFormat:this.props.dateFormat,crosshair:true,tickFormatter:formatter,legendPosition:model.legend_position||"right",backgroundColor:panelBackgroundColor,series:series,annotations:annotations,yaxes:yaxes,showGrid:Boolean(model.show_grid),legend:Boolean(model.show_legend),xAxisFormatter:this.xaxisFormatter,onBrush:function onBrush(ranges){if(_this2.props.onBrush)_this2.props.onBrush(ranges)}};if(interval){params.xaxisLabel=(0,_get_axis_label_string.getAxisLabelString)(interval)}return _react["default"].createElement("div",{className:"tvbVis",style:style},_react["default"].createElement(_timeseries.Timeseries,params))}}]);return TimeseriesVisualization}(_react.Component);exports.TimeseriesVisualization=TimeseriesVisualization;TimeseriesVisualization.propTypes={backgroundColor:_propTypes["default"].string,className:_propTypes["default"].string,model:_propTypes["default"].object,onBrush:_propTypes["default"].func,onChange:_propTypes["default"].func,visData:_propTypes["default"].object,dateFormat:_propTypes["default"].string,getConfig:_propTypes["default"].func}},5731:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Timeseries=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(17));var _react=_interopRequireWildcard(__webpack_require__(0));var _classnames=_interopRequireDefault(__webpack_require__(61));var _lodash=_interopRequireDefault(__webpack_require__(1));var _get_last_value=__webpack_require__(287);var _set_is_reversed=__webpack_require__(418);var _timeseries_chart=__webpack_require__(5732);var _legend=__webpack_require__(5750);var _events=__webpack_require__(1983);var _reactcss=_interopRequireDefault(__webpack_require__(247));function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var Timeseries=function(_Component){_inherits(Timeseries,_Component);function Timeseries(props){var _this;_classCallCheck(this,Timeseries);_this=_possibleConstructorReturn(this,_getPrototypeOf(Timeseries).call(this,props));var values=_this.getLastValues(props);_this.state={showLegend:props.legend!=null?props.legend:true,values:values||{},show:_lodash["default"].keys(values)||[],ignoreLegendUpdates:false,ignoreVisibilityUpdates:false};_this.toggleFilter=_this.toggleFilter.bind(_assertThisInitialized(_this));_this.handleHideClick=_this.handleHideClick.bind(_assertThisInitialized(_this));_this.plothover=_this.plothover.bind(_assertThisInitialized(_this));return _this}_createClass(Timeseries,[{key:"filterLegend",value:function filterLegend(id){if(!_lodash["default"].has(this.state.values,id))return[];var notAllShown=_lodash["default"].keys(this.state.values).length!==this.state.show.length;var isCurrentlyShown=_lodash["default"].includes(this.state.show,id);var show=[];if(notAllShown&&isCurrentlyShown){this.setState({ignoreVisibilityUpdates:false,show:Object.keys(this.state.values)})}else{show.push(id);this.setState({ignoreVisibilityUpdates:true,show:[id]})}return show}},{key:"toggleFilter",value:function toggleFilter(event,id){var show=this.filterLegend(id);if(_lodash["default"].isFunction(this.props.onFilter)){this.props.onFilter(show)}_events.eventBus.trigger("toggleFilter",id,this)}},{key:"getLastValues",value:function getLastValues(props){var values={};props.series.forEach(function(row){if(!row.id)row.id=row.label;values[row.id]=(0,_get_last_value.getLastValue)(row.data)});return values}},{key:"updateLegend",value:function updateLegend(pos,item){var values={};if(pos){this.props.series.forEach(function(row){if(row.data&&Array.isArray(row.data)){if(item&&row.data[item.dataIndex]&&row.data[item.dataIndex][0]===item.datapoint[0]){values[row.id]=row.data[item.dataIndex][1]}else{var closest;for(var i=0;i<row.data.length;i++){closest=i;if(row.data[i]&&pos.x<row.data[i][0])break}if(!row.data[closest])return values[row.id]=null;var _row$data$closest=_slicedToArray(row.data[closest],2),value=_row$data$closest[1];values[row.id]=value!=null&&value||null}}})}else{_lodash["default"].assign(values,this.getLastValues(this.props))}this.setState({values:values})}},{key:"componentWillReceiveProps",value:function componentWillReceiveProps(props){if(props.legend!==this.props.legend)this.setState({showLegend:props.legend});if(!this.state.ignoreLegendUpdates){var values=this.getLastValues(props);var currentKeys=_lodash["default"].keys(this.state.values);var keys=_lodash["default"].keys(values);var diff=_lodash["default"].difference(keys,currentKeys);var nextState={values:values};if(diff.length&&!this.state.ignoreVisibilityUpdates){nextState.show=keys}this.setState(nextState)}}},{key:"plothover",value:function plothover(event,pos,item){this.updateLegend(pos,item)}},{key:"handleHideClick",value:function handleHideClick(){this.setState({showLegend:!this.state.showLegend})}},{key:"render",value:function render(){var classes=(0,_classnames["default"])("tvbVisTimeSeries",{"tvbVisTimeSeries--reversed":(0,_set_is_reversed.isBackgroundInverted)(this.props.backgroundColor)});var styles=(0,_reactcss["default"])({bottomLegend:{content:{flexDirection:"column"}}},{bottomLegend:this.props.legendPosition==="bottom"});return _react["default"].createElement("div",{className:classes,"data-test-subj":"timeseriesChart"},_react["default"].createElement("div",{style:styles.content,className:"tvbVisTimeSeries__content"},_react["default"].createElement("div",{className:"tvbVisTimeSeries__visualization"},_react["default"].createElement(_timeseries_chart.TimeseriesChart,{dateFormat:this.props.dateFormat,crosshair:this.props.crosshair,onBrush:this.props.onBrush,plothover:this.plothover,backgroundColor:this.props.backgroundColor,series:this.props.series,annotations:this.props.annotations,show:this.state.show,showGrid:this.props.showGrid,tickFormatter:this.props.tickFormatter,options:this.props.options,xaxisLabel:this.props.xaxisLabel,yaxes:this.props.yaxes,xAxisFormatter:this.props.xAxisFormatter})),_react["default"].createElement(_legend.Legend,{legendPosition:this.props.legendPosition,onClick:this.handleHideClick,onToggle:this.toggleFilter,series:this.props.series,showLegend:this.state.showLegend,seriesValues:this.state.values,seriesFilter:this.state.show,tickFormatter:this.props.tickFormatter})))}}]);return Timeseries}(_react.Component);exports.Timeseries=Timeseries;Timeseries.defaultProps={legend:true,showGrid:true};Timeseries.propTypes={legend:_propTypes["default"].bool,legendPosition:_propTypes["default"].string,onFilter:_propTypes["default"].func,series:_propTypes["default"].array,annotations:_propTypes["default"].array,backgroundColor:_propTypes["default"].string,options:_propTypes["default"].object,tickFormatter:_propTypes["default"].func,showGrid:_propTypes["default"].bool,xaxisLabel:_propTypes["default"].string,dateFormat:_propTypes["default"].string}},5732:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.scaleUp=scaleUp;exports.scaleDown=scaleDown;exports.TimeseriesChart=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(17));var _react=_interopRequireWildcard(__webpack_require__(0));var _classnames=_interopRequireDefault(__webpack_require__(61));var _set_is_reversed=__webpack_require__(418);var _moment=_interopRequireDefault(__webpack_require__(23));var _reactcss=_interopRequireDefault(__webpack_require__(247));var _flot_chart=__webpack_require__(5733);var _annotation=__webpack_require__(5749);var _eui=__webpack_require__(2);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function scaleUp(value){return window.devicePixelRatio*value}function scaleDown(value){return value/window.devicePixelRatio}var TimeseriesChart=function(_Component){_inherits(TimeseriesChart,_Component);function TimeseriesChart(props){var _this;_classCallCheck(this,TimeseriesChart);_this=_possibleConstructorReturn(this,_getPrototypeOf(TimeseriesChart).call(this,props));_this.state={annotations:[],showTooltip:false,mouseHoverTimer:false};_this.handleMouseLeave=_this.handleMouseLeave.bind(_assertThisInitialized(_this));_this.handleMouseOver=_this.handleMouseOver.bind(_assertThisInitialized(_this));_this.renderAnnotations=_this.renderAnnotations.bind(_assertThisInitialized(_this));_this.handleDraw=_this.handleDraw.bind(_assertThisInitialized(_this));return _this}_createClass(TimeseriesChart,[{key:"calculateLeftRight",value:function calculateLeftRight(item,plot){var canvas=plot.getCanvas();var point=plot.pointOffset({x:item.datapoint[0],y:item.datapoint[1]});var edge=(scaleUp(point.left)+10)/canvas.width;var right;var left;if(edge>.5){right=scaleDown(canvas.width)-point.left;left=null}else{right=null;left=point.left}return[left,right]}},{key:"handleDraw",value:function handleDraw(plot){if(!plot||!this.props.annotations)return;var annotations=this.props.annotations.reduce(function(acc,anno){return acc.concat(anno.series.map(function(series){return{series:series,plot:plot,key:"".concat(anno.id,"-").concat(series[0]),icon:anno.icon,color:anno.color}}))},[]);this.setState({annotations:annotations})}},{key:"handleMouseOver",value:function handleMouseOver(e,pos,item,plot){if(typeof this.state.mouseHoverTimer==="number"){window.clearTimeout(this.state.mouseHoverTimer)}if(item){var plotOffset=plot.getPlotOffset();var point=plot.pointOffset({x:item.datapoint[0],y:item.datapoint[1]});var _this$calculateLeftRi=this.calculateLeftRight(item,plot),_this$calculateLeftRi2=_slicedToArray(_this$calculateLeftRi,2),left=_this$calculateLeftRi2[0],right=_this$calculateLeftRi2[1];var top=point.top;this.setState({showTooltip:true,item:item,left:left,right:right,top:top+10,bottom:plotOffset.bottom})}}},{key:"handleMouseLeave",value:function handleMouseLeave(){var _this2=this;this.state.mouseHoverTimer=window.setTimeout(function(){_this2.setState({showTooltip:false})},250)}},{key:"renderAnnotations",value:function renderAnnotations(annotation){return _react["default"].createElement(_annotation.Annotation,{series:annotation.series,plot:annotation.plot,key:annotation.key,icon:annotation.icon,color:annotation.color})}},{key:"render",value:function render(){var _this3=this;var _this$state=this.state,item=_this$state.item,right=_this$state.right,top=_this$state.top,left=_this$state.left;var series=this.props.series;var tooltip;var styles=(0,_reactcss["default"])({showTooltip:{tooltipContainer:{top:top-8,left:left,right:right}},hideTooltip:{tooltipContainer:{display:"none"}}},{showTooltip:this.state.showTooltip,hideTooltip:!this.state.showTooltip});if(item){var metric=series.find(function(r){return r.id===item.series.id});var formatter=metric&&metric.tickFormatter||this.props.tickFormatter||function(v){return v};var value=item.datapoint[2]?item.datapoint[1]-item.datapoint[2]:item.datapoint[1];tooltip=_react["default"].createElement("div",{className:"tvbTooltip__container tvbTooltip__container--".concat(right?"right":"left"),style:styles.tooltipContainer},_react["default"].createElement("span",{className:"tvbTooltip__caret"}),_react["default"].createElement("div",{className:"tvbTooltip"},_react["default"].createElement("div",{className:"tvbTooltip__timestamp"},(0,_moment["default"])(item.datapoint[0]).format(this.props.dateFormat)),_react["default"].createElement("div",{className:"tvbTooltip__item"},_react["default"].createElement(_eui.EuiIcon,{className:"tvbTooltip__icon",type:"dot",color:item.series.color}),_react["default"].createElement("div",{className:"tvbTooltip__labelContainer"},_react["default"].createElement("div",{className:"tvbTooltip__label"},item.series.label),_react["default"].createElement("div",{className:"tvbTooltip__value"},formatter(value))))))}var params={crosshair:this.props.crosshair,onPlotCreate:this.handlePlotCreate,onBrush:this.props.onBrush,onMouseLeave:this.handleMouseLeave,onMouseOver:this.handleMouseOver,onDraw:this.handleDraw,options:this.props.options,plothover:this.props.plothover,reversed:(0,_set_is_reversed.isBackgroundDark)(this.props.backgroundColor),series:this.props.series,annotations:this.props.annotations,showGrid:this.props.showGrid,show:this.props.show,tickFormatter:this.props.tickFormatter,yaxes:this.props.yaxes,xAxisFormatter:this.props.xAxisFormatter};var annotations=this.state.annotations.map(this.renderAnnotations);var axisLabelClass=(0,_classnames["default"])("tvbVisTimeSeries__axisLabel",{"tvbVisTimeSeries__axisLabel--reversed":(0,_set_is_reversed.isBackgroundInverted)(this.props.backgroundColor)});return _react["default"].createElement("div",{ref:function ref(el){return _this3.container=el},className:"tvbVisTimeSeries__container"},tooltip,annotations,_react["default"].createElement(_flot_chart.FlotChart,params),_react["default"].createElement("div",{className:axisLabelClass},this.props.xaxisLabel))}}]);return TimeseriesChart}(_react.Component);exports.TimeseriesChart=TimeseriesChart;TimeseriesChart.defaultProps={showGrid:true,dateFormat:"ll LTS"};TimeseriesChart.propTypes={crosshair:_propTypes["default"].bool,onBrush:_propTypes["default"].func,options:_propTypes["default"].object,plothover:_propTypes["default"].func,backgroundColor:_propTypes["default"].string,series:_propTypes["default"].array,annotations:_propTypes["default"].array,show:_propTypes["default"].array,tickFormatter:_propTypes["default"].func,yaxes:_propTypes["default"].array,showGrid:_propTypes["default"].bool,xaxisLabel:_propTypes["default"].string,dateFormat:_propTypes["default"].string}},5733:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FlotChart=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(17));var _reactDom=__webpack_require__(27);var _lodash=_interopRequireDefault(__webpack_require__(1));var _flotCharts=_interopRequireDefault(__webpack_require__(5734));var _events=__webpack_require__(1983);var _resize=__webpack_require__(5746);var _calculate_bar_width=__webpack_require__(5747);var _calculate_fill_color=__webpack_require__(5748);var _colors=__webpack_require__(1984);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var FlotChart=function(_Component){_inherits(FlotChart,_Component);function FlotChart(props){var _this;_classCallCheck(this,FlotChart);_this=_possibleConstructorReturn(this,_getPrototypeOf(FlotChart).call(this,props));_this.handleResize=_this.handleResize.bind(_assertThisInitialized(_this));return _this}_createClass(FlotChart,[{key:"shouldComponentUpdate",value:function shouldComponentUpdate(props){var _this2=this;if(!this.plot)return true;if(props.reversed!==this.props.reversed){return true}if(props.showGrid!==this.props.showGrid)return true;if(props.yaxes&&this.props.yaxes){var valuesChanged=props.yaxes.some(function(axis,i){if(_this2.props.yaxes[i]){return axis.position!==_this2.props.yaxes[i].position||axis.max!==_this2.props.yaxes[i].max||axis.min!==_this2.props.yaxes[i].min||axis.axisFormatter!==_this2.props.yaxes[i].axisFormatter||axis.mode!==_this2.props.yaxes[i].mode||axis.axisFormatterTemplate!==_this2.props.yaxes[i].axisFormatterTemplate}});if(props.yaxes.length!==this.props.yaxes.length||valuesChanged){return true}}return false}},{key:"shutdownChart",value:function shutdownChart(){if(!this.plot)return;(0,_flotCharts["default"])(this.target).off("plothover",this.props.plothover);if(this.props.onMouseOver)(0,_flotCharts["default"])(this.target).off("plothover",this.handleMouseOver);if(this.props.onMouseLeave)(0,_flotCharts["default"])(this.target).off("mouseleave",this.handleMouseLeave);if(this.props.onBrush)(0,_flotCharts["default"])(this.target).off("plotselected",this.brushChart);this.plot.shutdown();if(this.props.crosshair){(0,_flotCharts["default"])(this.target).off("plothover",this.handlePlotover);_events.eventBus.off("thorPlotover",this.handleThorPlotover);_events.eventBus.off("thorPlotleave",this.handleThorPlotleave)}}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.shutdownChart()}},{key:"filterByShow",value:function filterByShow(show){if(show){return function(metric){return show.some(function(id){return _lodash["default"].startsWith(id,metric.id)})}}return function(){return true}}},{key:"componentWillReceiveProps",value:function componentWillReceiveProps(newProps){if(this.plot){var series=newProps.series;var options=this.plot.getOptions();_lodash["default"].set(options,"series.bars.barWidth",(0,_calculate_bar_width.calculateBarWidth)(series));_lodash["default"].set(options,"xaxes[0].ticks",this.calculateTicks());this.plot.setData(this.calculateData(series,newProps.show));this.plot.setupGrid();this.plot.draw();if(!_lodash["default"].isEqual(this.props.series,newProps.series))this.handleDraw(this.plot)}else{this.renderChart()}}},{key:"componentDidMount",value:function componentDidMount(){this.renderChart()}},{key:"componentDidUpdate",value:function componentDidUpdate(){this.shutdownChart();this.renderChart()}},{key:"calculateData",value:function calculateData(data,show){var _this3=this;return(0,_lodash["default"])(data).filter(this.filterByShow(show)).map(function(set){if(_lodash["default"].isPlainObject(set)){return _objectSpread({},set,{lines:_this3.computeColor(set.lines,set.color),bars:_this3.computeColor(set.bars,set.color)})}return{color:"#990000",data:set}}).reverse().value()}},{key:"computeColor",value:function computeColor(style,color){if(style&&style.show){var _calculateFillColor=(0,_calculate_fill_color.calculateFillColor)(color,style.fill),fill=_calculateFillColor.fill,fillColor=_calculateFillColor.fillColor;return _objectSpread({},style,{fill:fill,fillColor:fillColor})}return style}},{key:"handleDraw",value:function handleDraw(plot){if(this.props.onDraw)this.props.onDraw(plot)}},{key:"getOptions",value:function getOptions(props){var yaxes=props.yaxes||[{}];var lineColor=_colors.COLORS.lineColor;var textColor=props.reversed?_colors.COLORS.textColorReversed:_colors.COLORS.textColor;var borderWidth={bottom:1,top:0,left:0,right:0};if(yaxes.some(function(y){return y.position==="left"}))borderWidth.left=1;if(yaxes.some(function(y){return y.position==="right"}))borderWidth.right=1;if(props.showGrid){borderWidth.top=1;borderWidth.left=1;borderWidth.right=1}var opts={legend:{show:false},yaxes:yaxes.map(function(axis){axis.tickLength=props.showGrid?null:0;return axis}),yaxis:{color:lineColor,font:{color:textColor,size:11},tickFormatter:props.tickFormatter},xaxis:{tickLength:props.showGrid?null:0,color:lineColor,timezone:"browser",mode:"time",font:{color:textColor,size:11},ticks:this.calculateTicks()},series:{shadowSize:0},grid:{margin:0,borderWidth:borderWidth,borderColor:lineColor,hoverable:true,mouseActiveRadius:200}};if(props.crosshair){_lodash["default"].set(opts,"crosshair",{mode:"x",color:"#C66",lineWidth:1})}if(props.onBrush){_lodash["default"].set(opts,"selection",{mode:"x",color:textColor})}if(props.xAxisFormatter){_lodash["default"].set(opts,"xaxis.tickFormatter",props.xAxisFormatter)}_lodash["default"].set(opts,"series.bars.barWidth",(0,_calculate_bar_width.calculateBarWidth)(props.series));return _lodash["default"].assign(opts,props.options)}},{key:"calculateTicks",value:function calculateTicks(){var sample=this.props.xAxisFormatter(new Date);var tickLetterWidth=7;var tickPadding=45;var ticks=Math.floor(this.target.clientWidth/(sample.length*tickLetterWidth+tickPadding));return ticks}},{key:"handleResize",value:function handleResize(){var resize=(0,_reactDom.findDOMNode)(this.resize);if(!this.rendered){this.renderChart();return}if(resize&&resize.clientHeight>0&&resize.clientHeight>0){if(!this.plot)return;var options=this.plot.getOptions();_lodash["default"].set(options,"xaxes[0].ticks",this.calculateTicks());this.plot.resize();this.plot.setupGrid();this.plot.draw();this.handleDraw(this.plot)}}},{key:"renderChart",value:function renderChart(){var _this4=this;var resize=(0,_reactDom.findDOMNode)(this.resize);if(resize.clientWidth>0&&resize.clientHeight>0){this.rendered=true;var series=this.props.series;var data=this.calculateData(series,this.props.show);this.plot=_flotCharts["default"].plot(this.target,data,this.getOptions(this.props));this.handleDraw(this.plot);_lodash["default"].defer(function(){return _this4.handleResize()});this.handleMouseOver=function(){var _this4$props;for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}if(_this4.props.onMouseOver)(_this4$props=_this4.props).onMouseOver.apply(_this4$props,args.concat([_this4.plot]))};this.handleMouseLeave=function(){var _this4$props2;for(var _len2=arguments.length,args=new Array(_len2),_key2=0;_key2<_len2;_key2++){args[_key2]=arguments[_key2]}if(_this4.props.onMouseLeave)(_this4$props2=_this4.props).onMouseLeave.apply(_this4$props2,args.concat([_this4.plot]))};(0,_flotCharts["default"])(this.target).on("plothover",this.handleMouseOver);(0,_flotCharts["default"])(this.target).on("mouseleave",this.handleMouseLeave);if(this.props.crosshair){this.handleThorPlotover=function(e,pos,item,originalPlot){if(_this4.plot!==originalPlot){_this4.plot.setCrosshair({x:_lodash["default"].get(pos,"x")});_this4.props.plothover(e,pos,item)}};this.handlePlotover=function(e,pos,item){return _events.eventBus.trigger("thorPlotover",[pos,item,_this4.plot])};this.handlePlotleave=function(){return _events.eventBus.trigger("thorPlotleave")};this.handleThorPlotleave=function(e){if(_this4.plot)_this4.plot.clearCrosshair();if(_this4.props.plothover)_this4.props.plothover(e)};(0,_flotCharts["default"])(this.target).on("plothover",this.handlePlotover);(0,_flotCharts["default"])(this.target).on("mouseleave",this.handlePlotleave);_events.eventBus.on("thorPlotover",this.handleThorPlotover);_events.eventBus.on("thorPlotleave",this.handleThorPlotleave)}if(_lodash["default"].isFunction(this.props.plothover)){(0,_flotCharts["default"])(this.target).bind("plothover",this.props.plothover)}(0,_flotCharts["default"])(this.target).on("mouseleave",function(){_events.eventBus.trigger("thorPlotleave")});if(_lodash["default"].isFunction(this.props.onBrush)){this.brushChart=function(e,ranges){_this4.props.onBrush(ranges);_this4.plot.clearSelection()};(0,_flotCharts["default"])(this.target).on("plotselected",this.brushChart)}}}},{key:"render",value:function render(){var _this5=this;return _react["default"].createElement(_resize.Resize,{onResize:this.handleResize,ref:function ref(el){return _this5.resize=el},className:"tvbVisTimeSeries__container"},_react["default"].createElement("div",{ref:function ref(el){return _this5.target=el},className:"tvbVisTimeSeries__container"}))}}]);return FlotChart}(_react.Component);exports.FlotChart=FlotChart;FlotChart.defaultProps={showGrid:true};FlotChart.propTypes={crosshair:_propTypes["default"].bool,onBrush:_propTypes["default"].func,onPlotCreate:_propTypes["default"].func,onMouseOver:_propTypes["default"].func,onMouseLeave:_propTypes["default"].func,options:_propTypes["default"].object,plothover:_propTypes["default"].func,reversed:_propTypes["default"].bool,series:_propTypes["default"].array,show:_propTypes["default"].array,tickFormatter:_propTypes["default"].func,showGrid:_propTypes["default"].bool,yaxes:_propTypes["default"].array}},5734:function(module,exports,__webpack_require__){"use strict";var _jquery=_interopRequireDefault(__webpack_require__(25));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}if(window)window.jQuery=_jquery["default"];__webpack_require__(5735);__webpack_require__(5736);__webpack_require__(5737);__webpack_require__(5738);__webpack_require__(5739);__webpack_require__(5740);__webpack_require__(5741);__webpack_require__(5742);__webpack_require__(5743);__webpack_require__(5744);__webpack_require__(5745);module.exports=_jquery["default"]},5735:function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}(function($){$.color={};$.color.make=function(r,g,b,a){var o={};o.r=r||0;o.g=g||0;o.b=b||0;o.a=a!=null?a:1;o.add=function(c,d){for(var i=0;i<c.length;++i){o[c.charAt(i)]+=d}return o.normalize()};o.scale=function(c,f){for(var i=0;i<c.length;++i){o[c.charAt(i)]*=f}return o.normalize()};o.toString=function(){if(o.a>=1){return"rgb("+[o.r,o.g,o.b].join(",")+")"}else{return"rgba("+[o.r,o.g,o.b,o.a].join(",")+")"}};o.normalize=function(){function clamp(min,value,max){return value<min?min:value>max?max:value}o.r=clamp(0,parseInt(o.r),255);o.g=clamp(0,parseInt(o.g),255);o.b=clamp(0,parseInt(o.b),255);o.a=clamp(0,o.a,1);return o};o.clone=function(){return $.color.make(o.r,o.b,o.g,o.a)};return o.normalize()};$.color.extract=function(elem,css){var c;do{c=elem.css(css).toLowerCase();if(c!=""&&c!="transparent")break;elem=elem.parent()}while(elem.length&&!$.nodeName(elem.get(0),"body"));if(c=="rgba(0, 0, 0, 0)")c="transparent";return $.color.parse(c)};$.color.parse=function(str){var res,m=$.color.make;if(res=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(str))return m(parseInt(res[1],10),parseInt(res[2],10),parseInt(res[3],10));if(res=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(str))return m(parseInt(res[1],10),parseInt(res[2],10),parseInt(res[3],10),parseFloat(res[4]));if(res=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(str))return m(parseFloat(res[1])*2.55,parseFloat(res[2])*2.55,parseFloat(res[3])*2.55);if(res=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(str))return m(parseFloat(res[1])*2.55,parseFloat(res[2])*2.55,parseFloat(res[3])*2.55,parseFloat(res[4]));if(res=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(str))return m(parseInt(res[1],16),parseInt(res[2],16),parseInt(res[3],16));if(res=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(str))return m(parseInt(res[1]+res[1],16),parseInt(res[2]+res[2],16),parseInt(res[3]+res[3],16));var name=$.trim(str).toLowerCase();if(name=="transparent")return m(255,255,255,0);else{res=lookupColors[name]||[0,0,0];return m(res[0],res[1],res[2])}};var lookupColors={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}})(jQuery);(function($){var hasOwnProperty=Object.prototype.hasOwnProperty;if(!$.fn.detach){$.fn.detach=function(){return this.each(function(){if(this.parentNode){this.parentNode.removeChild(this)}})}}function Canvas(cls,container){var element=container.children("."+cls)[0];if(element==null){element=document.createElement("canvas");element.className=cls;$(element).css({direction:"ltr",position:"absolute",left:0,top:0}).appendTo(container);if(!element.getContext){if(window.G_vmlCanvasManager){element=window.G_vmlCanvasManager.initElement(element)}else{throw new Error("Canvas is not available. If you're using IE with a fall-back such as Excanvas, then there's either a mistake in your conditional include, or the page has no DOCTYPE and is rendering in Quirks Mode.")}}}this.element=element;var context=this.context=element.getContext("2d");var devicePixelRatio=window.devicePixelRatio||1,backingStoreRatio=context.webkitBackingStorePixelRatio||context.mozBackingStorePixelRatio||context.msBackingStorePixelRatio||context.oBackingStorePixelRatio||context.backingStorePixelRatio||1;this.pixelRatio=devicePixelRatio/backingStoreRatio;this.resize(container.width(),container.height());this.textContainer=null;this.text={};this._textCache={}}Canvas.prototype.resize=function(width,height){if(width<=0||height<=0){throw new Error("Invalid dimensions for plot, width = "+width+", height = "+height)}var element=this.element,context=this.context,pixelRatio=this.pixelRatio;if(this.width!=width){element.width=width*pixelRatio;element.style.width=width+"px";this.width=width}if(this.height!=height){element.height=height*pixelRatio;element.style.height=height+"px";this.height=height}context.restore();context.save();context.scale(pixelRatio,pixelRatio)};Canvas.prototype.clear=function(){this.context.clearRect(0,0,this.width,this.height)};Canvas.prototype.render=function(){var cache=this._textCache;for(var layerKey in cache){if(hasOwnProperty.call(cache,layerKey)){var layer=this.getTextLayer(layerKey),layerCache=cache[layerKey];layer.hide();for(var styleKey in layerCache){if(hasOwnProperty.call(layerCache,styleKey)){var styleCache=layerCache[styleKey];for(var key in styleCache){if(hasOwnProperty.call(styleCache,key)){var positions=styleCache[key].positions;for(var i=0,position;position=positions[i];i++){if(position.active){if(!position.rendered){layer.append(position.element);position.rendered=true}}else{positions.splice(i--,1);if(position.rendered){position.element.detach()}}}if(positions.length==0){delete styleCache[key]}}}}}layer.show()}}};Canvas.prototype.getTextLayer=function(classes){var layer=this.text[classes];if(layer==null){if(this.textContainer==null){this.textContainer=$("<div class='flot-text'></div>").css({position:"absolute",top:0,left:0,bottom:0,right:0,"font-size":"smaller",color:"#545454"}).insertAfter(this.element)}layer=this.text[classes]=$("<div></div>").addClass(classes).css({position:"absolute",top:0,left:0,bottom:0,right:0}).appendTo(this.textContainer)}return layer};Canvas.prototype.getTextInfo=function(layer,text,font,angle,width){var textStyle,layerCache,styleCache,info;text=""+text;if(_typeof(font)==="object"){textStyle=font.style+" "+font.variant+" "+font.weight+" "+font.size+"px/"+font.lineHeight+"px "+font.family}else{textStyle=font}layerCache=this._textCache[layer];if(layerCache==null){layerCache=this._textCache[layer]={}}styleCache=layerCache[textStyle];if(styleCache==null){styleCache=layerCache[textStyle]={}}info=styleCache[text];if(info==null){var element=$("<div></div>").html(text).css({position:"absolute","max-width":width,top:-9999}).appendTo(this.getTextLayer(layer));if(_typeof(font)==="object"){element.css({font:textStyle,color:font.color})}else if(typeof font==="string"){element.addClass(font)}info=styleCache[text]={width:element.outerWidth(true),height:element.outerHeight(true),element:element,positions:[]};element.detach()}return info};Canvas.prototype.addText=function(layer,x,y,text,font,angle,width,halign,valign){var info=this.getTextInfo(layer,text,font,angle,width),positions=info.positions;if(halign=="center"){x-=info.width/2}else if(halign=="right"){x-=info.width}if(valign=="middle"){y-=info.height/2}else if(valign=="bottom"){y-=info.height}for(var i=0,position;position=positions[i];i++){if(position.x==x&&position.y==y){position.active=true;return}}position={active:true,rendered:false,element:positions.length?info.element.clone():info.element,x:x,y:y};positions.push(position);position.element.css({top:Math.round(y),left:Math.round(x),"text-align":halign})};Canvas.prototype.removeText=function(layer,x,y,text,font,angle){if(text==null){var layerCache=this._textCache[layer];if(layerCache!=null){for(var styleKey in layerCache){if(hasOwnProperty.call(layerCache,styleKey)){var styleCache=layerCache[styleKey];for(var key in styleCache){if(hasOwnProperty.call(styleCache,key)){var positions=styleCache[key].positions;for(var i=0,position;position=positions[i];i++){position.active=false}}}}}}}else{var positions=this.getTextInfo(layer,text,font,angle).positions;for(var i=0,position;position=positions[i];i++){if(position.x==x&&position.y==y){position.active=false}}}};function Plot(placeholder,data_,options_,plugins){var series=[],options={colors:["#edc240","#afd8f8","#cb4b4b","#4da74d","#9440ed"],legend:{show:true,noColumns:1,labelFormatter:null,labelBoxBorderColor:"#ccc",container:null,position:"ne",margin:5,backgroundColor:null,backgroundOpacity:.85,sorted:null},xaxis:{show:null,position:"bottom",mode:null,font:null,color:null,tickColor:null,transform:null,inverseTransform:null,min:null,max:null,autoscaleMargin:null,ticks:null,tickFormatter:null,labelWidth:null,labelHeight:null,reserveSpace:null,tickLength:null,alignTicksWithAxis:null,tickDecimals:null,tickSize:null,minTickSize:null},yaxis:{autoscaleMargin:.02,position:"left"},xaxes:[],yaxes:[],series:{points:{show:false,radius:3,lineWidth:2,fill:true,fillColor:"#ffffff",symbol:"circle"},lines:{lineWidth:2,fill:false,fillColor:null,steps:false},bars:{show:false,lineWidth:2,barWidth:1,fill:true,fillColor:null,align:"left",horizontal:false,zero:true},shadowSize:3,highlightColor:null},grid:{show:true,aboveData:false,color:"#545454",backgroundColor:null,borderColor:null,tickColor:null,margin:0,labelMargin:5,axisMargin:8,borderWidth:2,minBorderMargin:null,markings:null,markingsColor:"#f4f4f4",markingsLineWidth:2,clickable:false,hoverable:false,autoHighlight:true,mouseActiveRadius:10},interaction:{redrawOverlayInterval:1e3/60},hooks:{}},surface=null,overlay=null,eventHolder=null,ctx=null,octx=null,xaxes=[],yaxes=[],plotOffset={left:0,right:0,top:0,bottom:0},plotWidth=0,plotHeight=0,hooks={processOptions:[],processRawData:[],processDatapoints:[],processOffset:[],drawBackground:[],drawSeries:[],draw:[],bindEvents:[],drawOverlay:[],shutdown:[]},plot=this;plot.setData=setData;plot.setupGrid=setupGrid;plot.draw=draw;plot.getPlaceholder=function(){return placeholder};plot.getCanvas=function(){return surface.element};plot.getPlotOffset=function(){return plotOffset};plot.width=function(){return plotWidth};plot.height=function(){return plotHeight};plot.offset=function(){var o=eventHolder.offset();o.left+=plotOffset.left;o.top+=plotOffset.top;return o};plot.getData=function(){return series};plot.getAxes=function(){var res={},i;$.each(xaxes.concat(yaxes),function(_,axis){if(axis)res[axis.direction+(axis.n!=1?axis.n:"")+"axis"]=axis});return res};plot.getXAxes=function(){return xaxes};plot.getYAxes=function(){return yaxes};plot.c2p=canvasToAxisCoords;plot.p2c=axisToCanvasCoords;plot.getOptions=function(){return options};plot.highlight=highlight;plot.unhighlight=unhighlight;plot.triggerRedrawOverlay=triggerRedrawOverlay;plot.pointOffset=function(point){return{left:parseInt(xaxes[axisNumber(point,"x")-1].p2c(+point.x)+plotOffset.left,10),top:parseInt(yaxes[axisNumber(point,"y")-1].p2c(+point.y)+plotOffset.top,10)}};plot.shutdown=shutdown;plot.destroy=function(){shutdown();placeholder.removeData("plot").empty();series=[];options=null;surface=null;overlay=null;eventHolder=null;ctx=null;octx=null;xaxes=[];yaxes=[];hooks=null;highlights=[];plot=null};plot.resize=function(){var width=placeholder.width(),height=placeholder.height();surface.resize(width,height);overlay.resize(width,height)};plot.hooks=hooks;initPlugins(plot);parseOptions(options_);setupCanvases();setData(data_);setupGrid();draw();bindEvents();function executeHooks(hook,args){args=[plot].concat(args);for(var i=0;i<hook.length;++i){hook[i].apply(this,args)}}function initPlugins(){var classes={Canvas:Canvas};for(var i=0;i<plugins.length;++i){var p=plugins[i];p.init(plot,classes);if(p.options)$.extend(true,options,p.options)}}function parseOptions(opts){$.extend(true,options,opts);if(opts&&opts.colors){options.colors=opts.colors}if(options.xaxis.color==null)options.xaxis.color=$.color.parse(options.grid.color).scale("a",.22).toString();if(options.yaxis.color==null)options.yaxis.color=$.color.parse(options.grid.color).scale("a",.22).toString();if(options.xaxis.tickColor==null)options.xaxis.tickColor=options.grid.tickColor||options.xaxis.color;if(options.yaxis.tickColor==null)options.yaxis.tickColor=options.grid.tickColor||options.yaxis.color;if(options.grid.borderColor==null)options.grid.borderColor=options.grid.color;if(options.grid.tickColor==null)options.grid.tickColor=$.color.parse(options.grid.color).scale("a",.22).toString();var i,axisOptions,axisCount,fontSize=placeholder.css("font-size"),fontSizeDefault=fontSize?+fontSize.replace("px",""):13,fontDefaults={style:placeholder.css("font-style"),size:Math.round(.8*fontSizeDefault),variant:placeholder.css("font-variant"),weight:placeholder.css("font-weight"),family:placeholder.css("font-family")};axisCount=options.xaxes.length||1;for(i=0;i<axisCount;++i){axisOptions=options.xaxes[i];if(axisOptions&&!axisOptions.tickColor){axisOptions.tickColor=axisOptions.color}axisOptions=$.extend(true,{},options.xaxis,axisOptions);options.xaxes[i]=axisOptions;if(axisOptions.font){axisOptions.font=$.extend({},fontDefaults,axisOptions.font);if(!axisOptions.font.color){axisOptions.font.color=axisOptions.color}if(!axisOptions.font.lineHeight){axisOptions.font.lineHeight=Math.round(axisOptions.font.size*1.15)}}}axisCount=options.yaxes.length||1;for(i=0;i<axisCount;++i){axisOptions=options.yaxes[i];if(axisOptions&&!axisOptions.tickColor){axisOptions.tickColor=axisOptions.color}axisOptions=$.extend(true,{},options.yaxis,axisOptions);options.yaxes[i]=axisOptions;if(axisOptions.font){axisOptions.font=$.extend({},fontDefaults,axisOptions.font);if(!axisOptions.font.color){axisOptions.font.color=axisOptions.color}if(!axisOptions.font.lineHeight){axisOptions.font.lineHeight=Math.round(axisOptions.font.size*1.15)}}}if(options.xaxis.noTicks&&options.xaxis.ticks==null)options.xaxis.ticks=options.xaxis.noTicks;if(options.yaxis.noTicks&&options.yaxis.ticks==null)options.yaxis.ticks=options.yaxis.noTicks;if(options.x2axis){options.xaxes[1]=$.extend(true,{},options.xaxis,options.x2axis);options.xaxes[1].position="top";if(options.x2axis.min==null){options.xaxes[1].min=null}if(options.x2axis.max==null){options.xaxes[1].max=null}}if(options.y2axis){options.yaxes[1]=$.extend(true,{},options.yaxis,options.y2axis);options.yaxes[1].position="right";if(options.y2axis.min==null){options.yaxes[1].min=null}if(options.y2axis.max==null){options.yaxes[1].max=null}}if(options.grid.coloredAreas)options.grid.markings=options.grid.coloredAreas;if(options.grid.coloredAreasColor)options.grid.markingsColor=options.grid.coloredAreasColor;if(options.lines)$.extend(true,options.series.lines,options.lines);if(options.points)$.extend(true,options.series.points,options.points);if(options.bars)$.extend(true,options.series.bars,options.bars);if(options.shadowSize!=null)options.series.shadowSize=options.shadowSize;if(options.highlightColor!=null)options.series.highlightColor=options.highlightColor;for(i=0;i<options.xaxes.length;++i){getOrCreateAxis(xaxes,i+1).options=options.xaxes[i]}for(i=0;i<options.yaxes.length;++i){getOrCreateAxis(yaxes,i+1).options=options.yaxes[i]}for(var n in hooks){if(options.hooks[n]&&options.hooks[n].length)hooks[n]=hooks[n].concat(options.hooks[n])}executeHooks(hooks.processOptions,[options])}function setData(d){series=parseData(d);fillInSeriesOptions();processData()}function parseData(d){var res=[];for(var i=0;i<d.length;++i){var s=$.extend(true,{},options.series);if(d[i].data!=null){s.data=d[i].data;delete d[i].data;$.extend(true,s,d[i]);d[i].data=s.data}else s.data=d[i];res.push(s)}return res}function axisNumber(obj,coord){var a=obj[coord+"axis"];if(_typeof(a)=="object")a=a.n;if(typeof a!="number")a=1;return a}function allAxes(){return $.grep(xaxes.concat(yaxes),function(a){return a})}function canvasToAxisCoords(pos){var res={},i,axis;for(i=0;i<xaxes.length;++i){axis=xaxes[i];if(axis&&axis.used)res["x"+axis.n]=axis.c2p(pos.left)}for(i=0;i<yaxes.length;++i){axis=yaxes[i];if(axis&&axis.used)res["y"+axis.n]=axis.c2p(pos.top)}if(res.x1!==undefined)res.x=res.x1;if(res.y1!==undefined)res.y=res.y1;return res}function axisToCanvasCoords(pos){var res={},i,axis,key;for(i=0;i<xaxes.length;++i){axis=xaxes[i];if(axis&&axis.used){key="x"+axis.n;if(pos[key]==null&&axis.n==1)key="x";if(pos[key]!=null){res.left=axis.p2c(pos[key]);break}}}for(i=0;i<yaxes.length;++i){axis=yaxes[i];if(axis&&axis.used){key="y"+axis.n;if(pos[key]==null&&axis.n==1)key="y";if(pos[key]!=null){res.top=axis.p2c(pos[key]);break}}}return res}function getOrCreateAxis(axes,number){if(!axes[number-1])axes[number-1]={n:number,direction:axes==xaxes?"x":"y",options:$.extend(true,{},axes==xaxes?options.xaxis:options.yaxis)};return axes[number-1]}function fillInSeriesOptions(){var neededColors=series.length,maxIndex=-1,i;for(i=0;i<series.length;++i){var sc=series[i].color;if(sc!=null){neededColors--;if(typeof sc=="number"&&sc>maxIndex){maxIndex=sc}}}if(neededColors<=maxIndex){neededColors=maxIndex+1}var c,colors=[],colorPool=options.colors,colorPoolSize=colorPool.length,variation=0;for(i=0;i<neededColors;i++){c=$.color.parse(colorPool[i%colorPoolSize]||"#666");if(i%colorPoolSize==0&&i){if(variation>=0){if(variation<.5){variation=-variation-.2}else variation=0}else variation=-variation}colors[i]=c.scale("rgb",1+variation)}var colori=0,s;for(i=0;i<series.length;++i){s=series[i];if(s.color==null){s.color=colors[colori].toString();++colori}else if(typeof s.color=="number")s.color=colors[s.color].toString();if(s.lines.show==null){var v,show=true;for(v in s){if(s[v]&&s[v].show){show=false;break}}if(show)s.lines.show=true}if(s.lines.zero==null){s.lines.zero=!!s.lines.fill}s.xaxis=getOrCreateAxis(xaxes,axisNumber(s,"x"));s.yaxis=getOrCreateAxis(yaxes,axisNumber(s,"y"))}}function processData(){var topSentry=Number.POSITIVE_INFINITY,bottomSentry=Number.NEGATIVE_INFINITY,fakeInfinity=Number.MAX_VALUE,i,j,k,m,length,s,points,ps,x,y,axis,val,f,p,data,format;function updateAxis(axis,min,max){if(min<axis.datamin&&min!=-fakeInfinity)axis.datamin=min;if(max>axis.datamax&&max!=fakeInfinity)axis.datamax=max}$.each(allAxes(),function(_,axis){axis.datamin=topSentry;axis.datamax=bottomSentry;axis.used=false});for(i=0;i<series.length;++i){s=series[i];s.datapoints={points:[]};executeHooks(hooks.processRawData,[s,s.data,s.datapoints])}for(i=0;i<series.length;++i){s=series[i];data=s.data;format=s.datapoints.format;if(!format){format=[];format.push({x:true,number:true,required:true});format.push({y:true,number:true,required:true});if(s.bars.show||s.lines.show&&s.lines.fill){var autoscale=!!(s.bars.show&&s.bars.zero||s.lines.show&&s.lines.zero);format.push({y:true,number:true,required:false,defaultValue:0,autoscale:autoscale});if(s.bars.horizontal){delete format[format.length-1].y;format[format.length-1].x=true}}s.datapoints.format=format}if(s.datapoints.pointsize!=null)continue;s.datapoints.pointsize=format.length;ps=s.datapoints.pointsize;points=s.datapoints.points;var insertSteps=s.lines.show&&s.lines.steps;s.xaxis.used=s.yaxis.used=true;for(j=k=0;j<data.length;++j,k+=ps){p=data[j];var nullify=p==null;if(!nullify){for(m=0;m<ps;++m){val=p[m];f=format[m];if(f){if(f.number&&val!=null){val=+val;if(isNaN(val))val=null;else if(val==Infinity)val=fakeInfinity;else if(val==-Infinity)val=-fakeInfinity}if(val==null){if(f.required)nullify=true;if(f.defaultValue!=null)val=f.defaultValue}}points[k+m]=val}}if(nullify){for(m=0;m<ps;++m){val=points[k+m];if(val!=null){f=format[m];if(f.autoscale!==false){if(f.x){updateAxis(s.xaxis,val,val)}if(f.y){updateAxis(s.yaxis,val,val)}}}points[k+m]=null}}else{if(insertSteps&&k>0&&points[k-ps]!=null&&points[k-ps]!=points[k]&&points[k-ps+1]!=points[k+1]){for(m=0;m<ps;++m){points[k+ps+m]=points[k+m]}points[k+1]=points[k-ps+1];k+=ps}}}}for(i=0;i<series.length;++i){s=series[i];executeHooks(hooks.processDatapoints,[s,s.datapoints])}for(i=0;i<series.length;++i){s=series[i];points=s.datapoints.points;ps=s.datapoints.pointsize;format=s.datapoints.format;var xmin=topSentry,ymin=topSentry,xmax=bottomSentry,ymax=bottomSentry;for(j=0;j<points.length;j+=ps){if(points[j]==null)continue;for(m=0;m<ps;++m){val=points[j+m];f=format[m];if(!f||f.autoscale===false||val==fakeInfinity||val==-fakeInfinity)continue;if(f.x){if(val<xmin)xmin=val;if(val>xmax)xmax=val}if(f.y){if(val<ymin)ymin=val;if(val>ymax)ymax=val}}}if(s.bars.show){var delta;switch(s.bars.align){case"left":delta=0;break;case"right":delta=-s.bars.barWidth;break;default:delta=-s.bars.barWidth/2}if(s.bars.horizontal){ymin+=delta;ymax+=delta+s.bars.barWidth}else{xmin+=delta;xmax+=delta+s.bars.barWidth}}updateAxis(s.xaxis,xmin,xmax);updateAxis(s.yaxis,ymin,ymax)}$.each(allAxes(),function(_,axis){if(axis.datamin==topSentry)axis.datamin=null;if(axis.datamax==bottomSentry)axis.datamax=null})}function setupCanvases(){placeholder.css("padding",0).children().filter(function(){return!$(this).hasClass("flot-overlay")&&!$(this).hasClass("flot-base")}).remove();if(placeholder.css("position")=="static")placeholder.css("position","relative");surface=new Canvas("flot-base",placeholder);overlay=new Canvas("flot-overlay",placeholder);ctx=surface.context;octx=overlay.context;eventHolder=$(overlay.element).unbind();var existing=placeholder.data("plot");if(existing){existing.shutdown();overlay.clear()}placeholder.data("plot",plot)}function bindEvents(){if(options.grid.hoverable){eventHolder.mousemove(onMouseMove);eventHolder.bind("mouseleave",onMouseLeave)}if(options.grid.clickable)eventHolder.click(onClick);executeHooks(hooks.bindEvents,[eventHolder])}function shutdown(){if(redrawTimeout)clearTimeout(redrawTimeout);eventHolder.unbind("mousemove",onMouseMove);eventHolder.unbind("mouseleave",onMouseLeave);eventHolder.unbind("click",onClick);executeHooks(hooks.shutdown,[eventHolder])}function setTransformationHelpers(axis){function identity(x){return x}var s,m,t=axis.options.transform||identity,it=axis.options.inverseTransform;if(axis.direction=="x"){s=axis.scale=plotWidth/Math.abs(t(axis.max)-t(axis.min));m=Math.min(t(axis.max),t(axis.min))}else{s=axis.scale=plotHeight/Math.abs(t(axis.max)-t(axis.min));s=-s;m=Math.max(t(axis.max),t(axis.min))}if(t==identity)axis.p2c=function(p){return(p-m)*s};else axis.p2c=function(p){return(t(p)-m)*s};if(!it)axis.c2p=function(c){return m+c/s};else axis.c2p=function(c){return it(m+c/s)}}function measureTickLabels(axis){var opts=axis.options,ticks=axis.ticks||[],labelWidth=opts.labelWidth||0,labelHeight=opts.labelHeight||0,maxWidth=labelWidth||(axis.direction=="x"?Math.floor(surface.width/(ticks.length||1)):null),legacyStyles=axis.direction+"Axis "+axis.direction+axis.n+"Axis",layer="flot-"+axis.direction+"-axis flot-"+axis.direction+axis.n+"-axis "+legacyStyles,font=opts.font||"flot-tick-label tickLabel";for(var i=0;i<ticks.length;++i){var t=ticks[i];if(!t.label)continue;var info=surface.getTextInfo(layer,t.label,font,null,maxWidth);labelWidth=Math.max(labelWidth,info.width);labelHeight=Math.max(labelHeight,info.height)}axis.labelWidth=opts.labelWidth||labelWidth;axis.labelHeight=opts.labelHeight||labelHeight}function allocateAxisBoxFirstPhase(axis){var lw=axis.labelWidth,lh=axis.labelHeight,pos=axis.options.position,isXAxis=axis.direction==="x",tickLength=axis.options.tickLength,axisMargin=options.grid.axisMargin,padding=options.grid.labelMargin,innermost=true,outermost=true,first=true,found=false;$.each(isXAxis?xaxes:yaxes,function(i,a){if(a&&(a.show||a.reserveSpace)){if(a===axis){found=true}else if(a.options.position===pos){if(found){outermost=false}else{innermost=false}}if(!found){first=false}}});if(outermost){axisMargin=0}if(tickLength==null){tickLength=first?"full":5}if(!isNaN(+tickLength))padding+=+tickLength;if(isXAxis){lh+=padding;if(pos=="bottom"){plotOffset.bottom+=lh+axisMargin;axis.box={top:surface.height-plotOffset.bottom,height:lh}}else{axis.box={top:plotOffset.top+axisMargin,height:lh};plotOffset.top+=lh+axisMargin}}else{lw+=padding;if(pos=="left"){axis.box={left:plotOffset.left+axisMargin,width:lw};plotOffset.left+=lw+axisMargin}else{plotOffset.right+=lw+axisMargin;axis.box={left:surface.width-plotOffset.right,width:lw}}}axis.position=pos;axis.tickLength=tickLength;axis.box.padding=padding;axis.innermost=innermost}function allocateAxisBoxSecondPhase(axis){if(axis.direction=="x"){axis.box.left=plotOffset.left-axis.labelWidth/2;axis.box.width=surface.width-plotOffset.left-plotOffset.right+axis.labelWidth}else{axis.box.top=plotOffset.top-axis.labelHeight/2;axis.box.height=surface.height-plotOffset.bottom-plotOffset.top+axis.labelHeight}}function adjustLayoutForThingsStickingOut(){var minMargin=options.grid.minBorderMargin,axis,i;if(minMargin==null){minMargin=0;for(i=0;i<series.length;++i){minMargin=Math.max(minMargin,2*(series[i].points.radius+series[i].points.lineWidth/2))}}var margins={left:minMargin,right:minMargin,top:minMargin,bottom:minMargin};$.each(allAxes(),function(_,axis){if(axis.reserveSpace&&axis.ticks&&axis.ticks.length){if(axis.direction==="x"){margins.left=Math.max(margins.left,axis.labelWidth/2);margins.right=Math.max(margins.right,axis.labelWidth/2)}else{margins.bottom=Math.max(margins.bottom,axis.labelHeight/2);margins.top=Math.max(margins.top,axis.labelHeight/2)}}});plotOffset.left=Math.ceil(Math.max(margins.left,plotOffset.left));plotOffset.right=Math.ceil(Math.max(margins.right,plotOffset.right));plotOffset.top=Math.ceil(Math.max(margins.top,plotOffset.top));plotOffset.bottom=Math.ceil(Math.max(margins.bottom,plotOffset.bottom))}function setupGrid(){var i,axes=allAxes(),showGrid=options.grid.show;for(var a in plotOffset){var margin=options.grid.margin||0;plotOffset[a]=typeof margin=="number"?margin:margin[a]||0}executeHooks(hooks.processOffset,[plotOffset]);for(var a in plotOffset){if(_typeof(options.grid.borderWidth)=="object"){plotOffset[a]+=showGrid?options.grid.borderWidth[a]:0}else{plotOffset[a]+=showGrid?options.grid.borderWidth:0}}$.each(axes,function(_,axis){var axisOpts=axis.options;axis.show=axisOpts.show==null?axis.used:axisOpts.show;axis.reserveSpace=axisOpts.reserveSpace==null?axis.show:axisOpts.reserveSpace;setRange(axis)});if(showGrid){var allocatedAxes=$.grep(axes,function(axis){return axis.show||axis.reserveSpace});$.each(allocatedAxes,function(_,axis){setupTickGeneration(axis);setTicks(axis);snapRangeToTicks(axis,axis.ticks);measureTickLabels(axis)});for(i=allocatedAxes.length-1;i>=0;--i){allocateAxisBoxFirstPhase(allocatedAxes[i])}adjustLayoutForThingsStickingOut();$.each(allocatedAxes,function(_,axis){allocateAxisBoxSecondPhase(axis)})}plotWidth=surface.width-plotOffset.left-plotOffset.right;plotHeight=surface.height-plotOffset.bottom-plotOffset.top;$.each(axes,function(_,axis){setTransformationHelpers(axis)});if(showGrid){drawAxisLabels()}insertLegend()}function setRange(axis){var opts=axis.options,min=+(opts.min!=null?opts.min:axis.datamin),max=+(opts.max!=null?opts.max:axis.datamax),delta=max-min;if(delta==0){var widen=max==0?1:.01;if(opts.min==null)min-=widen;if(opts.max==null||opts.min!=null)max+=widen}else{var margin=opts.autoscaleMargin;if(margin!=null){if(opts.min==null){min-=delta*margin;if(min<0&&axis.datamin!=null&&axis.datamin>=0)min=0}if(opts.max==null){max+=delta*margin;if(max>0&&axis.datamax!=null&&axis.datamax<=0)max=0}}}axis.min=min;axis.max=max}function setupTickGeneration(axis){var opts=axis.options;var noTicks;if(typeof opts.ticks=="number"&&opts.ticks>0)noTicks=opts.ticks;else noTicks=.3*Math.sqrt(axis.direction=="x"?surface.width:surface.height);var delta=(axis.max-axis.min)/noTicks,dec=-Math.floor(Math.log(delta)/Math.LN10),maxDec=opts.tickDecimals;if(maxDec!=null&&dec>maxDec){dec=maxDec}var magn=Math.pow(10,-dec),norm=delta/magn,size;if(norm<1.5){size=1}else if(norm<3){size=2;if(norm>2.25&&(maxDec==null||dec+1<=maxDec)){size=2.5;++dec}}else if(norm<7.5){size=5}else{size=10}size*=magn;if(opts.minTickSize!=null&&size<opts.minTickSize){size=opts.minTickSize}axis.delta=delta;axis.tickDecimals=Math.max(0,maxDec!=null?maxDec:dec);axis.tickSize=opts.tickSize||size;if(opts.mode=="time"&&!axis.tickGenerator){throw new Error("Time mode requires the flot.time plugin.")}if(!axis.tickGenerator){axis.tickGenerator=function(axis){var ticks=[],start=floorInBase(axis.min,axis.tickSize),i=0,v=Number.NaN,prev;do{prev=v;v=start+i*axis.tickSize;ticks.push(v);++i}while(v<axis.max&&v!=prev);return ticks};axis.tickFormatter=function(value,axis){var factor=axis.tickDecimals?Math.pow(10,axis.tickDecimals):1;var formatted=""+Math.round(value*factor)/factor;if(axis.tickDecimals!=null){var decimal=formatted.indexOf(".");var precision=decimal==-1?0:formatted.length-decimal-1;if(precision<axis.tickDecimals){return(precision?formatted:formatted+".")+(""+factor).substr(1,axis.tickDecimals-precision)}}return formatted}}if($.isFunction(opts.tickFormatter))axis.tickFormatter=function(v,axis){return""+opts.tickFormatter(v,axis)};if(opts.alignTicksWithAxis!=null){var otherAxis=(axis.direction=="x"?xaxes:yaxes)[opts.alignTicksWithAxis-1];if(otherAxis&&otherAxis.used&&otherAxis!=axis){var niceTicks=axis.tickGenerator(axis);if(niceTicks.length>0){if(opts.min==null)axis.min=Math.min(axis.min,niceTicks[0]);if(opts.max==null&&niceTicks.length>1)axis.max=Math.max(axis.max,niceTicks[niceTicks.length-1])}axis.tickGenerator=function(axis){var ticks=[],v,i;for(i=0;i<otherAxis.ticks.length;++i){v=(otherAxis.ticks[i].v-otherAxis.min)/(otherAxis.max-otherAxis.min);v=axis.min+v*(axis.max-axis.min);ticks.push(v)}return ticks};if(!axis.mode&&opts.tickDecimals==null){var extraDec=Math.max(0,-Math.floor(Math.log(axis.delta)/Math.LN10)+1),ts=axis.tickGenerator(axis);if(!(ts.length>1&&/\..*0$/.test((ts[1]-ts[0]).toFixed(extraDec))))axis.tickDecimals=extraDec}}}}function setTicks(axis){var oticks=axis.options.ticks,ticks=[];if(oticks==null||typeof oticks=="number"&&oticks>0)ticks=axis.tickGenerator(axis);else if(oticks){if($.isFunction(oticks))ticks=oticks(axis);else ticks=oticks}var i,v;axis.ticks=[];for(i=0;i<ticks.length;++i){var label=null;var t=ticks[i];if(_typeof(t)=="object"){v=+t[0];if(t.length>1)label=t[1]}else v=+t;if(label==null)label=axis.tickFormatter(v,axis);if(!isNaN(v))axis.ticks.push({v:v,label:label})}}function snapRangeToTicks(axis,ticks){if(axis.options.autoscaleMargin&&ticks.length>0){if(axis.options.min==null)axis.min=Math.min(axis.min,ticks[0].v);if(axis.options.max==null&&ticks.length>1)axis.max=Math.max(axis.max,ticks[ticks.length-1].v)}}function draw(){surface.clear();executeHooks(hooks.drawBackground,[ctx]);var grid=options.grid;if(grid.show&&grid.backgroundColor)drawBackground();if(grid.show&&!grid.aboveData){drawGrid()}for(var i=0;i<series.length;++i){executeHooks(hooks.drawSeries,[ctx,series[i]]);drawSeries(series[i])}executeHooks(hooks.draw,[ctx]);if(grid.show&&grid.aboveData){drawGrid()}surface.render();triggerRedrawOverlay()}function extractRange(ranges,coord){var axis,from,to,key,axes=allAxes();for(var i=0;i<axes.length;++i){axis=axes[i];if(axis.direction==coord){key=coord+axis.n+"axis";if(!ranges[key]&&axis.n==1)key=coord+"axis";if(ranges[key]){from=ranges[key].from;to=ranges[key].to;break}}}if(!ranges[key]){axis=coord=="x"?xaxes[0]:yaxes[0];from=ranges[coord+"1"];to=ranges[coord+"2"]}if(from!=null&&to!=null&&from>to){var tmp=from;from=to;to=tmp}return{from:from,to:to,axis:axis}}function drawBackground(){ctx.save();ctx.translate(plotOffset.left,plotOffset.top);ctx.fillStyle=getColorOrGradient(options.grid.backgroundColor,plotHeight,0,"rgba(255, 255, 255, 0)");ctx.fillRect(0,0,plotWidth,plotHeight);ctx.restore()}function drawGrid(){var i,axes,bw,bc;ctx.save();ctx.translate(plotOffset.left,plotOffset.top);var markings=options.grid.markings;if(markings){if($.isFunction(markings)){axes=plot.getAxes();axes.xmin=axes.xaxis.min;axes.xmax=axes.xaxis.max;axes.ymin=axes.yaxis.min;axes.ymax=axes.yaxis.max;markings=markings(axes)}for(i=0;i<markings.length;++i){var m=markings[i],xrange=extractRange(m,"x"),yrange=extractRange(m,"y");if(xrange.from==null)xrange.from=xrange.axis.min;if(xrange.to==null)xrange.to=xrange.axis.max;if(yrange.from==null)yrange.from=yrange.axis.min;if(yrange.to==null)yrange.to=yrange.axis.max;if(xrange.to<xrange.axis.min||xrange.from>xrange.axis.max||yrange.to<yrange.axis.min||yrange.from>yrange.axis.max)continue;xrange.from=Math.max(xrange.from,xrange.axis.min);xrange.to=Math.min(xrange.to,xrange.axis.max);yrange.from=Math.max(yrange.from,yrange.axis.min);yrange.to=Math.min(yrange.to,yrange.axis.max);var xequal=xrange.from===xrange.to,yequal=yrange.from===yrange.to;if(xequal&&yequal){continue}xrange.from=Math.floor(xrange.axis.p2c(xrange.from));xrange.to=Math.floor(xrange.axis.p2c(xrange.to));yrange.from=Math.floor(yrange.axis.p2c(yrange.from));yrange.to=Math.floor(yrange.axis.p2c(yrange.to));if(xequal||yequal){var lineWidth=m.lineWidth||options.grid.markingsLineWidth,subPixel=lineWidth%2?.5:0;ctx.beginPath();ctx.strokeStyle=m.color||options.grid.markingsColor;ctx.lineWidth=lineWidth;if(xequal){ctx.moveTo(xrange.to+subPixel,yrange.from);ctx.lineTo(xrange.to+subPixel,yrange.to)}else{ctx.moveTo(xrange.from,yrange.to+subPixel);ctx.lineTo(xrange.to,yrange.to+subPixel)}ctx.stroke()}else{ctx.fillStyle=m.color||options.grid.markingsColor;ctx.fillRect(xrange.from,yrange.to,xrange.to-xrange.from,yrange.from-yrange.to)}}}axes=allAxes();bw=options.grid.borderWidth;for(var j=0;j<axes.length;++j){var axis=axes[j],box=axis.box,t=axis.tickLength,x,y,xoff,yoff;if(!axis.show||axis.ticks.length==0)continue;ctx.lineWidth=1;if(axis.direction=="x"){x=0;if(t=="full")y=axis.position=="top"?0:plotHeight;else y=box.top-plotOffset.top+(axis.position=="top"?box.height:0)}else{y=0;if(t=="full")x=axis.position=="left"?0:plotWidth;else x=box.left-plotOffset.left+(axis.position=="left"?box.width:0)}if(!axis.innermost){ctx.strokeStyle=axis.options.color;ctx.beginPath();xoff=yoff=0;if(axis.direction=="x")xoff=plotWidth+1;else yoff=plotHeight+1;if(ctx.lineWidth==1){if(axis.direction=="x"){y=Math.floor(y)+.5}else{x=Math.floor(x)+.5}}ctx.moveTo(x,y);ctx.lineTo(x+xoff,y+yoff);ctx.stroke()}ctx.strokeStyle=axis.options.tickColor;ctx.beginPath();for(i=0;i<axis.ticks.length;++i){var v=axis.ticks[i].v;xoff=yoff=0;if(isNaN(v)||v<axis.min||v>axis.max||t=="full"&&(_typeof(bw)=="object"&&bw[axis.position]>0||bw>0)&&(v==axis.min||v==axis.max))continue;if(axis.direction=="x"){x=axis.p2c(v);yoff=t=="full"?-plotHeight:t;if(axis.position=="top")yoff=-yoff}else{y=axis.p2c(v);xoff=t=="full"?-plotWidth:t;if(axis.position=="left")xoff=-xoff}if(ctx.lineWidth==1){if(axis.direction=="x")x=Math.floor(x)+.5;else y=Math.floor(y)+.5}ctx.moveTo(x,y);ctx.lineTo(x+xoff,y+yoff)}ctx.stroke()}if(bw){bc=options.grid.borderColor;if(_typeof(bw)=="object"||_typeof(bc)=="object"){if(_typeof(bw)!=="object"){bw={top:bw,right:bw,bottom:bw,left:bw}}if(_typeof(bc)!=="object"){bc={top:bc,right:bc,bottom:bc,left:bc}}if(bw.top>0){ctx.strokeStyle=bc.top;ctx.lineWidth=bw.top;ctx.beginPath();ctx.moveTo(0-bw.left,0-bw.top/2);ctx.lineTo(plotWidth,0-bw.top/2);ctx.stroke()}if(bw.right>0){ctx.strokeStyle=bc.right;ctx.lineWidth=bw.right;ctx.beginPath();ctx.moveTo(plotWidth+bw.right/2,0-bw.top);ctx.lineTo(plotWidth+bw.right/2,plotHeight);ctx.stroke()}if(bw.bottom>0){ctx.strokeStyle=bc.bottom;ctx.lineWidth=bw.bottom;ctx.beginPath();ctx.moveTo(plotWidth+bw.right,plotHeight+bw.bottom/2);ctx.lineTo(0,plotHeight+bw.bottom/2);ctx.stroke()}if(bw.left>0){ctx.strokeStyle=bc.left;ctx.lineWidth=bw.left;ctx.beginPath();ctx.moveTo(0-bw.left/2,plotHeight+bw.bottom);ctx.lineTo(0-bw.left/2,0);ctx.stroke()}}else{ctx.lineWidth=bw;ctx.strokeStyle=options.grid.borderColor;ctx.strokeRect(-bw/2,-bw/2,plotWidth+bw,plotHeight+bw)}}ctx.restore()}function drawAxisLabels(){$.each(allAxes(),function(_,axis){var box=axis.box,legacyStyles=axis.direction+"Axis "+axis.direction+axis.n+"Axis",layer="flot-"+axis.direction+"-axis flot-"+axis.direction+axis.n+"-axis "+legacyStyles,font=axis.options.font||"flot-tick-label tickLabel",tick,x,y,halign,valign;surface.removeText(layer);if(!axis.show||axis.ticks.length==0)return;for(var i=0;i<axis.ticks.length;++i){tick=axis.ticks[i];if(!tick.label||tick.v<axis.min||tick.v>axis.max)continue;if(axis.direction=="x"){halign="center";x=plotOffset.left+axis.p2c(tick.v);if(axis.position=="bottom"){y=box.top+box.padding}else{y=box.top+box.height-box.padding;valign="bottom"}}else{valign="middle";y=plotOffset.top+axis.p2c(tick.v);if(axis.position=="left"){x=box.left+box.width-box.padding;halign="right"}else{x=box.left+box.padding}}surface.addText(layer,x,y,tick.label,font,null,null,halign,valign)}})}function drawSeries(series){if(series.lines.show)drawSeriesLines(series);if(series.bars.show)drawSeriesBars(series);if(series.points.show)drawSeriesPoints(series)}function drawSeriesLines(series){function plotLine(datapoints,xoffset,yoffset,axisx,axisy){var points=datapoints.points,ps=datapoints.pointsize,prevx=null,prevy=null;ctx.beginPath();for(var i=ps;i<points.length;i+=ps){var x1=points[i-ps],y1=points[i-ps+1],x2=points[i],y2=points[i+1];if(x1==null||x2==null)continue;if(y1<=y2&&y1<axisy.min){if(y2<axisy.min)continue;x1=(axisy.min-y1)/(y2-y1)*(x2-x1)+x1;y1=axisy.min}else if(y2<=y1&&y2<axisy.min){if(y1<axisy.min)continue;x2=(axisy.min-y1)/(y2-y1)*(x2-x1)+x1;y2=axisy.min}if(y1>=y2&&y1>axisy.max){if(y2>axisy.max)continue;x1=(axisy.max-y1)/(y2-y1)*(x2-x1)+x1;y1=axisy.max}else if(y2>=y1&&y2>axisy.max){if(y1>axisy.max)continue;x2=(axisy.max-y1)/(y2-y1)*(x2-x1)+x1;y2=axisy.max}if(x1<=x2&&x1<axisx.min){if(x2<axisx.min)continue;y1=(axisx.min-x1)/(x2-x1)*(y2-y1)+y1;x1=axisx.min}else if(x2<=x1&&x2<axisx.min){if(x1<axisx.min)continue;y2=(axisx.min-x1)/(x2-x1)*(y2-y1)+y1;x2=axisx.min}if(x1>=x2&&x1>axisx.max){if(x2>axisx.max)continue;y1=(axisx.max-x1)/(x2-x1)*(y2-y1)+y1;x1=axisx.max}else if(x2>=x1&&x2>axisx.max){if(x1>axisx.max)continue;y2=(axisx.max-x1)/(x2-x1)*(y2-y1)+y1;x2=axisx.max}if(x1!=prevx||y1!=prevy)ctx.moveTo(axisx.p2c(x1)+xoffset,axisy.p2c(y1)+yoffset);prevx=x2;prevy=y2;ctx.lineTo(axisx.p2c(x2)+xoffset,axisy.p2c(y2)+yoffset)}ctx.stroke()}function plotLineArea(datapoints,axisx,axisy){var points=datapoints.points,ps=datapoints.pointsize,bottom=Math.min(Math.max(0,axisy.min),axisy.max),i=0,top,areaOpen=false,ypos=1,segmentStart=0,segmentEnd=0;while(true){if(ps>0&&i>points.length+ps)break;i+=ps;var x1=points[i-ps],y1=points[i-ps+ypos],x2=points[i],y2=points[i+ypos];if(areaOpen){if(ps>0&&x1!=null&&x2==null){segmentEnd=i;ps=-ps;ypos=2;continue}if(ps<0&&i==segmentStart+ps){ctx.fill();areaOpen=false;ps=-ps;ypos=1;i=segmentStart=segmentEnd+ps;continue}}if(x1==null||x2==null)continue;if(x1<=x2&&x1<axisx.min){if(x2<axisx.min)continue;y1=(axisx.min-x1)/(x2-x1)*(y2-y1)+y1;x1=axisx.min}else if(x2<=x1&&x2<axisx.min){if(x1<axisx.min)continue;y2=(axisx.min-x1)/(x2-x1)*(y2-y1)+y1;x2=axisx.min}if(x1>=x2&&x1>axisx.max){if(x2>axisx.max)continue;y1=(axisx.max-x1)/(x2-x1)*(y2-y1)+y1;x1=axisx.max}else if(x2>=x1&&x2>axisx.max){if(x1>axisx.max)continue;y2=(axisx.max-x1)/(x2-x1)*(y2-y1)+y1;x2=axisx.max}if(!areaOpen){ctx.beginPath();ctx.moveTo(axisx.p2c(x1),axisy.p2c(bottom));areaOpen=true}if(y1>=axisy.max&&y2>=axisy.max){ctx.lineTo(axisx.p2c(x1),axisy.p2c(axisy.max));ctx.lineTo(axisx.p2c(x2),axisy.p2c(axisy.max));continue}else if(y1<=axisy.min&&y2<=axisy.min){ctx.lineTo(axisx.p2c(x1),axisy.p2c(axisy.min));ctx.lineTo(axisx.p2c(x2),axisy.p2c(axisy.min));continue}var x1old=x1,x2old=x2;if(y1<=y2&&y1<axisy.min&&y2>=axisy.min){x1=(axisy.min-y1)/(y2-y1)*(x2-x1)+x1;y1=axisy.min}else if(y2<=y1&&y2<axisy.min&&y1>=axisy.min){x2=(axisy.min-y1)/(y2-y1)*(x2-x1)+x1;y2=axisy.min}if(y1>=y2&&y1>axisy.max&&y2<=axisy.max){x1=(axisy.max-y1)/(y2-y1)*(x2-x1)+x1;y1=axisy.max}else if(y2>=y1&&y2>axisy.max&&y1<=axisy.max){x2=(axisy.max-y1)/(y2-y1)*(x2-x1)+x1;y2=axisy.max}if(x1!=x1old){ctx.lineTo(axisx.p2c(x1old),axisy.p2c(y1))}ctx.lineTo(axisx.p2c(x1),axisy.p2c(y1));ctx.lineTo(axisx.p2c(x2),axisy.p2c(y2));if(x2!=x2old){ctx.lineTo(axisx.p2c(x2),axisy.p2c(y2));ctx.lineTo(axisx.p2c(x2old),axisy.p2c(y2))}}}ctx.save();ctx.translate(plotOffset.left,plotOffset.top);ctx.lineJoin="round";var lw=series.lines.lineWidth,sw=series.shadowSize;if(lw>0&&sw>0){ctx.lineWidth=sw;ctx.strokeStyle="rgba(0,0,0,0.1)";var angle=Math.PI/18;plotLine(series.datapoints,Math.sin(angle)*(lw/2+sw/2),Math.cos(angle)*(lw/2+sw/2),series.xaxis,series.yaxis);ctx.lineWidth=sw/2;plotLine(series.datapoints,Math.sin(angle)*(lw/2+sw/4),Math.cos(angle)*(lw/2+sw/4),series.xaxis,series.yaxis)}ctx.lineWidth=lw;ctx.strokeStyle=series.color;var fillStyle=getFillStyle(series.lines,series.color,0,plotHeight);if(fillStyle){ctx.fillStyle=fillStyle;plotLineArea(series.datapoints,series.xaxis,series.yaxis)}if(lw>0)plotLine(series.datapoints,0,0,series.xaxis,series.yaxis);ctx.restore()}function drawSeriesPoints(series){function plotPoints(datapoints,radius,fillStyle,offset,shadow,axisx,axisy,symbol){var points=datapoints.points,ps=datapoints.pointsize;for(var i=0;i<points.length;i+=ps){var x=points[i],y=points[i+1];if(x==null||x<axisx.min||x>axisx.max||y<axisy.min||y>axisy.max)continue;ctx.beginPath();x=axisx.p2c(x);y=axisy.p2c(y)+offset;if(symbol=="circle")ctx.arc(x,y,radius,0,shadow?Math.PI:Math.PI*2,false);else symbol(ctx,x,y,radius,shadow);ctx.closePath();if(fillStyle){ctx.fillStyle=fillStyle;ctx.fill()}ctx.stroke()}}ctx.save();ctx.translate(plotOffset.left,plotOffset.top);var lw=series.points.lineWidth,sw=series.shadowSize,radius=series.points.radius,symbol=series.points.symbol;if(lw==0)lw=1e-4;if(lw>0&&sw>0){var w=sw/2;ctx.lineWidth=w;ctx.strokeStyle="rgba(0,0,0,0.1)";plotPoints(series.datapoints,radius,null,w+w/2,true,series.xaxis,series.yaxis,symbol);ctx.strokeStyle="rgba(0,0,0,0.2)";plotPoints(series.datapoints,radius,null,w/2,true,series.xaxis,series.yaxis,symbol)}ctx.lineWidth=lw;ctx.strokeStyle=series.color;plotPoints(series.datapoints,radius,getFillStyle(series.points,series.color),0,false,series.xaxis,series.yaxis,symbol);ctx.restore()}function drawBar(x,y,b,barLeft,barRight,fillStyleCallback,axisx,axisy,c,horizontal,lineWidth){var left,right,bottom,top,drawLeft,drawRight,drawTop,drawBottom,tmp;if(horizontal){drawBottom=drawRight=drawTop=true;drawLeft=false;left=b;right=x;top=y+barLeft;bottom=y+barRight;if(right<left){tmp=right;right=left;left=tmp;drawLeft=true;drawRight=false}}else{drawLeft=drawRight=drawTop=true;drawBottom=false;left=x+barLeft;right=x+barRight;bottom=b;top=y;if(top<bottom){tmp=top;top=bottom;bottom=tmp;drawBottom=true;drawTop=false}}if(right<axisx.min||left>axisx.max||top<axisy.min||bottom>axisy.max)return;if(left<axisx.min){left=axisx.min;drawLeft=false}if(right>axisx.max){right=axisx.max;drawRight=false}if(bottom<axisy.min){bottom=axisy.min;drawBottom=false}if(top>axisy.max){top=axisy.max;drawTop=false}left=axisx.p2c(left);bottom=axisy.p2c(bottom);right=axisx.p2c(right);top=axisy.p2c(top);if(fillStyleCallback){c.fillStyle=fillStyleCallback(bottom,top);c.fillRect(left,top,right-left,bottom-top)}if(lineWidth>0&&(drawLeft||drawRight||drawTop||drawBottom)){c.beginPath();c.moveTo(left,bottom);if(drawLeft)c.lineTo(left,top);else c.moveTo(left,top);if(drawTop)c.lineTo(right,top);else c.moveTo(right,top);if(drawRight)c.lineTo(right,bottom);else c.moveTo(right,bottom);if(drawBottom)c.lineTo(left,bottom);else c.moveTo(left,bottom);c.stroke()}}function drawSeriesBars(series){function plotBars(datapoints,barLeft,barRight,fillStyleCallback,axisx,axisy){var points=datapoints.points,ps=datapoints.pointsize;for(var i=0;i<points.length;i+=ps){if(points[i]==null)continue;drawBar(points[i],points[i+1],points[i+2],barLeft,barRight,fillStyleCallback,axisx,axisy,ctx,series.bars.horizontal,series.bars.lineWidth)}}ctx.save();ctx.translate(plotOffset.left,plotOffset.top);ctx.lineWidth=series.bars.lineWidth;ctx.strokeStyle=series.color;var barLeft;switch(series.bars.align){case"left":barLeft=0;break;case"right":barLeft=-series.bars.barWidth;break;default:barLeft=-series.bars.barWidth/2}var fillStyleCallback=series.bars.fill?function(bottom,top){return getFillStyle(series.bars,series.color,bottom,top)}:null;plotBars(series.datapoints,barLeft,barLeft+series.bars.barWidth,fillStyleCallback,series.xaxis,series.yaxis);ctx.restore()}function getFillStyle(filloptions,seriesColor,bottom,top){var fill=filloptions.fill;if(!fill)return null;if(filloptions.fillColor)return getColorOrGradient(filloptions.fillColor,bottom,top,seriesColor);var c=$.color.parse(seriesColor);c.a=typeof fill=="number"?fill:.4;c.normalize();return c.toString()}function insertLegend(){if(options.legend.container!=null){$(options.legend.container).html("")}else{placeholder.find(".legend").remove()}if(!options.legend.show){return}var fragments=[],entries=[],rowStarted=false,lf=options.legend.labelFormatter,s,label;for(var i=0;i<series.length;++i){s=series[i];if(s.label){label=lf?lf(s.label,s):s.label;if(label){entries.push({label:label,color:s.color})}}}if(options.legend.sorted){if($.isFunction(options.legend.sorted)){entries.sort(options.legend.sorted)}else if(options.legend.sorted=="reverse"){entries.reverse()}else{var ascending=options.legend.sorted!="descending";entries.sort(function(a,b){return a.label==b.label?0:a.label<b.label!=ascending?1:-1})}}for(var i=0;i<entries.length;++i){var entry=entries[i];if(i%options.legend.noColumns==0){if(rowStarted)fragments.push("</tr>");fragments.push("<tr>");rowStarted=true}fragments.push('<td class="legendColorBox"><div style="border:1px solid '+options.legend.labelBoxBorderColor+';padding:1px"><div style="width:4px;height:0;border:5px solid '+entry.color+';overflow:hidden"></div></div></td>'+'<td class="legendLabel" data-test-subj="flotLegendLabel">'+entry.label+"</td>")}if(rowStarted)fragments.push("</tr>");if(fragments.length==0)return;var table='<table style="font-size:smaller;color:'+options.grid.color+'">'+fragments.join("")+"</table>";if(options.legend.container!=null)$(options.legend.container).html(table);else{var pos="",p=options.legend.position,m=options.legend.margin;if(m[0]==null)m=[m,m];if(p.charAt(0)=="n")pos+="top:"+(m[1]+plotOffset.top)+"px;";else if(p.charAt(0)=="s")pos+="bottom:"+(m[1]+plotOffset.bottom)+"px;";if(p.charAt(1)=="e")pos+="right:"+(m[0]+plotOffset.right)+"px;";else if(p.charAt(1)=="w")pos+="left:"+(m[0]+plotOffset.left)+"px;";var legend=$('<div class="legend">'+table.replace('style="','style="position:absolute;'+pos+";")+"</div>").appendTo(placeholder);if(options.legend.backgroundOpacity!=0){var c=options.legend.backgroundColor;if(c==null){c=options.grid.backgroundColor;if(c&&typeof c=="string")c=$.color.parse(c);else c=$.color.extract(legend,"background-color");c.a=1;c=c.toString()}var div=legend.children();$('<div style="position:absolute;width:'+div.width()+"px;height:"+div.height()+"px;"+pos+"background-color:"+c+';"> </div>').prependTo(legend).css("opacity",options.legend.backgroundOpacity)}}}var highlights=[],redrawTimeout=null;function findNearbyItem(mouseX,mouseY,seriesFilter){var maxDistance=options.grid.mouseActiveRadius,smallestDistance=maxDistance*maxDistance+1,item=null,foundPoint=false,i,j,ps;for(i=series.length-1;i>=0;--i){if(!seriesFilter(series[i]))continue;var s=series[i],axisx=s.xaxis,axisy=s.yaxis,points=s.datapoints.points,mx=axisx.c2p(mouseX),my=axisy.c2p(mouseY),maxx=maxDistance/axisx.scale,maxy=maxDistance/axisy.scale;ps=s.datapoints.pointsize;if(axisx.options.inverseTransform)maxx=Number.MAX_VALUE;if(axisy.options.inverseTransform)maxy=Number.MAX_VALUE;if(s.lines.show||s.points.show){for(j=0;j<points.length;j+=ps){var x=points[j],y=points[j+1];if(x==null)continue;if(x-mx>maxx||x-mx<-maxx||y-my>maxy||y-my<-maxy)continue;var dx=Math.abs(axisx.p2c(x)-mouseX),dy=Math.abs(axisy.p2c(y)-mouseY),dist=dx*dx+dy*dy;if(dist<smallestDistance){smallestDistance=dist;item=[i,j/ps]}}}if(s.bars.show&&!item){var barLeft,barRight;switch(s.bars.align){case"left":barLeft=0;break;case"right":barLeft=-s.bars.barWidth;break;default:barLeft=-s.bars.barWidth/2}barRight=barLeft+s.bars.barWidth;for(j=0;j<points.length;j+=ps){var x=points[j],y=points[j+1],b=points[j+2];if(x==null)continue;if(series[i].bars.horizontal?mx<=Math.max(b,x)&&mx>=Math.min(b,x)&&my>=y+barLeft&&my<=y+barRight:mx>=x+barLeft&&mx<=x+barRight&&my>=Math.min(b,y)&&my<=Math.max(b,y))item=[i,j/ps]}}}if(item){i=item[0];j=item[1];ps=series[i].datapoints.pointsize;return{datapoint:series[i].datapoints.points.slice(j*ps,(j+1)*ps),dataIndex:j,series:series[i],seriesIndex:i}}return null}function onMouseMove(e){if(options.grid.hoverable)triggerClickHoverEvent("plothover",e,function(s){return s["hoverable"]!=false})}function onMouseLeave(e){if(options.grid.hoverable)triggerClickHoverEvent("plothover",e,function(s){return false})}function onClick(e){triggerClickHoverEvent("plotclick",e,function(s){return s["clickable"]!=false})}function triggerClickHoverEvent(eventname,event,seriesFilter){var offset=eventHolder.offset(),canvasX=event.pageX-offset.left-plotOffset.left,canvasY=event.pageY-offset.top-plotOffset.top,pos=canvasToAxisCoords({left:canvasX,top:canvasY});pos.pageX=event.pageX;pos.pageY=event.pageY;var item=findNearbyItem(canvasX,canvasY,seriesFilter);if(item){item.pageX=parseInt(item.series.xaxis.p2c(item.datapoint[0])+offset.left+plotOffset.left,10);item.pageY=parseInt(item.series.yaxis.p2c(item.datapoint[1])+offset.top+plotOffset.top,10)}if(options.grid.autoHighlight){for(var i=0;i<highlights.length;++i){var h=highlights[i];if(h.auto==eventname&&!(item&&h.series==item.series&&h.point[0]==item.datapoint[0]&&h.point[1]==item.datapoint[1]))unhighlight(h.series,h.point)}if(item)highlight(item.series,item.datapoint,eventname)}placeholder.trigger(eventname,[pos,item])}function triggerRedrawOverlay(){var t=options.interaction.redrawOverlayInterval;if(t==-1){drawOverlay();return}if(!redrawTimeout)redrawTimeout=setTimeout(drawOverlay,t)}function drawOverlay(){redrawTimeout=null;octx.save();overlay.clear();octx.translate(plotOffset.left,plotOffset.top);var i,hi;for(i=0;i<highlights.length;++i){hi=highlights[i];if(hi.series.bars.show)drawBarHighlight(hi.series,hi.point);else drawPointHighlight(hi.series,hi.point)}octx.restore();executeHooks(hooks.drawOverlay,[octx])}function highlight(s,point,auto){if(typeof s=="number")s=series[s];if(typeof point=="number"){var ps=s.datapoints.pointsize;point=s.datapoints.points.slice(ps*point,ps*(point+1))}var i=indexOfHighlight(s,point);if(i==-1){highlights.push({series:s,point:point,auto:auto});triggerRedrawOverlay()}else if(!auto)highlights[i].auto=false}function unhighlight(s,point){if(s==null&&point==null){highlights=[];triggerRedrawOverlay();return}if(typeof s=="number")s=series[s];if(typeof point=="number"){var ps=s.datapoints.pointsize;point=s.datapoints.points.slice(ps*point,ps*(point+1))}var i=indexOfHighlight(s,point);if(i!=-1){highlights.splice(i,1);triggerRedrawOverlay()}}function indexOfHighlight(s,p){for(var i=0;i<highlights.length;++i){var h=highlights[i];if(h.series==s&&h.point[0]==p[0]&&h.point[1]==p[1])return i}return-1}function drawPointHighlight(series,point){var x=point[0],y=point[1],axisx=series.xaxis,axisy=series.yaxis,highlightColor=typeof series.highlightColor==="string"?series.highlightColor:$.color.parse(series.color).scale("a",.5).toString();if(x<axisx.min||x>axisx.max||y<axisy.min||y>axisy.max)return;var pointRadius=series.points.radius+series.points.lineWidth/2;octx.lineWidth=pointRadius;octx.strokeStyle=highlightColor;var radius=1.5*pointRadius;x=axisx.p2c(x);y=axisy.p2c(y);octx.beginPath();if(series.points.symbol=="circle")octx.arc(x,y,radius,0,2*Math.PI,false);else series.points.symbol(octx,x,y,radius,false);octx.closePath();octx.stroke()}function drawBarHighlight(series,point){var highlightColor=typeof series.highlightColor==="string"?series.highlightColor:$.color.parse(series.color).scale("a",.5).toString(),fillStyle=highlightColor,barLeft;switch(series.bars.align){case"left":barLeft=0;break;case"right":barLeft=-series.bars.barWidth;break;default:barLeft=-series.bars.barWidth/2}octx.lineWidth=series.bars.lineWidth;octx.strokeStyle=highlightColor;drawBar(point[0],point[1],point[2]||0,barLeft,barLeft+series.bars.barWidth,function(){return fillStyle},series.xaxis,series.yaxis,octx,series.bars.horizontal,series.bars.lineWidth)}function getColorOrGradient(spec,bottom,top,defaultColor){if(typeof spec=="string")return spec;else{var gradient=ctx.createLinearGradient(0,top,0,bottom);for(var i=0,l=spec.colors.length;i<l;++i){var c=spec.colors[i];if(typeof c!="string"){var co=$.color.parse(defaultColor);if(c.brightness!=null)co=co.scale("rgb",c.brightness);if(c.opacity!=null)co.a*=c.opacity;c=co.toString()}gradient.addColorStop(i/(l-1),c)}return gradient}}}$.plot=function(placeholder,data,options){var plot=new Plot($(placeholder),data,options,$.plot.plugins);return plot};$.plot.version="0.8.3";$.plot.plugins=[];$.fn.plot=function(data,options){return this.each(function(){$.plot(this,data,options)})};function floorInBase(n,base){return base*Math.floor(n/base)}})(jQuery)},5736:function(module,exports,__webpack_require__){"use strict";var _i18n=__webpack_require__(5);(function($){var options={xaxis:{timezone:null,timeformat:null,twelveHourClock:false,monthNames:null}};function floorInBase(n,base){return base*Math.floor(n/base)}function formatDate(d,fmt,monthNames,dayNames){if(typeof d.strftime=="function"){return d.strftime(fmt)}var leftPad=function leftPad(n,pad){n=""+n;pad=""+(pad==null?"0":pad);return n.length==1?pad+n:n};var r=[];var escape=false;var hours=d.getHours();var isAM=hours<12;if(monthNames==null){monthNames=[_i18n.i18n.translate("common.ui.flotCharts.janLabel",{defaultMessage:"Jan"}),_i18n.i18n.translate("common.ui.flotCharts.febLabel",{defaultMessage:"Feb"}),_i18n.i18n.translate("common.ui.flotCharts.marLabel",{defaultMessage:"Mar"}),_i18n.i18n.translate("common.ui.flotCharts.aprLabel",{defaultMessage:"Apr"}),_i18n.i18n.translate("common.ui.flotCharts.mayLabel",{defaultMessage:"May"}),_i18n.i18n.translate("common.ui.flotCharts.junLabel",{defaultMessage:"Jun"}),_i18n.i18n.translate("common.ui.flotCharts.julLabel",{defaultMessage:"Jul"}),_i18n.i18n.translate("common.ui.flotCharts.augLabel",{defaultMessage:"Aug"}),_i18n.i18n.translate("common.ui.flotCharts.sepLabel",{defaultMessage:"Sep"}),_i18n.i18n.translate("common.ui.flotCharts.octLabel",{defaultMessage:"Oct"}),_i18n.i18n.translate("common.ui.flotCharts.novLabel",{defaultMessage:"Nov"}),_i18n.i18n.translate("common.ui.flotCharts.decLabel",{defaultMessage:"Dec"})]}if(dayNames==null){dayNames=[_i18n.i18n.translate("common.ui.flotCharts.sunLabel",{defaultMessage:"Sun"}),_i18n.i18n.translate("common.ui.flotCharts.monLabel",{defaultMessage:"Mon"}),_i18n.i18n.translate("common.ui.flotCharts.tueLabel",{defaultMessage:"Tue"}),_i18n.i18n.translate("common.ui.flotCharts.wedLabel",{defaultMessage:"Wed"}),_i18n.i18n.translate("common.ui.flotCharts.thuLabel",{defaultMessage:"Thu"}),_i18n.i18n.translate("common.ui.flotCharts.friLabel",{defaultMessage:"Fri"}),_i18n.i18n.translate("common.ui.flotCharts.satLabel",{defaultMessage:"Sat"})]}var hours12;if(hours>12){hours12=hours-12}else if(hours==0){hours12=12}else{hours12=hours}for(var i=0;i<fmt.length;++i){var c=fmt.charAt(i);if(escape){switch(c){case"a":c=""+dayNames[d.getDay()];break;case"b":c=""+monthNames[d.getMonth()];break;case"d":c=leftPad(d.getDate());break;case"e":c=leftPad(d.getDate()," ");break;case"h":case"H":c=leftPad(hours);break;case"I":c=leftPad(hours12);break;case"l":c=leftPad(hours12," ");break;case"m":c=leftPad(d.getMonth()+1);break;case"M":c=leftPad(d.getMinutes());break;case"q":c=""+(Math.floor(d.getMonth()/3)+1);break;case"S":c=leftPad(d.getSeconds());break;case"y":c=leftPad(d.getFullYear()%100);break;case"Y":c=""+d.getFullYear();break;case"p":c=isAM?""+"am":""+"pm";break;case"P":c=isAM?""+"AM":""+"PM";break;case"w":c=""+d.getDay();break}r.push(c);escape=false}else{if(c=="%"){escape=true}else{r.push(c)}}}return r.join("")}function makeUtcWrapper(d){function addProxyMethod(sourceObj,sourceMethod,targetObj,targetMethod){sourceObj[sourceMethod]=function(){return targetObj[targetMethod].apply(targetObj,arguments)}}var utc={date:d};if(d.strftime!=undefined){addProxyMethod(utc,"strftime",d,"strftime")}addProxyMethod(utc,"getTime",d,"getTime");addProxyMethod(utc,"setTime",d,"setTime");var props=["Date","Day","FullYear","Hours","Milliseconds","Minutes","Month","Seconds"];for(var p=0;p<props.length;p++){addProxyMethod(utc,"get"+props[p],d,"getUTC"+props[p]);addProxyMethod(utc,"set"+props[p],d,"setUTC"+props[p])}return utc}function dateGenerator(ts,opts){if(opts.timezone=="browser"){return new Date(ts)}else if(!opts.timezone||opts.timezone=="utc"){return makeUtcWrapper(new Date(ts))}else if(typeof timezoneJS!="undefined"&&typeof timezoneJS.Date!="undefined"){var d=new timezoneJS.Date;d.setTimezone(opts.timezone);d.setTime(ts);return d}else{return makeUtcWrapper(new Date(ts))}}var timeUnitSize={second:1e3,minute:60*1e3,hour:60*60*1e3,day:24*60*60*1e3,month:30*24*60*60*1e3,quarter:3*30*24*60*60*1e3,year:365.2425*24*60*60*1e3};var baseSpec=[[1,"second"],[2,"second"],[5,"second"],[10,"second"],[30,"second"],[1,"minute"],[2,"minute"],[5,"minute"],[10,"minute"],[30,"minute"],[1,"hour"],[2,"hour"],[4,"hour"],[8,"hour"],[12,"hour"],[1,"day"],[2,"day"],[3,"day"],[.25,"month"],[.5,"month"],[1,"month"],[2,"month"]];var specMonths=baseSpec.concat([[3,"month"],[6,"month"],[1,"year"]]);var specQuarters=baseSpec.concat([[1,"quarter"],[2,"quarter"],[1,"year"]]);function init(plot){plot.hooks.processOptions.push(function(plot,options){$.each(plot.getAxes(),function(axisName,axis){var opts=axis.options;if(opts.mode=="time"){axis.tickGenerator=function(axis){var ticks=[];var d=dateGenerator(axis.min,opts);var minSize=0;var spec=opts.tickSize&&opts.tickSize[1]==="quarter"||opts.minTickSize&&opts.minTickSize[1]==="quarter"?specQuarters:specMonths;if(opts.minTickSize!=null){if(typeof opts.tickSize=="number"){minSize=opts.tickSize}else{minSize=opts.minTickSize[0]*timeUnitSize[opts.minTickSize[1]]}}for(var i=0;i<spec.length-1;++i){if(axis.delta<(spec[i][0]*timeUnitSize[spec[i][1]]+spec[i+1][0]*timeUnitSize[spec[i+1][1]])/2&&spec[i][0]*timeUnitSize[spec[i][1]]>=minSize){break}}var size=spec[i][0];var unit=spec[i][1];if(unit=="year"){if(opts.minTickSize!=null&&opts.minTickSize[1]=="year"){size=Math.floor(opts.minTickSize[0])}else{var magn=Math.pow(10,Math.floor(Math.log(axis.delta/timeUnitSize.year)/Math.LN10));var norm=axis.delta/timeUnitSize.year/magn;if(norm<1.5){size=1}else if(norm<3){size=2}else if(norm<7.5){size=5}else{size=10}size*=magn}if(size<1){size=1}}axis.tickSize=opts.tickSize||[size,unit];var tickSize=axis.tickSize[0];unit=axis.tickSize[1];var step=tickSize*timeUnitSize[unit];if(unit=="second"){d.setSeconds(floorInBase(d.getSeconds(),tickSize))}else if(unit=="minute"){d.setMinutes(floorInBase(d.getMinutes(),tickSize))}else if(unit=="hour"){d.setHours(floorInBase(d.getHours(),tickSize))}else if(unit=="month"){d.setMonth(floorInBase(d.getMonth(),tickSize))}else if(unit=="quarter"){d.setMonth(3*floorInBase(d.getMonth()/3,tickSize))}else if(unit=="year"){d.setFullYear(floorInBase(d.getFullYear(),tickSize))}d.setMilliseconds(0);if(step>=timeUnitSize.minute){d.setSeconds(0)}if(step>=timeUnitSize.hour){d.setMinutes(0)}if(step>=timeUnitSize.day){d.setHours(0)}if(step>=timeUnitSize.day*4){d.setDate(1)}if(step>=timeUnitSize.month*2){d.setMonth(floorInBase(d.getMonth(),3))}if(step>=timeUnitSize.quarter*2){d.setMonth(floorInBase(d.getMonth(),6))}if(step>=timeUnitSize.year){d.setMonth(0)}var carry=0;var v=Number.NaN;var prev;do{prev=v;v=d.getTime();ticks.push(v);if(unit=="month"||unit=="quarter"){if(tickSize<1){d.setDate(1);var start=d.getTime();d.setMonth(d.getMonth()+(unit=="quarter"?3:1));var end=d.getTime();d.setTime(v+carry*timeUnitSize.hour+(end-start)*tickSize);carry=d.getHours();d.setHours(0)}else{d.setMonth(d.getMonth()+tickSize*(unit=="quarter"?3:1))}}else if(unit=="year"){d.setFullYear(d.getFullYear()+tickSize)}else{d.setTime(v+step)}}while(v<axis.max&&v!=prev);return ticks};axis.tickFormatter=function(v,axis){var d=dateGenerator(v,axis.options);if(opts.timeformat!=null){return formatDate(d,opts.timeformat,opts.monthNames,opts.dayNames)}var useQuarters=axis.options.tickSize&&axis.options.tickSize[1]=="quarter"||axis.options.minTickSize&&axis.options.minTickSize[1]=="quarter";var t=axis.tickSize[0]*timeUnitSize[axis.tickSize[1]];var span=axis.max-axis.min;var suffix=opts.twelveHourClock?" %p":"";var hourCode=opts.twelveHourClock?"%I":"%H";var fmt;if(t<timeUnitSize.minute){fmt=hourCode+":%M:%S"+suffix}else if(t<timeUnitSize.day){if(span<2*timeUnitSize.day){fmt=hourCode+":%M"+suffix}else{fmt="%b %d "+hourCode+":%M"+suffix}}else if(t<timeUnitSize.month){fmt="%b %d"}else if(useQuarters&&t<timeUnitSize.quarter||!useQuarters&&t<timeUnitSize.year){if(span<timeUnitSize.year){fmt="%b"}else{fmt="%b %Y"}}else if(useQuarters&&t<timeUnitSize.year){if(span<timeUnitSize.year){fmt="Q%q"}else{fmt="Q%q %Y"}}else{fmt="%Y"}var rt=formatDate(d,fmt,opts.monthNames,opts.dayNames);return rt}}})})}$.plot.plugins.push({init:init,options:options,name:"time",version:"1.0"});$.plot.formatDate=formatDate;$.plot.dateGenerator=dateGenerator})(jQuery)},5737:function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}(function($){var options={canvas:true};var render,getTextInfo,addText;var hasOwnProperty=Object.prototype.hasOwnProperty;function init(plot,classes){var Canvas=classes.Canvas;if(render==null){getTextInfo=Canvas.prototype.getTextInfo,addText=Canvas.prototype.addText,render=Canvas.prototype.render}Canvas.prototype.render=function(){if(!plot.getOptions().canvas){return render.call(this)}var context=this.context,cache=this._textCache;context.save();context.textBaseline="middle";for(var layerKey in cache){if(hasOwnProperty.call(cache,layerKey)){var layerCache=cache[layerKey];for(var styleKey in layerCache){if(hasOwnProperty.call(layerCache,styleKey)){var styleCache=layerCache[styleKey],updateStyles=true;for(var key in styleCache){if(hasOwnProperty.call(styleCache,key)){var info=styleCache[key],positions=info.positions,lines=info.lines;if(updateStyles){context.fillStyle=info.font.color;context.font=info.font.definition;updateStyles=false}for(var i=0,position;position=positions[i];i++){if(position.active){for(var j=0,line;line=position.lines[j];j++){context.fillText(lines[j].text,line[0],line[1])}}else{positions.splice(i--,1)}}if(positions.length==0){delete styleCache[key]}}}}}}}context.restore()};Canvas.prototype.getTextInfo=function(layer,text,font,angle,width){if(!plot.getOptions().canvas){return getTextInfo.call(this,layer,text,font,angle,width)}var textStyle,layerCache,styleCache,info;text=""+text;if(_typeof(font)==="object"){textStyle=font.style+" "+font.variant+" "+font.weight+" "+font.size+"px "+font.family}else{textStyle=font}layerCache=this._textCache[layer];if(layerCache==null){layerCache=this._textCache[layer]={}}styleCache=layerCache[textStyle];if(styleCache==null){styleCache=layerCache[textStyle]={}}info=styleCache[text];if(info==null){var context=this.context;if(_typeof(font)!=="object"){var element=$("<div>&nbsp;</div>").css("position","absolute").addClass(typeof font==="string"?font:null).appendTo(this.getTextLayer(layer));font={lineHeight:element.height(),style:element.css("font-style"),variant:element.css("font-variant"),weight:element.css("font-weight"),family:element.css("font-family"),color:element.css("color")};font.size=element.css("line-height",1).height();element.remove()}textStyle=font.style+" "+font.variant+" "+font.weight+" "+font.size+"px "+font.family;info=styleCache[text]={width:0,height:0,positions:[],lines:[],font:{definition:textStyle,color:font.color}};context.save();context.font=textStyle;var lines=(text+"").replace(/<br ?\/?>|\r\n|\r/g,"\n").split("\n");for(var i=0;i<lines.length;++i){var lineText=lines[i],measured=context.measureText(lineText);info.width=Math.max(measured.width,info.width);info.height+=font.lineHeight;info.lines.push({text:lineText,width:measured.width,height:font.lineHeight})}context.restore()}return info};Canvas.prototype.addText=function(layer,x,y,text,font,angle,width,halign,valign){if(!plot.getOptions().canvas){return addText.call(this,layer,x,y,text,font,angle,width,halign,valign)}var info=this.getTextInfo(layer,text,font,angle,width),positions=info.positions,lines=info.lines;y+=info.height/lines.length/2;if(valign=="middle"){y=Math.round(y-info.height/2)}else if(valign=="bottom"){y=Math.round(y-info.height)}else{y=Math.round(y)}if(!!(window.opera&&window.opera.version().split(".")[0]<12)){y-=2}for(var i=0,position;position=positions[i];i++){if(position.x==x&&position.y==y){position.active=true;return}}position={active:true,lines:[],x:x,y:y};positions.push(position);for(var i=0,line;line=lines[i];i++){if(halign=="center"){position.lines.push([Math.round(x-line.width/2),y])}else if(halign=="right"){position.lines.push([Math.round(x-line.width),y])}else{position.lines.push([Math.round(x),y])}y+=line.height}}}$.plot.plugins.push({init:init,options:options,name:"canvas",version:"1.0"})})(jQuery)},5738:function(module,exports,__webpack_require__){"use strict";(function($){function processRawData(plot,series,datapoints){var handlers={square:function square(ctx,x,y,radius,shadow){var size=radius*Math.sqrt(Math.PI)/2;ctx.rect(x-size,y-size,size+size,size+size)},diamond:function diamond(ctx,x,y,radius,shadow){var size=radius*Math.sqrt(Math.PI/2);ctx.moveTo(x-size,y);ctx.lineTo(x,y-size);ctx.lineTo(x+size,y);ctx.lineTo(x,y+size);ctx.lineTo(x-size,y)},triangle:function triangle(ctx,x,y,radius,shadow){var size=radius*Math.sqrt(2*Math.PI/Math.sin(Math.PI/3));var height=size*Math.sin(Math.PI/3);ctx.moveTo(x-size/2,y+height/2);ctx.lineTo(x+size/2,y+height/2);if(!shadow){ctx.lineTo(x,y-height/2);ctx.lineTo(x-size/2,y+height/2)}},cross:function cross(ctx,x,y,radius,shadow){var size=radius*Math.sqrt(Math.PI)/2;ctx.moveTo(x-size,y-size);ctx.lineTo(x+size,y+size);ctx.moveTo(x-size,y+size);ctx.lineTo(x+size,y-size)}};var s=series.points.symbol;if(handlers[s])series.points.symbol=handlers[s]}function init(plot){plot.hooks.processDatapoints.push(processRawData)}$.plot.plugins.push({init:init,name:"symbols",version:"1.0"})})(jQuery)},5739:function(module,exports,__webpack_require__){"use strict";(function($){var options={crosshair:{mode:null,color:"rgba(170, 0, 0, 0.80)",lineWidth:1}};function init(plot){var crosshair={x:-1,y:-1,locked:false};plot.setCrosshair=function setCrosshair(pos){if(!pos)crosshair.x=-1;else{var o=plot.p2c(pos);crosshair.x=Math.max(0,Math.min(o.left,plot.width()));crosshair.y=Math.max(0,Math.min(o.top,plot.height()))}plot.triggerRedrawOverlay()};plot.clearCrosshair=plot.setCrosshair;plot.lockCrosshair=function lockCrosshair(pos){if(pos)plot.setCrosshair(pos);crosshair.locked=true};plot.unlockCrosshair=function unlockCrosshair(){crosshair.locked=false};function onMouseOut(e){if(crosshair.locked)return;if(crosshair.x!=-1){crosshair.x=-1;plot.triggerRedrawOverlay()}}function onMouseMove(e){if(crosshair.locked)return;if(plot.getSelection&&plot.getSelection()){crosshair.x=-1;return}var offset=plot.offset();crosshair.x=Math.max(0,Math.min(e.pageX-offset.left,plot.width()));crosshair.y=Math.max(0,Math.min(e.pageY-offset.top,plot.height()));plot.triggerRedrawOverlay()}plot.hooks.bindEvents.push(function(plot,eventHolder){if(!plot.getOptions().crosshair.mode)return;eventHolder.mouseout(onMouseOut);eventHolder.mousemove(onMouseMove)});plot.hooks.drawOverlay.push(function(plot,ctx){var c=plot.getOptions().crosshair;if(!c.mode)return;var plotOffset=plot.getPlotOffset();ctx.save();ctx.translate(plotOffset.left,plotOffset.top);if(crosshair.x!=-1){var adj=plot.getOptions().crosshair.lineWidth%2?.5:0;ctx.strokeStyle=c.color;ctx.lineWidth=c.lineWidth;ctx.lineJoin="round";ctx.beginPath();if(c.mode.indexOf("x")!=-1){var drawX=Math.floor(crosshair.x)+adj;ctx.moveTo(drawX,0);ctx.lineTo(drawX,plot.height())}if(c.mode.indexOf("y")!=-1){var drawY=Math.floor(crosshair.y)+adj;ctx.moveTo(0,drawY);ctx.lineTo(plot.width(),drawY)}ctx.stroke()}ctx.restore()});plot.hooks.shutdown.push(function(plot,eventHolder){eventHolder.unbind("mouseout",onMouseOut);eventHolder.unbind("mousemove",onMouseMove)})}$.plot.plugins.push({init:init,options:options,name:"crosshair",version:"1.0"})})(jQuery)},5740:function(module,exports,__webpack_require__){"use strict";(function($){function init(plot){var selection={first:{x:-1,y:-1},second:{x:-1,y:-1},show:false,active:false};var savedhandlers={};var mouseUpHandler=null;function onMouseMove(e){if(selection.active){updateSelection(e);plot.getPlaceholder().trigger("plotselecting",[getSelection()])}}function onMouseDown(e){if(e.which!=1)return;document.body.focus();if(document.onselectstart!==undefined&&savedhandlers.onselectstart==null){savedhandlers.onselectstart=document.onselectstart;document.onselectstart=function(){return false}}if(document.ondrag!==undefined&&savedhandlers.ondrag==null){savedhandlers.ondrag=document.ondrag;document.ondrag=function(){return false}}setSelectionPos(selection.first,e);selection.active=true;mouseUpHandler=function mouseUpHandler(e){onMouseUp(e)};$(document).one("mouseup",mouseUpHandler)}function onMouseUp(e){mouseUpHandler=null;if(document.onselectstart!==undefined)document.onselectstart=savedhandlers.onselectstart;if(document.ondrag!==undefined)document.ondrag=savedhandlers.ondrag;selection.active=false;updateSelection(e);if(selectionIsSane())triggerSelectedEvent();else{plot.getPlaceholder().trigger("plotunselected",[]);plot.getPlaceholder().trigger("plotselecting",[null])}return false}function getSelection(){if(!selectionIsSane())return null;if(!selection.show)return null;var r={},c1=selection.first,c2=selection.second;$.each(plot.getAxes(),function(name,axis){if(axis.used){var p1=axis.c2p(c1[axis.direction]),p2=axis.c2p(c2[axis.direction]);r[name]={from:Math.min(p1,p2),to:Math.max(p1,p2)}}});return r}function triggerSelectedEvent(){var r=getSelection();plot.getPlaceholder().trigger("plotselected",[r]);if(r.xaxis&&r.yaxis)plot.getPlaceholder().trigger("selected",[{x1:r.xaxis.from,y1:r.yaxis.from,x2:r.xaxis.to,y2:r.yaxis.to}])}function clamp(min,value,max){return value<min?min:value>max?max:value}function setSelectionPos(pos,e){var o=plot.getOptions();var offset=plot.getPlaceholder().offset();var plotOffset=plot.getPlotOffset();pos.x=clamp(0,e.pageX-offset.left-plotOffset.left,plot.width());pos.y=clamp(0,e.pageY-offset.top-plotOffset.top,plot.height());if(o.selection.mode=="y")pos.x=pos==selection.first?0:plot.width();if(o.selection.mode=="x")pos.y=pos==selection.first?0:plot.height()}function updateSelection(pos){if(pos.pageX==null)return;setSelectionPos(selection.second,pos);if(selectionIsSane()){selection.show=true;plot.triggerRedrawOverlay()}else clearSelection(true)}function clearSelection(preventEvent){if(selection.show){selection.show=false;plot.triggerRedrawOverlay();if(!preventEvent)plot.getPlaceholder().trigger("plotunselected",[])}}function extractRange(ranges,coord){var axis,from,to,key,axes=plot.getAxes();for(var k in axes){axis=axes[k];if(axis.direction==coord){key=coord+axis.n+"axis";if(!ranges[key]&&axis.n==1)key=coord+"axis";if(ranges[key]){from=ranges[key].from;to=ranges[key].to;break}}}if(!ranges[key]){axis=coord=="x"?plot.getXAxes()[0]:plot.getYAxes()[0];from=ranges[coord+"1"];to=ranges[coord+"2"]}if(from!=null&&to!=null&&from>to){var tmp=from;from=to;to=tmp}return{from:from,to:to,axis:axis}}function setSelection(ranges,preventEvent){var axis,range,o=plot.getOptions();if(o.selection.mode=="y"){selection.first.x=0;selection.second.x=plot.width()}else{range=extractRange(ranges,"x");selection.first.x=range.axis.p2c(range.from);selection.second.x=range.axis.p2c(range.to)}if(o.selection.mode=="x"){selection.first.y=0;selection.second.y=plot.height()}else{range=extractRange(ranges,"y");selection.first.y=range.axis.p2c(range.from);selection.second.y=range.axis.p2c(range.to)}selection.show=true;plot.triggerRedrawOverlay();if(!preventEvent&&selectionIsSane())triggerSelectedEvent()}function selectionIsSane(){var minSize=plot.getOptions().selection.minSize;return Math.abs(selection.second.x-selection.first.x)>=minSize&&Math.abs(selection.second.y-selection.first.y)>=minSize}plot.clearSelection=clearSelection;plot.setSelection=setSelection;plot.getSelection=getSelection;plot.hooks.bindEvents.push(function(plot,eventHolder){var o=plot.getOptions();if(o.selection.mode!=null){eventHolder.mousemove(onMouseMove);eventHolder.mousedown(onMouseDown)}});plot.hooks.drawOverlay.push(function(plot,ctx){if(selection.show&&selectionIsSane()){var plotOffset=plot.getPlotOffset();var o=plot.getOptions();ctx.save();ctx.translate(plotOffset.left,plotOffset.top);var c=$.color.parse(o.selection.color);ctx.strokeStyle=c.scale("a",.8).toString();ctx.lineWidth=1;ctx.lineJoin=o.selection.shape;ctx.fillStyle=c.scale("a",.4).toString();var x=Math.min(selection.first.x,selection.second.x)+.5,y=Math.min(selection.first.y,selection.second.y)+.5,w=Math.abs(selection.second.x-selection.first.x)-1,h=Math.abs(selection.second.y-selection.first.y)-1;ctx.fillRect(x,y,w,h);ctx.strokeRect(x,y,w,h);ctx.restore()}});plot.hooks.shutdown.push(function(plot,eventHolder){eventHolder.unbind("mousemove",onMouseMove);eventHolder.unbind("mousedown",onMouseDown);if(mouseUpHandler)$(document).unbind("mouseup",mouseUpHandler)})}$.plot.plugins.push({init:init,options:{selection:{mode:null,color:"#e8cfac",shape:"round",minSize:5}},name:"selection",version:"1.1"})})(jQuery)},5741:function(module,exports,__webpack_require__){"use strict";var _i18n=__webpack_require__(5);(function($){var REDRAW_ATTEMPTS=10;var REDRAW_SHRINK=.95;function init(plot){var canvas=null,target=null,options=null,maxRadius=null,centerLeft=null,centerTop=null,processed=false,ctx=null;var highlights=[];plot.hooks.processOptions.push(function(plot,options){if(options.series.pie.show){options.grid.show=false;if(options.series.pie.label.show=="auto"){if(options.legend.show){options.series.pie.label.show=false}else{options.series.pie.label.show=true}}if(options.series.pie.radius=="auto"){if(options.series.pie.label.show){options.series.pie.radius=3/4}else{options.series.pie.radius=1}}if(options.series.pie.tilt>1){options.series.pie.tilt=1}else if(options.series.pie.tilt<0){options.series.pie.tilt=0}}});plot.hooks.bindEvents.push(function(plot,eventHolder){var options=plot.getOptions();if(options.series.pie.show){if(options.grid.hoverable){eventHolder.unbind("mousemove").mousemove(onMouseMove)}if(options.grid.clickable){eventHolder.unbind("click").click(onClick)}}});plot.hooks.processDatapoints.push(function(plot,series,data,datapoints){var options=plot.getOptions();if(options.series.pie.show){processDatapoints(plot,series,data,datapoints)}});plot.hooks.drawOverlay.push(function(plot,octx){var options=plot.getOptions();if(options.series.pie.show){drawOverlay(plot,octx)}});plot.hooks.draw.push(function(plot,newCtx){var options=plot.getOptions();if(options.series.pie.show){draw(plot,newCtx)}});function processDatapoints(plot,series,datapoints){if(!processed){processed=true;canvas=plot.getCanvas();target=$(canvas).parent();options=plot.getOptions();plot.setData(combine(plot.getData()))}}function combine(data){var total=0,combined=0,numCombined=0,color=options.series.pie.combine.color,newdata=[];for(var i=0;i<data.length;++i){var value=data[i].data;if($.isArray(value)&&value.length==1){value=value[0]}if($.isArray(value)){if(!isNaN(parseFloat(value[1]))&&isFinite(value[1])){value[1]=+value[1]}else{value[1]=0}}else if(!isNaN(parseFloat(value))&&isFinite(value)){value=[1,+value]}else{value=[1,0]}data[i].data=[value]}for(var i=0;i<data.length;++i){total+=data[i].data[0][1]}for(var i=0;i<data.length;++i){var value=data[i].data[0][1];if(value/total<=options.series.pie.combine.threshold){combined+=value;numCombined++;if(!color){color=data[i].color}}}for(var i=0;i<data.length;++i){var value=data[i].data[0][1];if(numCombined<2||value/total>options.series.pie.combine.threshold){newdata.push($.extend(data[i],{data:[[1,value]],color:data[i].color,label:data[i].label,angle:value*Math.PI*2/total,percent:value/(total/100)}))}}if(numCombined>1){newdata.push({data:[[1,combined]],color:color,label:options.series.pie.combine.label,angle:combined*Math.PI*2/total,percent:combined/(total/100)})}return newdata}function draw(plot,newCtx){if(!target){return}var canvasWidth=plot.getPlaceholder().width(),canvasHeight=plot.getPlaceholder().height(),legendWidth=target.children().filter(".legend").children().width()||0;ctx=newCtx;processed=false;maxRadius=Math.min(canvasWidth,canvasHeight/options.series.pie.tilt)/2;centerTop=canvasHeight/2+options.series.pie.offset.top;centerLeft=canvasWidth/2;if(options.series.pie.offset.left=="auto"){if(options.legend.position.match("w")){centerLeft+=legendWidth/2}else{centerLeft-=legendWidth/2}if(centerLeft<maxRadius){centerLeft=maxRadius}else if(centerLeft>canvasWidth-maxRadius){centerLeft=canvasWidth-maxRadius}}else{centerLeft+=options.series.pie.offset.left}var slices=plot.getData(),attempts=0;do{if(attempts>0){maxRadius*=REDRAW_SHRINK}attempts+=1;clear();if(options.series.pie.tilt<=.8){drawShadow()}}while(!drawPie()&&attempts<REDRAW_ATTEMPTS);if(attempts>=REDRAW_ATTEMPTS){clear();var errorMessage=_i18n.i18n.translate("common.ui.flotCharts.pie.unableToDrawLabelsInsideCanvasErrorMessage",{defaultMessage:"Could not draw pie with labels contained inside canvas"});target.prepend("<div class='error'>".concat(errorMessage,"</div>"))}if(plot.setSeries&&plot.insertLegend){plot.setSeries(slices);plot.insertLegend()}function clear(){ctx.clearRect(0,0,canvasWidth,canvasHeight);target.children().filter(".pieLabel, .pieLabelBackground").remove()}function drawShadow(){var shadowLeft=options.series.pie.shadow.left;var shadowTop=options.series.pie.shadow.top;var edge=10;var alpha=options.series.pie.shadow.alpha;var radius=options.series.pie.radius>1?options.series.pie.radius:maxRadius*options.series.pie.radius;if(radius>=canvasWidth/2-shadowLeft||radius*options.series.pie.tilt>=canvasHeight/2-shadowTop||radius<=edge){return}ctx.save();ctx.translate(shadowLeft,shadowTop);ctx.globalAlpha=alpha;ctx.fillStyle="#000";ctx.translate(centerLeft,centerTop);ctx.scale(1,options.series.pie.tilt);for(var i=1;i<=edge;i++){ctx.beginPath();ctx.arc(0,0,radius,0,Math.PI*2,false);ctx.fill();radius-=i}ctx.restore()}function drawPie(){var startAngle=Math.PI*options.series.pie.startAngle;var radius=options.series.pie.radius>1?options.series.pie.radius:maxRadius*options.series.pie.radius;ctx.save();ctx.translate(centerLeft,centerTop);ctx.scale(1,options.series.pie.tilt);ctx.save();var currentAngle=startAngle;for(var i=0;i<slices.length;++i){slices[i].startAngle=currentAngle;drawSlice(slices[i].angle,slices[i].color,true)}ctx.restore();if(options.series.pie.stroke.width>0){ctx.save();ctx.lineWidth=options.series.pie.stroke.width;currentAngle=startAngle;for(var i=0;i<slices.length;++i){drawSlice(slices[i].angle,options.series.pie.stroke.color,false)}ctx.restore()}drawDonutHole(ctx);ctx.restore();if(options.series.pie.label.show){return drawLabels()}else return true;function drawSlice(angle,color,fill){if(angle<=0||isNaN(angle)){return}if(fill){ctx.fillStyle=color}else{ctx.strokeStyle=color;ctx.lineJoin="round"}ctx.beginPath();if(Math.abs(angle-Math.PI*2)>1e-9){ctx.moveTo(0,0)}ctx.arc(0,0,radius,currentAngle,currentAngle+angle/2,false);ctx.arc(0,0,radius,currentAngle+angle/2,currentAngle+angle,false);ctx.closePath();currentAngle+=angle;if(fill){ctx.fill()}else{ctx.stroke()}}function drawLabels(){var currentAngle=startAngle;var radius=options.series.pie.label.radius>1?options.series.pie.label.radius:maxRadius*options.series.pie.label.radius;for(var i=0;i<slices.length;++i){if(slices[i].percent>=options.series.pie.label.threshold*100){if(!drawLabel(slices[i],currentAngle,i)){return false}}currentAngle+=slices[i].angle}return true;function drawLabel(slice,startAngle,index){if(slice.data[0][1]==0){return true}var lf=options.legend.labelFormatter,text,plf=options.series.pie.label.formatter;if(lf){text=lf(slice.label,slice)}else{text=slice.label}if(plf){text=plf(text,slice)}var halfAngle=(startAngle+slice.angle+startAngle)/2;var x=centerLeft+Math.round(Math.cos(halfAngle)*radius);var y=centerTop+Math.round(Math.sin(halfAngle)*radius)*options.series.pie.tilt;var html="<span class='pieLabel' id='pieLabel"+index+"' style='position:absolute;top:"+y+"px;left:"+x+"px;'>"+text+"</span>";target.append(html);var label=target.children("#pieLabel"+index);var labelTop=y-label.height()/2;var labelLeft=x-label.width()/2;label.css("top",labelTop);label.css("left",labelLeft);if(0-labelTop>0||0-labelLeft>0||canvasHeight-(labelTop+label.height())<0||canvasWidth-(labelLeft+label.width())<0){return false}if(options.series.pie.label.background.opacity!=0){var c=options.series.pie.label.background.color;if(c==null){c=slice.color}var pos="top:"+labelTop+"px;left:"+labelLeft+"px;";$("<div class='pieLabelBackground' style='position:absolute;width:"+label.width()+"px;height:"+label.height()+"px;"+pos+"background-color:"+c+";'></div>").css("opacity",options.series.pie.label.background.opacity).insertBefore(label)}return true}}}}function drawDonutHole(layer){if(options.series.pie.innerRadius>0){layer.save();var innerRadius=options.series.pie.innerRadius>1?options.series.pie.innerRadius:maxRadius*options.series.pie.innerRadius;layer.globalCompositeOperation="destination-out";layer.beginPath();layer.fillStyle=options.series.pie.stroke.color;layer.arc(0,0,innerRadius,0,Math.PI*2,false);layer.fill();layer.closePath();layer.restore();layer.save();layer.beginPath();layer.strokeStyle=options.series.pie.stroke.color;layer.arc(0,0,innerRadius,0,Math.PI*2,false);layer.stroke();layer.closePath();layer.restore()}}function isPointInPoly(poly,pt){for(var c=false,i=-1,l=poly.length,j=l-1;++i<l;j=i){(poly[i][1]<=pt[1]&&pt[1]<poly[j][1]||poly[j][1]<=pt[1]&&pt[1]<poly[i][1])&&pt[0]<(poly[j][0]-poly[i][0])*(pt[1]-poly[i][1])/(poly[j][1]-poly[i][1])+poly[i][0]&&(c=!c)}return c}function findNearbySlice(mouseX,mouseY){var slices=plot.getData(),options=plot.getOptions(),radius=options.series.pie.radius>1?options.series.pie.radius:maxRadius*options.series.pie.radius,x,y;for(var i=0;i<slices.length;++i){var s=slices[i];if(s.pie.show){ctx.save();ctx.beginPath();ctx.moveTo(0,0);ctx.arc(0,0,radius,s.startAngle,s.startAngle+s.angle/2,false);ctx.arc(0,0,radius,s.startAngle+s.angle/2,s.startAngle+s.angle,false);ctx.closePath();x=mouseX-centerLeft;y=mouseY-centerTop;if(ctx.isPointInPath){if(ctx.isPointInPath(mouseX-centerLeft,mouseY-centerTop)){ctx.restore();return{datapoint:[s.percent,s.data],dataIndex:0,series:s,seriesIndex:i}}}else{var p1X=radius*Math.cos(s.startAngle),p1Y=radius*Math.sin(s.startAngle),p2X=radius*Math.cos(s.startAngle+s.angle/4),p2Y=radius*Math.sin(s.startAngle+s.angle/4),p3X=radius*Math.cos(s.startAngle+s.angle/2),p3Y=radius*Math.sin(s.startAngle+s.angle/2),p4X=radius*Math.cos(s.startAngle+s.angle/1.5),p4Y=radius*Math.sin(s.startAngle+s.angle/1.5),p5X=radius*Math.cos(s.startAngle+s.angle),p5Y=radius*Math.sin(s.startAngle+s.angle),arrPoly=[[0,0],[p1X,p1Y],[p2X,p2Y],[p3X,p3Y],[p4X,p4Y],[p5X,p5Y]],arrPoint=[x,y];if(isPointInPoly(arrPoly,arrPoint)){ctx.restore();return{datapoint:[s.percent,s.data],dataIndex:0,series:s,seriesIndex:i}}}ctx.restore()}}return null}function onMouseMove(e){triggerClickHoverEvent("plothover",e)}function onClick(e){triggerClickHoverEvent("plotclick",e)}function triggerClickHoverEvent(eventname,e){var offset=plot.offset();var canvasX=parseInt(e.pageX-offset.left);var canvasY=parseInt(e.pageY-offset.top);var item=findNearbySlice(canvasX,canvasY);if(options.grid.autoHighlight){for(var i=0;i<highlights.length;++i){var h=highlights[i];if(h.auto==eventname&&!(item&&h.series==item.series)){unhighlight(h.series)}}}if(item){highlight(item.series,eventname)}var pos={pageX:e.pageX,pageY:e.pageY};target.trigger(eventname,[pos,item])}function highlight(s,auto){var i=indexOfHighlight(s);if(i==-1){highlights.push({series:s,auto:auto});plot.triggerRedrawOverlay()}else if(!auto){highlights[i].auto=false}}function unhighlight(s){if(s==null){highlights=[];plot.triggerRedrawOverlay()}var i=indexOfHighlight(s);if(i!=-1){highlights.splice(i,1);plot.triggerRedrawOverlay()}}function indexOfHighlight(s){for(var i=0;i<highlights.length;++i){var h=highlights[i];if(h.series==s)return i}return-1}function drawOverlay(plot,octx){var options=plot.getOptions();var radius=options.series.pie.radius>1?options.series.pie.radius:maxRadius*options.series.pie.radius;octx.save();octx.translate(centerLeft,centerTop);octx.scale(1,options.series.pie.tilt);for(var i=0;i<highlights.length;++i){drawHighlight(highlights[i].series)}drawDonutHole(octx);octx.restore();function drawHighlight(series){if(series.angle<=0||isNaN(series.angle)){return}octx.fillStyle="rgba(255, 255, 255, "+options.series.pie.highlight.opacity+")";octx.beginPath();if(Math.abs(series.angle-Math.PI*2)>1e-9){octx.moveTo(0,0)}octx.arc(0,0,radius,series.startAngle,series.startAngle+series.angle/2,false);octx.arc(0,0,radius,series.startAngle+series.angle/2,series.startAngle+series.angle,false);octx.closePath();octx.fill()}}}var options={series:{pie:{show:false,radius:"auto",innerRadius:0,startAngle:3/2,tilt:1,shadow:{left:5,top:15,alpha:.02},offset:{top:0,left:"auto"},stroke:{color:"#fff",width:1},label:{show:"auto",formatter:function formatter(label,slice){return"<div style='font-size:x-small;text-align:center;padding:2px;color:"+slice.color+";'>"+label+"<br/>"+Math.round(slice.percent)+"%</div>"},radius:1,background:{color:null,opacity:0},threshold:0},combine:{threshold:-1,color:null,label:"Other"},highlight:{opacity:.5}}}};$.plot.plugins.push({init:init,options:options,name:"pie",version:"1.1"})})(jQuery)},5742:function(module,exports,__webpack_require__){"use strict";(function($){var options={series:{stack:null}};function init(plot){function findMatchingSeries(s,allseries){var res=null;for(var i=0;i<allseries.length;++i){if(s==allseries[i])break;if(allseries[i].stack==s.stack)res=allseries[i]}return res}function stackData(plot,s,datapoints){if(s.stack==null||s.stack===false)return;var other=findMatchingSeries(s,plot.getData());if(!other)return;var ps=datapoints.pointsize,points=datapoints.points,otherps=other.datapoints.pointsize,otherpoints=other.datapoints.points,newpoints=[],px,py,intery,qx,qy,bottom,withlines=s.lines.show,horizontal=s.bars.horizontal,withbottom=ps>2&&(horizontal?datapoints.format[2].x:datapoints.format[2].y),withsteps=withlines&&s.lines.steps,fromgap=true,keyOffset=horizontal?1:0,accumulateOffset=horizontal?0:1,i=0,j=0,l,m;while(true){if(i>=points.length)break;l=newpoints.length;if(points[i]==null){for(m=0;m<ps;++m){newpoints.push(points[i+m])}i+=ps}else if(j>=otherpoints.length){if(!withlines){for(m=0;m<ps;++m){newpoints.push(points[i+m])}}i+=ps}else if(otherpoints[j]==null){for(m=0;m<ps;++m){newpoints.push(null)}fromgap=true;j+=otherps}else{px=points[i+keyOffset];py=points[i+accumulateOffset];qx=otherpoints[j+keyOffset];qy=otherpoints[j+accumulateOffset];bottom=0;if(px==qx){for(m=0;m<ps;++m){newpoints.push(points[i+m])}newpoints[l+accumulateOffset]+=qy;bottom=qy;i+=ps;j+=otherps}else if(px>qx){if(withlines&&i>0&&points[i-ps]!=null){intery=py+(points[i-ps+accumulateOffset]-py)*(qx-px)/(points[i-ps+keyOffset]-px);newpoints.push(qx);newpoints.push(intery+qy);for(m=2;m<ps;++m){newpoints.push(points[i+m])}bottom=qy}j+=otherps}else{if(fromgap&&withlines){i+=ps;continue}for(m=0;m<ps;++m){newpoints.push(points[i+m])}if(withlines&&j>0&&otherpoints[j-otherps]!=null)bottom=qy+(otherpoints[j-otherps+accumulateOffset]-qy)*(px-qx)/(otherpoints[j-otherps+keyOffset]-qx);newpoints[l+accumulateOffset]+=bottom;i+=ps}fromgap=false;if(l!=newpoints.length&&withbottom)newpoints[l+2]+=bottom}if(withsteps&&l!=newpoints.length&&l>0&&newpoints[l]!=null&&newpoints[l]!=newpoints[l-ps]&&newpoints[l+1]!=newpoints[l-ps+1]){for(m=0;m<ps;++m){newpoints[l+ps+m]=newpoints[l+m]}newpoints[l+1]=newpoints[l-ps+1]}}datapoints.points=newpoints}plot.hooks.processDatapoints.push(stackData)}$.plot.plugins.push({init:init,options:options,name:"stack",version:"1.2"})})(jQuery)},5743:function(module,exports,__webpack_require__){"use strict";(function($){var options={series:{threshold:null}};function init(plot){function thresholdData(plot,s,datapoints,below,color){var ps=datapoints.pointsize,i,x,y,p,prevp,thresholded=$.extend({},s);thresholded.datapoints={points:[],pointsize:ps,format:datapoints.format};thresholded.label=null;thresholded.color=color;thresholded.threshold=null;thresholded.originSeries=s;thresholded.data=[];var origpoints=datapoints.points,addCrossingPoints=s.lines.show;var threspoints=[];var newpoints=[];var m;for(i=0;i<origpoints.length;i+=ps){x=origpoints[i];y=origpoints[i+1];prevp=p;if(y<below)p=threspoints;else p=newpoints;if(addCrossingPoints&&prevp!=p&&x!=null&&i>0&&origpoints[i-ps]!=null){var interx=x+(below-y)*(x-origpoints[i-ps])/(y-origpoints[i-ps+1]);prevp.push(interx);prevp.push(below);for(m=2;m<ps;++m){prevp.push(origpoints[i+m])}p.push(null);p.push(null);for(m=2;m<ps;++m){p.push(origpoints[i+m])}p.push(interx);p.push(below);for(m=2;m<ps;++m){p.push(origpoints[i+m])}}p.push(x);p.push(y);for(m=2;m<ps;++m){p.push(origpoints[i+m])}}datapoints.points=newpoints;thresholded.datapoints.points=threspoints;if(thresholded.datapoints.points.length>0){var origIndex=$.inArray(s,plot.getData());plot.getData().splice(origIndex+1,0,thresholded)}}function processThresholds(plot,s,datapoints){if(!s.threshold)return;if(s.threshold instanceof Array){s.threshold.sort(function(a,b){return a.below-b.below});$(s.threshold).each(function(i,th){thresholdData(plot,s,datapoints,th.below,th.color)})}else{thresholdData(plot,s,datapoints,s.threshold.below,s.threshold.color)}}plot.hooks.processDatapoints.push(processThresholds)}$.plot.plugins.push({init:init,options:options,name:"threshold",version:"1.2"})})(jQuery)},5744:function(module,exports,__webpack_require__){"use strict";(function($){var options={series:{fillBetween:null}};function init(plot){function findBottomSeries(s,allseries){var i;for(i=0;i<allseries.length;++i){if(allseries[i].id===s.fillBetween){return allseries[i]}}if(typeof s.fillBetween==="number"){if(s.fillBetween<0||s.fillBetween>=allseries.length){return null}return allseries[s.fillBetween]}return null}function computeFillBottoms(plot,s,datapoints){if(s.fillBetween==null){return}var other=findBottomSeries(s,plot.getData());if(!other){return}var ps=datapoints.pointsize,points=datapoints.points,otherps=other.datapoints.pointsize,otherpoints=other.datapoints.points,newpoints=[],px,py,intery,qx,qy,bottom,withlines=s.lines.show,withbottom=ps>2&&datapoints.format[2].y,withsteps=withlines&&s.lines.steps,fromgap=true,i=0,j=0,l,m;while(true){if(i>=points.length){break}l=newpoints.length;if(points[i]==null){for(m=0;m<ps;++m){newpoints.push(points[i+m])}i+=ps}else if(j>=otherpoints.length){if(!withlines){for(m=0;m<ps;++m){newpoints.push(points[i+m])}}i+=ps}else if(otherpoints[j]==null){for(m=0;m<ps;++m){newpoints.push(null)}fromgap=true;j+=otherps}else{px=points[i];py=points[i+1];qx=otherpoints[j];qy=otherpoints[j+1];bottom=0;if(px===qx){for(m=0;m<ps;++m){newpoints.push(points[i+m])}bottom=qy;i+=ps;j+=otherps}else if(px>qx){if(withlines&&i>0&&points[i-ps]!=null){intery=py+(points[i-ps+1]-py)*(qx-px)/(points[i-ps]-px);newpoints.push(qx);newpoints.push(intery);for(m=2;m<ps;++m){newpoints.push(points[i+m])}bottom=qy}j+=otherps}else{if(fromgap&&withlines){i+=ps;continue}for(m=0;m<ps;++m){newpoints.push(points[i+m])}if(withlines&&j>0&&otherpoints[j-otherps]!=null){bottom=qy+(otherpoints[j-otherps+1]-qy)*(px-qx)/(otherpoints[j-otherps]-qx)}i+=ps}fromgap=false;if(l!==newpoints.length&&withbottom){newpoints[l+2]=bottom}}if(withsteps&&l!==newpoints.length&&l>0&&newpoints[l]!==null&&newpoints[l]!==newpoints[l-ps]&&newpoints[l+1]!==newpoints[l-ps+1]){for(m=0;m<ps;++m){newpoints[l+ps+m]=newpoints[l+m]}newpoints[l+1]=newpoints[l-ps+1]}}datapoints.points=newpoints}plot.hooks.processDatapoints.push(computeFillBottoms)}$.plot.plugins.push({init:init,options:options,name:"fillbetween",version:"1.0"})})(jQuery)},5745:function(module,exports,__webpack_require__){"use strict";(function($){function log10(value){return Math.log(value)/Math.LN10}function floorAsLog10(value){return Math.floor(log10(value))}function ceilAsLog10(value){return Math.ceil(log10(value))}function floorInBase(n,base){return base*Math.floor(n/base)}function getUnicodePower(power){var superscripts=["","","","","","","","","",""],result="",str_power=""+power;for(var i=0;i<str_power.length;i++){if(str_power[i]==="+"){}else if(str_power[i]==="-"){result+=""}else{result+=superscripts[str_power[i]]}}return result}function init(plot){plot.hooks.processOptions.push(function(plot){$.each(plot.getAxes(),function(axisName,axis){var opts=axis.options;if(opts.mode==="log"){axis.tickGenerator=function(axis){var ticks=[],end=ceilAsLog10(axis.max),start=floorAsLog10(axis.min),tick=Number.NaN,i=0;if(axis.min===null||axis.min<=0){start=0;axis.min=.6}if(end<=start){ticks=[1e-6,1e-5,1e-4,.001,.01,.1,1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9]}else if(log10(axis.max)-log10(axis.datamin)<1){var prev;start=floorInBase(axis.min,axis.tickSize);do{prev=tick;tick=start+i*axis.tickSize;ticks.push(tick);++i}while(tick<axis.max&&tick!==prev)}else{for(;i<=end-start;i++){tick=Math.pow(10,start+i);ticks.push(tick)}var length=ticks.length;if(end-start<6){for(var j=1;j<length*2-1;j+=2){tick=ticks[j-1]*5;ticks.splice(j,0,tick)}}}return ticks};axis.tickFormatter=function(value,axis){var formatted;if(log10(axis.max)-log10(axis.datamin)<1){var factor=axis.tickDecimals?Math.pow(10,axis.tickDecimals):1;formatted=""+Math.round(value*factor)/factor;if(axis.tickDecimals!==null){var decimal=formatted.indexOf(".");var precision=decimal===-1?0:formatted.length-decimal-1;if(precision<axis.tickDecimals){return(precision?formatted:formatted+".")+(""+factor).substr(1,axis.tickDecimals-precision)}}}else{var multiplier="",exponential=parseFloat(value).toExponential(0),power=getUnicodePower(exponential.slice(2));if(exponential[0]!=="1"){multiplier=exponential[0]+"x"}formatted=multiplier+"10"+power}return formatted}}})})}$.plot.plugins.push({init:init,name:"log",version:"0.9"})})(jQuery)},5746:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Resize=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(17));var _react=_interopRequireWildcard(__webpack_require__(0));var _reactDom=__webpack_require__(27);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var Resize=function(_Component){_inherits(Resize,_Component);function Resize(props){var _this;_classCallCheck(this,Resize);_this=_possibleConstructorReturn(this,_getPrototypeOf(Resize).call(this,props));_this.state={};_this.handleResize=_this.handleResize.bind(_assertThisInitialized(_this));return _this}_createClass(Resize,[{key:"checkSize",value:function checkSize(){var _this2=this;var el=(0,_reactDom.findDOMNode)(this.el);if(!el)return;this.timeout=setTimeout(function(){var _this2$state=_this2.state,currentHeight=_this2$state.currentHeight,currentWidth=_this2$state.currentWidth;if(currentHeight!==el.parentNode.clientHeight||currentWidth!==el.parentNode.clientWidth){_this2.setState({currentWidth:el.parentNode.clientWidth,currentHeight:el.parentNode.clientHeight});_this2.handleResize()}clearTimeout(_this2.timeout);_this2.checkSize()},this.props.frequency)}},{key:"componentDidMount",value:function componentDidMount(){this.checkSize()}},{key:"componentWillUnmount",value:function componentWillUnmount(){clearTimeout(this.timeout)}},{key:"handleResize",value:function handleResize(){if(this.props.onResize)this.props.onResize()}},{key:"render",value:function render(){var _this3=this;var style=this.props.style||{};var className=this.props.className||"";return _react["default"].createElement("div",{style:style,className:className,ref:function ref(el){return _this3.el=el}},this.props.children)}}]);return Resize}(_react.Component);exports.Resize=Resize;Resize.defaultProps={frequency:500};Resize.propTypes={frequency:_propTypes["default"].number,onResize:_propTypes["default"].func}},5747:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.calculateBarWidth=void 0;var _lodash=_interopRequireDefault(__webpack_require__(1));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var calculateBarWidth=function calculateBarWidth(series){var multiplier=arguments.length>1&&arguments[1]!==undefined?arguments[1]:.7;var first=_lodash["default"].first(series);try{return(first.data[1][0]-first.data[0][0])*multiplier}catch(e){return 1e3}};exports.calculateBarWidth=calculateBarWidth},5748:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.calculateFillColor=void 0;var _color=_interopRequireDefault(__webpack_require__(1982));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var calculateFillColor=function calculateFillColor(color){var fill=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;var initialColor=new _color["default"](color).rgb();var opacity=Math.min(Number(fill),1)*initialColor.valpha;var _initialColor$color=_slicedToArray(initialColor.color,3),r=_initialColor$color[0],g=_initialColor$color[1],b=_initialColor$color[2];return{fill:opacity>0,fillColor:new _color["default"]([r,g,b,Number(opacity.toFixed(2))]).string()}};exports.calculateFillColor=calculateFillColor},5749:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Annotation=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(17));var _react=_interopRequireWildcard(__webpack_require__(0));var _moment=_interopRequireDefault(__webpack_require__(23));var _reactcss=_interopRequireDefault(__webpack_require__(247));var _eui=__webpack_require__(2);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var Annotation=function(_Component){_inherits(Annotation,_Component);function Annotation(props){_classCallCheck(this,Annotation);return _possibleConstructorReturn(this,_getPrototypeOf(Annotation).call(this,props))}_createClass(Annotation,[{key:"renderTooltip",value:function renderTooltip(){var _this$props$series=_slicedToArray(this.props.series,2),timestamp=_this$props$series[0],messageSource=_this$props$series[1];var messages=messageSource.map(function(message,i){return _react["default"].createElement("div",{key:"".concat(message,"-").concat(i),className:"tvbVisAnnotation__message"},message)});return _react["default"].createElement("div",null,_react["default"].createElement("div",{className:"tvbTooltip__timestamp"},(0,_moment["default"])(timestamp).format("lll")),messages)}},{key:"render",value:function render(){var _this$props=this.props,color=_this$props.color,plot=_this$props.plot,icon=_this$props.icon,series=_this$props.series;var offset=plot.pointOffset({x:series[0],y:0});var tooltip=this.renderTooltip();var style=(0,_reactcss["default"])({default:{container:{left:offset.left-6,bottom:0,top:5},line:{backgroundColor:color},icon:{color:color}}});return _react["default"].createElement("div",{className:"tvbVisAnnotation",style:style.container},_react["default"].createElement("div",{className:"tvbVisAnnotation__line",style:style.line}),_react["default"].createElement(_eui.EuiToolTip,{className:"tvbVisAnnotation__tooltip",content:tooltip,position:"top"},_react["default"].createElement("i",{className:"tvbVisAnnotation__icon fa ".concat(icon),style:style.icon})))}}]);return Annotation}(_react.Component);exports.Annotation=Annotation;Annotation.propTypes={series:_propTypes["default"].array,icon:_propTypes["default"].string,color:_propTypes["default"].string,plot:_propTypes["default"].object}},5750:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Legend=Legend;var _propTypes=_interopRequireDefault(__webpack_require__(17));var _react=_interopRequireDefault(__webpack_require__(0));var _vertical_legend=__webpack_require__(5751);var _horizontal_legend=__webpack_require__(5752);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function Legend(props){if(props.legendPosition==="bottom"){return _react["default"].createElement(_horizontal_legend.HorizontalLegend,props)}return _react["default"].createElement(_vertical_legend.VerticalLegend,props)}Legend.propTypes={legendPosition:_propTypes["default"].string,onClick:_propTypes["default"].func,onToggle:_propTypes["default"].func,series:_propTypes["default"].array,showLegend:_propTypes["default"].bool,seriesValues:_propTypes["default"].object,seriesFilter:_propTypes["default"].array,tickFormatter:_propTypes["default"].func}},5751:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VerticalLegend=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(17));var _react=_interopRequireDefault(__webpack_require__(0));var _create_legend_series=__webpack_require__(1985);var _reactcss=_interopRequireDefault(__webpack_require__(247));var _eui=__webpack_require__(2);var _react2=__webpack_require__(10);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var VerticalLegend=(0,_react2.injectI18n)(function(props){var rows=props.series.map((0,_create_legend_series.createLegendSeries)(props));var htmlId=(0,_eui.htmlIdGenerator)();var hideLegend=!props.showLegend;var leftLegend=props.legendPosition==="left";var styles=(0,_reactcss["default"])({default:{legend:{width:200}},leftLegend:{legend:{order:"-1"},control:{order:"2"}},hideLegend:{legend:{width:24},series:{display:"none"}}},{hideLegend:hideLegend,leftLegend:leftLegend});var openIcon=leftLegend?"arrowRight":"arrowLeft";var closeIcon=leftLegend?"arrowLeft":"arrowRight";var legendToggleIcon=hideLegend?"".concat(openIcon):"".concat(closeIcon);return _react["default"].createElement("div",{className:"tvbLegend",style:styles.legend},_react["default"].createElement(_eui.EuiButtonIcon,{className:"tvbLegend__toggle",style:styles.control,iconType:legendToggleIcon,color:"text",iconSize:"s",onClick:props.onClick,"aria-label":props.intl.formatMessage({id:"tsvb.verticalLegend.toggleChartAriaLabel",defaultMessage:"Toggle chart legend"}),title:props.intl.formatMessage({id:"tsvb.verticalLegend.toggleChartAriaLabel",defaultMessage:"Toggle chart legend"}),"aria-expanded":!!props.showLegend,"aria-controls":htmlId("legend")}),_react["default"].createElement("div",{className:"tvbLegend__series",style:styles.series,id:htmlId("legend")},rows))});exports.VerticalLegend=VerticalLegend;VerticalLegend.propTypes={legendPosition:_propTypes["default"].string,onClick:_propTypes["default"].func,onToggle:_propTypes["default"].func,series:_propTypes["default"].array,showLegend:_propTypes["default"].bool,seriesValues:_propTypes["default"].object,seriesFilter:_propTypes["default"].array,tickFormatter:_propTypes["default"].func}},5752:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.HorizontalLegend=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(17));var _react=_interopRequireDefault(__webpack_require__(0));var _create_legend_series=__webpack_require__(1985);var _reactcss=_interopRequireDefault(__webpack_require__(247));var _eui=__webpack_require__(2);var _react2=__webpack_require__(10);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var HorizontalLegend=(0,_react2.injectI18n)(function(props){var rows=props.series.map((0,_create_legend_series.createLegendSeries)(props));var htmlId=(0,_eui.htmlIdGenerator)();var styles=(0,_reactcss["default"])({hideLegend:{legend:{display:"none"}}},{hideLegend:!props.showLegend});var legendToggleIcon="arrowDown";if(!props.showLegend){legendToggleIcon="arrowUp"}return _react["default"].createElement("div",{className:"tvbLegend tvbLegend--horizontal"},_react["default"].createElement(_eui.EuiButtonIcon,{className:"tvbLegend__toggle",iconType:legendToggleIcon,color:"text",iconSize:"s",onClick:props.onClick,"aria-label":props.intl.formatMessage({id:"tsvb.horizontalLegend.toggleChartAriaLabel",defaultMessage:"Toggle chart legend"}),title:props.intl.formatMessage({id:"tsvb.horizontalLegend.toggleChartAriaLabel",defaultMessage:"Toggle chart legend"}),"aria-expanded":!!props.showLegend,"aria-controls":htmlId("legend")}),_react["default"].createElement("div",{className:"tvbLegend__series",style:styles.legend,id:htmlId("legend")},rows))});exports.HorizontalLegend=HorizontalLegend;HorizontalLegend.propTypes={legendPosition:_propTypes["default"].string,onClick:_propTypes["default"].func,onToggle:_propTypes["default"].func,series:_propTypes["default"].array,showLegend:_propTypes["default"].bool,seriesValues:_propTypes["default"].object,seriesFilter:_propTypes["default"].array,tickFormatter:_propTypes["default"].func}},5753:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getAxisLabelString=getAxisLabelString;var _get_interval=__webpack_require__(1006);var _i18n=__webpack_require__(5);function getAxisLabelString(interval){var convertedValue=(0,_get_interval.convertIntervalIntoUnit)(interval);if(convertedValue){return _i18n.i18n.translate("tsvb.axisLabelOptions.axisLabel",{defaultMessage:"per {unitValue} {unitString}",values:{unitValue:convertedValue.unitValue,unitString:convertedValue.unitString}})}}},5754:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getFormat=getFormat;exports.createXaxisFormatter=createXaxisFormatter;var _moment=_interopRequireDefault(__webpack_require__(23));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getFormat(interval,rules,dateFormat){for(var i=rules.length-1;i>=0;i--){var rule=rules[i];if(!rule[0]||interval>=_moment["default"].duration(rule[0])){return rule[1]}}return dateFormat}function createXaxisFormatter(interval,rules,dateFormat){return function(val){return(0,_moment["default"])(val).format(getFormat(interval,rules,dateFormat))}}},5755:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.metric=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(17));var _react=_interopRequireDefault(__webpack_require__(0));var _vis_with_splits=__webpack_require__(1986);var _tick_formatter=__webpack_require__(344);var _lodash=_interopRequireWildcard(__webpack_require__(1));var _metric=__webpack_require__(5757);var _get_last_value=__webpack_require__(287);var _set_is_reversed=__webpack_require__(418);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getColors(props){var model=props.model,visData=props.visData;var series=(0,_lodash.get)(visData,"".concat(model.id,".series"),[]).filter(function(s){return!(0,_lodash.isUndefined)(s)});var color;var background;if(model.background_color_rules){model.background_color_rules.forEach(function(rule){if(rule.operator&&rule.value!=null){var value=series[0]&&(0,_get_last_value.getLastValue)(series[0].data)||0;if(_lodash["default"][rule.operator](value,rule.value)){background=rule.background_color;color=rule.color}}})}return{color:color,background:background}}function MetricVisualization(props){var backgroundColor=props.backgroundColor,model=props.model,visData=props.visData;var colors=getColors(props);var series=(0,_lodash.get)(visData,"".concat(model.id,".series"),[]).filter(function(row){return row}).map(function(row,i){var seriesDef=model.series.find(function(s){return(0,_lodash.includes)(row.id,s.id)});var newProps={};if(seriesDef){newProps.formatter=(0,_tick_formatter.tickFormatter)(seriesDef.formatter,seriesDef.value_template,props.getConfig)}if(i===0&&colors.color)newProps.color=colors.color;return(0,_lodash.assign)({},(0,_lodash.pick)(row,["label","data"]),newProps)});var panelBackgroundColor=colors.background||backgroundColor;var style={backgroundColor:panelBackgroundColor};var params={metric:series[0],additionalLabel:props.additionalLabel,reversed:(0,_set_is_reversed.isBackgroundInverted)(panelBackgroundColor)};if(series[1]){params.secondary=series[1]}return _react["default"].createElement("div",{className:"tvbVis",style:style},_react["default"].createElement(_metric.Metric,params))}MetricVisualization.propTypes={backgroundColor:_propTypes["default"].string,className:_propTypes["default"].string,additionalLabel:_propTypes["default"].string,model:_propTypes["default"].object,onBrush:_propTypes["default"].func,onChange:_propTypes["default"].func,visData:_propTypes["default"].object,getConfig:_propTypes["default"].func};var metric=(0,_vis_with_splits.visWithSplits)(MetricVisualization);exports.metric=metric},5756:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getDisplayName=getDisplayName;function getDisplayName(Component){return Component.displayName||Component.name||"Component"}},5757:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Metric=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(17));var _react=_interopRequireWildcard(__webpack_require__(0));var _lodash=_interopRequireDefault(__webpack_require__(1));var _get_last_value=__webpack_require__(287);var _reactcss=_interopRequireDefault(__webpack_require__(247));var _calculate_coordinates=__webpack_require__(1008);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var Metric=function(_Component){_inherits(Metric,_Component);function Metric(props){var _this;_classCallCheck(this,Metric);_this=_possibleConstructorReturn(this,_getPrototypeOf(Metric).call(this,props));_this.state={scale:1,left:0,top:0,translateX:1,translateY:1};_this.handleResize=_this.handleResize.bind(_assertThisInitialized(_this));return _this}_createClass(Metric,[{key:"componentWillMount",value:function componentWillMount(){var _this2=this;var check=function check(){_this2.timeout=setTimeout(function(){var newState=(0,_calculate_coordinates.calculateCoordinates)(_this2.inner,_this2.resize,_this2.state);if(newState&&_this2.state&&!_lodash["default"].isEqual(newState,_this2.state)){_this2.handleResize()}check()},500)};check()}},{key:"componentWillUnmount",value:function componentWillUnmount(){clearTimeout(this.timeout)}},{key:"componentDidMount",value:function componentDidMount(){this.handleResize()}},{key:"handleResize",value:function handleResize(){var newState=(0,_calculate_coordinates.calculateCoordinates)(this.inner,this.resize,this.state);this.setState(newState)}},{key:"render",value:function render(){var _this3=this;var _this$props=this.props,metric=_this$props.metric,secondary=_this$props.secondary;var _this$state=this.state,scale=_this$state.scale,translateX=_this$state.translateX,translateY=_this$state.translateY;var primaryFormatter=metric&&(metric.tickFormatter||metric.formatter)||function(n){return n};var primaryValue=primaryFormatter((0,_get_last_value.getLastValue)(metric&&metric.data||0));var styles=(0,_reactcss["default"])({default:{container:{},inner:{top:this.state.top||0,left:this.state.left||0,transform:"matrix(".concat(scale,", 0, 0, ").concat(scale,", ").concat(translateX,", ").concat(translateY,")")},primary_value:{},secondary_value:{}},reversed:{primary_value:{},secondary_value:{}}},this.props);if(this.props.backgroundColor)styles.container.backgroundColor=this.props.backgroundColor;if(metric&&metric.color)styles.primary_value.color=metric.color;var primaryLabel;if(metric&&metric.label){primaryLabel=_react["default"].createElement("div",{className:"tvbVisMetric__label--primary"},metric.label)}var secondarySnippet;if(secondary){var secondaryFormatter=secondary.formatter||function(n){return n};var secondaryValue=secondaryFormatter((0,_get_last_value.getLastValue)(secondary.data));if(secondary.color)styles.secondary_value.color=secondary.color;var secondaryLabel;if(secondary.label){secondaryLabel=_react["default"].createElement("div",{className:"tvbVisMetric__label--secondary"},secondary.label)}secondarySnippet=_react["default"].createElement("div",{className:"tvbVisMetric__secondary"},secondaryLabel,_react["default"].createElement("div",{style:styles.secondary_value,className:"tvbVisMetric__value--secondary"},secondaryValue))}var additionalLabel;if(this.props.additionalLabel){additionalLabel=_react["default"].createElement("div",{className:"tvbVisMetric__label--additional"},this.props.additionalLabel)}var className="tvbVisMetric";if(!styles.container.backgroundColor){className+=" tvbVisMetric--noBackground"}if(this.props.reversed){className+=" tvbVisMetric--reversed"}return _react["default"].createElement("div",{className:className,style:styles.container},_react["default"].createElement("div",{ref:function ref(el){return _this3.resize=el},className:"tvbVisMetric__resize"},_react["default"].createElement("div",{ref:function ref(el){return _this3.inner=el},className:"tvbVisMetric__inner",style:styles.inner},_react["default"].createElement("div",{className:"tvbVisMetric__primary"},primaryLabel,_react["default"].createElement("div",{style:styles.primary_value,"data-test-subj":"tsvbMetricValue",className:"tvbVisMetric__value--primary"},primaryValue)),secondarySnippet,additionalLabel)))}}]);return Metric}(_react.Component);exports.Metric=Metric;Metric.propTypes={backgroundColor:_propTypes["default"].string,metric:_propTypes["default"].object,secondary:_propTypes["default"].object,reversed:_propTypes["default"].bool,additionalLabel:_propTypes["default"].string}},5758:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.calcDimensions=calcDimensions;function calcDimensions(el,scale){var newWidth=Math.floor(el.clientWidth*scale);var newHeight=Math.floor(el.clientHeight*scale);return[newWidth,newHeight]}},5759:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TopNVisualization=TopNVisualization;var _tick_formatter=__webpack_require__(344);var _top_n=__webpack_require__(5760);var _get_last_value=__webpack_require__(287);var _set_is_reversed=__webpack_require__(418);var _replace_vars=__webpack_require__(664);var _propTypes=_interopRequireDefault(__webpack_require__(17));var _react=_interopRequireDefault(__webpack_require__(0));var _lodash=__webpack_require__(1);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var OPERATORS={gt:_lodash.gt,gte:_lodash.gte,lt:_lodash.lt,lte:_lodash.lte};function sortByDirection(data,direction,fn){if(direction==="desc"){return(0,_lodash.sortBy)(data,fn).reverse()}return(0,_lodash.sortBy)(data,fn)}function sortSeries(visData,model){var series=(0,_lodash.get)(visData,"".concat(model.id,".series"),[]);return model.series.reduce(function(acc,item){var itemSeries=series.filter(function(s){var id=(0,_lodash.first)(s.id.split(/:/));return id===item.id});var direction=item.terms_direction||"desc";if(item.terms_order_by==="_key")return acc.concat(itemSeries);return acc.concat(sortByDirection(itemSeries,direction,function(s){return(0,_get_last_value.getLastValue)(s.data)}))},[])}function TopNVisualization(props){var backgroundColor=props.backgroundColor,model=props.model,visData=props.visData;var series=sortSeries(visData,model).map(function(item){var id=(0,_lodash.first)(item.id.split(/:/));var seriesConfig=model.series.find(function(s){return s.id===id});if(seriesConfig){var formatter=(0,_tick_formatter.tickFormatter)(seriesConfig.formatter,seriesConfig.value_template,props.getConfig);var value=(0,_get_last_value.getLastValue)(item.data);var color=item.color||seriesConfig.color;if(model.bar_color_rules){model.bar_color_rules.forEach(function(rule){if(rule.operator&&rule.value!=null&&rule.bar_color){if(OPERATORS[rule.operator](value,rule.value)){color=rule.bar_color}}})}return _objectSpread({},item,{color:color,tickFormatter:formatter})}return item});var panelBackgroundColor=model.background_color||backgroundColor;var style={backgroundColor:panelBackgroundColor};var params={series:series,reversed:(0,_set_is_reversed.isBackgroundInverted)(panelBackgroundColor)};if(model.drilldown_url){params.onClick=function(item){window.location=(0,_replace_vars.replaceVars)(model.drilldown_url,{},{key:item.label})}}return _react["default"].createElement("div",{className:"tvbVis",style:style},_react["default"].createElement(_top_n.TopN,params))}TopNVisualization.propTypes={backgroundColor:_propTypes["default"].string,className:_propTypes["default"].string,model:_propTypes["default"].object,onBrush:_propTypes["default"].func,onChange:_propTypes["default"].func,visData:_propTypes["default"].object,getConfig:_propTypes["default"].func}},5760:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TopN=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(17));var _react=_interopRequireWildcard(__webpack_require__(0));var _get_last_value=__webpack_require__(287);var _reactcss=_interopRequireDefault(__webpack_require__(247));function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var TopN=function(_Component){_inherits(TopN,_Component);function TopN(props){var _this;_classCallCheck(this,TopN);_this=_possibleConstructorReturn(this,_getPrototypeOf(TopN).call(this,props));_this.tableRef=_react["default"].createRef();_this.state={labelMaxWidth:150};return _this}_createClass(TopN,[{key:"componentDidMount",value:function componentDidMount(){this.setState({labelMaxWidth:this.labelMaxWidth})}},{key:"componentDidUpdate",value:function componentDidUpdate(prevProps,prevState){if(prevState.labelMaxWidth!==this.labelMaxWidth){this.setState({labelMaxWidth:this.labelMaxWidth})}}},{key:"handleClick",value:function handleClick(item){var _this2=this;return function(){if(_this2.props.onClick){_this2.props.onClick(item)}}}},{key:"renderRow",value:function renderRow(maxValue){var _this3=this;return function(item){var key="".concat(item.id||item.label);var lastValue=(0,_get_last_value.getLastValue)(item.data);var formatter=item.tickFormatter||_this3.props.tickFormatter;var value=formatter(lastValue);var width="".concat(100*(lastValue/maxValue),"%");var backgroundColor=item.color;var styles=(0,_reactcss["default"])({default:{innerBar:{width:width,backgroundColor:backgroundColor},label:{maxWidth:_this3.state.labelMaxWidth}},onClick:{row:{cursor:"pointer"}}},_this3.props);return _react["default"].createElement("tr",{key:key,onClick:_this3.handleClick(_objectSpread({lastValue:lastValue},item)),style:styles.row},_react["default"].createElement("td",{title:item.label,className:"tvbVisTopN__label",style:styles.label},item.label),_react["default"].createElement("td",{width:"100%",className:"tvbVisTopN__bar"},_react["default"].createElement("div",{className:"tvbVisTopN__innerBar",style:styles.innerBar})),_react["default"].createElement("td",{className:"tvbVisTopN__value","data-test-subj":"tsvbTopNValue"},value))}}},{key:"render",value:function render(){if(!this.props.series)return null;var maxValue=this.props.series.reduce(function(max,series){var lastValue=(0,_get_last_value.getLastValue)(series.data);return lastValue>max?lastValue:max},0);var rows=this.props.series.map(this.renderRow(maxValue));var className="tvbVisTopN";if(this.props.reversed){className+=" tvbVisTopN--reversed"}return _react["default"].createElement("div",{className:className},_react["default"].createElement("table",{className:"tvbVisTopN__table","data-test-subj":"tvbVisTopNTable",ref:this.tableRef},_react["default"].createElement("tbody",null,rows)))}},{key:"labelMaxWidth",get:function get(){return this.tableRef.current.offsetWidth*.35}}]);return TopN}(_react.Component);exports.TopN=TopN;TopN.defaultProps={tickFormatter:function tickFormatter(n){return n},onClick:function onClick(i){return i},direction:"desc"};TopN.propTypes={tickFormatter:_propTypes["default"].func,onClick:_propTypes["default"].func,series:_propTypes["default"].array,reversed:_propTypes["default"].bool,direction:_propTypes["default"].string}},5761:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TableVis=void 0;var _lodash=_interopRequireWildcard(__webpack_require__(1));var _react=_interopRequireWildcard(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(17));var _field_formats=__webpack_require__(111);var _tick_formatter=__webpack_require__(344);var _calculate_label=__webpack_require__(1007);var _is_sortable=__webpack_require__(5762);var _eui=__webpack_require__(2);var _replace_vars=__webpack_require__(664);var _react2=__webpack_require__(10);var _metric_types=__webpack_require__(665);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var DateFormat=_field_formats.fieldFormats.getType("date");function getColor(rules,colorKey,value){var color;if(rules){rules.forEach(function(rule){if(rule.operator&&rule.value!=null){if(_lodash["default"][rule.operator](value,rule.value)){color=rule[colorKey]}}})}return color}var TableVis=function(_Component){_inherits(TableVis,_Component);function TableVis(props){var _this;_classCallCheck(this,TableVis);_this=_possibleConstructorReturn(this,_getPrototypeOf(TableVis).call(this,props));_defineProperty(_assertThisInitialized(_this),"renderRow",function(row){var model=_this.props.model;var rowDisplay=model.pivot_type==="date"?_this.dateFormatter.convert(row.key):row.key;if(model.drilldown_url){var url=(0,_replace_vars.replaceVars)(model.drilldown_url,{},{key:row.key});rowDisplay=_react["default"].createElement("a",{href:url},rowDisplay)}var columns=row.series.filter(function(item){return item}).map(function(item){var column=_this.visibleSeries.find(function(c){return c.id===item.id});if(!column)return null;var formatter=(0,_tick_formatter.tickFormatter)(column.formatter,column.value_template,_this.props.getConfig);var value=formatter(item.last);var trend;if(column.trend_arrows){var trendIcon=item.slope>0?"sortUp":"sortDown";trend=_react["default"].createElement("span",null," ",_react["default"].createElement(_eui.EuiIcon,{type:trendIcon,color:"subdued"}))}var style={color:getColor(column.color_rules,"text",item.last)};return _react["default"].createElement("td",{key:"".concat(row.key,"-").concat(item.id),"data-test-subj":"tvbTableVis__value",className:"eui-textRight",style:style},_react["default"].createElement("span",null,value),trend)});return _react["default"].createElement("tr",{key:row.key},_react["default"].createElement("td",null,rowDisplay),columns)});_this.dateFormatter=new DateFormat({},_this.props.getConfig);return _this}_createClass(TableVis,[{key:"renderHeader",value:function renderHeader(){var _this$props=this.props,model=_this$props.model,uiState=_this$props.uiState,onUiState=_this$props.onUiState;var stateKey="".concat(model.type,".sort");var sort=uiState.get(stateKey,{column:"_default_",order:"asc"});var calculateHeaderLabel=function calculateHeaderLabel(metric,item){var defaultLabel=item.label||(0,_calculate_label.calculateLabel)(metric,item.metrics);switch(metric.type){case _metric_types.METRIC_TYPES.PERCENTILE:return"".concat(defaultLabel," (").concat((0,_lodash.last)(metric.percentiles).value||0,")");case _metric_types.METRIC_TYPES.PERCENTILE_RANK:return"".concat(defaultLabel," (").concat((0,_lodash.last)(metric.values)||0,")");default:return defaultLabel}};var columns=this.visibleSeries.map(function(item){var metric=(0,_lodash.last)(item.metrics);var label=calculateHeaderLabel(metric,item);var handleClick=function handleClick(){if(!(0,_is_sortable.isSortable)(metric))return;var order;if(sort.column===item.id){order=sort.order==="asc"?"desc":"asc"}else{order="asc"}onUiState(stateKey,{column:item.id,order:order})};var sortComponent;if((0,_is_sortable.isSortable)(metric)){var _sortIcon;if(sort.column===item.id){_sortIcon=sort.order==="asc"?"sortUp":"sortDown"}else{_sortIcon="empty"}sortComponent=_react["default"].createElement(_eui.EuiIcon,{type:_sortIcon})}var headerContent=_react["default"].createElement("span",null,label," ",sortComponent);if(!(0,_is_sortable.isSortable)(metric)){headerContent=_react["default"].createElement(_eui.EuiToolTip,{content:_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.table.columnNotSortableTooltip",defaultMessage:"This column is not sortable"})},headerContent)}return _react["default"].createElement("th",{onClick:handleClick,key:item.id,scope:"col"},headerContent)});var label=model.pivot_label||model.pivot_field||model.pivot_id;var sortIcon;if(sort.column==="_default_"){sortIcon=sort.order==="asc"?"sortUp":"sortDown"}else{sortIcon="empty"}var sortComponent=_react["default"].createElement(_eui.EuiIcon,{type:sortIcon});var handleSortClick=function handleSortClick(){var order;if(sort.column==="_default_"){order=sort.order==="asc"?"desc":"asc"}else{order="asc"}onUiState(stateKey,{column:"_default_",order:order})};return _react["default"].createElement("tr",null,_react["default"].createElement("th",{className:"eui-textLeft",scope:"col",onClick:handleSortClick},label," ",sortComponent),columns)}},{key:"render",value:function render(){var _this$props2=this.props,visData=_this$props2.visData,model=_this$props2.model;var header=this.renderHeader();var rows;if((0,_lodash.isArray)(visData.series)&&visData.series.length){rows=visData.series.map(this.renderRow)}else{var message=model.pivot_id?_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.table.noResultsAvailableMessage",defaultMessage:"No results available."}):_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.table.noResultsAvailableWithDescriptionMessage",defaultMessage:"No results available. You must choose a group by field for this visualization."});rows=_react["default"].createElement("tr",null,_react["default"].createElement("td",{colSpan:this.visibleSeries.length+1},message))}return _react["default"].createElement("div",{className:"tvbVis","data-test-subj":"tableView"},_react["default"].createElement("table",{className:"table"},_react["default"].createElement("thead",null,header),_react["default"].createElement("tbody",null,rows)))}},{key:"visibleSeries",get:function get(){return(0,_lodash.get)(this.props,"model.series",[]).filter(function(series){return!series.hidden})}}]);return TableVis}(_react.Component);exports.TableVis=TableVis;TableVis.defaultProps={sort:{}};TableVis.propTypes={visData:_propTypes["default"].object,model:_propTypes["default"].object,backgroundColor:_propTypes["default"].string,onPaginate:_propTypes["default"].func,onUiState:_propTypes["default"].func,uiState:_propTypes["default"].object,pageNumber:_propTypes["default"].number,getConfig:_propTypes["default"].func}},5762:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isSortable=isSortable;var _basic_aggs=__webpack_require__(1988);function isSortable(metric){return _basic_aggs.basicAggs.includes(metric.type)}},5763:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.gauge=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(17));var _react=_interopRequireDefault(__webpack_require__(0));var _vis_with_splits=__webpack_require__(1986);var _tick_formatter=__webpack_require__(344);var _lodash=_interopRequireWildcard(__webpack_require__(1));var _gauge=__webpack_require__(5764);var _get_last_value=__webpack_require__(287);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getColors(props){var model=props.model,visData=props.visData;var series=(0,_lodash.get)(visData,"".concat(model.id,".series"),[]).filter(function(s){return!(0,_lodash.isUndefined)(s)});var text;var gauge;if(model.gauge_color_rules){model.gauge_color_rules.forEach(function(rule){if(rule.operator&&rule.value!=null){var value=series[0]&&(0,_get_last_value.getLastValue)(series[0].data)||0;if(_lodash["default"][rule.operator](value,rule.value)){gauge=rule.gauge;text=rule.text}}})}return{text:text,gauge:gauge}}function GaugeVisualization(props){var backgroundColor=props.backgroundColor,model=props.model,visData=props.visData;var colors=getColors(props);var series=(0,_lodash.get)(visData,"".concat(model.id,".series"),[]).filter(function(row){return row}).map(function(row,i){var seriesDef=model.series.find(function(s){return(0,_lodash.includes)(row.id,s.id)});var newProps={};if(seriesDef){newProps.formatter=(0,_tick_formatter.tickFormatter)(seriesDef.formatter,seriesDef.value_template,props.getConfig)}if(i===0&&colors.gauge)newProps.color=colors.gauge;return(0,_lodash.assign)({},row,newProps)});var panelBackgroundColor=model.background_color||backgroundColor;var style={backgroundColor:panelBackgroundColor};var params={metric:series[0],type:model.gauge_style||"half",additionalLabel:props.additionalLabel,backgroundColor:panelBackgroundColor};if(colors.text){params.valueColor=colors.text}if(model.gauge_width)params.gaugeLine=model.gauge_width;if(model.gauge_inner_color)params.innerColor=model.gauge_inner_color;if(model.gauge_inner_width)params.innerLine=model.gauge_inner_width;if(model.gauge_max!=null)params.max=model.gauge_max;return _react["default"].createElement("div",{className:"tvbVis",style:style},_react["default"].createElement(_gauge.Gauge,params))}GaugeVisualization.propTypes={backgroundColor:_propTypes["default"].string,className:_propTypes["default"].string,additionalLabel:_propTypes["default"].string,model:_propTypes["default"].object,onBrush:_propTypes["default"].func,onChange:_propTypes["default"].func,visData:_propTypes["default"].object,getConfig:_propTypes["default"].func};var gauge=(0,_vis_with_splits.visWithSplits)(GaugeVisualization);exports.gauge=gauge},5764:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Gauge=void 0;var _lodash=_interopRequireDefault(__webpack_require__(1));var _propTypes=_interopRequireDefault(__webpack_require__(17));var _react=_interopRequireWildcard(__webpack_require__(0));var _classnames=_interopRequireDefault(__webpack_require__(61));var _set_is_reversed=__webpack_require__(418);var _get_last_value=__webpack_require__(287);var _get_value_by=__webpack_require__(5765);var _gauge_vis=__webpack_require__(5766);var _reactcss=_interopRequireDefault(__webpack_require__(247));var _calculate_coordinates=__webpack_require__(1008);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var Gauge=function(_Component){_inherits(Gauge,_Component);function Gauge(props){var _this;_classCallCheck(this,Gauge);_this=_possibleConstructorReturn(this,_getPrototypeOf(Gauge).call(this,props));_this.state={scale:1,top:0,left:0,translateX:1,translateY:1};_this.handleResize=_this.handleResize.bind(_assertThisInitialized(_this));return _this}_createClass(Gauge,[{key:"componentWillMount",value:function componentWillMount(){var _this2=this;var check=function check(){_this2.timeout=setTimeout(function(){var newState=(0,_calculate_coordinates.calculateCoordinates)(_this2.inner,_this2.resize,_this2.state);if(newState&&_this2.state&&!_lodash["default"].isEqual(newState,_this2.state)){_this2.handleResize()}check()},500)};check()}},{key:"componentWillUnmount",value:function componentWillUnmount(){clearTimeout(this.timeout)}},{key:"componentDidMount",value:function componentDidMount(){this.handleResize()}},{key:"handleResize",value:function handleResize(){var newState=(0,_calculate_coordinates.calculateCoordinates)(this.inner,this.resize,this.state);this.setState(newState)}},{key:"render",value:function render(){var _this3=this;var _this$props=this.props,metric=_this$props.metric,type=_this$props.type;var _this$state=this.state,scale=_this$state.scale,translateX=_this$state.translateX,translateY=_this$state.translateY;var value=metric&&(0,_get_last_value.getLastValue)(metric.data)||0;var max=metric&&(0,_get_value_by.getValueBy)("max",metric.data)||1;var formatter=metric&&(metric.tickFormatter||metric.formatter)||this.props.tickFormatter||function(v){return v};var title=metric&&metric.label||"";var styles=(0,_reactcss["default"])({default:{inner:{top:this.state.top||0,left:this.state.left||0,transform:"matrix(".concat(scale,", 0, 0, ").concat(scale,", ").concat(translateX,", ").concat(translateY,")")}},valueColor:{value:{color:this.props.valueColor}}},this.props);var gaugeProps={value:value,reversed:(0,_set_is_reversed.isBackgroundDark)(this.props.backgroundColor),gaugeLine:this.props.gaugeLine,innerLine:this.props.innerLine,innerColor:this.props.innerColor,max:this.props.max||max,color:metric&&metric.color||"#8ac336",type:type};var metrics;var additionalLabel;if(this.props.additionalLabel){additionalLabel=_react["default"].createElement("div",{className:"tvbVisGauge__additionalLabel"},this.props.additionalLabel)}if(type==="half"){metrics=_react["default"].createElement("div",{className:"tvbVisHalfGauge__metrics",ref:function ref(el){return _this3.inner=el},style:styles.inner},_react["default"].createElement("div",{className:"tvbVisGauge__label",ref:"title"},title),_react["default"].createElement("div",{className:"tvbVisGauge__value",style:styles.value,ref:"label"},formatter(value)),additionalLabel)}else{metrics=_react["default"].createElement("div",{className:"tvbVisCircleGauge__metrics",ref:function ref(el){return _this3.inner=el},style:styles.inner},_react["default"].createElement("div",{className:"tvbVisGauge__value",style:styles.value,ref:"label"},formatter(value)),_react["default"].createElement("div",{className:"tvbVisGauge__label",ref:"title"},title),additionalLabel)}var classes=(0,_classnames["default"])({tvbVisHalfGauge:type==="half",tvbVisCircleGauge:type==="circle","tvbVisGauge--reversed":(0,_set_is_reversed.isBackgroundInverted)(this.props.backgroundColor)});return _react["default"].createElement("div",{className:classes},_react["default"].createElement("div",{ref:function ref(el){return _this3.resize=el},className:"tvbVisGauge__resize","data-test-subj":"tvbVisGaugeContainer"},metrics,_react["default"].createElement(_gauge_vis.GaugeVis,gaugeProps)))}}]);return Gauge}(_react.Component);exports.Gauge=Gauge;Gauge.defaultProps={type:"half",innerLine:2,gaugeLine:10};Gauge.propTypes={gaugeLine:_propTypes["default"].oneOfType([_propTypes["default"].string,_propTypes["default"].number]),innerColor:_propTypes["default"].oneOfType([_propTypes["default"].string,_propTypes["default"].number]),innerLine:_propTypes["default"].oneOfType([_propTypes["default"].string,_propTypes["default"].number]),max:_propTypes["default"].oneOfType([_propTypes["default"].string,_propTypes["default"].number]),metric:_propTypes["default"].object,backgroundColor:_propTypes["default"].string,type:_propTypes["default"].oneOf(["half","circle"]),valueColor:_propTypes["default"].string,additionalLabel:_propTypes["default"].string}},5765:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getValueBy=void 0;var _lodash=_interopRequireDefault(__webpack_require__(1));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var getValueBy=function getValueBy(fn,data){if(_lodash["default"].isNumber(data))return data;if(!Array.isArray(data))return 0;var values=data.map(function(v){return v[1]});return _lodash["default"][fn](values)};exports.getValueBy=getValueBy},5766:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.GaugeVis=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(17));var _react=_interopRequireWildcard(__webpack_require__(0));var _lodash=_interopRequireDefault(__webpack_require__(1));var _reactcss=_interopRequireDefault(__webpack_require__(247));var _calculate_coordinates=__webpack_require__(1008);var _colors=__webpack_require__(1984);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var GaugeVis=function(_Component){_inherits(GaugeVis,_Component);function GaugeVis(props){var _this;_classCallCheck(this,GaugeVis);_this=_possibleConstructorReturn(this,_getPrototypeOf(GaugeVis).call(this,props));_this.state={scale:1,top:0,left:0,translateX:1,translateY:1};_this.handleResize=_this.handleResize.bind(_assertThisInitialized(_this));return _this}_createClass(GaugeVis,[{key:"componentWillMount",value:function componentWillMount(){var _this2=this;var check=function check(){_this2.timeout=setTimeout(function(){var newState=(0,_calculate_coordinates.calculateCoordinates)(_this2.inner,_this2.resize,_this2.state);if(newState&&_this2.state&&!_lodash["default"].isEqual(newState,_this2.state)){_this2.handleResize()}check()},500)};check()}},{key:"componentWillUnmount",value:function componentWillUnmount(){clearTimeout(this.timeout)}},{key:"componentDidMount",value:function componentDidMount(){this.handleResize()}},{key:"handleResize",value:function handleResize(){var newState=(0,_calculate_coordinates.calculateCoordinates)(this.inner,this.resize,this.state);this.setState(newState)}},{key:"render",value:function render(){var _this3=this;var _this$props=this.props,type=_this$props.type,value=_this$props.value,max=_this$props.max,color=_this$props.color;var _this$state=this.state,scale=_this$state.scale,translateX=_this$state.translateX,translateY=_this$state.translateY;var size=2*Math.PI*50;var sliceSize=type==="half"?.6:1;var percent=value<max?value/max:1;var styles=(0,_reactcss["default"])({default:{resize:{position:"relative",display:"flex",rowDirection:"column",flex:"1 0 auto",overflow:"hidden"},svg:{position:"absolute",top:this.state.top,left:this.state.left,transform:"matrix(".concat(scale,", 0, 0, ").concat(scale,", ").concat(translateX,", ").concat(translateY,")")},innerLine:{strokeWidth:this.props.innerLine},gaugeLine:{strokeWidth:this.props.gaugeLine}},half:{svg:{transform:"matrix(".concat(scale,", 0, 0, ").concat(scale,", ").concat(translateX,", ").concat(translateY,")")}}},{half:type==="half"});var props={circle:{r:50,cx:60,cy:60,fill:"rgba(0,0,0,0)",stroke:color,strokeWidth:this.props.gaugeLine,strokeDasharray:"".concat(percent*sliceSize*size," ").concat(size),transform:"rotate(-90 60 60)"},circleBackground:{r:50,cx:60,cy:60,fill:"rgba(0,0,0,0)",stroke:_colors.COLORS.lineColor,strokeDasharray:"".concat(sliceSize*size," ").concat(size),strokeWidth:this.props.innerLine}};if(type==="half"){props.circle.transform="rotate(-197.8 60 60)";props.circleBackground.transform="rotate(162 60 60)"}if(this.props.innerColor){props.circleBackground.stroke=this.props.innerColor}var svg;if(type==="half"){svg=_react["default"].createElement("svg",{width:120.72,height:78.72},_react["default"].createElement("circle",_extends({},props.circleBackground,{style:styles.innerLine})),_react["default"].createElement("circle",_extends({},props.circle,{style:styles.gaugeLine})))}else{svg=_react["default"].createElement("svg",{width:120.72,height:120.72},_react["default"].createElement("circle",props.circleBackground),_react["default"].createElement("circle",props.circle))}return _react["default"].createElement("div",{ref:function ref(el){return _this3.resize=el},style:styles.resize},_react["default"].createElement("div",{style:styles.svg,ref:function ref(el){return _this3.inner=el}},svg))}}]);return GaugeVis}(_react.Component);exports.GaugeVis=GaugeVis;GaugeVis.defaultProps={innerLine:2,gaugeLine:10};GaugeVis.propTypes={color:_propTypes["default"].string,gaugeLine:_propTypes["default"].oneOfType([_propTypes["default"].string,_propTypes["default"].number]),innerColor:_propTypes["default"].oneOfType([_propTypes["default"].string,_propTypes["default"].number]),innerLine:_propTypes["default"].oneOfType([_propTypes["default"].string,_propTypes["default"].number]),max:_propTypes["default"].oneOfType([_propTypes["default"].string,_propTypes["default"].number]),metric:_propTypes["default"].object,reversed:_propTypes["default"].bool,value:_propTypes["default"].number,type:_propTypes["default"].oneOf(["half","circle"])}},5767:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.MarkdownVisualization=MarkdownVisualization;var _propTypes=_interopRequireDefault(__webpack_require__(17));var _react=_interopRequireDefault(__webpack_require__(0));var _classnames=_interopRequireDefault(__webpack_require__(61));var _uuid=_interopRequireDefault(__webpack_require__(105));var _lodash=__webpack_require__(1);var _markdown=__webpack_require__(813);var _error=__webpack_require__(1989);var _replace_vars=__webpack_require__(664);var _convert_series_to_vars=__webpack_require__(1990);var _set_is_reversed=__webpack_require__(418);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var getMarkdownId=function getMarkdownId(id){return"markdown-".concat(id)};function MarkdownVisualization(props){var backgroundColor=props.backgroundColor,model=props.model,visData=props.visData,dateFormat=props.dateFormat;var series=(0,_lodash.get)(visData,"".concat(model.id,".series"),[]);var variables=(0,_convert_series_to_vars.convertSeriesToVars)(series,model,dateFormat,props.getConfig);var markdownElementId=getMarkdownId(_uuid["default"].v1());var panelBackgroundColor=model.background_color||backgroundColor;var style={backgroundColor:panelBackgroundColor};var markdown;var markdownCss="";if(model.markdown){var markdownSource=(0,_replace_vars.replaceVars)(model.markdown,{},_objectSpread({_all:variables},variables));if(model.markdown_css){markdownCss=model.markdown_css.replace(new RegExp(getMarkdownId(model.id),"g"),markdownElementId)}var markdownClasses=(0,_classnames["default"])("kbnMarkdown__body",{"kbnMarkdown__body--reversed":(0,_set_is_reversed.isBackgroundInverted)(panelBackgroundColor)});var contentClasses=(0,_classnames["default"])("tvbMarkdown__content","tvbMarkdown__content--".concat(model.markdown_vertical_align),{"tvbMarkdown__content-isScrolling":model.markdown_scrollbars},markdownClasses);var markdownError=markdownSource instanceof Error?markdownSource:null;markdown=_react["default"].createElement("div",{className:"tvbMarkdown","data-test-subj":"tsvbMarkdown"},markdownError&&_react["default"].createElement(_error.ErrorComponent,{error:markdownError}),_react["default"].createElement("style",{type:"text/css"},markdownCss),_react["default"].createElement("div",{className:contentClasses},_react["default"].createElement("div",{id:markdownElementId},!markdownError&&_react["default"].createElement(_markdown.Markdown,{markdown:markdownSource,openLinksInNewTab:model.markdown_openLinksInNewTab}))))}return _react["default"].createElement("div",{className:"tvbVis",style:style},markdown)}MarkdownVisualization.propTypes={backgroundColor:_propTypes["default"].string,className:_propTypes["default"].string,model:_propTypes["default"].object,onBrush:_propTypes["default"].func,onChange:_propTypes["default"].func,visData:_propTypes["default"].object,dateFormat:_propTypes["default"].string,getConfig:_propTypes["default"].func}},5768:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.NoDataComponent=NoDataComponent;var _react=_interopRequireDefault(__webpack_require__(0));var _react2=__webpack_require__(10);var _eui=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function NoDataComponent(){return _react["default"].createElement("div",{className:"visError","data-test-subj":"noTSVBDataMessage"},_react["default"].createElement(_eui.EuiText,{size:"xs",color:"subdued"},_react["default"].createElement(_eui.EuiIcon,{type:"visualizeApp",size:"m",color:"subdued","aria-hidden":"true"}),_react["default"].createElement(_eui.EuiSpacer,{size:"s"}),_react["default"].createElement("p",null,_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.noDataDescription",defaultMessage:"No data to display for the selected metrics"}))))}},5769:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VisPicker=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(17));var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(2);var _react2=__webpack_require__(10);var _panel_types=__webpack_require__(662);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function VisPickerItem(props){var label=props.label,type=props.type,selected=props.selected;var itemClassName="tvbVisPickerItem";return _react["default"].createElement(_eui.EuiTab,{className:itemClassName,isSelected:selected,onClick:function onClick(){return props.onClick(type)},"data-test-subj":"".concat(type,"TsvbTypeBtn")},label)}VisPickerItem.propTypes={label:_propTypes["default"].string,onClick:_propTypes["default"].func,type:_propTypes["default"].string,selected:_propTypes["default"].bool};var VisPicker=(0,_react2.injectI18n)(function(props){var handleChange=function handleChange(type){props.onChange({type:type})};var model=props.model,intl=props.intl;var tabs=[{type:_panel_types.PANEL_TYPES.TIMESERIES,label:intl.formatMessage({id:"tsvb.visPicker.timeSeriesLabel",defaultMessage:"Time Series"})},{type:_panel_types.PANEL_TYPES.METRIC,label:intl.formatMessage({id:"tsvb.visPicker.metricLabel",defaultMessage:"Metric"})},{type:_panel_types.PANEL_TYPES.TOP_N,label:intl.formatMessage({id:"tsvb.visPicker.topNLabel",defaultMessage:"Top N"})},{type:_panel_types.PANEL_TYPES.GAUGE,label:intl.formatMessage({id:"tsvb.visPicker.gaugeLabel",defaultMessage:"Gauge"})},{type:_panel_types.PANEL_TYPES.MARKDOWN,label:"Markdown"},{type:_panel_types.PANEL_TYPES.TABLE,label:intl.formatMessage({id:"tsvb.visPicker.tableLabel",defaultMessage:"Table"})}].map(function(item){return _react["default"].createElement(VisPickerItem,_extends({key:item.type,onClick:handleChange,selected:item.type===model.type},item))});return _react["default"].createElement(_eui.EuiTabs,null,tabs)});exports.VisPicker=VisPicker;VisPicker.propTypes={model:_propTypes["default"].object,onChange:_propTypes["default"].func}},5770:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PanelConfig=PanelConfig;var _propTypes=_interopRequireDefault(__webpack_require__(17));var _react=_interopRequireDefault(__webpack_require__(0));var _timeseries=__webpack_require__(5771);var _metric=__webpack_require__(5829);var _top_n=__webpack_require__(5830);var _table=__webpack_require__(5831);var _gauge=__webpack_require__(5832);var _markdown=__webpack_require__(5833);var _react2=__webpack_require__(10);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var types={timeseries:_timeseries.TimeseriesPanelConfig,table:_table.TablePanelConfig,metric:_metric.MetricPanelConfig,top_n:_top_n.TopNPanelConfig,gauge:_gauge.GaugePanelConfig,markdown:_markdown.MarkdownPanelConfig};function PanelConfig(props){var model=props.model;var component=types[model.type];if(component){return _react["default"].createElement(component,props)}return _react["default"].createElement("div",null,_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.missingPanelConfigDescription",defaultMessage:"Missing panel config for {modelType}",values:{modelType:model.type}}))}PanelConfig.propTypes={fields:_propTypes["default"].object,model:_propTypes["default"].object,onChange:_propTypes["default"].func,dateFormat:_propTypes["default"].string,visData$:_propTypes["default"].object}},5771:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TimeseriesPanelConfig=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(17));var _react=_interopRequireWildcard(__webpack_require__(0));var _series_editor=__webpack_require__(419);var _annotations_editor=__webpack_require__(5827);var _index_pattern=__webpack_require__(291);var _create_select_handler=__webpack_require__(50);var _create_text_handler=__webpack_require__(64);var _color_picker=__webpack_require__(198);var _yes_no=__webpack_require__(200);var _eui=__webpack_require__(2);var _react2=__webpack_require__(10);var _storage=__webpack_require__(122);var _setup=__webpack_require__(84);var _get_default_query_language=__webpack_require__(164);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var QueryBarInput=_setup.data.query.ui.QueryBarInput;var localStorage=new _storage.Storage(window.localStorage);var TimeseriesPanelConfigUi=function(_Component){_inherits(TimeseriesPanelConfigUi,_Component);function TimeseriesPanelConfigUi(props){var _this;_classCallCheck(this,TimeseriesPanelConfigUi);_this=_possibleConstructorReturn(this,_getPrototypeOf(TimeseriesPanelConfigUi).call(this,props));_this.state={selectedTab:"data"};return _this}_createClass(TimeseriesPanelConfigUi,[{key:"switchTab",value:function switchTab(selectedTab){this.setState({selectedTab:selectedTab})}},{key:"render",value:function render(){var _this2=this;var defaults={filter:{query:"",language:(0,_get_default_query_language.getDefaultQueryLanguage)()},axis_max:"",axis_min:"",legend_position:"right",show_grid:1};var model=_objectSpread({},defaults,this.props.model);var selectedTab=this.state.selectedTab;var handleSelectChange=(0,_create_select_handler.createSelectHandler)(this.props.onChange);var handleTextChange=(0,_create_text_handler.createTextHandler)(this.props.onChange);var htmlId=(0,_eui.htmlIdGenerator)();var intl=this.props.intl;var positionOptions=[{label:intl.formatMessage({id:"tsvb.timeseries.positionOptions.rightLabel",defaultMessage:"Right"}),value:"right"},{label:intl.formatMessage({id:"tsvb.timeseries.positionOptions.leftLabel",defaultMessage:"Left"}),value:"left"}];var selectedPositionOption=positionOptions.find(function(option){return model.axis_position===option.value});var scaleOptions=[{label:intl.formatMessage({id:"tsvb.timeseries.scaleOptions.normalLabel",defaultMessage:"Normal"}),value:"normal"},{label:intl.formatMessage({id:"tsvb.timeseries.scaleOptions.logLabel",defaultMessage:"Log"}),value:"log"}];var selectedAxisScaleOption=scaleOptions.find(function(option){return model.axis_scale===option.value});var legendPositionOptions=[{label:intl.formatMessage({id:"tsvb.timeseries.legendPositionOptions.rightLabel",defaultMessage:"Right"}),value:"right"},{label:intl.formatMessage({id:"tsvb.timeseries.legendPositionOptions.leftLabel",defaultMessage:"Left"}),value:"left"},{label:intl.formatMessage({id:"tsvb.timeseries.legendPositionOptions.bottomLabel",defaultMessage:"Bottom"}),value:"bottom"}];var selectedLegendPosOption=legendPositionOptions.find(function(option){return model.legend_position===option.value});var view;if(selectedTab==="data"){view=_react["default"].createElement(_series_editor.SeriesEditor,{fields:this.props.fields,model:this.props.model,name:this.props.name,visData$:this.props.visData$,onChange:this.props.onChange})}else if(selectedTab==="annotations"){view=_react["default"].createElement(_annotations_editor.AnnotationsEditor,{fields:this.props.fields,model:this.props.model,name:"annotations",onChange:this.props.onChange})}else{view=_react["default"].createElement("div",{className:"tvbPanelConfig__container"},_react["default"].createElement(_eui.EuiPanel,null,_react["default"].createElement(_eui.EuiTitle,{size:"s"},_react["default"].createElement("span",null,_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.timeseries.optionsTab.dataLabel",defaultMessage:"Data"}))),_react["default"].createElement(_eui.EuiSpacer,{size:"m"}),_react["default"].createElement(_index_pattern.IndexPattern,{fields:this.props.fields,model:this.props.model,onChange:this.props.onChange}),_react["default"].createElement(_eui.EuiHorizontalRule,null),_react["default"].createElement(_eui.EuiFlexGroup,{responsive:false,wrap:true},_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiFormRow,{id:htmlId("panelFilter"),label:_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.timeseries.optionsTab.panelFilterLabel",defaultMessage:"Panel filter"}),fullWidth:true},_react["default"].createElement(QueryBarInput,{query:{language:model.filter.language||(0,_get_default_query_language.getDefaultQueryLanguage)(),query:model.filter.query||""},onChange:function onChange(filter){return _this2.props.onChange({filter:filter})},appName:"VisEditor",indexPatterns:[model.index_pattern||model.default_index_pattern],store:localStorage}))),_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiFormLabel,null,_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.timeseries.optionsTab.ignoreGlobalFilterLabel",defaultMessage:"Ignore global filter?"})),_react["default"].createElement(_eui.EuiSpacer,{size:"s"}),_react["default"].createElement(_yes_no.YesNo,{value:model.ignore_global_filter,name:"ignore_global_filter",onChange:this.props.onChange})))),_react["default"].createElement(_eui.EuiSpacer,null),_react["default"].createElement(_eui.EuiPanel,null,_react["default"].createElement(_eui.EuiTitle,{size:"s"},_react["default"].createElement("span",null,_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.timeseries.optionsTab.styleLabel",defaultMessage:"Style"}))),_react["default"].createElement(_eui.EuiSpacer,{size:"m"}),_react["default"].createElement(_eui.EuiFlexGroup,{responsive:false,wrap:true,alignItems:"center"},_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiFormRow,{id:htmlId("axisMin"),label:_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.timeseries.optionsTab.axisMinLabel",defaultMessage:"Axis min"})},_react["default"].createElement(_eui.EuiFieldText,{onChange:handleTextChange("axis_min"),value:model.axis_min}))),_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiFormRow,{id:htmlId("axisMax"),label:_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.timeseries.optionsTab.axisMaxLabel",defaultMessage:"Axis max"})},_react["default"].createElement(_eui.EuiFieldText,{onChange:handleTextChange("axis_max"),value:model.axis_max}))),_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiFormRow,{id:htmlId("axisPos"),label:_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.timeseries.optionsTab.axisPositionLabel",defaultMessage:"Axis position"})},_react["default"].createElement(_eui.EuiComboBox,{isClearable:false,options:positionOptions,selectedOptions:selectedPositionOption?[selectedPositionOption]:[],onChange:handleSelectChange("axis_position"),singleSelection:{asPlainText:true}}))),_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiFormRow,{id:htmlId("axisScale"),label:_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.timeseries.optionsTab.axisScaleLabel",defaultMessage:"Axis scale"})},_react["default"].createElement(_eui.EuiComboBox,{isClearable:false,options:scaleOptions,selectedOptions:selectedAxisScaleOption?[selectedAxisScaleOption]:[],onChange:handleSelectChange("axis_scale"),singleSelection:{asPlainText:true}})))),_react["default"].createElement(_eui.EuiHorizontalRule,null),_react["default"].createElement(_eui.EuiFlexGroup,{responsive:false,wrap:true,alignItems:"center"},_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiFormLabel,{style:{marginBottom:0}},_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.timeseries.optionsTab.backgroundColorLabel",defaultMessage:"Background color:"}))),_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_color_picker.ColorPicker,{onChange:this.props.onChange,name:"background_color",value:model.background_color})),_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiFormLabel,{style:{marginBottom:0}},_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.timeseries.optionsTab.showLegendLabel",defaultMessage:"Show legend?"}))),_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_yes_no.YesNo,{value:model.show_legend,name:"show_legend",onChange:this.props.onChange})),_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiFormLabel,{style:{marginBottom:0},htmlFor:htmlId("legendPos")},_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.timeseries.optionsTab.legendPositionLabel",defaultMessage:"Legend position"}))),_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiComboBox,{isClearable:false,id:htmlId("legendPos"),options:legendPositionOptions,selectedOptions:selectedLegendPosOption?[selectedLegendPosOption]:[],onChange:handleSelectChange("legend_position"),singleSelection:{asPlainText:true}})),_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiFormLabel,{style:{marginBottom:0}},_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.timeseries.optionsTab.displayGridLabel",defaultMessage:"Display grid"}))),_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_yes_no.YesNo,{value:model.show_grid,name:"show_grid",onChange:this.props.onChange})))))}return _react["default"].createElement("div",null,_react["default"].createElement(_eui.EuiTabs,{size:"s"},_react["default"].createElement(_eui.EuiTab,{isSelected:selectedTab==="data",onClick:function onClick(){return _this2.switchTab("data")}},_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.timeseries.dataTab.dataButtonLabel",defaultMessage:"Data"})),_react["default"].createElement(_eui.EuiTab,{isSelected:selectedTab==="options",onClick:function onClick(){return _this2.switchTab("options")}},_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.timeseries.optionsTab.panelOptionsButtonLabel",defaultMessage:"Panel options"})),_react["default"].createElement(_eui.EuiTab,{isSelected:selectedTab==="annotations",onClick:function onClick(){return _this2.switchTab("annotations")}},_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.timeseries.annotationsTab.annotationsButtonLabel",defaultMessage:"Annotations"}))),view)}}]);return TimeseriesPanelConfigUi}(_react.Component);TimeseriesPanelConfigUi.propTypes={fields:_propTypes["default"].object,model:_propTypes["default"].object,onChange:_propTypes["default"].func,visData$:_propTypes["default"].object};var TimeseriesPanelConfig=(0,_react2.injectI18n)(TimeseriesPanelConfigUi);exports.TimeseriesPanelConfig=TimeseriesPanelConfig},5772:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.reIdSeries=void 0;var _uuid=_interopRequireDefault(__webpack_require__(105));var _lodash=_interopRequireDefault(__webpack_require__(1));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var reIdSeries=function reIdSeries(source){var series=_lodash["default"].cloneDeep(source);series.id=_uuid["default"].v1();series.metrics.forEach(function(metric){var id=_uuid["default"].v1();var metricId=metric.id;metric.id=id;if(series.terms_order_by===metricId)series.terms_order_by=id;series.metrics.filter(function(r){return r.field===metricId}).forEach(function(r){return r.field=id});series.metrics.filter(function(r){return r.type==="calculation"&&r.variables.some(function(v){return v.field===metricId})}).forEach(function(r){r.variables.filter(function(v){return v.field===metricId}).forEach(function(v){v.id=_uuid["default"].v1();v.field=id})})});return series};exports.reIdSeries=reIdSeries},5773:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Series=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(17));var _react=_interopRequireWildcard(__webpack_require__(0));var _lodash=__webpack_require__(1);var _series=__webpack_require__(5774);var _series2=__webpack_require__(5819);var _series3=__webpack_require__(5820);var _series4=__webpack_require__(5821);var _series5=__webpack_require__(5823);var _series6=__webpack_require__(5824);var _react2=__webpack_require__(10);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var lookup={top_n:_series3.TopNSeries,table:_series4.TableSeries,metric:_series2.MetricSeries,timeseries:_series.TimeseriesSeries,gauge:_series5.GaugeSeries,markdown:_series6.MarkdownSeries};var Series=function(_Component){_inherits(Series,_Component);function Series(props){var _this;_classCallCheck(this,Series);_this=_possibleConstructorReturn(this,_getPrototypeOf(Series).call(this,props));_defineProperty(_assertThisInitialized(_this),"switchTab",function(selectedTab){_this.setState({selectedTab:selectedTab})});_defineProperty(_assertThisInitialized(_this),"handleChange",function(part){if(_this.props.onChange){var model=_this.props.model;var doc=(0,_lodash.assign)({},model,part);_this.props.onChange(doc)}});_defineProperty(_assertThisInitialized(_this),"togglePanelActivation",function(){var model=_this.props.model;_this.handleChange({hidden:!model.hidden})});_defineProperty(_assertThisInitialized(_this),"toggleVisible",function(e){e.preventDefault();_this.setState({visible:!_this.state.visible})});_this.state={visible:true,selectedTab:"metrics",uiRestrictions:undefined};_this.visDataSubscription=null;return _this}_createClass(Series,[{key:"componentDidMount",value:function componentDidMount(){var _this2=this;if(this.props.visData$){this.visDataSubscription=this.props.visData$.subscribe(function(visData){return _this2.setState({uiRestrictions:(0,_lodash.get)(visData,"uiRestrictions")})})}}},{key:"render",value:function render(){var panel=this.props.panel;var Component=lookup[panel.type];var params={className:this.props.className,disableAdd:this.props.disableAdd,disableDelete:this.props.disableDelete,fields:this.props.fields,name:this.props.name,onAdd:this.props.onAdd,onChange:this.handleChange,onClone:this.props.onClone,onDelete:this.props.onDelete,model:this.props.model,panel:this.props.panel,selectedTab:this.state.selectedTab,style:this.props.style,uiRestrictions:this.state.uiRestrictions,switchTab:this.switchTab,toggleVisible:this.toggleVisible,togglePanelActivation:this.togglePanelActivation,visible:this.state.visible,dragHandleProps:this.props.dragHandleProps,indexPatternForQuery:panel.index_pattern||panel.default_index_pattern};return Boolean(Component)?_react["default"].createElement(Component,params):_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.seriesConfig.missingSeriesComponentDescription",defaultMessage:"Missing Series component for panel type: {panelType}",values:{panelType:panel.type}})}},{key:"componentWillUnmount",value:function componentWillUnmount(){if(this.visDataSubscription){this.visDataSubscription.unsubscribe()}}}]);return Series}(_react.Component);exports.Series=Series;Series.defaultProps={name:"metrics"};Series.propTypes={className:_propTypes["default"].string,disableAdd:_propTypes["default"].bool,disableDelete:_propTypes["default"].bool,fields:_propTypes["default"].object,name:_propTypes["default"].string,onAdd:_propTypes["default"].func,onChange:_propTypes["default"].func,onClone:_propTypes["default"].func,onDelete:_propTypes["default"].func,model:_propTypes["default"].object,panel:_propTypes["default"].object,visData$:_propTypes["default"].object,dragHandleProps:_propTypes["default"].object}},5774:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TimeseriesSeries=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(17));var _react=_interopRequireDefault(__webpack_require__(0));var _color_picker=__webpack_require__(198);var _add_delete_buttons=__webpack_require__(163);var _aggs=__webpack_require__(420);var _config=__webpack_require__(5811);var _series_drag_handler=__webpack_require__(345);var _eui=__webpack_require__(2);var _split=__webpack_require__(503);var _create_text_handler=__webpack_require__(64);var _react2=__webpack_require__(10);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var TimeseriesSeriesUI=(0,_react2.injectI18n)(function(props){var panel=props.panel,fields=props.fields,onAdd=props.onAdd,onDelete=props.onDelete,disableDelete=props.disableDelete,disableAdd=props.disableAdd,selectedTab=props.selectedTab,onChange=props.onChange,visible=props.visible,intl=props.intl,name=props.name,uiRestrictions=props.uiRestrictions;var defaults={label:""};var model=_objectSpread({},defaults,props.model);var handleChange=(0,_create_text_handler.createTextHandler)(onChange);var caretIcon="arrowDown";if(!visible)caretIcon="arrowRight";var body=null;if(visible){var seriesBody;if(selectedTab==="metrics"){seriesBody=_react["default"].createElement("div",null,_react["default"].createElement(_aggs.Aggs,{onChange:props.onChange,fields:fields,panel:panel,model:model,name:name,uiRestrictions:uiRestrictions,dragHandleProps:props.dragHandleProps}),_react["default"].createElement("div",{className:"tvbAggRow tvbAggRow--split"},_react["default"].createElement(_split.Split,{onChange:props.onChange,fields:fields,panel:panel,model:model,uiRestrictions:uiRestrictions})))}else{seriesBody=_react["default"].createElement(_config.TimeseriesConfig,{fields:props.fields,model:props.model,onChange:props.onChange,indexPatternForQuery:props.indexPatternForQuery})}body=_react["default"].createElement("div",{className:"tvbSeries__body"},_react["default"].createElement(_eui.EuiTabs,{size:"s"},_react["default"].createElement(_eui.EuiTab,{isSelected:selectedTab==="metrics",onClick:function onClick(){return props.switchTab("metrics")}},_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.timeSeries.tab.metricsLabel",defaultMessage:"Metrics"})),_react["default"].createElement(_eui.EuiTab,{"data-test-subj":"seriesOptions",isSelected:selectedTab==="options",onClick:function onClick(){return props.switchTab("options")}},_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.timeSeries.tab.optionsLabel",defaultMessage:"Options"}))),seriesBody)}var colorPicker=_react["default"].createElement(_color_picker.ColorPicker,{disableTrash:true,onChange:props.onChange,name:"color",value:model.color});return _react["default"].createElement("div",{className:"".concat(props.className),style:props.style},_react["default"].createElement(_eui.EuiFlexGroup,{responsive:false,gutterSize:"s",alignItems:"center"},_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiButtonIcon,{iconType:caretIcon,color:"text",onClick:props.toggleVisible,"aria-label":intl.formatMessage({id:"tsvb.timeSeries.toggleSeriesEditorAriaLabel",defaultMessage:"Toggle series editor"}),"aria-expanded":props.visible})),_react["default"].createElement(_eui.EuiFlexItem,{grow:false},colorPicker),_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiFieldText,{fullWidth:true,onChange:handleChange("label"),placeholder:intl.formatMessage({id:"tsvb.timeSeries.labelPlaceholder",defaultMessage:"Label"}),value:model.label})),_react["default"].createElement(_series_drag_handler.SeriesDragHandler,{dragHandleProps:props.dragHandleProps,hideDragHandler:props.disableDelete}),_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_add_delete_buttons.AddDeleteButtons,{addTooltip:intl.formatMessage({id:"tsvb.timeSeries.addSeriesTooltip",defaultMessage:"Add Series"}),deleteTooltip:intl.formatMessage({id:"tsvb.timeSeries.deleteSeriesTooltip",defaultMessage:"Delete Series"}),cloneTooltip:intl.formatMessage({id:"tsvb.timeSeries.cloneSeriesTooltip",defaultMessage:"Clone Series"}),onDelete:onDelete,onClone:props.onClone,togglePanelActivation:props.togglePanelActivation,isPanelActive:!model.hidden,onAdd:onAdd,disableDelete:disableDelete,disableAdd:disableAdd,responsive:false}))),body)});TimeseriesSeriesUI.propTypes={className:_propTypes["default"].string,colorPicker:_propTypes["default"].bool,disableAdd:_propTypes["default"].bool,disableDelete:_propTypes["default"].bool,fields:_propTypes["default"].object,name:_propTypes["default"].string,onAdd:_propTypes["default"].func,onChange:_propTypes["default"].func,onClone:_propTypes["default"].func,onDelete:_propTypes["default"].func,model:_propTypes["default"].object,panel:_propTypes["default"].object,selectedTab:_propTypes["default"].string,style:_propTypes["default"].object,switchTab:_propTypes["default"].func,toggleVisible:_propTypes["default"].func,visible:_propTypes["default"].bool,togglePanelActivation:_propTypes["default"].func,uiRestrictions:_propTypes["default"].object,dragHandleProps:_propTypes["default"].object,indexPatternForQuery:_propTypes["default"].string};var TimeseriesSeries=(0,_react2.injectI18n)(TimeseriesSeriesUI);exports.TimeseriesSeries=TimeseriesSeries},5775:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.CustomColorPicker=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(17));var _react=_interopRequireWildcard(__webpack_require__(0));var _common=__webpack_require__(5776);var _ChromeFields=_interopRequireDefault(__webpack_require__(5777));var _ChromePointer=_interopRequireDefault(__webpack_require__(5778));var _ChromePointerCircle=_interopRequireDefault(__webpack_require__(5779));var _CompactColor=_interopRequireDefault(__webpack_require__(5780));var _color=_interopRequireDefault(__webpack_require__(5781));var _reactAddonsShallowCompare=_interopRequireDefault(__webpack_require__(5782));function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var CustomColorPickerUI=function(_Component){_inherits(CustomColorPickerUI,_Component);function CustomColorPickerUI(props){var _this;_classCallCheck(this,CustomColorPickerUI);_this=_possibleConstructorReturn(this,_getPrototypeOf(CustomColorPickerUI).call(this,props));_this.handleChange=_this.handleChange.bind(_assertThisInitialized(_this));return _this}_createClass(CustomColorPickerUI,[{key:"shouldComponentUpdate",value:function shouldComponentUpdate(nextProps,nextState){return(0,_reactAddonsShallowCompare["default"])(nextProps,nextState)}},{key:"handleChange",value:function handleChange(data){this.props.onChange(data)}},{key:"render",value:function render(){var _this2=this;var rgb=this.props.rgb;var styles={active:{background:"rgba(".concat(rgb.r,", ").concat(rgb.g,", ").concat(rgb.b,", ").concat(rgb.a,")")},Saturation:{radius:"2px 2px 0 0 "},Hue:{radius:"2px"},Alpha:{radius:"2px"}};var handleSwatchChange=function handleSwatchChange(data){if(data.hex){_color["default"].isValidHex(data.hex)&&_this2.props.onChange({hex:data.hex,source:"hex"})}else{_this2.props.onChange(data)}};var swatches=this.props.colors.map(function(c){return _react["default"].createElement(_CompactColor["default"],{key:c,color:c,onClick:handleSwatchChange})});return _react["default"].createElement("div",{className:"tvbColorPickerPopUp","data-test-subj":"tvbColorPickerPopUp"},_react["default"].createElement("div",{className:"tvbColorPickerPopUp__saturation"},_react["default"].createElement(_common.Saturation,_extends({style:styles.Saturation},this.props,{pointer:_ChromePointerCircle["default"],onChange:this.handleChange}))),_react["default"].createElement("div",{className:"tvbColorPickerPopUp__body"},_react["default"].createElement("div",{className:"tvbColorPickerPopUp__controls"},_react["default"].createElement("div",{className:this.props.disableAlpha?"tvbColorPickerPopUp__color-disableAlpha":"tvbColorPickerPopUp__color"},_react["default"].createElement("div",{className:this.props.disableAlpha?"tvbColorPickerPopUp__swatch-disableAlpha":"tvbColorPickerPopUp__swatch"},_react["default"].createElement("div",{className:"tvbColorPickerPopUp__active"}),_react["default"].createElement(_common.Checkboard,null))),_react["default"].createElement("div",{className:"tvbColorPickerPopUp__toggles"},_react["default"].createElement("div",{className:this.props.disableAlpha?"tvbColorPickerPopUp__hue-disableAlpha":"tvbColorPickerPopUp__hue"},_react["default"].createElement(_common.Hue,_extends({style:styles.Hue},this.props,{pointer:_ChromePointer["default"],onChange:this.handleChange}))),_react["default"].createElement("div",{className:this.props.disableAlpha?"tvbColorPickerPopUp__alpha-disableAlpha":"tvbColorPickerPopUp__alpha"},_react["default"].createElement(_common.Alpha,_extends({style:styles.Alpha},this.props,{pointer:_ChromePointer["default"],onChange:this.handleChange}))))),_react["default"].createElement(_ChromeFields["default"],_extends({},this.props,{onChange:this.handleChange,disableAlpha:this.props.disableAlpha})),_react["default"].createElement("div",{className:"tvbColorPickerPopUp__swatches"},swatches)))}}]);return CustomColorPickerUI}(_react.Component);CustomColorPickerUI.defaultProps={colors:["#4D4D4D","#999999","#FFFFFF","#F44E3B","#FE9200","#FCDC00","#DBDF00","#A4DD00","#68CCCA","#73D8FF","#AEA1FF","#FDA1FF","#333333","#808080","#cccccc","#D33115","#E27300","#FCC400","#B0BC00","#68BC00","#16A5A5","#009CE0","#7B64FF","#FA28FF","#0F1419","#666666","#B3B3B3","#9F0500","#C45100","#FB9E00","#808900","#194D33","#0C797D","#0062B1","#653294","#AB149E"]};CustomColorPickerUI.propTypes={color:_propTypes["default"].oneOfType([_propTypes["default"].string,_propTypes["default"].object]),onChangeComplete:_propTypes["default"].func,onChange:_propTypes["default"].func};var CustomColorPicker=(0,_common.ColorWrap)(CustomColorPickerUI);exports.CustomColorPicker=CustomColorPicker},5776:function(module,exports,__webpack_require__){module.exports=__webpack_require__(18)(316)},5777:function(module,exports,__webpack_require__){module.exports=__webpack_require__(18)(2412)},5778:function(module,exports,__webpack_require__){module.exports=__webpack_require__(18)(2568)},5779:function(module,exports,__webpack_require__){module.exports=__webpack_require__(18)(2569)},5780:function(module,exports,__webpack_require__){module.exports=__webpack_require__(18)(2570)},5781:function(module,exports,__webpack_require__){module.exports=__webpack_require__(18)(312)},5782:function(module,exports,__webpack_require__){module.exports=__webpack_require__(18)(2410)},5783:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Agg=Agg;var _propTypes=_interopRequireDefault(__webpack_require__(17));var _react=_interopRequireDefault(__webpack_require__(0));var _agg_to_component=__webpack_require__(5784);var _unsupported_agg=__webpack_require__(5808);var _temporary_unsupported_agg=__webpack_require__(5809);var _check_ui_restrictions=__webpack_require__(502);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function Agg(props){var model=props.model,uiRestrictions=props.uiRestrictions;var Component=_agg_to_component.aggToComponent[model.type];if(!Component){Component=_unsupported_agg.UnsupportedAgg}else if(!(0,_check_ui_restrictions.isMetricEnabled)(model.type,uiRestrictions)){Component=_temporary_unsupported_agg.TemporaryUnsupportedAgg}var style=_objectSpread({cursor:"default"},props.style);return _react["default"].createElement("div",{className:props.className,style:style},_react["default"].createElement(Component,{fields:props.fields,disableDelete:props.disableDelete,model:props.model,onAdd:props.onAdd,onChange:props.onChange,onDelete:props.onDelete,panel:props.panel,series:props.series,siblings:props.siblings,uiRestrictions:props.uiRestrictions,dragHandleProps:props.dragHandleProps}))}Agg.propTypes={disableDelete:_propTypes["default"].bool,fields:_propTypes["default"].object,model:_propTypes["default"].object,onAdd:_propTypes["default"].func,onChange:_propTypes["default"].func,onDelete:_propTypes["default"].func,panel:_propTypes["default"].object,series:_propTypes["default"].object,siblings:_propTypes["default"].array,uiRestrictions:_propTypes["default"].object,dragHandleProps:_propTypes["default"].object}},5784:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.aggToComponent=void 0;var _moving_average=__webpack_require__(5785);var _derivative=__webpack_require__(5789);var _calculation=__webpack_require__(5790);var _std_agg=__webpack_require__(5791);var _percentile=__webpack_require__(5792);var _cumulative_sum=__webpack_require__(5794);var _std_deviation=__webpack_require__(5795);var _std_sibling=__webpack_require__(5796);var _series_agg=__webpack_require__(5797);var _serial_diff=__webpack_require__(5798);var _positive_only=__webpack_require__(5799);var _filter_ratio=__webpack_require__(5800);var _percentile_rank=__webpack_require__(5801);var _static=__webpack_require__(5805);var _math=__webpack_require__(5806);var _top_hit=__webpack_require__(5807);var aggToComponent={count:_std_agg.StandardAgg,avg:_std_agg.StandardAgg,max:_std_agg.StandardAgg,min:_std_agg.StandardAgg,sum:_std_agg.StandardAgg,std_deviation:_std_deviation.StandardDeviationAgg,sum_of_squares:_std_agg.StandardAgg,variance:_std_agg.StandardAgg,avg_bucket:_std_sibling.StandardSiblingAgg,max_bucket:_std_sibling.StandardSiblingAgg,min_bucket:_std_sibling.StandardSiblingAgg,sum_bucket:_std_sibling.StandardSiblingAgg,variance_bucket:_std_sibling.StandardSiblingAgg,sum_of_squares_bucket:_std_sibling.StandardSiblingAgg,std_deviation_bucket:_std_sibling.StandardSiblingAgg,percentile:_percentile.PercentileAgg,percentile_rank:_percentile_rank.PercentileRankAgg,cardinality:_std_agg.StandardAgg,value_count:_std_agg.StandardAgg,calculation:_calculation.CalculationAgg,cumulative_sum:_cumulative_sum.CumulativeSumAgg,moving_average:_moving_average.MovingAverageAgg,derivative:_derivative.DerivativeAgg,series_agg:_series_agg.SeriesAgg,serial_diff:_serial_diff.SerialDiffAgg,filter_ratio:_filter_ratio.FilterRatioAgg,positive_only:_positive_only.PositiveOnlyAgg,static:_static.Static,math:_math.MathAgg,top_hit:_top_hit.TopHitAgg};exports.aggToComponent=aggToComponent},5785:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.MovingAverageAgg=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(17));var _react=_interopRequireWildcard(__webpack_require__(0));var _agg_row=__webpack_require__(104);var _agg_select=__webpack_require__(120);var _metric_select=__webpack_require__(288);var _create_change_handler=__webpack_require__(121);var _create_select_handler=__webpack_require__(50);var _create_number_handler=__webpack_require__(1991);var _eui=__webpack_require__(2);var _i18n=__webpack_require__(5);var _model_options=__webpack_require__(5788);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var DEFAULTS={model_type:_model_options.MODEL_TYPES.UNWEIGHTED,alpha:.3,beta:.1,gamma:.3,period:1,multiplicative:true,window:5};var shouldShowHint=function shouldShowHint(_ref){var type=_ref.model_type,window=_ref.window,period=_ref.period;return type===_model_options.MODEL_TYPES.WEIGHTED_EXPONENTIAL_TRIPLE&&period*2>window};var MovingAverageAgg=function MovingAverageAgg(props){var siblings=props.siblings;var model=_objectSpread({},DEFAULTS,props.model);var modelOptions=[{label:_i18n.i18n.translate("tsvb.movingAverage.modelOptions.simpleLabel",{defaultMessage:"Simple"}),value:_model_options.MODEL_TYPES.UNWEIGHTED},{label:_i18n.i18n.translate("tsvb.movingAverage.modelOptions.linearLabel",{defaultMessage:"Linear"}),value:_model_options.MODEL_TYPES.WEIGHTED_LINEAR},{label:_i18n.i18n.translate("tsvb.movingAverage.modelOptions.exponentiallyWeightedLabel",{defaultMessage:"Exponentially Weighted"}),value:_model_options.MODEL_TYPES.WEIGHTED_EXPONENTIAL},{label:_i18n.i18n.translate("tsvb.movingAverage.modelOptions.holtLinearLabel",{defaultMessage:"Holt-Linear"}),value:_model_options.MODEL_TYPES.WEIGHTED_EXPONENTIAL_DOUBLE},{label:_i18n.i18n.translate("tsvb.movingAverage.modelOptions.holtWintersLabel",{defaultMessage:"Holt-Winters"}),value:_model_options.MODEL_TYPES.WEIGHTED_EXPONENTIAL_TRIPLE}];var handleChange=(0,_create_change_handler.createChangeHandler)(props.onChange,model);var handleSelectChange=(0,_create_select_handler.createSelectHandler)(handleChange);var handleNumberChange=(0,_create_number_handler.createNumberHandler)(handleChange);var htmlId=(0,_eui.htmlIdGenerator)();var selectedModelOption=modelOptions.find(function(_ref2){var value=_ref2.value;return model.model_type===value});var multiplicativeOptions=[{label:_i18n.i18n.translate("tsvb.movingAverage.multiplicativeOptions.true",{defaultMessage:"True"}),value:true},{label:_i18n.i18n.translate("tsvb.movingAverage.multiplicativeOptions.false",{defaultMessage:"False"}),value:false}];var selectedMultiplicative=multiplicativeOptions.find(function(_ref3){var value=_ref3.value;return model.multiplicative===value});return _react["default"].createElement(_agg_row.AggRow,{disableDelete:props.disableDelete,model:props.model,onAdd:props.onAdd,onDelete:props.onDelete,siblings:props.siblings,dragHandleProps:props.dragHandleProps},_react["default"].createElement(_eui.EuiFlexGroup,{gutterSize:"s"},_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiFormLabel,{htmlFor:htmlId("aggregation")},_i18n.i18n.translate("tsvb.movingAverage.aggregationLabel",{defaultMessage:"Aggregation"})),_react["default"].createElement(_agg_select.AggSelect,{id:htmlId("aggregation"),panelType:props.panel.type,siblings:props.siblings,value:model.type,onChange:handleSelectChange("type")})),_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiFormRow,{id:htmlId("metric"),label:_i18n.i18n.translate("tsvb.movingAverage.metricLabel",{defaultMessage:"Metric"})},_react["default"].createElement(_metric_select.MetricSelect,{onChange:handleSelectChange("field"),metrics:siblings,metric:model,value:model.field})))),_react["default"].createElement(_eui.EuiSpacer,{size:"m"}),_react["default"].createElement(_eui.EuiFlexGroup,{gutterSize:"s"},_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiFormRow,{id:htmlId("model_type"),label:_i18n.i18n.translate("tsvb.movingAverage.modelLabel",{defaultMessage:"Model"})},_react["default"].createElement(_eui.EuiComboBox,{isClearable:false,placeholder:_i18n.i18n.translate("tsvb.movingAverage.model.selectPlaceholder",{defaultMessage:"Select"}),options:modelOptions,selectedOptions:selectedModelOption?[selectedModelOption]:[],onChange:handleSelectChange("model_type"),singleSelection:{asPlainText:true}}))),_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiFormRow,{id:htmlId("windowSize"),label:_i18n.i18n.translate("tsvb.movingAverage.windowSizeLabel",{defaultMessage:"Window Size"}),helpText:shouldShowHint(model)&&_i18n.i18n.translate("tsvb.movingAverage.windowSizeHint",{defaultMessage:"Window must always be at least twice the size of your period"})},_react["default"].createElement("input",{className:"tvbAgg__input",type:"text",onChange:handleNumberChange("window"),value:model.window})))),(model.model_type===_model_options.MODEL_TYPES.WEIGHTED_EXPONENTIAL||model.model_type===_model_options.MODEL_TYPES.WEIGHTED_EXPONENTIAL_DOUBLE||model.model_type===_model_options.MODEL_TYPES.WEIGHTED_EXPONENTIAL_TRIPLE)&&_react["default"].createElement(_react.Fragment,null,_react["default"].createElement(_eui.EuiSpacer,{size:"m"}),_react["default"].createElement(_eui.EuiFlexGroup,{gutterSize:"s"},_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiFormRow,{id:htmlId("alpha"),label:_i18n.i18n.translate("tsvb.movingAverage.alpha",{defaultMessage:"Alpha"})},_react["default"].createElement(_eui.EuiFieldNumber,{step:.1,onChange:handleNumberChange("alpha"),value:model.alpha}))),(model.model_type===_model_options.MODEL_TYPES.WEIGHTED_EXPONENTIAL_DOUBLE||model.model_type===_model_options.MODEL_TYPES.WEIGHTED_EXPONENTIAL_TRIPLE)&&_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiFormRow,{id:htmlId("beta"),label:_i18n.i18n.translate("tsvb.movingAverage.beta",{defaultMessage:"Beta"})},_react["default"].createElement(_eui.EuiFieldNumber,{step:.1,onChange:handleNumberChange("beta"),value:model.beta}))),model.model_type===_model_options.MODEL_TYPES.WEIGHTED_EXPONENTIAL_TRIPLE&&_react["default"].createElement(_react.Fragment,null,_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiFormRow,{id:htmlId("gamma"),label:_i18n.i18n.translate("tsvb.movingAverage.gamma",{defaultMessage:"Gamma"})},_react["default"].createElement(_eui.EuiFieldNumber,{step:.1,onChange:handleNumberChange("gamma"),value:model.gamma}))),_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiFormRow,{id:htmlId("period"),label:_i18n.i18n.translate("tsvb.movingAverage.period",{defaultMessage:"Period"})},_react["default"].createElement(_eui.EuiFieldNumber,{step:1,onChange:handleNumberChange("period"),value:model.period}))),_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiFormRow,{id:htmlId("multiplicative"),label:_i18n.i18n.translate("tsvb.movingAverage.multiplicative",{defaultMessage:"Multiplicative"})},_react["default"].createElement(_eui.EuiComboBox,{placeholder:_i18n.i18n.translate("tsvb.movingAverage.multiplicative.selectPlaceholder",{defaultMessage:"Select"}),options:multiplicativeOptions,selectedOptions:selectedMultiplicative?[selectedMultiplicative]:[],onChange:handleSelectChange("multiplicative"),singleSelection:{asPlainText:true}})))))))};exports.MovingAverageAgg=MovingAverageAgg;MovingAverageAgg.propTypes={disableDelete:_propTypes["default"].bool,fields:_propTypes["default"].object,model:_propTypes["default"].object,onAdd:_propTypes["default"].func,onChange:_propTypes["default"].func,onDelete:_propTypes["default"].func,panel:_propTypes["default"].object,series:_propTypes["default"].object,siblings:_propTypes["default"].array}},5786:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.calculateSiblings=void 0;var _lodash=_interopRequireDefault(__webpack_require__(1));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getAncestors(siblings,item){var ancestors=item.id&&[item.id]||[];siblings.forEach(function(sib){if(_lodash["default"].includes(ancestors,sib.field)){ancestors.push(sib.id)}});return ancestors}var calculateSiblings=function calculateSiblings(siblings,model){var ancestors=getAncestors(siblings,model);return siblings.filter(function(row){return!_lodash["default"].includes(ancestors,row.id)})};exports.calculateSiblings=calculateSiblings},5787:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.toPercentileNumber=void 0;var percentileNumberTest=/\d+\.\d+/;var toPercentileNumber=function toPercentileNumber(value){return percentileNumberTest.test("".concat(value))?value:"".concat(value,".0")};exports.toPercentileNumber=toPercentileNumber},5788:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.MODEL_TYPES=void 0;var MODEL_TYPES={UNWEIGHTED:"simple",WEIGHTED_EXPONENTIAL:"ewma",WEIGHTED_EXPONENTIAL_DOUBLE:"holt",WEIGHTED_EXPONENTIAL_TRIPLE:"holt_winters",WEIGHTED_LINEAR:"linear"};exports.MODEL_TYPES=MODEL_TYPES},5789:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DerivativeAgg=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(17));var _react=_interopRequireDefault(__webpack_require__(0));var _agg_select=__webpack_require__(120);var _metric_select=__webpack_require__(288);var _agg_row=__webpack_require__(104);var _create_change_handler=__webpack_require__(121);var _create_select_handler=__webpack_require__(50);var _create_text_handler=__webpack_require__(64);var _eui=__webpack_require__(2);var _react2=__webpack_require__(10);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var DerivativeAgg=function DerivativeAgg(props){var siblings=props.siblings;var defaults={unit:""};var model=_objectSpread({},defaults,props.model);var handleChange=(0,_create_change_handler.createChangeHandler)(props.onChange,model);var handleSelectChange=(0,_create_select_handler.createSelectHandler)(handleChange);var handleTextChange=(0,_create_text_handler.createTextHandler)(handleChange);var htmlId=(0,_eui.htmlIdGenerator)();return _react["default"].createElement(_agg_row.AggRow,{disableDelete:props.disableDelete,model:props.model,onAdd:props.onAdd,onDelete:props.onDelete,siblings:props.siblings,dragHandleProps:props.dragHandleProps},_react["default"].createElement(_eui.EuiFlexGroup,{gutterSize:"s"},_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiFormLabel,{htmlFor:htmlId("aggregation")},_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.derivative.aggregationLabel",defaultMessage:"Aggregation"})),_react["default"].createElement(_agg_select.AggSelect,{id:htmlId("aggregation"),panelType:props.panel.type,siblings:props.siblings,value:model.type,onChange:handleSelectChange("type"),fullWidth:true})),_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiFormRow,{id:htmlId("metric"),label:_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.derivative.metricLabel",defaultMessage:"Metric"}),fullWidth:true},_react["default"].createElement(_metric_select.MetricSelect,{onChange:handleSelectChange("field"),metrics:siblings,metric:model,value:model.field,fullWidth:true}))),_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiFormRow,{id:htmlId("units"),label:_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.derivative.unitsLabel",defaultMessage:"Units (1s, 1m, etc)",description:"1s and 1m are required values and must not be translated."}),fullWidth:true},_react["default"].createElement(_eui.EuiFieldText,{onChange:handleTextChange("unit"),value:model.unit,fullWidth:true})))))};exports.DerivativeAgg=DerivativeAgg;DerivativeAgg.propTypes={disableDelete:_propTypes["default"].bool,fields:_propTypes["default"].object,model:_propTypes["default"].object,onAdd:_propTypes["default"].func,onChange:_propTypes["default"].func,onDelete:_propTypes["default"].func,panel:_propTypes["default"].object,series:_propTypes["default"].object,siblings:_propTypes["default"].array}},5790:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.CalculationAgg=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(17));var _react=_interopRequireWildcard(__webpack_require__(0));var _lodash=_interopRequireDefault(__webpack_require__(1));var _uuid=_interopRequireDefault(__webpack_require__(105));var _agg_row=__webpack_require__(104);var _agg_select=__webpack_require__(120);var _create_change_handler=__webpack_require__(121);var _create_select_handler=__webpack_require__(50);var _create_text_handler=__webpack_require__(64);var _vars=__webpack_require__(1993);var _react2=__webpack_require__(10);var _eui=__webpack_require__(2);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var CalculationAgg=function(_Component){_inherits(CalculationAgg,_Component);function CalculationAgg(){_classCallCheck(this,CalculationAgg);return _possibleConstructorReturn(this,_getPrototypeOf(CalculationAgg).apply(this,arguments))}_createClass(CalculationAgg,[{key:"componentWillMount",value:function componentWillMount(){if(!this.props.model.variables){this.props.onChange(_lodash["default"].assign({},this.props.model,{variables:[{id:_uuid["default"].v1()}]}))}}},{key:"render",value:function render(){var siblings=this.props.siblings;var defaults={script:""};var model=_objectSpread({},defaults,this.props.model);var handleChange=(0,_create_change_handler.createChangeHandler)(this.props.onChange,model);var handleSelectChange=(0,_create_select_handler.createSelectHandler)(handleChange);var handleTextChange=(0,_create_text_handler.createTextHandler)(handleChange);var htmlId=(0,_eui.htmlIdGenerator)();return _react["default"].createElement(_agg_row.AggRow,{disableDelete:this.props.disableDelete,model:this.props.model,onAdd:this.props.onAdd,onDelete:this.props.onDelete,siblings:this.props.siblings,dragHandleProps:this.props.dragHandleProps},_react["default"].createElement(_eui.EuiFlexGroup,{direction:"column",gutterSize:"l"},_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiFormLabel,{htmlFor:htmlId("aggregation")},_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.calculation.aggregationLabel",defaultMessage:"Aggregation"})),_react["default"].createElement(_agg_select.AggSelect,{id:htmlId("aggregation"),panelType:this.props.panel.type,siblings:this.props.siblings,value:model.type,onChange:handleSelectChange("type")})),_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiFormLabel,{htmlFor:htmlId("variables")},_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.calculation.variablesLabel",defaultMessage:"Variables"})),_react["default"].createElement(_vars.CalculationVars,{id:htmlId("variables"),metrics:siblings,onChange:handleChange,name:"variables",model:model})),_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiFormRow,{id:htmlId("painless"),label:_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.calculation.painlessScriptLabel",defaultMessage:"Painless Script"}),fullWidth:true,helpText:_react["default"].createElement("div",null,_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.calculation.painlessScriptDescription",defaultMessage:"Variables are keys on the {params} object, i.e. {paramsName}. To access the bucket interval (in milliseconds) use {paramsInterval}.",values:{params:_react["default"].createElement(_eui.EuiCode,null,"params"),paramsName:_react["default"].createElement(_eui.EuiCode,null,"params.<name>"),paramsInterval:_react["default"].createElement(_eui.EuiCode,null,"params._interval")}}))},_react["default"].createElement(_eui.EuiTextArea,{onChange:handleTextChange("script"),value:model.script,fullWidth:true})))))}}]);return CalculationAgg}(_react.Component);exports.CalculationAgg=CalculationAgg;CalculationAgg.propTypes={disableDelete:_propTypes["default"].bool,fields:_propTypes["default"].object,model:_propTypes["default"].object,onAdd:_propTypes["default"].func,onChange:_propTypes["default"].func,onDelete:_propTypes["default"].func,panel:_propTypes["default"].object,series:_propTypes["default"].object,siblings:_propTypes["default"].array}},5791:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.StandardAgg=StandardAgg;var _propTypes=_interopRequireDefault(__webpack_require__(17));var _react=_interopRequireDefault(__webpack_require__(0));var _agg_select=__webpack_require__(120);var _field_select=__webpack_require__(199);var _agg_row=__webpack_require__(104);var _create_change_handler=__webpack_require__(121);var _create_select_handler=__webpack_require__(50);var _eui=__webpack_require__(2);var _react2=__webpack_require__(10);var _es_types=__webpack_require__(290);var _metric_types=__webpack_require__(665);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function StandardAgg(props){var model=props.model,panel=props.panel,series=props.series,fields=props.fields,uiRestrictions=props.uiRestrictions;var handleChange=(0,_create_change_handler.createChangeHandler)(props.onChange,model);var handleSelectChange=(0,_create_select_handler.createSelectHandler)(handleChange);var restrictFields=model.type===_metric_types.METRIC_TYPES.CARDINALITY?[]:[_es_types.ES_TYPES.NUMBER];var indexPattern=series.override_index_pattern&&series.series_index_pattern||panel.index_pattern;var htmlId=(0,_eui.htmlIdGenerator)();return _react["default"].createElement(_agg_row.AggRow,{disableDelete:props.disableDelete,model:props.model,onAdd:props.onAdd,onDelete:props.onDelete,siblings:props.siblings,dragHandleProps:props.dragHandleProps},_react["default"].createElement(_eui.EuiFlexGroup,{gutterSize:"s"},_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiFormLabel,{htmlFor:htmlId("aggregation")},_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.stdAgg.aggregationLabel",defaultMessage:"Aggregation"})),_react["default"].createElement(_agg_select.AggSelect,{id:htmlId("aggregation"),panelType:props.panel.type,siblings:props.siblings,value:model.type,uiRestrictions:uiRestrictions,onChange:handleSelectChange("type"),fullWidth:true})),model.type!=="count"?_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiFormRow,{id:htmlId("field"),label:_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.stdAgg.fieldLabel",defaultMessage:"Field"}),fullWidth:true},_react["default"].createElement(_field_select.FieldSelect,{fields:fields,type:model.type,restrict:restrictFields,indexPattern:indexPattern,value:model.field,onChange:handleSelectChange("field"),uiRestrictions:uiRestrictions,fullWidth:true}))):null))}StandardAgg.propTypes={disableDelete:_propTypes["default"].bool,fields:_propTypes["default"].object,model:_propTypes["default"].object,onAdd:_propTypes["default"].func,onChange:_propTypes["default"].func,onDelete:_propTypes["default"].func,panel:_propTypes["default"].object,series:_propTypes["default"].object,siblings:_propTypes["default"].array,uiRestrictions:_propTypes["default"].object}},5792:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PercentileAgg=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(17));var _react=_interopRequireWildcard(__webpack_require__(0));var _lodash=_interopRequireDefault(__webpack_require__(1));var _agg_select=__webpack_require__(120);var _field_select=__webpack_require__(199);var _agg_row=__webpack_require__(104);var _create_change_handler=__webpack_require__(121);var _create_select_handler=__webpack_require__(50);var _eui=__webpack_require__(2);var _react2=__webpack_require__(10);var _es_types=__webpack_require__(290);var _percentile_ui=__webpack_require__(5793);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var RESTRICT_FIELDS=[_es_types.ES_TYPES.NUMBER];var PercentileAgg=function(_Component){_inherits(PercentileAgg,_Component);function PercentileAgg(){_classCallCheck(this,PercentileAgg);return _possibleConstructorReturn(this,_getPrototypeOf(PercentileAgg).apply(this,arguments))}_createClass(PercentileAgg,[{key:"componentWillMount",value:function componentWillMount(){if(!this.props.model.percentiles){this.props.onChange(_lodash["default"].assign({},this.props.model,{percentiles:[(0,_percentile_ui.newPercentile)({value:50})]}))}}},{key:"render",value:function render(){var _this$props=this.props,series=_this$props.series,model=_this$props.model,panel=_this$props.panel,fields=_this$props.fields;var handleChange=(0,_create_change_handler.createChangeHandler)(this.props.onChange,model);var handleSelectChange=(0,_create_select_handler.createSelectHandler)(handleChange);var indexPattern=series.override_index_pattern&&series.series_index_pattern||panel.index_pattern;var htmlId=(0,_eui.htmlIdGenerator)();return _react["default"].createElement(_agg_row.AggRow,{disableDelete:this.props.disableDelete,model:this.props.model,onAdd:this.props.onAdd,onDelete:this.props.onDelete,siblings:this.props.siblings,dragHandleProps:this.props.dragHandleProps},_react["default"].createElement(_eui.EuiFlexGroup,{gutterSize:"s"},_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiFormLabel,{htmlFor:htmlId("aggregation")},_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.percentile.aggregationLabel",defaultMessage:"Aggregation"})),_react["default"].createElement(_agg_select.AggSelect,{id:htmlId("aggregation"),panelType:this.props.panel.type,siblings:this.props.siblings,value:model.type,onChange:handleSelectChange("type")})),_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiFormRow,{id:htmlId("field"),label:_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.percentile.fieldLabel",defaultMessage:"Field"})},_react["default"].createElement(_field_select.FieldSelect,{fields:fields,type:model.type,restrict:RESTRICT_FIELDS,indexPattern:indexPattern,value:model.field,onChange:handleSelectChange("field")})))),_react["default"].createElement(_eui.EuiSpacer,{size:"m"}),_react["default"].createElement(_percentile_ui.Percentiles,{onChange:handleChange,name:"percentiles",model:model,panel:panel}))}}]);return PercentileAgg}(_react.Component);exports.PercentileAgg=PercentileAgg;PercentileAgg.propTypes={disableDelete:_propTypes["default"].bool,fields:_propTypes["default"].object,model:_propTypes["default"].object,onAdd:_propTypes["default"].func,onChange:_propTypes["default"].func,onDelete:_propTypes["default"].func,panel:_propTypes["default"].object,series:_propTypes["default"].object,siblings:_propTypes["default"].array}},5793:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Percentiles=exports.newPercentile=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(17));var _react=_interopRequireWildcard(__webpack_require__(0));var _lodash=_interopRequireDefault(__webpack_require__(1));var _collection_actions=__webpack_require__(289);var _add_delete_buttons=__webpack_require__(163);var _uuid=_interopRequireDefault(__webpack_require__(105));var _eui=__webpack_require__(2);var _react2=__webpack_require__(10);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var newPercentile=function newPercentile(opts){return _lodash["default"].assign({id:_uuid["default"].v1(),mode:"line",shade:.2},opts)};exports.newPercentile=newPercentile;var PercentilesUi=function(_Component){_inherits(PercentilesUi,_Component);function PercentilesUi(){var _getPrototypeOf2;var _this;_classCallCheck(this,PercentilesUi);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(PercentilesUi)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"renderRow",function(row,i,items){var defaults={value:"",percentile:"",shade:""};var model=_objectSpread({},defaults,row);var _this$props=_this.props,intl=_this$props.intl,panel=_this$props.panel;var percentileFieldNumber=_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiFieldNumber,{"aria-label":intl.formatMessage({id:"tsvb.percentile.percentileAriaLabel",defaultMessage:"Percentile"}),placeholder:0,max:100,min:0,step:1,onChange:_this.handleTextChange(model,"value"),value:model.value===""?"":Number(model.value)}));if(panel.type==="table"){return percentileFieldNumber}var handleAdd=_collection_actions.collectionActions.handleAdd.bind(null,_this.props,newPercentile);var handleDelete=_collection_actions.collectionActions.handleDelete.bind(null,_this.props,model);var modeOptions=[{label:intl.formatMessage({id:"tsvb.percentile.modeOptions.lineLabel",defaultMessage:"Line"}),value:"line"},{label:intl.formatMessage({id:"tsvb.percentile.modeOptions.bandLabel",defaultMessage:"Band"}),value:"band"}];var optionsStyle={};if(model.mode==="line"){optionsStyle.display="none"}var labelStyle={marginBottom:0};var htmlId=(0,_eui.htmlIdGenerator)(model.id);var selectedModeOption=modeOptions.find(function(option){return model.mode===option.value});return _react["default"].createElement(_eui.EuiFlexItem,{key:model.id},_react["default"].createElement(_eui.EuiFlexGroup,{alignItems:"center",responsive:false,gutterSize:"s"},percentileFieldNumber,_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiFormLabel,{style:labelStyle,htmlFor:htmlId("mode")},_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.percentile.modeLabel",defaultMessage:"Mode:"}))),_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiComboBox,{isClearable:false,id:htmlId("mode"),options:modeOptions,selectedOptions:selectedModeOption?[selectedModeOption]:[],onChange:_this.handleTextChange(model,"mode"),singleSelection:{asPlainText:true}})),_react["default"].createElement(_eui.EuiFlexItem,{style:optionsStyle,grow:false},_react["default"].createElement(_eui.EuiFormLabel,{style:labelStyle,htmlFor:htmlId("fillTo")},_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.percentile.fillToLabel",defaultMessage:"Fill to:"}))),_react["default"].createElement(_eui.EuiFlexItem,{style:optionsStyle,grow:false},_react["default"].createElement(_eui.EuiFieldNumber,{id:htmlId("fillTo"),step:1,onChange:_this.handleTextChange(model,"percentile"),value:Number(model.percentile)})),_react["default"].createElement(_eui.EuiFlexItem,{style:optionsStyle,grow:false},_react["default"].createElement(_eui.EuiFormLabel,{style:labelStyle,htmlFor:htmlId("shade")},_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.percentile.shadeLabel",defaultMessage:"Shade (0 to 1):"}))),_react["default"].createElement(_eui.EuiFlexItem,{style:optionsStyle,grow:false},_react["default"].createElement(_eui.EuiFieldNumber,{id:htmlId("shade"),style:optionsStyle,step:.1,onChange:_this.handleTextChange(model,"shade"),value:Number(model.shade)})),_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_add_delete_buttons.AddDeleteButtons,{onAdd:handleAdd,onDelete:handleDelete,disableDelete:items.length<2,responsive:false}))))});return _this}_createClass(PercentilesUi,[{key:"handleTextChange",value:function handleTextChange(item,name){var _this2=this;return function(e){var handleChange=_collection_actions.collectionActions.handleChange.bind(null,_this2.props);var part={};part[name]=_lodash["default"].get(e,"[0].value",_lodash["default"].get(e,"target.value"));handleChange(_lodash["default"].assign({},item,part))}}},{key:"render",value:function render(){var _this$props2=this.props,model=_this$props2.model,name=_this$props2.name,panel=_this$props2.panel;if(!model[name])return _react["default"].createElement("div",null);var rows;if(panel.type==="table"){rows=this.renderRow(_lodash["default"].last(model[name]))}else{rows=model[name].map(this.renderRow)}return _react["default"].createElement(_eui.EuiFlexGroup,{direction:"column",gutterSize:"s"},rows)}}]);return PercentilesUi}(_react.Component);PercentilesUi.defaultProps={name:"percentile"};PercentilesUi.propTypes={name:_propTypes["default"].string,model:_propTypes["default"].object,panel:_propTypes["default"].object,onChange:_propTypes["default"].func};var Percentiles=(0,_react2.injectI18n)(PercentilesUi);exports.Percentiles=Percentiles},5794:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.CumulativeSumAgg=CumulativeSumAgg;var _propTypes=_interopRequireDefault(__webpack_require__(17));var _react=_interopRequireDefault(__webpack_require__(0));var _agg_row=__webpack_require__(104);var _agg_select=__webpack_require__(120);var _metric_select=__webpack_require__(288);var _create_change_handler=__webpack_require__(121);var _create_select_handler=__webpack_require__(50);var _react2=__webpack_require__(10);var _eui=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function CumulativeSumAgg(props){var model=props.model,siblings=props.siblings;var htmlId=(0,_eui.htmlIdGenerator)();var handleChange=(0,_create_change_handler.createChangeHandler)(props.onChange,model);var handleSelectChange=(0,_create_select_handler.createSelectHandler)(handleChange);return _react["default"].createElement(_agg_row.AggRow,{disableDelete:props.disableDelete,model:props.model,onAdd:props.onAdd,onDelete:props.onDelete,siblings:props.siblings,dragHandleProps:props.dragHandleProps},_react["default"].createElement(_eui.EuiFlexGroup,{gutterSize:"s"},_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiFormLabel,{htmlFor:htmlId("aggregation")},_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.cumulativeSum.aggregationLabel",defaultMessage:"Aggregation"})),_react["default"].createElement(_agg_select.AggSelect,{id:htmlId("aggregation"),panelType:props.panel.type,siblings:props.siblings,value:model.type,onChange:handleSelectChange("type")})),_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiFormRow,{id:htmlId("metric"),label:_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.cumulativeSum.metricLabel",defaultMessage:"Metric"})},_react["default"].createElement(_metric_select.MetricSelect,{onChange:handleSelectChange("field"),metrics:siblings,metric:model,value:model.field})))))}CumulativeSumAgg.propTypes={disableDelete:_propTypes["default"].bool,fields:_propTypes["default"].object,model:_propTypes["default"].object,onAdd:_propTypes["default"].func,onChange:_propTypes["default"].func,onDelete:_propTypes["default"].func,panel:_propTypes["default"].object,series:_propTypes["default"].object,siblings:_propTypes["default"].array}},5795:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.StandardDeviationAgg=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(17));var _react=_interopRequireDefault(__webpack_require__(0));var _agg_select=__webpack_require__(120);var _field_select=__webpack_require__(199);var _agg_row=__webpack_require__(104);var _create_change_handler=__webpack_require__(121);var _create_select_handler=__webpack_require__(50);var _create_text_handler=__webpack_require__(64);var _eui=__webpack_require__(2);var _react2=__webpack_require__(10);var _es_types=__webpack_require__(290);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var RESTRICT_FIELDS=[_es_types.ES_TYPES.NUMBER];var StandardDeviationAggUi=function StandardDeviationAggUi(props){var series=props.series,panel=props.panel,fields=props.fields,intl=props.intl;var defaults={sigma:""};var model=_objectSpread({},defaults,props.model);var modeOptions=[{label:intl.formatMessage({id:"tsvb.stdDeviation.modeOptions.rawLabel",defaultMessage:"Raw"}),value:"raw"},{label:intl.formatMessage({id:"tsvb.stdDeviation.modeOptions.upperBoundLabel",defaultMessage:"Upper Bound"}),value:"upper"},{label:intl.formatMessage({id:"tsvb.stdDeviation.modeOptions.lowerBoundLabel",defaultMessage:"Lower Bound"}),value:"lower"}];if(panel.type!=="table"){modeOptions.push({label:intl.formatMessage({id:"tsvb.stdDeviation.modeOptions.boundsBandLabel",defaultMessage:"Bounds Band"}),value:"band"})}var handleChange=(0,_create_change_handler.createChangeHandler)(props.onChange,model);var handleSelectChange=(0,_create_select_handler.createSelectHandler)(handleChange);var handleTextChange=(0,_create_text_handler.createTextHandler)(handleChange);var indexPattern=series.override_index_pattern&&series.series_index_pattern||panel.index_pattern;var htmlId=(0,_eui.htmlIdGenerator)();var selectedModeOption=modeOptions.find(function(option){return model.mode===option.value});return _react["default"].createElement(_agg_row.AggRow,{disableDelete:props.disableDelete,model:props.model,onAdd:props.onAdd,onDelete:props.onDelete,siblings:props.siblings,dragHandleProps:props.dragHandleProps},_react["default"].createElement(_eui.EuiFlexGroup,{gutterSize:"s"},_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiFormLabel,{htmlFor:htmlId("aggregation")},_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.stdDeviation.aggregationLabel",defaultMessage:"Aggregation"})),_react["default"].createElement(_agg_select.AggSelect,{id:htmlId("aggregation"),panelType:props.panel.type,siblings:props.siblings,value:model.type,onChange:handleSelectChange("type")})),_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiFormRow,{id:htmlId("field"),label:_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.stdDeviation.fieldLabel",defaultMessage:"Field"})},_react["default"].createElement(_field_select.FieldSelect,{fields:fields,type:model.type,restrict:RESTRICT_FIELDS,indexPattern:indexPattern,value:model.field,onChange:handleSelectChange("field")}))),_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiFormRow,{id:htmlId("sigma"),label:_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.stdDeviation.sigmaLabel",defaultMessage:"Sigma"})},_react["default"].createElement(_eui.EuiFieldText,{value:model.sigma,onChange:handleTextChange("sigma")}))),_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiFormRow,{id:htmlId("mode"),label:_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.stdDeviation.modeLabel",defaultMessage:"Mode"})},_react["default"].createElement(_eui.EuiComboBox,{options:modeOptions,selectedOptions:selectedModeOption?[selectedModeOption]:[],onChange:handleSelectChange("mode"),singleSelection:{asPlainText:true}})))))};StandardDeviationAggUi.propTypes={disableDelete:_propTypes["default"].bool,fields:_propTypes["default"].object,model:_propTypes["default"].object,onAdd:_propTypes["default"].func,onChange:_propTypes["default"].func,onDelete:_propTypes["default"].func,panel:_propTypes["default"].object,series:_propTypes["default"].object,siblings:_propTypes["default"].array};var StandardDeviationAgg=(0,_react2.injectI18n)(StandardDeviationAggUi);exports.StandardDeviationAgg=StandardDeviationAgg},5796:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.StandardSiblingAgg=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(17));var _react=_interopRequireDefault(__webpack_require__(0));var _agg_row=__webpack_require__(104);var _metric_select=__webpack_require__(288);var _agg_select=__webpack_require__(120);var _create_change_handler=__webpack_require__(121);var _create_select_handler=__webpack_require__(50);var _create_text_handler=__webpack_require__(64);var _eui=__webpack_require__(2);var _react2=__webpack_require__(10);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var StandardSiblingAggUi=function StandardSiblingAggUi(props){var siblings=props.siblings,intl=props.intl;var defaults={sigma:""};var model=_objectSpread({},defaults,props.model);var htmlId=(0,_eui.htmlIdGenerator)();var handleChange=(0,_create_change_handler.createChangeHandler)(props.onChange,model);var handleSelectChange=(0,_create_select_handler.createSelectHandler)(handleChange);var handleTextChange=(0,_create_text_handler.createTextHandler)(handleChange);var stdDev={};if(model.type==="std_deviation_bucket"){stdDev.sigma=_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiFormRow,{id:htmlId("sigma"),label:_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.stdSibling.sigmaLabel",defaultMessage:"Sigma"})},_react["default"].createElement(_eui.EuiFieldText,{value:model.sigma,onChange:handleTextChange("sigma")})));var modeOptions=[{label:intl.formatMessage({id:"tsvb.stdSibling.modeOptions.rawLabel",defaultMessage:"Raw"}),value:"raw"},{label:intl.formatMessage({id:"tsvb.stdSibling.modeOptions.upperBoundLabel",defaultMessage:"Upper Bound"}),value:"upper"},{label:intl.formatMessage({id:"tsvb.stdSibling.modeOptions.lowerBoundLabel",defaultMessage:"Lower Bound"}),value:"lower"},{label:intl.formatMessage({id:"tsvb.stdSibling.modeOptions.boundsBandLabel",defaultMessage:"Bounds Band"}),value:"band"}];var selectedModeOption=modeOptions.find(function(option){return model.mode===option.value});stdDev.mode=_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiFormRow,{id:htmlId("mode"),label:_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.stdSibling.modeLabel",defaultMessage:"Mode"})},_react["default"].createElement(_eui.EuiComboBox,{options:modeOptions,selectedOptions:selectedModeOption?[selectedModeOption]:[],onChange:handleSelectChange("mode"),singleSelection:{asPlainText:true}})))}return _react["default"].createElement(_agg_row.AggRow,{disableDelete:props.disableDelete,model:props.model,onAdd:props.onAdd,onDelete:props.onDelete,siblings:props.siblings,dragHandleProps:props.dragHandleProps},_react["default"].createElement(_eui.EuiFlexGroup,{gutterSize:"s"},_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiFormLabel,{htmlFor:htmlId("aggregation")},_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.stdSibling.aggregationLabel",defaultMessage:"Aggregation"})),_react["default"].createElement(_agg_select.AggSelect,{id:htmlId("aggregation"),panelType:props.panel.type,siblings:props.siblings,value:model.type,uiRestrictions:props.uiRestrictions,onChange:handleSelectChange("type")})),_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiFormRow,{id:htmlId("metric"),label:_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.stdSibling.metricLabel",defaultMessage:"Metric"})},_react["default"].createElement(_metric_select.MetricSelect,{onChange:handleSelectChange("field"),exclude:["percentile"],metrics:siblings,metric:model,value:model.field}))),stdDev.sigma,stdDev.mode))};StandardSiblingAggUi.propTypes={disableDelete:_propTypes["default"].bool,fields:_propTypes["default"].object,model:_propTypes["default"].object,onAdd:_propTypes["default"].func,onChange:_propTypes["default"].func,onDelete:_propTypes["default"].func,panel:_propTypes["default"].object,series:_propTypes["default"].object,siblings:_propTypes["default"].array,uiRestrictions:_propTypes["default"].object};var StandardSiblingAgg=(0,_react2.injectI18n)(StandardSiblingAggUi);exports.StandardSiblingAgg=StandardSiblingAgg},5797:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SeriesAgg=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(17));var _react=_interopRequireDefault(__webpack_require__(0));var _agg_select=__webpack_require__(120);var _agg_row=__webpack_require__(104);var _create_change_handler=__webpack_require__(121);var _create_select_handler=__webpack_require__(50);var _eui=__webpack_require__(2);var _react2=__webpack_require__(10);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function SeriesAggUi(props){var panel=props.panel,model=props.model,intl=props.intl;var handleChange=(0,_create_change_handler.createChangeHandler)(props.onChange,model);var handleSelectChange=(0,_create_select_handler.createSelectHandler)(handleChange);var htmlId=(0,_eui.htmlIdGenerator)();var functionOptions=[{label:intl.formatMessage({id:"tsvb.seriesAgg.functionOptions.sumLabel",defaultMessage:"Sum"}),value:"sum"},{label:intl.formatMessage({id:"tsvb.seriesAgg.functionOptions.maxLabel",defaultMessage:"Max"}),value:"max"},{label:intl.formatMessage({id:"tsvb.seriesAgg.functionOptions.minLabel",defaultMessage:"Min"}),value:"min"},{label:intl.formatMessage({id:"tsvb.seriesAgg.functionOptions.avgLabel",defaultMessage:"Avg"}),value:"mean"},{label:intl.formatMessage({id:"tsvb.seriesAgg.functionOptions.overallSumLabel",defaultMessage:"Overall Sum"}),value:"overall_sum"},{label:intl.formatMessage({id:"tsvb.seriesAgg.functionOptions.overallMaxLabel",defaultMessage:"Overall Max"}),value:"overall_max"},{label:intl.formatMessage({id:"tsvb.seriesAgg.functionOptions.overallMinLabel",defaultMessage:"Overall Min"}),value:"overall_min"},{label:intl.formatMessage({id:"tsvb.seriesAgg.functionOptions.overallAvgLabel",defaultMessage:"Overall Avg"}),value:"overall_avg"},{label:intl.formatMessage({id:"tsvb.seriesAgg.functionOptions.cumulativeSumLabel",defaultMessage:"Cumulative Sum"}),value:"cumulative_sum"}];var selectedFunctionOption=functionOptions.find(function(option){return model["function"]===option.value});if(panel.type==="table"){return _react["default"].createElement(_agg_row.AggRow,{disableDelete:props.disableDelete,model:props.model,onAdd:props.onAdd,onDelete:props.onDelete,siblings:props.siblings,dragHandleProps:props.dragHandleProps},_react["default"].createElement(_eui.EuiTitle,{className:"tvbAggRow__unavailable",size:"xxxs"},_react["default"].createElement("span",null,_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.seriesAgg.seriesAggIsNotCompatibleLabel",defaultMessage:"Series Agg is not compatible with the table visualization."}))))}return _react["default"].createElement(_agg_row.AggRow,{disableDelete:props.disableDelete,model:props.model,onAdd:props.onAdd,onDelete:props.onDelete,siblings:props.siblings,dragHandleProps:props.dragHandleProps},_react["default"].createElement(_eui.EuiFlexGroup,{gutterSize:"s"},_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiFormLabel,{htmlFor:htmlId("aggregation")},_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.seriesAgg.aggregationLabel",defaultMessage:"Aggregation"})),_react["default"].createElement(_agg_select.AggSelect,{id:htmlId("aggregation"),panelType:panel.type,siblings:props.siblings,value:model.type,onChange:handleSelectChange("type")})),_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiFormRow,{id:htmlId("function"),label:_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.seriesAgg.functionLabel",defaultMessage:"Function"})},_react["default"].createElement(_eui.EuiComboBox,{options:functionOptions,selectedOptions:selectedFunctionOption?[selectedFunctionOption]:[],onChange:handleSelectChange("function"),singleSelection:{asPlainText:true}})))))}SeriesAggUi.propTypes={disableDelete:_propTypes["default"].bool,fields:_propTypes["default"].object,model:_propTypes["default"].object,onAdd:_propTypes["default"].func,onChange:_propTypes["default"].func,onDelete:_propTypes["default"].func,panel:_propTypes["default"].object,series:_propTypes["default"].object,siblings:_propTypes["default"].array};var SeriesAgg=(0,_react2.injectI18n)(SeriesAggUi);exports.SeriesAgg=SeriesAgg},5798:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SerialDiffAgg=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(17));var _react=_interopRequireDefault(__webpack_require__(0));var _agg_select=__webpack_require__(120);var _metric_select=__webpack_require__(288);var _agg_row=__webpack_require__(104);var _create_change_handler=__webpack_require__(121);var _create_select_handler=__webpack_require__(50);var _create_number_handler=__webpack_require__(1991);var _eui=__webpack_require__(2);var _react2=__webpack_require__(10);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var SerialDiffAgg=function SerialDiffAgg(props){var siblings=props.siblings;var defaults={lag:""};var model=_objectSpread({},defaults,props.model);var handleChange=(0,_create_change_handler.createChangeHandler)(props.onChange,model);var handleSelectChange=(0,_create_select_handler.createSelectHandler)(handleChange);var handleNumberChange=(0,_create_number_handler.createNumberHandler)(handleChange);var htmlId=(0,_eui.htmlIdGenerator)();return _react["default"].createElement(_agg_row.AggRow,{disableDelete:props.disableDelete,model:props.model,onAdd:props.onAdd,onDelete:props.onDelete,siblings:props.siblings,dragHandleProps:props.dragHandleProps},_react["default"].createElement(_eui.EuiFlexGroup,{gutterSize:"s"},_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiFormLabel,{htmlFor:htmlId("aggregation")},_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.serialDiff.aggregationLabel",defaultMessage:"Aggregation"})),_react["default"].createElement(_agg_select.AggSelect,{id:htmlId("aggregation"),panelType:props.panel.type,siblings:props.siblings,value:model.type,onChange:handleSelectChange("type")})),_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiFormRow,{id:htmlId("metric"),label:_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.serialDiff.metricLabel",defaultMessage:"Metric"})},_react["default"].createElement(_metric_select.MetricSelect,{onChange:handleSelectChange("field"),metrics:siblings,metric:model,value:model.field}))),_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiFormRow,{id:htmlId("lag"),label:_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.serialDiff.lagLabel",defaultMessage:"Lag",description:"'Lag' refers to the parameter name of the serial diff translation https://www.elastic.co/guide/en/elasticsearch/reference/current/search-aggregations-pipeline-serialdiff-aggregation.html. This should only be translated if there is a reasaonable word explaining what that parameter does."})},_react["default"].createElement("input",{className:"tvbAgg__input",onChange:handleNumberChange("lag"),value:model.lag,type:"text"})))))};exports.SerialDiffAgg=SerialDiffAgg;SerialDiffAgg.propTypes={disableDelete:_propTypes["default"].bool,fields:_propTypes["default"].object,model:_propTypes["default"].object,onAdd:_propTypes["default"].func,onChange:_propTypes["default"].func,onDelete:_propTypes["default"].func,panel:_propTypes["default"].object,series:_propTypes["default"].object,siblings:_propTypes["default"].array}},5799:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PositiveOnlyAgg=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(17));var _react=_interopRequireDefault(__webpack_require__(0));var _agg_select=__webpack_require__(120);var _metric_select=__webpack_require__(288);var _agg_row=__webpack_require__(104);var _create_change_handler=__webpack_require__(121);var _create_select_handler=__webpack_require__(50);var _eui=__webpack_require__(2);var _react2=__webpack_require__(10);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var PositiveOnlyAgg=function PositiveOnlyAgg(props){var siblings=props.siblings;var defaults={unit:""};var model=_objectSpread({},defaults,props.model);var htmlId=(0,_eui.htmlIdGenerator)();var handleChange=(0,_create_change_handler.createChangeHandler)(props.onChange,model);var handleSelectChange=(0,_create_select_handler.createSelectHandler)(handleChange);return _react["default"].createElement(_agg_row.AggRow,{disableDelete:props.disableDelete,model:props.model,onAdd:props.onAdd,onDelete:props.onDelete,siblings:props.siblings,dragHandleProps:props.dragHandleProps},_react["default"].createElement(_eui.EuiFlexGroup,{gutterSize:"s"},_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiFormLabel,{htmlFor:htmlId("aggregation")},_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.positiveOnly.aggregationLabel",defaultMessage:"Aggregation"})),_react["default"].createElement(_agg_select.AggSelect,{id:htmlId("aggregation"),panelType:props.panel.type,siblings:props.siblings,value:model.type,onChange:handleSelectChange("type")})),_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiFormRow,{id:htmlId("metric"),label:_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.positiveOnly.metricLabel",defaultMessage:"Metric"})},_react["default"].createElement(_metric_select.MetricSelect,{onChange:handleSelectChange("field"),metrics:siblings,metric:model,value:model.field})))))};exports.PositiveOnlyAgg=PositiveOnlyAgg;PositiveOnlyAgg.propTypes={disableDelete:_propTypes["default"].bool,fields:_propTypes["default"].object,model:_propTypes["default"].object,onAdd:_propTypes["default"].func,onChange:_propTypes["default"].func,onDelete:_propTypes["default"].func,panel:_propTypes["default"].object,series:_propTypes["default"].object,siblings:_propTypes["default"].array}},5800:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FilterRatioAgg=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(17));var _react=_interopRequireDefault(__webpack_require__(0));var _agg_select=__webpack_require__(120);var _field_select=__webpack_require__(199);var _agg_row=__webpack_require__(104);var _create_change_handler=__webpack_require__(121);var _create_select_handler=__webpack_require__(50);var _create_text_handler=__webpack_require__(64);var _eui=__webpack_require__(2);var _react2=__webpack_require__(10);var _es_types=__webpack_require__(290);var _metric_types=__webpack_require__(665);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var FilterRatioAgg=function FilterRatioAgg(props){var series=props.series,fields=props.fields,panel=props.panel;var handleChange=(0,_create_change_handler.createChangeHandler)(props.onChange,props.model);var handleSelectChange=(0,_create_select_handler.createSelectHandler)(handleChange);var handleTextChange=(0,_create_text_handler.createTextHandler)(handleChange);var indexPattern=series.override_index_pattern&&series.series_index_pattern||panel.index_pattern;var defaults={numerator:"*",denominator:"*",metric_agg:"count"};var model=_objectSpread({},defaults,props.model);var htmlId=(0,_eui.htmlIdGenerator)();var restrictFields=model.metric_agg===_metric_types.METRIC_TYPES.CARDINALITY?[]:[_es_types.ES_TYPES.NUMBER];return _react["default"].createElement(_agg_row.AggRow,{disableDelete:props.disableDelete,model:props.model,onAdd:props.onAdd,onDelete:props.onDelete,siblings:props.siblings,dragHandleProps:props.dragHandleProps},_react["default"].createElement(_eui.EuiFlexGroup,{gutterSize:"s"},_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiFormLabel,{htmlFor:htmlId("aggregation")},_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.filterRatio.aggregationLabel",defaultMessage:"Aggregation"})),_react["default"].createElement(_agg_select.AggSelect,{id:htmlId("aggregation"),panelType:props.panel.type,siblings:props.siblings,value:model.type,onChange:handleSelectChange("type")})),_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiFormRow,{id:htmlId("numerator"),label:_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.filterRatio.numeratorLabel",defaultMessage:"Numerator"})},_react["default"].createElement(_eui.EuiFieldText,{onChange:handleTextChange("numerator"),value:model.numerator}))),_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiFormRow,{id:htmlId("denominator"),label:_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.filterRatio.denominatorLabel",defaultMessage:"Denominator"})},_react["default"].createElement(_eui.EuiFieldText,{onChange:handleTextChange("denominator"),value:model.denominator})))),_react["default"].createElement(_eui.EuiSpacer,{size:"m"}),_react["default"].createElement(_eui.EuiFlexGroup,{gutterSize:"s"},_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiFormLabel,{htmlFor:htmlId("metric")},_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.filterRatio.metricAggregationLabel",defaultMessage:"Metric Aggregation"})),_react["default"].createElement(_agg_select.AggSelect,{id:htmlId("metric"),siblings:props.siblings,panelType:"metrics",value:model.metric_agg,onChange:handleSelectChange("metric_agg")})),model.metric_agg!=="count"?_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiFormRow,{id:htmlId("aggField"),label:_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.filterRatio.fieldLabel",defaultMessage:"Field"})},_react["default"].createElement(_field_select.FieldSelect,{fields:fields,type:model.metric_agg,restrict:restrictFields,indexPattern:indexPattern,value:model.field,onChange:handleSelectChange("field")}))):null))};exports.FilterRatioAgg=FilterRatioAgg;FilterRatioAgg.propTypes={disableDelete:_propTypes["default"].bool,fields:_propTypes["default"].object,model:_propTypes["default"].object,onAdd:_propTypes["default"].func,onChange:_propTypes["default"].func,onDelete:_propTypes["default"].func,panel:_propTypes["default"].object,series:_propTypes["default"].object,siblings:_propTypes["default"].array}},5801:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"PercentileRankAgg",{enumerable:true,get:function get(){return _percentile_rank.PercentileRankAgg}});var _percentile_rank=__webpack_require__(5802)},5802:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PercentileRankAgg=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(17));var _react=_interopRequireDefault(__webpack_require__(0));var _lodash=__webpack_require__(1);var _agg_select=__webpack_require__(120);var _field_select=__webpack_require__(199);var _agg_row=__webpack_require__(104);var _create_change_handler=__webpack_require__(121);var _create_select_handler=__webpack_require__(50);var _percentile_rank_values=__webpack_require__(5803);var _eui=__webpack_require__(2);var _react2=__webpack_require__(10);var _es_types=__webpack_require__(290);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var RESTRICT_FIELDS=[_es_types.ES_TYPES.NUMBER];var PercentileRankAgg=function PercentileRankAgg(props){var series=props.series,panel=props.panel,fields=props.fields;var defaults={values:[""]};var model=_objectSpread({},defaults,props.model);var indexPattern=series.override_index_pattern&&series.series_index_pattern||panel.index_pattern;var htmlId=(0,_eui.htmlIdGenerator)();var isTablePanel=panel.type==="table";var handleChange=(0,_create_change_handler.createChangeHandler)(props.onChange,model);var handleSelectChange=(0,_create_select_handler.createSelectHandler)(handleChange);var handlePercentileRankValuesChange=function handlePercentileRankValuesChange(values){handleChange((0,_lodash.assign)({},model,{values:values}))};return _react["default"].createElement(_agg_row.AggRow,{disableDelete:props.disableDelete,model:props.model,onAdd:props.onAdd,onDelete:props.onDelete,siblings:props.siblings,dragHandleProps:props.dragHandleProps},_react["default"].createElement(_eui.EuiFlexGroup,{gutterSize:"s"},_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiFormLabel,{htmlFor:htmlId("aggregation")},_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.percentileRank.aggregationLabel",defaultMessage:"Aggregation"})),_react["default"].createElement(_agg_select.AggSelect,{id:htmlId("aggregation"),panelType:props.panel.type,siblings:props.siblings,value:model.type,onChange:handleSelectChange("type")})),_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiFormRow,{id:htmlId("field"),label:_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.percentileRank.fieldLabel",defaultMessage:"Field"})},_react["default"].createElement(_field_select.FieldSelect,{fields:fields,type:model.type,restrict:RESTRICT_FIELDS,indexPattern:indexPattern,value:model.field,onChange:handleSelectChange("field")})))),_react["default"].createElement(_eui.EuiSpacer,null),_react["default"].createElement(_percentile_rank_values.PercentileRankValues,{disableAdd:isTablePanel,disableDelete:isTablePanel,showOnlyLastRow:isTablePanel,model:model.values,onChange:handlePercentileRankValuesChange}))};exports.PercentileRankAgg=PercentileRankAgg;PercentileRankAgg.propTypes={disableDelete:_propTypes["default"].bool,fields:_propTypes["default"].object,model:_propTypes["default"].object,onAdd:_propTypes["default"].func,onChange:_propTypes["default"].func,onDelete:_propTypes["default"].func,panel:_propTypes["default"].object,series:_propTypes["default"].object,siblings:_propTypes["default"].array}},5803:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PercentileRankValues=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(17));var _react=_interopRequireDefault(__webpack_require__(0));var _lodash=__webpack_require__(1);var _eui=__webpack_require__(2);var _multi_value_row=__webpack_require__(5804);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}var PercentileRankValues=function PercentileRankValues(props){var model=props.model||[];var onChange=props.onChange,disableAdd=props.disableAdd,disableDelete=props.disableDelete,showOnlyLastRow=props.showOnlyLastRow;var onChangeValue=function onChangeValue(_ref){var value=_ref.value,id=_ref.id;model[id]=value;onChange(model)};var onDeleteValue=function onDeleteValue(_ref2){var id=_ref2.id;return onChange(model.filter(function(item,currentIndex){return id!==currentIndex}))};var onAddValue=function onAddValue(){return onChange([].concat(_toConsumableArray(model),[""]))};var renderRow=function renderRow(_ref3){var rowModel=_ref3.rowModel,disableDelete=_ref3.disableDelete,disableAdd=_ref3.disableAdd;return _react["default"].createElement(_multi_value_row.MultiValueRow,{key:"percentileRankValue__item".concat(rowModel.id),onAdd:onAddValue,onChange:onChangeValue,onDelete:onDeleteValue,disableDelete:disableDelete,disableAdd:disableAdd,model:rowModel})};return _react["default"].createElement(_eui.EuiFlexGroup,{direction:"column",responsive:false,gutterSize:"xs"},showOnlyLastRow&&renderRow({rowModel:{id:model.length-1,value:(0,_lodash.last)(model)},disableAdd:true,disableDelete:true}),!showOnlyLastRow&&model.map(function(value,id,array){return renderRow({rowModel:{id:id,value:value},disableAdd:disableAdd,disableDelete:disableDelete||array.length<2})}))};exports.PercentileRankValues=PercentileRankValues;PercentileRankValues.propTypes={model:_propTypes["default"].array,onChange:_propTypes["default"].func,disableDelete:_propTypes["default"].bool,disableAdd:_propTypes["default"].bool,showOnlyLastRow:_propTypes["default"].bool}},5804:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.MultiValueRow=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(17));var _react=_interopRequireDefault(__webpack_require__(0));var _lodash=__webpack_require__(1);var _react2=__webpack_require__(10);var _eui=__webpack_require__(2);var _add_delete_buttons=__webpack_require__(163);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var MultiValueRow=function MultiValueRow(_ref){var model=_ref.model,onChange=_ref.onChange,_onDelete=_ref.onDelete,onAdd=_ref.onAdd,disableAdd=_ref.disableAdd,disableDelete=_ref.disableDelete;var htmlId=(0,_eui.htmlIdGenerator)();var onFieldNumberChange=function onFieldNumberChange(event){return onChange(_objectSpread({},model,{value:(0,_lodash.get)(event,"target.value")}))};return _react["default"].createElement("div",{className:"tvbAggRow__multiValueRow"},_react["default"].createElement(_eui.EuiFlexGroup,{responsive:false,alignItems:"center"},_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiFormLabel,{htmlFor:htmlId("value")},_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.multivalueRow.valueLabel",defaultMessage:"Value:"}))),_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiFieldNumber,{value:model.value===""?"":Number(model.value),placeholder:0,onChange:onFieldNumberChange})),_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_add_delete_buttons.AddDeleteButtons,{onAdd:onAdd,onDelete:function onDelete(){return _onDelete(model)},disableDelete:disableDelete,disableAdd:disableAdd}))),_react["default"].createElement(_eui.EuiSpacer,null))};exports.MultiValueRow=MultiValueRow;MultiValueRow.defaultProps={model:{id:null,value:""}};MultiValueRow.propTypes={model:_propTypes["default"].object,onChange:_propTypes["default"].func,onDelete:_propTypes["default"].func,onAdd:_propTypes["default"].func,defaultAddValue:_propTypes["default"].string,disableDelete:_propTypes["default"].bool}},5805:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Static=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(17));var _react=_interopRequireDefault(__webpack_require__(0));var _agg_select=__webpack_require__(120);var _agg_row=__webpack_require__(104);var _create_change_handler=__webpack_require__(121);var _create_select_handler=__webpack_require__(50);var _create_text_handler=__webpack_require__(64);var _eui=__webpack_require__(2);var _react2=__webpack_require__(10);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var Static=function Static(props){var handleChange=(0,_create_change_handler.createChangeHandler)(props.onChange,props.model);var handleSelectChange=(0,_create_select_handler.createSelectHandler)(handleChange);var handleTextChange=(0,_create_text_handler.createTextHandler)(handleChange);var defaults={numerator:"*",denominator:"*",metric_agg:"count",value:""};var model=_objectSpread({},defaults,props.model);var htmlId=(0,_eui.htmlIdGenerator)();return _react["default"].createElement(_agg_row.AggRow,{disableDelete:props.disableDelete,model:props.model,onAdd:props.onAdd,onDelete:props.onDelete,siblings:props.siblings,dragHandleProps:props.dragHandleProps},_react["default"].createElement(_eui.EuiFlexGroup,{gutterSize:"s"},_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiFormLabel,{htmlFor:htmlId("aggregation")},_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.static.aggregationLabel",defaultMessage:"Aggregation"})),_react["default"].createElement(_agg_select.AggSelect,{id:htmlId("aggregation"),panelType:props.panel.type,siblings:props.siblings,value:model.type,onChange:handleSelectChange("type")})),_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiFormRow,{id:htmlId("staticValue"),label:_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.static.staticValuesLabel",defaultMessage:"Static Value"})},_react["default"].createElement(_eui.EuiFieldNumber,{onChange:handleTextChange("value"),value:model.value===""?"":Number(model.value),step:.1})))))};exports.Static=Static;Static.propTypes={disableDelete:_propTypes["default"].bool,fields:_propTypes["default"].object,model:_propTypes["default"].object,onAdd:_propTypes["default"].func,onChange:_propTypes["default"].func,onDelete:_propTypes["default"].func,panel:_propTypes["default"].object,series:_propTypes["default"].object,siblings:_propTypes["default"].array}},5806:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.MathAgg=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(17));var _lodash=_interopRequireDefault(__webpack_require__(1));var _uuid=_interopRequireDefault(__webpack_require__(105));var _agg_row=__webpack_require__(104);var _agg_select=__webpack_require__(120);var _create_change_handler=__webpack_require__(121);var _create_select_handler=__webpack_require__(50);var _create_text_handler=__webpack_require__(64);var _vars=__webpack_require__(1993);var _eui=__webpack_require__(2);var _react2=__webpack_require__(10);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var MathAgg=function(_Component){_inherits(MathAgg,_Component);function MathAgg(){_classCallCheck(this,MathAgg);return _possibleConstructorReturn(this,_getPrototypeOf(MathAgg).apply(this,arguments))}_createClass(MathAgg,[{key:"componentWillMount",value:function componentWillMount(){if(!this.props.model.variables){this.props.onChange(_lodash["default"].assign({},this.props.model,{variables:[{id:_uuid["default"].v1()}]}))}}},{key:"render",value:function render(){var siblings=this.props.siblings;var htmlId=(0,_eui.htmlIdGenerator)();var defaults={script:""};var model=_objectSpread({},defaults,this.props.model);var handleChange=(0,_create_change_handler.createChangeHandler)(this.props.onChange,model);var handleSelectChange=(0,_create_select_handler.createSelectHandler)(handleChange);var handleTextChange=(0,_create_text_handler.createTextHandler)(handleChange);return _react["default"].createElement(_agg_row.AggRow,{disableDelete:this.props.disableDelete,model:this.props.model,onAdd:this.props.onAdd,onDelete:this.props.onDelete,siblings:this.props.siblings,dragHandleProps:this.props.dragHandleProps},_react["default"].createElement(_eui.EuiFlexGroup,{direction:"column",gutterSize:"l"},_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiFormLabel,{htmlFor:htmlId("aggregation")},_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.math.aggregationLabel",defaultMessage:"Aggregation"})),_react["default"].createElement(_agg_select.AggSelect,{id:htmlId("aggregation"),siblings:this.props.siblings,value:model.type,onChange:handleSelectChange("type")})),_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiFormLabel,{htmlFor:htmlId("variables")},_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.math.variablesLabel",defaultMessage:"Variables"})),_react["default"].createElement(_vars.CalculationVars,{id:htmlId("variables"),metrics:siblings,onChange:handleChange,name:"variables",model:model,includeSiblings:true})),_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiFormRow,{id:"mathExpressionInput",label:_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.math.expressionLabel",defaultMessage:"Expression"}),fullWidth:true,helpText:_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.math.expressionDescription",defaultMessage:"This field uses basic math expressions (see {link}) - Variables are keys on the {params} object, i.e. {paramsName} To access all the data use {paramsValues} for an array of the values and {paramsTimestamps} for an array of the timestamps. {paramsTimestamp} is available for the current bucket's timestamp, {paramsIndex} is available for the current bucket's index, and {paramsInterval}s available for the interval in milliseconds.",values:{link:_react["default"].createElement(_eui.EuiLink,{href:"https://github.com/elastic/tinymath/blob/master/docs/functions.md",target:"_blank"},_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.math.expressionDescription.tinyMathLinkText",defaultMessage:"TinyMath"})),params:_react["default"].createElement(_eui.EuiCode,null,"params"),paramsName:_react["default"].createElement(_eui.EuiCode,null,"params.<name>"),paramsValues:_react["default"].createElement(_eui.EuiCode,null,"params._all.<name>.values"),paramsTimestamps:_react["default"].createElement(_eui.EuiCode,null,"params._all.<name>.timestamps"),paramsTimestamp:_react["default"].createElement(_eui.EuiCode,null,"params._timestamp"),paramsIndex:_react["default"].createElement(_eui.EuiCode,null,"params._index"),paramsInterval:_react["default"].createElement(_eui.EuiCode,null,"params._interval")}})},_react["default"].createElement(_eui.EuiTextArea,{"data-test-subj":"mathExpression",onChange:handleTextChange("script"),fullWidth:true,value:model.script})))))}}]);return MathAgg}(_react.Component);exports.MathAgg=MathAgg;MathAgg.propTypes={disableDelete:_propTypes["default"].bool,fields:_propTypes["default"].object,model:_propTypes["default"].object,onAdd:_propTypes["default"].func,onChange:_propTypes["default"].func,onDelete:_propTypes["default"].func,panel:_propTypes["default"].object,series:_propTypes["default"].object,siblings:_propTypes["default"].array}},5807:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TopHitAgg=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _agg_row=__webpack_require__(104);var _agg_select=__webpack_require__(120);var _field_select=__webpack_require__(199);var _i18n=__webpack_require__(5);var _create_change_handler=__webpack_require__(121);var _create_select_handler=__webpack_require__(50);var _create_text_handler=__webpack_require__(64);var _eui=__webpack_require__(2);var _react2=__webpack_require__(10);var _es_types=__webpack_require__(290);var _panel_types=__webpack_require__(662);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var isFieldTypeEnabled=function isFieldTypeEnabled(fieldRestrictions,fieldType){return fieldRestrictions.length?fieldRestrictions.includes(fieldType):true};var getAggWithOptions=function getAggWithOptions(){var field=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var fieldTypesRestriction=arguments.length>1?arguments[1]:undefined;if(isFieldTypeEnabled(fieldTypesRestriction,field.type)){switch(field.type){case _es_types.ES_TYPES.NUMBER:return[{label:_i18n.i18n.translate("tsvb.topHit.aggWithOptions.averageLabel",{defaultMessage:"Avg"}),value:"avg"},{label:_i18n.i18n.translate("tsvb.topHit.aggWithOptions.maxLabel",{defaultMessage:"Max"}),value:"max"},{label:_i18n.i18n.translate("tsvb.topHit.aggWithOptions.minLabel",{defaultMessage:"Min"}),value:"min"},{label:_i18n.i18n.translate("tsvb.topHit.aggWithOptions.sumLabel",{defaultMessage:"Sum"}),value:"sum"}];case _es_types.ES_TYPES.KEYWORD:case _es_types.ES_TYPES.STRING:return[{label:_i18n.i18n.translate("tsvb.topHit.aggWithOptions.concatenate",{defaultMessage:"Concatenate"}),value:"concat"}]}}return[]};var getOrderOptions=function getOrderOptions(){return[{label:_i18n.i18n.translate("tsvb.topHit.orderOptions.ascLabel",{defaultMessage:"Asc"}),value:"asc"},{label:_i18n.i18n.translate("tsvb.topHit.orderOptions.descLabel",{defaultMessage:"Desc"}),value:"desc"}]};var ORDER_DATE_RESTRICT_FIELDS=[_es_types.ES_TYPES.DATE];var TopHitAggUi=function TopHitAggUi(props){var fields=props.fields,series=props.series,panel=props.panel;var defaults={size:1,agg_with:"noop",order:"desc"};var model=_objectSpread({},defaults,props.model);var indexPattern=series.override_index_pattern&&series.series_index_pattern||panel.index_pattern;var aggWithOptionsRestrictFields=[_panel_types.PANEL_TYPES.TABLE,_panel_types.PANEL_TYPES.METRIC,_panel_types.PANEL_TYPES.MARKDOWN].includes(panel.type)?[_es_types.ES_TYPES.NUMBER,_es_types.ES_TYPES.KEYWORD,_es_types.ES_TYPES.STRING]:[_es_types.ES_TYPES.NUMBER];var handleChange=(0,_create_change_handler.createChangeHandler)(props.onChange,model);var handleSelectChange=(0,_create_select_handler.createSelectHandler)(handleChange);var handleTextChange=(0,_create_text_handler.createTextHandler)(handleChange);var field=fields[indexPattern].find(function(f){return f.name===model.field});var aggWithOptions=getAggWithOptions(field,aggWithOptionsRestrictFields);var orderOptions=getOrderOptions();var htmlId=(0,_eui.htmlIdGenerator)();var selectedAggWithOption=aggWithOptions.find(function(option){return model.agg_with===option.value});var selectedOrderOption=orderOptions.find(function(option){return model.order===option.value});return _react["default"].createElement(_agg_row.AggRow,{disableDelete:props.disableDelete,model:props.model,onAdd:props.onAdd,onDelete:props.onDelete,siblings:props.siblings,dragHandleProps:props.dragHandleProps},_react["default"].createElement(_eui.EuiFlexGroup,{gutterSize:"s"},_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiFormLabel,{htmlFor:htmlId("aggregation")},_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.topHit.aggregationLabel",defaultMessage:"Aggregation"})),_react["default"].createElement(_agg_select.AggSelect,{id:htmlId("aggregation"),panelType:props.panel.type,siblings:props.siblings,value:model.type,onChange:handleSelectChange("type")})),_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiFormRow,{id:htmlId("field"),label:_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.topHit.fieldLabel",defaultMessage:"Field"})},_react["default"].createElement(_field_select.FieldSelect,{fields:fields,type:model.type,restrict:aggWithOptionsRestrictFields,indexPattern:indexPattern,value:model.field,onChange:handleSelectChange("field")})))),_react["default"].createElement(_eui.EuiSpacer,{size:"m"}),_react["default"].createElement(_eui.EuiFlexGroup,{gutterSize:"s"},_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiFormRow,{id:htmlId("size"),label:_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.topHit.sizeLabel",defaultMessage:"Size"})},_react["default"].createElement("input",{className:"tvbAgg__input",value:model.size,onChange:handleTextChange("size")}))),_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiFormRow,{id:htmlId("agg_with"),label:_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.topHit.aggregateWithLabel",defaultMessage:"Aggregate with"})},_react["default"].createElement(_eui.EuiComboBox,{isClearable:false,placeholder:_i18n.i18n.translate("tsvb.topHit.aggregateWith.selectPlaceholder",{defaultMessage:"Select..."}),options:aggWithOptions,selectedOptions:selectedAggWithOption?[selectedAggWithOption]:[],onChange:handleSelectChange("agg_with"),singleSelection:{asPlainText:true}}))),_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiFormRow,{id:htmlId("order_by"),label:_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.topHit.orderByLabel",defaultMessage:"Order by"})},_react["default"].createElement(_field_select.FieldSelect,{restrict:ORDER_DATE_RESTRICT_FIELDS,value:model.order_by,onChange:handleSelectChange("order_by"),indexPattern:indexPattern,fields:fields}))),_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiFormRow,{id:htmlId("order"),label:_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.topHit.orderLabel",defaultMessage:"Order"})},_react["default"].createElement(_eui.EuiComboBox,{isClearable:false,placeholder:_i18n.i18n.translate("tsvb.topHit.order.selectPlaceholder",{defaultMessage:"Select..."}),options:orderOptions,selectedOptions:selectedOrderOption?[selectedOrderOption]:[],onChange:handleSelectChange("order"),singleSelection:{asPlainText:true}})))))};var TopHitAgg=(0,_react2.injectI18n)(TopHitAggUi);exports.TopHitAgg=TopHitAgg},5808:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.UnsupportedAgg=UnsupportedAgg;var _agg_row=__webpack_require__(104);var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(2);var _react2=__webpack_require__(10);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function UnsupportedAgg(props){return _react["default"].createElement(_agg_row.AggRow,{disableDelete:props.disableDelete,model:props.model,onAdd:props.onAdd,onDelete:props.onDelete,siblings:props.siblings,dragHandleProps:props.dragHandleProps},_react["default"].createElement(_eui.EuiTitle,{className:"tvbAggRow__unavailable",size:"xxxs"},_react["default"].createElement("span",null,_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.unsupportedAgg.aggIsNotSupportedDescription",defaultMessage:"The {modelType} aggregation is no longer supported.",values:{modelType:_react["default"].createElement(_eui.EuiCode,null,props.model.type)}}))))}},5809:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TemporaryUnsupportedAgg=TemporaryUnsupportedAgg;var _agg_row=__webpack_require__(104);var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(2);var _react2=__webpack_require__(10);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function TemporaryUnsupportedAgg(props){return _react["default"].createElement(_agg_row.AggRow,{disableDelete:props.disableDelete,model:props.model,onAdd:props.onAdd,onDelete:props.onDelete,siblings:props.siblings,dragHandleProps:props.dragHandleProps},_react["default"].createElement(_eui.EuiTitle,{className:"tvbAggRow__unavailable",size:"xxxs"},_react["default"].createElement("span",null,_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.unsupportedAgg.aggIsTemporaryUnsupportedDescription",defaultMessage:"The {modelType} aggregation is currently unsupported.",values:{modelType:_react["default"].createElement(_eui.EuiCode,null,props.model.type)}}))))}},5810:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.seriesChangeHandler=void 0;var _lodash=_interopRequireDefault(__webpack_require__(1));var _new_metric_agg_fn=__webpack_require__(1009);var _agg_lookup=__webpack_require__(1987);var _collection_actions=__webpack_require__(289);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var seriesChangeHandler=function seriesChangeHandler(props,items){return function(doc){if(items.length===1&&!(0,_agg_lookup.isBasicAgg)(doc)){_collection_actions.handleAdd.call(null,props,function(){var metric=(0,_new_metric_agg_fn.newMetricAggFn)();metric.type=doc.type;var incompatPipelines=["calculation","series_agg"];if(!_lodash["default"].contains(incompatPipelines,doc.type))metric.field=doc.id;return metric})}else{_collection_actions.handleChange.call(null,props,doc)}}};exports.seriesChangeHandler=seriesChangeHandler},5811:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TimeseriesConfig=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(17));var _react=_interopRequireDefault(__webpack_require__(0));var _data_format_picker=__webpack_require__(1010);var _create_select_handler=__webpack_require__(50);var _yes_no=__webpack_require__(200);var _create_text_handler=__webpack_require__(64);var _index_pattern=__webpack_require__(291);var _setup=__webpack_require__(84);var _storage=__webpack_require__(122);var _eui=__webpack_require__(2);var _react2=__webpack_require__(10);var _get_default_query_language=__webpack_require__(164);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var QueryBarInput=_setup.data.query.ui.QueryBarInput;var localStorage=new _storage.Storage(window.localStorage);var TimeseriesConfig=(0,_react2.injectI18n)(function(props){var handleSelectChange=(0,_create_select_handler.createSelectHandler)(props.onChange);var handleTextChange=(0,_create_text_handler.createTextHandler)(props.onChange);var defaults={fill:"",line_width:"",point_size:"",value_template:"{{value}}",offset_time:"",split_color_mode:"gradient",axis_min:"",axis_max:"",stacked:"none",steps:0};var model=_objectSpread({},defaults,props.model);var htmlId=(0,_eui.htmlIdGenerator)();var intl=props.intl;var stackedOptions=[{label:intl.formatMessage({id:"tsvb.timeSeries.noneLabel",defaultMessage:"None"}),value:"none"},{label:intl.formatMessage({id:"tsvb.timeSeries.stackedLabel",defaultMessage:"Stacked"}),value:"stacked"},{label:intl.formatMessage({id:"tsvb.timeSeries.stackedWithinSeriesLabel",defaultMessage:"Stacked within series"}),value:"stacked_within_series"},{label:intl.formatMessage({id:"tsvb.timeSeries.percentLabel",defaultMessage:"Percent"}),value:"percent"}];var selectedStackedOption=stackedOptions.find(function(option){return model.stacked===option.value});var positionOptions=[{label:intl.formatMessage({id:"tsvb.timeSeries.rightLabel",defaultMessage:"Right"}),value:"right"},{label:intl.formatMessage({id:"tsvb.timeSeries.leftLabel",defaultMessage:"Left"}),value:"left"}];var selectedAxisPosOption=positionOptions.find(function(option){return model.axis_position===option.value});var chartTypeOptions=[{label:intl.formatMessage({id:"tsvb.timeSeries.barLabel",defaultMessage:"Bar"}),value:"bar"},{label:intl.formatMessage({id:"tsvb.timeSeries.lineLabel",defaultMessage:"Line"}),value:"line"}];var selectedChartTypeOption=chartTypeOptions.find(function(option){return model.chart_type===option.value});var splitColorOptions=[{label:intl.formatMessage({id:"tsvb.timeSeries.gradientLabel",defaultMessage:"Gradient"}),value:"gradient"},{label:intl.formatMessage({id:"tsvb.timeSeries.rainbowLabel",defaultMessage:"Rainbow"}),value:"rainbow"}];var selectedSplitColorOption=splitColorOptions.find(function(option){return model.split_color_mode===option.value});var type;if(model.chart_type==="line"){type=_react["default"].createElement(_eui.EuiFlexGroup,{gutterSize:"s",responsive:false,wrap:true},_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiFormRow,{id:htmlId("chartType"),label:_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.timeSeries.chartLine.chartTypeLabel",defaultMessage:"Chart type"})},_react["default"].createElement(_eui.EuiComboBox,{isClearable:false,options:chartTypeOptions,selectedOptions:selectedChartTypeOption?[selectedChartTypeOption]:[],onChange:handleSelectChange("chart_type"),singleSelection:{asPlainText:true}}))),_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiFormRow,{id:htmlId("stacked"),label:_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.timeSeries.chartLine.stackedLabel",defaultMessage:"Stacked"})},_react["default"].createElement(_eui.EuiComboBox,{isClearable:false,options:stackedOptions,selectedOptions:selectedStackedOption?[selectedStackedOption]:[],onChange:handleSelectChange("stacked"),singleSelection:{asPlainText:true}}))),_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiFormRow,{id:htmlId("fill"),label:_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.timeSeries.chartLine.fillLabel",defaultMessage:"Fill (0 to 1)"})},_react["default"].createElement(_eui.EuiFieldNumber,{step:.1,onChange:handleTextChange("fill"),value:Number(model.fill)}))),_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiFormRow,{id:htmlId("lineWidth"),label:_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.timeSeries.chartLine.lineWidthLabel",defaultMessage:"Line width"})},_react["default"].createElement(_eui.EuiFieldNumber,{onChange:handleTextChange("line_width"),value:Number(model.line_width)}))),_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiFormRow,{id:htmlId("pointSize"),label:_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.timeSeries.chartLine.pointSizeLabel",defaultMessage:"Point size"})},_react["default"].createElement(_eui.EuiFieldNumber,{onChange:handleTextChange("point_size"),value:Number(model.point_size)}))),_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiFormLabel,null,_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.timeSeries.chartLine.stepsLabel",defaultMessage:"Steps"})),_react["default"].createElement(_eui.EuiSpacer,{size:"s"}),_react["default"].createElement(_yes_no.YesNo,{value:model.steps,name:"steps",onChange:props.onChange})))}if(model.chart_type==="bar"){type=_react["default"].createElement(_eui.EuiFlexGroup,{gutterSize:"s",responsive:false,wrap:true},_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiFormRow,{id:htmlId("chartType"),label:_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.timeSeries.chartBar.chartTypeLabel",defaultMessage:"Chart type"})},_react["default"].createElement(_eui.EuiComboBox,{isClearable:false,options:chartTypeOptions,selectedOptions:selectedChartTypeOption?[selectedChartTypeOption]:[],onChange:handleSelectChange("chart_type"),singleSelection:{asPlainText:true}}))),_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiFormRow,{id:htmlId("stacked"),label:_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.timeSeries.chartBar.stackedLabel",defaultMessage:"Stacked"})},_react["default"].createElement(_eui.EuiComboBox,{isClearable:false,options:stackedOptions,selectedOptions:selectedStackedOption?[selectedStackedOption]:[],onChange:handleSelectChange("stacked"),singleSelection:{asPlainText:true}}))),_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiFormRow,{id:htmlId("fill"),label:_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.timeSeries.chartBar.fillLabel",defaultMessage:"Fill (0 to 1)"})},_react["default"].createElement(_eui.EuiFieldNumber,{step:.5,onChange:handleTextChange("fill"),value:Number(model.fill)}))),_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiFormRow,{id:htmlId("lineWidth"),label:_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.timeSeries.chartBar.lineWidthLabel",defaultMessage:"Line width"})},_react["default"].createElement(_eui.EuiFieldNumber,{onChange:handleTextChange("line_width"),value:Number(model.line_width)}))))}var disableSeparateYaxis=model.separate_axis?false:true;var seriesIndexPattern=props.model.override_index_pattern&&props.model.series_index_pattern?props.model.series_index_pattern:props.indexPatternForQuery;return _react["default"].createElement("div",{className:"tvbAggRow"},_react["default"].createElement(_eui.EuiFlexGroup,{gutterSize:"s"},_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_data_format_picker.DataFormatPicker,{onChange:handleSelectChange("formatter"),value:model.formatter})),_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiFormRow,{id:htmlId("template"),label:_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.timeSeries.templateLabel",defaultMessage:"Template"}),helpText:_react["default"].createElement("span",null,_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.timeSeries.templateHelpText",defaultMessage:"eg.{templateExample}",values:{templateExample:_react["default"].createElement(_eui.EuiCode,null,"{{value}}/s")}})),fullWidth:true},_react["default"].createElement(_eui.EuiFieldText,{onChange:handleTextChange("value_template"),value:model.value_template,fullWidth:true,"data-test-subj":"tsvb_series_value"})))),_react["default"].createElement(_eui.EuiHorizontalRule,{margin:"s"}),_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiFormRow,{id:htmlId("series_filter"),label:_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.timeSeries.filterLabel",defaultMessage:"Filter"}),fullWidth:true},_react["default"].createElement(QueryBarInput,{query:{language:model.filter&&model.filter.language?model.filter.language:(0,_get_default_query_language.getDefaultQueryLanguage)(),query:model.filter&&model.filter.query?model.filter.query:""},onChange:function onChange(filter){return props.onChange({filter:filter})},appName:"VisEditor",indexPatterns:[seriesIndexPattern],store:localStorage}))),_react["default"].createElement(_eui.EuiHorizontalRule,{margin:"s"}),type,_react["default"].createElement(_eui.EuiHorizontalRule,{margin:"s"}),_react["default"].createElement(_eui.EuiFlexGroup,{responsive:false,wrap:true},_react["default"].createElement(_eui.EuiFlexItem,{grow:true},_react["default"].createElement(_eui.EuiFormRow,{id:htmlId("offset"),label:_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.timeSeries.offsetSeriesTimeLabel",defaultMessage:"Offset series time by (1m, 1h, 1w, 1d)",description:"1m, 1h, 1w, 1d are required values and must not be translated."})},_react["default"].createElement(_eui.EuiFieldText,{"data-test-subj":"offsetTimeSeries",onChange:handleTextChange("offset_time"),value:model.offset_time}))),_react["default"].createElement(_eui.EuiFlexItem,{grow:true},_react["default"].createElement(_eui.EuiFormLabel,null,_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.timeSeries.hideInLegendLabel",defaultMessage:"Hide in legend"})),_react["default"].createElement(_eui.EuiSpacer,{size:"s"}),_react["default"].createElement(_yes_no.YesNo,{value:model.hide_in_legend,name:"hide_in_legend",onChange:props.onChange})),_react["default"].createElement(_eui.EuiFlexItem,{grow:true},_react["default"].createElement(_eui.EuiFormRow,{id:htmlId("splitColor"),label:_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.timeSeries.splitColorThemeLabel",defaultMessage:"Split color theme"})},_react["default"].createElement(_eui.EuiComboBox,{isClearable:false,options:splitColorOptions,selectedOptions:selectedSplitColorOption?[selectedSplitColorOption]:[],onChange:handleSelectChange("split_color_mode"),singleSelection:{asPlainText:true}})))),_react["default"].createElement(_eui.EuiHorizontalRule,{margin:"s"}),_react["default"].createElement(_eui.EuiFlexGroup,{responsive:false,wrap:true},_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiFormLabel,null,_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.timeSeries.separateAxisLabel",defaultMessage:"Separate axis?"})),_react["default"].createElement(_eui.EuiSpacer,{size:"s"}),_react["default"].createElement(_yes_no.YesNo,{value:model.separate_axis,name:"separate_axis",onChange:props.onChange})),_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiFormRow,{id:htmlId("axisMin"),label:_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.timeSeries.axisMinLabel",defaultMessage:"Axis min"})},_react["default"].createElement("input",{className:"tvbAgg__input",type:"number",disabled:disableSeparateYaxis,onChange:handleTextChange("axis_min"),value:model.axis_min}))),_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiFormRow,{id:htmlId("axisMax"),label:_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.timeSeries.axisMaxLabel",defaultMessage:"Axis max"})},_react["default"].createElement("input",{className:"tvbAgg__input",disabled:disableSeparateYaxis,onChange:handleTextChange("axis_max"),value:model.axis_max}))),_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiFormRow,{id:htmlId("axisPos"),label:_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.timeSeries.axisPositionLabel",defaultMessage:"Axis position"})},_react["default"].createElement(_eui.EuiComboBox,{isClearable:false,isDisabled:disableSeparateYaxis,options:positionOptions,selectedOptions:selectedAxisPosOption?[selectedAxisPosOption]:[],onChange:handleSelectChange("axis_position"),singleSelection:{asPlainText:true}})))),_react["default"].createElement(_eui.EuiHorizontalRule,{margin:"s"}),_react["default"].createElement(_eui.EuiFlexGroup,{gutterSize:"s",responsive:false,wrap:true},_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiFormLabel,null,_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.timeSeries.overrideIndexPatternLabel",defaultMessage:"Override Index Pattern?"})),_react["default"].createElement(_eui.EuiSpacer,{size:"s"}),_react["default"].createElement(_yes_no.YesNo,{value:model.override_index_pattern,name:"override_index_pattern",onChange:props.onChange})),_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_index_pattern.IndexPattern,_extends({},props,{prefix:"series_",disabled:!model.override_index_pattern,"with-interval":true})))))});exports.TimeseriesConfig=TimeseriesConfig;TimeseriesConfig.propTypes={fields:_propTypes["default"].object,model:_propTypes["default"].object,onChange:_propTypes["default"].func,indexPatternForQuery:_propTypes["default"].string}},5812:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SplitByTerms=exports.SplitByTermsUI=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(17));var _react=_interopRequireDefault(__webpack_require__(0));var _lodash=__webpack_require__(1);var _group_by_select=__webpack_require__(504);var _create_text_handler=__webpack_require__(64);var _create_select_handler=__webpack_require__(50);var _field_select=__webpack_require__(199);var _metric_select=__webpack_require__(288);var _eui=__webpack_require__(2);var _react2=__webpack_require__(10);var _field_types=__webpack_require__(5813);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var DEFAULTS={terms_direction:"desc",terms_size:10,terms_order_by:"_count"};var SplitByTermsUI=function SplitByTermsUI(_ref){var onChange=_ref.onChange,indexPattern=_ref.indexPattern,intl=_ref.intl,seriesModel=_ref.model,fields=_ref.fields,uiRestrictions=_ref.uiRestrictions;var htmlId=(0,_eui.htmlIdGenerator)();var handleTextChange=(0,_create_text_handler.createTextHandler)(onChange);var handleSelectChange=(0,_create_select_handler.createSelectHandler)(onChange);var model=_objectSpread({},DEFAULTS,seriesModel);var metrics=model.metrics;var defaultCount={value:"_count",label:intl.formatMessage({id:"tsvb.splits.terms.defaultCountLabel",defaultMessage:"Doc Count (default)"})};var terms={value:"_key",label:intl.formatMessage({id:"tsvb.splits.terms.termsLabel",defaultMessage:"Terms"})};var dirOptions=[{value:"desc",label:intl.formatMessage({id:"tsvb.splits.terms.dirOptions.descendingLabel",defaultMessage:"Descending"})},{value:"asc",label:intl.formatMessage({id:"tsvb.splits.terms.dirOptions.ascendingLabel",defaultMessage:"Ascending"})}];var selectedDirectionOption=dirOptions.find(function(option){return model.terms_direction===option.value});var selectedField=(0,_lodash.find)(fields[indexPattern],function(_ref2){var name=_ref2.name;return name===model.terms_field});var selectedFieldType=(0,_lodash.get)(selectedField,"type");return _react["default"].createElement("div",null,_react["default"].createElement(_eui.EuiFlexGroup,null,_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiFormRow,{id:htmlId("group"),label:_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.splits.terms.groupByLabel",defaultMessage:"Group by"})},_react["default"].createElement(_group_by_select.GroupBySelect,{value:model.split_mode,onChange:handleSelectChange("split_mode"),uiRestrictions:uiRestrictions}))),_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiFormRow,{id:htmlId("by"),label:_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.splits.terms.byLabel",defaultMessage:"By",description:"This labels a field selector allowing the user to chose 'by' which field to group."})},_react["default"].createElement(_field_select.FieldSelect,{indexPattern:indexPattern,onChange:handleSelectChange("terms_field"),value:model.terms_field,fields:fields,uiRestrictions:uiRestrictions,type:"terms"})))),selectedFieldType===_field_types.FIELD_TYPES.STRING&&_react["default"].createElement(_eui.EuiFlexGroup,null,_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiFormRow,{id:htmlId("include"),label:_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.splits.terms.includeLabel",defaultMessage:"Include"})},_react["default"].createElement(_eui.EuiFieldText,{value:model.terms_include,onChange:handleTextChange("terms_include")}))),_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiFormRow,{id:htmlId("exclude"),label:_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.splits.terms.excludeLabel",defaultMessage:"Exclude"})},_react["default"].createElement(_eui.EuiFieldText,{value:model.terms_exclude,onChange:handleTextChange("terms_exclude")})))),_react["default"].createElement(_eui.EuiFlexGroup,null,_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiFormRow,{id:htmlId("top"),label:_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.splits.terms.topLabel",defaultMessage:"Top"})},_react["default"].createElement(_eui.EuiFieldNumber,{placeholder:intl.formatMessage({id:"tsvb.splits.terms.sizePlaceholder",defaultMessage:"Size"}),value:Number(model.terms_size),onChange:handleTextChange("terms_size")}))),_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiFormRow,{id:htmlId("order"),label:_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.splits.terms.orderByLabel",defaultMessage:"Order by"})},_react["default"].createElement(_metric_select.MetricSelect,{metrics:metrics,clearable:false,additionalOptions:[defaultCount,terms],onChange:handleSelectChange("terms_order_by"),restrict:"basic",value:model.terms_order_by}))),_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiFormRow,{id:htmlId("direction"),label:_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.splits.terms.directionLabel",defaultMessage:"Direction"})},_react["default"].createElement(_eui.EuiComboBox,{isClearable:false,options:dirOptions,selectedOptions:selectedDirectionOption?[selectedDirectionOption]:[],onChange:handleSelectChange("terms_direction"),singleSelection:{asPlainText:true}})))))};exports.SplitByTermsUI=SplitByTermsUI;SplitByTermsUI.propTypes={intl:_propTypes["default"].object,model:_propTypes["default"].object,onChange:_propTypes["default"].func,indexPattern:_propTypes["default"].string,fields:_propTypes["default"].object,uiRestrictions:_propTypes["default"].object};var SplitByTerms=(0,_react2.injectI18n)(SplitByTermsUI);exports.SplitByTerms=SplitByTerms},5813:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FIELD_TYPES=void 0;var FIELD_TYPES={BOOLEAN:"boolean",DATE:"date",GEO:"geo_point",NUMBER:"number",STRING:"string"};exports.FIELD_TYPES=FIELD_TYPES},5814:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SplitByFilter=void 0;var _create_select_handler=__webpack_require__(50);var _group_by_select=__webpack_require__(504);var _propTypes=_interopRequireDefault(__webpack_require__(17));var _react=_interopRequireDefault(__webpack_require__(0));var _setup=__webpack_require__(84);var _storage=__webpack_require__(122);var _eui=__webpack_require__(2);var _react2=__webpack_require__(10);var _get_default_query_language=__webpack_require__(164);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var QueryBarInput=_setup.data.query.ui.QueryBarInput;var localStorage=new _storage.Storage(window.localStorage);var SplitByFilter=function SplitByFilter(props){var _onChange=props.onChange,uiRestrictions=props.uiRestrictions,indexPattern=props.indexPattern;var defaults={filter:{language:(0,_get_default_query_language.getDefaultQueryLanguage)(),query:""}};var model=_objectSpread({},defaults,props.model);var htmlId=(0,_eui.htmlIdGenerator)();var handleSelectChange=(0,_create_select_handler.createSelectHandler)(_onChange);return _react["default"].createElement(_eui.EuiFlexGroup,{alignItems:"center"},_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiFormRow,{id:htmlId("group"),label:_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.splits.filter.groupByLabel",defaultMessage:"Group by"})},_react["default"].createElement(_group_by_select.GroupBySelect,{value:model.split_mode,onChange:handleSelectChange("split_mode"),uiRestrictions:uiRestrictions}))),_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiFormRow,{id:htmlId("query"),label:_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.splits.filter.queryStringLabel",defaultMessage:"Query string"})},_react["default"].createElement(QueryBarInput,{query:{language:model.filter.language||(0,_get_default_query_language.getDefaultQueryLanguage)(),query:model.filter.query||""},onChange:function onChange(filter){return _onChange({filter:filter})},appName:"VisEditor",indexPatterns:[indexPattern],store:localStorage}))))};exports.SplitByFilter=SplitByFilter;SplitByFilter.propTypes={model:_propTypes["default"].object,onChange:_propTypes["default"].func,uiRestrictions:_propTypes["default"].object,indexPatterns:_propTypes["default"].string}},5815:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SplitByFilters=void 0;var _create_select_handler=__webpack_require__(50);var _group_by_select=__webpack_require__(504);var _filter_items=__webpack_require__(5816);var _propTypes=_interopRequireDefault(__webpack_require__(17));var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(2);var _react2=__webpack_require__(10);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var SplitByFilters=function SplitByFilters(props){var onChange=props.onChange,model=props.model,uiRestrictions=props.uiRestrictions,indexPattern=props.indexPattern;var htmlId=(0,_eui.htmlIdGenerator)();var handleSelectChange=(0,_create_select_handler.createSelectHandler)(onChange);return _react["default"].createElement("div",null,_react["default"].createElement(_eui.EuiFlexGroup,{alignItems:"center"},_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiFormRow,{id:htmlId("group"),label:_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.splits.filters.groupByLabel",defaultMessage:"Group by"})},_react["default"].createElement(_group_by_select.GroupBySelect,{value:model.split_mode,onChange:handleSelectChange("split_mode"),uiRestrictions:uiRestrictions})))),_react["default"].createElement(_filter_items.FilterItems,{name:"split_filters",model:model,onChange:onChange,indexPatterns:indexPattern}))};exports.SplitByFilters=SplitByFilters;SplitByFilters.propTypes={model:_propTypes["default"].object,onChange:_propTypes["default"].func,uiRestrictions:_propTypes["default"].object,indexPatterns:_propTypes["default"].array}},5816:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FilterItems=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(17));var _react=_interopRequireWildcard(__webpack_require__(0));var _lodash=_interopRequireDefault(__webpack_require__(1));var _collection_actions=__webpack_require__(289);var _add_delete_buttons=__webpack_require__(163);var _color_picker=__webpack_require__(198);var _uuid=_interopRequireDefault(__webpack_require__(105));var _setup=__webpack_require__(84);var _storage=__webpack_require__(122);var _eui=__webpack_require__(2);var _react2=__webpack_require__(10);var _get_default_query_language=__webpack_require__(164);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var QueryBarInput=_setup.data.query.ui.QueryBarInput;var localStorage=new _storage.Storage(window.localStorage);var FilterItemsUi=function(_Component){_inherits(FilterItemsUi,_Component);function FilterItemsUi(props){var _this;_classCallCheck(this,FilterItemsUi);_this=_possibleConstructorReturn(this,_getPrototypeOf(FilterItemsUi).call(this,props));_defineProperty(_assertThisInitialized(_this),"handleQueryChange",function(model,filter){var part={filter:filter};_collection_actions.collectionActions.handleChange(_this.props,_lodash["default"].assign({},model,part))});_this.renderRow=_this.renderRow.bind(_assertThisInitialized(_this));return _this}_createClass(FilterItemsUi,[{key:"handleChange",value:function handleChange(item,name){var _this2=this;return function(e){var handleChange=_collection_actions.collectionActions.handleChange.bind(null,_this2.props);handleChange(_lodash["default"].assign({},item,_defineProperty({},name,_lodash["default"].get(e,"value",_lodash["default"].get(e,"target.value")))))}}},{key:"renderRow",value:function renderRow(row,i,items){var _this3=this;var indexPatterns=this.props.indexPatterns;var defaults={filter:"",label:""};var model=_objectSpread({},defaults,row);var handleChange=function handleChange(part){var fn=_collection_actions.collectionActions.handleChange.bind(null,_this3.props);fn(_lodash["default"].assign({},model,part))};var newFilter=function newFilter(){return{color:_this3.props.model.color,id:_uuid["default"].v1(),filter:{language:model.filter.language||(0,_get_default_query_language.getDefaultQueryLanguage)(),query:""}}};var handleAdd=_collection_actions.collectionActions.handleAdd.bind(null,this.props,newFilter);var handleDelete=_collection_actions.collectionActions.handleDelete.bind(null,this.props,model);var intl=this.props.intl;return _react["default"].createElement(_eui.EuiFlexGroup,{gutterSize:"s",className:"tvbAggRow",alignItems:"center",key:model.id},_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_color_picker.ColorPicker,{disableTrash:true,onChange:handleChange,name:"color",value:model.color})),_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(QueryBarInput,{query:{language:model.filter.language||(0,_get_default_query_language.getDefaultQueryLanguage)(),query:model.filter.query||""},onChange:function onChange(query){return _this3.handleQueryChange(model,query)},appName:"VisEditor",indexPatterns:[indexPatterns],store:localStorage})),_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiFieldText,{placeholder:intl.formatMessage({id:"tsvb.splits.filterItems.labelPlaceholder",defaultMessage:"Label"}),"aria-label":intl.formatMessage({id:"tsvb.splits.filterItems.labelAriaLabel",defaultMessage:"Label"}),onChange:this.handleChange(model,"label"),value:model.label,fullWidth:true})),_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_add_delete_buttons.AddDeleteButtons,{onAdd:handleAdd,onDelete:handleDelete,disableDelete:items.length<2,responsive:false})))}},{key:"render",value:function render(){var _this$props=this.props,model=_this$props.model,name=_this$props.name;if(!model[name])return _react["default"].createElement("div",null);var rows=model[name].map(this.renderRow);return _react["default"].createElement("div",null,rows)}}]);return FilterItemsUi}(_react.Component);FilterItemsUi.propTypes={name:_propTypes["default"].string,model:_propTypes["default"].object,onChange:_propTypes["default"].func,indexPatterns:_propTypes["default"].string};var FilterItems=(0,_react2.injectI18n)(FilterItemsUi);exports.FilterItems=FilterItems},5817:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SplitByEverything=void 0;var _create_select_handler=__webpack_require__(50);var _group_by_select=__webpack_require__(504);var _propTypes=_interopRequireDefault(__webpack_require__(17));var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(2);var _react2=__webpack_require__(10);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var SplitByEverything=function SplitByEverything(props){var onChange=props.onChange,model=props.model,uiRestrictions=props.uiRestrictions;var htmlId=(0,_eui.htmlIdGenerator)();var handleSelectChange=(0,_create_select_handler.createSelectHandler)(onChange);return _react["default"].createElement(_eui.EuiFlexGroup,{alignItems:"center"},_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiFormRow,{id:htmlId("group"),label:_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.splits.everything.groupByLabel",defaultMessage:"Group by"})},_react["default"].createElement(_group_by_select.GroupBySelect,{value:model.split_mode,onChange:handleSelectChange("split_mode"),uiRestrictions:uiRestrictions}))))};exports.SplitByEverything=SplitByEverything;SplitByEverything.propTypes={model:_propTypes["default"].object,onChange:_propTypes["default"].func,uiRestrictions:_propTypes["default"].object}},5818:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SplitUnsupported=void 0;var _create_select_handler=__webpack_require__(50);var _group_by_select=__webpack_require__(504);var _propTypes=_interopRequireDefault(__webpack_require__(17));var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(2);var _react2=__webpack_require__(10);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var SplitUnsupported=function SplitUnsupported(props){var onChange=props.onChange,model=props.model,uiRestrictions=props.uiRestrictions;var htmlId=(0,_eui.htmlIdGenerator)();var handleSelectChange=(0,_create_select_handler.createSelectHandler)(onChange);return _react["default"].createElement(_eui.EuiFlexGroup,{alignItems:"center"},_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiFormRow,{id:htmlId("group"),label:_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.splits.everything.groupByLabel",defaultMessage:"Group by"})},_react["default"].createElement(_group_by_select.GroupBySelect,{value:model.split_mode,onChange:handleSelectChange("split_mode"),uiRestrictions:uiRestrictions}))),_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiTitle,{className:"tvbAggRow__unavailable",size:"xxxs"},_react["default"].createElement("span",null,_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.unsupportedSplit.splitIsUnsupportedDescription",defaultMessage:"Split by {modelType} is unsupported.",values:{modelType:_react["default"].createElement(_eui.EuiCode,null,model.split_mode)}})))))};exports.SplitUnsupported=SplitUnsupported;SplitUnsupported.propTypes={model:_propTypes["default"].object,onChange:_propTypes["default"].func,uiRestrictions:_propTypes["default"].object}},5819:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.MetricSeries=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(17));var _react=_interopRequireDefault(__webpack_require__(0));var _color_picker=__webpack_require__(198);var _add_delete_buttons=__webpack_require__(163);var _series_config=__webpack_require__(666);var _split=__webpack_require__(503);var _series_drag_handler=__webpack_require__(345);var _eui=__webpack_require__(2);var _create_text_handler=__webpack_require__(64);var _react2=__webpack_require__(10);var _aggs=__webpack_require__(420);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function MetricSeriesUi(props){var panel=props.panel,fields=props.fields,name=props.name,onAdd=props.onAdd,onChange=props.onChange,onDelete=props.onDelete,disableDelete=props.disableDelete,disableAdd=props.disableAdd,selectedTab=props.selectedTab,visible=props.visible,intl=props.intl,uiRestrictions=props.uiRestrictions;var defaults={label:""};var model=_objectSpread({},defaults,props.model);var handleChange=(0,_create_text_handler.createTextHandler)(onChange);var caretIcon="arrowDown";if(!visible)caretIcon="arrowRight";var body=null;if(visible){var seriesBody;if(selectedTab==="metrics"){seriesBody=_react["default"].createElement("div",null,_react["default"].createElement(_aggs.Aggs,{onChange:props.onChange,fields:fields,panel:panel,model:model,name:name,uiRestrictions:uiRestrictions,dragHandleProps:props.dragHandleProps}),_react["default"].createElement("div",{className:"tvbAggRow tvbAggRow--split"},_react["default"].createElement(_split.Split,{onChange:props.onChange,fields:fields,panel:panel,model:model,uiRestrictions:uiRestrictions})))}else{seriesBody=_react["default"].createElement(_series_config.SeriesConfig,{fields:props.fields,model:props.model,onChange:props.onChange,indexPatternForQuery:props.indexPatternForQuery})}body=_react["default"].createElement("div",{className:"tvbSeries__body"},_react["default"].createElement(_eui.EuiTabs,{size:"s"},_react["default"].createElement(_eui.EuiTab,{isSelected:selectedTab==="metrics",onClick:function onClick(){return props.switchTab("metrics")}},_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.metric.dataTab.metricsButtonLabel",defaultMessage:"Metrics"})),_react["default"].createElement(_eui.EuiTab,{"data-test-subj":"seriesOptions",isSelected:selectedTab==="options",onClick:function onClick(){return props.switchTab("options")}},_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.metric.optionsTab.optionsButtonLabel",defaultMessage:"Options"}))),seriesBody)}var colorPicker;if(props.colorPicker){colorPicker=_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_color_picker.ColorPicker,{disableTrash:true,onChange:props.onChange,name:"color",value:model.color}))}return _react["default"].createElement("div",{className:"".concat(props.className),style:props.style},_react["default"].createElement(_eui.EuiFlexGroup,{responsive:false,gutterSize:"s",alignItems:"center"},_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiButtonIcon,{iconType:caretIcon,color:"text",onClick:props.toggleVisible,"aria-label":intl.formatMessage({id:"tsvb.metric.editor.toggleEditorAriaLabel",defaultMessage:"Toggle series editor"}),"aria-expanded":props.visible})),colorPicker,_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiFieldText,{fullWidth:true,onChange:handleChange("label"),placeholder:intl.formatMessage({id:"tsvb.metric.editor.labelPlaceholder",defaultMessage:"Label"}),value:model.label})),_react["default"].createElement(_series_drag_handler.SeriesDragHandler,{dragHandleProps:props.dragHandleProps,hideDragHandler:props.disableDelete}),_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_add_delete_buttons.AddDeleteButtons,{addTooltip:intl.formatMessage({id:"tsvb.metric.editor.addSeriesTooltip",defaultMessage:"Add Series"}),deleteTooltip:intl.formatMessage({id:"tsvb.metric.editor.deleteSeriesTooltip",defaultMessage:"Delete Series"}),cloneTooltip:intl.formatMessage({id:"tsvb.metric.editor.cloneSeriesTooltip",defaultMessage:"Clone Series"}),onDelete:onDelete,onClone:props.onClone,onAdd:onAdd,togglePanelActivation:props.togglePanelActivation,isPanelActive:!model.hidden,disableDelete:disableDelete,disableAdd:disableAdd,responsive:false}))),body)}MetricSeriesUi.propTypes={className:_propTypes["default"].string,colorPicker:_propTypes["default"].bool,disableAdd:_propTypes["default"].bool,disableDelete:_propTypes["default"].bool,fields:_propTypes["default"].object,name:_propTypes["default"].string,onAdd:_propTypes["default"].func,onChange:_propTypes["default"].func,onClone:_propTypes["default"].func,onDelete:_propTypes["default"].func,model:_propTypes["default"].object,panel:_propTypes["default"].object,selectedTab:_propTypes["default"].string,style:_propTypes["default"].object,switchTab:_propTypes["default"].func,toggleVisible:_propTypes["default"].func,visible:_propTypes["default"].bool,togglePanelActivation:_propTypes["default"].func,uiRestrictions:_propTypes["default"].object,dragHandleProps:_propTypes["default"].object,indexPatternForQuery:_propTypes["default"].string};var MetricSeries=(0,_react2.injectI18n)(MetricSeriesUi);exports.MetricSeries=MetricSeries},5820:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TopNSeries=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(17));var _react=_interopRequireDefault(__webpack_require__(0));var _color_picker=__webpack_require__(198);var _add_delete_buttons=__webpack_require__(163);var _series_config=__webpack_require__(666);var _split=__webpack_require__(503);var _series_drag_handler=__webpack_require__(345);var _eui=__webpack_require__(2);var _create_text_handler=__webpack_require__(64);var _react2=__webpack_require__(10);var _aggs=__webpack_require__(420);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var TopNSeries=(0,_react2.injectI18n)(function(props){var panel=props.panel,model=props.model,name=props.name,fields=props.fields,onAdd=props.onAdd,onChange=props.onChange,onDelete=props.onDelete,disableDelete=props.disableDelete,disableAdd=props.disableAdd,selectedTab=props.selectedTab,visible=props.visible,intl=props.intl,uiRestrictions=props.uiRestrictions;var handleChange=(0,_create_text_handler.createTextHandler)(onChange);var caretIcon="arrowDown";if(!visible)caretIcon="arrowRight";var body=null;if(visible){var seriesBody;if(selectedTab==="metrics"){seriesBody=_react["default"].createElement("div",null,_react["default"].createElement(_aggs.Aggs,{onChange:props.onChange,fields:fields,panel:panel,model:model,name:name,uiRestrictions:uiRestrictions,dragHandleProps:props.dragHandleProps}),_react["default"].createElement("div",{className:"tvbAggRow tvbAggRow--split"},_react["default"].createElement(_split.Split,{onChange:props.onChange,fields:fields,panel:panel,model:model,uiRestrictions:uiRestrictions})))}else{seriesBody=_react["default"].createElement(_series_config.SeriesConfig,{fields:props.fields,model:props.model,onChange:props.onChange,indexPatternForQuery:props.indexPatternForQuery})}body=_react["default"].createElement("div",{className:"tvbSeries__body"},_react["default"].createElement(_eui.EuiTabs,{size:"s"},_react["default"].createElement(_eui.EuiTab,{isSelected:selectedTab==="metrics",onClick:function onClick(){return props.switchTab("metrics")}},_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.topN.tab.metricsLabel",defaultMessage:"Metrics"})),_react["default"].createElement(_eui.EuiTab,{"data-test-subj":"seriesOptions",isSelected:selectedTab==="options",onClick:function onClick(){return props.switchTab("options")}},_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.topN.tab.optionsLabel",defaultMessage:"Options"}))),seriesBody)}var colorPicker=_react["default"].createElement(_color_picker.ColorPicker,{disableTrash:true,onChange:props.onChange,name:"color",value:model.color});return _react["default"].createElement("div",{className:"".concat(props.className),style:props.style},_react["default"].createElement(_eui.EuiFlexGroup,{responsive:false,gutterSize:"s",alignItems:"center"},_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiButtonIcon,{iconType:caretIcon,color:"text",onClick:props.toggleVisible,"aria-label":intl.formatMessage({id:"tsvb.topN.toggleSeriesEditorAriaLabel",defaultMessage:"Toggle series editor"}),"aria-expanded":props.visible})),_react["default"].createElement(_eui.EuiFlexItem,{grow:false},colorPicker),_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiFieldText,{fullWidth:true,onChange:handleChange("label"),placeholder:intl.formatMessage({id:"tsvb.topN.labelPlaceholder",defaultMessage:"Label"}),value:model.label})),_react["default"].createElement(_series_drag_handler.SeriesDragHandler,{dragHandleProps:props.dragHandleProps,hideDragHandler:props.disableDelete}),_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_add_delete_buttons.AddDeleteButtons,{addTooltip:intl.formatMessage({id:"tsvb.topN.addSeriesTooltip",defaultMessage:"Add Series"}),deleteTooltip:intl.formatMessage({id:"tsvb.topN.deleteSeriesTooltip",defaultMessage:"Delete Series"}),cloneTooltip:intl.formatMessage({id:"tsvb.topN.cloneSeriesTooltip",defaultMessage:"Clone Series"}),onDelete:onDelete,onClone:props.onClone,onAdd:onAdd,togglePanelActivation:props.togglePanelActivation,isPanelActive:!model.hidden,disableDelete:disableDelete,disableAdd:disableAdd,responsive:false}))),body)});exports.TopNSeries=TopNSeries;TopNSeries.propTypes={className:_propTypes["default"].string,colorPicker:_propTypes["default"].bool,disableAdd:_propTypes["default"].bool,disableDelete:_propTypes["default"].bool,fields:_propTypes["default"].object,name:_propTypes["default"].string,onAdd:_propTypes["default"].func,onChange:_propTypes["default"].func,onClone:_propTypes["default"].func,onDelete:_propTypes["default"].func,model:_propTypes["default"].object,panel:_propTypes["default"].object,selectedTab:_propTypes["default"].string,style:_propTypes["default"].object,switchTab:_propTypes["default"].func,toggleVisible:_propTypes["default"].func,visible:_propTypes["default"].bool,togglePanelActivation:_propTypes["default"].func,uiRestrictions:_propTypes["default"].object,dragHandleProps:_propTypes["default"].object,indexPatternForQuery:_propTypes["default"].string}},5821:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TableSeries=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(17));var _add_delete_buttons=__webpack_require__(163);var _config=__webpack_require__(5822);var _series_drag_handler=__webpack_require__(345);var _eui=__webpack_require__(2);var _create_text_handler=__webpack_require__(64);var _react2=__webpack_require__(10);var _aggs=__webpack_require__(420);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function TableSeriesUI(props){var model=props.model,onAdd=props.onAdd,name=props.name,fields=props.fields,panel=props.panel,onChange=props.onChange,onDelete=props.onDelete,disableDelete=props.disableDelete,disableAdd=props.disableAdd,selectedTab=props.selectedTab,visible=props.visible,intl=props.intl,uiRestrictions=props.uiRestrictions;var handleChange=(0,_create_text_handler.createTextHandler)(onChange);var caretIcon="arrowDown";if(!visible)caretIcon="arrowRight";var body=null;if(visible){var seriesBody;if(selectedTab==="metrics"){seriesBody=_react["default"].createElement("div",null,_react["default"].createElement(_aggs.Aggs,{onChange:props.onChange,fields:fields,panel:panel,model:model,name:name,uiRestrictions:uiRestrictions,dragHandleProps:props.dragHandleProps}))}else{seriesBody=_react["default"].createElement(_config.TableSeriesConfig,{panel:props.panel,fields:props.fields,model:props.model,onChange:props.onChange,indexPatternForQuery:props.indexPatternForQuery})}body=_react["default"].createElement("div",{className:"tvbSeries__body"},_react["default"].createElement(_eui.EuiTabs,{size:"s"},_react["default"].createElement(_eui.EuiTab,{isSelected:selectedTab==="metrics",onClick:function onClick(){return props.switchTab("metrics")}},_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.table.tab.metricsLabel",defaultMessage:"Metrics"})),_react["default"].createElement(_eui.EuiTab,{"data-test-subj":"seriesOptions",isSelected:selectedTab==="options",onClick:function onClick(){return props.switchTab("options")}},_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.table.tab.optionsLabel",defaultMessage:"Options"}))),seriesBody)}return _react["default"].createElement("div",{className:"".concat(props.className),style:props.style},_react["default"].createElement(_eui.EuiFlexGroup,{responsive:false,gutterSize:"s",alignItems:"center"},_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiButtonIcon,{iconType:caretIcon,color:"text",onClick:props.toggleVisible,"aria-label":intl.formatMessage({id:"tsvb.table.toggleSeriesEditorAriaLabel",defaultMessage:"Toggle series editor"}),"aria-expanded":props.visible})),_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiFieldText,{fullWidth:true,"aria-label":intl.formatMessage({id:"tsvb.table.labelAriaLabel",defaultMessage:"Label"}),onChange:handleChange("label"),placeholder:intl.formatMessage({id:"tsvb.table.labelPlaceholder",defaultMessage:"Label"}),value:model.label})),_react["default"].createElement(_series_drag_handler.SeriesDragHandler,{dragHandleProps:props.dragHandleProps,hideDragHandler:props.disableDelete}),_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_add_delete_buttons.AddDeleteButtons,{addTooltip:intl.formatMessage({id:"tsvb.table.addSeriesTooltip",defaultMessage:"Add Series"}),deleteTooltip:intl.formatMessage({id:"tsvb.table.deleteSeriesTooltip",defaultMessage:"Delete Series"}),cloneTooltip:intl.formatMessage({id:"tsvb.table.cloneSeriesTooltip",defaultMessage:"Clone Series"}),onDelete:onDelete,onClone:props.onClone,onAdd:onAdd,togglePanelActivation:props.togglePanelActivation,isPanelActive:!model.hidden,disableDelete:disableDelete,disableAdd:disableAdd,responsive:false}))),body)}TableSeriesUI.propTypes={className:_propTypes["default"].string,disableAdd:_propTypes["default"].bool,disableDelete:_propTypes["default"].bool,fields:_propTypes["default"].object,name:_propTypes["default"].string,onAdd:_propTypes["default"].func,onChange:_propTypes["default"].func,onClone:_propTypes["default"].func,onDelete:_propTypes["default"].func,model:_propTypes["default"].object,panel:_propTypes["default"].object,selectedTab:_propTypes["default"].string,style:_propTypes["default"].object,switchTab:_propTypes["default"].func,toggleVisible:_propTypes["default"].func,visible:_propTypes["default"].bool,togglePanelActivation:_propTypes["default"].func,uiRestrictions:_propTypes["default"].object,dragHandleProps:_propTypes["default"].object,indexPatternForQuery:_propTypes["default"].string};var TableSeries=(0,_react2.injectI18n)(TableSeriesUI);exports.TableSeries=TableSeries},5822:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TableSeriesConfig=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(17));var _uuid=_interopRequireDefault(__webpack_require__(105));var _data_format_picker=__webpack_require__(1010);var _create_select_handler=__webpack_require__(50);var _create_text_handler=__webpack_require__(64);var _field_select=__webpack_require__(199);var _yes_no=__webpack_require__(200);var _color_rules=__webpack_require__(667);var _eui=__webpack_require__(2);var _react2=__webpack_require__(10);var _setup=__webpack_require__(84);var _storage=__webpack_require__(122);var _get_default_query_language=__webpack_require__(164);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var QueryBarInput=_setup.data.query.ui.QueryBarInput;var localStorage=new _storage.Storage(window.localStorage);var TableSeriesConfigUI=function(_Component){_inherits(TableSeriesConfigUI,_Component);function TableSeriesConfigUI(){_classCallCheck(this,TableSeriesConfigUI);return _possibleConstructorReturn(this,_getPrototypeOf(TableSeriesConfigUI).apply(this,arguments))}_createClass(TableSeriesConfigUI,[{key:"componentWillMount",value:function componentWillMount(){var model=this.props.model;if(!model.color_rules||model.color_rules&&model.color_rules.length===0){this.props.onChange({color_rules:[{id:_uuid["default"].v1()}]})}}},{key:"render",value:function render(){var _this=this;var defaults={offset_time:"",value_template:""};var model=_objectSpread({},defaults,this.props.model);var handleSelectChange=(0,_create_select_handler.createSelectHandler)(this.props.onChange);var handleTextChange=(0,_create_text_handler.createTextHandler)(this.props.onChange);var htmlId=(0,_eui.htmlIdGenerator)();var intl=this.props.intl;var functionOptions=[{label:intl.formatMessage({id:"tsvb.table.sumLabel",defaultMessage:"Sum"}),value:"sum"},{label:intl.formatMessage({id:"tsvb.table.maxLabel",defaultMessage:"Max"}),value:"max"},{label:intl.formatMessage({id:"tsvb.table.minLabel",defaultMessage:"Min"}),value:"min"},{label:intl.formatMessage({id:"tsvb.table.avgLabel",defaultMessage:"Avg"}),value:"mean"},{label:intl.formatMessage({id:"tsvb.table.overallSumLabel",defaultMessage:"Overall Sum"}),value:"overall_sum"},{label:intl.formatMessage({id:"tsvb.table.overallMaxLabel",defaultMessage:"Overall Max"}),value:"overall_max"},{label:intl.formatMessage({id:"tsvb.table.overallMinLabel",defaultMessage:"Overall Min"}),value:"overall_min"},{label:intl.formatMessage({id:"tsvb.table.overallAvgLabel",defaultMessage:"Overall Avg"}),value:"overall_avg"},{label:intl.formatMessage({id:"tsvb.table.cumulativeSumLabel",defaultMessage:"Cumulative Sum"}),value:"cumulative_sum"}];var selectedAggFuncOption=functionOptions.find(function(option){return model.aggregate_function===option.value});return _react["default"].createElement("div",{className:"tvbAggRow"},_react["default"].createElement(_eui.EuiFlexGroup,{gutterSize:"s"},_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_data_format_picker.DataFormatPicker,{onChange:handleSelectChange("formatter"),value:model.formatter})),_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiFormRow,{id:htmlId("template"),label:_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.table.templateLabel",defaultMessage:"Template"}),helpText:_react["default"].createElement("span",null,_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.table.templateHelpText",defaultMessage:"eg.{templateExample}",values:{templateExample:_react["default"].createElement(_eui.EuiCode,null,"{{value}}/s")}})),fullWidth:true},_react["default"].createElement(_eui.EuiFieldText,{onChange:handleTextChange("value_template"),value:model.value_template,fullWidth:true})))),_react["default"].createElement(_eui.EuiHorizontalRule,{margin:"s"}),_react["default"].createElement(_eui.EuiFlexGroup,{responsive:false,wrap:true},_react["default"].createElement(_eui.EuiFlexItem,{grow:true},_react["default"].createElement(_eui.EuiFormRow,{id:htmlId("filterInput"),label:_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.table.filterLabel",defaultMessage:"Filter"}),fullWidth:true},_react["default"].createElement(QueryBarInput,{query:{language:model.filter&&model.filter.language?model.filter.language:(0,_get_default_query_language.getDefaultQueryLanguage)(),query:model.filter&&model.filter.query?model.filter.query:""},onChange:function onChange(filter){return _this.props.onChange({filter:filter})},appName:"VisEditor",indexPatterns:[this.props.indexPatternForQuery],store:localStorage}))),_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiFormLabel,null,_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.table.showTrendArrowsLabel",defaultMessage:"Show trend arrows?"})),_react["default"].createElement(_eui.EuiSpacer,{size:"s"}),_react["default"].createElement(_yes_no.YesNo,{value:model.trend_arrows,name:"trend_arrows",onChange:this.props.onChange}))),_react["default"].createElement(_eui.EuiHorizontalRule,{margin:"s"}),_react["default"].createElement(_eui.EuiFlexGroup,{responsive:false,wrap:true},_react["default"].createElement(_eui.EuiFlexItem,{grow:true},_react["default"].createElement(_eui.EuiFormRow,{id:htmlId("field"),label:_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.table.fieldLabel",defaultMessage:"Field"})},_react["default"].createElement(_field_select.FieldSelect,{fields:this.props.fields,indexPattern:this.props.panel.index_pattern,value:model.aggregate_by,onChange:handleSelectChange("aggregate_by"),fullWidth:true}))),_react["default"].createElement(_eui.EuiFlexItem,{grow:true},_react["default"].createElement(_eui.EuiFormRow,{id:htmlId("aggregateFunctionInput"),label:_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.table.aggregateFunctionLabel",defaultMessage:"Aggregate function"}),fullWidth:true},_react["default"].createElement(_eui.EuiComboBox,{options:functionOptions,selectedOptions:selectedAggFuncOption?[selectedAggFuncOption]:[],onChange:handleSelectChange("aggregate_function"),singleSelection:{asPlainText:true},fullWidth:true})))),_react["default"].createElement(_eui.EuiHorizontalRule,{margin:"s"}),_react["default"].createElement(_eui.EuiTitle,{size:"xxs"},_react["default"].createElement("span",null,_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.table.colorRulesLabel",defaultMessage:"Color rules"}))),_react["default"].createElement(_eui.EuiSpacer,{size:"s"}),_react["default"].createElement(_color_rules.ColorRules,{primaryName:"text",primaryVarName:"text",hideSecondary:true,model:model,onChange:this.props.onChange,name:"color_rules"}))}}]);return TableSeriesConfigUI}(_react.Component);TableSeriesConfigUI.propTypes={fields:_propTypes["default"].object,model:_propTypes["default"].object,onChange:_propTypes["default"].func,indexPatternForQuery:_propTypes["default"].string};var TableSeriesConfig=(0,_react2.injectI18n)(TableSeriesConfigUI);exports.TableSeriesConfig=TableSeriesConfig},5823:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.GaugeSeries=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(17));var _react=_interopRequireDefault(__webpack_require__(0));var _color_picker=__webpack_require__(198);var _add_delete_buttons=__webpack_require__(163);var _series_config=__webpack_require__(666);var _split=__webpack_require__(503);var _series_drag_handler=__webpack_require__(345);var _eui=__webpack_require__(2);var _create_text_handler=__webpack_require__(64);var _react2=__webpack_require__(10);var _aggs=__webpack_require__(420);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function GaugeSeriesUi(props){var panel=props.panel,fields=props.fields,onAdd=props.onAdd,name=props.name,onChange=props.onChange,onDelete=props.onDelete,disableDelete=props.disableDelete,disableAdd=props.disableAdd,selectedTab=props.selectedTab,visible=props.visible,intl=props.intl,uiRestrictions=props.uiRestrictions;var defaults={label:""};var model=_objectSpread({},defaults,props.model);var handleChange=(0,_create_text_handler.createTextHandler)(onChange);var caretIcon="arrowDown";if(!visible)caretIcon="arrowRight";var body=null;if(visible){var seriesBody;if(selectedTab==="metrics"){seriesBody=_react["default"].createElement("div",null,_react["default"].createElement(_aggs.Aggs,{onChange:props.onChange,fields:fields,panel:panel,model:model,name:name,uiRestrictions:uiRestrictions,dragHandleProps:props.dragHandleProps}),_react["default"].createElement("div",{className:"tvbAggRow tvbAggRow--split"},_react["default"].createElement(_split.Split,{onChange:props.onChange,fields:fields,panel:panel,model:model,uiRestrictions:uiRestrictions})))}else{seriesBody=_react["default"].createElement(_series_config.SeriesConfig,{fields:props.fields,model:props.model,onChange:props.onChange,indexPatternForQuery:props.indexPatternForQuery})}body=_react["default"].createElement("div",{className:"tvbSeries__body"},_react["default"].createElement(_eui.EuiTabs,{size:"s"},_react["default"].createElement(_eui.EuiTab,{isSelected:selectedTab==="metrics",onClick:function onClick(){return props.switchTab("metrics")}},_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.gauge.dataTab.metricsButtonLabel",defaultMessage:"Metrics"})),_react["default"].createElement(_eui.EuiTab,{"data-test-subj":"seriesOptions",isSelected:selectedTab==="options",onClick:function onClick(){return props.switchTab("options")}},_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.gauge.optionsTab.optionsButtonLabel",defaultMessage:"Options"}))),seriesBody)}var colorPicker=_react["default"].createElement(_color_picker.ColorPicker,{disableTrash:true,onChange:props.onChange,name:"color",value:model.color});return _react["default"].createElement("div",{className:"".concat(props.className),style:props.style},_react["default"].createElement(_eui.EuiFlexGroup,{responsive:false,gutterSize:"s",alignItems:"center"},_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiButtonIcon,{iconType:caretIcon,color:"text",onClick:props.toggleVisible,"aria-label":intl.formatMessage({id:"tsvb.gauge.editor.toggleEditorAriaLabel",defaultMessage:"Toggle series editor"}),"aria-expanded":props.visible})),_react["default"].createElement(_eui.EuiFlexItem,{grow:false},colorPicker),_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiFieldText,{fullWidth:true,onChange:handleChange("label"),placeholder:intl.formatMessage({id:"tsvb.gauge.editor.labelPlaceholder",defaultMessage:"Label"}),value:model.label})),_react["default"].createElement(_series_drag_handler.SeriesDragHandler,{dragHandleProps:props.dragHandleProps,hideDragHandler:props.disableDelete}),_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_add_delete_buttons.AddDeleteButtons,{addTooltip:intl.formatMessage({id:"tsvb.gauge.editor.addSeriesTooltip",defaultMessage:"Add Series"}),deleteTooltip:intl.formatMessage({id:"tsvb.gauge.editor.deleteSeriesTooltip",defaultMessage:"Delete Series"}),cloneTooltip:intl.formatMessage({id:"tsvb.gauge.editor.cloneSeriesTooltip",defaultMessage:"Clone Series"}),onDelete:onDelete,onClone:props.onClone,onAdd:onAdd,disableDelete:disableDelete,disableAdd:disableAdd,responsive:false}))),body)}GaugeSeriesUi.propTypes={className:_propTypes["default"].string,colorPicker:_propTypes["default"].bool,disableAdd:_propTypes["default"].bool,disableDelete:_propTypes["default"].bool,fields:_propTypes["default"].object,name:_propTypes["default"].string,onAdd:_propTypes["default"].func,onChange:_propTypes["default"].func,onClone:_propTypes["default"].func,onDelete:_propTypes["default"].func,model:_propTypes["default"].object,panel:_propTypes["default"].object,selectedTab:_propTypes["default"].string,style:_propTypes["default"].object,switchTab:_propTypes["default"].func,toggleVisible:_propTypes["default"].func,visible:_propTypes["default"].bool,uiRestrictions:_propTypes["default"].object,dragHandleProps:_propTypes["default"].object,indexPatternForQuery:_propTypes["default"].string};var GaugeSeries=(0,_react2.injectI18n)(GaugeSeriesUi);exports.GaugeSeries=GaugeSeries},5824:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.MarkdownSeries=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(17));var _react=_interopRequireDefault(__webpack_require__(0));var _add_delete_buttons=__webpack_require__(163);var _series_config=__webpack_require__(666);var _split=__webpack_require__(503);var _create_text_handler=__webpack_require__(64);var _eui=__webpack_require__(2);var _react2=__webpack_require__(10);var _aggs=__webpack_require__(420);var _series_drag_handler=__webpack_require__(345);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function MarkdownSeriesUi(props){var panel=props.panel,fields=props.fields,onAdd=props.onAdd,onChange=props.onChange,onDelete=props.onDelete,disableDelete=props.disableDelete,disableAdd=props.disableAdd,selectedTab=props.selectedTab,visible=props.visible,intl=props.intl,name=props.name,uiRestrictions=props.uiRestrictions;var defaults={label:"",var_name:""};var model=_objectSpread({},defaults,props.model);var handleChange=(0,_create_text_handler.createTextHandler)(onChange);var caretIcon="arrowDown";if(!visible)caretIcon="arrowRight";var body=null;if(visible){var seriesBody;if(selectedTab==="metrics"){seriesBody=_react["default"].createElement("div",null,_react["default"].createElement(_aggs.Aggs,{onChange:props.onChange,fields:fields,panel:panel,model:model,name:name,uiRestrictions:uiRestrictions,dragHandleProps:props.dragHandleProps}),_react["default"].createElement("div",{className:"tvbAggRow tvbAggRow--split"},_react["default"].createElement(_split.Split,{onChange:props.onChange,fields:fields,panel:panel,model:model,uiRestrictions:uiRestrictions})))}else{seriesBody=_react["default"].createElement(_series_config.SeriesConfig,{fields:props.fields,model:props.model,onChange:props.onChange,indexPatternForQuery:props.indexPatternForQuery})}body=_react["default"].createElement("div",{className:"tvbSeries__body"},_react["default"].createElement(_eui.EuiTabs,{size:"s"},_react["default"].createElement(_eui.EuiTab,{isSelected:selectedTab==="metrics",onClick:function onClick(){return props.switchTab("metrics")}},_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.markdown.dataTab.metricsButtonLabel",defaultMessage:"Metrics"})),_react["default"].createElement(_eui.EuiTab,{"data-test-subj":"seriesOptions",isSelected:selectedTab==="options",onClick:function onClick(){return props.switchTab("options")}},_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.markdown.optionsTab.optionsButtonLabel",defaultMessage:"Options"}))),seriesBody)}return _react["default"].createElement("div",{className:"".concat(props.className),style:props.style},_react["default"].createElement(_eui.EuiFlexGroup,{responsive:false,gutterSize:"s",alignItems:"center"},_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiButtonIcon,{iconType:caretIcon,color:"text",onClick:props.toggleVisible,"aria-label":intl.formatMessage({id:"tsvb.markdown.editor.toggleEditorAriaLabel",defaultMessage:"Toggle series editor"}),"aria-expanded":props.visible})),_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiFieldText,{fullWidth:true,onChange:handleChange("label"),placeholder:intl.formatMessage({id:"tsvb.markdown.editor.labelPlaceholder",defaultMessage:"Label"}),value:model.label})),_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiFieldText,{fullWidth:true,onChange:handleChange("var_name"),placeholder:intl.formatMessage({id:"tsvb.markdown.editor.variableNamePlaceholder",defaultMessage:"Variable name"}),value:model.var_name})),_react["default"].createElement(_series_drag_handler.SeriesDragHandler,{dragHandleProps:props.dragHandleProps,hideDragHandler:true}),_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_add_delete_buttons.AddDeleteButtons,{addTooltip:intl.formatMessage({id:"tsvb.markdown.editor.addSeriesTooltip",defaultMessage:"Add series"}),deleteTooltip:intl.formatMessage({id:"tsvb.markdown.editor.deleteSeriesTooltip",defaultMessage:"Delete series"}),cloneTooltip:intl.formatMessage({id:"tsvb.markdown.editor.cloneSeriesTooltip",defaultMessage:"Clone series"}),onDelete:onDelete,onClone:props.onClone,onAdd:onAdd,disableDelete:disableDelete,disableAdd:disableAdd,responsive:false}))),body)}MarkdownSeriesUi.propTypes={className:_propTypes["default"].string,colorPicker:_propTypes["default"].bool,disableAdd:_propTypes["default"].bool,disableDelete:_propTypes["default"].bool,fields:_propTypes["default"].object,name:_propTypes["default"].string,onAdd:_propTypes["default"].func,onChange:_propTypes["default"].func,onClone:_propTypes["default"].func,onDelete:_propTypes["default"].func,model:_propTypes["default"].object,panel:_propTypes["default"].object,selectedTab:_propTypes["default"].string,style:_propTypes["default"].object,switchTab:_propTypes["default"].func,toggleVisible:_propTypes["default"].func,visible:_propTypes["default"].bool,uiRestrictions:_propTypes["default"].object,dragHandleProps:_propTypes["default"].object,indexPatternForQuery:_propTypes["default"].string};var MarkdownSeries=(0,_react2.injectI18n)(MarkdownSeriesUi);exports.MarkdownSeries=MarkdownSeries},5825:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.newSeriesFn=void 0;var _uuid=_interopRequireDefault(__webpack_require__(105));var _lodash=_interopRequireDefault(__webpack_require__(1));var _new_metric_agg_fn=__webpack_require__(1009);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var newSeriesFn=function newSeriesFn(){var obj=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return _lodash["default"].assign({id:_uuid["default"].v1(),color:"#68BC00",split_mode:"everything",metrics:[(0,_new_metric_agg_fn.newMetricAggFn)()],separate_axis:0,axis_position:"right",formatter:"number",chart_type:"line",line_width:1,point_size:1,fill:.5,stacked:"none"},obj)};exports.newSeriesFn=newSeriesFn},5826:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.reorder=void 0;function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var reorder=function reorder(list,startIndex,endIndex){var result=Array.from(list);var _result$splice=result.splice(startIndex,1),_result$splice2=_slicedToArray(_result$splice,1),removed=_result$splice2[0];result.splice(endIndex,0,removed);return result};exports.reorder=reorder},5827:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AnnotationsEditor=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(17));var _react=_interopRequireWildcard(__webpack_require__(0));var _lodash=_interopRequireDefault(__webpack_require__(1));var _collection_actions=__webpack_require__(289);var _es_types=__webpack_require__(290);var _add_delete_buttons=__webpack_require__(163);var _color_picker=__webpack_require__(198);var _field_select=__webpack_require__(199);var _uuid=_interopRequireDefault(__webpack_require__(105));var _icon_select=__webpack_require__(5828);var _yes_no=__webpack_require__(200);var _storage=__webpack_require__(122);var _setup=__webpack_require__(84);var _get_default_query_language=__webpack_require__(164);var _eui=__webpack_require__(2);var _react2=__webpack_require__(10);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var QueryBarInput=_setup.data.query.ui.QueryBarInput;function newAnnotation(){return{id:_uuid["default"].v1(),color:"#F00",index_pattern:"*",time_field:"@timestamp",icon:"fa-tag",ignore_global_filters:1,ignore_panel_filters:1}}var RESTRICT_FIELDS=[_es_types.ES_TYPES.DATE];var localStorage=new _storage.Storage(window.localStorage);var AnnotationsEditor=function(_Component){_inherits(AnnotationsEditor,_Component);function AnnotationsEditor(props){var _this;_classCallCheck(this,AnnotationsEditor);_this=_possibleConstructorReturn(this,_getPrototypeOf(AnnotationsEditor).call(this,props));_defineProperty(_assertThisInitialized(_this),"handleQueryChange",function(model,filter){var part={query_string:filter};_collection_actions.collectionActions.handleChange(_this.props,_objectSpread({},model,part))});_this.renderRow=_this.renderRow.bind(_assertThisInitialized(_this));return _this}_createClass(AnnotationsEditor,[{key:"handleChange",value:function handleChange(item,name){var _this2=this;return function(e){var handleChange=_collection_actions.collectionActions.handleChange.bind(null,_this2.props);var part={};part[name]=_lodash["default"].get(e,"[0].value",_lodash["default"].get(e,"target.value"));handleChange(_lodash["default"].assign({},item,part))}}},{key:"renderRow",value:function renderRow(row){var _this3=this;var defaults={fields:"",template:"",index_pattern:"*",query_string:{query:"",language:(0,_get_default_query_language.getDefaultQueryLanguage)()}};var model=_objectSpread({},defaults,row);var handleChange=function handleChange(part){var fn=_collection_actions.collectionActions.handleChange.bind(null,_this3.props);fn(_lodash["default"].assign({},model,part))};var togglePanelActivation=function togglePanelActivation(){handleChange({hidden:!model.hidden})};var htmlId=(0,_eui.htmlIdGenerator)(model.id);var handleAdd=_collection_actions.collectionActions.handleAdd.bind(null,this.props,newAnnotation);var handleDelete=_collection_actions.collectionActions.handleDelete.bind(null,this.props,model);return _react["default"].createElement("div",{className:"tvbAnnotationsEditor",key:model.id},_react["default"].createElement(_eui.EuiFlexGroup,{responsive:false},_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_color_picker.ColorPicker,{disableTrash:true,onChange:handleChange,name:"color",value:model.color})),_react["default"].createElement(_eui.EuiFlexItem,{className:"tvbAggRow__children"},_react["default"].createElement(_eui.EuiFlexGroup,{responsive:false,wrap:true,gutterSize:"m"},_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiFormRow,{id:htmlId("indexPattern"),label:_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.annotationsEditor.indexPatternLabel",defaultMessage:"Index pattern (required)"}),fullWidth:true},_react["default"].createElement(_eui.EuiFieldText,{onChange:this.handleChange(model,"index_pattern"),value:model.index_pattern,fullWidth:true}))),_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiFormRow,{id:htmlId("timeField"),label:_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.annotationsEditor.timeFieldLabel",defaultMessage:"Time field (required)"}),fullWidth:true},_react["default"].createElement(_field_select.FieldSelect,{restrict:RESTRICT_FIELDS,value:model.time_field,onChange:this.handleChange(model,"time_field"),indexPattern:model.index_pattern,fields:this.props.fields,fullWidth:true})))),_react["default"].createElement(_eui.EuiSpacer,{size:"m"}),_react["default"].createElement(_eui.EuiFlexGroup,{responsive:false,wrap:true,gutterSize:"m"},_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiFormRow,{id:htmlId("queryString"),label:_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.annotationsEditor.queryStringLabel",defaultMessage:"Query string"}),fullWidth:true},_react["default"].createElement(QueryBarInput,{query:{language:model.query_string.language||(0,_get_default_query_language.getDefaultQueryLanguage)(),query:model.query_string.query||""},onChange:function onChange(query){return _this3.handleQueryChange(model,query)},appName:"VisEditor",indexPatterns:[model.index_pattern],store:localStorage,showDatePicker:false}))),_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiFormLabel,null,_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.annotationsEditor.ignoreGlobalFiltersLabel",defaultMessage:"Ignore global filters?"})),_react["default"].createElement(_eui.EuiSpacer,{size:"s"}),_react["default"].createElement(_yes_no.YesNo,{value:model.ignore_global_filters,name:"ignore_global_filters",onChange:handleChange})),_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiFormLabel,null,_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.annotationsEditor.ignorePanelFiltersLabel",defaultMessage:"Ignore panel filters?"})),_react["default"].createElement(_eui.EuiSpacer,{size:"s"}),_react["default"].createElement(_yes_no.YesNo,{value:model.ignore_panel_filters,name:"ignore_panel_filters",onChange:handleChange}))),_react["default"].createElement(_eui.EuiSpacer,{size:"m"}),_react["default"].createElement(_eui.EuiFlexGroup,{responsive:false,wrap:true,gutterSize:"m"},_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiFormRow,{id:htmlId("icon"),label:_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.annotationsEditor.iconLabel",defaultMessage:"Icon (required)"})},_react["default"].createElement(_icon_select.IconSelect,{value:model.icon,onChange:this.handleChange(model,"icon")}))),_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiFormRow,{id:htmlId("fields"),label:_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.annotationsEditor.fieldsLabel",defaultMessage:"Fields (required - comma separated paths)"}),fullWidth:true},_react["default"].createElement(_eui.EuiFieldText,{onChange:this.handleChange(model,"fields"),value:model.fields,fullWidth:true}))),_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiFormRow,{id:htmlId("rowTemplate"),label:_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.annotationsEditor.rowTemplateLabel",defaultMessage:"Row template (required)"}),helpText:_react["default"].createElement("span",null,_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.annotationsEditor.rowTemplateHelpText",defaultMessage:"eg.{rowTemplateExample}",values:{rowTemplateExample:_react["default"].createElement(_eui.EuiCode,null,"{{field}}")}})),fullWidth:true},_react["default"].createElement(_eui.EuiFieldText,{onChange:this.handleChange(model,"template"),value:model.template,fullWidth:true}))))),_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_add_delete_buttons.AddDeleteButtons,{onAdd:handleAdd,onDelete:handleDelete,togglePanelActivation:togglePanelActivation,isPanelActive:!model.hidden}))))}},{key:"render",value:function render(){var model=this.props.model;var content;if(!model.annotations||!model.annotations.length){var handleAdd=_collection_actions.collectionActions.handleAdd.bind(null,this.props,newAnnotation);content=_react["default"].createElement(_eui.EuiText,{textAlign:"center"},_react["default"].createElement("p",null,_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.annotationsEditor.howToCreateAnnotationDataSourceDescription",defaultMessage:"Click the button below to create an annotation data source."})),_react["default"].createElement(_eui.EuiButton,{fill:true,onClick:handleAdd},_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.annotationsEditor.addDataSourceButtonLabel",defaultMessage:"Add data source"})))}else{var annotations=model.annotations.map(this.renderRow);content=_react["default"].createElement("div",null,_react["default"].createElement(_eui.EuiTitle,{size:"s"},_react["default"].createElement("span",null,_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.annotationsEditor.dataSourcesLabel",defaultMessage:"Data sources"}))),_react["default"].createElement(_eui.EuiSpacer,{size:"m"}),annotations)}return _react["default"].createElement("div",{className:"tvbAnnotationsEditor__container"},content)}}]);return AnnotationsEditor}(_react.Component);exports.AnnotationsEditor=AnnotationsEditor;AnnotationsEditor.defaultProps={name:"annotations"};AnnotationsEditor.propTypes={fields:_propTypes["default"].object,model:_propTypes["default"].object,name:_propTypes["default"].string,onChange:_propTypes["default"].func}},5828:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.IconSelect=IconSelect;var _propTypes=_interopRequireDefault(__webpack_require__(17));var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(2);var _i18n=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function renderOption(option){var icon=option.value;var label=option.label;return _react["default"].createElement("span",null,_react["default"].createElement("span",{className:"kuiIcon ".concat(icon),"aria-hidden":"true"})," ".concat(label))}function IconSelect(props){var selectedIcon=props.icons.find(function(option){return props.value===option.value});return _react["default"].createElement(_eui.EuiComboBox,{isClearable:false,id:props.id,options:props.icons,selectedOptions:selectedIcon?[selectedIcon]:[],onChange:props.onChange,singleSelection:{asPlainText:true},renderOption:renderOption})}IconSelect.defaultProps={icons:[{value:"fa-asterisk",label:_i18n.i18n.translate("tsvb.iconSelect.asteriskLabel",{defaultMessage:"Asterisk"})},{value:"fa-bell",label:_i18n.i18n.translate("tsvb.iconSelect.bellLabel",{defaultMessage:"Bell"})},{value:"fa-bolt",label:_i18n.i18n.translate("tsvb.iconSelect.boltLabel",{defaultMessage:"Bolt"})},{value:"fa-bomb",label:_i18n.i18n.translate("tsvb.iconSelect.bombLabel",{defaultMessage:"Bomb"})},{value:"fa-bug",label:_i18n.i18n.translate("tsvb.iconSelect.bugLabel",{defaultMessage:"Bug"})},{value:"fa-comment",label:_i18n.i18n.translate("tsvb.iconSelect.commentLabel",{defaultMessage:"Comment"})},{value:"fa-exclamation-circle",label:_i18n.i18n.translate("tsvb.iconSelect.exclamationCircleLabel",{defaultMessage:"Exclamation Circle"})},{value:"fa-exclamation-triangle",label:_i18n.i18n.translate("tsvb.iconSelect.exclamationTriangleLabel",{defaultMessage:"Exclamation Triangle"})},{value:"fa-fire",label:_i18n.i18n.translate("tsvb.iconSelect.fireLabel",{defaultMessage:"Fire"})},{value:"fa-flag",label:_i18n.i18n.translate("tsvb.iconSelect.flagLabel",{defaultMessage:"Flag"})},{value:"fa-heart",label:_i18n.i18n.translate("tsvb.iconSelect.heartLabel",{defaultMessage:"Heart"})},{value:"fa-map-marker",label:_i18n.i18n.translate("tsvb.iconSelect.mapMarkerLabel",{defaultMessage:"Map Marker"})},{value:"fa-map-pin",label:_i18n.i18n.translate("tsvb.iconSelect.mapPinLabel",{defaultMessage:"Map Pin"})},{value:"fa-star",label:_i18n.i18n.translate("tsvb.iconSelect.starLabel",{defaultMessage:"Star"})},{value:"fa-tag",label:_i18n.i18n.translate("tsvb.iconSelect.tagLabel",{defaultMessage:"Tag"})}]};IconSelect.propTypes={icons:_propTypes["default"].array,id:_propTypes["default"].string,onChange:_propTypes["default"].func,value:_propTypes["default"].string.isRequired}},5829:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.MetricPanelConfig=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(17));var _react=_interopRequireWildcard(__webpack_require__(0));var _series_editor=__webpack_require__(419);var _index_pattern=__webpack_require__(291);var _color_rules=__webpack_require__(667);var _yes_no=__webpack_require__(200);var _uuid=_interopRequireDefault(__webpack_require__(105));var _eui=__webpack_require__(2);var _react2=__webpack_require__(10);var _storage=__webpack_require__(122);var _setup=__webpack_require__(84);var _get_default_query_language=__webpack_require__(164);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var QueryBarInput=_setup.data.query.ui.QueryBarInput;var localStorage=new _storage.Storage(window.localStorage);var MetricPanelConfig=function(_Component){_inherits(MetricPanelConfig,_Component);function MetricPanelConfig(props){var _this;_classCallCheck(this,MetricPanelConfig);_this=_possibleConstructorReturn(this,_getPrototypeOf(MetricPanelConfig).call(this,props));_this.state={selectedTab:"data"};return _this}_createClass(MetricPanelConfig,[{key:"componentWillMount",value:function componentWillMount(){var model=this.props.model;if(!model.background_color_rules||model.background_color_rules&&model.background_color_rules.length===0){this.props.onChange({background_color_rules:[{id:_uuid["default"].v1()}]})}}},{key:"switchTab",value:function switchTab(selectedTab){this.setState({selectedTab:selectedTab})}},{key:"render",value:function render(){var _this2=this;var selectedTab=this.state.selectedTab;var defaults={filter:{query:"",language:(0,_get_default_query_language.getDefaultQueryLanguage)()}};var model=_objectSpread({},defaults,this.props.model);var htmlId=(0,_eui.htmlIdGenerator)();var view;if(selectedTab==="data"){view=_react["default"].createElement(_series_editor.SeriesEditor,{colorPicker:false,fields:this.props.fields,limit:2,model:this.props.model,name:this.props.name,visData$:this.props.visData$,onChange:this.props.onChange})}else{view=_react["default"].createElement("div",{className:"tvbPanelConfig__container"},_react["default"].createElement(_eui.EuiPanel,null,_react["default"].createElement(_eui.EuiTitle,{size:"s"},_react["default"].createElement("span",null,_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.metric.optionsTab.dataLabel",defaultMessage:"Data"}))),_react["default"].createElement(_eui.EuiSpacer,{size:"m"}),_react["default"].createElement(_index_pattern.IndexPattern,{fields:this.props.fields,model:this.props.model,onChange:this.props.onChange}),_react["default"].createElement(_eui.EuiHorizontalRule,null),_react["default"].createElement(_eui.EuiFlexGroup,{responsive:false,wrap:true},_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiFormRow,{id:htmlId("panelFilter"),label:_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.metric.optionsTab.panelFilterLabel",defaultMessage:"Panel filter"}),fullWidth:true},_react["default"].createElement(QueryBarInput,{query:{language:model.filter.language||(0,_get_default_query_language.getDefaultQueryLanguage)(),query:model.filter.query||""},onChange:function onChange(filter){return _this2.props.onChange({filter:filter})},appName:"VisEditor",indexPatterns:[model.index_pattern||model.default_index_pattern],store:localStorage}))),_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiFormLabel,null,_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.metric.optionsTab.ignoreGlobalFilterLabel",defaultMessage:"Ignore global filter?"})),_react["default"].createElement(_eui.EuiSpacer,{size:"s"}),_react["default"].createElement(_yes_no.YesNo,{value:model.ignore_global_filter,name:"ignore_global_filter",onChange:this.props.onChange})))),_react["default"].createElement(_eui.EuiSpacer,null),_react["default"].createElement(_eui.EuiPanel,null,_react["default"].createElement(_eui.EuiTitle,{size:"s"},_react["default"].createElement("span",null,_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.metric.optionsTab.colorRulesLabel",defaultMessage:"Color rules"}))),_react["default"].createElement(_eui.EuiSpacer,{size:"m"}),_react["default"].createElement(_color_rules.ColorRules,{model:model,onChange:this.props.onChange,name:"background_color_rules"})))}return _react["default"].createElement("div",null,_react["default"].createElement(_eui.EuiTabs,{size:"s"},_react["default"].createElement(_eui.EuiTab,{isSelected:selectedTab==="data",onClick:function onClick(){return _this2.switchTab("data")}},_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.metric.dataTab.dataButtonLabel",defaultMessage:"Data"})),_react["default"].createElement(_eui.EuiTab,{isSelected:selectedTab==="options",onClick:function onClick(){return _this2.switchTab("options")},"data-test-subj":"metricEditorPanelOptionsBtn"},_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.metric.optionsTab.panelOptionsButtonLabel",defaultMessage:"Panel options"}))),view)}}]);return MetricPanelConfig}(_react.Component);exports.MetricPanelConfig=MetricPanelConfig;MetricPanelConfig.propTypes={fields:_propTypes["default"].object,model:_propTypes["default"].object,onChange:_propTypes["default"].func,visData$:_propTypes["default"].object}},5830:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TopNPanelConfig=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(17));var _react=_interopRequireWildcard(__webpack_require__(0));var _series_editor=__webpack_require__(419);var _index_pattern=__webpack_require__(291);var _create_text_handler=__webpack_require__(64);var _color_rules=__webpack_require__(667);var _color_picker=__webpack_require__(198);var _uuid=_interopRequireDefault(__webpack_require__(105));var _yes_no=__webpack_require__(200);var _eui=__webpack_require__(2);var _react2=__webpack_require__(10);var _storage=__webpack_require__(122);var _setup=__webpack_require__(84);var _get_default_query_language=__webpack_require__(164);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var QueryBarInput=_setup.data.query.ui.QueryBarInput;var localStorage=new _storage.Storage(window.localStorage);var TopNPanelConfig=function(_Component){_inherits(TopNPanelConfig,_Component);function TopNPanelConfig(props){var _this;_classCallCheck(this,TopNPanelConfig);_this=_possibleConstructorReturn(this,_getPrototypeOf(TopNPanelConfig).call(this,props));_this.state={selectedTab:"data"};return _this}_createClass(TopNPanelConfig,[{key:"componentWillMount",value:function componentWillMount(){var model=this.props.model;var parts={};if(!model.bar_color_rules||model.bar_color_rules&&model.bar_color_rules.length===0){parts.bar_color_rules=[{id:_uuid["default"].v1()}]}this.props.onChange(parts)}},{key:"switchTab",value:function switchTab(selectedTab){this.setState({selectedTab:selectedTab})}},{key:"render",value:function render(){var _this2=this;var selectedTab=this.state.selectedTab;var defaults={drilldown_url:"",filter:{query:"",language:(0,_get_default_query_language.getDefaultQueryLanguage)()}};var model=_objectSpread({},defaults,this.props.model);var htmlId=(0,_eui.htmlIdGenerator)();var handleTextChange=(0,_create_text_handler.createTextHandler)(this.props.onChange);var view;if(selectedTab==="data"){view=_react["default"].createElement(_series_editor.SeriesEditor,{colorPicker:false,fields:this.props.fields,model:this.props.model,name:this.props.name,visData$:this.props.visData$,onChange:this.props.onChange})}else{view=_react["default"].createElement("div",{className:"tvbPanelConfig__container"},_react["default"].createElement(_eui.EuiPanel,null,_react["default"].createElement(_eui.EuiTitle,{size:"s"},_react["default"].createElement("span",null,_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.topN.optionsTab.dataLabel",defaultMessage:"Data"}))),_react["default"].createElement(_eui.EuiSpacer,{size:"m"}),_react["default"].createElement(_eui.EuiFormRow,{id:htmlId("itemUrl"),label:_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.topN.optionsTab.itemUrlLabel",defaultMessage:"Item url"}),helpText:_react["default"].createElement("span",null,_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.topN.optionsTab.itemUrlDescription",defaultMessage:"This supports mustache templating. {key} is set to the term.",values:{key:_react["default"].createElement(_eui.EuiCode,null,"{{key}}")}}))},_react["default"].createElement(_eui.EuiFieldText,{onChange:handleTextChange("drilldown_url"),value:model.drilldown_url})),_react["default"].createElement(_eui.EuiHorizontalRule,null),_react["default"].createElement(_index_pattern.IndexPattern,{fields:this.props.fields,model:this.props.model,onChange:this.props.onChange}),_react["default"].createElement(_eui.EuiHorizontalRule,null),_react["default"].createElement(_eui.EuiFlexGroup,{responsive:false,wrap:true},_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiFormRow,{id:htmlId("panelFilter"),label:_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.topN.optionsTab.panelFilterLabel",defaultMessage:"Panel filter"}),fullWidth:true},_react["default"].createElement(QueryBarInput,{query:{language:model.filter.language?model.filter.language:(0,_get_default_query_language.getDefaultQueryLanguage)(),query:model.filter.query||""},onChange:function onChange(filter){return _this2.props.onChange({filter:filter})},appName:"VisEditor",indexPatterns:[model.index_pattern||model.default_index_pattern],store:localStorage}))),_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiFormLabel,null,_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.topN.optionsTab.ignoreGlobalFilterLabel",defaultMessage:"Ignore global filter?"})),_react["default"].createElement(_eui.EuiSpacer,{size:"s"}),_react["default"].createElement(_yes_no.YesNo,{value:model.ignore_global_filter,name:"ignore_global_filter",onChange:this.props.onChange})))),_react["default"].createElement(_eui.EuiSpacer,null),_react["default"].createElement(_eui.EuiPanel,null,_react["default"].createElement(_eui.EuiTitle,{size:"s"},_react["default"].createElement("span",null,_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.topN.optionsTab.styleLabel",defaultMessage:"Style"}))),_react["default"].createElement(_eui.EuiSpacer,{size:"m"}),_react["default"].createElement(_eui.EuiFlexGroup,{responsive:false,wrap:true,alignItems:"center"},_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiFormLabel,{style:{marginBottom:0}},_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.topN.optionsTab.backgroundColorLabel",defaultMessage:"Background color:"}))),_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_color_picker.ColorPicker,{onChange:this.props.onChange,name:"background_color",value:model.background_color}))),_react["default"].createElement(_eui.EuiHorizontalRule,null),_react["default"].createElement(_eui.EuiTitle,{size:"xxs"},_react["default"].createElement("span",null,_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.topN.optionsTab.colorRulesLabel",defaultMessage:"Color rules"}))),_react["default"].createElement(_eui.EuiSpacer,{size:"s"}),_react["default"].createElement(_color_rules.ColorRules,{model:model,primaryVarName:"bar_color",primaryName:"bar",hideSecondary:true,onChange:this.props.onChange,name:"bar_color_rules"})))}return _react["default"].createElement("div",null,_react["default"].createElement(_eui.EuiTabs,{size:"s"},_react["default"].createElement(_eui.EuiTab,{isSelected:selectedTab==="data",onClick:function onClick(){return _this2.switchTab("data")}},_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.topN.dataTab.dataButtonLabel",defaultMessage:"Data"})),_react["default"].createElement(_eui.EuiTab,{isSelected:selectedTab==="options",onClick:function onClick(){return _this2.switchTab("options")}},_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.topN.optionsTab.panelOptionsButtonLabel",defaultMessage:"Panel options"}))),view)}}]);return TopNPanelConfig}(_react.Component);exports.TopNPanelConfig=TopNPanelConfig;TopNPanelConfig.propTypes={fields:_propTypes["default"].object,model:_propTypes["default"].object,onChange:_propTypes["default"].func,visData$:_propTypes["default"].object}},5831:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TablePanelConfig=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(17));var _field_select=__webpack_require__(199);var _series_editor=__webpack_require__(419);var _index_pattern=__webpack_require__(291);var _create_text_handler=__webpack_require__(64);var _lodash=__webpack_require__(1);var _uuid=_interopRequireDefault(__webpack_require__(105));var _yes_no=__webpack_require__(200);var _eui=__webpack_require__(2);var _react2=__webpack_require__(10);var _storage=__webpack_require__(122);var _setup=__webpack_require__(84);var _get_default_query_language=__webpack_require__(164);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var QueryBarInput=_setup.data.query.ui.QueryBarInput;var localStorage=new _storage.Storage(window.localStorage);var TablePanelConfig=function(_Component){_inherits(TablePanelConfig,_Component);function TablePanelConfig(props){var _this;_classCallCheck(this,TablePanelConfig);_this=_possibleConstructorReturn(this,_getPrototypeOf(TablePanelConfig).call(this,props));_defineProperty(_assertThisInitialized(_this),"handlePivotChange",function(selectedOption){var _this$props=_this.props,fields=_this$props.fields,model=_this$props.model;var pivotId=(0,_lodash.get)(selectedOption,"[0].value",null);var field=fields[model.index_pattern].find(function(field){return field.name===pivotId});var pivotType=(0,_lodash.get)(field,"type",model.pivot_type);_this.props.onChange({pivot_id:pivotId,pivot_type:pivotType})});_this.state={selectedTab:"data"};return _this}_createClass(TablePanelConfig,[{key:"componentWillMount",value:function componentWillMount(){var model=this.props.model;var parts={};if(!model.bar_color_rules||model.bar_color_rules&&model.bar_color_rules.length===0){parts.bar_color_rules=[{id:_uuid["default"].v1()}]}this.props.onChange(parts)}},{key:"switchTab",value:function switchTab(selectedTab){this.setState({selectedTab:selectedTab})}},{key:"render",value:function render(){var _this2=this;var selectedTab=this.state.selectedTab;var defaults={drilldown_url:"",filter:{query:"",language:(0,_get_default_query_language.getDefaultQueryLanguage)()},pivot_label:"",pivot_rows:10,pivot_type:""};var model=_objectSpread({},defaults,this.props.model);var handleTextChange=(0,_create_text_handler.createTextHandler)(this.props.onChange);var htmlId=(0,_eui.htmlIdGenerator)();var view;if(selectedTab==="data"){view=_react["default"].createElement("div",null,_react["default"].createElement("div",{className:"tvbPanelConfig__container"},_react["default"].createElement(_eui.EuiPanel,null,_react["default"].createElement(_eui.EuiText,null,_react["default"].createElement("p",null,_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.table.dataTab.defineFieldDescription",defaultMessage:"For the table visualization you need to define a field to group by using a terms aggregation."}))),_react["default"].createElement(_eui.EuiSpacer,{size:"m"}),_react["default"].createElement(_eui.EuiFlexGroup,{responsive:false,wrap:true},_react["default"].createElement(_eui.EuiFlexItem,{"data-test-subj":"groupByField"},_react["default"].createElement(_eui.EuiFormRow,{id:htmlId("field"),label:_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.table.dataTab.groupByFieldLabel",defaultMessage:"Group by field"})},_react["default"].createElement(_field_select.FieldSelect,{fields:this.props.fields,value:model.pivot_id,indexPattern:model.index_pattern,onChange:this.handlePivotChange,fullWidth:true}))),_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiFormRow,{id:htmlId("pivotLabelInput"),label:_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.table.dataTab.columnLabel",defaultMessage:"Column label"}),fullWidth:true},_react["default"].createElement(_eui.EuiFieldText,{"data-test-subj":"columnLabelName",onChange:handleTextChange("pivot_label"),value:model.pivot_label,fullWidth:true}))),_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiFormRow,{id:htmlId("pivotRowsInput"),label:_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.table.dataTab.rowsLabel",defaultMessage:"Rows"})},_react["default"].createElement("input",{className:"tvbAgg__input",type:"number",onChange:handleTextChange("pivot_rows"),value:model.pivot_rows})))))),_react["default"].createElement(_series_editor.SeriesEditor,{fields:this.props.fields,model:this.props.model,name:this.props.name,visData$:this.props.visData$,onChange:this.props.onChange}))}else{view=_react["default"].createElement("div",{className:"tvbPanelConfig__container"},_react["default"].createElement(_eui.EuiPanel,null,_react["default"].createElement(_eui.EuiTitle,{size:"s"},_react["default"].createElement("span",null,_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.table.optionsTab.dataLabel",defaultMessage:"Data"}))),_react["default"].createElement(_eui.EuiSpacer,{size:"m"}),_react["default"].createElement(_eui.EuiFormRow,{id:htmlId("drilldownInput"),label:_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.table.optionsTab.itemUrlLabel",defaultMessage:"Item url"}),helpText:_react["default"].createElement("span",null,_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.table.optionsTab.itemUrlHelpText",defaultMessage:"This supports mustache templating. {key} is set to the term.",values:{key:_react["default"].createElement(_eui.EuiCode,null,"{{key}}")}}))},_react["default"].createElement(_eui.EuiFieldText,{onChange:handleTextChange("drilldown_url"),value:model.drilldown_url})),_react["default"].createElement(_eui.EuiHorizontalRule,null),_react["default"].createElement(_index_pattern.IndexPattern,{fields:this.props.fields,model:this.props.model,onChange:this.props.onChange}),_react["default"].createElement(_eui.EuiHorizontalRule,null),_react["default"].createElement(_eui.EuiFlexGroup,{responsive:false,wrap:true},_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiFormRow,{id:htmlId("panelFilterInput"),label:_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.table.optionsTab.panelFilterLabel",defaultMessage:"Panel filter"}),fullWidth:true},_react["default"].createElement(QueryBarInput,{query:{language:model.filter.language?model.filter.language:(0,_get_default_query_language.getDefaultQueryLanguage)(),query:model.filter.query||""},onChange:function onChange(filter){return _this2.props.onChange({filter:filter})},appName:"VisEditor",indexPatterns:[model.index_pattern||model.default_index_pattern],store:localStorage}))),_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiFormLabel,{htmlFor:htmlId("globalFilterOption")},_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.table.optionsTab.ignoreGlobalFilterLabel",defaultMessage:"Ignore global filter?"})),_react["default"].createElement(_eui.EuiSpacer,{size:"s"}),_react["default"].createElement(_yes_no.YesNo,{id:htmlId("globalFilterOption"),value:model.ignore_global_filter,name:"ignore_global_filter",onChange:this.props.onChange})))))}return _react["default"].createElement("div",null,_react["default"].createElement(_eui.EuiTabs,{size:"s"},_react["default"].createElement(_eui.EuiTab,{isSelected:selectedTab==="data",onClick:function onClick(){return _this2.switchTab("data")}},_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.table.dataTab.columnsButtonLabel",defaultMessage:"Columns"})),_react["default"].createElement(_eui.EuiTab,{isSelected:selectedTab==="options",onClick:function onClick(){return _this2.switchTab("options")}},_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.table.optionsTab.panelOptionsButtonLabel",defaultMessage:"Panel options"}))),view)}}]);return TablePanelConfig}(_react.Component);exports.TablePanelConfig=TablePanelConfig;TablePanelConfig.propTypes={fields:_propTypes["default"].object,model:_propTypes["default"].object,onChange:_propTypes["default"].func,visData$:_propTypes["default"].object}},5832:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.GaugePanelConfig=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(17));var _react=_interopRequireWildcard(__webpack_require__(0));var _series_editor=__webpack_require__(419);var _index_pattern=__webpack_require__(291);var _create_select_handler=__webpack_require__(50);var _create_text_handler=__webpack_require__(64);var _color_rules=__webpack_require__(667);var _color_picker=__webpack_require__(198);var _uuid=_interopRequireDefault(__webpack_require__(105));var _yes_no=__webpack_require__(200);var _eui=__webpack_require__(2);var _react2=__webpack_require__(10);var _storage=__webpack_require__(122);var _setup=__webpack_require__(84);var _get_default_query_language=__webpack_require__(164);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var QueryBarInput=_setup.data.query.ui.QueryBarInput;var localStorage=new _storage.Storage(window.localStorage);var GaugePanelConfigUi=function(_Component){_inherits(GaugePanelConfigUi,_Component);function GaugePanelConfigUi(props){var _this;_classCallCheck(this,GaugePanelConfigUi);_this=_possibleConstructorReturn(this,_getPrototypeOf(GaugePanelConfigUi).call(this,props));_this.state={selectedTab:"data"};return _this}_createClass(GaugePanelConfigUi,[{key:"componentWillMount",value:function componentWillMount(){var model=this.props.model;var parts={};if(!model.gauge_color_rules||model.gauge_color_rules&&model.gauge_color_rules.length===0){parts.gauge_color_rules=[{id:_uuid["default"].v1()}]}if(model.gauge_width==null)parts.gauge_width=10;if(model.gauge_inner_width==null)parts.gauge_inner_width=10;if(model.gauge_style==null)parts.gauge_style="half";this.props.onChange(parts)}},{key:"switchTab",value:function switchTab(selectedTab){this.setState({selectedTab:selectedTab})}},{key:"render",value:function render(){var _this2=this;var selectedTab=this.state.selectedTab;var intl=this.props.intl;var defaults={gauge_max:"",filter:{query:"",language:(0,_get_default_query_language.getDefaultQueryLanguage)()},gauge_style:"circle",gauge_inner_width:"",gauge_width:""};var model=_objectSpread({},defaults,this.props.model);var handleSelectChange=(0,_create_select_handler.createSelectHandler)(this.props.onChange);var handleTextChange=(0,_create_text_handler.createTextHandler)(this.props.onChange);var styleOptions=[{label:intl.formatMessage({id:"tsvb.gauge.styleOptions.circleLabel",defaultMessage:"Circle"}),value:"circle"},{label:intl.formatMessage({id:"tsvb.gauge.styleOptions.halfCircleLabel",defaultMessage:"Half Circle"}),value:"half"}];var htmlId=(0,_eui.htmlIdGenerator)();var selectedGaugeStyleOption=styleOptions.find(function(option){return model.gauge_style===option.value});var view;if(selectedTab==="data"){view=_react["default"].createElement(_series_editor.SeriesEditor,{colorPicker:true,fields:this.props.fields,limit:1,model:this.props.model,name:this.props.name,visData$:this.props.visData$,onChange:this.props.onChange})}else{view=_react["default"].createElement("div",{className:"tvbPanelConfig__container"},_react["default"].createElement(_eui.EuiPanel,null,_react["default"].createElement(_eui.EuiTitle,{size:"s"},_react["default"].createElement("span",null,_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.gauge.optionsTab.dataLabel",defaultMessage:"Data"}))),_react["default"].createElement(_eui.EuiSpacer,{size:"m"}),_react["default"].createElement(_index_pattern.IndexPattern,{fields:this.props.fields,model:this.props.model,onChange:this.props.onChange}),_react["default"].createElement(_eui.EuiHorizontalRule,null),_react["default"].createElement(_eui.EuiFlexGroup,{responsive:false,wrap:true},_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiFormRow,{id:htmlId("panelFilter"),label:_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.gauge.optionsTab.panelFilterLabel",defaultMessage:"Panel filter"}),fullWidth:true},_react["default"].createElement(QueryBarInput,{query:{language:model.filter.language||(0,_get_default_query_language.getDefaultQueryLanguage)(),query:model.filter.query||""},onChange:function onChange(filter){return _this2.props.onChange({filter:filter})},appName:"VisEditor",indexPatterns:[model.index_pattern||model.default_index_pattern],store:localStorage}))),_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiFormLabel,null,_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.gauge.optionsTab.ignoreGlobalFilterLabel",defaultMessage:"Ignore global filter?"})),_react["default"].createElement(_eui.EuiSpacer,{size:"s"}),_react["default"].createElement(_yes_no.YesNo,{value:model.ignore_global_filter,name:"ignore_global_filter",onChange:this.props.onChange})))),_react["default"].createElement(_eui.EuiSpacer,null),_react["default"].createElement(_eui.EuiPanel,null,_react["default"].createElement(_eui.EuiTitle,{size:"s"},_react["default"].createElement("span",null,_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.gauge.optionsTab.styleLabel",defaultMessage:"Style"}))),_react["default"].createElement(_eui.EuiSpacer,{size:"m"}),_react["default"].createElement(_eui.EuiFlexGroup,{responsive:false,wrap:true},_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiFormRow,{id:htmlId("gaugeMax"),label:_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.gauge.optionsTab.gaugeMaxLabel",defaultMessage:"Gauge max (empty for auto)"})},_react["default"].createElement("input",{id:htmlId("gaugeMax"),className:"tvbAgg__input",type:"number",onChange:handleTextChange("gauge_max"),value:model.gauge_max}))),_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiFormRow,{id:htmlId("gaugeStyle"),label:_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.gauge.optionsTab.gaugeStyleLabel",defaultMessage:"Gauge style"})},_react["default"].createElement(_eui.EuiComboBox,{isClearable:false,options:styleOptions,selectedOptions:selectedGaugeStyleOption?[selectedGaugeStyleOption]:[],onChange:handleSelectChange("gauge_style"),singleSelection:{asPlainText:true}}))),_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiFormRow,{id:htmlId("innerLine"),label:_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.gauge.optionsTab.innerLineWidthLabel",defaultMessage:"Inner line width"})},_react["default"].createElement(_eui.EuiFieldNumber,{onChange:handleTextChange("gauge_inner_width"),value:Number(model.gauge_inner_width)}))),_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiFormRow,{id:htmlId("gaugeLine"),label:_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.gauge.optionsTab.gaugeLineWidthLabel",defaultMessage:"Gauge line width"})},_react["default"].createElement(_eui.EuiFieldNumber,{onChange:handleTextChange("gauge_width"),value:Number(model.gauge_width)})))),_react["default"].createElement(_eui.EuiHorizontalRule,null),_react["default"].createElement(_eui.EuiFlexGroup,{responsive:false,wrap:true,alignItems:"center"},_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiFormLabel,{style:{marginBottom:0}},_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.gauge.optionsTab.backgroundColorLabel",defaultMessage:"Background color:"}))),_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_color_picker.ColorPicker,{onChange:this.props.onChange,name:"background_color",value:model.background_color})),_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiFormLabel,{style:{marginBottom:0}},_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.gauge.optionsTab.innerColorLabel",defaultMessage:"Inner color:"}))),_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_color_picker.ColorPicker,{onChange:this.props.onChange,name:"gauge_inner_color",value:model.gauge_inner_color}))),_react["default"].createElement(_eui.EuiHorizontalRule,null),_react["default"].createElement(_eui.EuiTitle,{size:"xxs"},_react["default"].createElement("span",null,_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.gauge.optionsTab.colorRulesLabel",defaultMessage:"Color rules"}))),_react["default"].createElement(_eui.EuiSpacer,{size:"s"}),_react["default"].createElement(_color_rules.ColorRules,{primaryName:"gauge color",primaryVarName:"gauge",secondaryName:"text color",secondaryVarName:"text",model:model,onChange:this.props.onChange,name:"gauge_color_rules"})))}return _react["default"].createElement("div",null,_react["default"].createElement(_eui.EuiTabs,{size:"s"},_react["default"].createElement(_eui.EuiTab,{isSelected:selectedTab==="data",onClick:function onClick(){return _this2.switchTab("data")}},_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.gauge.dataTab.dataButtonLabel",defaultMessage:"Data"})),_react["default"].createElement(_eui.EuiTab,{isSelected:selectedTab==="options",onClick:function onClick(){return _this2.switchTab("options")}},_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.gauge.optionsTab.panelOptionsButtonLabel",defaultMessage:"Panel options"}))),view)}}]);return GaugePanelConfigUi}(_react.Component);GaugePanelConfigUi.propTypes={fields:_propTypes["default"].object,model:_propTypes["default"].object,onChange:_propTypes["default"].func,visData$:_propTypes["default"].object};var GaugePanelConfig=(0,_react2.injectI18n)(GaugePanelConfigUi);exports.GaugePanelConfig=GaugePanelConfig},5833:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.MarkdownPanelConfig=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(17));var _react=_interopRequireWildcard(__webpack_require__(0));var _series_editor=__webpack_require__(419);var _index_pattern=__webpack_require__(291);__webpack_require__(5834);var _create_select_handler=__webpack_require__(50);var _color_picker=__webpack_require__(198);var _yes_no=__webpack_require__(200);var _markdown_editor=__webpack_require__(5835);var _lessBrowser=_interopRequireDefault(__webpack_require__(5837));var _eui=__webpack_require__(2);var _react2=__webpack_require__(10);var _storage=__webpack_require__(122);var _setup=__webpack_require__(84);var _get_default_query_language=__webpack_require__(164);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var lessC=(0,_lessBrowser["default"])(window,{env:"production"});var QueryBarInput=_setup.data.query.ui.QueryBarInput;var localStorage=new _storage.Storage(window.localStorage);var MarkdownPanelConfigUi=function(_Component){_inherits(MarkdownPanelConfigUi,_Component);function MarkdownPanelConfigUi(props){var _this;_classCallCheck(this,MarkdownPanelConfigUi);_this=_possibleConstructorReturn(this,_getPrototypeOf(MarkdownPanelConfigUi).call(this,props));_this.state={selectedTab:"markdown"};_this.handleCSSChange=_this.handleCSSChange.bind(_assertThisInitialized(_this));return _this}_createClass(MarkdownPanelConfigUi,[{key:"switchTab",value:function switchTab(selectedTab){this.setState({selectedTab:selectedTab})}},{key:"handleCSSChange",value:function handleCSSChange(value){var _this2=this;var model=this.props.model;var lessSrc="#markdown-".concat(model.id," {\n  ").concat(value,"\n}");lessC.render(lessSrc,{compress:true},function(e,output){var parts={markdown_less:value};if(output){parts.markdown_css=output.css}_this2.props.onChange(parts)})}},{key:"render",value:function render(){var _this3=this;var defaults={filter:{query:"",language:(0,_get_default_query_language.getDefaultQueryLanguage)()}};var model=_objectSpread({},defaults,this.props.model);var selectedTab=this.state.selectedTab;var handleSelectChange=(0,_create_select_handler.createSelectHandler)(this.props.onChange);var intl=this.props.intl;var htmlId=(0,_eui.htmlIdGenerator)();var alignOptions=[{label:intl.formatMessage({id:"tsvb.markdown.alignOptions.topLabel",defaultMessage:"Top"}),value:"top"},{label:intl.formatMessage({id:"tsvb.markdown.alignOptions.middleLabel",defaultMessage:"Middle"}),value:"middle"},{label:intl.formatMessage({id:"tsvb.markdown.alignOptions.bottomLabel",defaultMessage:"Bottom"}),value:"bottom"}];var selectedAlignOption=alignOptions.find(function(option){return model.markdown_vertical_align===option.value});var view;if(selectedTab==="markdown"){view=_react["default"].createElement(_markdown_editor.MarkdownEditor,this.props)}else if(selectedTab==="data"){view=_react["default"].createElement(_series_editor.SeriesEditor,{colorPicker:false,fields:this.props.fields,model:this.props.model,name:this.props.name,visData$:this.props.visData$,onChange:this.props.onChange})}else{view=_react["default"].createElement("div",{className:"tvbPanelConfig__container"},_react["default"].createElement(_eui.EuiPanel,null,_react["default"].createElement(_eui.EuiTitle,{size:"s"},_react["default"].createElement("span",null,_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.markdown.optionsTab.dataLabel",defaultMessage:"Data"}))),_react["default"].createElement(_eui.EuiSpacer,{size:"m"}),_react["default"].createElement(_index_pattern.IndexPattern,{fields:this.props.fields,model:this.props.model,onChange:this.props.onChange}),_react["default"].createElement(_eui.EuiHorizontalRule,null),_react["default"].createElement(_eui.EuiFlexGroup,{responsive:false,wrap:true},_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiFormRow,{id:htmlId("panelFilter"),label:_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.markdown.optionsTab.panelFilterLabel",defaultMessage:"Panel filter"}),fullWidth:true},_react["default"].createElement(QueryBarInput,{query:{language:model.filter.language?model.filter.language:(0,_get_default_query_language.getDefaultQueryLanguage)(),query:model.filter.query||""},onChange:function onChange(filter){return _this3.props.onChange({filter:filter})},appName:"VisEditor",indexPatterns:[model.index_pattern||model.default_index_pattern],store:localStorage}))),_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiFormLabel,null,_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.markdown.optionsTab.ignoreGlobalFilterLabel",defaultMessage:"Ignore global filter?"})),_react["default"].createElement(_eui.EuiSpacer,{size:"s"}),_react["default"].createElement(_yes_no.YesNo,{value:model.ignore_global_filter,name:"ignore_global_filter",onChange:this.props.onChange})))),_react["default"].createElement(_eui.EuiSpacer,null),_react["default"].createElement(_eui.EuiPanel,null,_react["default"].createElement(_eui.EuiTitle,{size:"s"},_react["default"].createElement("span",null,_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.markdown.optionsTab.styleLabel",defaultMessage:"Style"}))),_react["default"].createElement(_eui.EuiSpacer,{size:"m"}),_react["default"].createElement(_eui.EuiFlexGroup,{responsive:false,wrap:true,alignItems:"center"},_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiFormLabel,{style:{marginBottom:0}},_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.markdown.optionsTab.backgroundColorLabel",defaultMessage:"Background color:"}))),_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_color_picker.ColorPicker,{onChange:this.props.onChange,name:"background_color",value:model.background_color})),_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiFormLabel,{style:{marginBottom:0}},_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.markdown.optionsTab.showScrollbarsLabel",defaultMessage:"Show scrollbars?"}))),_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_yes_no.YesNo,{value:model.markdown_scrollbars,name:"markdown_scrollbars",onChange:this.props.onChange})),_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiFormLabel,{style:{marginBottom:0}},_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.markdown.optionsTab.openLinksInNewTab",defaultMessage:"Open links in new tab?"}))),_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_yes_no.YesNo,{value:model.markdown_openLinksInNewTab,name:"markdown_openLinksInNewTab",onChange:this.props.onChange})),_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiFormLabel,{style:{marginBottom:0},htmlFor:htmlId("valign")},_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.markdown.optionsTab.verticalAlignmentLabel",defaultMessage:"Vertical alignment:"}))),_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiComboBox,{id:htmlId("valign"),isClearable:false,options:alignOptions,selectedOptions:selectedAlignOption?[selectedAlignOption]:[],onChange:handleSelectChange("markdown_vertical_align"),singleSelection:{asPlainText:true}}))),_react["default"].createElement(_eui.EuiHorizontalRule,null),_react["default"].createElement(_eui.EuiTitle,{size:"xxs"},_react["default"].createElement("span",null,_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.markdown.optionsTab.customCSSLabel",defaultMessage:"Custom CSS (supports Less)",description:"CSS and Less are names of technologies and should not be translated."}))),_react["default"].createElement(_eui.EuiSpacer,{size:"s"}),_react["default"].createElement(_eui.EuiCodeEditor,{mode:"less",theme:"github",width:"100%",name:"ace-css-".concat(model.id),setOptions:{fontSize:"14px"},value:model.markdown_less,onChange:this.handleCSSChange})))}return _react["default"].createElement("div",null,_react["default"].createElement(_eui.EuiTabs,{size:"s"},_react["default"].createElement(_eui.EuiTab,{isSelected:selectedTab==="markdown",onClick:function onClick(){return _this3.switchTab("markdown")},"data-test-subj":"markdown-subtab"},"Markdown"),_react["default"].createElement(_eui.EuiTab,{"data-test-subj":"data-subtab",isSelected:selectedTab==="data",onClick:function onClick(){return _this3.switchTab("data")}},_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.markdown.dataTab.dataButtonLabel",defaultMessage:"Data"})),_react["default"].createElement(_eui.EuiTab,{isSelected:selectedTab==="options",onClick:function onClick(){return _this3.switchTab("options")},"data-test-subj":"options-subtab"},_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.markdown.optionsTab.panelOptionsButtonLabel",defaultMessage:"Panel options"}))),view)}}]);return MarkdownPanelConfigUi}(_react.Component);MarkdownPanelConfigUi.propTypes={fields:_propTypes["default"].object,model:_propTypes["default"].object,onChange:_propTypes["default"].func,dateFormat:_propTypes["default"].string,visData$:_propTypes["default"].object};var MarkdownPanelConfig=(0,_react2.injectI18n)(MarkdownPanelConfigUi);exports.MarkdownPanelConfig=MarkdownPanelConfig},5834:function(module,exports,__webpack_require__){module.exports=__webpack_require__(18)(2178)},5835:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.MarkdownEditor=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(17));var _react=_interopRequireWildcard(__webpack_require__(0));var _tick_formatter=__webpack_require__(344);var _convert_series_to_vars=__webpack_require__(1990);var _lodash=_interopRequireDefault(__webpack_require__(1));__webpack_require__(1994);__webpack_require__(5836);var _eui=__webpack_require__(2);var _react2=__webpack_require__(10);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var MarkdownEditor=function(_Component){_inherits(MarkdownEditor,_Component);function MarkdownEditor(){var _getPrototypeOf2;var _this;_classCallCheck(this,MarkdownEditor);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(MarkdownEditor)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"state",{visData:null});_defineProperty(_assertThisInitialized(_this),"subscription",null);_defineProperty(_assertThisInitialized(_this),"handleChange",function(value){_this.props.onChange({markdown:value})});_defineProperty(_assertThisInitialized(_this),"handleOnLoad",function(ace){_this.ace=ace});return _this}_createClass(MarkdownEditor,[{key:"componentDidMount",value:function componentDidMount(){var _this2=this;if(this.props.visData$){this.subscription=this.props.visData$.subscribe(function(visData){_this2.setState({visData:visData})})}}},{key:"componentWillUnmount",value:function componentWillUnmount(){if(this.subscription){this.subscription.unsubscribe()}}},{key:"handleVarClick",value:function handleVarClick(snippet){var _this3=this;return function(){if(_this3.ace)_this3.ace.insert(snippet)}}},{key:"render",value:function render(){var _this4=this;var visData=this.state.visData;if(!visData){return null}var _this$props=this.props,model=_this$props.model,dateFormat=_this$props.dateFormat;var series=_lodash["default"].get(visData,"".concat(model.id,".series"),[]);var variables=(0,_convert_series_to_vars.convertSeriesToVars)(series,model,dateFormat,this.props.getConfig);var rows=[];var rawFormatter=(0,_tick_formatter.tickFormatter)("0.[0000]",null,this.props.getConfig);var createPrimitiveRow=function createPrimitiveRow(key){var snippet="{{ ".concat(key," }}");var value=_lodash["default"].get(variables,key);if(/raw$/.test(key))value=rawFormatter(value);rows.push(_react["default"].createElement("tr",{key:key},_react["default"].createElement("td",null,_react["default"].createElement("a",{onClick:_this4.handleVarClick(snippet)},snippet)),_react["default"].createElement("td",null,_react["default"].createElement("code",null,"",value,""))))};var createArrayRow=function createArrayRow(key){var snippet="{{# ".concat(key," }}{{/ ").concat(key," }}");var date=_lodash["default"].get(variables,"".concat(key,"[0][0]"));var value=_lodash["default"].get(variables,"".concat(key,"[0][1]"));if(/raw$/.test(key))value=rawFormatter(value);rows.push(_react["default"].createElement("tr",{key:key},_react["default"].createElement("td",null,_react["default"].createElement("a",{onClick:_this4.handleVarClick(snippet)},"{{ ".concat(key," }}"))),_react["default"].createElement("td",null,_react["default"].createElement("code",null,"[ [ ",date,", ",value," ], ... ]"))))};function walk(obj){var path=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];for(var name in obj){if(Array.isArray(obj[name])){createArrayRow(path.concat(name).join("."))}else if(_lodash["default"].isObject(obj[name])){walk(obj[name],path.concat(name))}else{createPrimitiveRow(path.concat(name).join("."))}}}walk(variables);return _react["default"].createElement("div",{className:"tvbMarkdownEditor"},_react["default"].createElement("div",{className:"tvbMarkdownEditor__editor"},_react["default"].createElement(_eui.EuiCodeEditor,{onLoad:this.handleOnLoad,mode:"markdown",theme:"github",width:"100%",height:"100%",name:"ace-".concat(model.id),setOptions:{wrap:true,fontSize:"14px"},value:model.markdown,onChange:this.handleChange})),_react["default"].createElement("div",{className:"tvbMarkdownEditor__variables"},_react["default"].createElement(_eui.EuiText,null,_react["default"].createElement("p",null,_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.markdownEditor.howToUseVariablesInMarkdownDescription",defaultMessage:"The following variables can be used in the Markdown by using the Handlebar (mustache) syntax. {handlebarLink} on the available expressions.",values:{handlebarLink:_react["default"].createElement("a",{href:"http://handlebarsjs.com/expressions.html",target:"_BLANK",rel:"noreferrer noopener"},_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.markdownEditor.howUseVariablesInMarkdownDescription.documentationLinkText",defaultMessage:"Click here for documentation"}))}}))),_react["default"].createElement("table",{className:"table","data-test-subj":"tsvbMarkdownVariablesTable"},_react["default"].createElement("thead",null,_react["default"].createElement("tr",null,_react["default"].createElement("th",{scope:"col"},_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.markdownEditor.nameLabel",defaultMessage:"Name"})),_react["default"].createElement("th",{scope:"col"},_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.markdownEditor.valueLabel",defaultMessage:"Value"})))),_react["default"].createElement("tbody",null,rows)),rows.length===0&&_react["default"].createElement(_eui.EuiTitle,{size:"xxs",className:"tsvbMarkdownVariablesTable__noVariables","data-test-subj":"tvbMarkdownEditor__noVariables"},_react["default"].createElement("span",null,_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.markdownEditor.noVariablesAvailableDescription",defaultMessage:"No variables available for the selected data metrics."}))),_react["default"].createElement(_eui.EuiSpacer,null),_react["default"].createElement(_eui.EuiText,null,_react["default"].createElement("p",null,_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.markdownEditor.howToAccessEntireTreeDescription",defaultMessage:"There is also a special variable named {all} which you can use to access the entire tree. This is useful for creating lists with data from a group by:",values:{all:_react["default"].createElement("code",null,"_all")}}))),_react["default"].createElement(_eui.EuiSpacer,null),_react["default"].createElement(_eui.EuiCodeBlock,null,"# All servers:\n\n    {{#each _all}}\n    - {{ label }} {{ last.formatted }}\n    {{/each}}")))}}]);return MarkdownEditor}(_react.Component);exports.MarkdownEditor=MarkdownEditor;MarkdownEditor.propTypes={onChange:_propTypes["default"].func,model:_propTypes["default"].object,dateFormat:_propTypes["default"].string,visData$:_propTypes["default"].object}},5836:function(module,exports,__webpack_require__){module.exports=__webpack_require__(18)(2183)},5837:function(module,exports,__webpack_require__){module.exports=__webpack_require__(18)(2226)},5838:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.brushHandler=void 0;var _moment=_interopRequireDefault(__webpack_require__(23));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var brushHandler=function brushHandler(timefilter){return function(ranges){timefilter.setTime({from:(0,_moment["default"])(ranges.xaxis.from).toISOString(),to:(0,_moment["default"])(ranges.xaxis.to).toISOString(),mode:"absolute"})}};exports.brushHandler=brushHandler},5839:function(module,exports,__webpack_require__){"use strict";__webpack_require__(5840);var _i18n=__webpack_require__(5);var _vis_factory=__webpack_require__(97);var _schemas=__webpack_require__(113);var _vis_types=__webpack_require__(85);var _truncated_colormaps=__webpack_require__(505);var _util=__webpack_require__(1995);var _region_map_visualization=__webpack_require__(5843);var _update_status=__webpack_require__(313);var _origin=__webpack_require__(346);_vis_types.VisTypesRegistryProvider.register(function RegionMapProvider(Private,regionmapsConfig,config){var VisFactory=Private(_vis_factory.VisFactoryProvider);var RegionMapsVisualization=Private(_region_map_visualization.RegionMapsVisualizationProvider);var vectorLayers=regionmapsConfig.layers.map(_util.mapToLayerWithId.bind(null,_origin.ORIGIN.KIBANA_YML));var selectedLayer=vectorLayers[0];var selectedJoinField=selectedLayer?vectorLayers[0].fields[0]:null;return VisFactory.createBaseVisualization({name:"region_map",title:_i18n.i18n.translate("regionMap.mapVis.regionMapTitle",{defaultMessage:"Region Map"}),description:_i18n.i18n.translate("regionMap.mapVis.regionMapDescription",{defaultMessage:"Show metrics on a thematic map. Use one of the provided base maps, or add your own. Darker colors represent higher values."}),icon:"visMapRegion",visConfig:{defaults:{legendPosition:"bottomright",addTooltip:true,colorSchema:"Yellow to Red",selectedLayer:selectedLayer,emsHotLink:"",selectedJoinField:selectedJoinField,isDisplayWarning:true,wms:config.get("visualization:tileMap:WMSdefaults"),mapZoom:2,mapCenter:[0,0],outlineWeight:1,showAllShapes:true}},requiresUpdateStatus:[_update_status.Status.AGGS,_update_status.Status.PARAMS,_update_status.Status.RESIZE,_update_status.Status.DATA,_update_status.Status.UI_STATE],visualization:RegionMapsVisualization,editorConfig:{optionsTemplate:"<region_map-vis-params></region_map-vis-params>",collections:{legendPositions:[{value:"bottomleft",text:_i18n.i18n.translate("regionMap.mapVis.regionMapEditorConfig.bottomLeftText",{defaultMessage:"bottom left"})},{value:"bottomright",text:_i18n.i18n.translate("regionMap.mapVis.regionMapEditorConfig.bottomRightText",{defaultMessage:"bottom right"})},{value:"topleft",text:_i18n.i18n.translate("regionMap.mapVis.regionMapEditorConfig.topLeftText",{defaultMessage:"top left"})},{value:"topright",text:_i18n.i18n.translate("regionMap.mapVis.regionMapEditorConfig.topRightText",{defaultMessage:"top right"})}],colorSchemas:Object.values(_truncated_colormaps.truncatedColorMaps).map(function(value){return{id:value.id,label:value.label}}),vectorLayers:vectorLayers,tmsLayers:[]},schemas:new _schemas.Schemas([{group:"metrics",name:"metric",title:_i18n.i18n.translate("regionMap.mapVis.regionMapEditorConfig.schemas.metricTitle",{defaultMessage:"Value"}),min:1,max:1,aggFilter:["count","avg","sum","min","max","cardinality","top_hits","sum_bucket","min_bucket","max_bucket","avg_bucket"],defaults:[{schema:"metric",type:"count"}]},{group:"buckets",name:"segment",title:_i18n.i18n.translate("regionMap.mapVis.regionMapEditorConfig.schemas.segmentTitle",{defaultMessage:"Shape field"}),min:1,max:1,aggFilter:["terms"]}])}})})},5840:function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(12);var _notify=__webpack_require__(24);var _region_map_vis_params=_interopRequireDefault(__webpack_require__(5841));var _util=__webpack_require__(1995);__webpack_require__(1996);var _origin=__webpack_require__(346);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}_modules.uiModules.get("kibana/region_map").directive("regionMapVisParams",function(serviceSettings,regionmapsConfig){return{restrict:"E",template:_region_map_vis_params["default"],link:function link($scope){$scope.collections=$scope.vis.type.editorConfig.collections;$scope.onLayerChange=onLayerChange;if(regionmapsConfig.includeElasticMapsService){serviceSettings.getFileLayers().then(function(layersFromService){layersFromService=layersFromService.map(_util.mapToLayerWithId.bind(null,_origin.ORIGIN.EMS));var newVectorLayers=$scope.collections.vectorLayers.slice();var _loop=function _loop(i){var layerFromService=layersFromService[i];var alreadyAdded=newVectorLayers.some(function(layer){return layerFromService.layerId===layer.layerId});if(!alreadyAdded){if(layerFromService.format==="geojson"){layerFromService.format={type:"geojson"}}newVectorLayers.push(layerFromService)}};for(var i=0;i<layersFromService.length;i+=1){_loop(i)}$scope.collections.vectorLayers=newVectorLayers;if($scope.collections.vectorLayers[0]&&!$scope.editorState.params.selectedLayer){$scope.editorState.params.selectedLayer=$scope.collections.vectorLayers[0];onLayerChange()}setTimeout(function(){$scope.dirty=false},0)})["catch"](function(error){_notify.toastNotifications.addWarning(error.message)})}function onLayerChange(){return _onLayerChange.apply(this,arguments)}function _onLayerChange(){_onLayerChange=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if($scope.editorState.params.selectedLayer){_context.next=2;break}return _context.abrupt("return");case 2:$scope.editorState.params.selectedJoinField=$scope.editorState.params.selectedLayer.fields[0];if(!$scope.editorState.params.selectedLayer.isEMS){_context.next=11;break}$scope.editorState.params.emsHotLink=null;_context.next=7;return serviceSettings.getEMSHotLink($scope.editorState.params.selectedLayer);case 7:$scope.editorState.params.emsHotLink=_context.sent;$scope.$digest();_context.next=12;break;case 11:$scope.editorState.params.emsHotLink=null;case 12:case"end":return _context.stop()}}},_callee)}));return _onLayerChange.apply(this,arguments)}onLayerChange()}}})},5841:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<div class="visEditorSidebar__section">\n  <div class="form-group">\n    <div class="visEditorSidebar__sectionTitle">\n      <div\n        i18n-id="regionMap.visParams.layerSettingsTitle"\n        i18n-default-message="Layer Settings"\n      ></div>\n    </div>\n\n    <div class="visEditorSidebar__formRow">\n      <label\n        class="visEditorSidebar__formLabel"\n        for="regionMap"\n        i18n-id="regionMap.visParams.vectorMapLabel"\n        i18n-default-message="Vector map"\n      ></label>\n      <div class="visEditorSidebar__formControl">\n        <select\n          id="regionMap"\n          class="kuiSelect visEditorSidebar__select"\n          ng-model="editorState.params.selectedLayer"\n          ng-options="layer.name for layer in collections.vectorLayers track by layer.layerId"\n          ng-change="onLayerChange()"\n        ></select>\n      </div>\n    </div>\n\n    <div class="form-group clearfix" ng-hide="!editorState.params.emsHotLink">\n      <a\n        class="rgmEMSLink pull-right"\n        target="_blank"\n        rel="noopener noreferrer"\n        ng-href="{{editorState.params.emsHotLink}}"\n        target="_blank"\n        title="{{\'regionMap.visParams.previewOnEMSLinkTitle\' | i18n: {\n          defaultMessage: \'Preview {selectedLayerName} on the Elastic Maps Service\',\n          values: { selectedLayerName: editorState.params.selectedLayer.name }\n        } }}"\n      >\n        <icon aria-hidden size="\'s\'" type="\'link\'" />\n        <span\n          i18n-id="regionMap.visParams.previewOnEMSLinkText"\n          i18n-default-message="Preview on EMS"\n        ></span>\n      </a>\n    </div>\n\n    <div class="visEditorSidebar__formRow">\n      <label\n        class="visEditorSidebar__formLabel"\n        for="joinField"\n        i18n-id="regionMap.visParams.joinFieldLabel"\n        i18n-default-message="Join field"\n      ></label>\n      <div class="visEditorSidebar__formControl">\n        <select id="joinField"\n          class="kuiSelect visEditorSidebar__select"\n          ng-model="editorState.params.selectedJoinField"\n          ng-options="field.description for field in editorState.params.selectedLayer.fields track by field.name"\n        >\n          <option\n            value=\'\'\n            i18n-id="regionMap.visParams.selectOptionLabel"\n            i18n-default-message="Select"\n          ></option>\n        </select>\n      </div>\n    </div>\n    <div class="visEditorSidebar__formRow">\n      <label\n        class="visEditorSidebar__formLabel"\n        for="displayWarnings"\n        i18n-id="regionMap.visParams.displayWarningsLabel"\n        i18n-default-message="Display warnings"\n      ></label>\n\n      <div class="visEditorSidebar__formControl">\n        <input id="displayWarnings" type="checkbox" ng-model="editorState.params.isDisplayWarning">\n        &nbsp;\n        <icon-tip\n          content="::\'regionMap.visParams.switchWarningsTipText\' | i18n: {\n            defaultMessage: \'Turns on/off warnings. When turned on, warning will be shown for each term that cannot be matched to a shape in the vector layer based on the join field. When turned off, these warnings will be turned off.\'\n          }"\n          position="\'right\'"\n        ></icon-tip>\n      </div>\n    </div>\n    <div class="visEditorSidebar__formRow">\n      <label\n        class="visEditorSidebar__formLabel"\n        for="onlyShowMatchingShapes"\n        i18n-id="regionMap.visParams.showAllShapesLabel"\n        i18n-default-message="Show all shapes"\n      ></label>\n      <div class="visEditorSidebar__formControl">\n        <input id="onlyShowMatchingShapes" type="checkbox" ng-model="editorState.params.showAllShapes">\n        &nbsp;\n        <icon-tip\n          content="::\'regionMap.visParams.turnOffShowingAllShapesTipText\' | i18n: {\n            defaultMessage: \'Turning this off only shows the shapes that were matched with a corresponding term\'\n          }"\n          position="\'right\'"\n        ></icon-tip>\n      </div>\n    </div>\n  </div>\n</div>\n\n<div class="visEditorSidebar__section">\n\n  <div class="visEditorSidebar__sectionTitle">\n    <div\n      i18n-id="regionMap.visParams.styleSettingsLabel"\n      i18n-default-message="Style settings"\n    ></div>\n  </div>\n  <div class="visEditorSidebar__formRow" >\n    <label\n      class="visEditorSidebar__formLabel"\n      for="colorSchema"\n      i18n-id="regionMap.visParams.colorSchemaLabel"\n      i18n-default-message="Color Schema"\n    ></label>\n    <div class="visEditorSidebar__formControl">\n      <select\n        id="colorSchema"\n        class="kuiSelect visEditorSidebar__select"\n        ng-model="editorState.params.colorSchema"\n        ng-options="mode.id as mode.label for mode in collections.colorSchemas"\n      ></select>\n    </div>\n  </div>\n  <div class="visEditorSidebar__formRow" >\n    <label\n      class="visEditorSidebar__formLabel"\n      for="outlineWeight"\n      i18n-id="regionMap.visParams.outlineWeightLabel"\n      i18n-default-message="Outline weight"\n      i18n-description="Describes the width of a line surrounding a country on a map."\n    ></label>\n    <div class="visEditorSidebar__formControl">\n      <input\n        id="outlineWeight"\n        class="kuiInput visEditorSidebar__input"\n        type="number"\n        ng-model="editorState.params.outlineWeight"\n      >\n    </div>\n  </div>\n</div>\n\n<wms-options options="editorState.params.wms" collections="collections"></wms-options>\n'},5842:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<div>\n\n\n  <div class="visEditorSidebar__section">\n    <div class="visEditorSidebar__sectionTitle">\n      <div\n        i18n-id="tileMap.wmsOptions.baseLayerSettingsTitle"\n        i18n-default-message="Base Layer Settings"\n      ></div>\n    </div>\n\n\n    <div class="visEditorSidebar__formRow" ng-show="!options.enabled">\n      <label\n        class="visEditorSidebar__formLabel"\n        for="tmsLayers"\n        i18n-id="tileMap.wmsOptions.layersLabel"\n        i18n-default-message="Layers"\n      ></label>\n      <div class="visEditorSidebar__formControl">\n        <select\n          id="tmsLayers"\n          class="kuiSelect visEditorSidebar__select"\n          ng-model="options.selectedTmsLayer"\n          ng-options="layer.id for layer in collections.tmsLayers track by layer.id"\n        ></select>\n      </div>\n    </div>\n\n    <div class="visEditorSidebar__formRow">\n      <label\n        class="visEditorSidebar__formLabel"\n        for="wmsCompliantMapServer"\n        i18n-id="tileMap.wmsOptions.wmsMapServerLabel"\n        i18n-default-message="WMS map server"\n      ></label>\n\n      <div class="visEditorSidebar__formControl">\n        <input\n          id="wmsCompliantMapServer"\n          type="checkbox"\n          name="wms.enabled"\n          ng-model="options.enabled"\n        >\n        &nbsp;\n        <icon-tip\n          content="::\'tileMap.wmsOptions.useWMSCompliantMapTileServerTip\' | i18n: {\n            defaultMessage: \'Use WMS compliant map tile server. For advanced users only.\'\n          }"\n          position="\'right\'"\n        ></icon-tip>\n      </div>\n    </div>\n\n    <div ng-show="options.enabled">\n      <div class="form-group">\n        <p\n          i18n-id="tileMap.wmsOptions.wmsDescription"\n          i18n-default-message="WMS is an OGC standard for map image services. For more information, go {wmsLink}."\n          i18n-values="{\n            html_wmsLink:  \'<a href=\\\'http://www.opengeospatial.org/standards/wms\\\'>\' + wmsLinkText + \'</a>\'\n          }"\n        ></p>\n\t\t<br>\n        <label>\n          <span\n            i18n-id="tileMap.wmsOptions.wmsUrlLabel"\n            i18n-default-message="WMS url*"\n          ></span>\n          <icon-tip\n            content="::\'tileMap.wmsOptions.urlOfWMSWebServiceTip\' | i18n: {\n              defaultMessage: \'The URL of the WMS web service\'\n            }"\n            position="\'right\'"\n          ></icon-tip>\n        </label>\n        <input type="text" class="form-control"\n               name="wms.url"\n               ng-model="options.url">\n      </div>\n\n      <div class="form-group">\n        <label>\n          <span\n            i18n-id="tileMap.wmsOptions.wmsLayersLabel"\n            i18n-default-message="WMS layers*"\n          ></span>\n          <icon-tip\n            content="::\'tileMap.wmsOptions.listOfLayersToUseTip\' | i18n: {\n              defaultMessage: \'A comma separated list of layers to use\'\n            }"\n            position="\'right\'"\n          ></icon-tip>\n        </label>\n        <input type="text" class="form-control"\n               ng-require="options.enabled"\n               name="wms.options.layers"\n               ng-model="options.options.layers">\n      </div>\n\n      <div class="form-group">\n        <label>\n          <span\n            i18n-id="tileMap.wmsOptions.wmsVersionLabel"\n            i18n-default-message="WMS version*"\n          ></span>\n          <icon-tip\n            content="::\'tileMap.wmsOptions.versionOfWMSserverSupportsTip\' | i18n: {\n              defaultMessage: \'The version of WMS the server supports\'\n            }"\n            position="\'right\'"\n          ></icon-tip>\n        </label>\n        <input type="text" class="form-control"\n               name="wms.options.version"\n               ng-model="options.options.version">\n      </div>\n\n      <div class="form-group">\n        <label>\n          <span\n            i18n-id="tileMap.wmsOptions.wmsFormatLabel"\n            i18n-default-message="WMS format*"\n          ></span>\n          <icon-tip\n            content="::\'tileMap.wmsOptions.imageFormatToUseTip\' | i18n: {\n              defaultMessage: \'Usually image/png or image/jpeg. Use png if the server will return transparent layers.\'\n            }"\n            position="\'right\'"\n          ></icon-tip>\n        </label>\n        <input type="text" class="form-control"\n               name="wms.options.format"\n               ng-model="options.options.format">\n      </div>\n\n      <div class="form-group">\n        <label>\n          <span\n            i18n-id="tileMap.wmsOptions.wmsAttributionLabel"\n            i18n-default-message="WMS attribution"\n          ></span>\n          <icon-tip\n            content="::\'tileMap.wmsOptions.attributionStringTip\' | i18n: {\n              defaultMessage: \'Attribution string for the lower right corner\'\n            }"\n            position="\'right\'"\n          ></icon-tip>\n        </label>\n        <input type="text" class="form-control"\n               name="wms.options.attribution"\n               ng-model="options.options.attribution">\n      </div>\n\n      <div class="form-group">\n        <label>\n          <span\n            i18n-id="tileMap.wmsOptions.wmsStylesLabel"\n            i18n-default-message="WMS styles*"\n          ></span>\n          <icon-tip\n            content="::\'tileMap.wmsOptions.wmsServerSupportedStylesListTip\' | i18n: {\n              defaultMessage: \'A comma separated list of WMS server supported styles to use. Blank in most cases.\'\n            }"\n            position="\'right\'"\n          ></icon-tip>\n        </label>\n        <input type="text" class="form-control"\n               name="wms.options.styles"\n               ng-model="options.options.styles">\n      </div>\n\n      <p\n        i18n-id="tileMap.wmsOptions.mapLoadFailDescription"\n        i18n-default-message="* if this parameter is incorrect, maps will fail to load."\n      ></p>\n\n\n    </div>\n  </div>\n</div>\n'},5843:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.RegionMapsVisualizationProvider=RegionMapsVisualizationProvider;__webpack_require__(807);var _i18n=__webpack_require__(5);var _base_maps_visualization=__webpack_require__(1997);var _choropleth_layer=_interopRequireDefault(__webpack_require__(5850));var _truncated_colormaps=__webpack_require__(505);var _utilities=__webpack_require__(173);var _tooltip_formatter=__webpack_require__(5852);__webpack_require__(1999);var _notify=__webpack_require__(24);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _get(target,property,receiver){if(typeof Reflect!=="undefined"&&Reflect.get){_get=Reflect.get}else{_get=function _get(target,property,receiver){var base=_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(receiver)}return desc.value}}return _get(target,property,receiver||target)}function _superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=_getPrototypeOf(object);if(object===null)break}return object}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function RegionMapsVisualizationProvider(Private,config){var tooltipFormatter=Private(_tooltip_formatter.TileMapTooltipFormatter);var BaseMapsVisualization=Private(_base_maps_visualization.BaseMapsVisualizationProvider);return function(_BaseMapsVisualizatio){_inherits(RegionMapsVisualization,_BaseMapsVisualizatio);function RegionMapsVisualization(container,vis){var _this;_classCallCheck(this,RegionMapsVisualization);_this=_possibleConstructorReturn(this,_getPrototypeOf(RegionMapsVisualization).call(this,container,vis));_this._vis=_this.vis;_this._choroplethLayer=null;return _this}_createClass(RegionMapsVisualization,[{key:"render",value:function(){var _render=_asyncToGenerator(regeneratorRuntime.mark(function _callee(esResponse,visParams,status){return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return _get(_getPrototypeOf(RegionMapsVisualization.prototype),"render",this).call(this,esResponse,visParams,status);case 2:if(!this._choroplethLayer){_context.next=5;break}_context.next=5;return this._choroplethLayer.whenDataLoaded();case 5:case"end":return _context.stop()}}},_callee,this)}));function render(_x,_x2,_x3){return _render.apply(this,arguments)}return render}()},{key:"_updateData",value:function(){var _updateData2=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(table){var termColumn,valueColumn,results,metricFieldFormatter;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:this._chartData=table;termColumn=this._params.bucket?table.columns[this._params.bucket.accessor]:null;valueColumn=table.columns[this._params.metric.accessor];if(!this._hasColumns()||!table.rows.length){results=[]}else{results=table.rows.map(function(row){var term=row[termColumn.id];var value=row[valueColumn.id];return{term:term,value:value}})}if(!this._params.selectedJoinField&&this._params.selectedLayer){this._params.selectedJoinField=this._params.selectedLayer.fields[0]}if(this._params.selectedLayer){_context2.next=7;break}return _context2.abrupt("return");case 7:this._updateChoroplethLayerForNewMetrics(this._params.selectedLayer.name,this._params.selectedLayer.attribution,this._params.showAllShapes,results);metricFieldFormatter=(0,_utilities.getFormat)(this._params.metric.format);this._choroplethLayer.setMetrics(results,metricFieldFormatter,valueColumn.name);if(termColumn&&valueColumn){this._choroplethLayer.setTooltipFormatter(tooltipFormatter,metricFieldFormatter,termColumn.name,valueColumn.name)}this._kibanaMap.useUiStateFromVisualization(this._vis);case 12:case"end":return _context2.stop()}}},_callee2,this)}));function _updateData(_x4){return _updateData2.apply(this,arguments)}return _updateData}()},{key:"_updateParams",value:function(){var _updateParams2=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(){var visParams,metricFieldFormatter;return regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return _get(_getPrototypeOf(RegionMapsVisualization.prototype),"_updateParams",this).call(this);case 2:visParams=this._params;if(!visParams.selectedJoinField&&visParams.selectedLayer){visParams.selectedJoinField=visParams.selectedLayer.fields[0]}if(!(!visParams.selectedJoinField||!visParams.selectedLayer)){_context3.next=6;break}return _context3.abrupt("return");case 6:this._updateChoroplethLayerForNewProperties(visParams.selectedLayer.name,visParams.selectedLayer.attribution,this._params.showAllShapes);metricFieldFormatter=(0,_utilities.getFormat)(this._params.metric.format);this._choroplethLayer.setJoinField(visParams.selectedJoinField.name);this._choroplethLayer.setColorRamp(_truncated_colormaps.truncatedColorMaps[visParams.colorSchema].value);this._choroplethLayer.setLineWeight(visParams.outlineWeight);this._choroplethLayer.setTooltipFormatter(tooltipFormatter,metricFieldFormatter,this._metricLabel);case 12:case"end":return _context3.stop()}}},_callee3,this)}));function _updateParams(){return _updateParams2.apply(this,arguments)}return _updateParams}()},{key:"_updateChoroplethLayerForNewMetrics",value:function _updateChoroplethLayerForNewMetrics(name,attribution,showAllData,newMetrics){if(this._choroplethLayer&&this._choroplethLayer.canReuseInstanceForNewMetrics(name,showAllData,newMetrics)){return}return this._recreateChoroplethLayer(name,attribution,showAllData)}},{key:"_updateChoroplethLayerForNewProperties",value:function _updateChoroplethLayerForNewProperties(name,attribution,showAllData){if(this._choroplethLayer&&this._choroplethLayer.canReuseInstance(name,showAllData)){return}return this._recreateChoroplethLayer(name,attribution,showAllData)}},{key:"_recreateChoroplethLayer",value:function _recreateChoroplethLayer(name,attribution,showAllData){var _this2=this;this._kibanaMap.removeLayer(this._choroplethLayer);if(this._choroplethLayer){this._choroplethLayer=this._choroplethLayer.cloneChoroplethLayerForNewData(name,attribution,this._params.selectedLayer.format,showAllData,this._params.selectedLayer.meta,this._params.selectedLayer)}else{this._choroplethLayer=new _choropleth_layer["default"](name,attribution,this._params.selectedLayer.format,showAllData,this._params.selectedLayer.meta,this._params.selectedLayer)}this._choroplethLayer.on("select",function(event){var rowIndex=_this2._chartData.rows.findIndex(function(row){return row[0]===event});_this2._vis.API.events.filter({table:_this2._chartData,column:0,row:rowIndex,value:event})});this._choroplethLayer.on("styleChanged",function(event){var shouldShowWarning=_this2._params.isDisplayWarning&&config.get("visualization:regionmap:showWarnings");if(event.mismatches.length>0&&shouldShowWarning){_notify.toastNotifications.addWarning({title:_i18n.i18n.translate("regionMap.visualization.unableToShowMismatchesWarningTitle",{defaultMessage:"Unable to show {mismatchesLength} {oneMismatch, plural, one {result} other {results}} on map",values:{mismatchesLength:event.mismatches.length,oneMismatch:event.mismatches.length>1?0:1}}),text:_i18n.i18n.translate("regionMap.visualization.unableToShowMismatchesWarningText",{defaultMessage:"Ensure that each of these term matches a shape on that shape's join field: {mismatches}",values:{mismatches:event.mismatches?event.mismatches.join(", "):""}})})}});this._kibanaMap.addLayer(this._choroplethLayer)}},{key:"_hasColumns",value:function _hasColumns(){return this._chartData&&this._chartData.columns.length===2}}]);return RegionMapsVisualization}(BaseMapsVisualization)}},5844:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createZoomWarningMsg=void 0;var _notify=__webpack_require__(24);var _react=_interopRequireDefault(__webpack_require__(0));var _react2=__webpack_require__(10);var _eui=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var createZoomWarningMsg=function(){var disableZoomMsg=false;var setZoomMsg=function setZoomMsg(boolDisableMsg){return disableZoomMsg=boolDisableMsg};var ZoomWarning=function(_React$Component){_inherits(ZoomWarning,_React$Component);function ZoomWarning(props){var _this;_classCallCheck(this,ZoomWarning);_this=_possibleConstructorReturn(this,_getPrototypeOf(ZoomWarning).call(this,props));_this.state={disabled:false};return _this}_createClass(ZoomWarning,[{key:"render",value:function render(){var _this2=this;return _react["default"].createElement("div",null,_react["default"].createElement("p",null,_react["default"].createElement(_react2.FormattedMessage,{id:"common.ui.vis.kibanaMap.zoomWarning",defaultMessage:"You've reached the maximum number of zoom levels. To zoom all the way in, upgrade to the {defaultDistribution} of Elasticsearch and Kibana. You'll get access to additional zoom levels for free through the {ems}. Or, you can configure your own map server. Please go to { wms } or { configSettings} for more information.",values:{defaultDistribution:_react["default"].createElement("a",{target:"_blank",href:"https://www.elastic.co/downloads/kibana"},"default distribution "),ems:_react["default"].createElement("a",{target:"_blank",href:"https://www.elastic.co/elastic-maps-service"},"Elastic Maps Service"),wms:_react["default"].createElement("a",{target:"_blank",href:"https://www.elastic.co/guide/en/kibana/current/tilemap.html"},"Custom WMS Configuration"),configSettings:_react["default"].createElement("a",{target:"_blank",href:"https://www.elastic.co/guide/en/kibana/current/settings.html"},"Custom TMS Using Config Settings")}})),_react["default"].createElement(_eui.EuiSpacer,{size:"xs"}),_react["default"].createElement(_eui.EuiButtonEmpty,{size:"s",flush:"left",isDisabled:this.state.disabled,onClick:function onClick(){_this2.setState({disabled:true},function(){return _this2.props.onChange(_this2.state.disabled)})},"data-test-subj":"suppressZoomWarnings"},"Don't show again"))}}]);return ZoomWarning}(_react["default"].Component);var zoomToast={title:"No additional zoom levels",text:_react["default"].createElement(ZoomWarning,{onChange:setZoomMsg}),"data-test-subj":"maxZoomWarning"};return function(getZoomLevel,getMaxZoomLevel){return function(){var zoomLevel=getZoomLevel();var maxMapZoom=getMaxZoomLevel();if(!disableZoomMsg&&zoomLevel===maxMapZoom){_notify.toastNotifications.addDanger(zoomToast)}}}}();exports.createZoomWarningMsg=createZoomWarningMsg},5845:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.zoomToPrecision=zoomToPrecision;var _decode_geo_hash=__webpack_require__(794);var maxPrecision=12;var zoomPrecisionMap={};var minGeohashPixels=16;function calculateZoomToPrecisionMap(maxZoom){for(var zoom=0;zoom<=maxZoom;zoom+=1){if(typeof zoomPrecisionMap[zoom]==="number"){continue}var worldPixels=256*Math.pow(2,zoom);zoomPrecisionMap[zoom]=1;for(var precision=2;precision<=maxPrecision;precision+=1){var columns=(0,_decode_geo_hash.geohashColumns)(precision);if(worldPixels/columns>=minGeohashPixels){zoomPrecisionMap[zoom]=precision}else{break}}}}function zoomToPrecision(mapZoom,maxPrecision,maxZoom){calculateZoomToPrecisionMap(typeof maxZoom==="number"?maxZoom:21);return Math.min(zoomPrecisionMap[mapZoom],maxPrecision)}},5846:function(module,exports,__webpack_require__){"use strict";function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}Object.defineProperty(exports,"__esModule",{value:true});exports.EMSClient=void 0;var _markdownIt=_interopRequireDefault(__webpack_require__(429));var _lodash=_interopRequireDefault(__webpack_require__(1));var _tms_service=__webpack_require__(5847);var _file_layer=__webpack_require__(5848);var _nodeFetch=_interopRequireDefault(__webpack_require__(5849));var _url=__webpack_require__(79);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var extendUrl=function extendUrl(url,props){return modifyUrlLocal(url,function(parsed){return _lodash["default"].merge(parsed,props)})};var markdownIt=new _markdownIt["default"]({html:false,linkify:true});function modifyUrlLocal(url,block){var parsed=(0,_url.parse)(url,true);var meaningfulParts={protocol:parsed.protocol,slashes:parsed.slashes,auth:parsed.auth,hostname:parsed.hostname,port:parsed.port,pathname:parsed.pathname,query:parsed.query||{},hash:parsed.hash};var modifiedParts=block(meaningfulParts)||meaningfulParts;return(0,_url.format)({protocol:modifiedParts.protocol,slashes:modifiedParts.slashes,auth:modifiedParts.auth,hostname:modifiedParts.hostname,port:modifiedParts.port,pathname:modifiedParts.pathname,query:modifiedParts.query,hash:modifiedParts.hash})}var unescapeTemplateVars=function unescapeTemplateVars(url){var ENCODED_TEMPLATE_VARS_RE=/%7B(\w+?)%7D/g;return url.replace(ENCODED_TEMPLATE_VARS_RE,function(total,varName){return"{".concat(varName,"}")})};var DEFAULT_LANGUAGE="en";var EMSClient=function(){function EMSClient(_ref){var kbnVersion=_ref.kbnVersion,manifestServiceUrl=_ref.manifestServiceUrl,htmlSanitizer=_ref.htmlSanitizer,language=_ref.language,landingPageUrl=_ref.landingPageUrl;_classCallCheck(this,EMSClient);_defineProperty(this,"EMS_LOAD_TIMEOUT",32e3);this._queryParams={elastic_tile_service_tos:"agree",my_app_name:"kibana",my_app_version:kbnVersion};this._sanitizer=htmlSanitizer?htmlSanitizer:function(x){return x};this._manifestServiceUrl=manifestServiceUrl;this._loadFileLayers=null;this._loadTMSServices=null;this._emsLandingPageUrl=typeof landingPageUrl==="string"?landingPageUrl:"";this._language=typeof language==="string"?language:DEFAULT_LANGUAGE;this._invalidateSettings()}_createClass(EMSClient,[{key:"getDefaultLocale",value:function getDefaultLocale(){return DEFAULT_LANGUAGE}},{key:"getLocale",value:function getLocale(){return this._language}},{key:"getValueInLanguage",value:function getValueInLanguage(i18nObject){if(!i18nObject){return""}return i18nObject[this._language]?i18nObject[this._language]:i18nObject[DEFAULT_LANGUAGE]}},{key:"getManifest",value:function(){var _getManifest=_asyncToGenerator(regeneratorRuntime.mark(function _callee(manifestUrl){var result,url;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;url=extendUrl(manifestUrl,{query:this._queryParams});_context.next=4;return this._fetchWithTimeout(url);case 4:result=_context.sent;_context.next=12;break;case 7:_context.prev=7;_context.t0=_context["catch"](0);if(!_context.t0){_context.t0=new Error("Unknown error")}if(!(_context.t0 instanceof Error)){_context.t0=new Error(_context.t0.data||"status ".concat(_context.t0.statusText||_context.t0.status))}throw new Error("Unable to retrieve manifest from ".concat(manifestUrl,": ").concat(_context.t0.message));case 12:_context.prev=12;if(!result){_context.next=19;break}_context.next=16;return result.json();case 16:_context.t1=_context.sent;_context.next=20;break;case 19:_context.t1=null;case 20:return _context.abrupt("return",_context.t1);case 22:case"end":return _context.stop()}}},_callee,this,[[0,7,12,22]])}));function getManifest(_x){return _getManifest.apply(this,arguments)}return getManifest}()},{key:"_fetchWithTimeout",value:function _fetchWithTimeout(url){var _this=this;return new Promise(function(resolve,reject){var timer=setTimeout(function(){return reject(new Error("Request to ".concat(url," timed out")))},_this.EMS_LOAD_TIMEOUT);(0,_nodeFetch["default"])(url).then(function(response){clearTimeout(timer);resolve(response)},function(err){clearTimeout(timer);reject(err)})})}},{key:"addQueryParams",value:function addQueryParams(additionalQueryParams){for(var key in additionalQueryParams){if(additionalQueryParams.hasOwnProperty(key)){if(additionalQueryParams[key]!==this._queryParams[key]){this._queryParams=_lodash["default"].assign({},this._queryParams,additionalQueryParams);this._invalidateSettings();break}}}}},{key:"_invalidateSettings",value:function _invalidateSettings(){var _this2=this;this._getManifestWithParams=_lodash["default"].once(function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(url){return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:return _context2.abrupt("return",_this2.getManifest(_this2.extendUrlWithParams(url)));case 1:case"end":return _context2.stop()}}},_callee2)}));return function(_x2){return _ref2.apply(this,arguments)}}());this._getCatalogueService=function(){var _ref3=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(serviceType){var catalogueManifest,service;return regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return _this2._getManifestWithParams(_this2._manifestServiceUrl);case 2:catalogueManifest=_context3.sent;if(_lodash["default"].has(catalogueManifest,"services")){service=catalogueManifest.services.find(function(s){return s.type===serviceType})}return _context3.abrupt("return",service||{});case 5:case"end":return _context3.stop()}}},_callee3)}));return function(_x3){return _ref3.apply(this,arguments)}}();this._wrapServiceAttribute=function(){var _ref4=_asyncToGenerator(regeneratorRuntime.mark(function _callee4(manifestUrl,attr,WrapperClass){var manifest;return regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return _this2.getManifest(manifestUrl);case 2:manifest=_context4.sent;if(!_lodash["default"].has(manifest,attr)){_context4.next=5;break}return _context4.abrupt("return",manifest[attr].map(function(config){return new WrapperClass(config,_this2)}));case 5:return _context4.abrupt("return",[]);case 6:case"end":return _context4.stop()}}},_callee4)}));return function(_x4,_x5,_x6){return _ref4.apply(this,arguments)}}();this._loadFileLayers=_lodash["default"].once(_asyncToGenerator(regeneratorRuntime.mark(function _callee5(){var fileService;return regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return _this2._getCatalogueService("file");case 2:fileService=_context5.sent;return _context5.abrupt("return",_lodash["default"].isEmpty(fileService)?[]:_this2._wrapServiceAttribute(fileService.manifest,"layers",_file_layer.FileLayer));case 4:case"end":return _context5.stop()}}},_callee5)})));this._loadTMSServices=_lodash["default"].once(_asyncToGenerator(regeneratorRuntime.mark(function _callee6(){var tmsService;return regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.next=2;return _this2._getCatalogueService("tms");case 2:tmsService=_context6.sent;if(!_lodash["default"].isEmpty(tmsService)){_context6.next=7;break}_context6.t0=[];_context6.next=10;break;case 7:_context6.next=9;return _this2._wrapServiceAttribute(tmsService.manifest,"services",_tms_service.TMSService);case 9:_context6.t0=_context6.sent;case 10:return _context6.abrupt("return",_context6.t0);case 11:case"end":return _context6.stop()}}},_callee6)})))}},{key:"getLandingPageUrl",value:function getLandingPageUrl(){return this._emsLandingPageUrl}},{key:"sanitizeMarkdown",value:function sanitizeMarkdown(markdown){return this._sanitizer(markdownIt.render(markdown))}},{key:"sanitizeHtml",value:function sanitizeHtml(html){return this._sanitizer(html)}},{key:"extendUrlWithParams",value:function extendUrlWithParams(url){return unescapeTemplateVars(extendUrl(url,{query:this._queryParams}))}},{key:"getFileLayers",value:function(){var _getFileLayers=_asyncToGenerator(regeneratorRuntime.mark(function _callee7(){return regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.next=2;return this._loadFileLayers();case 2:return _context7.abrupt("return",_context7.sent);case 3:case"end":return _context7.stop()}}},_callee7,this)}));function getFileLayers(){return _getFileLayers.apply(this,arguments)}return getFileLayers}()},{key:"getTMSServices",value:function(){var _getTMSServices=_asyncToGenerator(regeneratorRuntime.mark(function _callee8(){return regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:_context8.next=2;return this._loadTMSServices();case 2:return _context8.abrupt("return",_context8.sent);case 3:case"end":return _context8.stop()}}},_callee8,this)}));function getTMSServices(){return _getTMSServices.apply(this,arguments)}return getTMSServices}()},{key:"findFileLayerById",value:function(){var _findFileLayerById=_asyncToGenerator(regeneratorRuntime.mark(function _callee9(id){var fileLayers,i;return regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:_context9.next=2;return this.getFileLayers();case 2:fileLayers=_context9.sent;i=0;case 4:if(!(i<fileLayers.length)){_context9.next=10;break}if(!fileLayers[i].hasId(id)){_context9.next=7;break}return _context9.abrupt("return",fileLayers[i]);case 7:i++;_context9.next=4;break;case 10:case"end":return _context9.stop()}}},_callee9,this)}));function findFileLayerById(_x7){return _findFileLayerById.apply(this,arguments)}return findFileLayerById}()},{key:"findTMSServiceById",value:function(){var _findTMSServiceById=_asyncToGenerator(regeneratorRuntime.mark(function _callee10(id){var tmsServices,i;return regeneratorRuntime.wrap(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:_context10.next=2;return this.getTMSServices();case 2:tmsServices=_context10.sent;i=0;case 4:if(!(i<tmsServices.length)){_context10.next=10;break}if(!tmsServices[i].hasId(id)){_context10.next=7;break}return _context10.abrupt("return",tmsServices[i]);case 7:i++;_context10.next=4;break;case 10:case"end":return _context10.stop()}}},_callee10,this)}));function findTMSServiceById(_x8){return _findTMSServiceById.apply(this,arguments)}return findTMSServiceById}()}]);return EMSClient}();exports.EMSClient=EMSClient},5847:function(module,exports,__webpack_require__){"use strict";function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}Object.defineProperty(exports,"__esModule",{value:true});exports.TMSService=void 0;var _lodash=_interopRequireDefault(__webpack_require__(1));var _origin=__webpack_require__(346);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var TMSService=function(){function TMSService(config,emsClient){var _this=this;_classCallCheck(this,TMSService);_defineProperty(this,"_getTileJson",_lodash["default"].once(function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(url){return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:return _context.abrupt("return",_this._emsClient.getManifest(_this._emsClient.extendUrlWithParams(url)));case 1:case"end":return _context.stop()}}},_callee)}));return function(_x){return _ref.apply(this,arguments)}}()));this._config=config;this._emsClient=emsClient}_createClass(TMSService,[{key:"_getRasterFormats",value:function _getRasterFormats(locale){return this._config.formats.filter(function(format){return format.locale===locale&&format.format==="raster"})}},{key:"_getDefaultStyleUrl",value:function _getDefaultStyleUrl(){var rasterFormats=this._getRasterFormats(this._emsClient.getLocale());if(!rasterFormats.length){rasterFormats=this._getRasterFormats(this._emsClient.getDefaultLocale())}if(!rasterFormats.length){throw new Error("Cannot find raster tile layer for locale ".concat(this._emsClient.getLocale()," or ").concat(this._emsClient.getDefaultLocale()))}var defaultStyle=rasterFormats[0];if(defaultStyle&&defaultStyle.hasOwnProperty("url")){return defaultStyle.url}}},{key:"getUrlTemplate",value:function(){var _getUrlTemplate=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(){var defaultStyle,tileJson;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:defaultStyle=this._getDefaultStyleUrl();_context2.next=3;return this._getTileJson(defaultStyle);case 3:tileJson=_context2.sent;return _context2.abrupt("return",this._emsClient.extendUrlWithParams(tileJson.tiles[0]));case 5:case"end":return _context2.stop()}}},_callee2,this)}));function getUrlTemplate(){return _getUrlTemplate.apply(this,arguments)}return getUrlTemplate}()},{key:"getDisplayName",value:function getDisplayName(){return this._emsClient.getValueInLanguage(this._config.name)}},{key:"getAttributions",value:function getAttributions(){var _this2=this;return this._config.attribution.map(function(attribution){var url=_this2._emsClient.getValueInLanguage(attribution.url);var label=_this2._emsClient.getValueInLanguage(attribution.label);return{url:url,label:label}})}},{key:"getHTMLAttribution",value:function getHTMLAttribution(){var _this3=this;var attributions=this._config.attribution.map(function(attribution){var url=_this3._emsClient.getValueInLanguage(attribution.url);var label=_this3._emsClient.getValueInLanguage(attribution.label);var html=url?'<a rel="noreferrer noopener" href="'.concat(url,'">').concat(label,"</a>"):label;return _this3._emsClient.sanitizeHtml("".concat(html))});return"<p>".concat(attributions.join(" | "),"</p>");//!!!this is the current convention used in Kibana
}},{key:"getMarkdownAttribution",value:function getMarkdownAttribution(){var _this4=this;var attributions=this._config.attribution.map(function(attribution){var url=_this4._emsClient.getValueInLanguage(attribution.url);var label=_this4._emsClient.getValueInLanguage(attribution.label);var markdown="[".concat(label,"](").concat(url,")");return markdown});return attributions.join("|")}},{key:"getMinZoom",value:function(){var _getMinZoom=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(){var tileJson;return regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return this._getTileJson(this._getDefaultStyleUrl());case 2:tileJson=_context3.sent;return _context3.abrupt("return",tileJson.minzoom);case 4:case"end":return _context3.stop()}}},_callee3,this)}));function getMinZoom(){return _getMinZoom.apply(this,arguments)}return getMinZoom}()},{key:"getMaxZoom",value:function(){var _getMaxZoom=_asyncToGenerator(regeneratorRuntime.mark(function _callee4(){var tileJson;return regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return this._getTileJson(this._getDefaultStyleUrl());case 2:tileJson=_context4.sent;return _context4.abrupt("return",tileJson.maxzoom);case 4:case"end":return _context4.stop()}}},_callee4,this)}));function getMaxZoom(){return _getMaxZoom.apply(this,arguments)}return getMaxZoom}()},{key:"getId",value:function getId(){return this._config.id}},{key:"hasId",value:function hasId(id){return this._config.id===id}},{key:"getOrigin",value:function getOrigin(){return _origin.ORIGIN.EMS}}]);return TMSService}();exports.TMSService=TMSService},5848:function(module,exports,__webpack_require__){"use strict";function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}Object.defineProperty(exports,"__esModule",{value:true});exports.FileLayer=void 0;var _origin=__webpack_require__(346);var _url=_interopRequireDefault(__webpack_require__(79));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var FileLayer=function(){function FileLayer(config,emsClient){_classCallCheck(this,FileLayer);this._config=config;this._emsClient=emsClient}_createClass(FileLayer,[{key:"getAttributions",value:function getAttributions(){var _this=this;var attributions=this._config.attribution.map(function(attribution){var url=_this._emsClient.getValueInLanguage(attribution.url);var label=_this._emsClient.getValueInLanguage(attribution.label);return{url:url,label:label}});return attributions}},{key:"getHTMLAttribution",value:function getHTMLAttribution(){var _this2=this;var attributions=this._config.attribution.map(function(attribution){var url=_this2._emsClient.getValueInLanguage(attribution.url);var label=_this2._emsClient.getValueInLanguage(attribution.label);var html=url?"<a href=".concat(url,">").concat(label,"</a>"):label;return _this2._emsClient.sanitizeHtml(html)});return attributions.join(" | ");//!!!this is the current convention used in Kibana
}},{key:"getFieldsInLanguage",value:function getFieldsInLanguage(){var _this3=this;return this._config.fields.map(function(field){return{type:field.type,name:field.id,description:_this3._emsClient.getValueInLanguage(field.label)}})}},{key:"getDisplayName",value:function getDisplayName(){var layerName=this._emsClient.getValueInLanguage(this._config.layer_name);return layerName?layerName:""}},{key:"getId",value:function getId(){return this._config.layer_id}},{key:"hasId",value:function hasId(id){var matchesLegacyId=this._config.legacy_ids.indexOf(id)>=0;return this._config.layer_id===id||matchesLegacyId}},{key:"_getDefaultFormat",value:function _getDefaultFormat(){var defaultFormat=this._config.formats.find(function(format){return format.legacy_default});if(defaultFormat){return defaultFormat}return this._config.formats[0]}},{key:"getEMSHotLink",value:function getEMSHotLink(){var landingPageString=this._emsClient.getLandingPageUrl();var urlObject=_url["default"].parse(landingPageString);urlObject.hash="file/".concat(this.getId());urlObject.query=_objectSpread({},urlObject.query,{locale:this._emsClient.getLocale()});return _url["default"].format(urlObject)}},{key:"getDefaultFormatType",value:function getDefaultFormatType(){var format=this._getDefaultFormat();return format.type}},{key:"getDefaultFormatMeta",value:function getDefaultFormatMeta(){var format=this._getDefaultFormat();return format.meta}},{key:"getDefaultFormatUrl",value:function getDefaultFormatUrl(){var format=this._getDefaultFormat();return this._emsClient.extendUrlWithParams(format.url)}},{key:"getCreatedAt",value:function getCreatedAt(){return this._config.created_at}},{key:"getOrigin",value:function getOrigin(){return _origin.ORIGIN.EMS}}]);return FileLayer}();exports.FileLayer=FileLayer},5849:function(module,exports,__webpack_require__){module.exports=__webpack_require__(18)(863)},5850:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=void 0;var _jquery=_interopRequireDefault(__webpack_require__(25));var _leaflet=_interopRequireDefault(__webpack_require__(248));var _lodash=_interopRequireDefault(__webpack_require__(1));var _d=_interopRequireDefault(__webpack_require__(33));var _i18n=__webpack_require__(5);var _kibana_map_layer=__webpack_require__(1011);var _truncated_colormaps=__webpack_require__(505);var _modules=__webpack_require__(12);var topojson=_interopRequireWildcard(__webpack_require__(5851));var _notify=__webpack_require__(24);var colorUtil=_interopRequireWildcard(__webpack_require__(2e3));function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _get(target,property,receiver){if(typeof Reflect!=="undefined"&&Reflect.get){_get=Reflect.get}else{_get=function _get(target,property,receiver){var base=_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(receiver)}return desc.value}}return _get(target,property,receiver||target)}function _superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=_getPrototypeOf(object);if(object===null)break}return object}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var EMPTY_STYLE={weight:1,opacity:.6,color:"rgb(200,200,200)",fillOpacity:0};var emsServiceSettings=new Promise(function(resolve){_modules.uiModules.get("kibana").run(function($injector){var serviceSttings=$injector.get("serviceSettings");resolve(serviceSttings)})});var ChoroplethLayer=function(_KibanaMapLayer){_inherits(ChoroplethLayer,_KibanaMapLayer);_createClass(ChoroplethLayer,null,[{key:"_doInnerJoin",value:function _doInnerJoin(sortedMetrics,sortedGeojsonFeatures,joinField){var j=0;for(var i=0;i<sortedGeojsonFeatures.length;i++){var property=sortedGeojsonFeatures[i].properties[joinField];sortedGeojsonFeatures[i].__kbnJoinedMetric=null;var position=sortedMetrics.length?compareLexicographically(property,sortedMetrics[j].term):-1;if(position===-1){}else if(position===0){sortedGeojsonFeatures[i].__kbnJoinedMetric=sortedMetrics[j]}else if(position===1){while(j<sortedMetrics.length){var newTerm=sortedMetrics[j].term;var newPosition=compareLexicographically(newTerm,property);if(newPosition===-1){}else if(newPosition===0){sortedGeojsonFeatures[i].__kbnJoinedMetric=sortedMetrics[j];break}else if(newPosition===1){break}if(j===sortedMetrics.length-1){break}else{j++}}}}}}]);function ChoroplethLayer(name,attribution,format,showAllShapes,meta,layerConfig){var _this;_classCallCheck(this,ChoroplethLayer);_this=_possibleConstructorReturn(this,_getPrototypeOf(ChoroplethLayer).call(this));_this._metrics=null;_this._joinField=null;_this._colorRamp=_truncated_colormaps.truncatedColorMaps[Object.keys(_truncated_colormaps.truncatedColorMaps)[0]].value;_this._lineWeight=1;_this._tooltipFormatter=function(){return""};_this._attribution=attribution;_this._boundsOfData=null;_this._showAllShapes=showAllShapes;_this._layerName=name;_this._layerConfig=layerConfig;_this._leafletLayer=_leaflet["default"].geoJson(null,{onEachFeature:function onEachFeature(feature,layer){layer.on("click",function(){_this.emit("select",feature.properties[_this._joinField])});var location=null;layer.on({mouseover:function mouseover(){var tooltipContents=_this._tooltipFormatter(feature);if(!location){var leafletGeojson=_leaflet["default"].geoJson(feature);location=leafletGeojson.getBounds().getCenter()}_this.emit("showTooltip",{content:tooltipContents,position:location})},mouseout:function mouseout(){_this.emit("hideTooltip")}})},style:_this._makeEmptyStyleFunction()});_this._loaded=false;_this._error=false;_this._isJoinValid=false;_this._whenDataLoaded=new Promise(function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(resolve){var data,featureCollection,formatType,features,errorMessage;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return _this._makeJsonAjaxCall();case 3:data=_context.sent;if(typeof format==="string"){formatType=format}else if(format&&format.type){formatType=format.type}else{formatType="geojson"}if(!(formatType==="geojson")){_context.next=9;break}featureCollection=data;_context.next=15;break;case 9:if(!(formatType==="topojson")){_context.next=14;break}features=_lodash["default"].get(data,"objects."+meta.feature_collection_path);featureCollection=topojson.feature(data,features);_context.next=15;break;case 14:throw new Error(_i18n.i18n.translate("regionMap.choroplethLayer.unrecognizedFormatErrorMessage",{defaultMessage:"Unrecognized format {formatType}",values:{formatType:formatType}}));case 15:_this._sortedFeatures=featureCollection.features.slice();_this._sortFeatures();if(showAllShapes){_this._leafletLayer.addData(featureCollection)}else{}_this._loaded=true;_this._setStyle();resolve();_context.next=30;break;case 23:_context.prev=23;_context.t0=_context["catch"](0);_this._loaded=true;_this._error=true;if(_context.t0.status===404){errorMessage=_i18n.i18n.translate("regionMap.choroplethLayer.downloadingVectorData404ErrorMessage",{defaultMessage:"Server responding with '404' when attempting to fetch {name}. Make sure the file exists at that location.",values:{name:name}})}else{errorMessage=_i18n.i18n.translate("regionMap.choroplethLayer.downloadingVectorDataErrorMessage",{defaultMessage:"Cannot download {name} file. Please ensure the CORS configuration of the server permits requests from the Kibana application on this host.",values:{name:name}})}_notify.toastNotifications.addDanger({title:_i18n.i18n.translate("regionMap.choroplethLayer.downloadingVectorDataErrorMessageTitle",{defaultMessage:"Error downloading vector data"}),text:errorMessage});resolve();case 30:case"end":return _context.stop()}}},_callee,null,[[0,23]])}));return function(_x){return _ref.apply(this,arguments)}}());return _this}_createClass(ChoroplethLayer,[{key:"_makeJsonAjaxCall",value:function(){var _makeJsonAjaxCall2=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(){var serviceSettings;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return emsServiceSettings;case 2:serviceSettings=_context2.sent;return _context2.abrupt("return",serviceSettings.getJsonForRegionLayer(this._layerConfig));case 4:case"end":return _context2.stop()}}},_callee2,this)}));function _makeJsonAjaxCall(){return _makeJsonAjaxCall2.apply(this,arguments)}return _makeJsonAjaxCall}()},{key:"_invalidateJoin",value:function _invalidateJoin(){this._isJoinValid=false}},{key:"_doInnerJoin",value:function _doInnerJoin(){ChoroplethLayer._doInnerJoin(this._metrics,this._sortedFeatures,this._joinField);this._isJoinValid=true}},{key:"_setStyle",value:function _setStyle(){if(this._error||!this._loaded||!this._metrics||!this._joinField){return}if(!this._isJoinValid){this._doInnerJoin();if(!this._showAllShapes){var featureCollection={type:"FeatureCollection",features:this._sortedFeatures.filter(function(feature){return feature.__kbnJoinedMetric})};this._leafletLayer.addData(featureCollection)}}var styler=this._makeChoroplethStyler();this._leafletLayer.setStyle(styler.leafletStyleFunction);if(this._metrics&&this._metrics.length>0){var _getMinMax=getMinMax(this._metrics),min=_getMinMax.min,max=_getMinMax.max;this._legendColors=colorUtil.getLegendColors(this._colorRamp);var quantizeDomain=min!==max?[min,max]:_d["default"].scale.quantize().domain();this._legendQuantizer=_d["default"].scale.quantize().domain(quantizeDomain).range(this._legendColors)}this._boundsOfData=styler.getLeafletBounds();this.emit("styleChanged",{mismatches:styler.getMismatches()})}},{key:"getUrl",value:function getUrl(){return this._layerName}},{key:"setTooltipFormatter",value:function setTooltipFormatter(tooltipFormatter,fieldFormatter,fieldName,metricLabel){var _this2=this;this._tooltipFormatter=function(geojsonFeature){if(!_this2._metrics){return""}var match=_this2._metrics.find(function(bucket){return compareLexicographically(bucket.term,geojsonFeature.properties[_this2._joinField])===0});return tooltipFormatter(match,fieldFormatter,fieldName,metricLabel)}}},{key:"setJoinField",value:function setJoinField(joinfield){if(joinfield===this._joinField){return}this._joinField=joinfield;this._sortFeatures();this._setStyle()}},{key:"cloneChoroplethLayerForNewData",value:function cloneChoroplethLayerForNewData(name,attribution,format,showAllData,meta,layerConfig){var clonedLayer=new ChoroplethLayer(name,attribution,format,showAllData,meta,layerConfig);clonedLayer.setJoinField(this._joinField);clonedLayer.setColorRamp(this._colorRamp);clonedLayer.setLineWeight(this._lineWeight);clonedLayer.setTooltipFormatter(this._tooltipFormatter);if(this._metrics){clonedLayer.setMetrics(this._metrics,this._valueFormatter,this._metricTitle)}return clonedLayer}},{key:"_sortFeatures",value:function _sortFeatures(){var _this3=this;if(this._sortedFeatures&&this._joinField){this._sortedFeatures.sort(function(a,b){var termA=a.properties[_this3._joinField];var termB=b.properties[_this3._joinField];return compareLexicographically(termA,termB)});this._invalidateJoin()}}},{key:"whenDataLoaded",value:function whenDataLoaded(){return this._whenDataLoaded}},{key:"setMetrics",value:function setMetrics(metrics,fieldFormatter,metricTitle){this._metrics=metrics.slice();this._valueFormatter=fieldFormatter;this._metricTitle=metricTitle;this._metrics.sort(function(a,b){return compareLexicographically(a.term,b.term)});this._invalidateJoin();this._setStyle()}},{key:"setColorRamp",value:function setColorRamp(colorRamp){if(_lodash["default"].isEqual(colorRamp,this._colorRamp)){return}this._colorRamp=colorRamp;this._setStyle()}},{key:"setLineWeight",value:function setLineWeight(lineWeight){if(this._lineWeight===lineWeight){return}this._lineWeight=lineWeight;this._setStyle()}},{key:"canReuseInstance",value:function canReuseInstance(name,showAllShapes){return this._layerName===name&&this._showAllShapes===showAllShapes}},{key:"canReuseInstanceForNewMetrics",value:function canReuseInstanceForNewMetrics(name,showAllShapes,newMetrics){if(this._layerName!==name){return false}if(showAllShapes){return this._showAllShapes===showAllShapes}if(!this._metrics){return}var currentKeys=Object.keys(this._metrics);var newKeys=Object.keys(newMetrics);return _lodash["default"].isEqual(currentKeys,newKeys)}},{key:"getBounds",value:function getBounds(){var bounds=_get(_getPrototypeOf(ChoroplethLayer.prototype),"getBounds",this).call(this);return this._boundsOfData?this._boundsOfData:bounds}},{key:"appendLegendContents",value:function appendLegendContents(jqueryDiv){var _this4=this;if(!this._legendColors||!this._legendQuantizer){return}var titleText=this._metricTitle;var $title=(0,_jquery["default"])("<div>").addClass("visMapLegend__title").text(titleText);jqueryDiv.append($title);this._legendColors.forEach(function(color){var labelText=_this4._legendQuantizer.invertExtent(color).map(function(val){return _this4._valueFormatter.convert(val)}).join(" ");var label=(0,_jquery["default"])("<div>");var icon=(0,_jquery["default"])("<i>").css({background:color,"border-color":makeColorDarker(color)});var text=(0,_jquery["default"])("<span>").text(labelText);label.append(icon);label.append(text);jqueryDiv.append(label)})}},{key:"_makeEmptyStyleFunction",value:function _makeEmptyStyleFunction(){var emptyStyle=_lodash["default"].assign({},EMPTY_STYLE,{weight:this._lineWeight});return function(){return emptyStyle}}},{key:"_makeChoroplethStyler",value:function _makeChoroplethStyler(){var _this5=this;var emptyStyle=this._makeEmptyStyleFunction();if(this._metrics.length===0){return{leafletStyleFunction:function leafletStyleFunction(){return emptyStyle()},getMismatches:function getMismatches(){return[]},getLeafletBounds:function getLeafletBounds(){return null}}}var _getMinMax2=getMinMax(this._metrics),min=_getMinMax2.min,max=_getMinMax2.max;var boundsOfAllFeatures=new _leaflet["default"].LatLngBounds;return{leafletStyleFunction:function leafletStyleFunction(geojsonFeature){var match=geojsonFeature.__kbnJoinedMetric;if(!match){return emptyStyle()}var boundsOfFeature=_leaflet["default"].geoJson(geojsonFeature).getBounds();boundsOfAllFeatures.extend(boundsOfFeature);return{fillColor:getChoroplethColor(match.value,min,max,_this5._colorRamp),weight:_this5._lineWeight,opacity:1,color:"white",fillOpacity:.7}},getMismatches:function getMismatches(){var mismatches=_this5._metrics.slice();_this5._sortedFeatures.forEach(function(feature){var index=mismatches.indexOf(feature.__kbnJoinedMetric);if(index>=0){mismatches.splice(index,1)}});return mismatches.map(function(b){return b.term})},getLeafletBounds:function getLeafletBounds(){return boundsOfAllFeatures.isValid()?boundsOfAllFeatures:null}}}}]);return ChoroplethLayer}(_kibana_map_layer.KibanaMapLayer);exports["default"]=ChoroplethLayer;function compareLexicographically(termA,termB){termA=typeof termA==="string"?termA:termA.toString();termB=typeof termB==="string"?termB:termB.toString();return termA.localeCompare(termB)}function makeColorDarker(color){var amount=1.3;return _d["default"].hcl(color).darker(amount).toString()}function getMinMax(data){var min=data[0].value;var max=data[0].value;for(var i=1;i<data.length;i+=1){min=Math.min(data[i].value,min);max=Math.max(data[i].value,max)}return{min:min,max:max}}function getChoroplethColor(value,min,max,colorRamp){if(min===max){return colorUtil.getColor(colorRamp,colorRamp.length-1)}var fraction=(value-min)/(max-min);var index=Math.round(colorRamp.length*fraction)-1;var i=Math.max(Math.min(colorRamp.length-1,index),0);return colorUtil.getColor(colorRamp,i)}module.exports=exports.default},5851:function(module,exports,__webpack_require__){module.exports=__webpack_require__(18)(2877)},5852:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TileMapTooltipFormatter=void 0;var _jquery=_interopRequireDefault(__webpack_require__(25));var _tooltip=_interopRequireDefault(__webpack_require__(5853));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var TileMapTooltipFormatter=function TileMapTooltipFormatter($compile,$rootScope){var $tooltipScope=$rootScope.$new();var $el=(0,_jquery["default"])("<div>").html(_tooltip["default"]);$compile($el)($tooltipScope);return function tooltipFormatter(metric,fieldFormatter,fieldName,metricName){if(!metric){return""}$tooltipScope.details=[];if(fieldName&&metric){$tooltipScope.details.push({label:fieldName,value:metric.term})}if(metric){$tooltipScope.details.push({label:metricName,value:fieldFormatter?fieldFormatter.convert(metric.value,"text"):metric.value})}$tooltipScope.$apply();return $el.html()}};exports.TileMapTooltipFormatter=TileMapTooltipFormatter},5853:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<table>\n  <tbody>\n    <tr ng-repeat="detail in details" >\n      <td class="visTooltip__label"><b>{{detail.label}}</b></td>\n      <td class="visTooltip__value">{{detail.value}}</td>\n    </tr>\n  </tbody>\n</table>\n'},5854:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=void 0;var _i18n=__webpack_require__(5);__webpack_require__(5855);__webpack_require__(5856);__webpack_require__(2001);__webpack_require__(5866);var _vis_factory=__webpack_require__(97);var _schemas=__webpack_require__(113);var _table_vis=_interopRequireDefault(__webpack_require__(5868));var _vis_types=__webpack_require__(85);var _legacy=__webpack_require__(563);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_vis_types.VisTypesRegistryProvider.register(TableVisTypeProvider);var legacyTableResponseHandler=(0,_legacy.legacyResponseHandlerProvider)().handler;function TableVisTypeProvider(Private){var VisFactory=Private(_vis_factory.VisFactoryProvider);return VisFactory.createAngularVisualization({type:"table",name:"table",title:_i18n.i18n.translate("tableVis.tableVisTitle",{defaultMessage:"Data Table"}),icon:"visTable",description:_i18n.i18n.translate("tableVis.tableVisDescription",{defaultMessage:"Display values in a table"}),visConfig:{defaults:{perPage:10,showPartialRows:false,showMetricsAtAllLevels:false,sort:{columnIndex:null,direction:null},showTotal:false,totalFunc:"sum"},template:_table_vis["default"]},editorConfig:{optionsTemplate:"<table-vis-params></table-vis-params>",schemas:new _schemas.Schemas([{group:"metrics",name:"metric",title:_i18n.i18n.translate("tableVis.tableVisEditorConfig.schemas.metricTitle",{defaultMessage:"Metric"}),aggFilter:["!geo_centroid","!geo_bounds"],aggSettings:{top_hits:{allowStrings:true}},min:1,defaults:[{type:"count",schema:"metric"}]},{group:"buckets",name:"bucket",title:_i18n.i18n.translate("tableVis.tableVisEditorConfig.schemas.bucketTitle",{defaultMessage:"Split rows"}),aggFilter:["!filter"]},{group:"buckets",name:"split",title:_i18n.i18n.translate("tableVis.tableVisEditorConfig.schemas.splitTitle",{defaultMessage:"Split table"}),min:0,max:1,aggFilter:["!filter"]}])},responseHandler:legacyTableResponseHandler,hierarchicalData:function hierarchicalData(vis){return Boolean(vis.params.showPartialRows||vis.params.showMetricsAtAllLevels)}})}var _default=TableVisTypeProvider;exports["default"]=_default;module.exports=exports.default},5855:function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(12);var _lodash=__webpack_require__(1);var _module=_modules.uiModules.get("kibana/table_vis",["kibana"]);_module.controller("KbnTableVisController",function($scope){var uiStateSort=$scope.uiState?$scope.uiState.get("vis.params.sort"):{};(0,_lodash.assign)($scope.visParams.sort,uiStateSort);$scope.sort=$scope.visParams.sort;$scope.$watchCollection("sort",function(newSort){$scope.uiState.set("vis.params.sort",newSort)});$scope.$watch("renderComplete",function(){var tableGroups=$scope.tableGroups=null;var hasSomeRows=$scope.hasSomeRows=null;if($scope.esResponse){tableGroups=$scope.esResponse;hasSomeRows=tableGroups.tables.some(function haveRows(table){if(table.tables)return table.tables.some(haveRows);return table.rows.length>0})}$scope.hasSomeRows=hasSomeRows;if(hasSomeRows){$scope.dimensions=$scope.visParams.dimensions;$scope.tableGroups=tableGroups}$scope.renderComplete()})})},5856:function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(12);var _table_vis_params=_interopRequireDefault(__webpack_require__(5857));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_modules.uiModules.get("kibana/table_vis").directive("tableVisParams",function(){return{restrict:"E",template:_table_vis_params["default"],link:function link($scope){$scope.totalAggregations=["sum","avg","min","max","count"];$scope.$watchMulti(["editorState.params.showPartialRows","editorState.params.showMetricsAtAllLevels"],function(){if(!$scope.vis)return;var params=$scope.editorState.params;if(params.showPartialRows||params.showMetricsAtAllLevels){$scope.metricsAtAllLevels=true}else{$scope.metricsAtAllLevels=false}})}}})},5857:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='\n<div class="visEditorSidebar__section">\n  <div class="form-group">\n    <label\n      for="datatableVisualizationPerPage"\n      i18n-id="tableVis.params.perPageLabel"\n      i18n-default-message="Per Page"\n    ></label>\n    <input type="number" ng-model="editorState.params.perPage" class="form-control" id="datatableVisualizationPerPage">\n  </div>\n\n  <div class="checkbox">\n    <label>\n      <input type="checkbox" ng-model="editorState.params.showMetricsAtAllLevels" data-test-subj="showMetricsAtAllLevels">\n      <span\n        i18n-id="tableVis.params.showMetricsLabel"\n        i18n-default-message="Show metrics for every bucket/level"\n      ></span>\n    </label>\n  </div>\n\n  <div class="checkbox">\n    <label>\n      <input type="checkbox" ng-model="editorState.params.showPartialRows" data-test-subj="showPartialRows">\n      <span\n        i18n-id="tableVis.params.showPartialRowsLabel"\n        i18n-default-message="Show partial rows"\n      ></span>\n      &nbsp;\n      <icon-tip\n        content="::\'tableVis.params.showPartialRowsTip\' | i18n: {\n          defaultMessage: \'Show rows that have partial data. This will still calculate metrics for every bucket/level, even if they are not displayed.\'\n        }"\n        position="\'right\'"\n      ></icon-tip>\n    </label>\n  </div>\n\n  <div class="checkbox">\n    <label>\n      <input type="checkbox" ng-model="editorState.params.showTotal">\n      <span\n        i18n-id="tableVis.params.showTotalLabel"\n        i18n-default-message="Show total"\n      ></span>\n    </label>\n  </div>\n\n  <div>\n    <label\n      for="datatableVisualizationTotalFunction"\n      i18n-id="tableVis.params.totalFunctionLabel"\n      i18n-default-message="Total function"\n    ></label>\n    <select ng-disabled="!editorState.params.showTotal"\n            class="form-control"\n            ng-model="editorState.params.totalFunc"\n            ng-options="x for x in totalAggregations" id="datatableVisualizationTotalFunction">\n    </select>\n  </div>\n</div>\n'},5858:function(module,exports,__webpack_require__){"use strict";__webpack_require__(31);__webpack_require__(2002);__webpack_require__(5859);var _lodash=_interopRequireDefault(__webpack_require__(1));var _modules=__webpack_require__(12);var _agg_table=_interopRequireDefault(__webpack_require__(5865));var _utilities=__webpack_require__(173);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}_modules.uiModules.get("kibana",["RecursionHelper"]).directive("kbnAggTable",function(config,RecursionHelper){return{restrict:"E",template:_agg_table["default"],scope:{table:"=",dimensions:"=",perPage:"=?",sort:"=?",exportTitle:"=?",showTotal:"=",totalFunc:"=",filter:"="},controllerAs:"aggTable",compile:function compile($el){return RecursionHelper.compile($el)},controller:function controller($scope){var self=this;self._saveAs=__webpack_require__(1012).saveAs;self.csv={separator:config.get("csv:separator"),quoteValues:config.get("csv:quoteValues")};self.exportAsCsv=function(formatted){var csv=new Blob([self.toCsv(formatted)],{type:"text/plain;charset=utf-8"});self._saveAs(csv,self.csv.filename)};self.toCsv=function(formatted){var rows=$scope.table.rows;var columns=formatted?$scope.formattedColumns:$scope.table.columns;var nonAlphaNumRE=/[^a-zA-Z0-9]/;var allDoubleQuoteRE=/"/g;function escape(val){if(!formatted&&_lodash["default"].isObject(val))val=val.valueOf();val=String(val);if(self.csv.quoteValues&&nonAlphaNumRE.test(val)){val='"'+val.replace(allDoubleQuoteRE,'""')+'"'}return val}var csvRows=rows.map(function(row){return Object.entries(row).map(function(_ref){var _ref2=_slicedToArray(_ref,2),k=_ref2[0],v=_ref2[1];return escape(formatted?columns.find(function(c){return c.id===k}).formatter.convert(v):v)})});csvRows.unshift(columns.map(function(col){return escape(formatted?col.title:col.name)}));return csvRows.map(function(row){return row.join(self.csv.separator)+"\r\n"}).join("")};$scope.$watch("table",function(){var table=$scope.table;if(!table){$scope.rows=null;$scope.formattedColumns=null;return}self.csv.filename=($scope.exportTitle||table.title||"table")+".csv";$scope.rows=table.rows;$scope.formattedColumns=table.columns.map(function(col,i){var isBucket=$scope.dimensions.buckets.find(function(bucket){return bucket.accessor===i});var dimension=isBucket||$scope.dimensions.metrics.find(function(metric){return metric.accessor===i});if(!dimension)return;var formatter=(0,_utilities.getFormat)(dimension.format);var formattedColumn={id:col.id,title:col.name,formatter:formatter,filterable:!!isBucket};var last=i===table.columns.length-1;if(last||!isBucket){formattedColumn["class"]="visualize-table-right"}var isDate=_lodash["default"].get(dimension,"format.id")==="date"||_lodash["default"].get(dimension,"format.params.id")==="date";var isNumeric=_lodash["default"].get(dimension,"format.id")==="number"||_lodash["default"].get(dimension,"format.params.id")==="number";if(isNumeric||isDate||$scope.totalFunc==="count"){var sum=function sum(tableRows){return _lodash["default"].reduce(tableRows,function(prev,curr){if(curr[col.id]===undefined)return prev;return prev+curr[col.id]},0)};switch($scope.totalFunc){case"sum":if(!isDate){formattedColumn.total=formatter.convert(sum(table.rows))}break;case"avg":if(!isDate){formattedColumn.total=formatter.convert(sum(table.rows)/table.rows.length)}break;case"min":formattedColumn.total=formatter.convert(_lodash["default"].chain(table.rows).map(col.id).min().value());break;case"max":formattedColumn.total=formatter.convert(_lodash["default"].chain(table.rows).map(col.id).max().value());break;case"count":formattedColumn.total=table.rows.length;break;default:break}}return formattedColumn}).filter(function(column){return column})})}}})},5859:function(module,exports,__webpack_require__){"use strict";__webpack_require__(5860);__webpack_require__(5862)},5860:function(module,exports,__webpack_require__){"use strict";var _jquery=_interopRequireDefault(__webpack_require__(25));var _lodash=_interopRequireDefault(__webpack_require__(1));var _modules=__webpack_require__(12);var _table_cell_filter=_interopRequireDefault(__webpack_require__(5861));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _module=_modules.uiModules.get("kibana");_module.directive("kbnRows",function($compile){return{restrict:"A",link:function link($scope,$el,attr){function addCell($tr,contents,column,row){function createCell(){return(0,_jquery["default"])(document.createElement("td"))}function createFilterableCell(value){var $template=(0,_jquery["default"])(_table_cell_filter["default"]);$template.addClass("kbnTableCellFilter__hover");var scope=$scope.$new();scope.onFilterClick=function(event,negate){if((0,_jquery["default"])(event.target).is("a")){return}$scope.filter({data:[{table:$scope.table,row:$scope.rows.findIndex(function(r){return r===row}),column:$scope.table.columns.findIndex(function(c){return c.id===column.id}),value:value}],negate:negate})};return $compile($template)(scope)}var $cell;var $cellContent;var contentsIsDefined=contents!==null&&contents!==undefined;if(column.filterable&&contentsIsDefined){$cell=createFilterableCell(contents);$cellContent=$cell.find("[data-cell-content]")}else{$cell=$cellContent=createCell()}contents=contentsIsDefined?column.formatter.convert(contents,"html"):"";if(_lodash["default"].isObject(contents)){if(contents.attr){$cellContent.attr(contents.attr)}if(contents["class"]){$cellContent.addClass(contents["class"])}if(contents.scope){$cellContent=$compile($cellContent.prepend(contents.markup))(contents.scope)}else{$cellContent.prepend(contents.markup)}if(contents.attr){$cellContent.attr(contents.attr)}}else{if(contents===""){$cellContent.prepend("&nbsp;")}else{$cellContent.prepend(contents)}}$tr.append($cell)}$scope.$watchMulti([attr.kbnRows,attr.kbnRowsMin],function(vals){var rows=vals[0];var min=vals[1];$el.empty();if(!Array.isArray(rows))rows=[];if(isFinite(min)&&rows.length<min){rows=_lodash["default"].clone(rows);var emptyRow={};_lodash["default"].times(min-rows.length,function(){rows.push(emptyRow)})}rows.forEach(function(row){var $tr=(0,_jquery["default"])(document.createElement("tr")).appendTo($el);$scope.columns.forEach(function(column){var value=row[column.id];addCell($tr,value,column,row)})})})}}})},5861:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<td>\n  <div\n    data-cell-content\n    class="kbnTableCellFilter__hover"\n  >\n    <span class="kbnTableCellFilter">\n      <span\n        data-test-subj="filterForCellValue"\n        ng-click="onFilterClick($event, false)"\n        class="fa fa-search-plus"\n        tooltip="{{ ::\'tableVis.directives.tableCellFilter.filterForValueTooltip\' | i18n: {defaultMessage: \'Filter for value\'} }}"\n        tooltip-append-to-body="1"\n      ></span>\n\n      <span\n        ng-click="onFilterClick($event, true)"\n        class="fa fa-search-minus"\n        tooltip="{{ ::\'tableVis.directives.tableCellFilter.filterOutValueTooltip\' | i18n: {defaultMessage: \'Filter out value\'} }}"\n        tooltip-append-to-body="1"\n      ></span>\n    </span>\n  </div>\n</td>\n'},5862:function(module,exports,__webpack_require__){"use strict";var _lodash=_interopRequireDefault(__webpack_require__(1));var _modules=__webpack_require__(12);var _paginated_table=_interopRequireDefault(__webpack_require__(5863));__webpack_require__(2003);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_modules.uiModules.get("kibana").directive("paginatedTable",function($filter){var orderBy=$filter("orderBy");return{restrict:"E",template:_paginated_table["default"],transclude:true,scope:{table:"=",rows:"=",columns:"=",linkToTop:"=",perPage:"=?",showBlankRows:"=?",sortHandler:"=?",sort:"=?",showSelector:"=?",showTotal:"=",totalFunc:"=",filter:"="},controllerAs:"paginatedTable",controller:function controller($scope){var self=this;self.sort={columnIndex:null,direction:null};self.sortColumn=function(colIndex){var sortDirection=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"asc";var col=$scope.columns[colIndex];if(!col)return;if(col.sortable===false)return;if(self.sort.columnIndex===colIndex){var directions={null:"asc",asc:"desc",desc:null};sortDirection=directions[self.sort.direction]}self.sort.columnIndex=colIndex;self.sort.direction=sortDirection;if($scope.sort){_lodash["default"].assign($scope.sort,self.sort)}};self.rowsToShow=function(numRowsPerPage,actualNumRowsOnThisPage){if($scope.showBlankRows===false){return actualNumRowsOnThisPage}else{return numRowsPerPage}};function valueGetter(row){var col=$scope.columns[self.sort.columnIndex];var value=row[col.id];if(typeof value==="boolean")value=value?0:1;return value}if($scope.sort&&$scope.sort.columnIndex!==null){self.sortColumn($scope.sort.columnIndex,$scope.sort.direction)}function resortRows(){var newSort=$scope.sort;if(newSort&&!_lodash["default"].isEqual(newSort,self.sort)){self.sortColumn(newSort.columnIndex,newSort.direction)}if(!$scope.rows||!$scope.columns){$scope.sortedRows=false;return}var sort=self.sort;if(sort.direction==null){$scope.sortedRows=$scope.rows.slice(0)}else{$scope.sortedRows=orderBy($scope.rows,valueGetter,sort.direction==="desc")}}$scope.$watchMulti(["rows","columns","[]sort","[]paginatedTable.sort"],resortRows)}}})},5863:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<paginate\n  ng-if="sortedRows.length"\n  list="sortedRows"\n  per-page-prop="perPage"\n  class="kbnAggTable">\n  <div class="kbnAggTable__paginated">\n    <table class="table table-condensed">\n      <thead data-test-subj="paginated-table-header">\n        <tr>\n          <th\n            scope="col"\n            ng-repeat="col in columns"\n            ng-click="paginatedTable.sortColumn($index)"\n            kbn-accessible-click\n            tabindex="0"\n            class="{{ col.class }}">\n            <span ng-bind="::col.title"></span>\n\n            <icon-tip\n              ng-if="col.info"\n              content="\'{{ col.info }}\'"\n            ></icon-tip>\n\n            <i\n              ng-if="col.sortable !== false"\n              class="fa"\n              ng-class="{\n                \'fa-sort-asc\': paginatedTable.sort.columnIndex === $index && paginatedTable.sort.direction === \'asc\',\n                \'fa-sort-desc\': paginatedTable.sort.columnIndex === $index && paginatedTable.sort.direction === \'desc\',\n                \'fa-sort\': paginatedTable.sort.columnIndex !== $index || paginatedTable.sort.direction === null\n              }">\n            </i>\n          </th>\n        </tr>\n      </thead>\n      <tbody\n        data-test-subj="paginated-table-body"\n        kbn-rows="page"\n        kbn-rows-min="paginatedTable.rowsToShow(perPage, page.length)"\n      >\n      </tbody>\n      <tfoot ng-if="showTotal">\n        <tr>\n          <th scope="col" ng-repeat="col in columns" class="numeric-value">{{col.total}}</th>\n        </tr>\n      </tfoot>\n    </table>\n  </div>\n\n  \x3c!-- auto-inserted by the paginate directive... --\x3e\n  \x3c!-- <paginate-controls></paginate-controls> --\x3e\n  <div class="pagination-container" ng-transclude></div>\n</paginate>\n'},5865:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<paginated-table\n  ng-if="rows.length"\n  table="table"\n  rows="rows"\n  columns="formattedColumns"\n  per-page="perPage"\n  sort="sort"\n  show-total="showTotal"\n  filter="filter"\n  totalFunc="totalFunc">\n\n  <div class="kbnAggTable__controls">\n    <small\n      i18n-id="tableVis.aggTable.exportLabel"\n      i18n-default-message="Export:"\n    ></small>&nbsp;&nbsp;\n    <a class="small" ng-click="aggTable.exportAsCsv(false)">\n      <span\n        i18n-id="tableVis.aggTable.rawLabel"\n        i18n-default-message="Raw"\n       ></span>\n       <i aria-hidden="true" class="fa fa-download"></i>\n    </a>&nbsp;&nbsp;&nbsp;\n    <a class="small" ng-click="aggTable.exportAsCsv(true)">\n      <span\n        i18n-id="tableVis.aggTable.formattedLabel"\n        i18n-default-message="Formatted"\n       ></span>\n       <i aria-hidden="true" class="fa fa-download"></i>\n    </a>\n    <paginate-controls></paginate-controls>\n  </div>\n</paginated-table>\n'},5866:function(module,exports,__webpack_require__){"use strict";__webpack_require__(31);__webpack_require__(2002);__webpack_require__(2001);var _modules=__webpack_require__(12);var _agg_table_group=_interopRequireDefault(__webpack_require__(5867));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_modules.uiModules.get("kibana",["RecursionHelper"]).directive("kbnAggTableGroup",function(RecursionHelper){return{restrict:"E",template:_agg_table_group["default"],scope:{group:"=",dimensions:"=",perPage:"=?",sort:"=?",exportTitle:"=?",showTotal:"=",totalFunc:"=",filter:"="},compile:function compile($el){return RecursionHelper.compile($el,{post:function post($scope){$scope.$watch("group",function(group){$scope.rows=$scope.columns=false;if(!group||!group.tables.length)return;var childLayout=group.direction==="row"?"rows":"columns";$scope[childLayout]=group.tables})}})}}})},5867:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<table ng-if="rows" class="table kbnAggTable__group" ng-repeat="table in rows">\n  <thead>\n    <tr>\n      <th ng-if="table.tables" scope="col">\n        <span class="kbnAggTable__groupHeader">{{ table.title }}</span>\n      </th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td>\n        <kbn-agg-table-group\n          ng-if="table.tables"\n          group="table"\n          filter="filter"\n          dimensions="dimensions"\n          per-page="perPage"\n          sort="sort"\n          show-total="showTotal"\n          total-func="totalFunc"></kbn-agg-table-group>\n        <kbn-agg-table\n          ng-if="table.rows"\n          filter="filter"\n          table="table"\n          dimensions="dimensions"\n          export-title="exportTitle"\n          per-page="perPage"\n          sort="sort"\n          show-total="showTotal"\n          total-func="totalFunc">\n        </kbn-agg-table>\n      </td>\n    </tr>\n  </tbody>\n</table>\n\n<table ng-if="columns" class="table kbnAggTable__group">\n  <thead>\n    <tr>\n      <th ng-repeat="table in columns" ng-if="table.tables" scope="col">\n        <span class="kbnAggTable__groupHeader">{{ table.title }}</span>\n      </th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td ng-repeat="table in columns">\n        <kbn-agg-table-group\n          ng-if="table.tables"\n          filter="filter"\n          group="table"\n          dimensions="dimensions"\n          per-page="perPage"\n          sort="sort"\n          show-total="showTotal"\n          total-func="totalFunc"></kbn-agg-table-group>\n        <kbn-agg-table\n          ng-if="table.rows"\n          filter="filter"\n          table="table"\n          dimensions="dimensions"\n          export-title="exportTitle"\n          per-page="perPage"\n          sort="sort"\n          show-total="showTotal"\n          total-func="totalFunc">\n        </kbn-agg-table>\n      </td>\n    </tr>\n  </tbody>\n</table>\n'},5868:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<div ng-controller="KbnTableVisController" class="table-vis">\n  <div ng-if="!hasSomeRows && hasSomeRows !== null" class="visError">\n    <div class="euiText euiText--extraSmall euiTextColor euiTextColor--subdued">\n      <icon type="\'visualizeApp\'" size="\'m\'" color="\'subdued\'"></icon>\n\n      <br>\n      <br>\n\n      <p\n        i18n-id="tableVis.vis.noResultsFoundTitle"\n        i18n-default-message="No results found">\n      </p>\n    </div>\n  </div>\n\n  <div ng-if="tableGroups" class="table-vis-container" data-test-subj="tableVis">\n    <kbn-agg-table-group\n      filter="vis.API.events.filter"\n      dimensions="dimensions"\n      group="tableGroups"\n      export-title="visState.title"\n      per-page="visState.params.perPage"\n      sort="sort"\n      show-total="visState.params.showTotal"\n      total-func="visState.params.totalFunc">\n    </kbn-agg-table-group>\n  </div>\n</div>\n'},5869:function(module,exports,__webpack_require__){"use strict";__webpack_require__(5870);var _i18n=__webpack_require__(5);var _vis_factory=__webpack_require__(97);var _schemas=__webpack_require__(113);var _tag_cloud_visualization=__webpack_require__(5876);var _vis_types=__webpack_require__(85);var _update_status=__webpack_require__(313);_vis_types.VisTypesRegistryProvider.register(function(Private){var VisFactory=Private(_vis_factory.VisFactoryProvider);return VisFactory.createBaseVisualization({name:"tagcloud",title:_i18n.i18n.translate("tagCloud.vis.tagCloudTitle",{defaultMessage:"Tag Cloud"}),icon:"visTagCloud",description:_i18n.i18n.translate("tagCloud.vis.tagCloudDescription",{defaultMessage:"A group of words, sized according to their importance"}),visConfig:{defaults:{scale:"linear",orientation:"single",minFontSize:18,maxFontSize:72,showLabel:true}},requiresUpdateStatus:[_update_status.Status.PARAMS,_update_status.Status.RESIZE,_update_status.Status.DATA],visualization:_tag_cloud_visualization.TagCloudVisualization,editorConfig:{collections:{scales:["linear","log","square root"],orientations:["single","right angled","multiple"]},optionsTemplate:"<tagcloud-vis-params></tagcloud-vis-params>",schemas:new _schemas.Schemas([{group:"metrics",name:"metric",title:_i18n.i18n.translate("tagCloud.vis.schemas.metricTitle",{defaultMessage:"Tag size"}),min:1,max:1,aggFilter:["!std_dev","!percentiles","!percentile_ranks","!derivative","!geo_bounds","!geo_centroid"],defaults:[{schema:"metric",type:"count"}]},{group:"buckets",name:"segment",title:_i18n.i18n.translate("tagCloud.vis.schemas.segmentTitle",{defaultMessage:"Tags"}),min:1,max:1,aggFilter:["terms","significant_terms"]}])},useCustomNoDataScreen:true})})},5870:function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(12);var _tag_cloud_vis_params=_interopRequireDefault(__webpack_require__(5871));var _noUiSlider=_interopRequireDefault(__webpack_require__(5872));__webpack_require__(5873);__webpack_require__(5874);__webpack_require__(5875);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_modules.uiModules.get("kibana/table_vis").directive("tagcloudVisParams",function(){return{restrict:"E",template:_tag_cloud_vis_params["default"],link:function link($scope,$element){var sliderContainer=$element[0];var slider=sliderContainer.querySelector(".tgcFontSizeSlider");$scope.config=$scope.vis.type.editorConfig;_noUiSlider["default"].create(slider,{start:[$scope.editorState.params.minFontSize,$scope.editorState.params.maxFontSize],connect:true,step:1,range:{min:1,max:100},format:{to:function to(value){return parseInt(value)},from:function from(value){return parseInt(value)}}});slider.noUiSlider.on("slide",function(){var fontSize=slider.noUiSlider.get();$scope.$apply(function(){$scope.editorState.params.minFontSize=fontSize[0];$scope.editorState.params.maxFontSize=fontSize[1]})});$scope.$watch("editorState.params.minFontSize",function(val){val=parseInt(val);if(slider.noUiSlider.get()[0]!==val){slider.noUiSlider.set([val,null])}});$scope.$watch("editorState.params.maxFontSize",function(val){val=parseInt(val);if(slider.noUiSlider.get()[1]!==val){slider.noUiSlider.set([null,val])}})}}})},5871:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<div class="visEditorSidebar__section">\n  <div class="form-group">\n    <div class="form-group">\n      <label i18n-id="tagCloud.visParams.textScaleLabel" i18n-default-message="Text Scale"></label>\n      <select class="form-control" ng-model="editorState.params.scale" ng-options="mode for mode in config.collections.scales"></select>\n    </div>\n    <div class="form-group">\n      <label i18n-id="tagCloud.visParams.orientationsLabel" i18n-default-message="Orientations"></label>\n      <select class="form-control" ng-model="editorState.params.orientation" ng-options="mode for mode in config.collections.orientations"></select>\n    </div>\n    <div class="form-group">\n      <label i18n-id="tagCloud.visParams.fontSizeLabel" i18n-default-message="Font Size"></label>\n      <div class="tgcFontSizeSlider"></div>\n      <div class="kuiBar">\n        <div class="kuiBarSection">\n          <input\n            type="number"\n            min="1"\n            max="{{editorState.params.maxFontSize}}"\n            class="kuiTextInput tgcFontSizeSlider__input"\n            ng-model="editorState.params.minFontSize"\n            aria-label="{{ ::\'tagCloud.visParams.minFontSizeAriaLabel\' | i18n: { defaultMessage: \'Minimum tag font size\' } }}"\n            aria-describedby="tagCloudFontSliderMinUnit"\n          >\n          <span id="tagCloudFontSliderMinUnit" aria-label="{{ ::\'tagCloud.visParams.minPixelsAriaLabel\' | i18n: { defaultMessage: \'pixels\' } }}">px</span>\n        </div>\n        <div class="kuiBarSection">\n          <input\n            type="number"\n            min="{{editorState.params.minFontSize}}"\n            max="100"\n            class="kuiTextInput tgcFontSizeSlider__input"\n            ng-model="editorState.params.maxFontSize"\n            aria-label="{{ ::\'tagCloud.visParams.maxFontSizeAriaLabel\' | i18n: { defaultMessage: \'Maximum tag font size\' } }}"\n            aria-describedby="tagCloudFontSliderMaxUnit"\n          >\n          <span id="tagCloudFontSliderMaxUnit" aria-label="{{ ::\'tagCloud.visParams.maxPixelsAriaLabel\' | i18n: { defaultMessage: \'pixels\' } }}">px</span>\n        </div>\n      </div>\n    </div>\n    <div>\n      <label>\n        <input type="checkbox" value="{{hideLabel}}" ng-model="editorState.params.showLabel" name="showLabel"\n               ng-checked="editorState.params.showLabel">\n        <span i18n-id="tagCloud.visParams.showLabelToggleLabel" i18n-default-message="Show Label"></span>\n      </label>\n    </div>\n  </div>\n</div>\n'},5872:function(module,exports,__webpack_require__){module.exports=__webpack_require__(18)(2348)},5873:function(module,exports,__webpack_require__){},5874:function(module,exports,__webpack_require__){},5875:function(module,exports,__webpack_require__){},5876:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TagCloudVisualization=void 0;var _tag_cloud=_interopRequireDefault(__webpack_require__(5877));var Rx=_interopRequireWildcard(__webpack_require__(49));var _operators=__webpack_require__(106);var _reactDom=__webpack_require__(27);var _react=_interopRequireDefault(__webpack_require__(0));var _utilities=__webpack_require__(173);var _i18n=__webpack_require__(28);var _label=__webpack_require__(5879);var _feedback_message=__webpack_require__(5880);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var MAX_TAG_COUNT=200;var TagCloudVisualization=function(){function TagCloudVisualization(node,vis){var _this=this;_classCallCheck(this,TagCloudVisualization);this._containerNode=node;var cloudRelativeContainer=document.createElement("div");cloudRelativeContainer.classList.add("tgcVis");cloudRelativeContainer.setAttribute("style","position: relative");var cloudContainer=document.createElement("div");cloudContainer.classList.add("tgcVis");cloudContainer.setAttribute("data-test-subj","tagCloudVisualization");this._containerNode.classList.add("visChart--vertical");cloudRelativeContainer.appendChild(cloudContainer);this._containerNode.appendChild(cloudRelativeContainer);this._vis=vis;this._truncated=false;this._tagCloud=new _tag_cloud["default"](cloudContainer);this._tagCloud.on("select",function(event){if(!_this._visParams.bucket){return}_this._vis.API.events.filter({table:event.meta.data,column:0,row:event.meta.rowIndex})});this._renderComplete$=Rx.fromEvent(this._tagCloud,"renderComplete");this._feedbackNode=document.createElement("div");this._containerNode.appendChild(this._feedbackNode);this._feedbackMessage=_react["default"].createRef();(0,_reactDom.render)(_react["default"].createElement(_i18n.I18nContext,null,_react["default"].createElement(_feedback_message.FeedbackMessage,{ref:this._feedbackMessage})),this._feedbackNode);this._labelNode=document.createElement("div");this._containerNode.appendChild(this._labelNode);this._label=_react["default"].createRef();(0,_reactDom.render)(_react["default"].createElement(_label.Label,{ref:this._label}),this._labelNode)}_createClass(TagCloudVisualization,[{key:"render",value:function(){var _render=_asyncToGenerator(regeneratorRuntime.mark(function _callee(data,visParams,status){return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(status.resize||status.data||status.params){_context.next=2;break}return _context.abrupt("return");case 2:if(status.params||status.data){this._updateParams(visParams);this._updateData(data)}if(status.resize){this._resize()}_context.next=6;return this._renderComplete$.pipe((0,_operators.take)(1)).toPromise();case 6:if(!(data.columns.length!==2)){_context.next=9;break}this._feedbackMessage.current.setState({shouldShowTruncate:false,shouldShowIncomplete:false});return _context.abrupt("return");case 9:this._label.current.setState({label:"".concat(data.columns[0].name," - ").concat(data.columns[1].name),shouldShowLabel:visParams.showLabel});this._feedbackMessage.current.setState({shouldShowTruncate:this._truncated,shouldShowIncomplete:this._tagCloud.getStatus()===_tag_cloud["default"].STATUS.INCOMPLETE});case 11:case"end":return _context.stop()}}},_callee,this)}));function render(_x,_x2,_x3){return _render.apply(this,arguments)}return render}()},{key:"destroy",value:function destroy(){this._tagCloud.destroy();(0,_reactDom.unmountComponentAtNode)(this._feedbackNode);(0,_reactDom.unmountComponentAtNode)(this._labelNode)}},{key:"_updateData",value:function _updateData(data){if(!data||!data.rows.length){this._tagCloud.setData([]);return}var bucket=this._visParams.bucket;var metric=this._visParams.metric;var bucketFormatter=bucket?(0,_utilities.getFormat)(bucket.format):null;var tagColumn=bucket?data.columns[bucket.accessor].id:-1;var metricColumn=data.columns[metric.accessor].id;var tags=data.rows.map(function(row,rowIndex){var tag=row[tagColumn]===undefined?"all":row[tagColumn];var metric=row[metricColumn];return{displayText:bucketFormatter?bucketFormatter.convert(tag,"text"):tag,rawText:tag,value:metric,meta:{data:data,rowIndex:rowIndex}}});if(tags.length>MAX_TAG_COUNT){tags.length=MAX_TAG_COUNT;this._truncated=true}else{this._truncated=false}this._tagCloud.setData(tags)}},{key:"_updateParams",value:function _updateParams(visParams){this._visParams=visParams;this._tagCloud.setOptions(visParams)}},{key:"_resize",value:function _resize(){this._tagCloud.resize()}}]);return TagCloudVisualization}();exports.TagCloudVisualization=TagCloudVisualization},5877:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=void 0;var _d=_interopRequireDefault(__webpack_require__(33));var _d3Cloud=_interopRequireDefault(__webpack_require__(5878));var _seed_colors=__webpack_require__(1446);var _events=__webpack_require__(152);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var ORIENTATIONS={single:function single(){return 0},"right angled":function rightAngled(tag){return hashWithinRange(tag.text,2)*90},multiple:function multiple(tag){return hashWithinRange(tag.text,12)*15-90}};var D3_SCALING_FUNCTIONS={linear:function linear(){return _d["default"].scale.linear()},log:function log(){return _d["default"].scale.log()},"square root":function squareRoot(){return _d["default"].scale.sqrt()}};var TagCloud=function(_EventEmitter){_inherits(TagCloud,_EventEmitter);function TagCloud(domNode){var _this;_classCallCheck(this,TagCloud);_this=_possibleConstructorReturn(this,_getPrototypeOf(TagCloud).call(this));_this._element=domNode;_this._d3SvgContainer=_d["default"].select(_this._element).append("svg");_this._svgGroup=_this._d3SvgContainer.append("g");_this._size=[1,1];_this.resize();_this._fontFamily="Open Sans, sans-serif";_this._fontStyle="normal";_this._fontWeight="normal";_this._spiral="archimedean";_this._timeInterval=1e3;_this._padding=5;_this._orientation="single";_this._minFontSize=10;_this._maxFontSize=36;_this._textScale="linear";_this._optionsAsString=null;_this._words=null;_this._setTimeoutId=null;_this._pendingJob=null;_this._layoutIsUpdating=null;_this._allInViewBox=false;_this._DOMisUpdating=false;return _this}_createClass(TagCloud,[{key:"setOptions",value:function setOptions(options){if(JSON.stringify(options)===this._optionsAsString){return}this._optionsAsString=JSON.stringify(options);this._orientation=options.orientation;this._minFontSize=Math.min(options.minFontSize,options.maxFontSize);this._maxFontSize=Math.max(options.minFontSize,options.maxFontSize);this._textScale=options.scale;this._invalidate(false)}},{key:"resize",value:function resize(){var newWidth=this._element.offsetWidth;var newHeight=this._element.offsetHeight;if(newWidth===this._size[0]&&newHeight===this._size[1]){return}var wasInside=this._size[0]>=this._cloudWidth&&this._size[1]>=this._cloudHeight;var willBeInside=this._cloudWidth<=newWidth&&this._cloudHeight<=newHeight;this._size[0]=newWidth;this._size[1]=newHeight;if(wasInside&&willBeInside&&this._allInViewBox){this._invalidate(true)}else{this._invalidate(false)}}},{key:"setData",value:function setData(data){this._words=data;this._invalidate(false)}},{key:"destroy",value:function destroy(){clearTimeout(this._setTimeoutId);this._element.innerHTML=""}},{key:"getStatus",value:function getStatus(){return this._allInViewBox?TagCloud.STATUS.COMPLETE:TagCloud.STATUS.INCOMPLETE}},{key:"_updateContainerSize",value:function _updateContainerSize(){this._d3SvgContainer.attr("width",this._size[0]);this._d3SvgContainer.attr("height",this._size[1]);this._svgGroup.attr("width",this._size[0]);this._svgGroup.attr("height",this._size[1])}},{key:"_isJobRunning",value:function _isJobRunning(){return this._setTimeoutId||this._layoutIsUpdating||this._DOMisUpdating}},{key:"_processPendingJob",value:function(){var _processPendingJob2=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var job,cloudBBox;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(this._pendingJob){_context.next=2;break}return _context.abrupt("return");case 2:if(!this._isJobRunning()){_context.next=4;break}return _context.abrupt("return");case 4:this._completedJob=null;_context.next=7;return this._pickPendingJob();case 7:job=_context.sent;if(!job.words.length){_context.next=20;break}if(!job.refreshLayout){_context.next=12;break}_context.next=12;return this._updateLayout(job);case 12:_context.next=14;return this._updateDOM(job);case 14:cloudBBox=this._svgGroup[0][0].getBBox();this._cloudWidth=cloudBBox.width;this._cloudHeight=cloudBBox.height;this._allInViewBox=cloudBBox.x>=0&&cloudBBox.y>=0&&cloudBBox.x+cloudBBox.width<=this._element.offsetWidth&&cloudBBox.y+cloudBBox.height<=this._element.offsetHeight;_context.next=21;break;case 20:this._emptyDOM(job);case 21:if(this._pendingJob){this._processPendingJob()}else{this._completedJob=job;this.emit("renderComplete")}case 22:case"end":return _context.stop()}}},_callee,this)}));function _processPendingJob(){return _processPendingJob2.apply(this,arguments)}return _processPendingJob}()},{key:"_pickPendingJob",value:function(){var _pickPendingJob2=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(){var _this2=this;return regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return new Promise(function(resolve){_this2._setTimeoutId=setTimeout(_asyncToGenerator(regeneratorRuntime.mark(function _callee2(){var job;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:job=_this2._pendingJob;_this2._pendingJob=null;_this2._setTimeoutId=null;resolve(job);case 4:case"end":return _context2.stop()}}},_callee2)})),0)});case 2:return _context3.abrupt("return",_context3.sent);case 3:case"end":return _context3.stop()}}},_callee3)}));function _pickPendingJob(){return _pickPendingJob2.apply(this,arguments)}return _pickPendingJob}()},{key:"_emptyDOM",value:function _emptyDOM(){this._svgGroup.selectAll("text").remove();this._cloudWidth=0;this._cloudHeight=0;this._allInViewBox=true;this._DOMisUpdating=false}},{key:"_updateDOM",value:function(){var _updateDOM2=_asyncToGenerator(regeneratorRuntime.mark(function _callee4(job){var _this3=this;var canSkipDomUpdate,affineTransform,svgTextNodes,stage;return regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:canSkipDomUpdate=this._pendingJob||this._setTimeoutId;if(!canSkipDomUpdate){_context4.next=4;break}this._DOMisUpdating=false;return _context4.abrupt("return");case 4:this._DOMisUpdating=true;affineTransform=positionWord.bind(null,this._element.offsetWidth/2,this._element.offsetHeight/2);svgTextNodes=this._svgGroup.selectAll("text");stage=svgTextNodes.data(job.words,getText);_context4.next=10;return new Promise(function(resolve){var enterSelection=stage.enter();var enteringTags=enterSelection.append("text");enteringTags.style("font-size",getSizeInPixels);enteringTags.style("font-style",_this3._fontStyle);enteringTags.style("font-weight",function(){return _this3._fontWeight});enteringTags.style("font-family",function(){return _this3._fontFamily});enteringTags.style("fill",getFill);enteringTags.attr("text-anchor",function(){return"middle"});enteringTags.attr("transform",affineTransform);enteringTags.attr("data-test-subj",getDisplayText);enteringTags.text(getDisplayText);var self=_this3;enteringTags.on({click:function click(event){self.emit("select",event)},mouseover:function mouseover(){_d["default"].select(this).style("cursor","pointer")},mouseout:function mouseout(){_d["default"].select(this).style("cursor","default")}});var movingTags=stage.transition();movingTags.duration(600);movingTags.style("font-size",getSizeInPixels);movingTags.style("font-style",_this3._fontStyle);movingTags.style("font-weight",function(){return _this3._fontWeight});movingTags.style("font-family",function(){return _this3._fontFamily});movingTags.attr("transform",affineTransform);var exitingTags=stage.exit();var exitTransition=exitingTags.transition();exitTransition.duration(200);exitingTags.style("fill-opacity",1e-6);exitingTags.attr("font-size",1);exitingTags.remove();var exits=0;var moves=0;var resolveWhenDone=function resolveWhenDone(){if(exits===0&&moves===0){_this3._DOMisUpdating=false;resolve(true)}};exitTransition.each(function(){return exits++});exitTransition.each("end",function(){exits--;resolveWhenDone()});movingTags.each(function(){return moves++});movingTags.each("end",function(){moves--;resolveWhenDone()})});case 10:case"end":return _context4.stop()}}},_callee4,this)}));function _updateDOM(_x){return _updateDOM2.apply(this,arguments)}return _updateDOM}()},{key:"_makeTextSizeMapper",value:function _makeTextSizeMapper(){var mapSizeToFontSize=D3_SCALING_FUNCTIONS[this._textScale]();var range=this._words.length===1?[this._maxFontSize,this._maxFontSize]:[this._minFontSize,this._maxFontSize];mapSizeToFontSize.range(range);if(this._words){mapSizeToFontSize.domain(_d["default"].extent(this._words,getValue))}return mapSizeToFontSize}},{key:"_makeNewJob",value:function _makeNewJob(){return{refreshLayout:true,size:this._size.slice(),words:this._words}}},{key:"_makeJobPreservingLayout",value:function _makeJobPreservingLayout(){return{refreshLayout:false,size:this._size.slice(),words:this._completedJob.words.map(function(tag){return{x:tag.x,y:tag.y,rotate:tag.rotate,size:tag.size,rawText:tag.rawText||tag.text,displayText:tag.displayText,meta:tag.meta}})}}},{key:"_invalidate",value:function _invalidate(keepLayout){if(!this._words){return}this._updateContainerSize();var canReuseLayout=keepLayout&&!this._isJobRunning()&&this._completedJob;this._pendingJob=canReuseLayout?this._makeJobPreservingLayout():this._makeNewJob();this._processPendingJob()}},{key:"_updateLayout",value:function(){var _updateLayout2=_asyncToGenerator(regeneratorRuntime.mark(function _callee5(job){var _this4=this;var mapSizeToFontSize,tagCloudLayoutGenerator;return regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:if(!(job.size[0]<=0||job.size[1]<=0)){_context5.next=2;break}return _context5.abrupt("return");case 2:mapSizeToFontSize=this._makeTextSizeMapper();tagCloudLayoutGenerator=(0,_d3Cloud["default"])();tagCloudLayoutGenerator.size(job.size);tagCloudLayoutGenerator.padding(this._padding);tagCloudLayoutGenerator.rotate(ORIENTATIONS[this._orientation]);tagCloudLayoutGenerator.font(this._fontFamily);tagCloudLayoutGenerator.fontStyle(this._fontStyle);tagCloudLayoutGenerator.fontWeight(this._fontWeight);tagCloudLayoutGenerator.fontSize(function(tag){return mapSizeToFontSize(tag.value)});tagCloudLayoutGenerator.random(seed);tagCloudLayoutGenerator.spiral(this._spiral);tagCloudLayoutGenerator.words(job.words);tagCloudLayoutGenerator.text(getDisplayText);tagCloudLayoutGenerator.timeInterval(this._timeInterval);this._layoutIsUpdating=true;_context5.next=19;return new Promise(function(resolve){tagCloudLayoutGenerator.on("end",function(){_this4._layoutIsUpdating=false;resolve(true)});tagCloudLayoutGenerator.start()});case 19:case"end":return _context5.stop()}}},_callee5,this)}));function _updateLayout(_x2){return _updateLayout2.apply(this,arguments)}return _updateLayout}()},{key:"getDebugInfo",value:function getDebugInfo(){var debug={};debug.positions=this._completedJob?this._completedJob.words.map(function(tag){return{displayText:tag.displayText,rawText:tag.rawText||tag.text,x:tag.x,y:tag.y,rotate:tag.rotate}}):[];debug.size={width:this._size[0],height:this._size[1]};return debug}}]);return TagCloud}(_events.EventEmitter);TagCloud.STATUS={COMPLETE:0,INCOMPLETE:1};function seed(){return.5}function getText(word){return word.rawText}function getDisplayText(word){return word.displayText}function positionWord(xTranslate,yTranslate,word){if(isNaN(word.x)||isNaN(word.y)||isNaN(word.rotate)){return"translate(".concat(xTranslate*3,", ").concat(yTranslate*3,")rotate(0)")}return"translate(".concat(word.x+xTranslate,", ").concat(word.y+yTranslate,")rotate(").concat(word.rotate,")")}function getValue(tag){return tag.value}function getSizeInPixels(tag){return"".concat(tag.size,"px")}var colorScale=_d["default"].scale.ordinal().range(_seed_colors.seedColors);function getFill(tag){return colorScale(tag.text)}function hashWithinRange(str,max){str=JSON.stringify(str);var hash=0;var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=str[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var ch=_step.value;hash=(hash*31+ch.charCodeAt(0))%max}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator["return"]!=null){_iterator["return"]()}}finally{if(_didIteratorError){throw _iteratorError}}}return Math.abs(hash)%max}var _default=TagCloud;exports["default"]=_default;module.exports=exports.default},5878:function(module,exports,__webpack_require__){module.exports=__webpack_require__(18)(2195)},5879:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Label=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var Label=function(_Component){_inherits(Label,_Component);function Label(){var _this;_classCallCheck(this,Label);_this=_possibleConstructorReturn(this,_getPrototypeOf(Label).call(this));_this.state={label:"",shouldShowLabel:true};return _this}_createClass(Label,[{key:"render",value:function render(){return _react["default"].createElement("div",{className:"tgcVisLabel",style:{display:this.state.shouldShowLabel?"block":"none"}},this.state.label)}}]);return Label}(_react.Component);exports.Label=Label},5880:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FeedbackMessage=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _react2=__webpack_require__(10);var _eui=__webpack_require__(2);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var FeedbackMessage=function(_Component){_inherits(FeedbackMessage,_Component);function FeedbackMessage(){var _this;_classCallCheck(this,FeedbackMessage);_this=_possibleConstructorReturn(this,_getPrototypeOf(FeedbackMessage).call(this));_this.state={shouldShowTruncate:false,shouldShowIncomplete:false};return _this}_createClass(FeedbackMessage,[{key:"render",value:function render(){if(!this.state.shouldShowTruncate&&!this.state.shouldShowIncomplete){return""}return _react["default"].createElement(_eui.EuiIconTip,{type:"alert",color:"warning",content:_react["default"].createElement(_react.Fragment,null,this.state.shouldShowTruncate&&_react["default"].createElement("p",null,_react["default"].createElement(_react2.FormattedMessage,{id:"tagCloud.feedbackMessage.truncatedTagsDescription",defaultMessage:"The number of tags has been truncated to avoid long draw times."})),this.state.shouldShowIncomplete&&_react["default"].createElement("p",null,_react["default"].createElement(_react2.FormattedMessage,{id:"tagCloud.feedbackMessage.tooSmallContainerDescription",defaultMessage:"The container is too small to display the entire cloud. Tags might be cropped or omitted."})))})}}]);return FeedbackMessage}(_react.Component);exports.FeedbackMessage=FeedbackMessage},5881:function(module,exports,__webpack_require__){"use strict";var _i18n=__webpack_require__(5);__webpack_require__(807);__webpack_require__(5882);var _supports=__webpack_require__(5884);var _vis_factory=__webpack_require__(97);var _coordinate_maps_visualization=__webpack_require__(5885);var _schemas=__webpack_require__(113);var _vis_types=__webpack_require__(85);var _update_status=__webpack_require__(313);var _truncated_colormaps=__webpack_require__(505);var _convert_to_geojson=__webpack_require__(1407);_vis_types.VisTypesRegistryProvider.register(function TileMapVisType(Private,config){var VisFactory=Private(_vis_factory.VisFactoryProvider);var CoordinateMapsVisualization=Private(_coordinate_maps_visualization.CoordinateMapsVisualizationProvider);return VisFactory.createBaseVisualization({name:"tile_map",title:_i18n.i18n.translate("tileMap.vis.mapTitle",{defaultMessage:"Coordinate Map"}),icon:"visMapCoordinate",description:_i18n.i18n.translate("tileMap.vis.mapDescription",{defaultMessage:"Plot latitude and longitude coordinates on a map"}),visConfig:{canDesaturate:!!_supports.supports.cssFilters,defaults:{colorSchema:"Yellow to Red",mapType:"Scaled Circle Markers",isDesaturated:true,addTooltip:true,heatClusterSize:1.5,legendPosition:"bottomright",mapZoom:2,mapCenter:[0,0],wms:config.get("visualization:tileMap:WMSdefaults")}},requiresUpdateStatus:[_update_status.Status.AGGS,_update_status.Status.PARAMS,_update_status.Status.RESIZE,_update_status.Status.UI_STATE],requiresPartialRows:true,visualization:CoordinateMapsVisualization,responseHandler:_convert_to_geojson.convertToGeoJson,editorConfig:{collections:{colorSchemas:Object.values(_truncated_colormaps.truncatedColorMaps).map(function(value){return{id:value.id,label:value.label}}),legendPositions:[{value:"bottomleft",text:_i18n.i18n.translate("tileMap.vis.map.editorConfig.legendPositions.bottomLeftText",{defaultMessage:"bottom left"})},{value:"bottomright",text:_i18n.i18n.translate("tileMap.vis.map.editorConfig.legendPositions.bottomRightText",{defaultMessage:"bottom right"})},{value:"topleft",text:_i18n.i18n.translate("tileMap.vis.map.editorConfig.legendPositions.topLeftText",{defaultMessage:"top left"})},{value:"topright",text:_i18n.i18n.translate("tileMap.vis.map.editorConfig.legendPositions.topRightText",{defaultMessage:"top right"})}],mapTypes:["Scaled Circle Markers","Shaded Circle Markers","Shaded Geohash Grid","Heatmap"],tmsLayers:[]},optionsTemplate:"<tile-map-vis-params></tile-map-vis-params>",schemas:new _schemas.Schemas([{group:"metrics",name:"metric",title:_i18n.i18n.translate("tileMap.vis.map.editorConfig.schemas.metricTitle",{defaultMessage:"Value"}),min:1,max:1,aggFilter:["count","avg","sum","min","max","cardinality","top_hits"],defaults:[{schema:"metric",type:"count"}]},{group:"buckets",name:"segment",title:_i18n.i18n.translate("tileMap.vis.map.editorConfig.schemas.geoCoordinatesTitle",{defaultMessage:"Geo coordinates"}),aggFilter:"geohash_grid",min:1,max:1}])}})})},5882:function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(12);var _tile_map_vis_params=_interopRequireDefault(__webpack_require__(5883));__webpack_require__(1996);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _module=_modules.uiModules.get("kibana");_module.directive("tileMapVisParams",function(){return{restrict:"E",template:_tile_map_vis_params["default"]}})},5883:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='\x3c!-- vis type specific options --\x3e\n<div class="visEditorSidebar__section">\n  <div class="form-group">\n    <label\n      for="coordinateMapOptionsMapType"\n      i18n-id="tileMap.visParams.mapTypeLabel"\n      i18n-default-message="Map type"\n    ></label>\n      <select\n        id="coordinateMapOptionsMapType"\n        name="agg"\n      class="form-control"\n      ng-model="editorState.params.mapType"\n      ng-init="editorState.params.mapType || vis.type.editorConfig.collections.mapTypes[0]"\n      ng-options="mapType as mapType for mapType in vis.type.editorConfig.collections.mapTypes"\n      >\n    </select>\n  </div>\n\n\n  <div class="visEditorSidebar__formRow" >\n    <label\n      class="visEditorSidebar__formLabel"\n      for="colorSchema"\n      i18n-id="tileMap.visParams.colorSchemaLabel"\n      i18n-default-message="Color Schema"\n    ></label>\n    <div class="visEditorSidebar__formControl">\n      <select\n        id="colorSchema"\n        class="kuiSelect visEditorSidebar__select"\n        ng-model="editorState.params.colorSchema"\n        ng-options="mode.id as mode.label for mode in vis.type.editorConfig.collections.colorSchemas"\n      ></select>\n    </div>\n  </div>\n\n  <div ng-if="editorState.params.mapType === \'Heatmap\'" class="form-group">\n    <div>\n      <label\n        i18n-id="tileMap.visParams.clusterSizeLabel"\n        i18n-default-message="Cluster size"\n      ></label>\n      <div class="visEditorAgg__formRow--flex">\n        <input\n          name="heatClusterSize"\n          ng-model="editorState.params.heatClusterSize"\n          required\n          class="form-control"\n          type="range"\n          min="1.0"\n          max="3.0"\n          step="0.1"\n          >\n        <div class="visEditorAgg__sliderValue">\n          {{editorState.params.heatClusterSize}}\n        </div>\n      </div>\n    </div>\n\n  </div>\n\n  <vislib-basic-options></vislib-basic-options>\n\n  <div class="visEditorSidebar__formRow">\n    <label\n      class="visEditorSidebar__formLabel"\n      for="desaturateMapTiles"\n      i18n-id="tileMap.visParams.desaturateTilesLabel"\n      i18n-default-message="Desaturate tiles"\n    ></label>\n\n    <div class="visEditorSidebar__formControl">\n      <input\n        type="checkbox"\n        id="desaturateMapTiles"\n        name="isDesaturated"\n        ng-disabled="!vis.type.visConfig.canDesaturate"\n        ng-model="editorState.params.isDesaturated"\n      >\n      &nbsp;\n      <icon-tip\n        content="::\'tileMap.visParams.reduceVibrancyOfTileColorsTip\' | i18n: {\n          defaultMessage: \'Reduce the vibrancy of tile colors. This does not work in any version of Internet Explorer.\'\n        }"\n        position="\'right\'"\n      ></icon-tip>\n    </div>\n  </div>\n</div>\n\n<wms-options options="editorState.params.wms" collections="vis.type.editorConfig.collections"></wms-options>\n'},5884:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.supports=void 0;var _lodash=_interopRequireDefault(__webpack_require__(1));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var supports={cssFilters:function(){var e=document.createElement("img");var rules=["webkitFilter","mozFilter","msFilter","filter"];var test="grayscale(1)";rules.forEach(function(rule){e.style[rule]=test});document.body.appendChild(e);var styles=window.getComputedStyle(e);var can=(0,_lodash["default"])(styles).pick(rules).includes(test);document.body.removeChild(e);return can}()};exports.supports=supports},5885:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.CoordinateMapsVisualizationProvider=CoordinateMapsVisualizationProvider;var _lodash=_interopRequireDefault(__webpack_require__(1));var _geohash_layer=__webpack_require__(5886);var _base_maps_visualization=__webpack_require__(1997);var _tooltip_formatter=__webpack_require__(5890);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _get(target,property,receiver){if(typeof Reflect!=="undefined"&&Reflect.get){_get=Reflect.get}else{_get=function _get(target,property,receiver){var base=_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(receiver)}return desc.value}}return _get(target,property,receiver||target)}function _superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=_getPrototypeOf(object);if(object===null)break}return object}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function CoordinateMapsVisualizationProvider(Private){var BaseMapsVisualization=Private(_base_maps_visualization.BaseMapsVisualizationProvider);var tooltipFormatter=Private(_tooltip_formatter.TileMapTooltipFormatterProvider);var CoordinateMapsVisualization=function(_BaseMapsVisualizatio){_inherits(CoordinateMapsVisualization,_BaseMapsVisualizatio);function CoordinateMapsVisualization(element,vis){var _this;_classCallCheck(this,CoordinateMapsVisualization);_this=_possibleConstructorReturn(this,_getPrototypeOf(CoordinateMapsVisualization).call(this,element,vis));_this._geohashLayer=null;return _this}_createClass(CoordinateMapsVisualization,[{key:"_makeKibanaMap",value:function(){var _makeKibanaMap2=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var _this2=this;var updateGeohashAgg,uiState,previousPrecision,precisionChange;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return _get(_getPrototypeOf(CoordinateMapsVisualization.prototype),"_makeKibanaMap",this).call(this);case 2:updateGeohashAgg=function updateGeohashAgg(){var geohashAgg=_this2._getGeoHashAgg();if(!geohashAgg)return;geohashAgg.params.mapBounds=_this2._kibanaMap.getBounds();geohashAgg.params.mapZoom=_this2._kibanaMap.getZoomLevel();geohashAgg.params.mapCenter=_this2._kibanaMap.getCenter()};updateGeohashAgg();uiState=this.vis.getUiState();uiState.on("change",function(prop){if(prop==="mapZoom"||prop==="mapCenter"){updateGeohashAgg()}});previousPrecision=this._kibanaMap.getGeohashPrecision();precisionChange=false;this._kibanaMap.on("zoomchange",function(){var geohashAgg=_this2._getGeoHashAgg();precisionChange=previousPrecision!==_this2._kibanaMap.getGeohashPrecision();previousPrecision=_this2._kibanaMap.getGeohashPrecision();if(!geohashAgg){return}var isAutoPrecision=typeof geohashAgg.params.autoPrecision==="boolean"?geohashAgg.params.autoPrecision:true;if(isAutoPrecision){geohashAgg.params.precision=previousPrecision}});this._kibanaMap.on("zoomend",function(){var geohashAgg=_this2._getGeoHashAgg();if(!geohashAgg){return}var isAutoPrecision=typeof geohashAgg.params.autoPrecision==="boolean"?geohashAgg.params.autoPrecision:true;if(!isAutoPrecision){return}if(precisionChange){_this2.vis.updateState()}else{_this2._updateData(_this2._geoJsonFeatureCollectionAndMeta)}});this._kibanaMap.addDrawControl();this._kibanaMap.on("drawCreated:rectangle",function(event){var geohashAgg=_this2._getGeoHashAgg();_this2.addSpatialFilter(geohashAgg,"geo_bounding_box",event.bounds)});this._kibanaMap.on("drawCreated:polygon",function(event){var geohashAgg=_this2._getGeoHashAgg();_this2.addSpatialFilter(geohashAgg,"geo_polygon",{points:event.points})});case 13:case"end":return _context.stop()}}},_callee,this)}));function _makeKibanaMap(){return _makeKibanaMap2.apply(this,arguments)}return _makeKibanaMap}()},{key:"_updateData",value:function(){var _updateData2=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(geojsonFeatureCollectionAndMeta){return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!(this._getMapsParams().mapType!=="Heatmap"&&geojsonFeatureCollectionAndMeta===this._geoJsonFeatureCollectionAndMeta)){_context2.next=2;break}return _context2.abrupt("return");case 2:if(this._geohashLayer){this._kibanaMap.removeLayer(this._geohashLayer);this._geohashLayer=null}if(geojsonFeatureCollectionAndMeta){_context2.next=8;break}this._geoJsonFeatureCollectionAndMeta=null;this._kibanaMap.removeLayer(this._geohashLayer);this._geohashLayer=null;return _context2.abrupt("return");case 8:this._geoJsonFeatureCollectionAndMeta=geojsonFeatureCollectionAndMeta;this._recreateGeohashLayer();case 10:case"end":return _context2.stop()}}},_callee2,this)}));function _updateData(_x){return _updateData2.apply(this,arguments)}return _updateData}()},{key:"_recreateGeohashLayer",value:function _recreateGeohashLayer(){if(this._geohashLayer){this._kibanaMap.removeLayer(this._geohashLayer);this._geohashLayer=null}var geohashOptions=this._getGeohashOptions();this._geohashLayer=new _geohash_layer.GeohashLayer(this._geoJsonFeatureCollectionAndMeta.featureCollection,this._geoJsonFeatureCollectionAndMeta.meta,geohashOptions,this._kibanaMap.getZoomLevel(),this._kibanaMap);this._kibanaMap.addLayer(this._geohashLayer)}},{key:"_updateParams",value:function(){var _updateParams2=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(){var geohashOptions;return regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return _get(_getPrototypeOf(CoordinateMapsVisualization.prototype),"_updateParams",this).call(this);case 2:this._kibanaMap.setDesaturateBaseLayer(this._params.isDesaturated);geohashOptions=this._getGeohashOptions();if(!this._geohashLayer||!this._geohashLayer.isReusable(geohashOptions)){if(this._geoJsonFeatureCollectionAndMeta){this._recreateGeohashLayer()}this._updateData(this._geoJsonFeatureCollectionAndMeta)}case 5:case"end":return _context3.stop()}}},_callee3,this)}));function _updateParams(){return _updateParams2.apply(this,arguments)}return _updateParams}()},{key:"_getGeohashOptions",value:function _getGeohashOptions(){var _this3=this;var newParams=this._getMapsParams();var metricAgg=this._getMetricAgg();var boundTooltipFormatter=tooltipFormatter.bind(null,this.vis.getAggConfig(),metricAgg);return{label:metricAgg?metricAgg.makeLabel():"",valueFormatter:this._geoJsonFeatureCollectionAndMeta?metricAgg&&metricAgg.fieldFormatter():null,tooltipFormatter:this._geoJsonFeatureCollectionAndMeta?boundTooltipFormatter:null,mapType:newParams.mapType,isFilteredByCollar:this._isFilteredByCollar(),fetchBounds:function fetchBounds(){return _this3.vis.API.getGeohashBounds()},colorRamp:newParams.colorSchema,heatmap:{heatClusterSize:newParams.heatClusterSize}}}},{key:"addSpatialFilter",value:function addSpatialFilter(agg,filterName,filterData){if(!agg){return}var indexPatternName=agg.getIndexPattern().id;var field=agg.fieldName();var filter={meta:{negate:false,index:indexPatternName}};filter[filterName]={ignore_unmapped:true};filter[filterName][field]=filterData;this.vis.API.queryFilter.addFilters([filter]);this.vis.updateState()}},{key:"_getGeoHashAgg",value:function _getGeoHashAgg(){return this.vis.getAggConfig().find(function(agg){return _lodash["default"].get(agg,"type.dslName")==="geohash_grid"})}},{key:"_getMetricAgg",value:function _getMetricAgg(){return this.vis.getAggConfig().find(function(agg){return agg.type.type==="metrics"})}},{key:"_isFilteredByCollar",value:function _isFilteredByCollar(){var DEFAULT=false;var agg=this._getGeoHashAgg();if(agg){return _lodash["default"].get(agg,"params.isFilteredByCollar",DEFAULT)}else{return DEFAULT}}}]);return CoordinateMapsVisualization}(BaseMapsVisualization);return CoordinateMapsVisualization}},5886:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.GeohashLayer=void 0;var _leaflet=_interopRequireDefault(__webpack_require__(248));var _lodash=_interopRequireDefault(__webpack_require__(1));var _i18n=__webpack_require__(5);var _kibana_map_layer=__webpack_require__(1011);var _heatmap=__webpack_require__(5887);var _scaled_circles=__webpack_require__(1013);var _shaded_circles=__webpack_require__(5888);var _geohash_grid=__webpack_require__(5889);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var GeohashLayer=function(_KibanaMapLayer){_inherits(GeohashLayer,_KibanaMapLayer);function GeohashLayer(featureCollection,featureCollectionMetaData,options,zoom,kibanaMap){var _this;_classCallCheck(this,GeohashLayer);_this=_possibleConstructorReturn(this,_getPrototypeOf(GeohashLayer).call(this));_this._featureCollection=featureCollection;_this._featureCollectionMetaData=featureCollectionMetaData;_this._geohashOptions=options;_this._zoom=zoom;_this._kibanaMap=kibanaMap;var geojson=_leaflet["default"].geoJson(_this._featureCollection);_this._bounds=geojson.getBounds();_this._createGeohashMarkers();_this._lastBounds=null;return _this}_createClass(GeohashLayer,[{key:"_createGeohashMarkers",value:function _createGeohashMarkers(){var _this2=this;var markerOptions={isFilteredByCollar:this._geohashOptions.isFilteredByCollar,valueFormatter:this._geohashOptions.valueFormatter,tooltipFormatter:this._geohashOptions.tooltipFormatter,label:this._geohashOptions.label,colorRamp:this._geohashOptions.colorRamp};switch(this._geohashOptions.mapType){case"Scaled Circle Markers":this._geohashMarkers=new _scaled_circles.ScaledCirclesMarkers(this._featureCollection,this._featureCollectionMetaData,markerOptions,this._zoom,this._kibanaMap);break;case"Shaded Circle Markers":this._geohashMarkers=new _shaded_circles.ShadedCirclesMarkers(this._featureCollection,this._featureCollectionMetaData,markerOptions,this._zoom,this._kibanaMap);break;case"Shaded Geohash Grid":this._geohashMarkers=new _geohash_grid.GeohashGridMarkers(this._featureCollection,this._featureCollectionMetaData,markerOptions,this._zoom,this._kibanaMap);break;case"Heatmap":var radius=15;if(this._featureCollectionMetaData.geohashGridDimensionsAtEquator){var minGridLength=_lodash["default"].min(this._featureCollectionMetaData.geohashGridDimensionsAtEquator);var metersPerPixel=this._kibanaMap.getMetersPerPixel();radius=minGridLength/metersPerPixel/2}radius=radius*parseFloat(this._geohashOptions.heatmap.heatClusterSize);this._geohashMarkers=new _heatmap.HeatmapMarkers(this._featureCollection,{radius:radius,blur:radius,maxZoom:this._kibanaMap.getZoomLevel(),minOpacity:.1,tooltipFormatter:this._geohashOptions.tooltipFormatter},this._zoom,this._featureCollectionMetaData.max);break;default:throw new Error(_i18n.i18n.translate("tileMap.geohashLayer.mapTitle",{defaultMessage:"{mapType} mapType not recognized",values:{mapType:this._geohashOptions.mapType}}))}this._geohashMarkers.on("showTooltip",function(event){return _this2.emit("showTooltip",event)});this._geohashMarkers.on("hideTooltip",function(event){return _this2.emit("hideTooltip",event)});this._leafletLayer=this._geohashMarkers.getLeafletLayer()}},{key:"appendLegendContents",value:function appendLegendContents(jqueryDiv){return this._geohashMarkers.appendLegendContents(jqueryDiv)}},{key:"movePointer",value:function movePointer(){var _this$_geohashMarkers;(_this$_geohashMarkers=this._geohashMarkers).movePointer.apply(_this$_geohashMarkers,arguments)}},{key:"getBounds",value:function(){var _getBounds=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var geoHashBounds,northEast,southWest;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!this._geohashOptions.fetchBounds){_context.next=8;break}_context.next=3;return this._geohashOptions.fetchBounds();case 3:geoHashBounds=_context.sent;if(!geoHashBounds){_context.next=8;break}northEast=_leaflet["default"].latLng(geoHashBounds.top_left.lat,geoHashBounds.bottom_right.lon);southWest=_leaflet["default"].latLng(geoHashBounds.bottom_right.lat,geoHashBounds.top_left.lon);return _context.abrupt("return",_leaflet["default"].latLngBounds(southWest,northEast));case 8:return _context.abrupt("return",this._bounds);case 9:case"end":return _context.stop()}}},_callee,this)}));function getBounds(){return _getBounds.apply(this,arguments)}return getBounds}()},{key:"updateExtent",value:function updateExtent(){if(!this._geohashOptions.isFilteredByCollar){var bounds=this._kibanaMap.getLeafletBounds();if(!this._lastBounds||!this._lastBounds.equals(bounds)){this._kibanaMap.removeLayer(this);this._createGeohashMarkers();this._kibanaMap.addLayer(this)}this._lastBounds=bounds}}},{key:"isReusable",value:function isReusable(options){if(_lodash["default"].isEqual(this._geohashOptions,options)){return true}if(this._geohashOptions.colorRamp!==options.colorRamp){return false}else if(this._geohashOptions.mapType!==options.mapType){return false}else if(this._geohashOptions.mapType==="Heatmap"&&!_lodash["default"].isEqual(this._geohashOptions.heatmap,options)){return false}else{return true}}}]);return GeohashLayer}(_kibana_map_layer.KibanaMapLayer);exports.GeohashLayer=GeohashLayer},5887:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.HeatmapMarkers=void 0;var _leaflet=_interopRequireDefault(__webpack_require__(248));var _lodash=_interopRequireDefault(__webpack_require__(1));var _d=_interopRequireDefault(__webpack_require__(33));var _events=__webpack_require__(152);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var HeatmapMarkers=function(_EventEmitter){_inherits(HeatmapMarkers,_EventEmitter);function HeatmapMarkers(featureCollection,options,zoom,max){var _this;_classCallCheck(this,HeatmapMarkers);_this=_possibleConstructorReturn(this,_getPrototypeOf(HeatmapMarkers).call(this));_this._geojsonFeatureCollection=featureCollection;var points=dataToHeatArray(featureCollection,max);_this._leafletLayer=_leaflet["default"].heatLayer(points,options);_this._tooltipFormatter=options.tooltipFormatter;_this._zoom=zoom;_this._disableTooltips=false;_this._getLatLng=_lodash["default"].memoize(function(feature){return _leaflet["default"].latLng(feature.geometry.coordinates[1],feature.geometry.coordinates[0])},function(feature){return[feature.geometry.coordinates[1],feature.geometry.coordinates[0]].join(",")});_this._addTooltips();return _this}_createClass(HeatmapMarkers,[{key:"getBounds",value:function getBounds(){return this._leafletLayer.getBounds()}},{key:"getLeafletLayer",value:function getLeafletLayer(){return this._leafletLayer}},{key:"appendLegendContents",value:function appendLegendContents(){}},{key:"movePointer",value:function movePointer(type,event){if(type==="mousemove"){this._debounceMoveMoveLocation(event)}else if(type==="mouseout"){this.emit("hideTooltip")}else if(type==="mousedown"){this._disableTooltips=true;this.emit("hideTooltip")}else if(type==="mouseup"){this._disableTooltips=false}}},{key:"_addTooltips",value:function _addTooltips(){var _this2=this;var mouseMoveLocation=function mouseMoveLocation(e){if(!_this2._geojsonFeatureCollection.features.length||_this2._disableTooltips){_this2.emit("hideTooltip");return}var feature=_this2._nearestFeature(e.latlng);if(_this2._tooltipProximity(e.latlng,feature)){var content=_this2._tooltipFormatter(feature);if(!content){return}_this2.emit("showTooltip",{content:content,position:e.latlng})}else{_this2.emit("hideTooltip")}};this._debounceMoveMoveLocation=_lodash["default"].debounce(mouseMoveLocation.bind(this),15,{leading:true,trailing:false})}},{key:"_nearestFeature",value:function _nearestFeature(latLng){var self=this;var nearest;if(latLng.lng<-180||latLng.lng>180){return}_lodash["default"].reduce(this._geojsonFeatureCollection.features,function(distance,feature){var featureLatLng=self._getLatLng(feature);var dist=latLng.distanceTo(featureLatLng);if(dist<distance){nearest=feature;return dist}return distance},Infinity);return nearest}},{key:"_tooltipProximity",value:function _tooltipProximity(latlng,feature){if(!feature)return;var showTip=false;var featureLatLng=this._getLatLng(feature);var zoomScale=_d["default"].scale.linear().domain([1,4,7,10,13,16,18]).range([1e6,3e5,1e5,15e3,2e3,150,50]);var proximity=zoomScale(this._zoom);var distance=latlng.distanceTo(featureLatLng);var maxLngDif=40;var lngDif=Math.abs(latlng.lng-featureLatLng.lng);if(distance<proximity&&lngDif<maxLngDif){showTip=true}_d["default"].scale.pow().exponent(.2).domain([1,18]).range([15e5,50]);return showTip}}]);return HeatmapMarkers}(_events.EventEmitter);exports.HeatmapMarkers=HeatmapMarkers;function dataToHeatArray(featureCollection,max){return featureCollection.features.map(function(feature){var lat=feature.geometry.coordinates[1];var lng=feature.geometry.coordinates[0];var heatIntensity=feature.properties.value/max;return[lat,lng,heatIntensity]})}},5888:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ShadedCirclesMarkers=void 0;var _leaflet=_interopRequireDefault(__webpack_require__(248));var _lodash=_interopRequireDefault(__webpack_require__(1));var _scaled_circles=__webpack_require__(1013);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var ShadedCirclesMarkers=function(_ScaledCirclesMarkers){_inherits(ShadedCirclesMarkers,_ScaledCirclesMarkers);function ShadedCirclesMarkers(){_classCallCheck(this,ShadedCirclesMarkers);return _possibleConstructorReturn(this,_getPrototypeOf(ShadedCirclesMarkers).apply(this,arguments))}_createClass(ShadedCirclesMarkers,[{key:"getMarkerFunction",value:function getMarkerFunction(){var _this=this;var scaleFactor=.8;return function(feature,latlng){var radius=_this._geohashMinDistance(feature)*scaleFactor;return _leaflet["default"].circle(latlng,radius)}}},{key:"_geohashMinDistance",value:function _geohashMinDistance(feature){var centerPoint=feature.properties.geohash_meta.center;var geohashRect=feature.properties.geohash_meta.rectangle;var east=_leaflet["default"].latLng([centerPoint[0],geohashRect[2][1]]);var north=_leaflet["default"].latLng([geohashRect[3][0],centerPoint[1]]);var center=_leaflet["default"].latLng([centerPoint[0],centerPoint[1]]);var eastRadius=Math.floor(center.distanceTo(east));var northRadius=Math.floor(center.distanceTo(north));return _lodash["default"].min([eastRadius,northRadius])}}]);return ShadedCirclesMarkers}(_scaled_circles.ScaledCirclesMarkers);exports.ShadedCirclesMarkers=ShadedCirclesMarkers},5889:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.GeohashGridMarkers=void 0;var _leaflet=_interopRequireDefault(__webpack_require__(248));var _scaled_circles=__webpack_require__(1013);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var GeohashGridMarkers=function(_ScaledCirclesMarkers){_inherits(GeohashGridMarkers,_ScaledCirclesMarkers);function GeohashGridMarkers(){_classCallCheck(this,GeohashGridMarkers);return _possibleConstructorReturn(this,_getPrototypeOf(GeohashGridMarkers).apply(this,arguments))}_createClass(GeohashGridMarkers,[{key:"getMarkerFunction",value:function getMarkerFunction(){return function(feature){var geohashRect=feature.properties.geohash_meta.rectangle;var corners=[[geohashRect[3][0],geohashRect[3][1]],[geohashRect[1][0],geohashRect[1][1]]];return _leaflet["default"].rectangle(corners)}}}]);return GeohashGridMarkers}(_scaled_circles.ScaledCirclesMarkers);exports.GeohashGridMarkers=GeohashGridMarkers},5890:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TileMapTooltipFormatterProvider=TileMapTooltipFormatterProvider;var _jquery=_interopRequireDefault(__webpack_require__(25));var _i18n=__webpack_require__(5);var _tooltip=_interopRequireDefault(__webpack_require__(5891));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function TileMapTooltipFormatterProvider($compile,$rootScope){var $tooltipScope=$rootScope.$new();var $el=(0,_jquery["default"])("<div>").html(_tooltip["default"]);$compile($el)($tooltipScope);return function tooltipFormatter(aggConfig,metricAgg,feature){if(!feature){return""}$tooltipScope.details=[{label:metricAgg.makeLabel(),value:metricAgg.fieldFormatter()(feature.properties.value)},{label:_i18n.i18n.translate("tileMap.tooltipFormatter.latitudeLabel",{defaultMessage:"Latitude"}),value:feature.geometry.coordinates[1]},{label:_i18n.i18n.translate("tileMap.tooltipFormatter.longitudeLabel",{defaultMessage:"Longitude"}),value:feature.geometry.coordinates[0]}];$tooltipScope.$apply();return $el.html()}}},5891:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<table>\n  <tbody>\n    <tr ng-repeat="detail in details" >\n      <td class="visTooltip__label">{{detail.label}}</td>\n      <td class="visTooltip__value">{{detail.value}}</td>\n    </tr>\n  </tbody>\n</table>\n'},5903:function(module,exports,__webpack_require__){"use strict";var _i18n=__webpack_require__(5);var _vis_types=__webpack_require__(85);var _vis_factory=__webpack_require__(97);var _editor_size=__webpack_require__(574);var _update_status=__webpack_require__(313);var _default_feedback_message=__webpack_require__(571);var _vega_request_handler=__webpack_require__(1409);var _vega_visualization=__webpack_require__(5904);__webpack_require__(5909);__webpack_require__(2007);__webpack_require__(5910);__webpack_require__(5911);var _vega_editor_template=_interopRequireDefault(__webpack_require__(5914));var _defaultSpec=_interopRequireDefault(__webpack_require__(5915));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_vis_types.VisTypesRegistryProvider.register(function(Private){var VisFactory=Private(_vis_factory.VisFactoryProvider);var vegaRequestHandler=Private(_vega_request_handler.VegaRequestHandlerProvider).handler;var VegaVisualization=Private(_vega_visualization.VegaVisualizationProvider);return VisFactory.createBaseVisualization({name:"vega",title:"Vega",description:_i18n.i18n.translate("vega.type.vegaDescription",{defaultMessage:"Create custom visualizations using Vega and Vega-Lite",description:"Vega and Vega-Lite are product names and should not be translated"}),icon:"visVega",visConfig:{defaults:{spec:_defaultSpec["default"]}},editorConfig:{optionsTemplate:_vega_editor_template["default"],enableAutoApply:true,defaultSize:_editor_size.DefaultEditorSize.MEDIUM},visualization:VegaVisualization,requiresUpdateStatus:[_update_status.Status.DATA,_update_status.Status.RESIZE],requestHandler:vegaRequestHandler,responseHandler:"none",options:{showIndexSelection:false,showQueryBar:true,showFilterBar:true},stage:"experimental",feedbackMessage:_default_feedback_message.defaultFeedbackMessage})})},5904:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VegaVisualizationProvider=VegaVisualizationProvider;var _i18n=__webpack_require__(5);var _notify=__webpack_require__(24);var _vega_view=__webpack_require__(5905);var _vega_map_view=__webpack_require__(5906);var _saved_objects=__webpack_require__(108);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function VegaVisualizationProvider(Private,vegaConfig,serviceSettings,$rootScope){var savedObjectsClient=Private(_saved_objects.SavedObjectsClientProvider);return function(){function VegaVisualization(el,vis){_classCallCheck(this,VegaVisualization);this._el=el;this._vis=vis}_createClass(VegaVisualization,[{key:"findIndex",value:function(){var _findIndex=_asyncToGenerator(regeneratorRuntime.mark(function _callee(index){var idxObj;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!index){_context.next=8;break}_context.next=3;return(0,_saved_objects.findObjectByTitle)(savedObjectsClient,"index-pattern",index);case 3:idxObj=_context.sent;if(idxObj){_context.next=6;break}throw new Error(_i18n.i18n.translate("vega.visualization.indexNotFoundErrorMessage",{defaultMessage:"Index {index} not found",values:{index:'"'.concat(index,'"')}}));case 6:_context.next=13;break;case 8:_context.next=10;return this._vis.API.indexPatterns.getDefault();case 10:idxObj=_context.sent;if(idxObj){_context.next=13;break}throw new Error(_i18n.i18n.translate("vega.visualization.unableToFindDefaultIndexErrorMessage",{defaultMessage:"Unable to find default index"}));case 13:return _context.abrupt("return",idxObj.id);case 14:case"end":return _context.stop()}}},_callee,this)}));function findIndex(_x){return _findIndex.apply(this,arguments)}return findIndex}()},{key:"render",value:function(){var _render2=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(visData,visParams,status){return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!(!visData&&!this._vegaView)){_context2.next=3;break}_notify.toastNotifications.addWarning(_i18n.i18n.translate("vega.visualization.unableToRenderWithoutDataWarningMessage",{defaultMessage:"Unable to render without data"}));return _context2.abrupt("return");case 3:_context2.prev=3;_context2.next=6;return this._render(visData,status);case 6:_context2.next=11;break;case 8:_context2.prev=8;_context2.t0=_context2["catch"](3);if(this._vegaView){this._vegaView.onError(_context2.t0)}else{_notify.toastNotifications.addError(_context2.t0,{title:_i18n.i18n.translate("vega.visualization.renderErrorTitle",{defaultMessage:"Vega error"})})}case 11:case"end":return _context2.stop()}}},_callee2,this,[[3,8]])}));function render(_x2,_x3,_x4){return _render2.apply(this,arguments)}return render}()},{key:"_render",value:function(){var _render3=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(vegaParser,status){var vegaViewParams;return regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(!(vegaParser&&(status.data||!this._vegaView))){_context3.next=11;break}if(!this._vegaView){_context3.next=5;break}_context3.next=4;return this._vegaView.destroy();case 4:this._vegaView=null;case 5:vegaViewParams={vegaConfig:vegaConfig,parentEl:this._el,vegaParser:vegaParser,serviceSettings:serviceSettings,queryfilter:this._vis.API.queryFilter,timefilter:this._vis.API.timeFilter,findIndex:this.findIndex.bind(this),$rootScope:$rootScope};if(vegaParser.useMap){this._vegaView=new _vega_map_view.VegaMapView(vegaViewParams)}else{this._vegaView=new _vega_view.VegaView(vegaViewParams)}_context3.next=9;return this._vegaView.init();case 9:_context3.next=14;break;case 11:if(!status.resize){_context3.next=14;break}_context3.next=14;return this._vegaView.resize();case 14:case"end":return _context3.stop()}}},_callee3,this)}));function _render(_x5,_x6){return _render3.apply(this,arguments)}return _render}()},{key:"destroy",value:function destroy(){return this._vegaView&&this._vegaView.destroy()}}]);return VegaVisualization}()}},5905:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VegaView=void 0;var vega=_interopRequireWildcard(__webpack_require__(564));var _vega_base_view=__webpack_require__(795);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var VegaView=function(_VegaBaseView){_inherits(VegaView,_VegaBaseView);function VegaView(){_classCallCheck(this,VegaView);return _possibleConstructorReturn(this,_getPrototypeOf(VegaView).apply(this,arguments))}_createClass(VegaView,[{key:"_initViewCustomizations",value:function(){var _initViewCustomizations2=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var view;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(this._$container){_context.next=2;break}return _context.abrupt("return");case 2:view=new vega.View(vega.parse(this._parser.spec),this._vegaViewConfig);this.setDebugValues(view,this._parser.spec,this._parser.vlspec);view.warn=this.onWarn.bind(this);view.error=this.onError.bind(this);if(this._parser.useResize)this.updateVegaSize(view);view.initialize(this._$container.get(0),this._$controls.get(0));if(this._parser.useHover)view.hover();_context.next=11;return this.setView(view);case 11:case"end":return _context.stop()}}},_callee,this)}));function _initViewCustomizations(){return _initViewCustomizations2.apply(this,arguments)}return _initViewCustomizations}()}]);return VegaView}(_vega_base_view.VegaBaseView);exports.VegaView=VegaView},5906:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VegaMapView=void 0;var _kibana_map=__webpack_require__(1998);var vega=_interopRequireWildcard(__webpack_require__(564));var _vega_base_view=__webpack_require__(795);var _vega_map_layer=__webpack_require__(5907);var _i18n=__webpack_require__(5);var _chrome=_interopRequireDefault(__webpack_require__(19));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var VegaMapView=function(_VegaBaseView){_inherits(VegaMapView,_VegaBaseView);function VegaMapView(){_classCallCheck(this,VegaMapView);return _possibleConstructorReturn(this,_getPrototypeOf(VegaMapView).apply(this,arguments))}_createClass(VegaMapView,[{key:"_initViewCustomizations",value:function(){var _initViewCustomizations2=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var _this=this;var mapConfig,baseMapOpts,limitMinZ,limitMaxZ,tmsServices,emsTileLayerId,mapStyle,isDarkMode,validate,minZoom,maxZoom,_ref,zoom,vegaMapLayer,vegaView;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:mapConfig=this._parser.mapConfig;limitMinZ=0;limitMaxZ=25;if(!(mapConfig.mapStyle!==false)){_context.next=21;break}_context.next=6;return this._serviceSettings.getTMSServices();case 6:tmsServices=_context.sent;if(this._$container){_context.next=9;break}return _context.abrupt("return");case 9:emsTileLayerId=_chrome["default"].getInjected("emsTileLayerId",true);mapStyle=mapConfig.mapStyle==="default"?emsTileLayerId.bright:mapConfig.mapStyle;isDarkMode=_chrome["default"].getUiSettingsClient().get("theme:darkMode");baseMapOpts=tmsServices.find(function(s){return s.id===mapStyle});_context.t0=_objectSpread;_context.t1={};_context.t2=baseMapOpts;_context.next=18;return this._serviceSettings.getAttributesForTMSLayer(baseMapOpts,true,isDarkMode);case 18:_context.t3=_context.sent;baseMapOpts=(0,_context.t0)(_context.t1,_context.t2,_context.t3);if(!baseMapOpts){this.onWarn(_i18n.i18n.translate("vega.mapView.mapStyleNotFoundWarningMessage",{defaultMessage:"{mapStyleParam} was not found",values:{mapStyleParam:'"mapStyle": '.concat(JSON.stringify(mapStyle))}}))}else{limitMinZ=baseMapOpts.minZoom;limitMaxZ=baseMapOpts.maxZoom}case 21:validate=function validate(name,value,dflt,min,max){if(value===undefined){value=dflt}else if(value<min){_this.onWarn(_i18n.i18n.translate("vega.mapView.resettingPropertyToMinValueWarningMessage",{defaultMessage:"Resetting {name} to {min}",values:{name:'"'.concat(name,'"'),min:min}}));value=min}else if(value>max){_this.onWarn(_i18n.i18n.translate("vega.mapView.resettingPropertyToMaxValueWarningMessage",{defaultMessage:"Resetting {name} to {max}",values:{name:'"'.concat(name,'"'),max:max}}));value=max}return value};minZoom=validate("minZoom",mapConfig.minZoom,limitMinZ,limitMinZ,limitMaxZ);maxZoom=validate("maxZoom",mapConfig.maxZoom,limitMaxZ,limitMinZ,limitMaxZ);if(minZoom>maxZoom){this.onWarn(_i18n.i18n.translate("vega.mapView.minZoomAndMaxZoomHaveBeenSwappedWarningMessage",{defaultMessage:"{minZoomPropertyName} and {maxZoomPropertyName} have been swapped",values:{minZoomPropertyName:'"minZoom"',maxZoomPropertyName:'"maxZoom"'}}));_ref=[maxZoom,minZoom];minZoom=_ref[0];maxZoom=_ref[1]}zoom=validate("zoom",mapConfig.zoom,2,minZoom,maxZoom);this._kibanaMap=new _kibana_map.KibanaMap(this._$container.get(0),{zoom:zoom,minZoom:minZoom,maxZoom:maxZoom,center:[mapConfig.latitude,mapConfig.longitude],zoomControl:mapConfig.zoomControl,scrollWheelZoom:mapConfig.scrollWheelZoom});if(baseMapOpts){this._kibanaMap.setBaseLayer({baseLayerType:"tms",options:baseMapOpts})}vegaMapLayer=new _vega_map_layer.VegaMapLayer(this._parser.spec,{vega:vega,bindingsContainer:this._$controls.get(0),delayRepaint:mapConfig.delayRepaint,viewConfig:this._vegaViewConfig,onWarning:this.onWarn.bind(this),onError:this.onError.bind(this)});this._kibanaMap.addLayer(vegaMapLayer);this._addDestroyHandler(function(){_this._kibanaMap.removeLayer(vegaMapLayer);if(baseMapOpts){_this._kibanaMap.setBaseLayer(null)}_this._kibanaMap.destroy()});vegaView=vegaMapLayer.getVegaView();this.setDebugValues(vegaView,this._parser.spec,this._parser.vlspec);_context.next=35;return this.setView(vegaView);case 35:case"end":return _context.stop()}}},_callee,this)}));function _initViewCustomizations(){return _initViewCustomizations2.apply(this,arguments)}return _initViewCustomizations}()}]);return VegaMapView}(_vega_base_view.VegaBaseView);exports.VegaMapView=VegaMapView},5907:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VegaMapLayer=void 0;var _leaflet=_interopRequireDefault(__webpack_require__(248));__webpack_require__(5908);var _kibana_map_layer=__webpack_require__(1011);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var VegaMapLayer=function(_KibanaMapLayer){_inherits(VegaMapLayer,_KibanaMapLayer);function VegaMapLayer(spec,options){var _this;_classCallCheck(this,VegaMapLayer);_this=_possibleConstructorReturn(this,_getPrototypeOf(VegaMapLayer).call(this));_this._attribution=options.attribution;delete options.attribution;_this._leafletLayer=_leaflet["default"].vega(spec,options);return _this}_createClass(VegaMapLayer,[{key:"getVegaView",value:function getVegaView(){return this._leafletLayer._view}},{key:"getVegaSpec",value:function getVegaSpec(){return this._leafletLayer._spec}}]);return VegaMapLayer}(_kibana_map_layer.KibanaMapLayer);exports.VegaMapLayer=VegaMapLayer},5908:function(module,exports,__webpack_require__){module.exports=__webpack_require__(18)(2218)},5909:function(module,exports,__webpack_require__){module.exports=__webpack_require__(18)(2176)},5910:function(module,exports,__webpack_require__){"use strict";var _jsonStringifyPrettyCompact=_interopRequireDefault(__webpack_require__(1413));var _hjson=_interopRequireDefault(__webpack_require__(1411));var _modules=__webpack_require__(12);__webpack_require__(2008);var _notify=__webpack_require__(24);var _i18n=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var _module=_modules.uiModules.get("kibana/vega",["kibana"]);_module.controller("VegaEditorController",function($scope){return new(function(){function VegaEditorController(){var _this=this;_classCallCheck(this,VegaEditorController);$scope.aceLoaded=function(editor){editor.$blockScrolling=Infinity;var session=editor.getSession();session.setTabSize(2);session.setUseSoftTabs(true);_this.aceEditor=editor};$scope.formatJson=function(event){_this._format(event,_jsonStringifyPrettyCompact["default"],{maxLength:_this._getCodeWidth()})};$scope.formatHJson=function(event){_this._format(event,_hjson["default"].stringify,{condense:_this._getCodeWidth(),bracesSameLine:true,keepWsc:true})}}_createClass(VegaEditorController,[{key:"_getCodeWidth",value:function _getCodeWidth(){return this.aceEditor.getSession().getWrapLimit()}},{key:"_format",value:function _format(event,stringify,opts){var _this2=this;event.preventDefault();var newSpec;try{var spec=_hjson["default"].parse(this.aceEditor.getSession().doc.getValue(),{legacyRoot:false,keepWsc:true});newSpec=stringify(spec,opts)}catch(err){_notify.toastNotifications.addError(err,{title:_i18n.i18n.translate("vega.editor.formatError",{defaultMessage:"Error formatting spec"})});return}$scope.$$postDigest(function(){_this2.aceEditor.getSession().doc.setValue(newSpec)})}}]);return VegaEditorController}())})},5911:function(module,exports,__webpack_require__){"use strict";__webpack_require__(181);var _i18n=__webpack_require__(28);var _modules=__webpack_require__(12);var _vega_help_menu=__webpack_require__(5912);var _vega_action_menu=__webpack_require__(5913);var _module=_modules.uiModules.get("kibana/vega",["react"]);_module.directive("vegaActionsMenu",function(reactDirective){return reactDirective((0,_i18n.wrapInI18nContext)(_vega_action_menu.VegaActionsMenu))});_module.directive("vegaHelpMenu",function(reactDirective){return reactDirective((0,_i18n.wrapInI18nContext)(_vega_help_menu.VegaHelpMenu))})},5912:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VegaHelpMenu=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(2);var _react2=__webpack_require__(10);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var VegaHelpMenu=function(_Component){_inherits(VegaHelpMenu,_Component);function VegaHelpMenu(props){var _this;_classCallCheck(this,VegaHelpMenu);_this=_possibleConstructorReturn(this,_getPrototypeOf(VegaHelpMenu).call(this,props));_defineProperty(_assertThisInitialized(_this),"onButtonClick",function(){_this.setState(function(prevState){return{isPopoverOpen:!prevState.isPopoverOpen}})});_defineProperty(_assertThisInitialized(_this),"closePopover",function(){_this.setState({isPopoverOpen:false})});_this.state={isPopoverOpen:false};return _this}_createClass(VegaHelpMenu,[{key:"render",value:function render(){var _this2=this;var button=_react["default"].createElement(_eui.EuiButtonIcon,{iconType:"questionInCircle",onClick:this.onButtonClick,"aria-label":_react["default"].createElement(_react2.FormattedMessage,{id:"vega.editor.vegaHelpButtonAriaLabel",defaultMessage:"Vega help"})});var items=[_react["default"].createElement(_eui.EuiContextMenuItem,{key:"vegaHelp",target:"_blank",rel:"noopener noreferrer",href:"https://www.elastic.co/guide/en/kibana/master/vega-graph.html",onClick:function onClick(){_this2.closePopover()}},_react["default"].createElement(_react2.FormattedMessage,{id:"vega.editor.vegaHelpLinkText",defaultMessage:"Kibana Vega Help"})),_react["default"].createElement(_eui.EuiContextMenuItem,{key:"vegaLiteDocs",target:"_blank",rel:"noopener noreferrer",href:"https://vega.github.io/vega-lite/docs/",onClick:function onClick(){_this2.closePopover()}},_react["default"].createElement(_react2.FormattedMessage,{id:"vega.editor.vegaLiteDocumentationLinkText",defaultMessage:"Vega-Lite Documentation"})),_react["default"].createElement(_eui.EuiContextMenuItem,{key:"vegaDoc",target:"_blank",rel:"noopener noreferrer",href:"https://vega.github.io/vega/docs/",onClick:function onClick(){_this2.closePopover()}},_react["default"].createElement(_react2.FormattedMessage,{id:"vega.editor.vegaDocumentationLinkText",defaultMessage:"Vega Documentation"}))];return _react["default"].createElement(_eui.EuiPopover,{id:"helpMenu",button:button,isOpen:this.state.isPopoverOpen,closePopover:this.closePopover,panelPaddingSize:"none",anchorPosition:"downLeft"},_react["default"].createElement(_eui.EuiContextMenuPanel,{items:items}))}}]);return VegaHelpMenu}(_react.Component);exports.VegaHelpMenu=VegaHelpMenu},5913:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VegaActionsMenu=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(17));var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(2);var _react2=__webpack_require__(10);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var VegaActionsMenu=function(_Component){_inherits(VegaActionsMenu,_Component);function VegaActionsMenu(props){var _this;_classCallCheck(this,VegaActionsMenu);_this=_possibleConstructorReturn(this,_getPrototypeOf(VegaActionsMenu).call(this,props));_defineProperty(_assertThisInitialized(_this),"onButtonClick",function(){_this.setState(function(prevState){return{isPopoverOpen:!prevState.isPopoverOpen}})});_defineProperty(_assertThisInitialized(_this),"closePopover",function(){_this.setState({isPopoverOpen:false})});_this.state={isPopoverOpen:false};return _this}_createClass(VegaActionsMenu,[{key:"render",value:function render(){var _this2=this;var button=_react["default"].createElement(_eui.EuiButtonIcon,{iconType:"wrench",onClick:this.onButtonClick,"aria-label":_react["default"].createElement(_react2.FormattedMessage,{id:"vega.editor.vegaEditorOptionsButtonAriaLabel",defaultMessage:"Vega editor options"})});var items=[_react["default"].createElement(_eui.EuiContextMenuItem,{key:"hjson",onClick:function onClick(event){_this2.closePopover();_this2.props.formatHJson(event)}},_react["default"].createElement(_react2.FormattedMessage,{id:"vega.editor.reformatAsHJSONButtonLabel",defaultMessage:"Reformat as HJSON"})),_react["default"].createElement(_eui.EuiContextMenuItem,{key:"json",onClick:function onClick(event){_this2.closePopover();_this2.props.formatJson(event)}},_react["default"].createElement(_react2.FormattedMessage,{id:"vega.editor.reformatAsJSONButtonLabel",defaultMessage:"Reformat as JSON, delete comments"}))];return _react["default"].createElement(_eui.EuiPopover,{id:"helpMenu",button:button,isOpen:this.state.isPopoverOpen,closePopover:this.closePopover,panelPaddingSize:"none",anchorPosition:"downLeft"},_react["default"].createElement(_eui.EuiContextMenuPanel,{items:items}))}}]);return VegaActionsMenu}(_react.Component);exports.VegaActionsMenu=VegaActionsMenu;VegaActionsMenu.propTypes={formatHJson:_propTypes["default"].func.isRequired,formatJson:_propTypes["default"].func.isRequired}},5914:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<div class="vgaEditor" ng-controller="VegaEditorController">\n  <div\n    kbn-ui-ace-keyboard-mode\n    ui-ace="{\n      onLoad: aceLoaded,\n      useWrapMode: true,\n      advanced: {\n        highlightActiveLine: false\n      },\n      rendererOptions: {\n        showPrintMargin: false\n      },\n      mode: \'hjson\'\n    }"\n    id="vegaAceEditor"\n    ng-model="editorState.params.spec"\n    data-test-subj="vega-editor"\n    class="vgaEditor__aceEditor"\n  ></div>\n\n  <div class="vgaEditor__aceEditorActions">\n    <vega-help-menu></vega-help-menu>\n\n    <vega-actions-menu\n      format-h-json="formatHJson"\n      format-json="formatJson"\n    ></vega-actions-menu>\n  </div>\n\n</div>\n'},5915:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='{\n/*\n\nWelcome to Vega visualizations.  Here you can design your own dataviz from scratch using a declarative language called Vega, or its simpler form Vega-Lite.  In Vega, you have the full control of what data is loaded, even from multiple sources, how that data is transformed, and what visual elements are used to show it.  Use help icon to view Vega examples, tutorials, and other docs.  Use the wrench icon to reformat this text, or to remove comments.\n\nThis example graph shows the document count in all indexes in the current time range.  You might need to adjust the time filter in the upper right corner.\n*/\n\n  $schema: https://vega.github.io/schema/vega-lite/v2.json\n  title: Event counts from all indexes\n\n  // Define the data source\n  data: {\n    url: {\n/*\nAn object instead of a string for the "url" param is treated as an Elasticsearch query. Anything inside this object is not part of the Vega language, but only understood by Kibana and Elasticsearch server. This query counts the number of documents per time interval, assuming you have a @timestamp field in your data.\n\nKibana has a special handling for the fields surrounded by "%".  They are processed before the the query is sent to Elasticsearch. This way the query becomes context aware, and can use the time range and the dashboard filters.\n*/\n\n      // Apply dashboard context filters when set\n      %context%: true\n      // Filter the time picker (upper right corner) with this field\n      %timefield%: @timestamp\n\n/*\nSee .search() documentation for :  https://www.elastic.co/guide/en/elasticsearch/client/javascript-api/current/api-reference.html#api-search\n*/\n\n      // Which index to search\n      index: _all\n      // Aggregate data by the time field into time buckets, counting the number of documents in each bucket.\n      body: {\n        aggs: {\n          time_buckets: {\n            date_histogram: {\n              // Use date histogram aggregation on @timestamp field\n              field: @timestamp\n              // The interval value will depend on the daterange picker (true), or use an integer to set an approximate bucket count\n              interval: {%autointerval%: true}\n              // Make sure we get an entire range, even if it has no data\n              extended_bounds: {\n                // Use the current time range\'s start and end\n                min: {%timefilter%: "min"}\n                max: {%timefilter%: "max"}\n              }\n              // Use this for linear (e.g. line, area) graphs.  Without it, empty buckets will not show up\n              min_doc_count: 0\n            }\n          }\n        }\n        // Speed up the response by only including aggregation results\n        size: 0\n      }\n    }\n/*\nElasticsearch will return results in this format:\n\naggregations: {\n  time_buckets: {\n    buckets: [\n      {\n        key_as_string: 2015-11-30T22:00:00.000Z\n        key: 1448920800000\n        doc_count: 0\n      },\n      {\n        key_as_string: 2015-11-30T23:00:00.000Z\n        key: 1448924400000\n        doc_count: 0\n      }\n      ...\n    ]\n  }\n}\n\nFor our graph, we only need the list of bucket values.  Use the format.property to discard everything else.\n*/\n    format: {property: "aggregations.time_buckets.buckets"}\n  }\n\n  // "mark" is the graphics element used to show our data.  Other mark values are: area, bar, circle, line, point, rect, rule, square, text, and tick.  See https://vega.github.io/vega-lite/docs/mark.html\n  mark: line\n\n  // "encoding" tells the "mark" what data to use and in what way.  See https://vega.github.io/vega-lite/docs/encoding.html\n  encoding: {\n    x: {\n      // The "key" value is the timestamp in milliseconds.  Use it for X axis.\n      field: key\n      type: temporal\n      axis: {title: false} // Customize X axis format\n    }\n    y: {\n      // The "doc_count" is the count per bucket.  Use it for Y axis.\n      field: doc_count\n      type: quantitative\n      axis: {title: "Document count"}\n    }\n  }\n}\n'},5916:function(module,exports,__webpack_require__){__webpack_require__(563);__webpack_require__(5917);__webpack_require__(561)},5917:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.noneResponseHandler=void 0;var _vis_response_handlers=__webpack_require__(562);var noneResponseHandler=function noneResponseHandler(){return{name:"none",handler:function handler(response){return new Promise(function(resolve){resolve(response)})}}};exports.noneResponseHandler=noneResponseHandler;_vis_response_handlers.VisResponseHandlersRegistryProvider.register(noneResponseHandler)},5918:function(module,exports,__webpack_require__){__webpack_require__(1415);__webpack_require__(5919)},5919:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.noneRequestHandlerProvider=void 0;var _vis_request_handlers=__webpack_require__(565);var noneRequestHandlerProvider=function noneRequestHandlerProvider(){return{name:"none",handler:function handler(){return new Promise(function(resolve){resolve()})}}};exports.noneRequestHandlerProvider=noneRequestHandlerProvider;_vis_request_handlers.VisRequestHandlersRegistryProvider.register(noneRequestHandlerProvider)},5920:function(module,exports,__webpack_require__){__webpack_require__(5921)},5921:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.defaultEditor=void 0;__webpack_require__(5922);__webpack_require__(2009);var _i18n=__webpack_require__(5);__webpack_require__(2011);__webpack_require__(5949);__webpack_require__(5950);var _jquery=_interopRequireDefault(__webpack_require__(25));var _lodash=_interopRequireDefault(__webpack_require__(1));var _angular=_interopRequireDefault(__webpack_require__(31));var _default=_interopRequireDefault(__webpack_require__(5951));var _eui=__webpack_require__(2);var _editor_size=__webpack_require__(574);var _vis_editor_types=__webpack_require__(2012);var _visualize_loader=__webpack_require__(663);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var defaultEditor=function defaultEditor($rootScope,$compile){var _class,_temp;return _temp=_class=function(){function DefaultEditor(el,savedObj){_classCallCheck(this,DefaultEditor);this.el=(0,_jquery["default"])(el);this.savedObj=savedObj;this.vis=savedObj.vis;if(!this.vis.type.editorConfig.optionTabs&&this.vis.type.editorConfig.optionsTemplate){this.vis.type.editorConfig.optionTabs=[{name:"options",title:_i18n.i18n.translate("common.ui.vis.editors.sidebar.tabs.optionsLabel",{defaultMessage:"Options"}),editor:this.vis.type.editorConfig.optionsTemplate}]}}_createClass(DefaultEditor,[{key:"render",value:function render(_ref){var _this=this;var uiState=_ref.uiState,timeRange=_ref.timeRange,filters=_ref.filters,appState=_ref.appState;var $scope;var updateScope=function updateScope(){$scope.vis=_this.vis;$scope.uiState=uiState};return new Promise(function(resolve){if(!_this.$scope){_this.$scope=$scope=$rootScope.$new();updateScope();$scope.state=$scope.vis.copyCurrentState(true);$scope.oldState=$scope.vis.getSerializableState($scope.state);$scope.toggleSidebar=function(){$scope.$broadcast("render")};_this.el.one("renderComplete",resolve);$scope.stageEditableVis=function(){$scope.oldState=$scope.vis.getSerializableState($scope.state);$scope.vis.setCurrentState($scope.state);$scope.vis.updateState();$scope.vis.dirty=false};$scope.resetEditableVis=function(){$scope.state=$scope.vis.copyCurrentState(true);$scope.vis.dirty=false};$scope.autoApplyEnabled=false;if($scope.vis.type.editorConfig.enableAutoApply){$scope.toggleAutoApply=function(){$scope.autoApplyEnabled=!$scope.autoApplyEnabled};$scope.$watch("vis.dirty",_lodash["default"].debounce(function(){if(!$scope.autoApplyEnabled||!$scope.vis.dirty)return;$scope.stageEditableVis()},800))}$scope.submitEditorWithKeyboard=function(event){if(event.ctrlKey&&event.keyCode===_eui.keyCodes.ENTER){event.preventDefault();event.stopPropagation();$scope.stageEditableVis()}};$scope.getSidebarClass=function(){if($scope.vis.type.editorConfig.defaultSize===_editor_size.DefaultEditorSize.SMALL){return"visEditor__collapsibleSidebar--small"}else if($scope.vis.type.editorConfig.defaultSize===_editor_size.DefaultEditorSize.MEDIUM){return"visEditor__collapsibleSidebar--medium"}else if($scope.vis.type.editorConfig.defaultSize===_editor_size.DefaultEditorSize.LARGE){return"visEditor__collapsibleSidebar--large"}};$scope.$watch(function(){return $scope.vis.getSerializableState($scope.state)},function(newState){$scope.vis.dirty=!_angular["default"].equals(newState,$scope.oldState);$scope.responseValueAggs=null;try{$scope.responseValueAggs=$scope.state.aggs.getResponseAggs().filter(function(agg){return _lodash["default"].get(agg,"schema.group")==="metrics"})}catch(e){}},true);$scope.$watch(function(){return $scope.vis.getCurrentState(false)},function(newState){if(!_lodash["default"].isEqual(newState,$scope.oldState)){$scope.state=$scope.vis.copyCurrentState(true);$scope.oldState=newState}},true);var template=(0,_jquery["default"])(_default["default"]);_this.el.html(template);$compile(template)($scope)}else{$scope=_this.$scope;updateScope()}if(!_this._handler){var visualizationEl=_this.el.find(".visEditor__canvas")[0];(0,_visualize_loader.getVisualizeLoader)().then(function(loader){if(!visualizationEl){return}_this._loader=loader;_this._handler=_this._loader.embedVisualizationWithSavedObject(visualizationEl,_this.savedObj,{uiState:uiState,listenOnChange:false,timeRange:timeRange,filters:filters,appState:appState})})}else{_this._handler.update({timeRange:timeRange,filters:filters})}})}},{key:"resize",value:function resize(){}},{key:"destroy",value:function destroy(){if(this.$scope){this.$scope.$destroy();this.$scope=null}if(this._handler){this._handler.destroy()}}}]);return DefaultEditor}(),_defineProperty(_class,"key","default"),_temp};exports.defaultEditor=defaultEditor;_vis_editor_types.VisEditorTypesRegistryProvider.register(defaultEditor)},5922:function(module,exports,__webpack_require__){"use strict";__webpack_require__(31);var _modules=__webpack_require__(12);__webpack_require__(5923);__webpack_require__(5924);var _tooltipHtmlUnsafePopup=_interopRequireDefault(__webpack_require__(5926));var _tooltipPopup=_interopRequireDefault(__webpack_require__(5927));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_modules.uiModules.get("kibana",["ui.bootstrap"]);angular.module("ui.bootstrap",["ui.bootstrap.tpls","ui.bootstrap.bindHtml","ui.bootstrap.tooltip"]);angular.module("ui.bootstrap.tpls",["template/tooltip/tooltip-html-unsafe-popup.html","template/tooltip/tooltip-popup.html"]);angular.module("template/tooltip/tooltip-html-unsafe-popup.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/tooltip/tooltip-html-unsafe-popup.html",_tooltipHtmlUnsafePopup["default"])}]);angular.module("template/tooltip/tooltip-popup.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/tooltip/tooltip-popup.html",_tooltipPopup["default"])}])},5923:function(module,exports,__webpack_require__){"use strict";angular.module("ui.bootstrap.bindHtml",[]).directive("bindHtmlUnsafe",function(){return function(scope,element,attr){element.addClass("ng-binding").data("$binding",attr.bindHtmlUnsafe);scope.$watch(attr.bindHtmlUnsafe,function bindHtmlUnsafeWatchAction(value){element.html(value||"")})}})},5924:function(module,exports,__webpack_require__){"use strict";__webpack_require__(5925);angular.module("ui.bootstrap.tooltip",["ui.bootstrap.position"]).provider("$tooltip",function(){var defaultOptions={placement:"top",animation:true,popupDelay:0};var triggerMap={mouseenter:"mouseleave",click:"click",focus:"blur"};var globalOptions={};this.options=function(value){angular.extend(globalOptions,value)};this.setTriggers=function setTriggers(triggers){angular.extend(triggerMap,triggers)};function snake_case(name){var regexp=/[A-Z]/g;var separator="-";return name.replace(regexp,function(letter,pos){return(pos?separator:"")+letter.toLowerCase()})}this.$get=["$window","$compile","$timeout","$document","$position","$interpolate",function($window,$compile,$timeout,$document,$position,$interpolate){return function $tooltip(type,prefix,defaultTriggerShow){var options=angular.extend({},defaultOptions,globalOptions);function getTriggers(trigger){var show=trigger||options.trigger||defaultTriggerShow;var hide=triggerMap[show]||show;return{show:show,hide:hide}}var directiveName=snake_case(type);var startSym=$interpolate.startSymbol();var endSym=$interpolate.endSymbol();var template="<div "+directiveName+"-popup "+'title="'+startSym+"title"+endSym+'" '+'content="'+startSym+"content"+endSym+'" '+'placement="'+startSym+"placement"+endSym+'" '+'animation="animation" '+'is-open="isOpen"'+">"+"</div>";return{restrict:"EA",compile:function compile(tElem,tAttrs){var tooltipLinker=$compile(template);return function link(scope,element,attrs){var tooltip;var tooltipLinkedScope;var transitionTimeout;var popupTimeout;var appendToBody=angular.isDefined(options.appendToBody)?options.appendToBody:false;var triggers=getTriggers(undefined);var hasEnableExp=angular.isDefined(attrs[prefix+"Enable"]);var ttScope=scope.$new(true);var positionTooltip=function positionTooltip(){var ttPosition=$position.positionElements(element,tooltip,ttScope.placement,appendToBody);ttPosition.top+="px";ttPosition.left+="px";tooltip.css(ttPosition)};ttScope.isOpen=false;function toggleTooltipBind(){if(!ttScope.isOpen){showTooltipBind()}else{hideTooltipBind()}}function showTooltipBind(){if(hasEnableExp&&!scope.$eval(attrs[prefix+"Enable"])){return}prepareTooltip();if(ttScope.popupDelay){if(!popupTimeout){popupTimeout=$timeout(show,ttScope.popupDelay,false);popupTimeout.then(function(reposition){return reposition()})["catch"](function(error){if(error!=="canceled"){throw error}})}}else{show()()}}function hideTooltipBind(){scope.$evalAsync(function(){hide()})}function show(){popupTimeout=null;if(transitionTimeout){$timeout.cancel(transitionTimeout);transitionTimeout=null}if(!ttScope.content){return angular.noop}createTooltip();tooltip.css({top:0,left:0,display:"block"});ttScope.$digest();positionTooltip();ttScope.isOpen=true;ttScope.$digest();return positionTooltip}function hide(){ttScope.isOpen=false;$timeout.cancel(popupTimeout);popupTimeout=null;if(ttScope.animation){if(!transitionTimeout){transitionTimeout=$timeout(removeTooltip,500)}}else{removeTooltip()}}function createTooltip(){if(tooltip){removeTooltip()}tooltipLinkedScope=ttScope.$new();tooltip=tooltipLinker(tooltipLinkedScope,function(tooltip){if(appendToBody){$document.find("body").append(tooltip)}else{element.after(tooltip)}})}function removeTooltip(){transitionTimeout=null;if(tooltip){tooltip.remove();tooltip=null}if(tooltipLinkedScope){tooltipLinkedScope.$destroy();tooltipLinkedScope=null}}function prepareTooltip(){prepPlacement();prepPopupDelay()}attrs.$observe(type,function(val){ttScope.content=val;if(!val&&ttScope.isOpen){hide()}});attrs.$observe(prefix+"Title",function(val){ttScope.title=val});function prepPlacement(){var val=attrs[prefix+"Placement"];ttScope.placement=angular.isDefined(val)?val:options.placement}function prepPopupDelay(){var val=attrs[prefix+"PopupDelay"];var delay=parseInt(val,10);ttScope.popupDelay=!isNaN(delay)?delay:options.popupDelay}var unregisterTriggers=function unregisterTriggers(){element.unbind(triggers.show,showTooltipBind);element.unbind(triggers.hide,hideTooltipBind)};function prepTriggers(){var val=attrs[prefix+"Trigger"];unregisterTriggers();triggers=getTriggers(val);if(triggers.show===triggers.hide){element.bind(triggers.show,toggleTooltipBind)}else{element.bind(triggers.show,showTooltipBind);element.bind(triggers.hide,hideTooltipBind)}}prepTriggers();var animation=scope.$eval(attrs[prefix+"Animation"]);ttScope.animation=angular.isDefined(animation)?!!animation:options.animation;var appendToBodyVal=scope.$eval(attrs[prefix+"AppendToBody"]);appendToBody=angular.isDefined(appendToBodyVal)?appendToBodyVal:appendToBody;if(appendToBody){scope.$on("$locationChangeSuccess",function closeTooltipOnLocationChangeSuccess(){if(ttScope.isOpen){hide()}})}scope.$on("$destroy",function onDestroyTooltip(){$timeout.cancel(transitionTimeout);$timeout.cancel(popupTimeout);unregisterTriggers();removeTooltip();ttScope=null})}}}}}]}).directive("tooltip",["$tooltip",function($tooltip){return $tooltip("tooltip","tooltip","mouseenter")}]).directive("tooltipPopup",function(){return{restrict:"EA",replace:true,scope:{content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-popup.html"}}).directive("tooltipHtmlUnsafe",["$tooltip",function($tooltip){return $tooltip("tooltipHtmlUnsafe","tooltip","mouseenter")}]).directive("tooltipHtmlUnsafePopup",function(){return{restrict:"EA",replace:true,scope:{content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-html-unsafe-popup.html"}})},5925:function(module,exports,__webpack_require__){"use strict";angular.module("ui.bootstrap.position",[]).factory("$position",["$document","$window",function($document,$window){function getStyle(el,cssprop){if(el.currentStyle){return el.currentStyle[cssprop]}else if($window.getComputedStyle){return $window.getComputedStyle(el)[cssprop]}return el.style[cssprop]}function isStaticPositioned(element){return(getStyle(element,"position")||"static")==="static"}var parentOffsetEl=function parentOffsetEl(element){var docDomEl=$document[0];var offsetParent=element.offsetParent||docDomEl;while(offsetParent&&offsetParent!==docDomEl&&isStaticPositioned(offsetParent)){offsetParent=offsetParent.offsetParent}return offsetParent||docDomEl};return{position:function position(element){var elBCR=this.offset(element);var offsetParentBCR={top:0,left:0};var offsetParentEl=parentOffsetEl(element[0]);if(offsetParentEl!=$document[0]){offsetParentBCR=this.offset(angular.element(offsetParentEl));offsetParentBCR.top+=offsetParentEl.clientTop-offsetParentEl.scrollTop;offsetParentBCR.left+=offsetParentEl.clientLeft-offsetParentEl.scrollLeft}var boundingClientRect=element[0].getBoundingClientRect();return{width:boundingClientRect.width||element.prop("offsetWidth"),height:boundingClientRect.height||element.prop("offsetHeight"),top:elBCR.top-offsetParentBCR.top,left:elBCR.left-offsetParentBCR.left}},offset:function offset(element){var boundingClientRect=element[0].getBoundingClientRect();return{width:boundingClientRect.width||element.prop("offsetWidth"),height:boundingClientRect.height||element.prop("offsetHeight"),top:boundingClientRect.top+($window.pageYOffset||$document[0].documentElement.scrollTop),left:boundingClientRect.left+($window.pageXOffset||$document[0].documentElement.scrollLeft)}},positionElements:function positionElements(hostEl,targetEl,positionStr,appendToBody){var positionStrParts=positionStr.split("-");var pos0=positionStrParts[0],pos1=positionStrParts[1]||"center";var hostElPos,targetElWidth,targetElHeight,targetElPos;hostElPos=appendToBody?this.offset(hostEl):this.position(hostEl);targetElWidth=targetEl.prop("offsetWidth");targetElHeight=targetEl.prop("offsetHeight");var shiftWidth={center:function center(){return hostElPos.left+hostElPos.width/2-targetElWidth/2},left:function left(){return hostElPos.left},right:function right(){return hostElPos.left+hostElPos.width}};var shiftHeight={center:function center(){return hostElPos.top+hostElPos.height/2-targetElHeight/2},top:function top(){return hostElPos.top},bottom:function bottom(){return hostElPos.top+hostElPos.height}};switch(pos0){case"right":targetElPos={top:shiftHeight[pos1](),left:shiftWidth[pos0]()};break;case"left":targetElPos={top:shiftHeight[pos1](),left:hostElPos.left-targetElWidth};break;case"bottom":targetElPos={top:shiftHeight[pos0](),left:shiftWidth[pos1]()};break;default:targetElPos={top:hostElPos.top-targetElHeight,left:shiftWidth[pos1]()};break}return targetElPos}}}])},5926:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<div class="bsTooltip {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\t\n    <div class="bsTooltip-arrow"></div>\t\n    <div class="bsTooltip-inner" bind-html-unsafe="content"></div>\t\n  </div>'},5927:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<div class="bsTooltip {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\t\n    <div class="bsTooltip-arrow"></div>\t\n    <div class="bsTooltip-inner" ng-bind="content"></div>\t\n  </div>'},5928:function(module,exports,__webpack_require__){"use strict";var _lodash=_interopRequireDefault(__webpack_require__(1));__webpack_require__(5929);__webpack_require__(2010);var _modules=__webpack_require__(12);var _agg_group=_interopRequireDefault(__webpack_require__(5940));var _collection=__webpack_require__(431);var _agg_group_names=__webpack_require__(5941);var _agg_config=__webpack_require__(455);__webpack_require__(5942);__webpack_require__(5945);__webpack_require__(5946);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_modules.uiModules.get("app/visualize").directive("visEditorAggGroup",function(){return{restrict:"E",template:_agg_group["default"],scope:true,link:function link($scope,$el,attr){$scope.groupName=attr.groupName;$scope.groupNameLabel=(0,_agg_group_names.aggGroupNameMaps)()[$scope.groupName];$scope.$bind("group",'state.aggs.bySchemaGroup["'+$scope.groupName+'"]');$scope.$bind("schemas",'vis.type.schemas["'+$scope.groupName+'"]');$scope.$watchMulti(["schemas","[]group"],function(){var stats=$scope.stats={min:0,max:0,count:$scope.group?$scope.group.length:0};if(!$scope.schemas)return;$scope.schemas.forEach(function(schema){stats.min+=schema.min;stats.max+=schema.max;stats.deprecate=schema.deprecate})});function reorderFinished(){var indexOffset=$scope.state.aggs.indexOf($scope.group[0]);_lodash["default"].forEach($scope.group,function(agg,index){(0,_collection.move)($scope.state.aggs,agg,indexOffset+index)})}$scope.$on("agg-reorder",reorderFinished);$scope.$on("agg-drag-start",function(){return $scope.dragging=true});$scope.$on("agg-drag-end",function(){$scope.dragging=false;reorderFinished()});$scope.addSchema=function(schema){var aggConfig=new _agg_config.AggConfig($scope.state.aggs,{schema:schema,id:_agg_config.AggConfig.nextId($scope.state.aggs)});aggConfig.brandNew=true;$scope.state.aggs.push(aggConfig)}}}})},5929:function(module,exports,__webpack_require__){"use strict";__webpack_require__(5930);__webpack_require__(2010);__webpack_require__(5932);var _keyboard_move=__webpack_require__(5934);var _lodash=_interopRequireDefault(__webpack_require__(1));__webpack_require__(5935);var _modules=__webpack_require__(12);var _agg=_interopRequireDefault(__webpack_require__(5939));var _collection=__webpack_require__(431);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}_modules.uiModules.get("app/visualize").directive("visEditorAgg",function(){return{restrict:"A",template:_agg["default"],require:["^form","^ngModel"],link:function link($scope,$el,attrs,_ref){var _ref2=_slicedToArray(_ref,2),kbnForm=_ref2[0],ngModelCtrl=_ref2[1];$scope.editorOpen=!!$scope.agg.brandNew;$scope.aggIsTooLow=false;$scope.$watch("editorOpen",function(open){if(!open)kbnForm.$setTouched()});$scope.$watchMulti(["$index","group.length"],function(){$scope.aggIsTooLow=calcAggIsTooLow()});$scope.describe=function(){if(!$scope.agg.type||!$scope.agg.type.makeLabel)return"";var label=$scope.agg.type.makeLabel($scope.agg);return label?label:""};$scope.$on("drag-start",function(){$scope.editorWasOpen=$scope.editorOpen;$scope.editorOpen=false;$scope.$emit("agg-drag-start",$scope.agg)});$scope.$on("drag-end",function(){$scope.editorOpen=$scope.editorWasOpen;$scope.$emit("agg-drag-end",$scope.agg)});$scope.onPriorityReorder=function(direction){var positionOffset=direction===_keyboard_move.Direction.down?1:-1;var currentPosition=$scope.group.indexOf($scope.agg);var newPosition=Math.max(0,Math.min(currentPosition+positionOffset,$scope.group.length-1));(0,_collection.move)($scope.group,currentPosition,newPosition);$scope.$emit("agg-reorder")};$scope.remove=function(agg){var aggs=$scope.state.aggs;var index=aggs.indexOf(agg);if(index===-1){return}aggs.splice(index,1)};$scope.canRemove=function(aggregation){var metricCount=_lodash["default"].reduce($scope.group,function(count,agg){return agg.schema.name===aggregation.schema.name?++count:count},0);return metricCount>aggregation.schema.min};function calcAggIsTooLow(){if(!$scope.agg.schema.mustBeFirst){return false}var firstDifferentSchema=_lodash["default"].findIndex($scope.group,function(agg){return agg.schema!==$scope.agg.schema});if(firstDifferentSchema===-1){return false}return $scope.$index>firstDifferentSchema}$scope.$watch(function(){return ngModelCtrl.$touched},function(value){$scope.formIsTouched=value},true);$scope.onAggTypeChange=function(agg,value){if(agg.type!==value){agg.type=value}};$scope.onAggParamsChange=function(params,paramName,value){if(params[paramName]!==value){params[paramName]=value}};$scope.setValidity=function(isValid){ngModelCtrl.$setValidity("aggParams".concat($scope.agg.id),isValid)};$scope.setTouched=function(isTouched){if(isTouched){ngModelCtrl.$setTouched()}else{ngModelCtrl.$setUntouched()}};$scope.onAggErrorChanged=function(agg,error){if(error){agg.error=error}else{delete agg.error}}}}})},5930:function(module,exports,__webpack_require__){"use strict";__webpack_require__(181);var _i18n=__webpack_require__(28);var _modules=__webpack_require__(12);var _default_editor_agg_params=__webpack_require__(1429);_modules.uiModules.get("app/visualize").directive("visEditorAggParams",function(reactDirective){return reactDirective((0,_i18n.wrapInI18nContext)(_default_editor_agg_params.DefaultEditorAggParams),[["agg",{watchDepth:"reference"}],["aggParams",{watchDepth:"collection"}],["indexPattern",{watchDepth:"reference"}],["responseValueAggs",{watchDepth:"reference"}],["state",{watchDepth:"reference"}],["onAggErrorChanged",{watchDepth:"reference"}],["onAggTypeChange",{watchDepth:"reference"}],["onAggParamsChange",{watchDepth:"reference"}],["setTouched",{watchDepth:"reference"}],["setValidity",{watchDepth:"reference"}],"aggError","aggIndex","groupName","aggIsTooLow","formIsTouched"])})},5931:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DefaultEditorAggAdd=DefaultEditorAggAdd;var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(2);var _react2=__webpack_require__(10);var _i18n=__webpack_require__(5);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var GROUP_NAMES={BUCKETS:"buckets"};function DefaultEditorAggAdd(_ref){var _ref$group=_ref.group,group=_ref$group===void 0?[]:_ref$group,groupName=_ref.groupName,schemas=_ref.schemas,addSchema=_ref.addSchema,stats=_ref.stats;var _useState=(0,_react.useState)(false),_useState2=_slicedToArray(_useState,2),isPopoverOpen=_useState2[0],setIsPopoverOpen=_useState2[1];var onSelectSchema=function onSelectSchema(schema){setIsPopoverOpen(false);addSchema(schema)};var addButton=_react["default"].createElement(_eui.EuiButtonEmpty,{size:"xs",iconType:"plusInCircleFilled","data-test-subj":"visEditorAdd_".concat(groupName),onClick:function onClick(){return setIsPopoverOpen(!isPopoverOpen)}},_react["default"].createElement(_react2.FormattedMessage,{id:"common.ui.vis.editors.aggAdd.addButtonLabel",defaultMessage:"Add"}));var groupNameLabel=groupName===GROUP_NAMES.BUCKETS?_i18n.i18n.translate("common.ui.vis.editors.aggAdd.bucketLabel",{defaultMessage:"bucket"}):_i18n.i18n.translate("common.ui.vis.editors.aggAdd.metricLabel",{defaultMessage:"metric"});var isSchemaDisabled=function isSchemaDisabled(schema){var count=group.filter(function(agg){return agg.schema.name===schema.name}).length;return count>=schema.max};return stats.max>stats.count?_react["default"].createElement(_eui.EuiFlexGroup,{justifyContent:"center"},_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiPopover,{id:"addGroupButtonPopover_".concat(groupName),button:addButton,isOpen:isPopoverOpen,panelPaddingSize:"none",repositionOnScroll:true,closePopover:function closePopover(){return setIsPopoverOpen(false)}},_react["default"].createElement(_eui.EuiPopoverTitle,null,(groupName!==GROUP_NAMES.BUCKETS||!stats.count&&!stats.deprecate)&&_react["default"].createElement(_react2.FormattedMessage,{id:"common.ui.vis.editors.aggAdd.addGroupButtonLabel",defaultMessage:"Add {groupNameLabel}",values:{groupNameLabel:groupNameLabel}}),groupName===GROUP_NAMES.BUCKETS&&stats.count>0&&!stats.deprecate&&_react["default"].createElement(_react2.FormattedMessage,{id:"common.ui.vis.editors.aggAdd.addSubGroupButtonLabel",defaultMessage:"Add sub-{groupNameLabel}",values:{groupNameLabel:groupNameLabel}})),_react["default"].createElement(_eui.EuiContextMenuPanel,{items:schemas.map(function(schema){return!schema.deprecate&&_react["default"].createElement(_eui.EuiContextMenuItem,{key:"".concat(schema.name,"_").concat(schema.title),"data-test-subj":"visEditorAdd_".concat(groupName,"_").concat(schema.title),disabled:isPopoverOpen&&isSchemaDisabled(schema),onClick:function onClick(){return onSelectSchema(schema)}},schema.title)})})))):null}},5932:function(module,exports,__webpack_require__){"use strict";var _i18n=__webpack_require__(28);var _modules=__webpack_require__(12);var _agg_control_react_wrapper=__webpack_require__(5933);_modules.uiModules.get("app/visualize").directive("visAggControlReactWrapper",function(reactDirective){return reactDirective((0,_i18n.wrapInI18nContext)(_agg_control_react_wrapper.AggControlReactWrapper),[["aggParams",{watchDepth:"collection"}],["editorStateParams",{watchDepth:"collection"}],["component",{wrapApply:false}],"setValue"])})},5933:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AggControlReactWrapper=AggControlReactWrapper;var _react=_interopRequireDefault(__webpack_require__(0));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}function AggControlReactWrapper(_ref){var Component=_ref.component,rest=_objectWithoutProperties(_ref,["component"]);return _react["default"].createElement(Component,rest)}},5934:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Direction=void 0;var _modules=__webpack_require__(12);var _eui=__webpack_require__(2);var _directionMapping;function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var Direction={up:"up",down:"down"};exports.Direction=Direction;var directionMapping=(_directionMapping={},_defineProperty(_directionMapping,_eui.keyCodes.UP,Direction.up),_defineProperty(_directionMapping,_eui.keyCodes.DOWN,Direction.down),_directionMapping);_modules.uiModules.get("kibana").directive("keyboardMove",function($parse,$timeout){return{restrict:"A",link:function link(scope,el,attr){var callbackFn=$parse(attr.keyboardMove);el.keydown(function(ev){if(ev.which in directionMapping){ev.preventDefault();var direction=directionMapping[ev.which];scope.$apply(function(){return callbackFn(scope,{direction:direction})});$timeout(function(){return el.focus()})}});scope.$on("$destroy",function(){el.off("keydown")})}}})},5935:function(module,exports,__webpack_require__){"use strict";__webpack_require__(5936)},5936:function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(12);var _kbn_form_controller=__webpack_require__(5937);var _kbn_model_controller=__webpack_require__(5938);_modules.uiModules.get("kibana").config(function($provide){$provide.decorator("formDirective",_kbn_form_controller.decorateFormController);$provide.decorator("ngFormDirective",_kbn_form_controller.decorateFormController);$provide.decorator("ngModelDirective",_kbn_model_controller.decorateModelController)})},5937:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.decorateFormController=decorateFormController;function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}function _construct(Parent,args,Class){if(isNativeReflectConstruct()){_construct=Reflect.construct}else{_construct=function _construct(Parent,args,Class){var a=[null];a.push.apply(a,args);var Constructor=Function.bind.apply(Parent,a);var instance=new Constructor;if(Class)_setPrototypeOf(instance,Class.prototype);return instance}}return _construct.apply(null,arguments)}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function decorateFormController($delegate,$injector){var _$delegate=_slicedToArray($delegate,1),directive=_$delegate[0];var FormController=directive.controller;var KbnFormController=function(_FormController){_inherits(KbnFormController,_FormController);function KbnFormController($scope,$element){var _getPrototypeOf2;var _this;_classCallCheck(this,KbnFormController);for(var _len=arguments.length,superArgs=new Array(_len>2?_len-2:0),_key=2;_key<_len;_key++){superArgs[_key-2]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(KbnFormController)).call.apply(_getPrototypeOf2,[this].concat(superArgs)));var onSubmit=function onSubmit(event){_this._markInvalidTouched(event)};$element.on("submit",onSubmit);$scope.$on("$destroy",function(){$element.off("submit",onSubmit)});return _this}_createClass(KbnFormController,[{key:"errorCount",value:function errorCount(){return this._getInvalidModels().length}},{key:"softErrorCount",value:function softErrorCount(){return this._getInvalidModels().filter(function(model){return model.$touched||model.$dirty}).length}},{key:"$setTouched",value:function $setTouched(){this._getInvalidModels().forEach(function(model){return model.$setTouched()})}},{key:"_markInvalidTouched",value:function _markInvalidTouched(event){if(this.errorCount()){event.preventDefault();event.stopImmediatePropagation();this.$setTouched()}}},{key:"_getInvalidModels",value:function _getInvalidModels(){return this.$$controls.reduce(function(acc,control){if(typeof control._getInvalidModels==="function"){return[].concat(_toConsumableArray(acc),_toConsumableArray(control._getInvalidModels()))}if(control.$invalid){return[].concat(_toConsumableArray(acc),[control])}return acc},[])}}]);return KbnFormController}(FormController);_defineProperty(KbnFormController,"$inject",["$scope","$element"]);directive.controller=[].concat(_toConsumableArray($injector.annotate(KbnFormController)),_toConsumableArray($injector.annotate(FormController)),[function(){for(var _len2=arguments.length,args=new Array(_len2),_key2=0;_key2<_len2;_key2++){args[_key2]=arguments[_key2]}return _construct(KbnFormController,args)}]);return $delegate}},5938:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.decorateModelController=decorateModelController;function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}function _construct(Parent,args,Class){if(isNativeReflectConstruct()){_construct=Reflect.construct}else{_construct=function _construct(Parent,args,Class){var a=[null];a.push.apply(a,args);var Constructor=Function.bind.apply(Parent,a);var instance=new Constructor;if(Class)_setPrototypeOf(instance,Class.prototype);return instance}}return _construct.apply(null,arguments)}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function decorateModelController($delegate,$injector){var _$delegate=_slicedToArray($delegate,1),directive=_$delegate[0];var ModelController=directive.controller;var KbnModelController=function(_ModelController){_inherits(KbnModelController,_ModelController);function KbnModelController($scope,$element){var _getPrototypeOf2;var _this;_classCallCheck(this,KbnModelController);for(var _len=arguments.length,superArgs=new Array(_len>2?_len-2:0),_key=2;_key<_len;_key++){superArgs[_key-2]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(KbnModelController)).call.apply(_getPrototypeOf2,[this].concat(superArgs)));var onInvalid=function onInvalid(){_this.$setTouched()};$element.on("invalid",onInvalid);$scope.$on("$destroy",function(){$element.off("invalid",onInvalid)});return _this}return KbnModelController}(ModelController);_defineProperty(KbnModelController,"$inject",["$scope","$element"]);directive.controller=[].concat(_toConsumableArray($injector.annotate(KbnModelController)),_toConsumableArray($injector.annotate(ModelController)),[function(){for(var _len2=arguments.length,args=new Array(_len2),_key2=0;_key2<_len2;_key2++){args[_key2]=arguments[_key2]}return _construct(KbnModelController,args)}]);return $delegate}},5939:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<div class="visEditorSidebar__section visEditorSidebar__collapsible visEditorSidebar__collapsible--marginBottom">\n  \x3c!-- header --\x3e\n  <div class="visEditorSidebar__collapsibleTitle">\n\n    \x3c!-- open/close editor --\x3e\n    <button\n      aria-label="{{::\'common.ui.vis.editors.agg.toggleEditorButtonAriaLabel\' | i18n: { defaultMessage: \'Toggle {schema} editor\', values: { schema: agg.schema.title } } }}"\n      ng-click="editorOpen = !editorOpen"\n      aria-expanded="{{ !!editorOpen }}"\n      aria-controls="visAggEditorParams{{agg.id}}"\n      type="button"\n      data-test-subj="toggleEditor"\n      class="visEditorSidebar__collapsibleTitleLabel">\n\n      <icon aria-hidden="true" ng-if="editorOpen" type="\'arrowDown\'" size="\'s\'"></icon>\n      <icon aria-hidden="true" ng-if="!editorOpen" type="\'arrowRight\'" size="\'s\'"></icon>\n\n      \x3c!-- title --\x3e\n      <span class="visEditorSidebar__collapsibleTitleText">\n        {{ agg.schema.title }}\n      </span>\n\n    </button>\n\n    \x3c!-- description --\x3e\n    <span ng-if="!editorOpen && aggForm.softErrorCount() < 1" class="visEditorSidebar__collapsibleTitleDescription" title="{{describe()}}">\n      {{ describe() }}\n    </span>\n\n    \x3c!-- error --\x3e\n    <span\n      ng-if="!editorOpen && aggForm.softErrorCount() > 0"\n      class="visEditorSidebar__collapsibleTitleDescription visEditorSidebar__collapsibleTitleDescription--danger"\n      title="{{::\'common.ui.vis.editors.agg.errorsText\' | i18n: { defaultMessage: \'Errors\' } }}"\n      i18n-id="common.ui.vis.editors.agg.errorsText"\n      i18n-default-message="Errors"\n    >\n    </span>\n\n    \x3c!-- controls !!!actually disabling buttons will break tooltips --\x3e\n    <div class="visEditorAggHeader__controls kuiButtonGroup kuiButtonGroup--united">\n      \x3c!-- disable aggregation --\x3e\n      <button\n        ng-if="agg.enabled && canRemove(agg)"\n        ng-click="agg.enabled = false"\n        aria-label="{{::\'common.ui.vis.editors.agg.disableAggButtonAriaLabel\' | i18n: { defaultMessage: \'Disable aggregation\' } }}"\n        tooltip="{{::\'common.ui.vis.editors.agg.disableAggButtonTooltip\' | i18n: { defaultMessage: \'Disable aggregation\' } }}"\n        tooltip-append-to-body="true"\n        data-test-subj="disableAggregationBtn"\n        type="button"\n        class="kuiButton kuiButton--basic kuiButton--small">\n        <i aria-hidden="true" class="fa fa-toggle-on"></i>\n      </button>\n\n      \x3c!-- enable aggregation --\x3e\n      <button\n        ng-if="!agg.enabled"\n        ng-click="agg.enabled = true"\n        aria-label="{{::\'common.ui.vis.editors.agg.enableAggButtonAriaLabel\' | i18n: { defaultMessage: \'Enable aggregation\' } }}"\n        tooltip="{{::\'common.ui.vis.editors.agg.enableAggButtonTooltip\' | i18n: { defaultMessage: \'Enable aggregation\' } }}"\n        tooltip-append-to-body="true"\n        data-test-subj="disableAggregationBtn"\n        type="button"\n        class="kuiButton kuiButton--basic kuiButton--small">\n        <i aria-hidden="true" class="fa fa-toggle-off"></i>\n      </button>\n\n      \x3c!-- drag handle --\x3e\n      <button\n        draggable-handle\n        ng-if="stats.count > 1"\n        tooltip="{{::\'common.ui.vis.editors.agg.modifyPriorityButtonTooltip\' | i18n: { defaultMessage: \'Modify Priority by Dragging\' } }}"\n        tooltip-append-to-body="true"\n        type="button"\n        keyboard-move="onPriorityReorder(direction)"\n        class="kuiButton kuiButton--basic kuiButton--small">\n        <i aria-hidden="true" class="fa fa-arrows-v"></i>\n        <span class="euiScreenReaderOnly"\n          i18n-id="common.ui.vis.editors.howToModifyScreenReaderPriorityDescription"\n          i18n-default-message="Use up and down key on this button to move this aggregation up and down in the priority order."\n        >\n        </span>\n      </button>\n\n      \x3c!-- remove button --\x3e\n      <button\n        ng-if="canRemove(agg)"\n        aria-label="{{::\'common.ui.vis.editors.agg.removeDimensionButtonAriaLabel\' | i18n: { defaultMessage: \'Remove Dimension\' } }}"\n        ng-if="stats.count > stats.min"\n        ng-click="remove(agg)"\n        tooltip="{{::\'common.ui.vis.editors.agg.removeDimensionButtonTooltip\' | i18n: { defaultMessage: \'Remove Dimension\' } }}"\n        tooltip-append-to-body="true"\n        type="button"\n        class="kuiButton kuiButton--basic kuiButton--small">\n        <icon aria-hidden="true" color="\'danger\'" type="\'cross\'" size="\'m\'"></icon>\n      </button>\n\n    </div>\n\n  </div>\n\n  <vis-agg-control-react-wrapper\n    ng-if="agg.schema.editorComponent"\n    ng-show="editorOpen"\n    agg-params="agg.params"\n    component="agg.schema.editorComponent"\n    editor-state-params="state.params"\n    set-value="onAggParamsChange"\n  />\n\n  \x3c!-- should be rendered after link function run, i.e. \'onAggTypeChange\' is defined  --\x3e\n  <vis-editor-agg-params\n    ng-if="onAggTypeChange"\n    ng-show="editorOpen"\n    agg="agg"\n    agg-index="$index"\n    agg-is-too-low="aggIsTooLow"\n    agg-params="agg.params"\n    agg-error="agg.error"\n    editor-config="editorConfig"\n    form-is-touched="formIsTouched"\n    group-name="groupName"\n    index-pattern="vis.indexPattern"\n    response-value-aggs="responseValueAggs"\n    state="state"\n    on-agg-type-change="onAggTypeChange"\n    on-agg-params-change="onAggParamsChange"\n    set-touched="setTouched"\n    set-validity="setValidity"\n    on-agg-error-changed="onAggErrorChanged">\n  </vis-editor-agg-params>\n</div>\n\n<vis-editor-agg-add\n  ng-if="$index + 1 === stats.count"\n  ng-hide="dragging"\n  group="group"\n  group-name="groupName"\n  schemas="schemas"\n  stats="stats"\n  add-schema="addSchema">\n</vis-editor-agg-add>\n'},5940:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<div class="visEditorSidebar__section">\n  <div class="visEditorSidebar__sectionTitle">\n    {{ groupNameLabel }}\n  </div>\n\n  <div ng-class="groupName" draggable-container="group">\n    <div ng-repeat="agg in group track by agg.id" data-test-subj="aggregationEditor{{agg.id}}" draggable-item="agg">\n      \x3c!-- agg.html - controls for aggregation --\x3e\n      <ng-form name="aggForm">\n        <div vis-editor-agg ng-model="_internalNgModelState"></div>\n      </ng-form>\n    </div>\n\n    <vis-editor-agg-add\n      ng-if="stats.count === 0"\n      group="group"\n      group-name="groupName"\n      schemas="schemas"\n      stats="stats"\n      add-schema="addSchema">\n    </vis-editor-agg-add>\n  </div>\n</div>\n\n<br>\n'},5941:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.aggGroupNameMaps=void 0;var _i18n=__webpack_require__(5);var aggGroupNameMaps=function aggGroupNameMaps(){return{metrics:_i18n.i18n.translate("common.ui.vis.editors.aggGroups.metricsText",{defaultMessage:"metrics"}),buckets:_i18n.i18n.translate("common.ui.vis.editors.aggGroups.bucketsText",{defaultMessage:"buckets"})}};exports.aggGroupNameMaps=aggGroupNameMaps},5942:function(module,exports,__webpack_require__){"use strict";var _dragula=_interopRequireDefault(__webpack_require__(5943));__webpack_require__(5944);var _modules=__webpack_require__(12);var _collection=__webpack_require__(431);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_modules.uiModules.get("kibana").directive("draggableContainer",function(){var $scopes=new WeakMap;return{restrict:"A",scope:true,controllerAs:"draggableContainerCtrl",controller:function controller($scope,$attrs,$parse,$element){$scopes.set($element.get(0),$scope);this.linkDraggableItem=function(el,$scope){$scopes.set(el,$scope)};this.getList=function(){return $parse($attrs.draggableContainer)($scope)}},link:function link($scope,$el){var drake=(0,_dragula["default"])({containers:$el.toArray(),moves:function moves(el,source,handle){var itemScope=$scopes.get(el);if(!itemScope||!("draggableItemCtrl"in itemScope)){return}return itemScope.draggableItemCtrl.moves(handle)}});var drakeEvents=["cancel","cloned","drag","dragend","drop","out","over","remove","shadow"];var prettifiedDrakeEvents={drag:"start",dragend:"end"};drakeEvents.forEach(function(type){drake.on(type,function(el){for(var _len=arguments.length,args=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){args[_key-1]=arguments[_key]}return forwardEvent.apply(void 0,[type,el].concat(args))})});drake.on("drag",markDragging(true));drake.on("dragend",markDragging(false));drake.on("drop",drop);$scope.$on("$destroy",drake.destroy);$scope.drake=drake;function markDragging(isDragging){return function(el){var scope=$scopes.get(el);if(!scope)return;scope.isDragging=isDragging;scope.$apply()}}function forwardEvent(type,el){var name="drag-".concat(prettifiedDrakeEvents[type]||type);var scope=$scopes.get(el);if(!scope)return;for(var _len2=arguments.length,args=new Array(_len2>2?_len2-2:0),_key2=2;_key2<_len2;_key2++){args[_key2-2]=arguments[_key2]}scope.$broadcast.apply(scope,[name,el].concat(args))}function drop(el,target,source,sibling){var list=$scope.draggableContainerCtrl.getList();var itemScope=$scopes.get(el);if(!itemScope)return;var item=itemScope.draggableItemCtrl.getItem();var fromIndex=list.indexOf(item);var siblingIndex=getItemIndexFromElement(list,sibling);var toIndex=getTargetIndex(list,fromIndex,siblingIndex);(0,_collection.move)(list,item,toIndex)}function getTargetIndex(list,fromIndex,siblingIndex){if(siblingIndex===-1){return list.length-1}else if(fromIndex<siblingIndex){return siblingIndex-1}return siblingIndex}function getItemIndexFromElement(list,element){if(!element)return-1;var scope=$scopes.get(element);if(!scope)return;var item=scope.draggableItemCtrl.getItem();var index=list.indexOf(item);return index}}}})},5943:function(module,exports,__webpack_require__){module.exports=__webpack_require__(18)(2197)},5944:function(module,exports,__webpack_require__){},5945:function(module,exports,__webpack_require__){"use strict";var _jquery=_interopRequireDefault(__webpack_require__(25));var _modules=__webpack_require__(12);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}_modules.uiModules.get("kibana").directive("draggableItem",function(){return{restrict:"A",require:"^draggableContainer",scope:true,controllerAs:"draggableItemCtrl",controller:function controller($scope,$attrs,$parse){var dragHandles=(0,_jquery["default"])();this.getItem=function(){return $parse($attrs.draggableItem)($scope)};this.registerHandle=function($el){dragHandles.push.apply(dragHandles,_toConsumableArray($el))};this.moves=function(handle){var $handle=(0,_jquery["default"])(handle);var $anywhereInParentChain=$handle.parents().addBack();var movable=dragHandles.is($anywhereInParentChain);return movable}},link:function link($scope,$el,attr,draggableController){draggableController.linkDraggableItem($el.get(0),$scope)}}})},5946:function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(12);_modules.uiModules.get("kibana").directive("draggableHandle",function(){return{restrict:"A",require:"^draggableItem",link:function link($scope,$el,attr,ctrl){ctrl.registerHandle($el);$el.addClass("gu-handle")}}})},5947:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]="  \x3c!-- Visualization and other editing UI gets inserted in here. --\x3e\n  <div\n    data-visualization-options\n  ></div>\n"},5948:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<div class="visEditorSidebar__container">\n  <form\n    class="visEditorSidebar__form"\n    ng-submit="visualizeEditor.$valid && stageEditableVis()"\n    name="visualizeEditor"\n    novalidate\n    ng-keydown="submitEditorWithKeyboard($event)"\n  >\x3c!-- see http://goo.gl/9kgz5w --\x3e\n\n    <div\n      css-truncate\n      aria-label="{{\n        ::\'common.ui.vis.editors.sidebar.indexPatternAriaLabel\' | i18n:\n        {\n          defaultMessage: \'Index pattern: {title}\',\n          values: { title: vis.indexPattern.title }\n        }\n      }}"\n      ng-if="vis.type.requiresSearch && vis.type.options.showIndexSelection"\n      class="visEditorSidebar__indexPattern"\n      tabindex="0"\n      id="sidebarIndexPatternTitle"\n    >\n      {{ vis.indexPattern.title }}\n    </div>\n\n    <nav class="navbar visEditorSidebar__nav">\n      <div class="container-fluid">\n\n        \x3c!-- tabs --\x3e\n        <ul class="nav navbar-nav" role="tablist">\n          <li\n            role="tab"\n            aria-selected="{{sidebar.section === \'data\'}}"\n            ng-class="{active: sidebar.section == \'data\'}"\n            ng-show="sidebar.showData"\n          >\n            <a\n              class="visEditorSidebar__navLink"\n              ng-class="{\'visEditorSidebar__navLink-isSelected\': sidebar.section == \'data\'}"\n              ng-click="sidebar.section=\'data\'"\n              kbn-accessible-click\n              data-test-subj="visualizeEditDataLink"\n              i18n-id="common.ui.vis.editors.sidebar.tabs.dataLabel"\n              i18n-default-message="Data"\n            >\n            </a>\n          </li>\n\n          <li\n            role="tab"\n            aria-selected="{{sidebar.section === tab.name}}"\n            ng-repeat="tab in vis.type.editorConfig.optionTabs"\n            ng-class="{active: sidebar.section == tab.name}"\n            ng-if="vis.type.editorConfig.optionTabs.length > 1 || sidebar.showData"\n          >\n            <a\n              class="visEditorSidebar__navLink"\n              ng-class="{\'visEditorSidebar__navLink-isSelected\': sidebar.section == tab.name}"\n              ng-click="sidebar.section=tab.name"\n              kbn-accessible-click\n              data-test-subj="{{ \'visEditorTab\' + tab.name }}"\n            >\n              {{tab.title}}\n            </a>\n          </li>\n        </ul>\n\n        \x3c!-- controls --\x3e\n        <ul class="nav navbar-nav navbar-right">\n          <li\n            ng-if="visualizeEditor.errorCount() > 0 && visualizeEditor.errorCount() === visualizeEditor.softErrorCount()"\n            disabled\n            tooltip="{{::\'common.ui.vis.editors.sidebar.errorButtonTooltip\' | i18n: { defaultMessage: \'Errors in the highlighted fields need to be resolved.\' } }}"\n            tooltip-placement="bottom"\n            tooltip-popup-delay="400"\n            tooltip-append-to-body="1"\n          >\n            <div\n              class="kuiButton kuiButton--danger navbar-btn-link visEditorSidebar__navButtonLink"\n              aria-label="{{::\'common.ui.vis.editors.sidebar.errorButtonAriaLabel\' | i18n: { defaultMessage: \'Errors in the highlighted fields need to be resolved.\' } }}"\n            >\n              <icon aria-hidden="true" type="\'alert\'" color="\'danger\'"></icon>\n            </div>\n          </li>\n\n          <li\n            tooltip="{{::\'common.ui.vis.editors.sidebar.autoApplyChangesTooltip\' | i18n: { defaultMessage: \'Auto apply changes\' } }}"\n            tooltip-placement="bottom"\n            tooltip-popup-delay="400"\n            tooltip-append-to-body="1"\n            ng-if="vis.type.editorConfig.enableAutoApply"\n          >\n            <button\n              data-test-subj="visualizeEditorAutoButton"\n              class="kuiButton kuiButton--basic navbar-btn-link visEditorSidebar__navButtonLink"\n              aria-label="{{::\'common.ui.vis.editors.sidebar.autoApplyChangesAriaLabel\' | i18n: { defaultMessage: \'Auto update the visualization on every change\' } }}"\n              ng-click="toggleAutoApply()"\n              ng-class="{\n                \'kuiButton--primary\': autoApplyEnabled,\n                \'kuiButton--basic\': !autoApplyEnabled\n              }"\n            >\n              <icon aria-hidden="true" type="\'refresh\'"></icon>\n            </button>\n          </li>\n              <span\n                ng-show="autoApplyEnabled"\n                i18n-id="common.ui.vis.editors.sidebar.autoApplyChangesLabel"\n                i18n-default-message="Auto Apply"\n              >\n            </span>\n\n          <li\n            tooltip="{{::\'common.ui.vis.editors.sidebar.applyChangesTooltip\' | i18n: { defaultMessage: \'Apply changes\' } }}"\n            tooltip-placement="bottom"\n            tooltip-popup-delay="400" tooltip-append-to-body="1"\n            ng-hide="autoApplyEnabled || (visualizeEditor.errorCount() > 0 && visualizeEditor.errorCount() === visualizeEditor.softErrorCount())"\n          >\n            <button\n              data-test-subj="visualizeEditorRenderButton"\n              class="kuiButton kuiButton--primary navbar-btn-link visEditorSidebar__navButtonLink"\n              type="submit"\n              ng-disabled="!vis.dirty || autoApplyEnabled"\n              aria-label="{{::\'common.ui.vis.editors.sidebar.applyChangesAriaLabel\' | i18n: { defaultMessage: \'Update the visualization with your changes\' } }}"\n            >\n              <icon aria-hidden="true" type="\'play\'"></icon>\n            </button>\n          </li>\n\n          <li\n            tooltip="{{::\'common.ui.vis.editors.sidebar.discardChangesTooltip\' | i18n: { defaultMessage: \'Discard changes\' } }}"\n            tooltip-placement="bottom"\n            tooltip-popup-delay="400"\n            tooltip-append-to-body="1"\n            ng-hide="autoApplyEnabled"\n          >\n            <button\n              data-test-subj="visualizeEditorResetButton"\n              class="kuiButton navbar-btn-link visEditorSidebar__navButtonLink"\n              ng-disabled="!vis.dirty"\n              ng-click="resetEditableVis()"\n              aria-label="{{::\'common.ui.vis.editors.sidebar.discardChangesAriaLabel\' | i18n: { defaultMessage: \'Reset the visualization\' } }}"\n            >\n              <icon type="\'cross\'"></icon>\n            </button>\n          </li>\n        </ul>\n      </div>\n    </nav>\n\n    <div class="visEditorSidebar__config" ng-show="sidebar.section == \'data\'">\n      \x3c!-- metrics --\x3e\n      <vis-editor-agg-group ng-if="vis.type.schemas.metrics" data-test-subj="metricsAggGroup" group-name="metrics"></vis-editor-agg-group>\n\n      \x3c!-- buckets --\x3e\n      <vis-editor-agg-group ng-if="vis.type.schemas.buckets" data-test-subj="bucketsAggGroup" group-name="buckets"></vis-editor-agg-group>\n    </div>\n\n    <div class="visEditorSidebar__config" ng-repeat="tab in vis.type.editorConfig.optionTabs" ng-show="sidebar.section == tab.name">\n      <vis-editor-vis-options\n        class="visEditorSidebar__options"\n        editor-state="state"\n        vis="vis"\n        vis-data="visData"\n        ui-state="uiState"\n        visualize-editor="visualizeEditor"\n        editor="tab.editor"\n      ></vis-editor-vis-options>\n    </div>\n\n  </form>\n</div>\n'},5949:function(module,exports,__webpack_require__){"use strict";var _jquery=_interopRequireDefault(__webpack_require__(25));var _modules=__webpack_require__(12);var _eui=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_modules.uiModules.get("kibana").directive("visEditorResizer",function(){return{restrict:"E",link:function link($scope,$el){var $left=$el.parent();$el.on("mousedown",function(event){$el.addClass("active");var startWidth=$left.width();var startX=event.pageX;function onMove(event){var newWidth=startWidth+event.pageX-startX;$left.width(newWidth)}(0,_jquery["default"])(document.body).on("mousemove",onMove).one("mouseup",function(){$el.removeClass("active");(0,_jquery["default"])(document.body).off("mousemove",onMove);$scope.$broadcast("render")})});$el.on("keydown",function(event){var keyCode=event.keyCode;if(keyCode===_eui.keyCodes.LEFT||keyCode===_eui.keyCodes.RIGHT){event.preventDefault();var startWidth=$left.width();var newWidth=startWidth+(keyCode===_eui.keyCodes.LEFT?-15:15);$left.width(newWidth);$scope.$broadcast("render")}})}}})},5950:function(module,exports,__webpack_require__){"use strict";var _filter=__webpack_require__(799);var filterByName=(0,_filter.propFilter)("name");_filter.aggTypeFilters.addFilter(function(aggType,indexPatterns,aggConfig){var doesSchemaAllowAggType=filterByName([aggType],aggConfig.schema.aggFilter).length!==0;return doesSchemaAllowAggType})},5951:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<div class="visEditor--default">\n  <div class="collapsible-sidebar visEditor__collapsibleSidebar" ng-class="::getSidebarClass()">\n    <vis-editor-sidebar class="visEditor__sidebar" />\n    <vis-editor-resizer\n      class="visEditor__resizer"\n      tabindex="0"\n      aria-label="{{::\'common.ui.vis.editors.resizeAriaLabels\' | i18n: { defaultMessage: \'Press left/right to resize the editor\' } }}"\n      data-test-subj="visualizeEditorResizer"\n    >&#xFE19;</vis-editor-resizer>\n  </div>\n\n  <div\n    class="visEditor__canvas"\n    data-shared-item\n    data-shared-items-container\n    render-complete\n    data-title="{{vis.title}}"\n    data-description="{{vis.description}}"\n  />\n\n</div>\n'},5952:function(module,exports){},5979:function(module,exports,__webpack_require__){__webpack_require__(5980)},5980:function(module,exports,__webpack_require__){"use strict";var _field_format_editors=__webpack_require__(2020);var _bytes=__webpack_require__(5981);var _color=__webpack_require__(5986);var _date=__webpack_require__(5988);var _duration=__webpack_require__(5990);var _number=__webpack_require__(1018);var _percent=__webpack_require__(5992);var _static_lookup=__webpack_require__(5994);var _string=__webpack_require__(5996);var _truncate=__webpack_require__(5998);var _url=__webpack_require__(6001);_field_format_editors.RegistryFieldFormatEditorsProvider.register(function(){return _bytes.BytesFormatEditor});_field_format_editors.RegistryFieldFormatEditorsProvider.register(function(){return _color.ColorFormatEditor});_field_format_editors.RegistryFieldFormatEditorsProvider.register(function(){return _date.DateFormatEditor});_field_format_editors.RegistryFieldFormatEditorsProvider.register(function(){return _duration.DurationFormatEditor});_field_format_editors.RegistryFieldFormatEditorsProvider.register(function(){return _number.NumberFormatEditor});_field_format_editors.RegistryFieldFormatEditorsProvider.register(function(){return _percent.PercentFormatEditor});_field_format_editors.RegistryFieldFormatEditorsProvider.register(function(){return _static_lookup.StaticLookupFormatEditor});_field_format_editors.RegistryFieldFormatEditorsProvider.register(function(){return _string.StringFormatEditor});_field_format_editors.RegistryFieldFormatEditorsProvider.register(function(){return _truncate.TruncateFormatEditor});_field_format_editors.RegistryFieldFormatEditorsProvider.register(function(){return _url.UrlFormatEditor})},5981:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"BytesFormatEditor",{enumerable:true,get:function get(){return _bytes.BytesFormatEditor}});var _bytes=__webpack_require__(5982)},5982:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.BytesFormatEditor=void 0;var _number=__webpack_require__(1018);function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var BytesFormatEditor=function(_NumberFormatEditor){_inherits(BytesFormatEditor,_NumberFormatEditor);function BytesFormatEditor(props){var _this;_classCallCheck(this,BytesFormatEditor);_this=_possibleConstructorReturn(this,_getPrototypeOf(BytesFormatEditor).call(this,props));_this.state=_objectSpread({},_this.state,{sampleInputs:[256,1024,515e4,199e7]});return _this}return BytesFormatEditor}(_number.NumberFormatEditor);exports.BytesFormatEditor=BytesFormatEditor;_defineProperty(BytesFormatEditor,"formatId","bytes")},5983:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.NumberFormatEditor=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(2);var _default=__webpack_require__(292);var _samples=__webpack_require__(422);var _react2=__webpack_require__(10);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var NumberFormatEditor=function(_DefaultFormatEditor){_inherits(NumberFormatEditor,_DefaultFormatEditor);function NumberFormatEditor(props){var _this;_classCallCheck(this,NumberFormatEditor);_this=_possibleConstructorReturn(this,_getPrototypeOf(NumberFormatEditor).call(this,props));_this.state.sampleInputs=[1e4,12.345678,-1,-999,.52];return _this}_createClass(NumberFormatEditor,[{key:"render",value:function render(){var _this2=this;var _this$props=this.props,format=_this$props.format,formatParams=_this$props.formatParams;var _this$state=this.state,error=_this$state.error,samples=_this$state.samples;var defaultPattern=format.getParamDefaults().pattern;return _react["default"].createElement(_react.Fragment,null,_react["default"].createElement(_eui.EuiFormRow,{label:_react["default"].createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.number.numeralLabel",defaultMessage:"Numeral.js format pattern (Default: {defaultPattern})",values:{defaultPattern:_react["default"].createElement(_eui.EuiCode,null,defaultPattern)}}),helpText:_react["default"].createElement("span",null,_react["default"].createElement(_eui.EuiLink,{target:"_blank",href:"https://adamwdraper.github.io/Numeral-js/"},_react["default"].createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.number.documentationLabel",defaultMessage:"Documentation"}),"",_react["default"].createElement(_eui.EuiIcon,{type:"link"}))),isInvalid:!!error,error:error},_react["default"].createElement(_eui.EuiFieldText,{value:formatParams.pattern,placeholder:defaultPattern,onChange:function onChange(e){_this2.onChange({pattern:e.target.value})},isInvalid:!!error})),_react["default"].createElement(_samples.FormatEditorSamples,{samples:samples}))}}]);return NumberFormatEditor}(_default.DefaultFormatEditor);exports.NumberFormatEditor=NumberFormatEditor;_defineProperty(NumberFormatEditor,"formatId","number")},5984:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DefaultFormatEditor=exports.convertSampleInput=void 0;var _react=__webpack_require__(0);var _propTypes=_interopRequireDefault(__webpack_require__(17));var _i18n=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var convertSampleInput=function convertSampleInput(converter,inputs){var error=null;var samples=[];try{samples=inputs.map(function(input){return{input:input,output:converter(input)}})}catch(e){error=_i18n.i18n.translate("common.ui.fieldEditor.defaultErrorMessage",{defaultMessage:"An error occurred while trying to use this format configuration: {message}",values:{message:e.message}})}return{error:error,samples:samples}};exports.convertSampleInput=convertSampleInput;var DefaultFormatEditor=function(_PureComponent){_inherits(DefaultFormatEditor,_PureComponent);function DefaultFormatEditor(props){var _this;_classCallCheck(this,DefaultFormatEditor);_this=_possibleConstructorReturn(this,_getPrototypeOf(DefaultFormatEditor).call(this,props));_defineProperty(_assertThisInitialized(_this),"onChange",function(){var newParams=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var _this$props=_this.props,onChange=_this$props.onChange,formatParams=_this$props.formatParams;onChange(_objectSpread({},formatParams,newParams))});_this.state={sampleInputs:[],sampleConverterType:"text",error:null,samples:[]};return _this}_createClass(DefaultFormatEditor,[{key:"render",value:function render(){return null}}],[{key:"getDerivedStateFromProps",value:function getDerivedStateFromProps(nextProps,state){var format=nextProps.format,formatParams=nextProps.formatParams,onError=nextProps.onError;var sampleInputsByType=state.sampleInputsByType,sampleInputs=state.sampleInputs,sampleConverterType=state.sampleConverterType;var converter=format.getConverterFor(sampleConverterType);var type=_typeof(sampleInputsByType)==="object"&&formatParams.type;var inputs=type?sampleInputsByType[formatParams.type]||[]:sampleInputs;var output=convertSampleInput(converter,inputs);onError(output.error);return output}}]);return DefaultFormatEditor}(_react.PureComponent);exports.DefaultFormatEditor=DefaultFormatEditor;_defineProperty(DefaultFormatEditor,"propTypes",{fieldType:_propTypes["default"].string.isRequired,format:_propTypes["default"].object.isRequired,formatParams:_propTypes["default"].object.isRequired,onChange:_propTypes["default"].func.isRequired,onError:_propTypes["default"].func.isRequired})},5985:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FormatEditorSamples=exports.FormatEditorSamplesComponent=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(17));var _eui=__webpack_require__(2);var _react2=__webpack_require__(10);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var FormatEditorSamplesComponent=function(_PureComponent){_inherits(FormatEditorSamplesComponent,_PureComponent);function FormatEditorSamplesComponent(){_classCallCheck(this,FormatEditorSamplesComponent);return _possibleConstructorReturn(this,_getPrototypeOf(FormatEditorSamplesComponent).apply(this,arguments))}_createClass(FormatEditorSamplesComponent,[{key:"render",value:function render(){var _this$props=this.props,samples=_this$props.samples,intl=_this$props.intl;var columns=[{field:"input",name:intl.formatMessage({id:"common.ui.fieldEditor.samples.inputHeader",defaultMessage:"Input"}),render:function render(input){return _typeof(input)==="object"?JSON.stringify(input):input}},{field:"output",name:intl.formatMessage({id:"common.ui.fieldEditor.samples.outputHeader",defaultMessage:"Output"}),render:function render(output){return _react["default"].createElement("div",{dangerouslySetInnerHTML:{__html:output}})}}];return samples.length?_react["default"].createElement(_eui.EuiFormRow,{label:_react["default"].createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.samplesHeader",defaultMessage:"Samples"})},_react["default"].createElement(_eui.EuiBasicTable,{className:"kbnFieldFormatEditor__samples",compressed:true,items:samples,columns:columns})):null}}]);return FormatEditorSamplesComponent}(_react.PureComponent);exports.FormatEditorSamplesComponent=FormatEditorSamplesComponent;_defineProperty(FormatEditorSamplesComponent,"propTypes",{samples:_propTypes["default"].arrayOf(_propTypes["default"].shape({input:_propTypes["default"].any.isRequired,output:_propTypes["default"].any.isRequired})).isRequired});var FormatEditorSamples=(0,_react2.injectI18n)(FormatEditorSamplesComponent);exports.FormatEditorSamples=FormatEditorSamples},5986:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"ColorFormatEditor",{enumerable:true,get:function get(){return _color.ColorFormatEditor}});var _color=__webpack_require__(5987)},5987:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ColorFormatEditor=exports.ColorFormatEditorComponent=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(2);var _default=__webpack_require__(292);var _color_default=__webpack_require__(2019);var _react2=__webpack_require__(10);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ColorFormatEditorComponent=function(_DefaultFormatEditor){_inherits(ColorFormatEditorComponent,_DefaultFormatEditor);function ColorFormatEditorComponent(props){var _this;_classCallCheck(this,ColorFormatEditorComponent);_this=_possibleConstructorReturn(this,_getPrototypeOf(ColorFormatEditorComponent).call(this,props));_defineProperty(_assertThisInitialized(_this),"onColorChange",function(newColorParams,index){var colors=_toConsumableArray(_this.props.formatParams.colors);colors[index]=_objectSpread({},colors[index],newColorParams);_this.onChange({colors:colors})});_defineProperty(_assertThisInitialized(_this),"addColor",function(){var colors=_toConsumableArray(_this.props.formatParams.colors);_this.onChange({colors:[].concat(_toConsumableArray(colors),[_objectSpread({},_color_default.DEFAULT_COLOR)])})});_defineProperty(_assertThisInitialized(_this),"removeColor",function(index){var colors=_toConsumableArray(_this.props.formatParams.colors);colors.splice(index,1);_this.onChange({colors:colors})});_this.onChange({fieldType:props.fieldType});return _this}_createClass(ColorFormatEditorComponent,[{key:"render",value:function render(){var _this2=this;var _this$props=this.props,formatParams=_this$props.formatParams,fieldType=_this$props.fieldType,intl=_this$props.intl;var items=formatParams.colors&&formatParams.colors.length&&formatParams.colors.map(function(color,index){return _objectSpread({},color,{index:index})})||[];var columns=[fieldType==="string"?{field:"regex",name:intl.formatMessage({id:"common.ui.fieldEditor.color.patternLabel",defaultMessage:"Pattern (regular expression)"}),render:function render(value,item){return _react["default"].createElement(_eui.EuiFieldText,{value:value,onChange:function onChange(e){_this2.onColorChange({regex:e.target.value},item.index)}})}}:{field:"range",name:intl.formatMessage({id:"common.ui.fieldEditor.color.rangeLabel",defaultMessage:"Range (min:max)"}),render:function render(value,item){return _react["default"].createElement(_eui.EuiFieldText,{value:value,onChange:function onChange(e){_this2.onColorChange({range:e.target.value},item.index)}})}},{field:"text",name:intl.formatMessage({id:"common.ui.fieldEditor.color.textColorLabel",defaultMessage:"Text color"}),render:function render(color,item){return _react["default"].createElement(_eui.EuiColorPicker,{color:color,onChange:function onChange(newColor){_this2.onColorChange({text:newColor},item.index)}})}},{field:"background",name:intl.formatMessage({id:"common.ui.fieldEditor.color.backgroundLabel",defaultMessage:"Background color"}),render:function render(color,item){return _react["default"].createElement(_eui.EuiColorPicker,{color:color,onChange:function onChange(newColor){_this2.onColorChange({background:newColor},item.index)}})}},{name:intl.formatMessage({id:"common.ui.fieldEditor.color.exampleLabel",defaultMessage:"Example"}),render:function render(item){return _react["default"].createElement("div",{style:{background:item.background,color:item.text}},"123456")}},{actions:[{name:intl.formatMessage({id:"common.ui.fieldEditor.color.deleteAria",defaultMessage:"Delete"}),description:intl.formatMessage({id:"common.ui.fieldEditor.color.deleteTitle",defaultMessage:"Delete color format"}),onClick:function onClick(item){_this2.removeColor(item.index)},type:"icon",icon:"trash",color:"danger",available:function available(){return items.length>1}}]}];return _react["default"].createElement(_react.Fragment,null,_react["default"].createElement(_eui.EuiBasicTable,{items:items,columns:columns}),_react["default"].createElement(_eui.EuiSpacer,{size:"m"}),_react["default"].createElement(_eui.EuiButton,{iconType:"plusInCircle",size:"s",onClick:this.addColor},_react["default"].createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.color.addColorButton",defaultMessage:"Add color"})),_react["default"].createElement(_eui.EuiSpacer,{size:"l"}))}}]);return ColorFormatEditorComponent}(_default.DefaultFormatEditor);exports.ColorFormatEditorComponent=ColorFormatEditorComponent;var ColorFormatEditor=(0,_react2.injectI18n)(ColorFormatEditorComponent);exports.ColorFormatEditor=ColorFormatEditor;ColorFormatEditor.formatId="color"},5988:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"DateFormatEditor",{enumerable:true,get:function get(){return _date.DateFormatEditor}});var _date=__webpack_require__(5989)},5989:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DateFormatEditor=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _moment=_interopRequireDefault(__webpack_require__(23));var _eui=__webpack_require__(2);var _default=__webpack_require__(292);var _samples=__webpack_require__(422);var _react2=__webpack_require__(10);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var DateFormatEditor=function(_DefaultFormatEditor){_inherits(DateFormatEditor,_DefaultFormatEditor);function DateFormatEditor(props){var _this;_classCallCheck(this,DateFormatEditor);_this=_possibleConstructorReturn(this,_getPrototypeOf(DateFormatEditor).call(this,props));_this.state.sampleInputs=[Date.now(),(0,_moment["default"])().startOf("year").valueOf(),(0,_moment["default"])().endOf("year").valueOf()];return _this}_createClass(DateFormatEditor,[{key:"render",value:function render(){var _this2=this;var _this$props=this.props,format=_this$props.format,formatParams=_this$props.formatParams;var _this$state=this.state,error=_this$state.error,samples=_this$state.samples;var defaultPattern=format.getParamDefaults().pattern;return _react["default"].createElement(_react.Fragment,null,_react["default"].createElement(_eui.EuiFormRow,{label:_react["default"].createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.date.momentLabel",defaultMessage:"Moment.js format pattern (Default: {defaultPattern})",values:{defaultPattern:_react["default"].createElement(_eui.EuiCode,null,defaultPattern)}}),isInvalid:!!error,error:error,helpText:_react["default"].createElement("span",null,_react["default"].createElement(_eui.EuiLink,{target:"_blank",href:"https://momentjs.com/"},_react["default"].createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.date.documentationLabel",defaultMessage:"Documentation"}),"",_react["default"].createElement(_eui.EuiIcon,{type:"link"})))},_react["default"].createElement(_eui.EuiFieldText,{"data-test-subj":"dateEditorPattern",value:formatParams.pattern,placeholder:defaultPattern,onChange:function onChange(e){_this2.onChange({pattern:e.target.value})},isInvalid:!!error})),_react["default"].createElement(_samples.FormatEditorSamples,{samples:samples}))}}]);return DateFormatEditor}(_default.DefaultFormatEditor);exports.DateFormatEditor=DateFormatEditor;_defineProperty(DateFormatEditor,"formatId","date")},5990:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"DurationFormatEditor",{enumerable:true,get:function get(){return _duration.DurationFormatEditor}});var _duration=__webpack_require__(5991)},5991:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DurationFormatEditor=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(2);var _default=__webpack_require__(292);var _samples=__webpack_require__(422);var _react2=__webpack_require__(10);var _i18n=__webpack_require__(5);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _get(target,property,receiver){if(typeof Reflect!=="undefined"&&Reflect.get){_get=Reflect.get}else{_get=function _get(target,property,receiver){var base=_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(receiver)}return desc.value}}return _get(target,property,receiver||target)}function _superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=_getPrototypeOf(object);if(object===null)break}return object}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var DurationFormatEditor=function(_DefaultFormatEditor){_inherits(DurationFormatEditor,_DefaultFormatEditor);function DurationFormatEditor(props){var _this;_classCallCheck(this,DurationFormatEditor);_this=_possibleConstructorReturn(this,_getPrototypeOf(DurationFormatEditor).call(this,props));_this.state.sampleInputs=[-123,1,12,123,658,1988,3857,123292,923528271];_this.state.hasDecimalError=false;return _this}_createClass(DurationFormatEditor,[{key:"render",value:function render(){var _this2=this;var _this$props=this.props,format=_this$props.format,formatParams=_this$props.formatParams;var _this$state=this.state,error=_this$state.error,samples=_this$state.samples,hasDecimalError=_this$state.hasDecimalError;return _react["default"].createElement(_react.Fragment,null,_react["default"].createElement(_eui.EuiFormRow,{label:_react["default"].createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.duration.inputFormatLabel",defaultMessage:"Input format"}),isInvalid:!!error,error:hasDecimalError?null:error},_react["default"].createElement(_eui.EuiSelect,{value:formatParams.inputFormat,options:format.type.inputFormats.map(function(format){return{value:format.kind,text:format.text}}),onChange:function onChange(e){_this2.onChange({inputFormat:e.target.value})},isInvalid:!!error})),_react["default"].createElement(_eui.EuiFormRow,{label:_react["default"].createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.duration.outputFormatLabel",defaultMessage:"Output format"}),isInvalid:!!error},_react["default"].createElement(_eui.EuiSelect,{value:formatParams.outputFormat,options:format.type.outputFormats.map(function(format){return{value:format.method,text:format.text}}),onChange:function onChange(e){_this2.onChange({outputFormat:e.target.value})},isInvalid:!!error})),!format.isHuman()?_react["default"].createElement(_eui.EuiFormRow,{label:_react["default"].createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.duration.decimalPlacesLabel",defaultMessage:"Decimal places"}),isInvalid:!!error,error:hasDecimalError?error:null},_react["default"].createElement(_eui.EuiFieldNumber,{value:formatParams.outputPrecision,min:0,max:20,onChange:function onChange(e){_this2.onChange({outputPrecision:e.target.value?Number(e.target.value):null})},isInvalid:!!error})):null,_react["default"].createElement(_samples.FormatEditorSamples,{samples:samples}))}}],[{key:"getDerivedStateFromProps",value:function getDerivedStateFromProps(nextProps,state){var output=_get(_getPrototypeOf(DurationFormatEditor),"getDerivedStateFromProps",this).call(this,nextProps,state);var error=null;if(!nextProps.format.isHuman()&&nextProps.formatParams.outputPrecision>20){error=_i18n.i18n.translate("common.ui.fieldEditor.durationErrorMessage",{defaultMessage:"Decimal places must be between 0 and 20"});nextProps.onError(error);return _objectSpread({},output,{error:error,hasDecimalError:true})}return _objectSpread({},output,{hasDecimalError:false})}}]);return DurationFormatEditor}(_default.DefaultFormatEditor);exports.DurationFormatEditor=DurationFormatEditor;_defineProperty(DurationFormatEditor,"formatId","duration")},5992:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"PercentFormatEditor",{enumerable:true,get:function get(){return _percent.PercentFormatEditor}});var _percent=__webpack_require__(5993)},5993:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PercentFormatEditor=void 0;var _number=__webpack_require__(1018);function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var PercentFormatEditor=function(_NumberFormatEditor){_inherits(PercentFormatEditor,_NumberFormatEditor);function PercentFormatEditor(props){var _this;_classCallCheck(this,PercentFormatEditor);_this=_possibleConstructorReturn(this,_getPrototypeOf(PercentFormatEditor).call(this,props));_this.state=_objectSpread({},_this.state,{sampleInputs:[.1,.99999,1,100,1e3]});return _this}return PercentFormatEditor}(_number.NumberFormatEditor);exports.PercentFormatEditor=PercentFormatEditor;_defineProperty(PercentFormatEditor,"formatId","percent")},5994:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"StaticLookupFormatEditor",{enumerable:true,get:function get(){return _static_lookup.StaticLookupFormatEditor}});var _static_lookup=__webpack_require__(5995)},5995:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.StaticLookupFormatEditor=exports.StaticLookupFormatEditorComponent=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(2);var _default=__webpack_require__(292);var _react2=__webpack_require__(10);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var StaticLookupFormatEditorComponent=function(_DefaultFormatEditor){_inherits(StaticLookupFormatEditorComponent,_DefaultFormatEditor);function StaticLookupFormatEditorComponent(){var _getPrototypeOf2;var _this;_classCallCheck(this,StaticLookupFormatEditorComponent);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(StaticLookupFormatEditorComponent)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"onLookupChange",function(newLookupParams,index){var lookupEntries=_toConsumableArray(_this.props.formatParams.lookupEntries);lookupEntries[index]=_objectSpread({},lookupEntries[index],newLookupParams);_this.onChange({lookupEntries:lookupEntries})});_defineProperty(_assertThisInitialized(_this),"addLookup",function(){var lookupEntries=_toConsumableArray(_this.props.formatParams.lookupEntries);_this.onChange({lookupEntries:[].concat(_toConsumableArray(lookupEntries),[{}])})});_defineProperty(_assertThisInitialized(_this),"removeLookup",function(index){var lookupEntries=_toConsumableArray(_this.props.formatParams.lookupEntries);lookupEntries.splice(index,1);_this.onChange({lookupEntries:lookupEntries})});return _this}_createClass(StaticLookupFormatEditorComponent,[{key:"render",value:function render(){var _this2=this;var _this$props=this.props,formatParams=_this$props.formatParams,intl=_this$props.intl;var items=formatParams.lookupEntries&&formatParams.lookupEntries.length&&formatParams.lookupEntries.map(function(lookup,index){return _objectSpread({},lookup,{index:index})})||[];var columns=[{field:"key",name:intl.formatMessage({id:"common.ui.fieldEditor.staticLookup.keyLabel",defaultMessage:"Key"}),render:function render(value,item){return _react["default"].createElement(_eui.EuiFieldText,{value:value||"",onChange:function onChange(e){_this2.onLookupChange({key:e.target.value},item.index)}})}},{field:"value",name:intl.formatMessage({id:"common.ui.fieldEditor.staticLookup.valueLabel",defaultMessage:"Value"}),render:function render(value,item){return _react["default"].createElement(_eui.EuiFieldText,{value:value||"",onChange:function onChange(e){_this2.onLookupChange({value:e.target.value},item.index)}})}},{actions:[{name:intl.formatMessage({id:"common.ui.fieldEditor.staticLookup.deleteAria",defaultMessage:"Delete"}),description:intl.formatMessage({id:"common.ui.fieldEditor.staticLookup.deleteTitle",defaultMessage:"Delete entry"}),onClick:function onClick(item){_this2.removeLookup(item.index)},type:"icon",icon:"trash",color:"danger",available:function available(){return items.length>1}}],width:"30px"}];return _react["default"].createElement(_react.Fragment,null,_react["default"].createElement(_eui.EuiBasicTable,{items:items,columns:columns,style:{maxWidth:"400px"}}),_react["default"].createElement(_eui.EuiSpacer,{size:"m"}),_react["default"].createElement(_eui.EuiButton,{iconType:"plusInCircle",size:"s",onClick:this.addLookup},_react["default"].createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.staticLookup.addEntryButton",defaultMessage:"Add entry"})),_react["default"].createElement(_eui.EuiSpacer,{size:"l"}),_react["default"].createElement(_eui.EuiFormRow,{label:_react["default"].createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.staticLookup.unknownKeyLabel",defaultMessage:"Value for unknown key"})},_react["default"].createElement(_eui.EuiFieldText,{value:formatParams.unknownKeyValue||"",placeholder:intl.formatMessage({id:"common.ui.fieldEditor.staticLookup.leaveBlankPlaceholder",defaultMessage:"Leave blank to keep value as-is"}),onChange:function onChange(e){_this2.onChange({unknownKeyValue:e.target.value})}})),_react["default"].createElement(_eui.EuiSpacer,{size:"m"}))}}]);return StaticLookupFormatEditorComponent}(_default.DefaultFormatEditor);exports.StaticLookupFormatEditorComponent=StaticLookupFormatEditorComponent;var StaticLookupFormatEditor=(0,_react2.injectI18n)(StaticLookupFormatEditorComponent);exports.StaticLookupFormatEditor=StaticLookupFormatEditor;StaticLookupFormatEditor.formatId="static_lookup"},5996:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"StringFormatEditor",{enumerable:true,get:function get(){return _string.StringFormatEditor}});var _string=__webpack_require__(5997)},5997:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.StringFormatEditor=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(2);var _default=__webpack_require__(292);var _samples=__webpack_require__(422);var _react2=__webpack_require__(10);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var StringFormatEditor=function(_DefaultFormatEditor){_inherits(StringFormatEditor,_DefaultFormatEditor);function StringFormatEditor(props){var _this;_classCallCheck(this,StringFormatEditor);_this=_possibleConstructorReturn(this,_getPrototypeOf(StringFormatEditor).call(this,props));_this.state.sampleInputs=["A Quick Brown Fox.","STAY CALM!","com.organizations.project.ClassName","hostname.net","SGVsbG8gd29ybGQ="];return _this}_createClass(StringFormatEditor,[{key:"render",value:function render(){var _this2=this;var _this$props=this.props,format=_this$props.format,formatParams=_this$props.formatParams;var _this$state=this.state,error=_this$state.error,samples=_this$state.samples;return _react["default"].createElement(_react.Fragment,null,_react["default"].createElement(_eui.EuiFormRow,{label:_react["default"].createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.string.transformLabel",defaultMessage:"Transform"}),isInvalid:!!error,error:error},_react["default"].createElement(_eui.EuiSelect,{"data-test-subj":"stringEditorTransform",defaultValue:formatParams.transform,options:format.type.transformOptions.map(function(option){return{value:option.kind,text:option.text}}),onChange:function onChange(e){_this2.onChange({transform:e.target.value})},isInvalid:!!error})),_react["default"].createElement(_samples.FormatEditorSamples,{samples:samples}))}}]);return StringFormatEditor}(_default.DefaultFormatEditor);exports.StringFormatEditor=StringFormatEditor;_defineProperty(StringFormatEditor,"formatId","string")},5998:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"TruncateFormatEditor",{enumerable:true,get:function get(){return _truncate.TruncateFormatEditor}});var _truncate=__webpack_require__(5999)},5999:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TruncateFormatEditor=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(2);var _default=__webpack_require__(292);var _samples=__webpack_require__(422);var _sample=__webpack_require__(6e3);var _react2=__webpack_require__(10);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var TruncateFormatEditor=function(_DefaultFormatEditor){_inherits(TruncateFormatEditor,_DefaultFormatEditor);function TruncateFormatEditor(props){var _this;_classCallCheck(this,TruncateFormatEditor);_this=_possibleConstructorReturn(this,_getPrototypeOf(TruncateFormatEditor).call(this,props));_this.state.sampleInputs=[_sample.sample];return _this}_createClass(TruncateFormatEditor,[{key:"render",value:function render(){var _this2=this;var formatParams=this.props.formatParams;var _this$state=this.state,error=_this$state.error,samples=_this$state.samples;return _react["default"].createElement(_react.Fragment,null,_react["default"].createElement(_eui.EuiFormRow,{label:_react["default"].createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.truncate.lengthLabel",defaultMessage:"Field length"}),isInvalid:!!error,error:error},_react["default"].createElement(_eui.EuiFieldNumber,{defaultValue:formatParams.fieldLength,onChange:function onChange(e){_this2.onChange({fieldLength:e.target.value?Number(e.target.value):null})},isInvalid:!!error})),_react["default"].createElement(_samples.FormatEditorSamples,{samples:samples}))}}]);return TruncateFormatEditor}(_default.DefaultFormatEditor);exports.TruncateFormatEditor=TruncateFormatEditor;_defineProperty(TruncateFormatEditor,"formatId","truncate")},6000:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.sample=void 0;var sample="Lorem ipsum dolor sit amet, consectetur adipiscing elit. Mauris vitae sem consequat, sollicitudin enim a, feugiat mi. Curabitur congue laoreet elit, eu dictum nisi commodo ut. Nullam congue sem a blandit commodo. Suspendisse eleifend sodales leo ac hendrerit. Nam fringilla tempor fermentum. Ut tristique pharetra sapien sit amet pharetra. Ut turpis massa, viverra id erat quis, fringilla vehicula risus. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Phasellus tincidunt gravida gravida. Praesent et ligula viverra, semper lacus in, tristique elit. Cras ac eleifend diam. Nulla facilisi. Morbi id sagittis magna. Sed fringilla, magna in suscipit aliquet.";exports.sample=sample},6001:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.UrlFormatEditor=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(2);var _default=__webpack_require__(292);var _samples=__webpack_require__(422);var _label_template_flyout=__webpack_require__(6002);var _url_template_flyout=__webpack_require__(6003);var _chrome=_interopRequireDefault(__webpack_require__(19));__webpack_require__(6004);var _react2=__webpack_require__(10);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var UrlFormatEditor=function(_DefaultFormatEditor){_inherits(UrlFormatEditor,_DefaultFormatEditor);function UrlFormatEditor(props){var _this;_classCallCheck(this,UrlFormatEditor);_this=_possibleConstructorReturn(this,_getPrototypeOf(UrlFormatEditor).call(this,props));_defineProperty(_assertThisInitialized(_this),"onTypeChange",function(newType){var urlTemplate=_this.props.formatParams.urlTemplate;if(newType==="img"&&!urlTemplate){_this.onChange({type:newType,urlTemplate:_this.iconPattern})}else if(newType!=="img"&&urlTemplate===_this.iconPattern){_this.onChange({type:newType,urlTemplate:null})}else{_this.onChange({type:newType})}});_defineProperty(_assertThisInitialized(_this),"showUrlTemplateHelp",function(){_this.setState({showLabelTemplateHelp:false,showUrlTemplateHelp:true})});_defineProperty(_assertThisInitialized(_this),"hideUrlTemplateHelp",function(){_this.setState({showUrlTemplateHelp:false})});_defineProperty(_assertThisInitialized(_this),"showLabelTemplateHelp",function(){_this.setState({showLabelTemplateHelp:true,showUrlTemplateHelp:false})});_defineProperty(_assertThisInitialized(_this),"hideLabelTemplateHelp",function(){_this.setState({showLabelTemplateHelp:false})});var bp=_chrome["default"].getBasePath();_this.iconPattern="".concat(bp,"/bundles/src/legacy/ui/public/field_editor/components/field_format_editor/editors/url/icons/{{value}}.png");_this.state=_objectSpread({},_this.state,{sampleInputsByType:{a:["john","/some/pathname/asset.png",1234],img:["go","stop",["de","ne","us","ni"],"cv"],audio:["hello.mp3"]},sampleConverterType:"html",showUrlTemplateHelp:false,showLabelTemplateHelp:false});return _this}_createClass(UrlFormatEditor,[{key:"render",value:function render(){var _this2=this;var _this$props=this.props,format=_this$props.format,formatParams=_this$props.formatParams;var _this$state=this.state,error=_this$state.error,samples=_this$state.samples;return _react["default"].createElement(_react.Fragment,null,_react["default"].createElement(_label_template_flyout.LabelTemplateFlyout,{isVisible:this.state.showLabelTemplateHelp,onClose:this.hideLabelTemplateHelp}),_react["default"].createElement(_url_template_flyout.UrlTemplateFlyout,{isVisible:this.state.showUrlTemplateHelp,onClose:this.hideUrlTemplateHelp}),_react["default"].createElement(_eui.EuiFormRow,{label:_react["default"].createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.url.typeLabel",defaultMessage:"Type"})},_react["default"].createElement(_eui.EuiSelect,{"data-test-subj":"urlEditorType",value:formatParams.type,options:format.type.urlTypes.map(function(type){return{value:type.kind,text:type.text}}),onChange:function onChange(e){_this2.onTypeChange(e.target.value)}})),formatParams.type==="a"?_react["default"].createElement(_eui.EuiFormRow,{label:_react["default"].createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.url.openTabLabel",defaultMessage:"Open in a new tab"})},_react["default"].createElement(_eui.EuiSwitch,{label:formatParams.openLinkInCurrentTab?_react["default"].createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.url.offLabel",defaultMessage:"Off"}):_react["default"].createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.url.onLabel",defaultMessage:"On"}),checked:!formatParams.openLinkInCurrentTab,onChange:function onChange(e){_this2.onChange({openLinkInCurrentTab:!e.target.checked})}})):null,_react["default"].createElement(_eui.EuiFormRow,{label:_react["default"].createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.url.urlTemplateLabel",defaultMessage:"URL template"}),helpText:_react["default"].createElement(_eui.EuiLink,{onClick:this.showUrlTemplateHelp},_react["default"].createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.url.template.helpLinkText",defaultMessage:"URL template help"})),isInvalid:!!error,error:error},_react["default"].createElement(_eui.EuiFieldText,{"data-test-subj":"urlEditorUrlTemplate",value:formatParams.urlTemplate||"",onChange:function onChange(e){_this2.onChange({urlTemplate:e.target.value})}})),_react["default"].createElement(_eui.EuiFormRow,{label:_react["default"].createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.url.labelTemplateLabel",defaultMessage:"Label template"}),helpText:_react["default"].createElement(_eui.EuiLink,{onClick:this.showLabelTemplateHelp},_react["default"].createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.url.labelTemplateHelpText",defaultMessage:"Label template help"})),isInvalid:!!error,error:error},_react["default"].createElement(_eui.EuiFieldText,{"data-test-subj":"urlEditorLabelTemplate",value:formatParams.labelTemplate||"",onChange:function onChange(e){_this2.onChange({labelTemplate:e.target.value})}})),_react["default"].createElement(_samples.FormatEditorSamples,{samples:samples}))}}]);return UrlFormatEditor}(_default.DefaultFormatEditor);exports.UrlFormatEditor=UrlFormatEditor;_defineProperty(UrlFormatEditor,"formatId","url")},6002:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.LabelTemplateFlyout=exports.LabelTemplateFlyoutComponent=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(2);var _react2=__webpack_require__(10);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var LabelTemplateFlyoutComponent=function LabelTemplateFlyoutComponent(_ref){var _ref$isVisible=_ref.isVisible,isVisible=_ref$isVisible===void 0?false:_ref$isVisible,_ref$onClose=_ref.onClose,onClose=_ref$onClose===void 0?function(){}:_ref$onClose,intl=_ref.intl;return isVisible?_react["default"].createElement(_eui.EuiFlyout,{onClose:onClose},_react["default"].createElement(_eui.EuiFlyoutBody,null,_react["default"].createElement(_eui.EuiText,null,_react["default"].createElement("h3",null,_react["default"].createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.labelTemplateHeader",defaultMessage:"Label Template"})),_react["default"].createElement("p",null,_react["default"].createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.labelTemplateLabel",defaultMessage:"If the URL in this field is large, it might be useful to provide an alternate template for the text version of the URL. This will be displayed instead of the url, but will still link to the URL. The format is a string which uses double curly brace notation {doubleCurlyBraces} to inject values. The following values can be accessed:",values:{doubleCurlyBraces:_react["default"].createElement(_eui.EuiCode,null,"{{ }}")}})),_react["default"].createElement("ul",null,_react["default"].createElement("li",null,_react["default"].createElement(_eui.EuiCode,null,"value")," ",_react["default"].createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.labelTemplate.valueLabel",defaultMessage:"The fields value"})),_react["default"].createElement("li",null,_react["default"].createElement(_eui.EuiCode,null,"url")," ",_react["default"].createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.labelTemplate.urlLabel",defaultMessage:"The formatted URL"}))),_react["default"].createElement("h4",null,_react["default"].createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.labelTemplate.examplesHeader",defaultMessage:"Examples"})),_react["default"].createElement(_eui.EuiBasicTable,{items:[{input:1234,urlTemplate:"http://company.net/profiles?user_id={{value}}",labelTemplate:intl.formatMessage({id:"common.ui.fieldEditor.labelTemplate.example.idLabel",defaultMessage:"User #{value}"},{value:"{{value}}"}),output:'<a href="http://company.net/profiles?user_id=1234">'+intl.formatMessage({id:"common.ui.fieldEditor.labelTemplate.example.output.idLabel",defaultMessage:"User"})+" #1234</a>"},{input:"/assets/main.css",urlTemplate:"http://site.com{{rawValue}}",labelTemplate:intl.formatMessage({id:"common.ui.fieldEditor.labelTemplate.example.pathLabel",defaultMessage:"View Asset"}),output:'<a href="http://site.com/assets/main.css">'+intl.formatMessage({id:"common.ui.fieldEditor.labelTemplate.example.output.pathLabel",defaultMessage:"View Asset"})+"</a>"}],columns:[{field:"input",name:intl.formatMessage({id:"common.ui.fieldEditor.labelTemplate.inputHeader",defaultMessage:"Input"}),width:"160px"},{field:"urlTemplate",name:intl.formatMessage({id:"common.ui.fieldEditor.labelTemplate.urlHeader",defaultMessage:"URL Template"})},{field:"labelTemplate",name:intl.formatMessage({id:"common.ui.fieldEditor.labelTemplate.labelHeader",defaultMessage:"Label Template"})},{field:"output",name:intl.formatMessage({id:"common.ui.fieldEditor.labelTemplate.outputHeader",defaultMessage:"Output"}),render:function render(value){return _react["default"].createElement("span",{dangerouslySetInnerHTML:{__html:value}})}}]})))):null};exports.LabelTemplateFlyoutComponent=LabelTemplateFlyoutComponent;LabelTemplateFlyoutComponent.displayName="LabelTemplateFlyout";var LabelTemplateFlyout=(0,_react2.injectI18n)(LabelTemplateFlyoutComponent);exports.LabelTemplateFlyout=LabelTemplateFlyout},6003:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.UrlTemplateFlyout=exports.UrlTemplateFlyoutComponent=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(2);var _react2=__webpack_require__(10);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var UrlTemplateFlyoutComponent=function UrlTemplateFlyoutComponent(_ref){var _ref$isVisible=_ref.isVisible,isVisible=_ref$isVisible===void 0?false:_ref$isVisible,_ref$onClose=_ref.onClose,onClose=_ref$onClose===void 0?function(){}:_ref$onClose,intl=_ref.intl;return isVisible?_react["default"].createElement(_eui.EuiFlyout,{onClose:onClose},_react["default"].createElement(_eui.EuiFlyoutBody,null,_react["default"].createElement(_eui.EuiText,null,_react["default"].createElement("h3",null,_react["default"].createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.urlTemplateHeader",defaultMessage:"Url Template"})),_react["default"].createElement("p",null,_react["default"].createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.urlTemplateLabel.fieldDetail",defaultMessage:"If a field only contains part of a URL then a {strongUrlTemplate} can be used to format the value as a complete URL. The format is a string which uses double curly brace notation {doubleCurlyBraces} to inject values. The following values can be accessed:",values:{doubleCurlyBraces:_react["default"].createElement(_eui.EuiCode,null,"{{ }}"),strongUrlTemplate:_react["default"].createElement("strong",null,_react["default"].createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.urlTemplateLabel.strongUrlTemplateLabel",defaultMessage:"Url Template"}))}})),_react["default"].createElement("ul",null,_react["default"].createElement("li",null,_react["default"].createElement(_eui.EuiCode,null,"value")," ",_react["default"].createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.urlTemplate.valueLabel",defaultMessage:"The URI-escaped value"})),_react["default"].createElement("li",null,_react["default"].createElement(_eui.EuiCode,null,"rawValue")," ",_react["default"].createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.urlTemplate.rawValueLabel",defaultMessage:"The unescaped value"}))),_react["default"].createElement("h4",null,_react["default"].createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.urlTemplate.examplesHeader",defaultMessage:"Examples"})),_react["default"].createElement(_eui.EuiBasicTable,{items:[{input:1234,template:"http://company.net/profiles?user_id={{value}}",output:"http://company.net/profiles?user_id=1234"},{input:"users/admin",template:"http://company.net/groups?id={{value}}",output:"http://company.net/groups?id=users%2Fadmin"},{input:"/images/favicon.ico",template:"http://www.site.com{{rawValue}}",output:"http://www.site.com/images/favicon.ico"}],columns:[{field:"input",name:intl.formatMessage({id:"common.ui.fieldEditor.urlTemplate.inputHeader",defaultMessage:"Input"}),width:"160px"},{field:"template",name:intl.formatMessage({id:"common.ui.fieldEditor.urlTemplate.templateHeader",defaultMessage:"Template"})},{field:"output",name:intl.formatMessage({id:"common.ui.fieldEditor.urlTemplate.outputHeader",defaultMessage:"Output"})}]})))):null};exports.UrlTemplateFlyoutComponent=UrlTemplateFlyoutComponent;UrlTemplateFlyoutComponent.displayName="UrlTemplateFlyout";var UrlTemplateFlyout=(0,_react2.injectI18n)(UrlTemplateFlyoutComponent);exports.UrlTemplateFlyout=UrlTemplateFlyout},6004:function(module,exports,__webpack_require__){"use strict";__webpack_require__(6005);__webpack_require__(6006);__webpack_require__(6007);__webpack_require__(6008);__webpack_require__(6009);__webpack_require__(6010);__webpack_require__(6011)},6005:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"src/legacy/ui/public/field_editor/components/field_format_editor/editors/url/icons/go.png"},6006:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"src/legacy/ui/public/field_editor/components/field_format_editor/editors/url/icons/stop.png"},6007:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"src/legacy/ui/public/field_editor/components/field_format_editor/editors/url/icons/de.png"},6008:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"src/legacy/ui/public/field_editor/components/field_format_editor/editors/url/icons/ne.png"},6009:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"src/legacy/ui/public/field_editor/components/field_format_editor/editors/url/icons/us.png"},6010:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"src/legacy/ui/public/field_editor/components/field_format_editor/editors/url/icons/ni.png"},6011:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"src/legacy/ui/public/field_editor/components/field_format_editor/editors/url/icons/cv.png"},6012:function(module,exports){},6013:function(module,exports){},6014:function(module,exports){},6015:function(module,exports){},6016:function(module,exports,__webpack_require__){__webpack_require__(6017)},6017:function(module,exports,__webpack_require__){"use strict";var _routes=_interopRequireDefault(__webpack_require__(34));var _index=_interopRequireDefault(__webpack_require__(6018));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}__webpack_require__(201);__webpack_require__(99);__webpack_require__(670);__webpack_require__(6019);__webpack_require__(6057);__webpack_require__(6060);_routes["default"].when("/dev_tools/console",{requireUICapability:"dev_tools.show",controller:"SenseController",template:_index["default"]})},6018:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<kbn-top-nav name="console" config="topNavMenu"></kbn-top-nav>\n<kbn-dev-tools-app data-test-subj="console">\n  <sense-history ng-show="showHistory" is-shown="showHistory" close="closeHistory()" history-dirty="lastRequestTimestamp"></sense-history>\n  <div class="conApp">\n    <div class="conApp__editor">\n      <ul class="conApp__autoComplete" id="autocomplete"></ul>\n      <div class="conApp__editorActions" id="ConAppEditorActions">\n        <kbn-tooltip text="{{:: \'console.sendRequestButtonTooltip\' | i18n: { defaultMessage: \'click to send request\' } }}">\n          <button\n            class="conApp__editorActionButton conApp__editorActionButton--success"\n            ng-click="sendSelected()"\n            data-test-subj="send-request-button">\n            <i class="fa fa-play"></i>\n          </button>\n        </kbn-tooltip>\n        <console-menu\n          auto-indent="autoIndent"\n          get-documentation="getDocumentation"\n          open-documentation="openDocumentation"\n          get-curl="getRequestsAsCURL"\n        >\n        </console-menu>\n      </div>\n\n      <div class="conApp__editorContent" id="ConAppEditor" data-test-subj="request-editor">GET _search\n  {\n    "query": { "match_all": {} }\n  }</div>\n\n    </div>\n    <div class="conApp__resizer" id="ConAppResizer">&#xFE19;</div>\n    <div class="conApp__output" data-test-subj="response-editor">\n      <div class="conApp__outputContent" id="ConAppOutput">{}</div>\n    </div>\n  </div>\n</kbn-dev-tools-app>\n<div id="consoleWelcomePanel"></div>\n<div id="consoleHelpPanel"></div>\n<div id="consoleSettingsModal"></div>\n'},6019:function(module,exports,__webpack_require__){"use strict";var _doc_title=__webpack_require__(423);var _sense_editor_resize=__webpack_require__(2022);var _jquery=_interopRequireDefault(__webpack_require__(25));var _input=__webpack_require__(2023);var _output=__webpack_require__(2026);var _app=_interopRequireDefault(__webpack_require__(6048));var _autocomplete=__webpack_require__(2024);var _documentation_links=__webpack_require__(227);var _welcome_show_panel=__webpack_require__(6049);var _storage=_interopRequireDefault(__webpack_require__(507));var _get_top_nav=__webpack_require__(6052);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}var _module=__webpack_require__(12).get("app/sense");_module.run(function($rootScope){_module.setupResizeCheckerForRootEditors=function($el){for(var _len=arguments.length,editors=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){editors[_key-1]=arguments[_key]}return _sense_editor_resize.applyResizeCheckerToEditors.apply(void 0,[$rootScope,$el].concat(editors))}});function showWelcomeMessageIfNeeded($scope){if(_storage["default"].get("version_welcome_shown")!=="@@SENSE_REVISION"){var hideWelcomePanel=(0,_welcome_show_panel.showWelcomePanel)();$scope.$on("$destroy",function(){hideWelcomePanel()})}}_module.controller("SenseController",function SenseController($scope,$timeout,$location,kbnUiAceKeyboardModeService){_doc_title.docTitle.change("Console");showWelcomeMessageIfNeeded($scope);$scope.getRequestsAsCURL=function(){return""};var input;var output;$timeout(_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var session;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:output=(0,_output.initializeOutput)((0,_jquery["default"])("#ConAppOutput"));input=(0,_input.initializeInput)((0,_jquery["default"])("#ConAppEditor"),(0,_jquery["default"])("#ConAppEditorActions"),(0,_jquery["default"])("#ConCopyAsCurl"),output,$scope.openDocumentation);(0,_app["default"])(input,output,$location.search().load_from);kbnUiAceKeyboardModeService.initialize($scope,(0,_jquery["default"])("#ConAppEditor"));session=input.getSession();session.getSelection().on("changeCursor",function(){$scope.getDocumentation()});$scope.getDocumentation();$scope.getRequestsAsCURL=input.getRequestsAsCURL;case 8:case"end":return _context.stop()}}},_callee)})));$scope.getDocumentation=function(){input.getRequestsInRange(function(requests){if(!requests||requests.length===0){$scope.documentation=null;$scope.$apply();return}var position=requests[0].range.end;position.column=position.column-1;var endpoint=(0,_autocomplete.getEndpointFromPosition)(input,position);if(endpoint&&endpoint.documentation&&endpoint.documentation.indexOf("http")!==-1){$scope.documentation=endpoint.documentation.replace("/master/","/".concat(_documentation_links.DOC_LINK_VERSION,"/"));$scope.documentation=$scope.documentation.replace("/current/","/".concat(_documentation_links.DOC_LINK_VERSION,"/"));$scope.$apply()}else{$scope.documentation=null;$scope.$apply()}})};$scope.showHistory=false;$scope.historyDirty=undefined;$scope.toggleHistory=function(){$scope.showHistory=!$scope.showHistory};$scope.closeHistory=function(){$scope.showHistory=false};$scope.topNavMenu=(0,_get_top_nav.getTopNavConfig)($scope,$scope.toggleHistory);$scope.openDocumentation=function(){if(!$scope.documentation){return}window.open($scope.documentation,"_blank")};$scope.sendSelected=function(){input.focus();input.sendCurrentRequestToES(function(){$scope.lastRequestTimestamp=(new Date).getTime()});return false};$scope.autoIndent=function(event){input.autoIndent();event.preventDefault();input.focus()}})},6020:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getUnmatchedEndpointComponents=getUnmatchedEndpointComponents;exports.getEndpointDescriptionByEndpoint=getEndpointDescriptionByEndpoint;exports.getEndpointBodyCompleteComponents=getEndpointBodyCompleteComponents;exports.getTopLevelUrlCompleteComponents=getTopLevelUrlCompleteComponents;exports.getGlobalAutocompleteComponents=getGlobalAutocompleteComponents;exports.setActiveApi=setActiveApi;exports._test=void 0;var _components=__webpack_require__(348);var _jquery=_interopRequireDefault(__webpack_require__(25));var _lodash=_interopRequireDefault(__webpack_require__(1));var _api=_interopRequireDefault(__webpack_require__(6036));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ACTIVE_API=new _api["default"];var isNotAnIndexName=function isNotAnIndexName(name){return name[0]==="_"&&name!=="_all"};var idAutocompleteComponentFactory=function idAutocompleteComponentFactory(name,parent){return new _components.IdAutocompleteComponent(name,parent)};var parametrizedComponentFactories={getComponent:function getComponent(name,parent,provideDefault){if(this[name]){return this[name]}else if(provideDefault){return idAutocompleteComponentFactory}},index:function index(name,parent){if(isNotAnIndexName(name))return;return new _components.IndexAutocompleteComponent(name,parent,false)},indices:function indices(name,parent){if(isNotAnIndexName(name))return;return new _components.IndexAutocompleteComponent(name,parent,true)},type:function type(name,parent){return new _components.TypeAutocompleteComponent(name,parent,false)},types:function types(name,parent){return new _components.TypeAutocompleteComponent(name,parent,true)},id:function id(name,parent){return idAutocompleteComponentFactory(name,parent)},transform_id:function transform_id(name,parent){return idAutocompleteComponentFactory(name,parent)},username:function username(name,parent){return new _components.UsernameAutocompleteComponent(name,parent)},user:function user(name,parent){return new _components.UsernameAutocompleteComponent(name,parent)},template:function template(name,parent){return new _components.TemplateAutocompleteComponent(name,parent)},task_id:function task_id(name,parent){return idAutocompleteComponentFactory(name,parent)},ids:function ids(name,parent){return idAutocompleteComponentFactory(name,parent,true)},fields:function fields(name,parent){return new _components.FieldAutocompleteComponent(name,parent,true)},field:function field(name,parent){return new _components.FieldAutocompleteComponent(name,parent,false)},nodes:function nodes(name,parent){return new _components.ListComponent(name,["_local","_master","data:true","data:false","master:true","master:false"],parent)},node:function node(name,parent){return new _components.ListComponent(name,[],parent,false)}};function getUnmatchedEndpointComponents(){return ACTIVE_API.getUnmatchedEndpointComponents()}function getEndpointDescriptionByEndpoint(endpoint){return ACTIVE_API.getEndpointDescriptionByEndpoint(endpoint)}function getEndpointBodyCompleteComponents(endpoint){var desc=getEndpointDescriptionByEndpoint(endpoint);if(!desc){throw new Error("failed to resolve endpoint ['"+endpoint+"']")}return desc.bodyAutocompleteRootComponents}function getTopLevelUrlCompleteComponents(method){return ACTIVE_API.getTopLevelUrlCompleteComponents(method)}function getGlobalAutocompleteComponents(term,throwOnMissing){return ACTIVE_API.getGlobalAutocompleteComponents(term,throwOnMissing)}function loadApisFromJson(json,urlParametrizedComponentFactories,bodyParametrizedComponentFactories){urlParametrizedComponentFactories=urlParametrizedComponentFactories||parametrizedComponentFactories;bodyParametrizedComponentFactories=bodyParametrizedComponentFactories||urlParametrizedComponentFactories;var api=new _api["default"](urlParametrizedComponentFactories,bodyParametrizedComponentFactories);var names=[];_lodash["default"].each(json,function(apiJson,name){names.unshift(name);_lodash["default"].each(apiJson.globals||{},function(globalJson,globalName){api.addGlobalAutocompleteRules(globalName,globalJson)});_lodash["default"].each(apiJson.endpoints||{},function(endpointJson,endpointName){api.addEndpointDescription(endpointName,endpointJson)})});api.name=names.join(",");return api}function setActiveApi(api){if(_lodash["default"].isString(api)){_jquery["default"].ajax({url:"../api/console/api_server?sense_version="+encodeURIComponent("@@SENSE_VERSION")+"&apis="+encodeURIComponent(api),dataType:"json"}).then(function(data){setActiveApi(loadApisFromJson(data))},function(jqXHR){console.log("failed to load API '"+api+"': "+jqXHR.responseText)});return}ACTIVE_API=api}setActiveApi("es_6_0");var _test={loadApisFromJson:loadApisFromJson};exports._test=_test},6021:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ConstantComponent=void 0;var _lodash=_interopRequireDefault(__webpack_require__(1));var _shared_component=__webpack_require__(293);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _get(target,property,receiver){if(typeof Reflect!=="undefined"&&Reflect.get){_get=Reflect.get}else{_get=function _get(target,property,receiver){var base=_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(receiver)}return desc.value}}return _get(target,property,receiver||target)}function _superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=_getPrototypeOf(object);if(object===null)break}return object}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var ConstantComponent=function(_SharedComponent){_inherits(ConstantComponent,_SharedComponent);function ConstantComponent(name,parent,options){var _this;_classCallCheck(this,ConstantComponent);_this=_possibleConstructorReturn(this,_getPrototypeOf(ConstantComponent).call(this,name,parent));if(_lodash["default"].isString(options)){options=[options]}_this.options=options||[name];return _this}_createClass(ConstantComponent,[{key:"getTerms",value:function getTerms(){return this.options}},{key:"addOption",value:function addOption(options){if(!Array.isArray(options)){options=[options]}[].push.apply(this.options,options);this.options=_lodash["default"].uniq(this.options)}},{key:"match",value:function match(token,context,editor){if(token!==this.name){return null}return _get(_getPrototypeOf(ConstantComponent.prototype),"match",this).call(this,token,context,editor)}}]);return ConstantComponent}(_shared_component.SharedComponent);exports.ConstantComponent=ConstantComponent},6022:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SimpleParamComponent=void 0;var _shared_component=__webpack_require__(293);function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _get(target,property,receiver){if(typeof Reflect!=="undefined"&&Reflect.get){_get=Reflect.get}else{_get=function _get(target,property,receiver){var base=_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(receiver)}return desc.value}}return _get(target,property,receiver||target)}function _superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=_getPrototypeOf(object);if(object===null)break}return object}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var SimpleParamComponent=function(_SharedComponent){_inherits(SimpleParamComponent,_SharedComponent);function SimpleParamComponent(name,parent){_classCallCheck(this,SimpleParamComponent);return _possibleConstructorReturn(this,_getPrototypeOf(SimpleParamComponent).call(this,name,parent))}_createClass(SimpleParamComponent,[{key:"match",value:function match(token,context,editor){var result=_get(_getPrototypeOf(SimpleParamComponent.prototype),"match",this).call(this,token,context,editor);result.context_values=result.context_values||{};result.context_values[this.name]=token;return result}}]);return SimpleParamComponent}(_shared_component.SharedComponent);exports.SimpleParamComponent=SimpleParamComponent},6023:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ConditionalProxy=void 0;var _shared_component=__webpack_require__(293);function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var ConditionalProxy=function(_SharedComponent){_inherits(ConditionalProxy,_SharedComponent);function ConditionalProxy(predicate,delegate){var _this;_classCallCheck(this,ConditionalProxy);_this=_possibleConstructorReturn(this,_getPrototypeOf(ConditionalProxy).call(this,"__condition"));_this.predicate=predicate;_this.delegate=delegate;return _this}_createClass(ConditionalProxy,[{key:"getTerms",value:function getTerms(context,editor){if(this.predicate(context,editor)){return this.delegate.getTerms(context,editor)}else{return null}}},{key:"match",value:function match(token,context,editor){if(this.predicate(context,editor)){return this.delegate.match(token,context,editor)}else{return false}}}]);return ConditionalProxy}(_shared_component.SharedComponent);exports.ConditionalProxy=ConditionalProxy},6024:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.GlobalOnlyComponent=void 0;var _shared_component=__webpack_require__(293);function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var GlobalOnlyComponent=function(_SharedComponent){_inherits(GlobalOnlyComponent,_SharedComponent);function GlobalOnlyComponent(){_classCallCheck(this,GlobalOnlyComponent);return _possibleConstructorReturn(this,_getPrototypeOf(GlobalOnlyComponent).apply(this,arguments))}_createClass(GlobalOnlyComponent,[{key:"getTerms",value:function getTerms(){return null}},{key:"match",value:function match(token,context){var result={next:[]};var globalRules=context.globalComponentResolver(token,false);if(globalRules){result.next.push.apply(result.next,globalRules)}if(result.next.length){return result}result.next=[this];return result}}]);return GlobalOnlyComponent}(_shared_component.SharedComponent);exports.GlobalOnlyComponent=GlobalOnlyComponent},6025:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ObjectComponent=void 0;var _lodash=_interopRequireDefault(__webpack_require__(1));var _2=__webpack_require__(348);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var ObjectComponent=function(_SharedComponent){_inherits(ObjectComponent,_SharedComponent);function ObjectComponent(name,constants,patternsAndWildCards){var _this;_classCallCheck(this,ObjectComponent);_this=_possibleConstructorReturn(this,_getPrototypeOf(ObjectComponent).call(this,name));_this.constants=constants;_this.patternsAndWildCards=patternsAndWildCards;return _this}_createClass(ObjectComponent,[{key:"getTerms",value:function getTerms(context,editor){var options=[];_lodash["default"].each(this.constants,function(component){options.push.apply(options,component.getTerms(context,editor))});_lodash["default"].each(this.patternsAndWildCards,function(component){options.push.apply(options,component.getTerms(context,editor))});return options}},{key:"match",value:function match(token,context,editor){var result={next:[]};_lodash["default"].each(this.constants,function(component){var componentResult=component.match(token,context,editor);if(componentResult&&componentResult.next){result.next.push.apply(result.next,componentResult.next)}});var globalRules=context.globalComponentResolver(token,false);if(globalRules){result.next.push.apply(result.next,globalRules)}if(result.next.length){return result}_lodash["default"].each(this.patternsAndWildCards,function(component){var componentResult=component.match(token,context,editor);if(componentResult&&componentResult.next){result.next.push.apply(result.next,componentResult.next)}});return result}}]);return ObjectComponent}(_2.SharedComponent);exports.ObjectComponent=ObjectComponent},6026:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AcceptEndpointComponent=exports.URL_PATH_END_MARKER=void 0;var _lodash=_interopRequireDefault(__webpack_require__(1));var _shared_component=__webpack_require__(293);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _get(target,property,receiver){if(typeof Reflect!=="undefined"&&Reflect.get){_get=Reflect.get}else{_get=function _get(target,property,receiver){var base=_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(receiver)}return desc.value}}return _get(target,property,receiver||target)}function _superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=_getPrototypeOf(object);if(object===null)break}return object}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var URL_PATH_END_MARKER="__url_path_end__";exports.URL_PATH_END_MARKER=URL_PATH_END_MARKER;var AcceptEndpointComponent=function(_SharedComponent){_inherits(AcceptEndpointComponent,_SharedComponent);function AcceptEndpointComponent(endpoint,parent){var _this;_classCallCheck(this,AcceptEndpointComponent);_this=_possibleConstructorReturn(this,_getPrototypeOf(AcceptEndpointComponent).call(this,endpoint.id,parent));_this.endpoint=endpoint;return _this}_createClass(AcceptEndpointComponent,[{key:"match",value:function match(token,context,editor){if(token!==URL_PATH_END_MARKER){return null}if(this.endpoint.methods&&-1===_lodash["default"].indexOf(this.endpoint.methods,context.method)){return null}var r=_get(_getPrototypeOf(AcceptEndpointComponent.prototype),"match",this).call(this,token,context,editor);r.context_values=r.context_values||{};r.context_values.endpoint=this.endpoint;if(_lodash["default"].isNumber(this.endpoint.priority)){r.priority=this.endpoint.priority}return r}}]);return AcceptEndpointComponent}(_shared_component.SharedComponent);exports.AcceptEndpointComponent=AcceptEndpointComponent},6027:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.UrlPatternMatcher=void 0;var _lodash=_interopRequireDefault(__webpack_require__(1));var _2=__webpack_require__(348);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var UrlPatternMatcher=function(){function UrlPatternMatcher(parametrizedComponentFactories){var _this=this;_classCallCheck(this,UrlPatternMatcher);_defineProperty(this,"getTopLevelComponents",function(method){var methodRoot=this[method];if(!methodRoot){return[]}return methodRoot.rootComponent.next});["HEAD","GET","PUT","POST","DELETE"].forEach(function(method){_this[method]={rootComponent:new _2.SharedComponent("ROOT"),parametrizedComponentFactories:parametrizedComponentFactories||{getComponent:function getComponent(){}}}})}_createClass(UrlPatternMatcher,[{key:"addEndpoint",value:function addEndpoint(pattern,endpoint){var _this2=this;endpoint.methods.forEach(function(method){var c;var activeComponent=_this2[method].rootComponent;var endpointComponents=endpoint.url_components||{};var partList=pattern.split("/");_lodash["default"].each(partList,function(part,partIndex){if(part.search(/^{.+}$/)>=0){part=part.substr(1,part.length-2);if(activeComponent.getComponent(part)){activeComponent=activeComponent.getComponent(part);return}if(c=endpointComponents[part]){if(Array.isArray(c)){c=new _2.ListComponent(part,c,activeComponent)}else if(_lodash["default"].isObject(c)&&c.type==="list"){c=new _2.ListComponent(part,c.list,activeComponent,c.multiValued,c.allow_non_valid)}else{console.warn("incorrectly configured url component ",part," in endpoint",endpoint);c=new _2.SharedComponent(part)}}else if(c=this[method].parametrizedComponentFactories.getComponent(part)){c=c(part,activeComponent)}else{c=new _2.SimpleParamComponent(part,activeComponent)}activeComponent=c}else{var lookAhead=part;var s;for(partIndex++;partIndex<partList.length;partIndex++){s=partList[partIndex];if(s.indexOf("{")>=0){break}lookAhead+="/"+s}if(activeComponent.getComponent(part)){activeComponent=activeComponent.getComponent(part);activeComponent.addOption(lookAhead)}else{c=new _2.ConstantComponent(part,activeComponent,lookAhead);activeComponent=c}}},_this2);new _2.AcceptEndpointComponent(endpoint,activeComponent)})}}]);return UrlPatternMatcher}();exports.UrlPatternMatcher=UrlPatternMatcher},6028:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.IndexAutocompleteComponent=void 0;var _lodash=_interopRequireDefault(__webpack_require__(1));var _mappings=_interopRequireDefault(__webpack_require__(294));var _list_component=__webpack_require__(424);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function nonValidIndexType(token){return!(token==="_all"||token[0]!=="_")}var IndexAutocompleteComponent=function(_ListComponent){_inherits(IndexAutocompleteComponent,_ListComponent);function IndexAutocompleteComponent(name,parent,multiValued){_classCallCheck(this,IndexAutocompleteComponent);return _possibleConstructorReturn(this,_getPrototypeOf(IndexAutocompleteComponent).call(this,name,_mappings["default"].getIndices,parent,multiValued))}_createClass(IndexAutocompleteComponent,[{key:"validateTokens",value:function validateTokens(tokens){if(!this.multiValued&&tokens.length>1){return false}return!_lodash["default"].find(tokens,nonValidIndexType)}},{key:"getDefaultTermMeta",value:function getDefaultTermMeta(){return"index"}},{key:"getContextKey",value:function getContextKey(){return"indices"}}]);return IndexAutocompleteComponent}(_list_component.ListComponent);exports.IndexAutocompleteComponent=IndexAutocompleteComponent},6029:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Mode=Mode;var ace=__webpack_require__(201);__webpack_require__(2027);var oop=ace.acequire("ace/lib/oop");var JSONMode=ace.acequire("ace/mode/json").Mode;var HighlightRules=__webpack_require__(2027).OutputJsonHighlightRules;var MatchingBraceOutdent=ace.acequire("ace/mode/matching_brace_outdent").MatchingBraceOutdent;var CstyleBehaviour=ace.acequire("ace/mode/behaviour/cstyle").CstyleBehaviour;var CStyleFoldMode=ace.acequire("ace/mode/folding/cstyle").FoldMode;ace.acequire("ace/worker/worker_client");var AceTokenizer=ace.acequire("ace/tokenizer").Tokenizer;function Mode(){this.$tokenizer=new AceTokenizer((new HighlightRules).getRules());this.$outdent=new MatchingBraceOutdent;this.$behaviour=new CstyleBehaviour;this.foldingRules=new CStyleFoldMode}oop.inherits(Mode,JSONMode);(function(){this.createWorker=function(){return null};this.$id="sense/mode/input"}).call(Mode.prototype)},6030:function(module,exports,__webpack_require__){module.exports=__webpack_require__(18)(828)},6031:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FieldAutocompleteComponent=void 0;var _lodash=_interopRequireDefault(__webpack_require__(1));var _mappings=_interopRequireDefault(__webpack_require__(294));var _list_component=__webpack_require__(424);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function FieldGenerator(context){return _lodash["default"].map(_mappings["default"].getFields(context.indices,context.types),function(field){return{name:field.name,meta:field.type}})}var FieldAutocompleteComponent=function(_ListComponent){_inherits(FieldAutocompleteComponent,_ListComponent);function FieldAutocompleteComponent(name,parent,multiValued){_classCallCheck(this,FieldAutocompleteComponent);return _possibleConstructorReturn(this,_getPrototypeOf(FieldAutocompleteComponent).call(this,name,FieldGenerator,parent,multiValued))}_createClass(FieldAutocompleteComponent,[{key:"validateTokens",value:function validateTokens(tokens){if(!this.multiValued&&tokens.length>1){return false}return!_lodash["default"].find(tokens,function(token){return token.match(/[^\w.?*]/)})}},{key:"getDefaultTermMeta",value:function getDefaultTermMeta(){return"field"}},{key:"getContextKey",value:function getContextKey(){return"fields"}}]);return FieldAutocompleteComponent}(_list_component.ListComponent);exports.FieldAutocompleteComponent=FieldAutocompleteComponent},6032:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TypeAutocompleteComponent=void 0;var _lodash=_interopRequireDefault(__webpack_require__(1));var _list_component=__webpack_require__(424);var _mappings=_interopRequireDefault(__webpack_require__(294));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function TypeGenerator(context){return _mappings["default"].getTypes(context.indices)}function nonValidIndexType(token){return!(token==="_all"||token[0]!=="_")}var TypeAutocompleteComponent=function(_ListComponent){_inherits(TypeAutocompleteComponent,_ListComponent);function TypeAutocompleteComponent(name,parent,multiValued){_classCallCheck(this,TypeAutocompleteComponent);return _possibleConstructorReturn(this,_getPrototypeOf(TypeAutocompleteComponent).call(this,name,TypeGenerator,parent,multiValued))}_createClass(TypeAutocompleteComponent,[{key:"validateTokens",value:function validateTokens(tokens){if(!this.multiValued&&tokens.length>1){return false}return!_lodash["default"].find(tokens,nonValidIndexType)}},{key:"getDefaultTermMeta",value:function getDefaultTermMeta(){return"type"}},{key:"getContextKey",value:function getContextKey(){return"types"}}]);return TypeAutocompleteComponent}(_list_component.ListComponent);exports.TypeAutocompleteComponent=TypeAutocompleteComponent},6033:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.IdAutocompleteComponent=void 0;var _lodash=_interopRequireDefault(__webpack_require__(1));var _shared_component=__webpack_require__(293);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _get(target,property,receiver){if(typeof Reflect!=="undefined"&&Reflect.get){_get=Reflect.get}else{_get=function _get(target,property,receiver){var base=_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(receiver)}return desc.value}}return _get(target,property,receiver||target)}function _superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=_getPrototypeOf(object);if(object===null)break}return object}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var IdAutocompleteComponent=function(_SharedComponent){_inherits(IdAutocompleteComponent,_SharedComponent);function IdAutocompleteComponent(name,parent,multi){var _this;_classCallCheck(this,IdAutocompleteComponent);_this=_possibleConstructorReturn(this,_getPrototypeOf(IdAutocompleteComponent).call(this,name,parent));_this.multi_match=multi;return _this}_createClass(IdAutocompleteComponent,[{key:"match",value:function match(token,context,editor){if(!token){return null}if(!this.multi_match&&Array.isArray(token)){return null}token=Array.isArray(token)?token:[token];if(_lodash["default"].find(token,function(t){return t.match(/[\/,]/)})){return null}var r=_get(_getPrototypeOf(IdAutocompleteComponent.prototype),"match",this).call(this,token,context,editor);r.context_values=r.context_values||{};r.context_values.id=token;return r}}]);return IdAutocompleteComponent}(_shared_component.SharedComponent);exports.IdAutocompleteComponent=IdAutocompleteComponent},6034:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TemplateAutocompleteComponent=void 0;var _mappings=_interopRequireDefault(__webpack_require__(294));var _list_component=__webpack_require__(424);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var TemplateAutocompleteComponent=function(_ListComponent){_inherits(TemplateAutocompleteComponent,_ListComponent);function TemplateAutocompleteComponent(name,parent){_classCallCheck(this,TemplateAutocompleteComponent);return _possibleConstructorReturn(this,_getPrototypeOf(TemplateAutocompleteComponent).call(this,name,_mappings["default"].getTemplates,parent))}_createClass(TemplateAutocompleteComponent,[{key:"getContextKey",value:function getContextKey(){return"template"}}]);return TemplateAutocompleteComponent}(_list_component.ListComponent);exports.TemplateAutocompleteComponent=TemplateAutocompleteComponent},6035:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.UsernameAutocompleteComponent=void 0;var _lodash=_interopRequireDefault(__webpack_require__(1));var _mappings=_interopRequireDefault(__webpack_require__(294));var _list_component=__webpack_require__(424);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function nonValidUsernameType(token){return token[0]==="_"}var UsernameAutocompleteComponent=function(_ListComponent){_inherits(UsernameAutocompleteComponent,_ListComponent);function UsernameAutocompleteComponent(name,parent,multiValued){_classCallCheck(this,UsernameAutocompleteComponent);return _possibleConstructorReturn(this,_getPrototypeOf(UsernameAutocompleteComponent).call(this,name,_mappings["default"].getIndices,parent,multiValued))}_createClass(UsernameAutocompleteComponent,[{key:"validateTokens",value:function validateTokens(tokens){if(!this.multiValued&&tokens.length>1){return false}return!_lodash["default"].find(tokens,nonValidUsernameType)}},{key:"getDefaultTermMeta",value:function getDefaultTermMeta(){return"username"}},{key:"getContextKey",value:function getContextKey(){return"username"}}]);return UsernameAutocompleteComponent}(_list_component.ListComponent);exports.UsernameAutocompleteComponent=UsernameAutocompleteComponent},6036:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=void 0;var _components=__webpack_require__(348);var _url_params=__webpack_require__(6037);var _body_completer=__webpack_require__(6038);var _=__webpack_require__(1);function Api(urlParametrizedComponentFactories,bodyParametrizedComponentFactories){this.globalRules={};this.endpoints={};this.urlPatternMatcher=new _components.UrlPatternMatcher(urlParametrizedComponentFactories);this.globalBodyComponentFactories=bodyParametrizedComponentFactories;this.name=""}(function(cls){cls.addGlobalAutocompleteRules=function(parentNode,rules){this.globalRules[parentNode]=(0,_body_completer.compileBodyDescription)("GLOBAL."+parentNode,rules,this.globalBodyComponentFactories)};cls.getGlobalAutocompleteComponents=function(term,throwOnMissing){var result=this.globalRules[term];if(_.isUndefined(result)&&(throwOnMissing||_.isUndefined(throwOnMissing))){throw new Error("failed to resolve global components for  ['"+term+"']")}return result};cls.addEndpointDescription=function(endpoint,description){var copiedDescription={};_.extend(copiedDescription,description||{});_.defaults(copiedDescription,{id:endpoint,patterns:[endpoint],methods:["GET"]});_.each(copiedDescription.patterns,function(p){this.urlPatternMatcher.addEndpoint(p,copiedDescription)},this);copiedDescription.paramsAutocomplete=new _url_params.UrlParams(copiedDescription.url_params);copiedDescription.bodyAutocompleteRootComponents=(0,_body_completer.compileBodyDescription)(copiedDescription.id,copiedDescription.data_autocomplete_rules,this.globalBodyComponentFactories);this.endpoints[endpoint]=copiedDescription};cls.getEndpointDescriptionByEndpoint=function(endpoint){return this.endpoints[endpoint]};cls.getTopLevelUrlCompleteComponents=function(method){return this.urlPatternMatcher.getTopLevelComponents(method)};cls.getUnmatchedEndpointComponents=function(){return(0,_body_completer.globalsOnlyAutocompleteComponents)()};cls.clear=function(){this.endpoints={};this.globalRules={}}})(Api.prototype);var _default=Api;exports["default"]=_default;module.exports=exports.default},6037:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.UrlParams=exports.ParamComponent=void 0;var _components=__webpack_require__(348);function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var _=__webpack_require__(1);var ParamComponent=function(_ConstantComponent){_inherits(ParamComponent,_ConstantComponent);function ParamComponent(name,parent,description){var _this;_classCallCheck(this,ParamComponent);_this=_possibleConstructorReturn(this,_getPrototypeOf(ParamComponent).call(this,name,parent));_this.description=description;return _this}_createClass(ParamComponent,[{key:"getTerms",value:function getTerms(){var t={name:this.name};if(this.description==="__flag__"){t.meta="flag"}else{t.meta="param";t.insertValue=this.name+"="}return[t]}}]);return ParamComponent}(_components.ConstantComponent);exports.ParamComponent=ParamComponent;var UrlParams=function(){function UrlParams(description,defaults){_classCallCheck(this,UrlParams);this.rootComponent=new _components.SharedComponent("ROOT");if(_.isUndefined(defaults)){defaults={pretty:"__flag__",format:["json","yaml"],filter_path:""}}description=_.clone(description||{});_.defaults(description,defaults);_.each(description,function(pDescription,param){var component=new ParamComponent(param,this.rootComponent,pDescription);if(Array.isArray(pDescription)){new _components.ListComponent(param,pDescription,component)}else if(pDescription==="__flag__"){new _components.ListComponent(param,["true","false"],component)}},this)}_createClass(UrlParams,[{key:"getTopLevelComponents",value:function getTopLevelComponents(){return this.rootComponent.next}}]);return UrlParams}();exports.UrlParams=UrlParams},6038:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.globalsOnlyAutocompleteComponents=globalsOnlyAutocompleteComponents;exports.compileBodyDescription=compileBodyDescription;var _engine=__webpack_require__(2031);var _components=__webpack_require__(348);function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var _=__webpack_require__(1);function CompilingContext(endpointId,parametrizedComponentFactories){this.parametrizedComponentFactories=parametrizedComponentFactories;this.endpointId=endpointId}function resolvePathToComponents(tokenPath,context,editor,components){var walkStates=(0,_engine.walkTokenPath)(tokenPath,[new _engine.WalkingState("ROOT",components,[])],context,editor);var result=[].concat.apply([],_.pluck(walkStates,"components"));return result}var ScopeResolver=function(_SharedComponent){_inherits(ScopeResolver,_SharedComponent);function ScopeResolver(link,compilingContext){var _this;_classCallCheck(this,ScopeResolver);_this=_possibleConstructorReturn(this,_getPrototypeOf(ScopeResolver).call(this,"__scope_link"));if(_.isString(link)&&link[0]==="."){if(link==="."){link=compilingContext.endpointId}else{link=compilingContext.endpointId+link}}_this.link=link;_this.compilingContext=compilingContext;return _this}_createClass(ScopeResolver,[{key:"resolveLinkToComponents",value:function resolveLinkToComponents(context,editor){if(_.isFunction(this.link)){var desc=this.link(context,editor);return compileDescription(desc,this.compilingContext)}if(!_.isString(this.link)){throw new Error("unsupported link format",this.link)}var path=this.link.replace(/\./g,"{").split(/(\{)/);var endpoint=path[0];var components;try{if(endpoint==="GLOBAL"){if(path.length<3){throw new Error("missing term in global link: "+this.link)}var term=path[2];components=context.globalComponentResolver(term);path=path.slice(3)}else{path=path.slice(1);components=context.endpointComponentResolver(endpoint)}}catch(e){throw new Error("failed to resolve link ["+this.link+"]: "+e)}return resolvePathToComponents(path,context,editor,components)}},{key:"getTerms",value:function getTerms(context,editor){var options=[];var components=this.resolveLinkToComponents(context,editor);_.each(components,function(component){options.push.apply(options,component.getTerms(context,editor))});return options}},{key:"match",value:function match(token,context,editor){var result={next:[]};var components=this.resolveLinkToComponents(context,editor);_.each(components,function(component){var componentResult=component.match(token,context,editor);if(componentResult&&componentResult.next){result.next.push.apply(result.next,componentResult.next)}});return result}}]);return ScopeResolver}(_components.SharedComponent);function getTemplate(description){if(description.__template){return description.__template}else if(description.__one_of){return getTemplate(description.__one_of[0])}else if(description.__any_of){return[]}else if(description.__scope_link){return{}}else if(Array.isArray(description)){if(description.length===1){if(_.isObject(description[0])){var innerTemplate=getTemplate(description[0]);return innerTemplate!=null?[innerTemplate]:[]}}return[]}else if(_.isObject(description)){return{}}else if(_.isString(description)&&!/^\{.*\}$/.test(description)){return description}else{return description}}function getOptions(description){var options={};var template=getTemplate(description);if(!_.isUndefined(template)){options.template=template}return options}function compileDescription(description,compilingContext){if(Array.isArray(description)){return[compileList(description,compilingContext)]}else if(_.isObject(description)){if(description.__scope_link){return[new ScopeResolver(description.__scope_link,compilingContext)]}if(description.__any_of){return[compileList(description.__any_of,compilingContext)]}if(description.__one_of){return _.flatten(_.map(description.__one_of,function(d){return compileDescription(d,compilingContext)}))}var obj=compileObject(description,compilingContext);if(description.__condition){return[compileCondition(description.__condition,obj,compilingContext)]}else{return[obj]}}else if(_.isString(description)&&/^\{.*\}$/.test(description)){return[compileParametrizedValue(description,compilingContext)]}else{return[new _components.ConstantComponent(description)]}}function compileParametrizedValue(value,compilingContext,template){value=value.substr(1,value.length-2).toLowerCase();var component=compilingContext.parametrizedComponentFactories.getComponent(value,true);if(!component){throw new Error("no factory found for '"+value+"'")}component=component(value,null,template);if(!_.isUndefined(template)){component=(0,_engine.wrapComponentWithDefaults)(component,{template:template})}return component}function compileObject(objDescription,compilingContext){var objectC=new _components.ConstantComponent("{");var constants=[];var patterns=[];_.each(objDescription,function(desc,key){if(key.indexOf("__")===0){return}var options=getOptions(desc);var component;if(/^\{.*\}$/.test(key)){component=compileParametrizedValue(key,compilingContext,options.template);patterns.push(component)}else if(key==="*"){component=new _components.SharedComponent(key);patterns.push(component)}else{options.name=key;component=new _components.ConstantComponent(key,null,[options]);constants.push(component)}_.map(compileDescription(desc,compilingContext),function(subComponent){component.addComponent(subComponent)})});objectC.addComponent(new _components.ObjectComponent("inner",constants,patterns));return objectC}function compileList(listRule,compilingContext){var listC=new _components.ConstantComponent("[");_.each(listRule,function(desc){_.each(compileDescription(desc,compilingContext),function(component){listC.addComponent(component)})});return listC}function compileCondition(description,compiledObject){if(description.lines_regex){return new _components.ConditionalProxy(function(context,editor){var lines=editor.getSession().getLines(context.requestStartRow,editor.getCursorPosition().row).join("\n");return new RegExp(description.lines_regex,"m").test(lines)},compiledObject)}else{throw"unknown condition type - got: "+JSON.stringify(description)}}function globalsOnlyAutocompleteComponents(){return[new _components.GlobalOnlyComponent("__global__")]}function compileBodyDescription(endpointId,description,parametrizedComponentFactories){return compileDescription(description,new CompilingContext(endpointId,parametrizedComponentFactories))}},6039:function(module,exports,__webpack_require__){module.exports=__webpack_require__(18)(2173)},6040:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.detectCURL=detectCURL;exports.parseCURL=parseCURL;function detectCURLinLine(line){return line.match(/^\s*?curl\s+(-X[A-Z]+)?\s*['"]?.*?['"]?(\s*$|\s+?-d\s*?['"])/)}function detectCURL(text){if(!text)return false;var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=text.split("\n")[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var line=_step.value;if(detectCURLinLine(line)){return true}}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator["return"]!=null){_iterator["return"]()}}finally{if(_didIteratorError){throw _iteratorError}}}return false}function parseCURL(text){var state="NONE";var out=[];var body=[];var line="";var lines=text.trim().split("\n");var matches;var EmptyLine=/^\s*$/;var Comment=/^\s*(?:#|\/{2,})(.*)\n?$/;var ExecutionComment=/^\s*#!/;var ClosingSingleQuote=/^([^']*)'/;var ClosingDoubleQuote=/^((?:[^\\"]|\\.)*)"/;var EscapedQuotes=/^((?:[^\\"']|\\.)+)/;var LooksLikeCurl=/^\s*curl\s+/;var CurlVerb=/-X ?(GET|HEAD|POST|PUT|DELETE)/;var HasProtocol=/[\s"']https?:\/\//;var CurlRequestWithProto=/[\s"']https?:\/\/[^\/ ]+\/+([^\s"']+)/;var CurlRequestWithoutProto=/[\s"'][^\/ ]+\/+([^\s"']+)/;var CurlData=/^.+\s(--data|-d)\s*/;var SenseLine=/^\s*(GET|HEAD|POST|PUT|DELETE)\s+\/?(.+)/;if(lines.length>0&&ExecutionComment.test(lines[0])){lines.shift()}function nextLine(){if(line.length>0){return true}if(lines.length===0){return false}line=lines.shift().replace(/[\r\n]+/g,"\n")+"\n";return true}function unescapeLastBodyEl(){var str=body.pop().replace(/\\([\\"'])/g,"$1");body.push(str)}function detectQuote(){if(line.substr(0,1)==="'"){line=line.substr(1);state="SINGLE_QUOTE"}else if(line.substr(0,1)==='"'){line=line.substr(1);state="DOUBLE_QUOTE"}else{state="UNQUOTED"}}function addBodyToOut(){if(body.length>0){out.push(body.join(""));body=[]}state="LF";out.push("\n")}function consumeMatching(pattern){var matches=line.match(pattern);if(matches){body.push(matches[1]);line=line.substr(matches[0].length);detectQuote()}else{body.push(line);line=""}}function parseCurlLine(){var verb="GET";var request="";var matches;if(matches=line.match(CurlVerb)){verb=matches[1]}var pattern=HasProtocol.test(line)?CurlRequestWithProto:CurlRequestWithoutProto;if(matches=line.match(pattern)){request=matches[1]}out.push(verb+" /"+request+"\n");if(matches=line.match(CurlData)){line=line.substr(matches[0].length);detectQuote();if(EmptyLine.test(line)){line=""}}else{state="NONE";line="";out.push("")}}while(nextLine()){if(state==="SINGLE_QUOTE"){consumeMatching(ClosingSingleQuote)}else if(state==="DOUBLE_QUOTE"){consumeMatching(ClosingDoubleQuote);unescapeLastBodyEl()}else if(state==="UNQUOTED"){consumeMatching(EscapedQuotes);if(body.length){unescapeLastBodyEl()}if(state==="UNQUOTED"){addBodyToOut();line=""}}else if(state==="BODY"){if(Comment.test(line)||EmptyLine.test(line)){addBodyToOut()}else{body.push(line);line=""}}else if(EmptyLine.test(line)){if(state!=="LF"){out.push("\n");state="LF"}line=""}else if(matches=line.match(Comment)){out.push("#"+matches[1]+"\n");state="NONE";line=""}else if(LooksLikeCurl.test(line)){parseCurlLine()}else if(matches=line.match(SenseLine)){out.push(matches[1]+" /"+matches[2]+"\n");line="";state="BODY"}else{out.push("### "+line);line=""}}addBodyToOut();return out.join("").trim()}},6041:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=void 0;var MODE={REQUEST_START:2,IN_REQUEST:4,MULTI_DOC_CUR_DOC_END:8,REQUEST_END:16,BETWEEN_REQUESTS:32};function RowParser(editor){var defaultEditor=editor;this.getRowParseMode=function(row){if(row===null||typeof row==="undefined"){row=editor.getCursorPosition().row}var session=editor.getSession();if(row>=session.getLength()||row<0){return MODE.BETWEEN_REQUESTS}var mode=session.getState(row);if(!mode){return MODE.BETWEEN_REQUESTS}if(mode!=="start"){return MODE.IN_REQUEST}var line=(session.getLine(row)||"").trim();if(!line||line[0]==="#"){return MODE.BETWEEN_REQUESTS}if(line.indexOf("}",line.length-1)>=0){row++;if(row<session.getLength()){line=(session.getLine(row)||"").trim();if(line.indexOf("{")===0){return MODE.MULTI_DOC_CUR_DOC_END|MODE.IN_REQUEST}}return MODE.REQUEST_END|MODE.MULTI_DOC_CUR_DOC_END}row++;if(row>=session.getLength()){return MODE.REQUEST_START|MODE.REQUEST_END}line=(session.getLine(row)||"").trim();if(line.indexOf("{")!==0){return MODE.REQUEST_START|MODE.REQUEST_END}return MODE.REQUEST_START};this.rowPredicate=function(row,editor,value){var mode=this.getRowParseMode(row,editor);return(mode&value)>0};this.isEndRequestRow=function(row,_e){var editor=_e||defaultEditor;return this.rowPredicate(row,editor,MODE.REQUEST_END)};this.isRequestEdge=function(row,_e){var editor=_e||defaultEditor;return this.rowPredicate(row,editor,MODE.REQUEST_END|MODE.REQUEST_START)};this.isStartRequestRow=function(row,_e){var editor=_e||defaultEditor;return this.rowPredicate(row,editor,MODE.REQUEST_START)};this.isInBetweenRequestsRow=function(row,_e){var editor=_e||defaultEditor;return this.rowPredicate(row,editor,MODE.BETWEEN_REQUESTS)};this.isInRequestsRow=function(row,_e){var editor=_e||defaultEditor;return this.rowPredicate(row,editor,MODE.IN_REQUEST)};this.isMultiDocDocEndRow=function(row,_e){var editor=_e||defaultEditor;return this.rowPredicate(row,editor,MODE.MULTI_DOC_CUR_DOC_END)};this.isEmptyToken=function(tokenOrTokenIter){var token=tokenOrTokenIter&&tokenOrTokenIter.getCurrentToken?tokenOrTokenIter.getCurrentToken():tokenOrTokenIter;return!token||token.type==="whitespace"};this.isUrlOrMethodToken=function(tokenOrTokenIter){var t=tokenOrTokenIter.getCurrentToken?tokenOrTokenIter.getCurrentToken():tokenOrTokenIter;return t&&t.type&&(t.type==="method"||t.type.indexOf("url")===0)};this.nextNonEmptyToken=function(tokenIter){var t=tokenIter.stepForward();while(t&&this.isEmptyToken(t)){t=tokenIter.stepForward()}return t};this.prevNonEmptyToken=function(tokenIter){var t=tokenIter.stepBackward();while((t||tokenIter.getCurrentTokenRow()>0)&&this.isEmptyToken(t)){t=tokenIter.stepBackward()}return t}}RowParser.prototype.MODE=MODE;var _default=RowParser;exports["default"]=_default;module.exports=exports.default},6042:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Mode=Mode;var _brace=_interopRequireDefault(__webpack_require__(201));var _worker=__webpack_require__(6043);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var oop=_brace["default"].acequire("ace/lib/oop");var TextMode=_brace["default"].acequire("ace/mode/text").Mode;var ScriptMode=__webpack_require__(6045).ScriptMode;var MatchingBraceOutdent=_brace["default"].acequire("ace/mode/matching_brace_outdent").MatchingBraceOutdent;var CstyleBehaviour=_brace["default"].acequire("ace/mode/behaviour/cstyle").CstyleBehaviour;var CStyleFoldMode=_brace["default"].acequire("ace/mode/folding/cstyle").FoldMode;var WorkerClient=_brace["default"].acequire("ace/worker/worker_client").WorkerClient;var AceTokenizer=_brace["default"].acequire("ace/tokenizer").Tokenizer;var HighlightRules=__webpack_require__(6046).InputHighlightRules;function Mode(){this.$tokenizer=new AceTokenizer((new HighlightRules).getRules());this.$outdent=new MatchingBraceOutdent;this.$behaviour=new CstyleBehaviour;this.foldingRules=new CStyleFoldMode;this.createModeDelegates({"script-":ScriptMode})}oop.inherits(Mode,TextMode);(function(){this.getCompletions=function(){return[]};this.getNextLineIndent=function(state,line,tab){var indent=this.$getIndent(line);if(state!=="string_literal"){var match=line.match(/^.*[\{\(\[]\s*$/);if(match){indent+=tab}}return indent};this.checkOutdent=function(state,line,input){return this.$outdent.checkOutdent(line,input)};this.autoOutdent=function(state,doc,row){this.$outdent.autoOutdent(doc,row)};this.createWorker=function(session){var worker=new WorkerClient(["ace","sense_editor"],_worker.workerModule,"SenseWorker");worker.attachToDocument(session.getDocument());worker.on("error",function(e){session.setAnnotations([e.data])});worker.on("ok",function(anno){session.setAnnotations(anno.data)});return worker}}).call(Mode.prototype)},6043:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.workerModule=void 0;var _worker=_interopRequireDefault(__webpack_require__(6044));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var workerModule={id:"sense_editor/mode/worker",src:_worker["default"]};exports.workerModule=workerModule},6044:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]="/* eslint-disable */\n/* \n  This file is loaded up as a blob by Brace to hand to Ace to load as Jsonp\n  (hence the redefining of everything).  It is based on the javascript\n  mode from the brace distro.\n*/\n\n(function (window) {\n  function resolveModuleId(id, paths) {\n    for (let testPath = id, tail = ''; testPath;) {\n      let alias = paths[testPath];\n      if ('string' === typeof alias) return alias + tail;\n      if (alias)\n        {return (\n          alias.location.replace(/\\/*$/, '/') +\n          (tail || alias.main || alias.name)\n        );}\n      if (alias === !1) return '';\n      let i = testPath.lastIndexOf('/');\n      if (-1 === i) break;\n      (tail = testPath.substr(i) + tail), (testPath = testPath.slice(0, i));\n    }\n    return id;\n  }\n  if (\n    !(\n      (void 0 !== window.window && window.document) ||\n      (window.acequire && window.define)\n    )\n  ) {\n    window.console ||\n      ((window.console = function () {\n        let msgs = Array.prototype.slice.call(arguments, 0);\n        postMessage({ type: 'log', data: msgs });\n      }),\n        (window.console.error = window.console.warn = window.console.log = window.console.trace =\n        window.console)),\n    (window.window = window),\n    (window.ace = window),\n    (window.onerror = function (message, file, line, col, err) {\n      postMessage({\n        type: 'error',\n        data: {\n          message: message,\n          data: err.data,\n          file: file,\n          line: line,\n          col: col,\n          stack: err.stack,\n        },\n      });\n    }),\n    (window.normalizeModule = function (parentId, moduleName) {\n      if (-1 !== moduleName.indexOf('!')) {\n        let chunks = moduleName.split('!');\n        return (\n          window.normalizeModule(parentId, chunks[0]) +\n            '!' +\n            window.normalizeModule(parentId, chunks[1])\n        );\n      }\n      if ('.' == moduleName.charAt(0)) {\n        let base = parentId\n          .split('/')\n          .slice(0, -1)\n          .join('/');\n        for (\n          moduleName = (base ? base + '/' : '') + moduleName;\n          -1 !== moduleName.indexOf('.') && previous != moduleName;\n\n        ) {\n          var previous = moduleName;\n          moduleName = moduleName\n            .replace(/^\\.\\//, '')\n            .replace(/\\/\\.\\//, '/')\n            .replace(/[^\\/]+\\/\\.\\.\\//, '');\n        }\n      }\n      return moduleName;\n    }),\n    (window.acequire = function acequire(parentId, id) {\n      if ((id || ((id = parentId), (parentId = null)), !id.charAt))\n        {throw Error(\n            'worker.js acequire() accepts only (parentId, id) as arguments'\n          );}\n      id = window.normalizeModule(parentId, id);\n      let module = window.acequire.modules[id];\n      if (module)\n        {return (\n            module.initialized ||\n              ((module.initialized = !0),\n              (module.exports = module.factory().exports)),\n            module.exports\n          );}\n      if (!window.acequire.tlns) return console.log('unable to load ' + id);\n      let path = resolveModuleId(id, window.acequire.tlns);\n      return (\n        '.js' != path.slice(-3) && (path += '.js'),\n        (window.acequire.id = id),\n        (window.acequire.modules[id] = {}),\n        importScripts(path),\n        window.acequire(parentId, id)\n      );\n    }),\n    (window.acequire.modules = {}),\n    (window.acequire.tlns = {}),\n    (window.define = function (id, deps, factory) {\n      if (\n        (2 == arguments.length\n          ? ((factory = deps),\n            'string' !== typeof id && ((deps = id), (id = window.acequire.id)))\n          : 1 == arguments.length &&\n              ((factory = id), (deps = []), (id = window.acequire.id)),\n          'function' !== typeof factory)\n      )\n        {return (\n            (window.acequire.modules[id] = {\n              exports: factory,\n              initialized: !0,\n            }),\n            void 0\n          );}\n      deps.length || (deps = ['require', 'exports', 'module']);\n      let req = function (childId) {\n        return window.acequire(id, childId);\n      };\n      window.acequire.modules[id] = {\n        exports: {},\n        factory: function () {\n          let module = this,\n            returnExports = factory.apply(\n              this,\n              deps.map(function (dep) {\n                switch (dep) {\n                  case 'require':\n                    return req;\n                  case 'exports':\n                    return module.exports;\n                  case 'module':\n                    return module;\n                  default:\n                    return req(dep);\n                }\n              })\n            );\n          return returnExports && (module.exports = returnExports), module;\n        },\n      };\n    }),\n    (window.define.amd = {}),\n    (acequire.tlns = {}),\n    (window.initBaseUrls = function (topLevelNamespaces) {\n      for (let i in topLevelNamespaces)\n        {acequire.tlns[i] = topLevelNamespaces[i];}\n    }),\n    (window.initSender = function () {\n      let EventEmitter = window.acequire('ace/lib/event_emitter')\n          .EventEmitter,\n        oop = window.acequire('ace/lib/oop'),\n        Sender = function () {};\n      return (\n        function () {\n          oop.implement(this, EventEmitter),\n          (this.callback = function (data, callbackId) {\n            postMessage({ type: 'call', id: callbackId, data: data });\n          }),\n          (this.emit = function (name, data) {\n            postMessage({ type: 'event', name: name, data: data });\n          });\n        }.call(Sender.prototype),\n        new Sender()\n      );\n    });\n    let main = (window.main = null),\n      sender = (window.sender = null);\n    window.onmessage = function (e) {\n      let msg = e.data;\n      if (msg.event && sender) sender._signal(msg.event, msg.data);\n      else if (msg.command)\n        {if (main[msg.command]) main[msg.command].apply(main, msg.args);\n        else {\n          if (!window[msg.command])\n            throw Error('Unknown command:' + msg.command);\n          window[msg.command].apply(window, msg.args);\n        }}\n      else if (msg.init) {\n        window.initBaseUrls(msg.tlns),\n        acequire('ace/lib/es5-shim'),\n        (sender = window.sender = window.initSender());\n        let clazz = acequire(msg.module)[msg.classname];\n        main = window.main = new clazz(sender);\n      }\n    };\n  }\n}(this)),\nace.define('ace/lib/oop', ['require', 'exports', 'module'], function (\n  acequire,\n  exports\n) {\n  \n  (exports.inherits = function (ctor, superCtor) {\n    (ctor.super_ = superCtor),\n    (ctor.prototype = Object.create(superCtor.prototype, {\n      constructor: {\n        value: ctor,\n        enumerable: !1,\n        writable: !0,\n        configurable: !0,\n      },\n    }));\n  }),\n  (exports.mixin = function (obj, mixin) {\n    for (let key in mixin) obj[key] = mixin[key];\n    return obj;\n  }),\n  (exports.implement = function (proto, mixin) {\n    exports.mixin(proto, mixin);\n  });\n}),\nace.define('ace/range', ['require', 'exports', 'module'], function (\n  acequire,\n  exports\n) {\n  \n  let comparePoints = function (p1, p2) {\n      return p1.row - p2.row || p1.column - p2.column;\n    },\n    Range = function (startRow, startColumn, endRow, endColumn) {\n      (this.start = { row: startRow, column: startColumn }),\n      (this.end = { row: endRow, column: endColumn });\n    };\n  (function () {\n    (this.isEqual = function (range) {\n      return (\n        this.start.row === range.start.row &&\n          this.end.row === range.end.row &&\n          this.start.column === range.start.column &&\n          this.end.column === range.end.column\n      );\n    }),\n    (this.toString = function () {\n      return (\n        'Range: [' +\n            this.start.row +\n            '/' +\n            this.start.column +\n            '] -> [' +\n            this.end.row +\n            '/' +\n            this.end.column +\n            ']'\n      );\n    }),\n    (this.contains = function (row, column) {\n      return 0 == this.compare(row, column);\n    }),\n    (this.compareRange = function (range) {\n      let cmp,\n        end = range.end,\n        start = range.start;\n      return (\n        (cmp = this.compare(end.row, end.column)),\n        1 == cmp\n          ? ((cmp = this.compare(start.row, start.column)),\n            1 == cmp ? 2 : 0 == cmp ? 1 : 0)\n          : -1 == cmp\n            ? -2\n            : ((cmp = this.compare(start.row, start.column)),\n              -1 == cmp ? -1 : 1 == cmp ? 42 : 0)\n      );\n    }),\n    (this.comparePoint = function (p) {\n      return this.compare(p.row, p.column);\n    }),\n    (this.containsRange = function (range) {\n      return (\n        0 == this.comparePoint(range.start) &&\n            0 == this.comparePoint(range.end)\n      );\n    }),\n    (this.intersects = function (range) {\n      let cmp = this.compareRange(range);\n      return -1 == cmp || 0 == cmp || 1 == cmp;\n    }),\n    (this.isEnd = function (row, column) {\n      return this.end.row == row && this.end.column == column;\n    }),\n    (this.isStart = function (row, column) {\n      return this.start.row == row && this.start.column == column;\n    }),\n    (this.setStart = function (row, column) {\n      'object' === typeof row\n        ? ((this.start.column = row.column), (this.start.row = row.row))\n        : ((this.start.row = row), (this.start.column = column));\n    }),\n    (this.setEnd = function (row, column) {\n      'object' === typeof row\n        ? ((this.end.column = row.column), (this.end.row = row.row))\n        : ((this.end.row = row), (this.end.column = column));\n    }),\n    (this.inside = function (row, column) {\n      return 0 == this.compare(row, column)\n        ? this.isEnd(row, column) || this.isStart(row, column)\n          ? !1\n          : !0\n        : !1;\n    }),\n    (this.insideStart = function (row, column) {\n      return 0 == this.compare(row, column)\n        ? this.isEnd(row, column)\n          ? !1\n          : !0\n        : !1;\n    }),\n    (this.insideEnd = function (row, column) {\n      return 0 == this.compare(row, column)\n        ? this.isStart(row, column)\n          ? !1\n          : !0\n        : !1;\n    }),\n    (this.compare = function (row, column) {\n      return this.isMultiLine() || row !== this.start.row\n        ? this.start.row > row\n          ? -1\n          : row > this.end.row\n            ? 1\n            : this.start.row === row\n              ? column >= this.start.column\n                ? 0\n                : -1\n              : this.end.row === row\n                ? this.end.column >= column\n                  ? 0\n                  : 1\n                : 0\n        : this.start.column > column\n          ? -1\n          : column > this.end.column\n            ? 1\n            : 0;\n    }),\n    (this.compareStart = function (row, column) {\n      return this.start.row == row && this.start.column == column\n        ? -1\n        : this.compare(row, column);\n    }),\n    (this.compareEnd = function (row, column) {\n      return this.end.row == row && this.end.column == column\n        ? 1\n        : this.compare(row, column);\n    }),\n    (this.compareInside = function (row, column) {\n      return this.end.row == row && this.end.column == column\n        ? 1\n        : this.start.row == row && this.start.column == column\n          ? -1\n          : this.compare(row, column);\n    }),\n    (this.clipRows = function (firstRow, lastRow) {\n      if (this.end.row > lastRow) var end = { row: lastRow + 1, column: 0 };\n      else if (firstRow > this.end.row)\n        {var end = { row: firstRow, column: 0 };}\n      if (this.start.row > lastRow)\n        {var start = { row: lastRow + 1, column: 0 };}\n      else if (firstRow > this.start.row)\n        {var start = { row: firstRow, column: 0 };}\n      return Range.fromPoints(start || this.start, end || this.end);\n    }),\n    (this.extend = function (row, column) {\n      let cmp = this.compare(row, column);\n      if (0 == cmp) return this;\n      if (-1 == cmp) var start = { row: row, column: column };\n      else var end = { row: row, column: column };\n      return Range.fromPoints(start || this.start, end || this.end);\n    }),\n    (this.isEmpty = function () {\n      return (\n        this.start.row === this.end.row &&\n            this.start.column === this.end.column\n      );\n    }),\n    (this.isMultiLine = function () {\n      return this.start.row !== this.end.row;\n    }),\n    (this.clone = function () {\n      return Range.fromPoints(this.start, this.end);\n    }),\n    (this.collapseRows = function () {\n      return 0 == this.end.column\n        ? new Range(\n          this.start.row,\n          0,\n          Math.max(this.start.row, this.end.row - 1),\n          0\n        )\n        : new Range(this.start.row, 0, this.end.row, 0);\n    }),\n    (this.toScreenRange = function (session) {\n      let screenPosStart = session.documentToScreenPosition(this.start),\n        screenPosEnd = session.documentToScreenPosition(this.end);\n      return new Range(\n        screenPosStart.row,\n        screenPosStart.column,\n        screenPosEnd.row,\n        screenPosEnd.column\n      );\n    }),\n    (this.moveBy = function (row, column) {\n      (this.start.row += row),\n      (this.start.column += column),\n      (this.end.row += row),\n      (this.end.column += column);\n    });\n  }.call(Range.prototype),\n    (Range.fromPoints = function (start, end) {\n      return new Range(start.row, start.column, end.row, end.column);\n    }),\n    (Range.comparePoints = comparePoints),\n    (Range.comparePoints = function (p1, p2) {\n      return p1.row - p2.row || p1.column - p2.column;\n    }),\n    (exports.Range = Range));\n}),\nace.define('ace/apply_delta', ['require', 'exports', 'module'], function (\n  acequire,\n  exports\n) {\n  \n  exports.applyDelta = function (docLines, delta) {\n    let row = delta.start.row,\n      startColumn = delta.start.column,\n      line = docLines[row] || '';\n    switch (delta.action) {\n      case 'insert':\n        var lines = delta.lines;\n        if (1 === lines.length)\n          {docLines[row] =\n              line.substring(0, startColumn) +\n              delta.lines[0] +\n              line.substring(startColumn);}\n        else {\n          let args = [row, 1].concat(delta.lines);\n          docLines.splice.apply(docLines, args),\n          (docLines[row] = line.substring(0, startColumn) + docLines[row]),\n          (docLines[row + delta.lines.length - 1] += line.substring(\n            startColumn\n          ));\n        }\n        break;\n      case 'remove':\n        var endColumn = delta.end.column,\n          endRow = delta.end.row;\n        row === endRow\n          ? (docLines[row] =\n                line.substring(0, startColumn) + line.substring(endColumn))\n          : docLines.splice(\n            row,\n            endRow - row + 1,\n            line.substring(0, startColumn) +\n                  docLines[endRow].substring(endColumn)\n          );\n    }\n  };\n}),\nace.define(\n  'ace/lib/event_emitter',\n  ['require', 'exports', 'module'],\n  function (acequire, exports) {\n    \n    let EventEmitter = {},\n      stopPropagation = function () {\n        this.propagationStopped = !0;\n      },\n      preventDefault = function () {\n        this.defaultPrevented = !0;\n      };\n    (EventEmitter._emit = EventEmitter._dispatchEvent = function (\n      eventName,\n      e\n    ) {\n      this._eventRegistry || (this._eventRegistry = {}),\n      this._defaultHandlers || (this._defaultHandlers = {});\n      let listeners = this._eventRegistry[eventName] || [],\n        defaultHandler = this._defaultHandlers[eventName];\n      if (listeners.length || defaultHandler) {\n        ('object' === typeof e && e) || (e = {}),\n        e.type || (e.type = eventName),\n        e.stopPropagation || (e.stopPropagation = stopPropagation),\n        e.preventDefault || (e.preventDefault = preventDefault),\n        (listeners = listeners.slice());\n        for (\n          let i = 0;\n          listeners.length > i &&\n            (listeners[i](e, this), !e.propagationStopped);\n          i++\n        );\n        return defaultHandler && !e.defaultPrevented\n          ? defaultHandler(e, this)\n          : void 0;\n      }\n    }),\n    (EventEmitter._signal = function (eventName, e) {\n      let listeners = (this._eventRegistry || {})[eventName];\n      if (listeners) {\n        listeners = listeners.slice();\n        for (let i = 0; listeners.length > i; i++) listeners[i](e, this);\n      }\n    }),\n    (EventEmitter.once = function (eventName, callback) {\n      let _self = this;\n      callback &&\n            this.addEventListener(eventName, function newCallback() {\n              _self.removeEventListener(eventName, newCallback),\n              callback.apply(null, arguments);\n            });\n    }),\n    (EventEmitter.setDefaultHandler = function (eventName, callback) {\n      let handlers = this._defaultHandlers;\n      if (\n        (handlers ||\n              (handlers = this._defaultHandlers = { _disabled_: {} }),\n          handlers[eventName])\n      ) {\n        let old = handlers[eventName],\n          disabled = handlers._disabled_[eventName];\n        disabled || (handlers._disabled_[eventName] = disabled = []),\n        disabled.push(old);\n        let i = disabled.indexOf(callback);\n        -1 != i && disabled.splice(i, 1);\n      }\n      handlers[eventName] = callback;\n    }),\n    (EventEmitter.removeDefaultHandler = function (eventName, callback) {\n      let handlers = this._defaultHandlers;\n      if (handlers) {\n        let disabled = handlers._disabled_[eventName];\n        if (handlers[eventName] == callback)\n          {handlers[eventName],\n                disabled && this.setDefaultHandler(eventName, disabled.pop());}\n        else if (disabled) {\n          let i = disabled.indexOf(callback);\n          -1 != i && disabled.splice(i, 1);\n        }\n      }\n    }),\n    (EventEmitter.on = EventEmitter.addEventListener = function (\n      eventName,\n      callback,\n      capturing\n    ) {\n      this._eventRegistry = this._eventRegistry || {};\n      let listeners = this._eventRegistry[eventName];\n      return (\n        listeners || (listeners = this._eventRegistry[eventName] = []),\n        -1 == listeners.indexOf(callback) &&\n              listeners[capturing ? 'unshift' : 'push'](callback),\n        callback\n      );\n    }),\n    (EventEmitter.off = EventEmitter.removeListener = EventEmitter.removeEventListener = function (\n      eventName,\n      callback\n    ) {\n      this._eventRegistry = this._eventRegistry || {};\n      let listeners = this._eventRegistry[eventName];\n      if (listeners) {\n        let index = listeners.indexOf(callback);\n        -1 !== index && listeners.splice(index, 1);\n      }\n    }),\n    (EventEmitter.removeAllListeners = function (eventName) {\n      this._eventRegistry && (this._eventRegistry[eventName] = []);\n    }),\n    (exports.EventEmitter = EventEmitter);\n  }\n),\nace.define(\n  'ace/anchor',\n  ['require', 'exports', 'module', 'ace/lib/oop', 'ace/lib/event_emitter'],\n  function (acequire, exports) {\n    \n    let oop = acequire('./lib/oop'),\n      EventEmitter = acequire('./lib/event_emitter').EventEmitter,\n      Anchor = (exports.Anchor = function (doc, row, column) {\n        (this.$onChange = this.onChange.bind(this)),\n        this.attach(doc),\n        column === void 0\n          ? this.setPosition(row.row, row.column)\n          : this.setPosition(row, column);\n      });\n    (function () {\n      function $pointsInOrder(point1, point2, equalPointsInOrder) {\n        let bColIsAfter = equalPointsInOrder\n          ? point1.column <= point2.column\n          : point1.column < point2.column;\n        return (\n          point1.row < point2.row || (point1.row == point2.row && bColIsAfter)\n        );\n      }\n      function $getTransformedPoint(delta, point, moveIfEqual) {\n        let deltaIsInsert = 'insert' == delta.action,\n          deltaRowShift =\n              (deltaIsInsert ? 1 : -1) * (delta.end.row - delta.start.row),\n          deltaColShift =\n              (deltaIsInsert ? 1 : -1) *\n              (delta.end.column - delta.start.column),\n          deltaStart = delta.start,\n          deltaEnd = deltaIsInsert ? deltaStart : delta.end;\n        return $pointsInOrder(point, deltaStart, moveIfEqual)\n          ? { row: point.row, column: point.column }\n          : $pointsInOrder(deltaEnd, point, !moveIfEqual)\n            ? {\n              row: point.row + deltaRowShift,\n              column:\n                    point.column +\n                    (point.row == deltaEnd.row ? deltaColShift : 0),\n            }\n            : { row: deltaStart.row, column: deltaStart.column };\n      }\n      oop.implement(this, EventEmitter),\n      (this.getPosition = function () {\n        return this.$clipPositionToDocument(this.row, this.column);\n      }),\n      (this.getDocument = function () {\n        return this.document;\n      }),\n      (this.$insertRight = !1),\n      (this.onChange = function (delta) {\n        if (\n          !(\n            (delta.start.row == delta.end.row &&\n                  delta.start.row != this.row) ||\n                delta.start.row > this.row\n          )\n        ) {\n          let point = $getTransformedPoint(\n            delta,\n            { row: this.row, column: this.column },\n            this.$insertRight\n          );\n          this.setPosition(point.row, point.column, !0);\n        }\n      }),\n      (this.setPosition = function (row, column, noClip) {\n        let pos;\n        if (\n          ((pos = noClip\n            ? { row: row, column: column }\n            : this.$clipPositionToDocument(row, column)),\n            this.row != pos.row || this.column != pos.column)\n        ) {\n          let old = { row: this.row, column: this.column };\n          (this.row = pos.row),\n          (this.column = pos.column),\n          this._signal('change', { old: old, value: pos });\n        }\n      }),\n      (this.detach = function () {\n        this.document.removeEventListener('change', this.$onChange);\n      }),\n      (this.attach = function (doc) {\n        (this.document = doc || this.document),\n        this.document.on('change', this.$onChange);\n      }),\n      (this.$clipPositionToDocument = function (row, column) {\n        let pos = {};\n        return (\n          row >= this.document.getLength()\n            ? ((pos.row = Math.max(0, this.document.getLength() - 1)),\n              (pos.column = this.document.getLine(pos.row).length))\n            : 0 > row\n              ? ((pos.row = 0), (pos.column = 0))\n              : ((pos.row = row),\n                (pos.column = Math.min(\n                  this.document.getLine(pos.row).length,\n                  Math.max(0, column)\n                ))),\n          0 > column && (pos.column = 0),\n          pos\n        );\n      });\n    }.call(Anchor.prototype));\n  }\n),\nace.define(\n  'ace/document',\n  [\n    'require',\n    'exports',\n    'module',\n    'ace/lib/oop',\n    'ace/apply_delta',\n    'ace/lib/event_emitter',\n    'ace/range',\n    'ace/anchor',\n  ],\n  function (acequire, exports) {\n    \n    let oop = acequire('./lib/oop'),\n      applyDelta = acequire('./apply_delta').applyDelta,\n      EventEmitter = acequire('./lib/event_emitter').EventEmitter,\n      Range = acequire('./range').Range,\n      Anchor = acequire('./anchor').Anchor,\n      Document = function (textOrLines) {\n        (this.$lines = ['']),\n        0 === textOrLines.length\n          ? (this.$lines = [''])\n          : Array.isArray(textOrLines)\n            ? this.insertMergedLines({ row: 0, column: 0 }, textOrLines)\n            : this.insert({ row: 0, column: 0 }, textOrLines);\n      };\n    (function () {\n      oop.implement(this, EventEmitter),\n      (this.setValue = function (text) {\n        let len = this.getLength() - 1;\n        this.remove(new Range(0, 0, len, this.getLine(len).length)),\n        this.insert({ row: 0, column: 0 }, text);\n      }),\n      (this.getValue = function () {\n        return this.getAllLines().join(this.getNewLineCharacter());\n      }),\n      (this.createAnchor = function (row, column) {\n        return new Anchor(this, row, column);\n      }),\n      (this.$split =\n            0 === 'aaa'.split(/a/).length\n              ? function (text) {\n                return text.replace(/\\r\\n|\\r/g, '\\n').split('\\n');\n              }\n              : function (text) {\n                return text.split(/\\r\\n|\\r|\\n/);\n              }),\n      (this.$detectNewLine = function (text) {\n        let match = text.match(/^.*?(\\r\\n|\\r|\\n)/m);\n        (this.$autoNewLine = match ? match[1] : '\\n'),\n        this._signal('changeNewLineMode');\n      }),\n      (this.getNewLineCharacter = function () {\n        switch (this.$newLineMode) {\n          case 'windows':\n            return '\\r\\n';\n          case 'unix':\n            return '\\n';\n          default:\n            return this.$autoNewLine || '\\n';\n        }\n      }),\n      (this.$autoNewLine = ''),\n      (this.$newLineMode = 'auto'),\n      (this.setNewLineMode = function (newLineMode) {\n        this.$newLineMode !== newLineMode &&\n              ((this.$newLineMode = newLineMode),\n                this._signal('changeNewLineMode'));\n      }),\n      (this.getNewLineMode = function () {\n        return this.$newLineMode;\n      }),\n      (this.isNewLine = function (text) {\n        return '\\r\\n' == text || '\\r' == text || '\\n' == text;\n      }),\n      (this.getLine = function (row) {\n        return this.$lines[row] || '';\n      }),\n      (this.getLines = function (firstRow, lastRow) {\n        return this.$lines.slice(firstRow, lastRow + 1);\n      }),\n      (this.getAllLines = function () {\n        return this.getLines(0, this.getLength());\n      }),\n      (this.getLength = function () {\n        return this.$lines.length;\n      }),\n      (this.getTextRange = function (range) {\n        return this.getLinesForRange(range).join(\n          this.getNewLineCharacter()\n        );\n      }),\n      (this.getLinesForRange = function (range) {\n        let lines;\n        if (range.start.row === range.end.row)\n          {lines = [\n                this.getLine(range.start.row).substring(\n                  range.start.column,\n                  range.end.column\n                ),\n              ];}\n        else {\n          (lines = this.getLines(range.start.row, range.end.row)),\n          (lines[0] = (lines[0] || '').substring(range.start.column));\n          let l = lines.length - 1;\n          range.end.row - range.start.row == l &&\n                (lines[l] = lines[l].substring(0, range.end.column));\n        }\n        return lines;\n      }),\n      (this.insertLines = function (row, lines) {\n        return (\n          console.warn(\n            'Use of document.insertLines is deprecated. Use the insertFullLines method instead.'\n          ),\n          this.insertFullLines(row, lines)\n        );\n      }),\n      (this.removeLines = function (firstRow, lastRow) {\n        return (\n          console.warn(\n            'Use of document.removeLines is deprecated. Use the removeFullLines method instead.'\n          ),\n          this.removeFullLines(firstRow, lastRow)\n        );\n      }),\n      (this.insertNewLine = function (position) {\n        return (\n          console.warn(\n            'Use of document.insertNewLine is deprecated. Use insertMergedLines(position, [\\'\\', \\'\\']) instead.'\n          ),\n          this.insertMergedLines(position, ['', ''])\n        );\n      }),\n      (this.insert = function (position, text) {\n        return (\n          1 >= this.getLength() && this.$detectNewLine(text),\n          this.insertMergedLines(position, this.$split(text))\n        );\n      }),\n      (this.insertInLine = function (position, text) {\n        let start = this.clippedPos(position.row, position.column),\n          end = this.pos(position.row, position.column + text.length);\n        return (\n          this.applyDelta(\n            { start: start, end: end, action: 'insert', lines: [text] },\n            !0\n          ),\n          this.clonePos(end)\n        );\n      }),\n      (this.clippedPos = function (row, column) {\n        let length = this.getLength();\n        void 0 === row\n          ? (row = length)\n          : 0 > row\n            ? (row = 0)\n            : row >= length && ((row = length - 1), (column = void 0));\n        let line = this.getLine(row);\n        return (\n          void 0 == column && (column = line.length),\n          (column = Math.min(Math.max(column, 0), line.length)),\n          { row: row, column: column }\n        );\n      }),\n      (this.clonePos = function (pos) {\n        return { row: pos.row, column: pos.column };\n      }),\n      (this.pos = function (row, column) {\n        return { row: row, column: column };\n      }),\n      (this.$clipPosition = function (position) {\n        let length = this.getLength();\n        return (\n          position.row >= length\n            ? ((position.row = Math.max(0, length - 1)),\n              (position.column = this.getLine(length - 1).length))\n            : ((position.row = Math.max(0, position.row)),\n              (position.column = Math.min(\n                Math.max(position.column, 0),\n                this.getLine(position.row).length\n              ))),\n          position\n        );\n      }),\n      (this.insertFullLines = function (row, lines) {\n        row = Math.min(Math.max(row, 0), this.getLength());\n        let column = 0;\n        this.getLength() > row\n          ? ((lines = lines.concat([''])), (column = 0))\n          : ((lines = [''].concat(lines)),\n            row--,\n            (column = this.$lines[row].length)),\n        this.insertMergedLines({ row: row, column: column }, lines);\n      }),\n      (this.insertMergedLines = function (position, lines) {\n        let start = this.clippedPos(position.row, position.column),\n          end = {\n            row: start.row + lines.length - 1,\n            column:\n                  (1 == lines.length ? start.column : 0) +\n                  lines[lines.length - 1].length,\n          };\n        return (\n          this.applyDelta({\n            start: start,\n            end: end,\n            action: 'insert',\n            lines: lines,\n          }),\n          this.clonePos(end)\n        );\n      }),\n      (this.remove = function (range) {\n        let start = this.clippedPos(range.start.row, range.start.column),\n          end = this.clippedPos(range.end.row, range.end.column);\n        return (\n          this.applyDelta({\n            start: start,\n            end: end,\n            action: 'remove',\n            lines: this.getLinesForRange({ start: start, end: end }),\n          }),\n          this.clonePos(start)\n        );\n      }),\n      (this.removeInLine = function (row, startColumn, endColumn) {\n        let start = this.clippedPos(row, startColumn),\n          end = this.clippedPos(row, endColumn);\n        return (\n          this.applyDelta(\n            {\n              start: start,\n              end: end,\n              action: 'remove',\n              lines: this.getLinesForRange({ start: start, end: end }),\n            },\n            !0\n          ),\n          this.clonePos(start)\n        );\n      }),\n      (this.removeFullLines = function (firstRow, lastRow) {\n        (firstRow = Math.min(Math.max(0, firstRow), this.getLength() - 1)),\n        (lastRow = Math.min(Math.max(0, lastRow), this.getLength() - 1));\n        let deleteFirstNewLine =\n                lastRow == this.getLength() - 1 && firstRow > 0,\n          deleteLastNewLine = this.getLength() - 1 > lastRow,\n          startRow = deleteFirstNewLine ? firstRow - 1 : firstRow,\n          startCol = deleteFirstNewLine ? this.getLine(startRow).length : 0,\n          endRow = deleteLastNewLine ? lastRow + 1 : lastRow,\n          endCol = deleteLastNewLine ? 0 : this.getLine(endRow).length,\n          range = new Range(startRow, startCol, endRow, endCol),\n          deletedLines = this.$lines.slice(firstRow, lastRow + 1);\n        return (\n          this.applyDelta({\n            start: range.start,\n            end: range.end,\n            action: 'remove',\n            lines: this.getLinesForRange(range),\n          }),\n          deletedLines\n        );\n      }),\n      (this.removeNewLine = function (row) {\n        this.getLength() - 1 > row &&\n              row >= 0 &&\n              this.applyDelta({\n                start: this.pos(row, this.getLine(row).length),\n                end: this.pos(row + 1, 0),\n                action: 'remove',\n                lines: ['', ''],\n              });\n      }),\n      (this.replace = function (range, text) {\n        if (\n          (range instanceof Range ||\n                (range = Range.fromPoints(range.start, range.end)),\n            0 === text.length && range.isEmpty())\n        )\n          {return range.start;}\n        if (text == this.getTextRange(range)) return range.end;\n        this.remove(range);\n        let end;\n        return (end = text ? this.insert(range.start, text) : range.start);\n      }),\n      (this.applyDeltas = function (deltas) {\n        for (let i = 0; deltas.length > i; i++) this.applyDelta(deltas[i]);\n      }),\n      (this.revertDeltas = function (deltas) {\n        for (let i = deltas.length - 1; i >= 0; i--)\n          {this.revertDelta(deltas[i]);}\n      }),\n      (this.applyDelta = function (delta, doNotValidate) {\n        let isInsert = 'insert' == delta.action;\n        (isInsert\n          ? 1 >= delta.lines.length && !delta.lines[0]\n          : !Range.comparePoints(delta.start, delta.end)) ||\n              (isInsert &&\n                delta.lines.length > 2e4 &&\n                this.$splitAndapplyLargeDelta(delta, 2e4),\n                applyDelta(this.$lines, delta, doNotValidate),\n                this._signal('change', delta));\n      }),\n      (this.$splitAndapplyLargeDelta = function (delta, MAX) {\n        for (\n          let lines = delta.lines,\n            l = lines.length,\n            row = delta.start.row,\n            column = delta.start.column,\n            from = 0,\n            to = 0;\n          ;\n\n        ) {\n          (from = to), (to += MAX - 1);\n          let chunk = lines.slice(from, to);\n          if (to > l) {\n            (delta.lines = chunk),\n            (delta.start.row = row + from),\n            (delta.start.column = column);\n            break;\n          }\n          chunk.push(''),\n          this.applyDelta(\n            {\n              start: this.pos(row + from, column),\n              end: this.pos(row + to, (column = 0)),\n              action: delta.action,\n              lines: chunk,\n            },\n            !0\n          );\n        }\n      }),\n      (this.revertDelta = function (delta) {\n        this.applyDelta({\n          start: this.clonePos(delta.start),\n          end: this.clonePos(delta.end),\n          action: 'insert' == delta.action ? 'remove' : 'insert',\n          lines: delta.lines.slice(),\n        });\n      }),\n      (this.indexToPosition = function (index, startRow) {\n        for (\n          var lines = this.$lines || this.getAllLines(),\n            newlineLength = this.getNewLineCharacter().length,\n            i = startRow || 0,\n            l = lines.length;\n          l > i;\n          i++\n        )\n          {if (((index -= lines[i].length + newlineLength), 0 > index))\n                return {\n                  row: i,\n                  column: index + lines[i].length + newlineLength,\n                };}\n        return { row: l - 1, column: lines[l - 1].length };\n      }),\n      (this.positionToIndex = function (pos, startRow) {\n        for (\n          var lines = this.$lines || this.getAllLines(),\n            newlineLength = this.getNewLineCharacter().length,\n            index = 0,\n            row = Math.min(pos.row, lines.length),\n            i = startRow || 0;\n          row > i;\n          ++i\n        )\n          {index += lines[i].length + newlineLength;}\n        return index + pos.column;\n      });\n    }.call(Document.prototype),\n      (exports.Document = Document));\n  }\n),\nace.define('ace/lib/lang', ['require', 'exports', 'module'], function (\n  acequire,\n  exports\n) {\n  \n  (exports.last = function (a) {\n    return a[a.length - 1];\n  }),\n  (exports.stringReverse = function (string) {\n    return string\n      .split('')\n      .reverse()\n      .join('');\n  }),\n  (exports.stringRepeat = function (string, count) {\n    for (var result = ''; count > 0;)\n      {1 & count && (result += string), (count >>= 1) && (string += string);}\n    return result;\n  });\n  let trimBeginRegexp = /^\\s\\s*/,\n    trimEndRegexp = /\\s\\s*$/;\n  (exports.stringTrimLeft = function (string) {\n    return string.replace(trimBeginRegexp, '');\n  }),\n  (exports.stringTrimRight = function (string) {\n    return string.replace(trimEndRegexp, '');\n  }),\n  (exports.copyObject = function (obj) {\n    let copy = {};\n    for (let key in obj) copy[key] = obj[key];\n    return copy;\n  }),\n  (exports.copyArray = function (array) {\n    for (var copy = [], i = 0, l = array.length; l > i; i++)\n      {copy[i] =\n            array[i] && 'object' == typeof array[i]\n              ? this.copyObject(array[i])\n              : array[i];}\n    return copy;\n  }),\n  (exports.deepCopy = function deepCopy(obj) {\n    if ('object' !== typeof obj || !obj) return obj;\n    let copy;\n    if (Array.isArray(obj)) {\n      copy = [];\n      for (var key = 0; obj.length > key; key++)\n        {copy[key] = deepCopy(obj[key]);}\n      return copy;\n    }\n    if ('[object Object]' !== Object.prototype.toString.call(obj))\n      {return obj;}\n    copy = {};\n    for (var key in obj) copy[key] = deepCopy(obj[key]);\n    return copy;\n  }),\n  (exports.arrayToMap = function (arr) {\n    for (var map = {}, i = 0; arr.length > i; i++) map[arr[i]] = 1;\n    return map;\n  }),\n  (exports.createMap = function (props) {\n    let map = Object.create(null);\n    for (let i in props) map[i] = props[i];\n    return map;\n  }),\n  (exports.arrayRemove = function (array, value) {\n    for (let i = 0; array.length >= i; i++)\n      {value === array[i] && array.splice(i, 1);}\n  }),\n  (exports.escapeRegExp = function (str) {\n    return str.replace(/([.*+?^${}()|[\\]\\/\\\\])/g, '\\\\$1');\n  }),\n  (exports.escapeHTML = function (str) {\n    return str\n      .replace(/&/g, '&#38;')\n      .replace(/\"/g, '&#34;')\n      .replace(/'/g, '&#39;')\n      .replace(/</g, '&#60;');\n  }),\n  (exports.getMatchOffsets = function (string, regExp) {\n    let matches = [];\n    return (\n      string.replace(regExp, function (str) {\n        matches.push({\n          offset: arguments[arguments.length - 2],\n          length: str.length,\n        });\n      }),\n      matches\n    );\n  }),\n  (exports.deferredCall = function (fcn) {\n    var timer = null,\n      callback = function () {\n        (timer = null), fcn();\n      },\n      deferred = function (timeout) {\n        return (\n          deferred.cancel(),\n          (timer = setTimeout(callback, timeout || 0)),\n          deferred\n        );\n      };\n    return (\n      (deferred.schedule = deferred),\n      (deferred.call = function () {\n        return this.cancel(), fcn(), deferred;\n      }),\n      (deferred.cancel = function () {\n        return clearTimeout(timer), (timer = null), deferred;\n      }),\n      (deferred.isPending = function () {\n        return timer;\n      }),\n      deferred\n    );\n  }),\n  (exports.delayedCall = function (fcn, defaultTimeout) {\n    let timer = null,\n      callback = function () {\n        (timer = null), fcn();\n      },\n      _self = function (timeout) {\n        null == timer &&\n              (timer = setTimeout(callback, timeout || defaultTimeout));\n      };\n    return (\n      (_self.delay = function (timeout) {\n        timer && clearTimeout(timer),\n        (timer = setTimeout(callback, timeout || defaultTimeout));\n      }),\n      (_self.schedule = _self),\n      (_self.call = function () {\n        this.cancel(), fcn();\n      }),\n      (_self.cancel = function () {\n        timer && clearTimeout(timer), (timer = null);\n      }),\n      (_self.isPending = function () {\n        return timer;\n      }),\n      _self\n    );\n  });\n}),\nace.define(\n  'ace/worker/mirror',\n  [\n    'require',\n    'exports',\n    'module',\n    'ace/range',\n    'ace/document',\n    'ace/lib/lang',\n  ],\n  function (acequire, exports) {\n    \n    acequire('../range').Range;\n    let Document = acequire('../document').Document,\n      lang = acequire('../lib/lang'),\n      Mirror = (exports.Mirror = function (sender) {\n        this.sender = sender;\n        let doc = (this.doc = new Document('')),\n          deferredUpdate = (this.deferredUpdate = lang.delayedCall(\n            this.onUpdate.bind(this)\n          )),\n          _self = this;\n        sender.on('change', function (e) {\n          let data = e.data;\n          if (data[0].start) doc.applyDeltas(data);\n          else\n            {for (var i = 0; data.length > i; i += 2) {\n                if (Array.isArray(data[i + 1]))\n                  var d = {\n                    action: 'insert',\n                    start: data[i],\n                    lines: data[i + 1],\n                  };\n                else\n                  var d = {\n                    action: 'remove',\n                    start: data[i],\n                    end: data[i + 1],\n                  };\n                doc.applyDelta(d, !0);\n              }}\n          return _self.$timeout\n            ? deferredUpdate.schedule(_self.$timeout)\n            : (_self.onUpdate(), void 0);\n        });\n      });\n    (function () {\n      (this.$timeout = 500),\n      (this.setTimeout = function (timeout) {\n        this.$timeout = timeout;\n      }),\n      (this.setValue = function (value) {\n        this.doc.setValue(value),\n        this.deferredUpdate.schedule(this.$timeout);\n      }),\n      (this.getValue = function (callbackId) {\n        this.sender.callback(this.doc.getValue(), callbackId);\n      }),\n      (this.onUpdate = function () {}),\n      (this.isPending = function () {\n        return this.deferredUpdate.isPending();\n      });\n    }.call(Mirror.prototype));\n  }\n),\nace.define('ace/lib/es5-shim', ['require', 'exports', 'module'], function () {\n  function Empty() {}\n  function doesDefinePropertyWork(object) {\n    try {\n      return (\n        Object.defineProperty(object, 'sentinel', {}), 'sentinel' in object\n      );\n    } catch (exception) {}\n  }\n  function toInteger(n) {\n    return (\n      (n = +n),\n      n !== n\n        ? (n = 0)\n        : 0 !== n &&\n            n !== 1 / 0 &&\n            n !== -(1 / 0) &&\n            (n = (n > 0 || -1) * Math.floor(Math.abs(n))),\n      n\n    );\n  }\n  Function.prototype.bind ||\n      (Function.prototype.bind = function (that) {\n        let target = this;\n        if ('function' !== typeof target)\n          {throw new TypeError(\n            'Function.prototype.bind called on incompatible ' + target\n          );}\n        var args = slice.call(arguments, 1),\n          bound = function () {\n            if (this instanceof bound) {\n              let result = target.apply(\n                this,\n                args.concat(slice.call(arguments))\n              );\n              return Object(result) === result ? result : this;\n            }\n            return target.apply(that, args.concat(slice.call(arguments)));\n          };\n        return (\n          target.prototype &&\n            ((Empty.prototype = target.prototype),\n              (bound.prototype = new Empty()),\n              (Empty.prototype = null)),\n          bound\n        );\n      });\n  var defineGetter,\n    defineSetter,\n    lookupGetter,\n    lookupSetter,\n    supportsAccessors,\n    call = Function.prototype.call,\n    prototypeOfArray = Array.prototype,\n    prototypeOfObject = Object.prototype,\n    slice = prototypeOfArray.slice,\n    _toString = call.bind(prototypeOfObject.toString),\n    owns = call.bind(prototypeOfObject.hasOwnProperty);\n  if (\n    ((supportsAccessors = owns(prototypeOfObject, '__defineGetter__')) &&\n        ((defineGetter = call.bind(prototypeOfObject.__defineGetter__)),\n          (defineSetter = call.bind(prototypeOfObject.__defineSetter__)),\n          (lookupGetter = call.bind(prototypeOfObject.__lookupGetter__)),\n          (lookupSetter = call.bind(prototypeOfObject.__lookupSetter__))),\n      2 != [1, 2].splice(0).length)\n  )\n    {if (\n        (function() {\n          function makeArray(l) {\n            var a = Array(l + 2);\n            return (a[0] = a[1] = 0), a;\n          }\n          var lengthBefore,\n            array = [];\n          return (\n            array.splice.apply(array, makeArray(20)),\n            array.splice.apply(array, makeArray(26)),\n            (lengthBefore = array.length),\n            array.splice(5, 0, 'XXX'),\n            lengthBefore + 1 == array.length,\n            lengthBefore + 1 == array.length ? !0 : void 0\n          );\n        })()\n      ) {\n        var array_splice = Array.prototype.splice;\n        Array.prototype.splice = function(start, deleteCount) {\n          return arguments.length\n            ? array_splice.apply(\n                this,\n                [\n                  void 0 === start ? 0 : start,\n                  void 0 === deleteCount ? this.length - start : deleteCount,\n                ].concat(slice.call(arguments, 2))\n              )\n            : [];\n        };\n      } else\n        Array.prototype.splice = function(pos, removeCount) {\n          var length = this.length;\n          pos > 0\n            ? pos > length && (pos = length)\n            : void 0 == pos\n              ? (pos = 0)\n              : 0 > pos && (pos = Math.max(length + pos, 0)),\n            length > pos + removeCount || (removeCount = length - pos);\n          var removed = this.slice(pos, pos + removeCount),\n            insert = slice.call(arguments, 2),\n            add = insert.length;\n          if (pos === length) add && this.push.apply(this, insert);\n          else {\n            var remove = Math.min(removeCount, length - pos),\n              tailOldPos = pos + remove,\n              tailNewPos = tailOldPos + add - remove,\n              tailCount = length - tailOldPos,\n              lengthAfterRemove = length - remove;\n            if (tailOldPos > tailNewPos)\n              for (var i = 0; tailCount > i; ++i)\n                this[tailNewPos + i] = this[tailOldPos + i];\n            else if (tailNewPos > tailOldPos)\n              for (i = tailCount; i--; )\n                this[tailNewPos + i] = this[tailOldPos + i];\n            if (add && pos === lengthAfterRemove)\n              (this.length = lengthAfterRemove), this.push.apply(this, insert);\n            else\n              for (this.length = lengthAfterRemove + add, i = 0; add > i; ++i)\n                this[pos + i] = insert[i];\n          }\n          return removed;\n        };}\n  Array.isArray ||\n      (Array.isArray = function (obj) {\n        return '[object Array]' == _toString(obj);\n      });\n  let boxedString = Object('a'),\n    splitString = 'a' != boxedString[0] || !(0 in boxedString);\n  if (\n    (Array.prototype.forEach ||\n        (Array.prototype.forEach = function (fun) {\n          let object = toObject(this),\n            self =\n              splitString && '[object String]' == _toString(this)\n                ? this.split('')\n                : object,\n            thisp = arguments[1],\n            i = -1,\n            length = self.length >>> 0;\n          if ('[object Function]' != _toString(fun)) throw new TypeError();\n          for (; length > ++i;)\n            {i in self && fun.call(thisp, self[i], i, object);}\n        }),\n      Array.prototype.map ||\n        (Array.prototype.map = function (fun) {\n          let object = toObject(this),\n            self =\n              splitString && '[object String]' == _toString(this)\n                ? this.split('')\n                : object,\n            length = self.length >>> 0,\n            result = Array(length),\n            thisp = arguments[1];\n          if ('[object Function]' != _toString(fun))\n            {throw new TypeError(fun + ' is not a function');}\n          for (let i = 0; length > i; i++)\n            {i in self && (result[i] = fun.call(thisp, self[i], i, object));}\n          return result;\n        }),\n      Array.prototype.filter ||\n        (Array.prototype.filter = function (fun) {\n          let value,\n            object = toObject(this),\n            self =\n              splitString && '[object String]' == _toString(this)\n                ? this.split('')\n                : object,\n            length = self.length >>> 0,\n            result = [],\n            thisp = arguments[1];\n          if ('[object Function]' != _toString(fun))\n            {throw new TypeError(fun + ' is not a function');}\n          for (let i = 0; length > i; i++)\n            {i in self &&\n              ((value = self[i]),\n              fun.call(thisp, value, i, object) && result.push(value));}\n          return result;\n        }),\n      Array.prototype.every ||\n        (Array.prototype.every = function (fun) {\n          let object = toObject(this),\n            self =\n              splitString && '[object String]' == _toString(this)\n                ? this.split('')\n                : object,\n            length = self.length >>> 0,\n            thisp = arguments[1];\n          if ('[object Function]' != _toString(fun))\n            {throw new TypeError(fun + ' is not a function');}\n          for (let i = 0; length > i; i++)\n            {if (i in self && !fun.call(thisp, self[i], i, object)) return !1;}\n          return !0;\n        }),\n      Array.prototype.some ||\n        (Array.prototype.some = function (fun) {\n          let object = toObject(this),\n            self =\n              splitString && '[object String]' == _toString(this)\n                ? this.split('')\n                : object,\n            length = self.length >>> 0,\n            thisp = arguments[1];\n          if ('[object Function]' != _toString(fun))\n            {throw new TypeError(fun + ' is not a function');}\n          for (let i = 0; length > i; i++)\n            {if (i in self && fun.call(thisp, self[i], i, object)) return !0;}\n          return !1;\n        }),\n      Array.prototype.reduce ||\n        (Array.prototype.reduce = function (fun) {\n          let object = toObject(this),\n            self =\n              splitString && '[object String]' == _toString(this)\n                ? this.split('')\n                : object,\n            length = self.length >>> 0;\n          if ('[object Function]' != _toString(fun))\n            {throw new TypeError(fun + ' is not a function');}\n          if (!length && 1 == arguments.length)\n            {throw new TypeError('reduce of empty array with no initial value');}\n          let result,\n            i = 0;\n          if (arguments.length >= 2) result = arguments[1];\n          else\n            {for (;;) {\n              if (i in self) {\n                result = self[i++];\n                break;\n              }\n              if (++i >= length)\n                throw new TypeError(\n                  'reduce of empty array with no initial value'\n                );\n            }}\n          for (; length > i; i++)\n            {i in self &&\n              (result = fun.call(void 0, result, self[i], i, object));}\n          return result;\n        }),\n      Array.prototype.reduceRight ||\n        (Array.prototype.reduceRight = function (fun) {\n          let object = toObject(this),\n            self =\n              splitString && '[object String]' == _toString(this)\n                ? this.split('')\n                : object,\n            length = self.length >>> 0;\n          if ('[object Function]' != _toString(fun))\n            {throw new TypeError(fun + ' is not a function');}\n          if (!length && 1 == arguments.length)\n            {throw new TypeError(\n              'reduceRight of empty array with no initial value'\n            );}\n          let result,\n            i = length - 1;\n          if (arguments.length >= 2) result = arguments[1];\n          else\n            {for (;;) {\n              if (i in self) {\n                result = self[i--];\n                break;\n              }\n              if (0 > --i)\n                throw new TypeError(\n                  'reduceRight of empty array with no initial value'\n                );\n            }}\n          do\n            {i in this &&\n              (result = fun.call(void 0, result, self[i], i, object));}\n          while (i--);\n          return result;\n        }),\n      (Array.prototype.indexOf && -1 == [0, 1].indexOf(1, 2)) ||\n        (Array.prototype.indexOf = function (sought) {\n          let self =\n              splitString && '[object String]' == _toString(this)\n                ? this.split('')\n                : toObject(this),\n            length = self.length >>> 0;\n          if (!length) return -1;\n          let i = 0;\n          for (\n            arguments.length > 1 && (i = toInteger(arguments[1])),\n            i = i >= 0 ? i : Math.max(0, length + i);\n            length > i;\n            i++\n          )\n            {if (i in self && self[i] === sought) return i;}\n          return -1;\n        }),\n      (Array.prototype.lastIndexOf && -1 == [0, 1].lastIndexOf(0, -3)) ||\n        (Array.prototype.lastIndexOf = function (sought) {\n          let self =\n              splitString && '[object String]' == _toString(this)\n                ? this.split('')\n                : toObject(this),\n            length = self.length >>> 0;\n          if (!length) return -1;\n          let i = length - 1;\n          for (\n            arguments.length > 1 && (i = Math.min(i, toInteger(arguments[1]))),\n            i = i >= 0 ? i : length - Math.abs(i);\n            i >= 0;\n            i--\n          )\n            {if (i in self && sought === self[i]) return i;}\n          return -1;\n        }),\n      Object.getPrototypeOf ||\n        (Object.getPrototypeOf = function (object) {\n          return (\n            object.__proto__ ||\n            (object.constructor\n              ? object.constructor.prototype\n              : prototypeOfObject)\n          );\n        }),\n      !Object.getOwnPropertyDescriptor)\n  ) {\n    let ERR_NON_OBJECT =\n        'Object.getOwnPropertyDescriptor called on a non-object: ';\n    Object.getOwnPropertyDescriptor = function (object, property) {\n      if (\n        ('object' !== typeof object && 'function' !== typeof object) ||\n          null === object\n      )\n        {throw new TypeError(ERR_NON_OBJECT + object);}\n      if (owns(object, property)) {\n        var descriptor, getter, setter;\n        if (\n          ((descriptor = { enumerable: !0, configurable: !0 }),\n            supportsAccessors)\n        ) {\n          let prototype = object.__proto__;\n          object.__proto__ = prototypeOfObject;\n          var getter = lookupGetter(object, property),\n            setter = lookupSetter(object, property);\n          if (((object.__proto__ = prototype), getter || setter))\n            {return (\n                getter && (descriptor.get = getter),\n                setter && (descriptor.set = setter),\n                descriptor\n              );}\n        }\n        return (descriptor.value = object[property]), descriptor;\n      }\n    };\n  }\n  if (\n    (Object.getOwnPropertyNames ||\n        (Object.getOwnPropertyNames = function (object) {\n          return Object.keys(object);\n        }),\n      !Object.create)\n  ) {\n    let createEmpty;\n    (createEmpty =\n        null === Object.prototype.__proto__\n          ? function () {\n            return { __proto__: null };\n          }\n          : function () {\n            let empty = {};\n            for (let i in empty) empty[i] = null;\n            return (\n              (empty.constructor = empty.hasOwnProperty = empty.propertyIsEnumerable = empty.isPrototypeOf = empty.toLocaleString = empty.toString = empty.valueOf = empty.__proto__ = null),\n              empty\n            );\n          }),\n    (Object.create = function (prototype, properties) {\n      let object;\n      if (null === prototype) object = createEmpty();\n      else {\n        if ('object' !== typeof prototype)\n          {throw new TypeError(\n                'typeof prototype[' + typeof prototype + \"] != 'object'\"\n              );}\n        let Type = function () {};\n        (Type.prototype = prototype),\n        (object = new Type()),\n        (object.__proto__ = prototype);\n      }\n      return (\n        void 0 !== properties &&\n              Object.defineProperties(object, properties),\n        object\n      );\n    });\n  }\n  if (Object.defineProperty) {\n    let definePropertyWorksOnObject = doesDefinePropertyWork({}),\n      definePropertyWorksOnDom =\n          'undefined' === typeof document ||\n          doesDefinePropertyWork(document.createElement('div'));\n    if (!definePropertyWorksOnObject || !definePropertyWorksOnDom)\n      {var definePropertyFallback = Object.defineProperty;}\n  }\n  if (!Object.defineProperty || definePropertyFallback) {\n    let ERR_NON_OBJECT_DESCRIPTOR =\n          'Property description must be an object: ',\n      ERR_NON_OBJECT_TARGET = 'Object.defineProperty called on non-object: ',\n      ERR_ACCESSORS_NOT_SUPPORTED =\n          'getters & setters can not be defined on this javascript engine';\n    Object.defineProperty = function (object, property, descriptor) {\n      if (\n        ('object' !== typeof object && 'function' !== typeof object) ||\n          null === object\n      )\n        {throw new TypeError(ERR_NON_OBJECT_TARGET + object);}\n      if (\n        ('object' !== typeof descriptor && 'function' !== typeof descriptor) ||\n          null === descriptor\n      )\n        {throw new TypeError(ERR_NON_OBJECT_DESCRIPTOR + descriptor);}\n      if (definePropertyFallback)\n        {try {\n            return definePropertyFallback.call(\n              Object,\n              object,\n              property,\n              descriptor\n            );\n          } catch (exception) {}}\n      if (owns(descriptor, 'value'))\n        {if (\n            supportsAccessors &&\n            (lookupGetter(object, property) || lookupSetter(object, property))\n          ) {\n            var prototype = object.__proto__;\n            (object.__proto__ = prototypeOfObject),\n              delete object[property],\n              (object[property] = descriptor.value),\n              (object.__proto__ = prototype);\n          } else object[property] = descriptor.value;}\n      else {\n        if (!supportsAccessors)\n          {throw new TypeError(ERR_ACCESSORS_NOT_SUPPORTED);}\n        owns(descriptor, 'get') &&\n            defineGetter(object, property, descriptor.get),\n        owns(descriptor, 'set') &&\n              defineSetter(object, property, descriptor.set);\n      }\n      return object;\n    };\n  }\n  Object.defineProperties ||\n      (Object.defineProperties = function (object, properties) {\n        for (let property in properties)\n          {owns(properties, property) &&\n            Object.defineProperty(object, property, properties[property]);}\n        return object;\n      }),\n  Object.seal ||\n        (Object.seal = function (object) {\n          return object;\n        }),\n  Object.freeze ||\n        (Object.freeze = function (object) {\n          return object;\n        });\n  try {\n    Object.freeze(function () {});\n  } catch (exception) {\n    Object.freeze = (function (freezeObject) {\n      return function (object) {\n        return 'function' === typeof object ? object : freezeObject(object);\n      };\n    }(Object.freeze));\n  }\n  if (\n    (Object.preventExtensions ||\n        (Object.preventExtensions = function (object) {\n          return object;\n        }),\n      Object.isSealed ||\n        (Object.isSealed = function () {\n          return !1;\n        }),\n      Object.isFrozen ||\n        (Object.isFrozen = function () {\n          return !1;\n        }),\n      Object.isExtensible ||\n        (Object.isExtensible = function (object) {\n          if (Object(object) === object) throw new TypeError();\n          for (var name = ''; owns(object, name);) name += '?';\n          object[name] = !0;\n          let returnValue = owns(object, name);\n          return delete object[name], returnValue;\n        }),\n      !Object.keys)\n  ) {\n    let hasDontEnumBug = !0,\n      dontEnums = [\n        'toString',\n        'toLocaleString',\n        'valueOf',\n        'hasOwnProperty',\n        'isPrototypeOf',\n        'propertyIsEnumerable',\n        'constructor',\n      ],\n      dontEnumsLength = dontEnums.length;\n    for (let key in { toString: null }) hasDontEnumBug = !1;\n    Object.keys = function (object) {\n      if (\n        ('object' !== typeof object && 'function' !== typeof object) ||\n          null === object\n      )\n        {throw new TypeError('Object.keys called on a non-object');}\n      let keys = [];\n      for (let name in object) owns(object, name) && keys.push(name);\n      if (hasDontEnumBug)\n        {for (var i = 0, ii = dontEnumsLength; ii > i; i++) {\n            var dontEnum = dontEnums[i];\n            owns(object, dontEnum) && keys.push(dontEnum);\n          }}\n      return keys;\n    };\n  }\n  Date.now ||\n      (Date.now = function () {\n        return new Date().getTime();\n      });\n  let ws = '\t\\nv\\f\\r \\u2028\\u2029\ufeff';\n  if (!String.prototype.trim || ws.trim()) {\n    ws = '[' + ws + ']';\n    let trimBeginRegexp = RegExp('^' + ws + ws + '*'),\n      trimEndRegexp = RegExp(ws + ws + '*$');\n    String.prototype.trim = function () {\n      return (this + '')\n        .replace(trimBeginRegexp, '')\n        .replace(trimEndRegexp, '');\n    };\n  }\n  var toObject = function (o) {\n    if (null == o) throw new TypeError('can\\'t convert ' + o + ' to object');\n    return Object(o);\n  };\n});\nace.define(\n  'sense_editor/mode/worker_parser',\n  ['require', 'exports', 'module'],\n  function () {\n    let at, // The index of the current character\n      ch, // The current character\n      annos, // annotations\n      escapee = {\n        '\"': '\"',\n        '\\\\': '\\\\',\n        '/': '/',\n        b: '\\b',\n        f: '\\f',\n        n: '\\n',\n        r: '\\r',\n        t: '\\t',\n      },\n      text,\n      annotate = function (type, text) {\n        annos.push({ type: type, text: text, at: at });\n      },\n      error = function (m) {\n        throw {\n          name: 'SyntaxError',\n          message: m,\n          at: at,\n          text: text,\n        };\n      },\n      reset = function (newAt) {\n        ch = text.charAt(newAt);\n        at = newAt + 1;\n      },\n      next = function (c) {\n        if (c && c !== ch) {\n          error('Expected \\'' + c + '\\' instead of \\'' + ch + '\\'');\n        }\n\n        ch = text.charAt(at);\n        at += 1;\n        return ch;\n      },\n      nextUpTo = function (upTo, errorMessage) {\n        let currentAt = at,\n          i = text.indexOf(upTo, currentAt);\n        if (i < 0) {\n          error(errorMessage || 'Expected \\'' + upTo + '\\'');\n        }\n        reset(i + upTo.length);\n        return text.substring(currentAt, i);\n      },\n      peek = function (c) {\n        return text.substr(at, c.length) === c; // nocommit - double check\n      },\n      number = function () {\n        let number,\n          string = '';\n\n        if (ch === '-') {\n          string = '-';\n          next('-');\n        }\n        while (ch >= '0' && ch <= '9') {\n          string += ch;\n          next();\n        }\n        if (ch === '.') {\n          string += '.';\n          while (next() && ch >= '0' && ch <= '9') {\n            string += ch;\n          }\n        }\n        if (ch === 'e' || ch === 'E') {\n          string += ch;\n          next();\n          if (ch === '-' || ch === '+') {\n            string += ch;\n            next();\n          }\n          while (ch >= '0' && ch <= '9') {\n            string += ch;\n            next();\n          }\n        }\n        number = +string;\n        if (isNaN(number)) {\n          error('Bad number');\n        } else {\n          return number;\n        }\n      },\n      string = function () {\n        let hex,\n          i,\n          string = '',\n          uffff;\n\n        if (ch === '\"') {\n          if (peek('\"\"')) {\n            // literal\n            next('\"');\n            next('\"');\n            return nextUpTo('\"\"\"', 'failed to find closing \\'\"\"\"\\'');\n          } else {\n            while (next()) {\n              if (ch === '\"') {\n                next();\n                return string;\n              } else if (ch === '\\\\') {\n                next();\n                if (ch === 'u') {\n                  uffff = 0;\n                  for (i = 0; i < 4; i += 1) {\n                    hex = parseInt(next(), 16);\n                    if (!isFinite(hex)) {\n                      break;\n                    }\n                    uffff = uffff * 16 + hex;\n                  }\n                  string += String.fromCharCode(uffff);\n                } else if (typeof escapee[ch] === 'string') {\n                  string += escapee[ch];\n                } else {\n                  break;\n                }\n              } else {\n                string += ch;\n              }\n            }\n          }\n        }\n        error('Bad string');\n      },\n      white = function () {\n        while (ch && ch <= ' ') {\n          next();\n        }\n      },\n      strictWhite = function () {\n        while (ch && (ch == ' ' || ch == '\\t')) {\n          next();\n        }\n      },\n      newLine = function () {\n        if (ch == '\\n') next();\n      },\n      word = function () {\n        switch (ch) {\n          case 't':\n            next('t');\n            next('r');\n            next('u');\n            next('e');\n            return true;\n          case 'f':\n            next('f');\n            next('a');\n            next('l');\n            next('s');\n            next('e');\n            return false;\n          case 'n':\n            next('n');\n            next('u');\n            next('l');\n            next('l');\n            return null;\n        }\n        error('Unexpected \\'' + ch + '\\'');\n      },\n      // parses and returns the method\n      method = function () {\n        switch (ch) {\n          case 'G':\n            next('G');\n            next('E');\n            next('T');\n            return 'GET';\n          case 'H':\n            next('H');\n            next('E');\n            next('A');\n            next('D');\n            return 'HEAD';\n          case 'D':\n            next('D');\n            next('E');\n            next('L');\n            next('E');\n            next('T');\n            next('E');\n            return 'DELETE';\n          case 'P':\n            next('P');\n            switch (ch) {\n              case 'U':\n                next('U');\n                next('T');\n                return 'PUT';\n              case 'O':\n                next('O');\n                next('S');\n                next('T');\n                return 'POST';\n              default:\n                error('Unexpected \\'' + ch + '\\'');\n            }\n            break;\n          default:\n            error('Expected one of GET/POST/PUT/DELETE/HEAD');\n        }\n      },\n      value, // Place holder for the value function.\n      array = function () {\n        const array = [];\n\n        if (ch === '[') {\n          next('[');\n          white();\n          if (ch === ']') {\n            next(']');\n            return array; // empty array\n          }\n          while (ch) {\n            array.push(value());\n            white();\n            if (ch === ']') {\n              next(']');\n              return array;\n            }\n            next(',');\n            white();\n          }\n        }\n        error('Bad array');\n      },\n      object = function () {\n        let key,\n          object = {};\n\n        if (ch === '{') {\n          next('{');\n          white();\n          if (ch === '}') {\n            next('}');\n            return object; // empty object\n          }\n          while (ch) {\n            key = string();\n            white();\n            next(':');\n            if (Object.hasOwnProperty.call(object, key)) {\n              error('Duplicate key \"' + key + '\"');\n            }\n            object[key] = value();\n            white();\n            if (ch === '}') {\n              next('}');\n              return object;\n            }\n            next(',');\n            white();\n          }\n        }\n        error('Bad object');\n      };\n\n    value = function () {\n      white();\n      switch (ch) {\n        case '{':\n          return object();\n        case '[':\n          return array();\n        case '\"':\n          return string();\n        case '-':\n          return number();\n        default:\n          return ch >= '0' && ch <= '9' ? number() : word();\n      }\n    };\n\n    let url = function () {\n        let url = '';\n        while (ch && ch != '\\n') {\n          url += ch;\n          next();\n        }\n        if (url == '') {\n          error('Missing url');\n        }\n        return url;\n      },\n      request = function () {\n        white();\n        method();\n        strictWhite();\n        url();\n        strictWhite(); // advance to one new line\n        newLine();\n        strictWhite();\n        if (ch == '{') {\n          object();\n        }\n        // multi doc request\n        strictWhite(); // advance to one new line\n        newLine();\n        strictWhite();\n        while (ch == '{') {\n          // another object\n          object();\n          strictWhite();\n          newLine();\n          strictWhite();\n        }\n      },\n      comment = function () {\n        while (ch == '#') {\n          while (ch && ch !== '\\n') {\n            next();\n          }\n          white();\n        }\n      },\n      multi_request = function () {\n        while (ch && ch != '') {\n          white();\n          if (!ch) {\n            continue;\n          }\n          try {\n            comment();\n            white();\n            if (!ch) {\n              continue;\n            }\n            request();\n            white();\n          } catch (e) {\n            annotate('error', e.message);\n            // snap\n            const substring = text.substr(at);\n            const nextMatch = substring.search(/^POST|HEAD|GET|PUT|DELETE/m);\n            if (nextMatch < 1) return;\n            reset(at + nextMatch);\n          }\n        }\n      };\n\n    return function (source, reviver) {\n      let result;\n\n      text = source;\n      at = 0;\n      annos = [];\n      next();\n      multi_request();\n      white();\n      if (ch) {\n        annotate('error', 'Syntax error');\n      }\n\n      result = { annotations: annos };\n\n      return typeof reviver === 'function'\n        ? (function walk(holder, key) {\n          let k,\n            v,\n            value = holder[key];\n          if (value && typeof value === 'object') {\n            for (k in value) {\n              if (Object.hasOwnProperty.call(value, k)) {\n                v = walk(value, k);\n                if (v !== undefined) {\n                  value[k] = v;\n                } else {\n                  delete value[k];\n                }\n              }\n            }\n          }\n          return reviver.call(holder, key, value);\n        }({ '': result }, ''))\n        : result;\n    };\n  }\n);\n\nace.define(\n  'sense_editor/mode/worker',\n  [\n    'require',\n    'exports',\n    'module',\n    'ace/lib/oop',\n    'ace/worker/mirror',\n    'sense_editor/mode/worker_parser',\n  ],\n  function (require, exports) {\n    const oop = require('ace/lib/oop');\n    const Mirror = require('ace/worker/mirror').Mirror;\n    const parse = require('sense_editor/mode/worker_parser');\n\n    const SenseWorker = (exports.SenseWorker = function (sender) {\n      Mirror.call(this, sender);\n      this.setTimeout(200);\n    });\n\n    oop.inherits(SenseWorker, Mirror);\n\n    (function () {\n      this.id = 'senseWorker';\n      this.onUpdate = function () {\n        const value = this.doc.getValue();\n        let pos, result;\n        try {\n          result = parse(value);\n        } catch (e) {\n          pos = this.charToDocumentPosition(e.at - 1);\n          this.sender.emit('error', {\n            row: pos.row,\n            column: pos.column,\n            text: e.message,\n            type: 'error',\n          });\n          return;\n        }\n        for (let i = 0; i < result.annotations.length; i++) {\n          pos = this.charToDocumentPosition(result.annotations[i].at - 1);\n          result.annotations[i].row = pos.row;\n          result.annotations[i].column = pos.column;\n        }\n        this.sender.emit('ok', result.annotations);\n      };\n\n      this.charToDocumentPosition = function (charPos) {\n        let i = 0;\n        const len = this.doc.getLength();\n        const nl = this.doc.getNewLineCharacter().length;\n\n        if (!len) {\n          return { row: 0, column: 0 };\n        }\n\n        let lineStart = 0,\n          line;\n        while (i < len) {\n          line = this.doc.getLine(i);\n          const lineLength = line.length + nl;\n          if (lineStart + lineLength > charPos) {\n            return {\n              row: i,\n              column: charPos - lineStart,\n            };\n          }\n\n          lineStart += lineLength;\n          i += 1;\n        }\n\n        return {\n          row: i - 1,\n          column: line.length,\n        };\n      };\n    }.call(SenseWorker.prototype));\n  }\n);\n"},6045:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ScriptMode=ScriptMode;var _brace=_interopRequireDefault(__webpack_require__(201));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var oop=_brace["default"].acequire("ace/lib/oop");var TextMode=_brace["default"].acequire("ace/mode/text").Mode;var MatchingBraceOutdent=_brace["default"].acequire("ace/mode/matching_brace_outdent").MatchingBraceOutdent;var CstyleBehaviour=_brace["default"].acequire("ace/mode/behaviour/cstyle").CstyleBehaviour;var CStyleFoldMode=_brace["default"].acequire("ace/mode/folding/cstyle").FoldMode;_brace["default"].acequire("ace/tokenizer");var ScriptHighlightRules=__webpack_require__(2029).ScriptHighlightRules;function ScriptMode(){this.$outdent=new MatchingBraceOutdent;this.$behaviour=new CstyleBehaviour;this.foldingRules=new CStyleFoldMode}oop.inherits(ScriptMode,TextMode);(function(){this.HighlightRules=ScriptHighlightRules;this.getNextLineIndent=function(state,line,tab){var indent=this.$getIndent(line);var match=line.match(/^.*[\{\[]\s*$/);if(match){indent+=tab}return indent};this.checkOutdent=function(state,line,input){return this.$outdent.checkOutdent(line,input)};this.autoOutdent=function(state,doc,row){this.$outdent.autoOutdent(doc,row)}}).call(ScriptMode.prototype)},6046:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.InputHighlightRules=InputHighlightRules;var _x_json_highlight_rules=__webpack_require__(2028);function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}var ace=__webpack_require__(201);var oop=ace.acequire("ace/lib/oop");var _ace$acequire=ace.acequire("ace/mode/text_highlight_rules"),TextHighlightRules=_ace$acequire.TextHighlightRules;function InputHighlightRules(){function mergeTokens(){return[].concat.apply([],arguments)}function addEOL(tokens,reg,nextIfEOL,normalNext){if(_typeof(reg)==="object"){reg=reg.source}return[{token:tokens.concat(["whitespace"]),regex:reg+"(\\s*)$",next:nextIfEOL},{token:tokens,regex:reg,next:normalNext}]}this.$rules={start:mergeTokens([{token:"warning",regex:"#!.*$"},{token:"comment",regex:/^#.*$/},{token:"paren.lparen",regex:"{",next:"json",push:true}],addEOL(["method"],/([a-zA-Z]+)/,"start","method_sep"),[{token:"whitespace",regex:"\\s+"},{token:"text",regex:".+?"}]),method_sep:mergeTokens(addEOL(["whitespace","url.protocol_host","url.slash"],/(\s+)(https?:\/\/[^?\/,]+)(\/)/,"start","url"),addEOL(["whitespace","url.protocol_host"],/(\s+)(https?:\/\/[^?\/,]+)/,"start","url"),addEOL(["whitespace","url.slash"],/(\s+)(\/)/,"start","url"),addEOL(["whitespace"],/(\s+)/,"start","url")),url:mergeTokens(addEOL(["url.part"],/([^?\/,\s]+)/,"start"),addEOL(["url.comma"],/(,)/,"start"),addEOL(["url.slash"],/(\/)/,"start"),addEOL(["url.questionmark"],/(\?)/,"start","urlParams")),urlParams:mergeTokens(addEOL(["url.param","url.equal","url.value"],/([^&=]+)(=)([^&]*)/,"start"),addEOL(["url.param"],/([^&=]+)/,"start"),addEOL(["url.amp"],/(&)/,"start"))};(0,_x_json_highlight_rules.addToRules)(this);if(this.constructor===InputHighlightRules){this.normalizeRules()}}oop.inherits(InputHighlightRules,TextHighlightRules)},6047:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=_default;var $=__webpack_require__(25);var storage=__webpack_require__(507);function _default(input,output){var $left=input.$el.parent();function readStoredEditorWidth(){return storage.get("editorWidth")}function storeEditorWidth(editorWidth){storage.set("editorWidth",editorWidth)}function setEditorWidth(editorWidth){storeEditorWidth(editorWidth);$left.width(editorWidth)}var $resizer=$("#ConAppResizer");$resizer.on("mousedown",function(event){$resizer.addClass("active");var startWidth=$left.width();var startX=event.pageX;input.resize.topRow=input.renderer.layerConfig.firstRow;output.resize.topRow=output.renderer.layerConfig.firstRow;function onMove(event){setEditorWidth(startWidth+event.pageX-startX)}$(document.body).on("mousemove",onMove).one("mouseup",function(){$resizer.removeClass("active");$(this).off("mousemove",onMove);input.resize();output.resize()})});var initialEditorWidth=readStoredEditorWidth();if(initialEditorWidth!=null){setEditorWidth(initialEditorWidth)}}module.exports=exports.default},6048:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=init;var $=__webpack_require__(25);var history=__webpack_require__(1022);var mappings=__webpack_require__(294);function init(input,output){var sourceLocation=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"stored";$(document.body).removeClass("fouc");function resetToValues(content){if(content!=null){input.update(content)}output.update("")}function setupAutosave(){var timer;var saveDelay=500;input.getSession().on("change",function onChange(){if(timer){timer=clearTimeout(timer)}timer=setTimeout(saveCurrentState,saveDelay)})}function saveCurrentState(){try{var content=input.getValue();history.updateCurrentState(content)}catch(e){console.log("Ignoring saving error: "+e)}}function loadSavedState(){var previousSaveState=history.getSavedEditorState();if(sourceLocation==="stored"){if(previousSaveState){resetToValues(previousSaveState.content)}else{resetToValues();input.autoIndent()}}else if(/^https?:\/\//.test(sourceLocation)){var loadFrom={url:sourceLocation,dataType:"text",kbnXsrfToken:false};if(/https?:\/\/api.github.com/.test(sourceLocation)){loadFrom.headers={Accept:"application/vnd.github.v3.raw"}}$.ajax(loadFrom).done(function(data){resetToValues(data);input.moveToNextRequestEdge(true);input.highlightCurrentRequestsAndUpdateActionBar();input.updateActionsBar()})}else{resetToValues()}input.moveToNextRequestEdge(true)}history.restoreFromHistory=function applyHistoryElem(req){var session=input.getSession();var pos=input.getCursorPosition();var prefix="";var suffix="\n";if(input.parser.isStartRequestRow(pos.row)){pos.column=0;suffix+="\n"}else if(input.parser.isEndRequestRow(pos.row)){var line=session.getLine(pos.row);pos.column=line.length;prefix="\n\n"}else if(input.parser.isInBetweenRequestsRow(pos.row)){pos.column=0}else{pos=input.nextRequestEnd(pos);prefix="\n\n"}var s=prefix+req.method+" "+req.endpoint;if(req.data){s+="\n"+req.data}s+=suffix;session.insert(pos,s);input.clearSelection();input.moveCursorTo(pos.row+prefix.length,0);input.focus()};setupAutosave();loadSavedState();mappings.retrieveAutoCompleteInfo()}module.exports=exports.default},6049:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.showWelcomePanel=showWelcomePanel;var _react=_interopRequireDefault(__webpack_require__(0));var _reactDom=_interopRequireDefault(__webpack_require__(27));var _i18n=__webpack_require__(28);var _welcome_panel=__webpack_require__(6050);var _storage=_interopRequireDefault(__webpack_require__(507));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var isOpen=false;function showWelcomePanel(){var onClose=function onClose(){if(!container)return;_reactDom["default"].unmountComponentAtNode(container);isOpen=false};var onDismiss=function onDismiss(){_storage["default"].set("version_welcome_shown","@@SENSE_REVISION");onClose()};var container=document.getElementById("consoleWelcomePanel");if(container&&!isOpen){isOpen=true;var element=_react["default"].createElement(_i18n.I18nContext,null,_react["default"].createElement(_welcome_panel.WelcomePanel,{onDismiss:onDismiss}));_reactDom["default"].render(element,container)}return onClose}},6050:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.WelcomePanel=WelcomePanel;var _react=_interopRequireDefault(__webpack_require__(0));var _react2=__webpack_require__(10);var _eui=__webpack_require__(2);var _editor_example=__webpack_require__(2032);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function WelcomePanel(props){return _react["default"].createElement(_eui.EuiFlyout,{onClose:props.onDismiss,"data-test-subj":"welcomePanel",size:"s"},_react["default"].createElement(_eui.EuiFlyoutHeader,{hasBorder:true},_react["default"].createElement(_eui.EuiTitle,{size:"m"},_react["default"].createElement("h2",null,_react["default"].createElement(_react2.FormattedMessage,{id:"console.welcomePage.pageTitle",defaultMessage:"Welcome to Console"})))),_react["default"].createElement(_eui.EuiFlyoutBody,null,_react["default"].createElement(_eui.EuiText,null,_react["default"].createElement("h4",null,_react["default"].createElement(_react2.FormattedMessage,{id:"console.welcomePage.quickIntroTitle",defaultMessage:"Quick intro to the UI"})),_react["default"].createElement("p",null,_react["default"].createElement(_react2.FormattedMessage,{id:"console.welcomePage.quickIntroDescription",defaultMessage:"The Console UI is split into two panes: an editor pane (left) and a response pane (right). Use the editor to type requests and submit them to Elasticsearch. The results will be displayed in the response pane on the right side."})),_react["default"].createElement("p",null,_react["default"].createElement(_react2.FormattedMessage,{id:"console.welcomePage.supportedRequestFormatTitle",defaultMessage:"Console understands requests in a compact format, similar to cURL:"})),_react["default"].createElement(_editor_example.EditorExample,{panel:"welcome"}),_react["default"].createElement("p",null,_react["default"].createElement(_react2.FormattedMessage,{id:"console.welcomePage.supportedRequestFormatDescription",defaultMessage:"While typing a request, Console will make suggestions which you can then accept by hitting Enter/Tab. These suggestions are made based on the request structure as well as your indices and types."})),_react["default"].createElement("h4",null,_react["default"].createElement(_react2.FormattedMessage,{id:"console.welcomePage.quickTipsTitle",defaultMessage:"A few quick tips, while I have your attention"})),_react["default"].createElement("ul",null,_react["default"].createElement("li",null,_react["default"].createElement(_react2.FormattedMessage,{id:"console.welcomePage.quickTips.submitRequestDescription",defaultMessage:"Submit requests to ES using the green triangle button."})),_react["default"].createElement("li",null,_react["default"].createElement(_react2.FormattedMessage,{id:"console.welcomePage.quickTips.useWrenchMenuDescription",defaultMessage:"Use the wrench menu for other useful things."})),_react["default"].createElement("li",null,_react["default"].createElement(_react2.FormattedMessage,{id:"console.welcomePage.quickTips.cUrlFormatForRequestsDescription",defaultMessage:"You can paste requests in cURL format and they will be translated to the Console syntax."})),_react["default"].createElement("li",null,_react["default"].createElement(_react2.FormattedMessage,{id:"console.welcomePage.quickTips.resizeEditorDescription",defaultMessage:"You can resize the editor and output panes by dragging the separator between them."})),_react["default"].createElement("li",null,_react["default"].createElement(_react2.FormattedMessage,{id:"console.welcomePage.quickTips.keyboardShortcutsDescription",defaultMessage:"Study the keyboard shortcuts under the Help button. Good stuff in there!"}))))),_react["default"].createElement(_eui.EuiFlyoutFooter,null,_react["default"].createElement(_eui.EuiButton,{fill:true,fullWidth:false,"data-test-subj":"help-close-button",onClick:props.onDismiss},_react["default"].createElement(_react2.FormattedMessage,{id:"console.welcomePage.closeButtonLabel",defaultMessage:"Dismiss"}))))}},6051:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='# index a doc\nPUT index/type/1\n{\n  "body": "here"\n}\n\n# and get it ...\nGET index/type/1\n'},6052:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getTopNavConfig=getTopNavConfig;var _i18n=__webpack_require__(5);var _settings_show_modal=__webpack_require__(6053);var _help_show_panel=__webpack_require__(6055);function getTopNavConfig($scope,toggleHistory){return[{key:"history",label:_i18n.i18n.translate("console.topNav.historyTabLabel",{defaultMessage:"History"}),description:_i18n.i18n.translate("console.topNav.historyTabDescription",{defaultMessage:"History"}),run:function run(){toggleHistory()},testId:"consoleHistoryButton"},{key:"settings",label:_i18n.i18n.translate("console.topNav.settingsTabLabel",{defaultMessage:"Settings"}),description:_i18n.i18n.translate("console.topNav.settingsTabDescription",{defaultMessage:"Settings"}),run:function run(){(0,_settings_show_modal.showSettingsModal)()},testId:"consoleSettingsButton"},{key:"help",label:_i18n.i18n.translate("console.topNav.helpTabLabel",{defaultMessage:"Help"}),description:_i18n.i18n.translate("console.topNav.helpTabDescription",{defaultMessage:"Help"}),run:function run(){var hideHelpPanel=(0,_help_show_panel.showHelpPanel)();$scope.$on("$destroy",function(){hideHelpPanel()})},testId:"consoleHelpButton"}]}},6053:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.showSettingsModal=showSettingsModal;var _i18n=__webpack_require__(28);var _react=_interopRequireDefault(__webpack_require__(0));var _reactDom=_interopRequireDefault(__webpack_require__(27));var _settings_modal=__webpack_require__(6054);var _mappings=_interopRequireDefault(__webpack_require__(294));var _settings=__webpack_require__(506);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function showSettingsModal(){var container=document.getElementById("consoleSettingsModal");var curSettings=(0,_settings.getCurrentSettings)();var refreshAutocompleteSettings=function refreshAutocompleteSettings(selectedSettings){_mappings["default"].retrieveAutoCompleteInfo(selectedSettings)};var closeModal=function closeModal(){if(!container)return;_reactDom["default"].unmountComponentAtNode(container);container.innerHTML=""};var getAutocompleteDiff=function getAutocompleteDiff(newSettings,prevSettings){return Object.keys(newSettings.autocomplete).filter(function(key){return prevSettings.autocomplete[key]!==newSettings.autocomplete[key]})};var fetchAutocompleteSettingsIfNeeded=function fetchAutocompleteSettingsIfNeeded(newSettings,prevSettings){if(newSettings.polling){var autocompleteDiff=getAutocompleteDiff(newSettings,prevSettings);var isSettingsChanged=autocompleteDiff.length>0;var isPollingChanged=prevSettings.polling!==newSettings.polling;if(isSettingsChanged){var changedSettings=autocompleteDiff.reduce(function(changedSettingsAccum,setting){changedSettingsAccum[setting]=newSettings.autocomplete[setting];return changedSettingsAccum},{});_mappings["default"].retrieveAutoCompleteInfo(changedSettings)}else if(isPollingChanged){_mappings["default"].retrieveAutoCompleteInfo()}}};var onSave=function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(newSettings){var prevSettings;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:prevSettings=(0,_settings.getCurrentSettings)();(0,_settings.updateSettings)(newSettings);fetchAutocompleteSettingsIfNeeded(newSettings,prevSettings);closeModal();case 4:case"end":return _context.stop()}}},_callee)}));return function onSave(_x){return _ref.apply(this,arguments)}}();var element=_react["default"].createElement(_i18n.I18nContext,null,_react["default"].createElement(_settings_modal.DevToolsSettingsModal,{settings:curSettings,onSaveSettings:onSave,onClose:closeModal,refreshAutocompleteSettings:refreshAutocompleteSettings}));_reactDom["default"].render(element,container)}},6054:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DevToolsSettingsModal=DevToolsSettingsModal;var _react=_interopRequireWildcard(__webpack_require__(0));var _i18n=__webpack_require__(5);var _react2=__webpack_require__(10);var _eui=__webpack_require__(2);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function DevToolsSettingsModal(props){var _useState=(0,_react.useState)(props.settings.fontSize),_useState2=_slicedToArray(_useState,2),fontSize=_useState2[0],setFontSize=_useState2[1];var _useState3=(0,_react.useState)(props.settings.wrapMode),_useState4=_slicedToArray(_useState3,2),wrapMode=_useState4[0],setWrapMode=_useState4[1];var _useState5=(0,_react.useState)(props.settings.autocomplete.fields),_useState6=_slicedToArray(_useState5,2),fields=_useState6[0],setFields=_useState6[1];var _useState7=(0,_react.useState)(props.settings.autocomplete.indices),_useState8=_slicedToArray(_useState7,2),indices=_useState8[0],setIndices=_useState8[1];var _useState9=(0,_react.useState)(props.settings.autocomplete.templates),_useState10=_slicedToArray(_useState9,2),templates=_useState10[0],setTemplates=_useState10[1];var _useState11=(0,_react.useState)(props.settings.polling),_useState12=_slicedToArray(_useState11,2),polling=_useState12[0],setPolling=_useState12[1];var _useState13=(0,_react.useState)(props.settings.tripleQuotes),_useState14=_slicedToArray(_useState13,2),tripleQuotes=_useState14[0],setTripleQuotes=_useState14[1];var autoCompleteCheckboxes=[{id:"fields",label:_i18n.i18n.translate("console.settingsPage.fieldsLabelText",{defaultMessage:"Fields"}),stateSetter:setFields},{id:"indices",label:_i18n.i18n.translate("console.settingsPage.indicesAndAliasesLabelText",{defaultMessage:"Indices & Aliases"}),stateSetter:setIndices},{id:"templates",label:_i18n.i18n.translate("console.settingsPage.templatesLabelText",{defaultMessage:"Templates"}),stateSetter:setTemplates}];var checkboxIdToSelectedMap={fields:fields,indices:indices,templates:templates};var onAutocompleteChange=function onAutocompleteChange(optionId){var option=_.find(autoCompleteCheckboxes,function(item){return item.id===optionId});if(option){option.stateSetter(!checkboxIdToSelectedMap[optionId])}};function saveSettings(){props.onSaveSettings({fontSize:fontSize,wrapMode:wrapMode,autocomplete:{fields:fields,indices:indices,templates:templates},polling:polling,tripleQuotes:tripleQuotes})}var pollingFields=fields||indices||templates?_react["default"].createElement(_react.Fragment,null,_react["default"].createElement(_eui.EuiFormRow,{label:_react["default"].createElement(_react2.FormattedMessage,{id:"console.settingsPage.refreshingDataLabel",defaultMessage:"Refreshing autocomplete suggestions"}),helpText:_react["default"].createElement(_react2.FormattedMessage,{id:"console.settingsPage.refreshingDataDescription",defaultMessage:"Console refreshes autocomplete suggestions by querying Elasticsearch. Automatic refreshes may be an issue if you have a large cluster or if you have network limitations."})},_react["default"].createElement(_eui.EuiSwitch,{checked:polling,"data-test-subj":"autocompletePolling",id:"autocompletePolling",label:_react["default"].createElement(_react2.FormattedMessage,{defaultMessage:"Automatically refresh autocomplete suggestions",id:"console.settingsPage.pollingLabelText"}),onChange:function onChange(e){return setPolling(e.target.checked)}})),_react["default"].createElement(_eui.EuiButton,{"data-test-subj":"autocompletePolling",id:"autocompletePolling",onClick:function onClick(){props.refreshAutocompleteSettings({autocomplete:{fields:fields,indices:indices,templates:templates}})}},_react["default"].createElement(_react2.FormattedMessage,{defaultMessage:"Refresh autocomplete suggestions",id:"console.settingsPage.refreshButtonLabel"}))):undefined;return _react["default"].createElement(_eui.EuiOverlayMask,null,_react["default"].createElement(_eui.EuiModal,{"data-test-subj":"devToolsSettingsModal",className:"conApp__settingsModal",onClose:props.onClose},_react["default"].createElement(_eui.EuiModalHeader,null,_react["default"].createElement(_eui.EuiModalHeaderTitle,null,_react["default"].createElement(_react2.FormattedMessage,{id:"console.settingsPage.pageTitle",defaultMessage:"Console Settings"}))),_react["default"].createElement(_eui.EuiModalBody,null,_react["default"].createElement(_eui.EuiFormRow,{label:_react["default"].createElement(_react2.FormattedMessage,{id:"console.settingsPage.fontSizeLabel",defaultMessage:"Font Size"})},_react["default"].createElement(_eui.EuiFieldNumber,{autoFocus:true,"data-test-subj":"setting-font-size-input",value:fontSize,min:6,max:50,onChange:function onChange(e){var val=parseInt(e.target.value,10);if(!val)return;setFontSize(val)}})),_react["default"].createElement(_eui.EuiFormRow,null,_react["default"].createElement(_eui.EuiSwitch,{checked:wrapMode,"data-test-subj":"settingsWrapLines",id:"wrapLines",label:_react["default"].createElement(_react2.FormattedMessage,{defaultMessage:"Wrap long lines",id:"console.settingsPage.wrapLongLinesLabelText"}),onChange:function onChange(e){return setWrapMode(e.target.checked)}})),_react["default"].createElement(_eui.EuiFormRow,{label:_react["default"].createElement(_react2.FormattedMessage,{id:"console.settingsPage.jsonSyntaxLabel",defaultMessage:"JSON syntax"})},_react["default"].createElement(_eui.EuiSwitch,{checked:tripleQuotes,"data-test-subj":"tripleQuotes",id:"tripleQuotes",label:_react["default"].createElement(_react2.FormattedMessage,{defaultMessage:"Use triple quotes in output pane",id:"console.settingsPage.tripleQuotesMessage"}),onChange:function onChange(e){return setTripleQuotes(e.target.checked)}})),_react["default"].createElement(_eui.EuiFormRow,{labelType:"legend",label:_react["default"].createElement(_react2.FormattedMessage,{id:"console.settingsPage.autocompleteLabel",defaultMessage:"Autocomplete"})},_react["default"].createElement(_eui.EuiCheckboxGroup,{options:autoCompleteCheckboxes,idToSelectedMap:checkboxIdToSelectedMap,onChange:function onChange(e){onAutocompleteChange(e)}})),pollingFields),_react["default"].createElement(_eui.EuiModalFooter,null,_react["default"].createElement(_eui.EuiButtonEmpty,{"data-test-subj":"settingsCancelButton",onClick:props.onClose},_react["default"].createElement(_react2.FormattedMessage,{id:"console.settingsPage.cancelButtonLabel",defaultMessage:"Cancel"})),_react["default"].createElement(_eui.EuiButton,{fill:true,"data-test-subj":"settings-save-button",onClick:saveSettings},_react["default"].createElement(_react2.FormattedMessage,{id:"console.settingsPage.saveButtonLabel",defaultMessage:"Save"})))))}},6055:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.showHelpPanel=showHelpPanel;var _react=_interopRequireDefault(__webpack_require__(0));var _reactDom=_interopRequireDefault(__webpack_require__(27));var _i18n=__webpack_require__(28);var _help_panel=__webpack_require__(6056);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var isOpen=false;function showHelpPanel(){var onClose=function onClose(){if(!container)return;_reactDom["default"].unmountComponentAtNode(container);isOpen=false};var container=document.getElementById("consoleHelpPanel");if(container&&!isOpen){isOpen=true;var element=_react["default"].createElement(_i18n.I18nContext,null,_react["default"].createElement(_help_panel.HelpPanel,{onClose:onClose}));_reactDom["default"].render(element,container)}return onClose}},6056:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.HelpPanel=HelpPanel;var _react=_interopRequireDefault(__webpack_require__(0));var _react2=__webpack_require__(10);var _eui=__webpack_require__(2);var _editor_example=__webpack_require__(2032);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function HelpPanel(props){return _react["default"].createElement(_eui.EuiFlyout,{onClose:props.onClose,"data-test-subj":"helpFlyout",size:"s"},_react["default"].createElement(_eui.EuiFlyoutHeader,{hasBorder:true},_react["default"].createElement(_eui.EuiTitle,{size:"m"},_react["default"].createElement("h2",null,_react["default"].createElement(_react2.FormattedMessage,{id:"console.helpPage.pageTitle",defaultMessage:"Help"})))),_react["default"].createElement(_eui.EuiFlyoutBody,null,_react["default"].createElement(_eui.EuiText,null,_react["default"].createElement("h3",null,_react["default"].createElement(_react2.FormattedMessage,{defaultMessage:"Request format",id:"console.helpPage.requestFormatTitle"})),_react["default"].createElement("p",null,_react["default"].createElement(_react2.FormattedMessage,{id:"console.helpPage.requestFormatDescription",defaultMessage:"You can type one or more requests in the white editor. Console understands requests in a compact format:"})),_react["default"].createElement(_editor_example.EditorExample,{panel:"help"}),_react["default"].createElement("h3",null,_react["default"].createElement(_react2.FormattedMessage,{id:"console.helpPage.keyboardCommandsTitle",defaultMessage:"Keyboard commands"})),_react["default"].createElement(_eui.EuiSpacer,null),_react["default"].createElement("dl",null,_react["default"].createElement("dt",null,"Ctrl/Cmd + I"),_react["default"].createElement("dd",null,_react["default"].createElement(_react2.FormattedMessage,{id:"console.helpPage.keyboardCommands.autoIndentDescription",defaultMessage:"Auto indent current request"})),_react["default"].createElement("dt",null,"Ctrl/Cmd + /"),_react["default"].createElement("dd",null,_react["default"].createElement(_react2.FormattedMessage,{id:"console.helpPage.keyboardCommands.openDocumentationDescription",defaultMessage:"Open documentation for current request"})),_react["default"].createElement("dt",null,"Ctrl + Space"),_react["default"].createElement("dd",null,_react["default"].createElement(_react2.FormattedMessage,{id:"console.helpPage.keyboardCommands.openAutoCompleteDescription",defaultMessage:"Open Auto complete (even if not typing)"})),_react["default"].createElement("dt",null,"Ctrl/Cmd + Enter"),_react["default"].createElement("dd",null,_react["default"].createElement(_react2.FormattedMessage,{id:"console.helpPage.keyboardCommands.submitRequestDescription",defaultMessage:"Submit request"})),_react["default"].createElement("dt",null,"Ctrl/Cmd + Up/Down"),_react["default"].createElement("dd",null,_react["default"].createElement(_react2.FormattedMessage,{id:"console.helpPage.keyboardCommands.jumpToPreviousNextRequestDescription",defaultMessage:"Jump to the previous/next request start or end."})),_react["default"].createElement("dt",null,"Ctrl/Cmd + Alt + L"),_react["default"].createElement("dd",null,_react["default"].createElement(_react2.FormattedMessage,{id:"console.helpPage.keyboardCommands.collapseExpandCurrentScopeDescription",defaultMessage:"Collapse/expand current scope."})),_react["default"].createElement("dt",null,"Ctrl/Cmd + Option + 0"),_react["default"].createElement("dd",null,_react["default"].createElement(_react2.FormattedMessage,{id:"console.helpPage.keyboardCommands.collapseAllScopesDescription",defaultMessage:"Collapse all scopes but the current one. Expand by adding a shift."})),_react["default"].createElement("dt",null,"Down arrow"),_react["default"].createElement("dd",null,_react["default"].createElement(_react2.FormattedMessage,{id:"console.helpPage.keyboardCommands.switchFocusToAutoCompleteMenuDescription",defaultMessage:"Switch focus to auto-complete menu. Use arrows to further select a term"})),_react["default"].createElement("dt",null,"Enter/Tab"),_react["default"].createElement("dd",null,_react["default"].createElement(_react2.FormattedMessage,{id:"console.helpPage.keyboardCommands.selectCurrentlySelectedInAutoCompleteMenuDescription",defaultMessage:"Select the currently selected or the top most term in auto-complete menu"})),_react["default"].createElement("dt",null,"Esc"),_react["default"].createElement("dd",null,_react["default"].createElement(_react2.FormattedMessage,{id:"console.helpPage.keyboardCommands.closeAutoCompleteMenuDescription",defaultMessage:"Close auto-complete menu"}))))))}},6057:function(module,exports,__webpack_require__){"use strict";var _eui=__webpack_require__(2);var _history=_interopRequireDefault(__webpack_require__(6058));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _require=__webpack_require__(1),memoize=_require.memoize;var moment=__webpack_require__(23);var history=__webpack_require__(1022);__webpack_require__(6059);__webpack_require__(12).get("app/sense").directive("senseHistory",function(){return{restrict:"E",template:_history["default"],controllerAs:"history",scope:{isShown:"=",historyDirty:"=",close:"&"},controller:function controller($scope,$element){var _this=this;$scope.$watch("historyDirty",function(){_this.init()});$scope.$watch("isShown",function(){if($scope.isShown)_this.init()});this.init=function(){_this.reqs=history.getHistory();_this.selectedIndex=0;_this.selectedReq=_this.reqs[_this.selectedIndex];_this.viewingReq=_this.selectedReq;_this.describeReq=memoize(function(req){var endpoint=req.endpoint;var date=moment(req.time);var formattedDate=date.format("MMM D");if(date.diff(moment(),"days")>-7){formattedDate=date.fromNow()}return"".concat(endpoint," (").concat(formattedDate,")")});_this.describeReq.cache=new WeakMap};this.clear=function(){history.clearHistory($element);_this.init()};this.close=function(){$scope.close()};this.restore=function(){var req=arguments.length>0&&arguments[0]!==undefined?arguments[0]:_this.selectedReq;history.restoreFromHistory(req)};this.onKeyDown=function(ev){if(ev.keyCode===_eui.keyCodes.ENTER){_this.restore();return}if(ev.keyCode===_eui.keyCodes.UP){ev.preventDefault();_this.selectedIndex--}else if(ev.keyCode===_eui.keyCodes.DOWN){ev.preventDefault();_this.selectedIndex++}_this.selectedIndex=Math.min(Math.max(0,_this.selectedIndex),_this.reqs.length-1);_this.selectedReq=_this.reqs[_this.selectedIndex];_this.viewingReq=_this.reqs[_this.selectedIndex]}}}})},6058:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<div class="conHistory">\n  <h2\n    class="kuiLocalDropdownTitle"\n    i18n-id="console.historyPage.pageTitle"\n    i18n-default-message="History"\n  ></h2>\n\n  <div class="conHistory__body">\n    <ul\n      class="list-group conHistory__reqs"\n      tabindex="0"\n      role="listbox"\n      aria-activedescendant="historyReq{{ history.selectedIndex }}"\n      scrollto-activedescendant\n      ng-keydown="history.onKeyDown($event)"\n      aria-label="{{:: \'console.historyPage.requestListAriaLabel\' | i18n: { defaultMessage: \'History of sent requests\' } }}"\n    >\n      <li\n        class="list-group-item conHistory__req"\n        role="option"\n        ng-repeat="req in history.reqs"\n        id="historyReq{{$index}}"\n        ng-class="{ \'conHistory__req-selected\': history.viewingReq === req }"\n        ng-click="history.selectedReq = req; history.viewingReq = req; history.selectedIndex = $index"\n        ng-mouseenter="history.viewingReq = req"\n        ng-mouseleave="history.viewingReq = history.selectedReq"\n        ng-dblclick="history.restore(req)"\n        aria-label="{{:: \'console.historyPage.itemOfRequestListAriaLabel\' | i18n: { defaultMessage: \'Request: {historyItem}\', values: { historyItem: history.describeReq(req) },} }}"\n        aria-selected="{{ history.selectedReq === req }}"\n      >\n        {{ history.describeReq(req) }}\n        <span class="conHistory__reqIcon"><i class="fa fa-chevron-right"></i></span>\n      </li>\n    </ul>\n\n    <sense-history-viewer class="conHistory__viewer" req="history.viewingReq" />\n  </div>\n\n  <div class="conHistory__footer">\n    <button\n      class="kuiButton kuiButton--danger"\n      ng-click="history.clear()"\n      i18n-id="console.historyPage.clearHistoryButtonLabel"\n      i18n-default-message="Clear"\n    ></button>\n\n    <div class="conHistory__footerButtonsRight">\n      <button\n        class="kuiButton kuiButton--hollow"\n        ng-click="history.close()"\n        i18n-id="console.historyPage.closehistoryButtonLabel"\n        i18n-default-message="Close"\n      ></button>\n\n      <button\n        class="kuiButton kuiButton--primary"\n        ng-disabled="!history.selectedReq"\n        ng-click="history.restore()"\n        i18n-id="console.historyPage.applyHistoryButtonLabel"\n        i18n-default-message="Apply"\n      ></button>\n    </div>\n  </div>\n</div>\n'},6059:function(module,exports,__webpack_require__){"use strict";var _i18n=__webpack_require__(5);var _sense_editor_resize=__webpack_require__(2022);var SenseEditor=__webpack_require__(1021);__webpack_require__(12).get("app/sense").directive("senseHistoryViewer",function(){return{restrict:"E",scope:{req:"="},link:function link($scope,$el){var viewer=new SenseEditor($el);viewer.setReadOnly(true);viewer.renderer.setShowPrintMargin(false);(0,_sense_editor_resize.applyResizeCheckerToEditors)($scope,$el,viewer);__webpack_require__(506).applyCurrentSettings(viewer);$scope.$watch("req",function(req){if(req){var s=req.method+" "+req.endpoint+"\n"+(req.data||"");viewer.setValue(s);viewer.clearSelection()}else{viewer.getSession().setValue(_i18n.i18n.translate("console.historyPage.noHistoryTextMessage",{defaultMessage:"No history available"}))}});$scope.$on("$destroy",function(){viewer.destroy()})}}})},6060:function(module,exports,__webpack_require__){"use strict";__webpack_require__(181);var _i18n=__webpack_require__(28);var _modules=__webpack_require__(12);var _console_menu=__webpack_require__(6061);var _module=_modules.uiModules.get("apps/sense",["react"]);_module.directive("consoleMenu",function(reactDirective){return reactDirective((0,_i18n.wrapInI18nContext)(_console_menu.ConsoleMenu))})},6061:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ConsoleMenu=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(17));var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(2);var _react2=__webpack_require__(10);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ConsoleMenu=function(_Component){_inherits(ConsoleMenu,_Component);function ConsoleMenu(props){var _this;_classCallCheck(this,ConsoleMenu);_this=_possibleConstructorReturn(this,_getPrototypeOf(ConsoleMenu).call(this,props));_defineProperty(_assertThisInitialized(_this),"mouseEnter",function(){if(_this.state.isPopoverOpen)return;_this.props.getCurl(function(text){_this.setState({curlCode:text})})});_defineProperty(_assertThisInitialized(_this),"onButtonClick",function(){_this.setState(function(prevState){return{isPopoverOpen:!prevState.isPopoverOpen}})});_defineProperty(_assertThisInitialized(_this),"closePopover",function(){_this.setState({isPopoverOpen:false})});_defineProperty(_assertThisInitialized(_this),"openDocs",function(){_this.closePopover();_this.props.getDocumentation();_this.props.openDocumentation()});_this.state={curlCode:"",isPopoverOpen:false};return _this}_createClass(ConsoleMenu,[{key:"copyAsCurl",value:function copyAsCurl(){this.copyText(this.state.curlCode)}},{key:"copyText",value:function copyText(text){var textField=document.createElement("textarea");textField.innerText=text;document.body.appendChild(textField);textField.select();document.execCommand("copy");textField.remove()}},{key:"render",value:function render(){var _this2=this;var button=_react["default"].createElement(_eui.EuiButtonIcon,{iconType:"wrench",onClick:this.onButtonClick,"aria-label":_react["default"].createElement(_react2.FormattedMessage,{id:"console.requestOptionsButtonAriaLabel",defaultMessage:"Request options"})});var items=[_react["default"].createElement(_eui.EuiContextMenuItem,{key:"Copy as cURL",id:"ConCopyAsCurl",disabled:!document.queryCommandSupported("copy"),onClick:function onClick(){_this2.closePopover();_this2.copyAsCurl()}},_react["default"].createElement(_react2.FormattedMessage,{id:"console.requestOptions.copyAsUrlButtonLabel",defaultMessage:"Copy as cURL"})),_react["default"].createElement(_eui.EuiContextMenuItem,{key:"Open documentation",onClick:function onClick(){_this2.openDocs()}},_react["default"].createElement(_react2.FormattedMessage,{id:"console.requestOptions.openDocumentationButtonLabel",defaultMessage:"Open documentation"})),_react["default"].createElement(_eui.EuiContextMenuItem,{key:"Auto indent",onClick:function onClick(event){_this2.closePopover();_this2.props.autoIndent(event)}},_react["default"].createElement(_react2.FormattedMessage,{id:"console.requestOptions.autoIndentButtonLabel",defaultMessage:"Auto indent"}))];return _react["default"].createElement("span",{onMouseEnter:this.mouseEnter},_react["default"].createElement(_eui.EuiPopover,{id:"contextMenu",button:button,isOpen:this.state.isPopoverOpen,closePopover:this.closePopover,panelPaddingSize:"none",anchorPosition:"downLeft"},_react["default"].createElement(_eui.EuiContextMenuPanel,{items:items})))}}]);return ConsoleMenu}(_react.Component);exports.ConsoleMenu=ConsoleMenu;ConsoleMenu.propTypes={getCurl:_propTypes["default"].func.isRequired,openDocumentation:_propTypes["default"].func.isRequired,getDocumentation:_propTypes["default"].func.isRequired,autoIndent:_propTypes["default"].func.isRequired}},6062:function(module,exports,__webpack_require__){__webpack_require__(6063)},6063:function(module,exports,__webpack_require__){"use strict";__webpack_require__(6064);__webpack_require__(6067)},6064:function(module,exports,__webpack_require__){"use strict";var _lodash=_interopRequireDefault(__webpack_require__(1));var _doc_views=__webpack_require__(1023);__webpack_require__(6065);var _table=_interopRequireDefault(__webpack_require__(6066));var _i18n=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}_doc_views.DocViewsRegistryProvider.register(function(){return{title:_i18n.i18n.translate("kbnDocViews.table.tableTitle",{defaultMessage:"Table"}),order:10,directive:{template:_table["default"],scope:{hit:"=",indexPattern:"=",filter:"=",columns:"=",onAddColumn:"=",onRemoveColumn:"="},controller:function controller($scope){$scope.mapping=$scope.indexPattern.fields.byName;$scope.flattened=$scope.indexPattern.flattenHit($scope.hit);$scope.formatted=$scope.indexPattern.formatHit($scope.hit);$scope.fields=_lodash["default"].keys($scope.flattened).sort();$scope.canToggleColumns=function canToggleColumn(){return _lodash["default"].isFunction($scope.onAddColumn)&&_lodash["default"].isFunction($scope.onRemoveColumn)};$scope.toggleColumn=function toggleColumn(columnName){if($scope.columns.includes(columnName)){$scope.onRemoveColumn(columnName)}else{$scope.onAddColumn(columnName)}};$scope.isColumnActive=function isColumnActive(columnName){return $scope.columns.includes(columnName)};$scope.showArrayInObjectsWarning=function(row,field){var value=$scope.flattened[field];return Array.isArray(value)&&_typeof(value[0])==="object"}}}}})},6065:function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(12);var _module=_modules.uiModules.get("apps/doc_views");_module.filter("trustAsHtml",function($sce){return $sce.trustAsHtml})},6066:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<table class="table table-condensed">\n  <tbody>\n    <tr ng-repeat="field in fields" data-test-subj="tableDocViewRow-{{ field }}">\n      <td width="1%" class="kbnDocViewer__buttons" ng-if="filter">\n        <span ng-if="mapping[field].filterable">\n          <button\n            aria-label="{{ ::\'kbnDocViews.table.filterForValueButtonAriaLabel\' | i18n: { defaultMessage: \'Filter for value\' } }}"\n            ng-click="filter(mapping[field], flattened[field], \'+\')"\n            data-test-subj="addInclusiveFilterButton"\n            tooltip="{{ ::\'kbnDocViews.table.filterForValueButtonTooltip\' | i18n: { defaultMessage: \'Filter for value\' } }}"\n            tooltip-append-to-body="1"\n            class="kbnDocViewer__actionButton"\n          >\n            <i\n              class="fa fa-search-plus"></i>\n          </button>\n\n          <button\n            aria-label="{{ ::\'kbnDocViews.table.filterOutValueButtonAriaLabel\' | i18n: { defaultMessage: \'Filter out value\' } }}"\n            ng-click="filter(mapping[field], flattened[field],\'-\')"\n            tooltip="{{ ::\'kbnDocViews.table.filterOutValueButtonTooltip\' | i18n: { defaultMessage: \'Filter out value\' } }}"\n            tooltip-append-to-body="1"\n            class="kbnDocViewer__actionButton"\n          >\n            <i\n              class="fa fa-search-minus"></i>\n          </button>\n        </span>\n        <span\n          ng-if="!mapping[field].filterable"\n          tooltip="{{ ::\'kbnDocViews.table.unindexedFieldsCanNotBeSearchedTooltip\' | i18n: { defaultMessage: \'Unindexed fields can not be searched\' } }}"\n          class="kbnDocViewer__actionButton"\n        >\n          <i class="fa fa-search-plus text-muted"></i>\n          <i class="fa fa-search-minus text-muted"></i>\n        </span>\n        <span ng-if="canToggleColumns()">\n          <button\n            aria-label="{{ ::\'kbnDocViews.table.toggleColumnInTableButtonAriaLabel\' | i18n: { defaultMessage: \'Toggle column in table\' } }}"\n            aria-pressed="{{isColumnActive(field)}}"\n            ng-click="toggleColumn(field)"\n            tooltip-append-to-body="1"\n            tooltip="{{ ::\'kbnDocViews.table.toggleColumnInTableButtonTooltip\' | i18n: { defaultMessage: \'Toggle column in table\' } }}"\n            class="kbnDocViewer__actionButton"\n          >\n            <i\n              class="fa fa-columns"\n            ></i>\n          </button>\n        </span>\n        <span ng-if="!indexPattern.metaFields.includes(field) && !mapping[field].scripted">\n          <button\n            aria-label="{{ ::\'kbnDocViews.table.filterForFieldPresentButtonAriaLabel\' | i18n: { defaultMessage: \'Filter for field present\' } }}"\n            ng-click="filter(\'_exists_\', field, \'+\')"\n            tooltip="{{ ::\'kbnDocViews.table.filterForFieldPresentButtonTooltip\' | i18n: { defaultMessage: \'Filter for field present\' } }}"\n            tooltip-append-to-body="1"\n            class="kbnDocViewer__actionButton"\n          >\n            <i\n              class="fa fa-asterisk"></i>\n          </button>\n        </span>\n        <span\n          ng-if="indexPattern.metaFields.includes(field)"\n          tooltip="{{ ::\'kbnDocViews.table.unableToFilterForPresenceOfMetaFieldsTooltip\' | i18n: { defaultMessage: \'Unable to filter for presence of meta fields\' } }}"\n          class="kbnDocViewer__actionButton"\n        >\n          <i class="fa fa-asterisk text-muted"></i>\n        </span>\n        <span\n          ng-if="mapping[field].scripted"\n          tooltip="{{ ::\'kbnDocViews.table.unableToFilterForPresenceOfScriptedFieldsTooltip\' | i18n: { defaultMessage: \'Unable to filter for presence of scripted fields\' } }}"\n          class="kbnDocViewer__actionButton"\n        >\n          <i class="fa fa-asterisk text-muted"></i>\n        </span>\n      </td>\n      <td field-name="field"\n          field-type="mapping[field].type"\n          width="1%"\n          class="kbnDocViewer__field">\n      </td>\n      <td>\n        <i ng-if="!mapping[field] && field[0] === \'_\'"\n          tooltip-placement="top"\n          tooltip="{{ ::\'kbnDocViews.table.fieldNamesBeginningWithUnderscoreUnsupportedTooltip\' | i18n: {\n            defaultMessage: \'Field names beginning with {underscoreSign} are not supported\',\n            values: { underscoreSign: \'_\' }\n          } }}"\n          class="fa fa-warning text-color-warning kbnDocViewer__underscore"></i>\n        <i ng-if="!mapping[field] && field[0] !== \'_\' && !showArrayInObjectsWarning(doc, field)"\n          tooltip-placement="top"\n          tooltip="{{ ::\'kbnDocViews.table.noCachedMappingForThisFieldTooltip\' | i18n: { defaultMessage: \'No cached mapping for this field. Refresh field list from the Management > Index Patterns page\' } }}"\n          class="fa fa-warning text-color-warning kbnDocViewer__noMapping"></i>\n        <i ng-if="showArrayInObjectsWarning(doc, field)"\n          tooltip-placement="top"\n          tooltip="{{ ::\'kbnDocViews.table.objectsInArraysAreNotWellSupportedTooltip\' | i18n: { defaultMessage: \'Objects in arrays are not well supported.\' } }}"\n          class="fa fa-warning text-color-warning kbnDocViewer__objectArray"></i>\n        <div class="kbnDocViewer__value" ng-bind-html="typeof(formatted[field]) === \'undefined\' ? hit[field] : formatted[field] | trustAsHtml"></div>\n      </td>\n    </tr>\n  </tbody>\n</table>\n'},6067:function(module,exports,__webpack_require__){"use strict";var _angular=_interopRequireDefault(__webpack_require__(31));__webpack_require__(1003);var _doc_views=__webpack_require__(1023);var _json=_interopRequireDefault(__webpack_require__(6068));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_doc_views.DocViewsRegistryProvider.register(function(){return{title:"JSON",order:20,directive:{template:_json["default"],scope:{hit:"="},controller:function controller($scope){$scope.hitJson=_angular["default"].toJson($scope.hit,true);$scope.aceLoaded=function(editor){editor.$blockScrolling=Infinity}}}}})},6068:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<div\n  id="json-ace"\n  ng-model="hitJson"\n  readonly\n  ui-ace="{\n    useWrapMode: true,\n    onLoad: aceLoaded,\n    advanced: {\n      highlightActiveLine: false\n    },\n    rendererOptions: {\n      showPrintMargin: false,\n      maxLines: 4294967296\n    },\n    mode: \'json\'\n  }"></div>\n'},6069:function(module,exports,__webpack_require__){__webpack_require__(6070);__webpack_require__(6101)},6070:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.searchEmbeddableFactoryProvider=searchEmbeddableFactoryProvider;var _embeddable_factories_registry=__webpack_require__(671);var _search_embeddable_factory=__webpack_require__(6071);function searchEmbeddableFactoryProvider(Private){var SearchEmbeddableFactoryProvider=function SearchEmbeddableFactoryProvider($compile,$rootScope,savedSearches){return new _search_embeddable_factory.SearchEmbeddableFactory($compile,$rootScope,savedSearches)};return Private(SearchEmbeddableFactoryProvider)}_embeddable_factories_registry.EmbeddableFactoriesRegistryProvider.register(searchEmbeddableFactoryProvider)},6071:function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.SearchEmbeddableFactory=void 0;__webpack_require__(2033);var _capabilities=__webpack_require__(141);var _i18n=__webpack_require__(5);var _embeddable=__webpack_require__(180);var _search_embeddable=__webpack_require__(6099);function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var SearchEmbeddableFactory=function(_EmbeddableFactory){_inherits(SearchEmbeddableFactory,_EmbeddableFactory);function SearchEmbeddableFactory($compile,$rootScope,searchLoader){var _this;_classCallCheck(this,SearchEmbeddableFactory);_this=_possibleConstructorReturn(this,_getPrototypeOf(SearchEmbeddableFactory).call(this,{name:"search",savedObjectMetaData:{name:_i18n.i18n.translate("kbn.discover.savedSearch.savedObjectName",{defaultMessage:"Saved search"}),type:"search",getIconForSavedObject:function getIconForSavedObject(){return"search"}}}));_this.$compile=$compile;_this.$rootScope=$rootScope;_this.searchLoader=searchLoader;return _this}_createClass(SearchEmbeddableFactory,[{key:"getEditPath",value:function getEditPath(panelId){return this.searchLoader.urlFor(panelId)}},{key:"create",value:function create(_ref,onEmbeddableStateChanged){var _this2=this;var id=_ref.id;var editUrl=this.getEditPath(id);var editable=_capabilities.capabilities.get().discover.save;return this.searchLoader.get(id).then(function(savedObject){return new _search_embeddable.SearchEmbeddable({onEmbeddableStateChanged:onEmbeddableStateChanged,savedSearch:savedObject,editUrl:editUrl,editable:editable,$rootScope:_this2.$rootScope,$compile:_this2.$compile})})}}]);return SearchEmbeddableFactory}(_embeddable.EmbeddableFactory);exports.SearchEmbeddableFactory=SearchEmbeddableFactory},6072:function(module,exports,__webpack_require__){"use strict";var _lodash=_interopRequireDefault(__webpack_require__(1));var _i18n=__webpack_require__(5);var _doc_table=_interopRequireDefault(__webpack_require__(6073));var _get_sort=__webpack_require__(2034);__webpack_require__(6074);__webpack_require__(6075);__webpack_require__(2035);var _render_complete=__webpack_require__(312);var _modules=__webpack_require__(12);__webpack_require__(6082);__webpack_require__(6087);var _courier_inspector_utils=__webpack_require__(566);var _notify=__webpack_require__(24);var _doc_table_strings=__webpack_require__(6089);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_modules.uiModules.get("app/discover").directive("docTable",function(config,getAppState,pagerFactory,$filter,courier){return{restrict:"E",template:_doc_table["default"],scope:{sorting:"=",columns:"=",hits:"=?",indexPattern:"=?",searchSource:"=?",infiniteScroll:"=?",filter:"=?",filters:"=?",minimumVisibleRows:"=?",onAddColumn:"=?",onChangeSortOrder:"=?",onMoveColumn:"=?",onRemoveColumn:"=?",inspectorAdapters:"=?"},link:function link($scope,$el){$scope.$watch("minimumVisibleRows",function(minimumVisibleRows){$scope.limit=Math.max(minimumVisibleRows||50,$scope.limit||50)});$scope.persist={sorting:$scope.sorting,columns:$scope.columns};var limitTo=$filter("limitTo");var calculateItemsOnPage=function calculateItemsOnPage(){$scope.pager.setTotalItems($scope.hits.length);$scope.pageOfItems=limitTo($scope.hits,$scope.pager.pageSize,$scope.pager.startIndex)};$scope.limitedResultsWarning=(0,_doc_table_strings.getLimitedSearchResultsMessage)(config.get("discover:sampleSize"));$scope.addRows=function(){$scope.limit+=50};$scope.$watch("columns",function(columns){if(columns.length!==0)return;var $state=getAppState();$scope.columns.push("_source");if($state)$state.replace()});$scope.$watchCollection("columns",function(columns,oldColumns){if(oldColumns.length===1&&oldColumns[0]==="_source"&&$scope.columns.length>1){_lodash["default"].pull($scope.columns,"_source")}if($scope.columns.length===0)$scope.columns.push("_source")});$scope.$watch("searchSource",function(){if(!$scope.searchSource)return;$scope.indexPattern=$scope.searchSource.getField("index");$scope.searchSource.setField("size",config.get("discover:sampleSize"));$scope.searchSource.setField("sort",(0,_get_sort.getSort)($scope.sorting,$scope.indexPattern));$scope.$watchCollection("sorting",function(newSort,oldSort){if(newSort===oldSort)return;$scope.searchSource.setField("sort",(0,_get_sort.getSort)(newSort,$scope.indexPattern));$scope.searchSource.fetchQueued()});$scope.$on("$destroy",function(){if($scope.searchSource)$scope.searchSource.destroy()});function onResults(resp){$scope.limit=50;if($scope.searchSource!==$scope.searchSource)return;$scope.hits=resp.hits.hits;if($scope.hits.length===0){(0,_render_complete.dispatchRenderComplete)($el[0])}$scope.totalHitCount=resp.hits.total;$scope.pager=pagerFactory.create($scope.hits.length,50,1);calculateItemsOnPage();return $scope.searchSource.onResults().then(onResults)}function startSearching(){var inspectorRequest=undefined;if(_lodash["default"].has($scope,"inspectorAdapters.requests")){$scope.inspectorAdapters.requests.reset();var title=_i18n.i18n.translate("kbn.docTable.inspectorRequestDataTitle",{defaultMessage:"Data"});var description=_i18n.i18n.translate("kbn.docTable.inspectorRequestDescription",{defaultMessage:"This request queries Elasticsearch to fetch the data for the search."});inspectorRequest=$scope.inspectorAdapters.requests.start(title,{description:description});inspectorRequest.stats((0,_courier_inspector_utils.getRequestInspectorStats)($scope.searchSource));$scope.searchSource.getSearchRequestBody().then(function(body){inspectorRequest.json(body)})}$scope.searchSource.onResults().then(function(resp){if(inspectorRequest){inspectorRequest.stats((0,_courier_inspector_utils.getResponseInspectorStats)($scope.searchSource,resp)).ok({json:resp})}return resp}).then(onResults)["catch"](function(error){_notify.toastNotifications.addError(error,{title:_i18n.i18n.translate("kbn.docTable.errorTitle",{defaultMessage:"Error fetching data"})});startSearching()})}startSearching();courier.fetch()});$scope.pageOfItems=[];$scope.onPageNext=function(){$scope.pager.nextPage();calculateItemsOnPage()};$scope.onPagePrevious=function(){$scope.pager.previousPage();calculateItemsOnPage()};$scope.shouldShowLimitedResultsWarning=function(){return!$scope.pager.hasNextPage&&$scope.pager.totalItems<$scope.totalHitCount}}}})},6073:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<div\n  class="kbnDocTable__container"\n  ng-if="hits.length"\n  ng-class="{ loading: searchSource.activeFetchCount > 0 }"\n>\n  <div ng-if="!infiniteScroll">\n    <div class="kuiBar kbnDocTable__bar">\n      <div class="kuiBarSection">\n        <div\n          ng-if="shouldShowLimitedResultsWarning()"\n          class="kuiToolBarText kuiSubduedText"\n        >\n          {{ limitedResultsWarning }}\n        </div>\n        \x3c!-- Pagination --\x3e\n        <tool-bar-pager-text\n          start-item="pager.startItem"\n          end-item="pager.endItem"\n          total-items="totalHitCount"\n        ></tool-bar-pager-text>\n        <tool-bar-pager-buttons\n          has-previous-page="pager.hasPreviousPage"\n          has-next-page="pager.hasNextPage"\n          on-page-next="onPageNext"\n          on-page-previous="onPagePrevious"\n        ></tool-bar-pager-buttons>\n      </div>\n    </div>\n    <table class="kbnDocTable table" ng-if="indexPattern">\n      <thead\n        kbn-table-header\n        columns="columns"\n        index-pattern="indexPattern"\n        sort-order="sorting"\n        on-change-sort-order="onChangeSortOrder"\n        on-move-column="onMoveColumn"\n        on-remove-column="onRemoveColumn"\n      ></thead>\n      <tbody>\n        <tr ng-repeat="row in pageOfItems|limitTo:limit track by row._index+row._type+row._id+row._score+row._version+row._routing"\n          kbn-table-row="row"\n          columns="columns"\n          sorting="sorting"\n          index-pattern="indexPattern"\n          filter="filter"\n          filters="filters"\n          class="kbnDocTable__row"\n          on-add-column="onAddColumn"\n          on-change-sort-order="onChangeSortOrder"\n          on-remove-column="onRemoveColumn"\n        ></tr>\n      </tbody>\n    </table>\n    \x3c!-- ToolBarFooter --\x3e\n    <div class="kuiBar kbnDocTable__bar">\n      <div class="kuiBarSection">\n        <div\n          ng-if="shouldShowLimitedResultsWarning()"\n          class="kuiToolBarText kuiSubduedText"\n        >\n          {{ limitedResultsWarning }}\n        </div>\n        \x3c!-- Pagination --\x3e\n        <tool-bar-pager-text\n          start-item="pager.startItem"\n          end-item="pager.endItem"\n          total-items="totalHitCount"\n        ></tool-bar-pager-text>\n        <tool-bar-pager-buttons\n          has-previous-page="pager.hasPreviousPage"\n          has-next-page="pager.hasNextPage"\n          on-page-next="onPageNext"\n          on-page-previous="onPagePrevious"\n        ></tool-bar-pager-buttons>\n      </div>\n    </div>\n  </div>\n\n  <table ng-if="infiniteScroll" class="kbn-table table" ng-if="indexPattern" data-test-subj="docTable">\n    <thead\n      kbn-table-header\n      columns="columns"\n      index-pattern="indexPattern"\n      sort-order="sorting"\n      on-change-sort-order="onChangeSortOrder"\n      on-move-column="onMoveColumn"\n      on-remove-column="onRemoveColumn"\n    ></thead>\n    <tbody>\n      <tr ng-repeat="row in hits|limitTo:limit track by row._index+row._type+row._id+row._score+row._version+row._routing"\n        kbn-table-row="row"\n        columns="columns"\n        sorting="sorting"\n        index-pattern="indexPattern"\n        filter="filter"\n        filters="filters"\n        class="kbnDocTable__row"\n        ng-class="{\'kbnDocTable__row--highlight\': row[\'$$_isAnchor\']}"\n        data-test-subj="docTableRow{{ row[\'$$_isAnchor\'] ? \' docTableAnchorRow\' : \'\'}}"\n        on-add-column="onAddColumn"\n        on-change-sort-order="onChangeSortOrder"\n        on-remove-column="onRemoveColumn"\n      ></tr>\n    </tbody>\n  </table>\n  <kbn-infinite-scroll ng-if="infiniteScroll" more="addRows"></kbn-infinite-scroll>\n</div>\n\n<div ng-if="hits != null && !hits.length" class="kbnDocTable__error">\n  <div class="euiText euiText--extraSmall euiTextColor euiTextColor--subdued">\n    <icon type="\'visualizeApp\'" size="\'m\'" color="\'subdued\'"></icon>\n\n    <div class="euiSpacer euiSpacer--m"></div>\n\n    <p\n      i18n-id="kbn.docTable.noResultsTitle"\n      i18n-default-message="No results found"\n    >\n    </p>\n  </div>\n</div>\n'},6074:function(module,exports,__webpack_require__){"use strict";var _jquery=_interopRequireDefault(__webpack_require__(25));var _modules=__webpack_require__(12);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _module=_modules.uiModules.get("app/discover");_module.directive("kbnInfiniteScroll",function(){return{restrict:"E",scope:{more:"="},link:function link($scope,$element){var $window=(0,_jquery["default"])(window);var checkTimer;function onScroll(){if(!$scope.more)return;var winHeight=$window.height();var winBottom=winHeight+$window.scrollTop();var elTop=$element.offset().top;var remaining=elTop-winBottom;if(remaining<=winHeight*.5){$scope[$scope.$$phase?"$eval":"$apply"](function(){$scope.more()})}}function scheduleCheck(){if(checkTimer)return;checkTimer=setTimeout(function(){checkTimer=null;onScroll()},50)}$window.on("scroll",scheduleCheck);$scope.$on("$destroy",function(){clearTimeout(checkTimer);$window.off("scroll",scheduleCheck)});scheduleCheck()}}})},6075:function(module,exports,__webpack_require__){"use strict";var _lodash=_interopRequireDefault(__webpack_require__(1));var _i18n=__webpack_require__(5);var _shorten_dotted_string=__webpack_require__(452);var _table_header=_interopRequireDefault(__webpack_require__(6076));var _modules=__webpack_require__(12);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var _module=_modules.uiModules.get("app/discover");_module.directive("kbnTableHeader",function(){return{restrict:"A",scope:{columns:"=",sortOrder:"=",indexPattern:"=",onChangeSortOrder:"=?",onRemoveColumn:"=?",onMoveColumn:"=?"},template:_table_header["default"],controller:function controller($scope,config){$scope.hideTimeColumn=config.get("doc_table:hideTimeColumn");$scope.isShortDots=config.get("shortDots:enable");$scope.getShortDotsName=function getShortDotsName(columnName){return $scope.isShortDots?(0,_shorten_dotted_string.shortenDottedString)(columnName):columnName};$scope.isSortableColumn=function isSortableColumn(columnName){return!!$scope.indexPattern&&_lodash["default"].isFunction($scope.onChangeSortOrder)&&_lodash["default"].get($scope,["indexPattern","fields","byName",columnName,"sortable"],false)};$scope.tooltip=function(column){if(!$scope.isSortableColumn(column))return"";var name=$scope.isShortDots?(0,_shorten_dotted_string.shortenDottedString)(column):column;return _i18n.i18n.translate("kbn.docTable.tableHeader.sortByColumnTooltip",{defaultMessage:"Sort by {columnName}",values:{columnName:name}})};$scope.canMoveColumnLeft=function canMoveColumn(columnName){return _lodash["default"].isFunction($scope.onMoveColumn)&&$scope.columns.indexOf(columnName)>0};$scope.canMoveColumnRight=function canMoveColumn(columnName){return _lodash["default"].isFunction($scope.onMoveColumn)&&$scope.columns.indexOf(columnName)<$scope.columns.length-1};$scope.canRemoveColumn=function canRemoveColumn(columnName){return _lodash["default"].isFunction($scope.onRemoveColumn)&&(columnName!=="_source"||$scope.columns.length>1)};$scope.headerClass=function(column){if(!$scope.isSortableColumn(column))return;var sortOrder=$scope.sortOrder;var defaultClass=["fa","fa-sort-up","kbnDocTableHeader__sortChange"];if(!sortOrder||column!==sortOrder[0])return defaultClass;return["fa",sortOrder[1]==="asc"?"fa-sort-up":"fa-sort-down"]};$scope.moveColumnLeft=function moveLeft(columnName){var newIndex=$scope.columns.indexOf(columnName)-1;if(newIndex<0){return}$scope.onMoveColumn(columnName,newIndex)};$scope.moveColumnRight=function moveRight(columnName){var newIndex=$scope.columns.indexOf(columnName)+1;if(newIndex>=$scope.columns.length){return}$scope.onMoveColumn(columnName,newIndex)};$scope.cycleSortOrder=function cycleSortOrder(columnName){if(!$scope.isSortableColumn(columnName)){return}var _$scope$sortOrder=_slicedToArray($scope.sortOrder,2),currentColumnName=_$scope$sortOrder[0],_$scope$sortOrder$=_$scope$sortOrder[1],currentDirection=_$scope$sortOrder$===void 0?"asc":_$scope$sortOrder$;var newDirection=columnName===currentColumnName&&currentDirection==="asc"?"desc":"asc";$scope.onChangeSortOrder(columnName,newDirection)};$scope.getAriaLabelForColumn=function getAriaLabelForColumn(name){if(!$scope.isSortableColumn(name))return null;var _$scope$sortOrder2=_slicedToArray($scope.sortOrder,2),currentColumnName=_$scope$sortOrder2[0],_$scope$sortOrder2$=_$scope$sortOrder2[1],currentDirection=_$scope$sortOrder2$===void 0?"asc":_$scope$sortOrder2$;if(name===currentColumnName&&currentDirection==="asc"){return _i18n.i18n.translate("kbn.docTable.tableHeader.sortByColumnDescendingAriaLabel",{defaultMessage:"Sort {columnName} descending",values:{columnName:name}})}return _i18n.i18n.translate("kbn.docTable.tableHeader.sortByColumnAscendingAriaLabel",{defaultMessage:"Sort {columnName} ascending",values:{columnName:name}})}}}})},6076:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<tr>\n  <td width="1%"></td>\n  <th\n    ng-if="indexPattern.timeFieldName && !hideTimeColumn"\n    data-test-subj="docTableHeaderField"\n    scope="col"\n  >\n    <span>\n      <span\n        i18n-id="kbn.docTable.tableHeader.timeHeaderCellTitle"\n        i18n-default-message="Time"\n      ></span>\n      <button\n      id="docTableHeaderFieldSort{{indexPattern.timeFieldName}}"\n      tabindex="0"\n      aria-label="{{ getAriaLabelForColumn(indexPattern.timeFieldName) }}"\n      ng-class="headerClass(indexPattern.timeFieldName)"\n      role="button"\n      ng-click="cycleSortOrder(indexPattern.timeFieldName)"\n      tooltip="{{ ::\'kbn.docTable.tableHeader.sortByTimeTooltip\' | i18n: {defaultMessage: \'Sort by time\'} }}"\n    ></button>\n    </span>\n  </th>\n  <th\n    ng-repeat="name in columns"\n    data-test-subj="docTableHeaderField"\n    scope="col"\n  >\n    <span\n      data-test-subj="docTableHeader-{{name}}"\n    >\n      {{getShortDotsName(name)}}\n      <button\n        data-test-subj="docTableHeaderFieldSort_{{name}}"\n        id="docTableHeaderFieldSort{{name}}"\n        ng-if="isSortableColumn(name)"\n        aria-label="{{ getAriaLabelForColumn(name) }}"\n        ng-class="headerClass(name)"\n        ng-click="cycleSortOrder(name)"\n        tooltip="{{tooltip(name)}}"\n        tooltip-append-to-body="1"\n      ></button>\n    </span>\n    <button\n      class="fa fa-remove kbnDocTableHeader__move"\n      ng-click="onRemoveColumn(name)"\n      ng-if="canRemoveColumn(name)"\n      tooltip-append-to-body="1"\n      tooltip="{{ ::\'kbn.docTable.tableHeader.removeColumnButtonTooltip\' | i18n: {defaultMessage: \'Remove column\'} }}"\n      aria-label="{{ \'kbn.docTable.tableHeader.removeColumnButtonAriaLabel\' | i18n: {\n        defaultMessage: \'Remove {columnName} column\',\n        values: {columnName: name}\n      } }}"\n      data-test-subj="docTableRemoveHeader-{{name}}"\n    ></button>\n    <button\n      class="fa fa-angle-double-left kbnDocTableHeader__move"\n      ng-click="moveColumnLeft(name)"\n      ng-if="canMoveColumnLeft(name)"\n      tooltip-append-to-body="1"\n      tooltip="{{ ::\'kbn.docTable.tableHeader.moveColumnLeftButtonTooltip\' | i18n: {defaultMessage: \'Move column to the left\'} }}"\n      aria-label="{{ \'kbn.docTable.tableHeader.moveColumnLeftButtonAriaLabel\' | i18n: {\n        defaultMessage: \'Move {columnName} column to the left\',\n        values: {columnName: name}\n      } }}"\n    ></button>\n    <button\n      class="fa fa-angle-double-right kbnDocTableHeader__move"\n      ng-click="moveColumnRight(name)"\n      ng-if="canMoveColumnRight(name)"\n      tooltip-append-to-body="1"\n      tooltip="{{ ::\'kbn.docTable.tableHeader.moveColumnRightButtonTooltip\' | i18n: {defaultMessage: \'Move column to the right\'} }}"\n      aria-label="{{ \'kbn.docTable.tableHeader.moveColumnRightButtonAriaLabel\' | i18n: {\n        defaultMessage: \'Move {columnName} column to the right\',\n        values: {columnName: name}\n      } }}"\n    ></button>\n  </th>\n</tr>\n'},6077:function(module,exports,__webpack_require__){"use strict";var _jquery=_interopRequireDefault(__webpack_require__(25));var _modules=__webpack_require__(12);var _doc_views=__webpack_require__(1023);__webpack_require__(1080);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_modules.uiModules.get("apps/discover").directive("docViewer",function(Private){var docViews=Private(_doc_views.DocViewsRegistryProvider);return{restrict:"E",scope:{hit:"=",indexPattern:"=",filter:"=?",columns:"=?",onAddColumn:"=?",onRemoveColumn:"=?"},template:function template($el){var $viewer=(0,_jquery["default"])('<div class="kbnDocViewer">');$el.append($viewer);var $tabs=(0,_jquery["default"])('<div class="euiTabs euiTabs--small" role="tablist">');var $content=(0,_jquery["default"])('<div class="kbnDocViewer__content" role="tabpanel">');$viewer.append($tabs);$viewer.append($content);docViews.inOrder.forEach(function(view){var $tab=(0,_jquery["default"])("<button\n            ng-show=\"docViews['".concat(view.name,"'].shouldShow(hit)\"\n            class=\"euiTab\"\n            ng-class=\"{'euiTab euiTab-isSelected': mode === '").concat(view.name,"', 'euiTab': true}\"\n            role=\"tab\"\n            aria-selected=\"{{mode === '").concat(view.name,"'}}\"\n            ng-click=\"mode='").concat(view.name,'\'"\n          >\n            <span\n              class="euiTab__content"\n            >\n              ').concat(view.title,"\n            </span>\n          </button>"));$tabs.append($tab);var $viewAttrs='\n          hit="hit"\n          index-pattern="indexPattern"\n          filter="filter"\n          columns="columns"\n          on-add-column="onAddColumn"\n          on-remove-column="onRemoveColumn"\n        ';var $ext=(0,_jquery["default"])("<render-directive ".concat($viewAttrs," ng-if=\"mode == '").concat(view.name,"'\" definition=\"docViews['").concat(view.name,"'].directive\">\n          </render-directive>"));$ext.html(view.directive.template);$content.append($ext)});return $el.html()},controller:function controller($scope){$scope.mode=docViews.inOrder[0].name;$scope.docViews=docViews.byName}}})},6078:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<td ng-click="toggleRow()" data-test-subj="docTableExpandToggleColumn" class="kbnDocTableCell__toggleDetails">\n  <button\n    class="euiButtonIcon euiButtonIcon--text"\n    aria-expanded="{{!!open}}"\n    aria-label="{{ ::\'kbn.docTable.tableRow.toggleRowDetailsButtonAriaLabel\' | i18n: {defaultMessage: \'Toggle row details\'} }}"\n  >\n    <icon ng-if="open" type="\'arrowDown\'" size="\'s\'"></icon>\n    <icon ng-if="!open" type="\'arrowRight\'" size="\'s\'"></icon>\n  </button>\n</td>\n'},6079:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<td colspan="{{ columns.length + 2 }}">\n  <div class="euiFlexGroup euiFlexGroup--gutterLarge euiFlexGroup--directionRow euiFlexGroup--justifyContentSpaceBetween">\n    <div class="euiFlexItem euiFlexItem--flexGrowZero euiText euiText--small">\n      <div class="euiFlexGroup euiFlexGroup--gutterSmall euiFlexGroup--directionRow">\n        <div class="euiFlexItem euiFlexItem--flexGrowZero">\n          <icon type="\'folderOpen\'" size="\'m\'"></icon>\n        </div>\n        <div class="euiFlexItem euiFlexItem--flexGrowZero">\n          <h4\n            class="euiTitle euiTitle--xsmall"\n            i18n-id="kbn.docTable.tableRow.detailHeading"\n            i18n-default-message="Expanded document"\n          ></h4>\n        </div>\n      </div>\n    </div>\n    <div class="euiFlexItem euiFlexItem--flexGrowZero euiText euiText--small">\n      <div class="euiFlexGroup euiFlexGroup--gutterLarge euiFlexGroup--directionRow">\n        <div class="euiFlexItem euiFlexItem--flexGrowZero euiText euiText--small">\n          <a\n            class="euiLink"\n            data-test-subj="docTableRowAction"\n            ng-href="{{ getContextAppHref() }}"\n            ng-if="indexPattern.isTimeBased()"\n            i18n-id="kbn.docTable.tableRow.viewSurroundingDocumentsLinkText"\n            i18n-default-message="View surrounding documents"\n          ></a>\n        </div>\n        <div class="euiFlexItem euiFlexItem--flexGrowZero euiText euiText--small">\n          <a\n            class="euiLink"\n            data-test-subj="docTableRowAction"\n            ng-href="#/doc/{{indexPattern.id}}/{{row._index}}?id={{uriEncodedId}}"\n            i18n-id="kbn.docTable.tableRow.viewSingleDocumentLinkText"\n            i18n-default-message="View single document"\n          ></a>\n        </div>\n      </div>\n    </div>\n  </div>\n  <doc-viewer\n    columns="columns"\n    filter="filter"\n    hit="row"\n    index-pattern="indexPattern"\n    on-add-column="onAddColumn"\n    on-remove-column="onRemoveColumn"\n    data-test-subj="docViewer"\n  ></doc-viewer>\n</td>\n'},6080:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<%\nvar attributes = \'\';\nif (timefield) {\n  attributes=\'class="eui-textNoWrap" width="1%"\';\n} else if (sourcefield) {\n  attributes=\'class="eui-textBreakAll eui-textBreakWord"\';\n} else {\n  attributes=\'class="kbnDocTableCell__dataField eui-textBreakAll eui-textBreakWord"\';\n}\n%>\n<td <%= attributes %> data-test-subj="docTableField">\n  <%= formatted %>\n  <span class="kbnDocTableCell__filter">\n    <% if (filterable) { %>\n      <button\n        ng-click="inlineFilter($event, \'+\')"\n        class="fa fa-search-plus kbnDocTableRowFilterButton"\n        data-column="<%- column %>"\n        tooltip-append-to-body="1"\n        tooltip="{{ ::\'kbn.docTable.tableRow.filterForValueButtonTooltip\' | i18n: {defaultMessage: \'Filter for value\'} }}"\n        aria-label="{{ ::\'kbn.docTable.tableRow.filterForValueButtonAriaLabel\' | i18n: {defaultMessage: \'Filter for value\'} }}"\n      ></button>\n\n      <button\n        ng-click="inlineFilter($event, \'-\')"\n        class="fa fa-search-minus kbnDocTableRowFilterButton"\n        data-column="<%- column %>"\n        tooltip="{{ ::\'kbn.docTable.tableRow.filterOutValueButtonTooltip\' | i18n: {defaultMessage: \'Filter out value\'} }}"\n        aria-label="{{ ::\'kbn.docTable.tableRow.filterOutValueButtonAriaLabel\' | i18n: {defaultMessage: \'Filter out value\'} }}"\n        tooltip-append-to-body="1"\n      ></button>\n    <% } %>\n  </span>\n</td>\n'},6081:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<div class="truncate-by-height">\n  <%= body %>\n</div>'},6082:function(module,exports,__webpack_require__){"use strict";__webpack_require__(6083);__webpack_require__(6085)},6083:function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(12);var _tool_bar_pager_text=_interopRequireDefault(__webpack_require__(6084));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var app=_modules.uiModules.get("kibana");app.directive("toolBarPagerText",function(){return{restrict:"E",replace:true,template:_tool_bar_pager_text["default"],scope:{startItem:"=",endItem:"=",totalItems:"="},controllerAs:"toolBarPagerText",bindToController:true,controller:function ToolBarPagerTextController(){_classCallCheck(this,ToolBarPagerTextController)}}})},6084:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<div class="kuiToolBarText" data-test-subj="toolBarPagerText">\n  <span\n    i18n-id="kbn.docTable.pagerControl.pagesCountLabel"\n    i18n-default-message="{startItem}&ndash;{endItem} of {totalItems}"\n    i18n-values="{\n      startItem: (toolBarPagerText.startItem | number),\n      endItem: (toolBarPagerText.endItem | number),\n      totalItems: (toolBarPagerText.totalItems | number)\n    }"\n  ></span>\n</div>'},6085:function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(12);var _tool_bar_pager_buttons=_interopRequireDefault(__webpack_require__(6086));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var app=_modules.uiModules.get("kibana");app.directive("toolBarPagerButtons",function(){var _temp;return{restrict:"E",replace:true,template:_tool_bar_pager_buttons["default"],scope:{hasNextPage:"=",hasPreviousPage:"=",onPageNext:"=",onPagePrevious:"="},controllerAs:"toolBarPagerButtons",bindToController:true,controller:(_temp=function ToolBarPagerButtonsController(){var _this=this;_classCallCheck(this,ToolBarPagerButtonsController);_defineProperty(this,"nextPage",function(){_this.onPageNext()});_defineProperty(this,"previousPage",function(){_this.onPagePrevious()})},_temp)}})},6086:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<div class="kuiButtonGroup">\n  <button\n    class="kuiButton kuiButton--basic kuiButton--icon"\n    ng-click="toolBarPagerButtons.previousPage()"\n    ng-disabled="!toolBarPagerButtons.hasPreviousPage"\n    data-test-subj="btnPrevPage"\n  >\n    <span class="kuiButton__icon kuiIcon fa-chevron-left"></span>\n  </button>\n  <button\n    class="kuiButton kuiButton--basic kuiButton--icon"\n    ng-click="toolBarPagerButtons.nextPage()"\n    ng-disabled="!toolBarPagerButtons.hasNextPage"\n    data-test-subj="btnNextPage"\n  >\n    <span class="kuiButton__icon kuiIcon fa-chevron-right"></span>\n  </button>\n</div>\n'},6087:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"Pager",{enumerable:true,get:function get(){return _pager.Pager}});__webpack_require__(6088);var _pager=__webpack_require__(2037)},6088:function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(12);var _pager=__webpack_require__(2037);function isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}function _construct(Parent,args,Class){if(isNativeReflectConstruct()){_construct=Reflect.construct}else{_construct=function _construct(Parent,args,Class){var a=[null];a.push.apply(a,args);var Constructor=Function.bind.apply(Parent,a);var instance=new Constructor;if(Class)_setPrototypeOf(instance,Class.prototype);return instance}}return _construct.apply(null,arguments)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var app=_modules.uiModules.get("kibana");app.factory("pagerFactory",function(){return{create:function create(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}return _construct(_pager.Pager,args)}}})},6089:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getLimitedSearchResultsMessage=getLimitedSearchResultsMessage;var _i18n=__webpack_require__(5);function getLimitedSearchResultsMessage(resultCount){return _i18n.i18n.translate("kbn.docTable.limitedSearchResultLabel",{defaultMessage:"Limited to {resultCount} results. Refine your search.",values:{resultCount:resultCount}})}},6090:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.EmbeddableFactory=void 0;function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var EmbeddableFactory=function EmbeddableFactory(_ref){var name=_ref.name,savedObjectMetaData=_ref.savedObjectMetaData;_classCallCheck(this,EmbeddableFactory);_defineProperty(this,"name",void 0);_defineProperty(this,"savedObjectMetaData",void 0);this.name=name;this.savedObjectMetaData=savedObjectMetaData};exports.EmbeddableFactory=EmbeddableFactory},6091:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Embeddable=void 0;function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var Embeddable=function(){function Embeddable(){var metadata=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,Embeddable);_defineProperty(this,"metadata",{});this.metadata=metadata||{}}_createClass(Embeddable,[{key:"onContainerStateChanged",value:function onContainerStateChanged(containerState){return}},{key:"getInspectorAdapters",value:function getInspectorAdapters(){return undefined}},{key:"destroy",value:function destroy(){return}},{key:"reload",value:function reload(){return}}]);return Embeddable}();exports.Embeddable=Embeddable},6092:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"ContextMenuPanel",{enumerable:true,get:function get(){return _context_menu_panel.ContextMenuPanel}});Object.defineProperty(exports,"ContextMenuAction",{enumerable:true,get:function get(){return _context_menu_action.ContextMenuAction}});Object.defineProperty(exports,"ContextMenuActionsRegistryProvider",{enumerable:true,get:function get(){return _context_menu_actions_registry.ContextMenuActionsRegistryProvider}});Object.defineProperty(exports,"buildEuiContextMenuPanels",{enumerable:true,get:function get(){return _build_eui_context_menu_panels.buildEuiContextMenuPanels}});Object.defineProperty(exports,"PanelActionAPI",{enumerable:true,get:function get(){return _types.PanelActionAPI}});var _context_menu_panel=__webpack_require__(6093);var _context_menu_action=__webpack_require__(6094);var _context_menu_actions_registry=__webpack_require__(6095);var _build_eui_context_menu_panels=__webpack_require__(6096);var _types=__webpack_require__(6097)},6093:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ContextMenuPanel=void 0;function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ContextMenuPanel=function(){function ContextMenuPanel(config){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};_classCallCheck(this,ContextMenuPanel);_defineProperty(this,"id",void 0);_defineProperty(this,"title",void 0);this.id=config.id;this.title=config.title;if(options.getContent){this.getContent=options.getContent}}_createClass(ContextMenuPanel,[{key:"getContent",value:function getContent(panelActionAPI){return}}]);return ContextMenuPanel}();exports.ContextMenuPanel=ContextMenuPanel},6094:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ContextMenuAction=void 0;function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ContextMenuAction=function(){function ContextMenuAction(config,options){_classCallCheck(this,ContextMenuAction);_defineProperty(this,"id",void 0);_defineProperty(this,"icon",void 0);_defineProperty(this,"childContextMenuPanel",void 0);_defineProperty(this,"parentPanelId",void 0);_defineProperty(this,"onClick",void 0);_defineProperty(this,"getHref",void 0);_defineProperty(this,"getDisplayName",void 0);this.id=config.id;this.parentPanelId=config.parentPanelId;this.icon=options.icon;this.childContextMenuPanel=options.childContextMenuPanel;this.getDisplayName=options.getDisplayName;if("onClick"in options){this.onClick=options.onClick}if(options.isDisabled){this.isDisabled=options.isDisabled}if(options.isVisible){this.isVisible=options.isVisible}if("getHref"in options){this.getHref=options.getHref}}_createClass(ContextMenuAction,[{key:"isVisible",value:function isVisible(panelActionAPI){return true}},{key:"isDisabled",value:function isDisabled(panelActionAPI){return false}}]);return ContextMenuAction}();exports.ContextMenuAction=ContextMenuAction},6095:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ContextMenuActionsRegistryProvider=void 0;var _registry=__webpack_require__(107);var ContextMenuActionsRegistryProvider=(0,_registry.uiRegistry)({index:["name"],name:"ContextMenuActions"});exports.ContextMenuActionsRegistryProvider=ContextMenuActionsRegistryProvider},6096:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.buildEuiContextMenuPanels=buildEuiContextMenuPanels;var _lodash=_interopRequireDefault(__webpack_require__(1));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function getActionsForPanel(contextMenuPanelId,allActions){return allActions.filter(function(action){return action.parentPanelId===contextMenuPanelId})}function buildEuiContextMenuPanelItemsAndChildPanels(_ref){var contextMenuPanelId=_ref.contextMenuPanelId,actions=_ref.actions,embeddable=_ref.embeddable,containerState=_ref.containerState;var items=[];var childPanels=[];var actionsForPanel=getActionsForPanel(contextMenuPanelId,actions);actionsForPanel.forEach(function(action){var isVisible=action.isVisible({embeddable:embeddable,containerState:containerState});if(!isVisible){return}if(action.childContextMenuPanel){childPanels.push.apply(childPanels,_toConsumableArray(buildEuiContextMenuPanels({contextMenuPanel:action.childContextMenuPanel,actions:actions,embeddable:embeddable,containerState:containerState})))}items.push(convertPanelActionToContextMenuItem({action:action,containerState:containerState,embeddable:embeddable}))});return{items:items,childPanels:childPanels}}function buildEuiContextMenuPanels(_ref2){var contextMenuPanel=_ref2.contextMenuPanel,actions=_ref2.actions,embeddable=_ref2.embeddable,containerState=_ref2.containerState;var euiContextMenuPanel={id:contextMenuPanel.id,title:contextMenuPanel.title,items:[],content:contextMenuPanel.getContent({embeddable:embeddable,containerState:containerState})};var contextMenuPanels=[euiContextMenuPanel];var _buildEuiContextMenuP=buildEuiContextMenuPanelItemsAndChildPanels({contextMenuPanelId:contextMenuPanel.id,actions:actions,embeddable:embeddable,containerState:containerState}),items=_buildEuiContextMenuP.items,childPanels=_buildEuiContextMenuP.childPanels;euiContextMenuPanel.items=items;return contextMenuPanels.concat(childPanels)}function convertPanelActionToContextMenuItem(_ref3){var action=_ref3.action,containerState=_ref3.containerState,embeddable=_ref3.embeddable;var menuPanelItem={name:action.getDisplayName({embeddable:embeddable,containerState:containerState}),icon:action.icon,panel:_lodash["default"].get(action,"childContextMenuPanel.id"),disabled:action.isDisabled({embeddable:embeddable,containerState:containerState}),"data-test-subj":"dashboardPanelAction-".concat(action.id)};if(action.onClick){menuPanelItem.onClick=function(){if(action.onClick){action.onClick({embeddable:embeddable,containerState:containerState})}}}if(action.getHref){menuPanelItem.href=action.getHref({embeddable:embeddable,containerState:containerState})}return menuPanelItem}},6097:function(module,exports,__webpack_require__){"use strict"},6098:function(module,exports,__webpack_require__){"use strict"},6099:function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.SearchEmbeddable=void 0;var _angular=_interopRequireDefault(__webpack_require__(31));var _lodash=_interopRequireDefault(__webpack_require__(1));var _i18n=__webpack_require__(5);var _embeddable=__webpack_require__(180);var _adapters=__webpack_require__(375);var _get_time=__webpack_require__(779);var columnActions=_interopRequireWildcard(__webpack_require__(2038));var _search_template=_interopRequireDefault(__webpack_require__(6100));function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var SearchEmbeddable=function(_Embeddable){_inherits(SearchEmbeddable,_Embeddable);function SearchEmbeddable(_ref){var _this;var onEmbeddableStateChanged=_ref.onEmbeddableStateChanged,savedSearch=_ref.savedSearch,editable=_ref.editable,editUrl=_ref.editUrl,$rootScope=_ref.$rootScope,$compile=_ref.$compile;_classCallCheck(this,SearchEmbeddable);_this=_possibleConstructorReturn(this,_getPrototypeOf(SearchEmbeddable).call(this,{title:savedSearch.title,editUrl:editUrl,editLabel:_i18n.i18n.translate("kbn.embeddable.search.editLabel",{defaultMessage:"Edit saved search"}),editable:editable,indexPatterns:_lodash["default"].compact([savedSearch.searchSource.getField("index")])}));_defineProperty(_assertThisInitialized(_this),"onEmbeddableStateChanged",void 0);_defineProperty(_assertThisInitialized(_this),"savedSearch",void 0);_defineProperty(_assertThisInitialized(_this),"$rootScope",void 0);_defineProperty(_assertThisInitialized(_this),"$compile",void 0);_defineProperty(_assertThisInitialized(_this),"customization",void 0);_defineProperty(_assertThisInitialized(_this),"inspectorAdaptors",void 0);_defineProperty(_assertThisInitialized(_this),"searchScope",void 0);_defineProperty(_assertThisInitialized(_this),"panelTitle","");_defineProperty(_assertThisInitialized(_this),"filtersSearchSource",void 0);_defineProperty(_assertThisInitialized(_this),"timeRange",void 0);_defineProperty(_assertThisInitialized(_this),"filters",void 0);_defineProperty(_assertThisInitialized(_this),"query",void 0);_defineProperty(_assertThisInitialized(_this),"searchInstance",void 0);_this.onEmbeddableStateChanged=onEmbeddableStateChanged;_this.savedSearch=savedSearch;_this.$rootScope=$rootScope;_this.$compile=$compile;_this.customization={};_this.inspectorAdaptors={requests:new _adapters.RequestAdapter};return _this}_createClass(SearchEmbeddable,[{key:"getInspectorAdapters",value:function getInspectorAdapters(){return this.inspectorAdaptors}},{key:"getPanelTitle",value:function getPanelTitle(){return this.panelTitle}},{key:"onContainerStateChanged",value:function onContainerStateChanged(containerState){this.customization=containerState.embeddableCustomization||{};this.filters=containerState.filters;this.query=containerState.query;this.timeRange=containerState.timeRange;this.panelTitle="";if(!containerState.hidePanelTitles){this.panelTitle=containerState.customTitle!==undefined?containerState.customTitle:this.savedSearch.title}if(this.searchScope){this.pushContainerStateParamsToScope(this.searchScope)}}},{key:"render",value:function render(domNode,containerState){this.onContainerStateChanged(containerState);this.initializeSearchScope();if(!this.searchScope){throw new Error("Search scope not defined");return}this.searchInstance=this.$compile(_search_template["default"])(this.searchScope);var rootNode=_angular["default"].element(domNode);rootNode.append(this.searchInstance)}},{key:"destroy",value:function destroy(){this.savedSearch.destroy();if(this.searchInstance){this.searchInstance.remove()}if(this.searchScope){this.searchScope.$destroy();delete this.searchScope}}},{key:"initializeSearchScope",value:function initializeSearchScope(){var _this2=this;var searchScope=this.$rootScope.$new();searchScope.description=this.savedSearch.description;searchScope.searchSource=this.savedSearch.searchSource;searchScope.inspectorAdapters=this.inspectorAdaptors;var timeRangeSearchSource=searchScope.searchSource.create();timeRangeSearchSource.setField("filter",function(){if(!_this2.searchScope||!_this2.timeRange){return}return(0,_get_time.getTime)(_this2.searchScope.searchSource.getField("index"),_this2.timeRange)});this.filtersSearchSource=searchScope.searchSource.create();this.filtersSearchSource.setParent(timeRangeSearchSource);searchScope.searchSource.setParent(this.filtersSearchSource);this.pushContainerStateParamsToScope(searchScope);searchScope.setSortOrder=function(columnName,direction){searchScope.sort=_this2.customization.sort=[columnName,direction];_this2.emitEmbeddableStateChange(_this2.getEmbeddableState())};searchScope.addColumn=function(columnName){if(!searchScope.columns){return}_this2.savedSearch.searchSource.getField("index").popularizeField(columnName,1);columnActions.addColumn(searchScope.columns,columnName);searchScope.columns=_this2.customization.columns=searchScope.columns;_this2.emitEmbeddableStateChange(_this2.getEmbeddableState())};searchScope.removeColumn=function(columnName){if(!searchScope.columns){return}_this2.savedSearch.searchSource.getField("index").popularizeField(columnName,1);columnActions.removeColumn(searchScope.columns,columnName);_this2.customization.columns=searchScope.columns;_this2.emitEmbeddableStateChange(_this2.getEmbeddableState())};searchScope.moveColumn=function(columnName,newIndex){if(!searchScope.columns){return}columnActions.moveColumn(searchScope.columns,columnName,newIndex);_this2.customization.columns=searchScope.columns;_this2.emitEmbeddableStateChange(_this2.getEmbeddableState())};searchScope.filter=function(field,value,operator){var index=_this2.savedSearch.searchSource.getField("index").id;var stagedFilter={field:field,value:value,operator:operator,index:index};_this2.emitEmbeddableStateChange(_objectSpread({},_this2.getEmbeddableState(),{stagedFilter:stagedFilter}))};this.searchScope=searchScope}},{key:"emitEmbeddableStateChange",value:function emitEmbeddableStateChange(embeddableState){this.onEmbeddableStateChanged(embeddableState)}},{key:"getEmbeddableState",value:function getEmbeddableState(){return{customization:this.customization}}},{key:"pushContainerStateParamsToScope",value:function pushContainerStateParamsToScope(searchScope){searchScope.columns=this.customization.columns||this.savedSearch.columns;searchScope.sort=this.customization.sort||this.savedSearch.sort;searchScope.sharedItemTitle=this.panelTitle;this.filtersSearchSource.setField("filter",this.filters);this.filtersSearchSource.setField("query",this.query)}}]);return SearchEmbeddable}(_embeddable.Embeddable);exports.SearchEmbeddable=SearchEmbeddable},6100:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<doc-table\n  search-source="searchSource"\n  sorting="sort"\n  columns="columns"\n  data-shared-item\n  data-title="{{sharedItemTitle}}"\n  data-description="{{description}}"\n  render-complete\n  class="panel-content"\n  filter="filter"\n  on-add-column="addColumn"\n  on-change-sort-order="setSortOrder"\n  on-move-column="moveColumn"\n  on-remove-column="removeColumn"\n  data-test-subj="embeddedSavedSearchDocTable"\n  inspector-adapters="inspectorAdapters"\n>\n</doc-table>\n'},6101:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.visualizeEmbeddableFactoryProvider=visualizeEmbeddableFactoryProvider;var _embeddable_factories_registry=__webpack_require__(671);var _vis_types=__webpack_require__(85);var _visualize_embeddable_factory=__webpack_require__(6102);function visualizeEmbeddableFactoryProvider(Private){var VisualizeEmbeddableFactoryProvider=function VisualizeEmbeddableFactoryProvider(savedVisualizations,config){return new _visualize_embeddable_factory.VisualizeEmbeddableFactory(savedVisualizations,config,Private(_vis_types.VisTypesRegistryProvider))};return Private(VisualizeEmbeddableFactoryProvider)}_embeddable_factories_registry.EmbeddableFactoriesRegistryProvider.register(visualizeEmbeddableFactoryProvider)},6102:function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.VisualizeEmbeddableFactory=void 0;var _i18n=__webpack_require__(5);var _chrome=_interopRequireDefault(__webpack_require__(19));var _embeddable=__webpack_require__(180);var _loader=__webpack_require__(1024);var _capabilities=__webpack_require__(141);var _visualize_embeddable=__webpack_require__(6103);var _disabled_lab_embeddable=__webpack_require__(6104);var _get_index_pattern=__webpack_require__(6106);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var VisualizeEmbeddableFactory=function(_EmbeddableFactory){_inherits(VisualizeEmbeddableFactory,_EmbeddableFactory);function VisualizeEmbeddableFactory(savedVisualizations,config,visTypes){var _this;_classCallCheck(this,VisualizeEmbeddableFactory);_this=_possibleConstructorReturn(this,_getPrototypeOf(VisualizeEmbeddableFactory).call(this,{name:"visualization",savedObjectMetaData:{name:_i18n.i18n.translate("kbn.visualize.savedObjectName",{defaultMessage:"Visualization"}),type:"visualization",getIconForSavedObject:function getIconForSavedObject(savedObject){return visTypes.byName[JSON.parse(savedObject.attributes.visState).type].icon||"visualizeApp"},getTooltipForSavedObject:function getTooltipForSavedObject(savedObject){return"".concat(savedObject.attributes.title," (").concat(visTypes.byName[JSON.parse(savedObject.attributes.visState).type].title,")")},showSavedObject:function showSavedObject(savedObject){var typeName=JSON.parse(savedObject.attributes.visState).type;var visType=visTypes.byName[typeName];if(!visType){return false}if(_chrome["default"].getUiSettingsClient().get("visualize:enableLabs")){return true}return visType.stage!=="experimental"}}}));_defineProperty(_assertThisInitialized(_this),"savedVisualizations",void 0);_defineProperty(_assertThisInitialized(_this),"config",void 0);_this.config=config;_this.savedVisualizations=savedVisualizations;return _this}_createClass(VisualizeEmbeddableFactory,[{key:"getEditPath",value:function getEditPath(panelId){return this.savedVisualizations.urlFor(panelId)}},{key:"create",value:function(){var _create=_asyncToGenerator(regeneratorRuntime.mark(function _callee(panelMetadata,onEmbeddableStateChanged){var visId,editUrl,editable,loader,savedObject,isLabsEnabled,indexPattern,indexPatterns;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:visId=panelMetadata.id;editUrl=this.getEditPath(visId);editable=_capabilities.capabilities.get().visualize.save;_context.next=5;return(0,_loader.getVisualizeLoader)();case 5:loader=_context.sent;_context.next=8;return this.savedVisualizations.get(visId);case 8:savedObject=_context.sent;isLabsEnabled=this.config.get("visualize:enableLabs");if(!(!isLabsEnabled&&savedObject.vis.type.stage==="experimental")){_context.next=12;break}return _context.abrupt("return",new _disabled_lab_embeddable.DisabledLabEmbeddable(savedObject.title));case 12:_context.next=14;return(0,_get_index_pattern.getIndexPattern)(savedObject);case 14:indexPattern=_context.sent;indexPatterns=indexPattern?[indexPattern]:[];return _context.abrupt("return",new _visualize_embeddable.VisualizeEmbeddable({onEmbeddableStateChanged:onEmbeddableStateChanged,savedVisualization:savedObject,editUrl:editUrl,editable:editable,loader:loader,indexPatterns:indexPatterns}));case 17:case"end":return _context.stop()}}},_callee,this)}));function create(_x,_x2){return _create.apply(this,arguments)}return create}()}]);return VisualizeEmbeddableFactory}(_embeddable.EmbeddableFactory);exports.VisualizeEmbeddableFactory=VisualizeEmbeddableFactory},6103:function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.VisualizeEmbeddable=void 0;var _lodash=_interopRequireDefault(__webpack_require__(1));var _embeddable=__webpack_require__(180);var _persisted_state=__webpack_require__(351);var _i18n=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var VisualizeEmbeddable=function(_Embeddable){_inherits(VisualizeEmbeddable,_Embeddable);function VisualizeEmbeddable(_ref){var _this;var onEmbeddableStateChanged=_ref.onEmbeddableStateChanged,savedVisualization=_ref.savedVisualization,indexPatterns=_ref.indexPatterns,editUrl=_ref.editUrl,editable=_ref.editable,loader=_ref.loader;_classCallCheck(this,VisualizeEmbeddable);_this=_possibleConstructorReturn(this,_getPrototypeOf(VisualizeEmbeddable).call(this,{title:savedVisualization.title,editUrl:editUrl,editLabel:_i18n.i18n.translate("kbn.embeddable.visualize.editLabel",{defaultMessage:"Edit visualization"}),editable:editable,indexPatterns:indexPatterns}));_defineProperty(_assertThisInitialized(_this),"onEmbeddableStateChanged",void 0);_defineProperty(_assertThisInitialized(_this),"savedVisualization",void 0);_defineProperty(_assertThisInitialized(_this),"loader",void 0);_defineProperty(_assertThisInitialized(_this),"uiState",void 0);_defineProperty(_assertThisInitialized(_this),"handler",void 0);_defineProperty(_assertThisInitialized(_this),"customization",void 0);_defineProperty(_assertThisInitialized(_this),"panelTitle",void 0);_defineProperty(_assertThisInitialized(_this),"timeRange",void 0);_defineProperty(_assertThisInitialized(_this),"query",void 0);_defineProperty(_assertThisInitialized(_this),"filters",void 0);_defineProperty(_assertThisInitialized(_this),"uiStateChangeHandler",function(){_this.customization=_this.uiState.toJSON();_this.onEmbeddableStateChanged(_this.getEmbeddableState())});_this.onEmbeddableStateChanged=onEmbeddableStateChanged;_this.savedVisualization=savedVisualization;_this.loader=loader;var parsedUiState=savedVisualization.uiStateJSON?JSON.parse(savedVisualization.uiStateJSON):{};_this.uiState=new _persisted_state.PersistedState(parsedUiState);_this.uiState.on("change",_this.uiStateChangeHandler);return _this}_createClass(VisualizeEmbeddable,[{key:"getInspectorAdapters",value:function getInspectorAdapters(){if(!this.handler){return undefined}return this.handler.inspectorAdapters}},{key:"getEmbeddableState",value:function getEmbeddableState(){return{customization:this.customization}}},{key:"transferCustomizationsToUiState",value:function transferCustomizationsToUiState(containerState){var _this2=this;var customization=containerState.embeddableCustomization;if(customization&&!_lodash["default"].isEqual(this.customization,customization)){this.uiState.off("change",this.uiStateChangeHandler);this.uiState.clearAllKeys();Object.getOwnPropertyNames(customization).forEach(function(key){_this2.uiState.set(key,customization[key])});this.customization=customization;this.uiState.on("change",this.uiStateChangeHandler)}}},{key:"onContainerStateChanged",value:function onContainerStateChanged(containerState){this.transferCustomizationsToUiState(containerState);var updatedParams={};if(containerState.timeRange!==this.timeRange){updatedParams.timeRange=containerState.timeRange;this.timeRange=containerState.timeRange}if(containerState.filters!==this.filters){updatedParams.filters=containerState.filters;this.filters=containerState.filters}if(containerState.query!==this.query){updatedParams.query=containerState.query;this.query=containerState.query}var derivedPanelTitle=this.getPanelTitle(containerState);if(this.panelTitle!==derivedPanelTitle){updatedParams.dataAttrs={title:derivedPanelTitle};this.panelTitle=derivedPanelTitle}if(this.handler&&!_lodash["default"].isEmpty(updatedParams)){this.handler.update(updatedParams)}}},{key:"render",value:function render(domNode,containerState){this.panelTitle=this.getPanelTitle(containerState);this.timeRange=containerState.timeRange;this.query=containerState.query;this.filters=containerState.filters;this.transferCustomizationsToUiState(containerState);var dataAttrs={"shared-item":"",title:this.panelTitle};if(this.savedVisualization.description){dataAttrs.description=this.savedVisualization.description}var handlerParams={uiState:this.uiState,append:true,timeRange:containerState.timeRange,query:containerState.query,filters:containerState.filters,cssClass:"embPanel__content embPanel__content--fullWidth",dataAttrs:dataAttrs};this.handler=this.loader.embedVisualizationWithSavedObject(domNode,this.savedVisualization,handlerParams)}},{key:"destroy",value:function destroy(){this.uiState.off("change",this.uiStateChangeHandler);this.savedVisualization.destroy();if(this.handler){this.handler.destroy();this.handler.getElement().remove()}}},{key:"reload",value:function reload(){if(this.handler){this.handler.reload()}}},{key:"getPanelTitle",value:function getPanelTitle(containerState){var derivedPanelTitle="";if(!containerState.hidePanelTitles){derivedPanelTitle=containerState.customTitle!==undefined?containerState.customTitle:this.savedVisualization.title}return derivedPanelTitle}}]);return VisualizeEmbeddable}(_embeddable.Embeddable);exports.VisualizeEmbeddable=VisualizeEmbeddable},6104:function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.DisabledLabEmbeddable=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _reactDom=_interopRequireDefault(__webpack_require__(27));var _embeddable=__webpack_require__(180);var _i18n=__webpack_require__(28);var _disabled_lab_visualization=__webpack_require__(6105);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var DisabledLabEmbeddable=function(_Embeddable){_inherits(DisabledLabEmbeddable,_Embeddable);function DisabledLabEmbeddable(title){var _this;_classCallCheck(this,DisabledLabEmbeddable);_this=_possibleConstructorReturn(this,_getPrototypeOf(DisabledLabEmbeddable).call(this,{title:title}));_defineProperty(_assertThisInitialized(_this),"domNode",void 0);return _this}_createClass(DisabledLabEmbeddable,[{key:"render",value:function render(domNode){if(this.metadata.title){this.domNode=domNode;_reactDom["default"].render(_react["default"].createElement(_i18n.I18nContext,null,_react["default"].createElement(_disabled_lab_visualization.DisabledLabVisualization,{title:this.metadata.title})),domNode)}}},{key:"destroy",value:function destroy(){if(this.domNode){_reactDom["default"].unmountComponentAtNode(this.domNode)}}}]);return DisabledLabEmbeddable}(_embeddable.Embeddable);exports.DisabledLabEmbeddable=DisabledLabEmbeddable},6105:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DisabledLabVisualization=DisabledLabVisualization;var _react=__webpack_require__(10);var _react2=_interopRequireDefault(__webpack_require__(0));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function DisabledLabVisualization(_ref){var title=_ref.title;return _react2["default"].createElement("div",{className:"visDisabledLabVisualization"},_react2["default"].createElement("div",{className:"kuiVerticalRhythm visDisabledLabVisualization__icon kuiIcon fa-flask","aria-hidden":"true"}),_react2["default"].createElement("div",{className:"kuiVerticalRhythm"},_react2["default"].createElement(_react.FormattedMessage,{id:"kbn.visualize.disabledLabVisualizationTitle",defaultMessage:"{title} is a lab visualization.",values:{title:_react2["default"].createElement("em",{className:"visDisabledLabVisualization__title"},title)}})),_react2["default"].createElement("div",{className:"kuiVerticalRhythm"},_react2["default"].createElement(_react.FormattedMessage,{id:"kbn.visualize.disabledLabVisualizationMessage",defaultMessage:"Please turn on lab-mode in the advanced settings to see lab visualizations."})))}},6106:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getIndexPattern=getIndexPattern;var _chrome=_interopRequireDefault(__webpack_require__(19));var _static_utils=__webpack_require__(789);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function getIndexPattern(_x){return _getIndexPattern.apply(this,arguments)}function _getIndexPattern(){_getIndexPattern=_asyncToGenerator(regeneratorRuntime.mark(function _callee(savedVis){var config,savedObjectsClient,defaultIndex,indexPatternObjects,_indexPatternObjects$,_indexPatternObjects$2,indexPattern,savedObject;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(savedVis.vis.type.name!=="metrics")){_context.next=2;break}return _context.abrupt("return",savedVis.vis.indexPattern);case 2:config=_chrome["default"].getUiSettingsClient();savedObjectsClient=_chrome["default"].getSavedObjectsClient();defaultIndex=config.get("defaultIndex");if(!savedVis.vis.params.index_pattern){_context.next=11;break}_context.next=8;return savedObjectsClient.find({type:"index-pattern",fields:["title","fields"],search:'"'.concat(savedVis.vis.params.index_pattern,'"'),searchFields:["title"]});case 8:indexPatternObjects=_context.sent;_indexPatternObjects$=indexPatternObjects.savedObjects.map(_static_utils.getFromSavedObject),_indexPatternObjects$2=_slicedToArray(_indexPatternObjects$,1),indexPattern=_indexPatternObjects$2[0];return _context.abrupt("return",indexPattern);case 11:_context.next=13;return savedObjectsClient.get("index-pattern",defaultIndex);case 13:savedObject=_context.sent;return _context.abrupt("return",(0,_static_utils.getFromSavedObject)(savedObject));case 15:case"end":return _context.stop()}}},_callee)}));return _getIndexPattern.apply(this,arguments)}},6107:function(module,exports,__webpack_require__){__webpack_require__(6108)},6108:function(module,exports,__webpack_require__){"use strict";var _data_view=__webpack_require__(6109);var _requests_view=__webpack_require__(6113);var _inspector=__webpack_require__(310);_inspector.viewRegistry.register(_data_view.DataView);_inspector.viewRegistry.register(_requests_view.RequestsView)},6109:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DataView=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(2);var _inspector=__webpack_require__(310);var _data_table=__webpack_require__(6110);var _react2=__webpack_require__(10);var _i18n=__webpack_require__(5);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var DataViewComponent=function(_Component){_inherits(DataViewComponent,_Component);function DataViewComponent(){var _getPrototypeOf2;var _this;_classCallCheck(this,DataViewComponent);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(DataViewComponent)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"_isMounted",false);_defineProperty(_assertThisInitialized(_this),"state",{tabularData:null,tabularOptions:{},tabularLoader:null});_defineProperty(_assertThisInitialized(_this),"onUpdateData",function(type){if(type==="tabular"){_this.setState({tabularData:null,tabularOptions:{},tabularPromise:_this.props.adapters.data.getTabular()})}});return _this}_createClass(DataViewComponent,[{key:"finishLoadingData",value:function finishLoadingData(){var _this2=this;if(this.state.tabularPromise){this.state.tabularPromise.then(function(_ref){var data=_ref.data,options=_ref.options;if(_this2._isMounted){_this2.setState({tabularData:data,tabularOptions:options,tabularPromise:null})}})}}},{key:"componentDidMount",value:function componentDidMount(){this._isMounted=true;this.props.adapters.data.on("change",this.onUpdateData);this.finishLoadingData()}},{key:"componentWillUnmount",value:function componentWillUnmount(){this._isMounted=false;this.props.adapters.data.removeListener("change",this.onUpdateData)}},{key:"componentDidUpdate",value:function componentDidUpdate(){this.finishLoadingData()}},{key:"renderNoData",value:function renderNoData(){return _react["default"].createElement(_inspector.InspectorView,{useFlex:true},_react["default"].createElement(_eui.EuiEmptyPrompt,{title:_react["default"].createElement("h2",null,_react["default"].createElement(_react2.FormattedMessage,{id:"inspectorViews.data.noDataAvailableTitle",defaultMessage:"No data available"})),body:_react["default"].createElement(_react["default"].Fragment,null,_react["default"].createElement("p",null,_react["default"].createElement(_react2.FormattedMessage,{id:"inspectorViews.data.noDataAvailableDescription",defaultMessage:"The element did not provide any data."})))}))}},{key:"renderLoading",value:function renderLoading(){return _react["default"].createElement(_inspector.InspectorView,{useFlex:true},_react["default"].createElement(_eui.EuiFlexGroup,{justifyContent:"center",alignItems:"center"},_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiPanel,{className:"eui-textCenter"},_react["default"].createElement(_eui.EuiLoadingChart,{size:"m"}),_react["default"].createElement(_eui.EuiSpacer,{size:"s"}),_react["default"].createElement(_eui.EuiText,null,_react["default"].createElement("p",null,_react["default"].createElement(_react2.FormattedMessage,{id:"inspectorViews.data.gatheringDataLabel",defaultMessage:"Gathering data"})))))))}},{key:"render",value:function render(){if(this.state.tabularPromise){return this.renderLoading()}else if(!this.state.tabularData){return this.renderNoData()}return _react["default"].createElement(_inspector.InspectorView,null,_react["default"].createElement(_data_table.DataTableFormat,{data:this.state.tabularData,isFormatted:this.state.tabularOptions.returnsFormattedValues,exportTitle:this.props.title}))}}],[{key:"getDerivedStateFromProps",value:function getDerivedStateFromProps(nextProps,state){if(nextProps.adapters===state.adapters){return null}return{adapters:nextProps.adapters,tabularData:null,tabularOptions:{},tabularPromise:nextProps.adapters.data.getTabular()}}}]);return DataViewComponent}(_react.Component);var DataView={title:_i18n.i18n.translate("inspectorViews.data.dataTitle",{defaultMessage:"Data"}),order:10,help:_i18n.i18n.translate("inspectorViews.data.dataDescriptionTooltip",{defaultMessage:"View the data behind the visualization"}),shouldShow:function shouldShow(adapters){return Boolean(adapters.data)},component:DataViewComponent};exports.DataView=DataView},6110:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DataTableFormat=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(17));var _eui=__webpack_require__(2);var _react2=__webpack_require__(10);var _i18n=__webpack_require__(5);var _download_options=__webpack_require__(6111);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var DataTableFormat=function(_Component){_inherits(DataTableFormat,_Component);function DataTableFormat(){var _getPrototypeOf2;var _this;_classCallCheck(this,DataTableFormat);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(DataTableFormat)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"state",{});return _this}_createClass(DataTableFormat,[{key:"render",value:function render(){var _this$state=this.state,columns=_this$state.columns,rows=_this$state.rows;var pagination={pageSizeOptions:[10,20,50],initialPageSize:20};return _react["default"].createElement(_react["default"].Fragment,null,_react["default"].createElement(_eui.EuiFlexGroup,null,_react["default"].createElement(_eui.EuiFlexItem,{grow:true}),_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_download_options.DataDownloadOptions,{columns:this.state.columns,rows:this.state.rows,isFormatted:this.props.isFormatted,title:this.props.exportTitle}))),_react["default"].createElement(_eui.EuiSpacer,{size:"s"}),_react["default"].createElement(_eui.EuiInMemoryTable,{responsive:false,className:"insDataTableFormat__table","data-test-subj":"inspectorTable",columns:columns,items:rows,sorting:true,pagination:pagination,compressed:true}))}}],[{key:"renderCell",value:function renderCell(col,value,isFormatted){return _react["default"].createElement(_eui.EuiFlexGroup,{responsive:false,gutterSize:"s",alignItems:"center"},_react["default"].createElement(_eui.EuiFlexItem,{grow:false},isFormatted?value.formatted:value),_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiFlexGroup,{responsive:false,gutterSize:"none",alignItems:"center"},col.filter&&_react["default"].createElement(_eui.EuiToolTip,{position:"bottom",content:_react["default"].createElement(_react2.FormattedMessage,{id:"inspectorViews.data.filterForValueButtonTooltip",defaultMessage:"Filter for value"})},_react["default"].createElement(_eui.EuiButtonIcon,{iconType:"plusInCircle",color:"text","aria-label":_i18n.i18n.translate("inspectorViews.data.filterForValueButtonAriaLabel",{defaultMessage:"Filter for value"}),"data-test-subj":"filterForInspectorCellValue",className:"insDataTableFormat__filter",onClick:function onClick(){return col.filter(value)}})),col.filterOut&&_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiToolTip,{position:"bottom",content:_react["default"].createElement(_react2.FormattedMessage,{id:"inspectorViews.data.filterOutValueButtonTooltip",defaultMessage:"Filter out value"})},_react["default"].createElement(_eui.EuiButtonIcon,{iconType:"minusInCircle",color:"text","aria-label":_i18n.i18n.translate("inspectorViews.data.filterOutValueButtonAriaLabel",{defaultMessage:"Filter out value"}),"data-test-subj":"filterOutInspectorCellValue",className:"insDataTableFormat__filter",onClick:function onClick(){return col.filterOut(value)}}))))))}},{key:"getDerivedStateFromProps",value:function getDerivedStateFromProps(_ref){var data=_ref.data,isFormatted=_ref.isFormatted;if(!data){return{columns:null,rows:null}}var columns=data.columns.map(function(col){return{name:col.name,field:col.field,sortable:isFormatted?function(row){return row[col.field].raw}:true,render:function render(value){return DataTableFormat.renderCell(col,value,isFormatted)}}});return{columns:columns,rows:data.rows}}}]);return DataTableFormat}(_react.Component);exports.DataTableFormat=DataTableFormat;DataTableFormat.propTypes={data:_propTypes["default"].object.isRequired,exportTitle:_propTypes["default"].string.isRequired,isFormatted:_propTypes["default"].bool}},6111:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DataDownloadOptions=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(2);var _export_csv=__webpack_require__(6112);var _react2=__webpack_require__(10);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var DataDownloadOptions=function(_Component){_inherits(DataDownloadOptions,_Component);function DataDownloadOptions(){var _getPrototypeOf2;var _this;_classCallCheck(this,DataDownloadOptions);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(DataDownloadOptions)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"state",{isPopoverOpen:false});_defineProperty(_assertThisInitialized(_this),"onTogglePopover",function(){_this.setState(function(state){return{isPopoverOpen:!state.isPopoverOpen}})});_defineProperty(_assertThisInitialized(_this),"closePopover",function(){_this.setState({isPopoverOpen:false})});_defineProperty(_assertThisInitialized(_this),"exportCsv",function(){(0,_export_csv.exportAsCsv)("".concat(_this.props.title,".csv"),_this.props.columns,_this.props.rows)});_defineProperty(_assertThisInitialized(_this),"exportFormattedCsv",function(){(0,_export_csv.exportAsCsv)("".concat(_this.props.title,".csv"),_this.props.columns,_this.props.rows,function(item){return item.formatted})});_defineProperty(_assertThisInitialized(_this),"exportFormattedAsRawCsv",function(){(0,_export_csv.exportAsCsv)("".concat(_this.props.title,".csv"),_this.props.columns,_this.props.rows,function(item){return item.raw})});return _this}_createClass(DataDownloadOptions,[{key:"renderUnformattedDownload",value:function renderUnformattedDownload(){return _react["default"].createElement(_eui.EuiButton,{size:"s",onClick:this.exportCsv},_react["default"].createElement(_react2.FormattedMessage,{id:"inspectorViews.data.downloadCSVButtonLabel",defaultMessage:"Download CSV"}))}},{key:"renderFormattedDownloads",value:function renderFormattedDownloads(){var button=_react["default"].createElement(_eui.EuiButton,{iconType:"arrowDown",iconSide:"right",size:"s",onClick:this.onTogglePopover},_react["default"].createElement(_react2.FormattedMessage,{id:"inspectorViews.data.downloadCSVToggleButtonLabel",defaultMessage:"Download CSV"}));var items=[_react["default"].createElement(_eui.EuiContextMenuItem,{key:"csv",onClick:this.exportFormattedCsv,toolTipContent:_react["default"].createElement(_react2.FormattedMessage,{id:"inspectorViews.data.formattedCSVButtonTooltip",defaultMessage:"Download the data in table format"}),toolTipPosition:"left"},_react["default"].createElement(_react2.FormattedMessage,{id:"inspectorViews.data.formattedCSVButtonLabel",defaultMessage:"Formatted CSV"})),_react["default"].createElement(_eui.EuiContextMenuItem,{key:"rawCsv",onClick:this.exportFormattedAsRawCsv,toolTipContent:_react["default"].createElement(_react2.FormattedMessage,{id:"inspectorViews.data.rawCSVButtonTooltip",defaultMessage:"Download the data as provided, for example, dates as timestamps"}),toolTipPosition:"left"},_react["default"].createElement(_react2.FormattedMessage,{id:"inspectorViews.data.rawCSVButtonLabel",defaultMessage:"Raw CSV"}))];return _react["default"].createElement(_eui.EuiPopover,{id:"inspectorDownloadData",button:button,isOpen:this.state.isPopoverOpen,closePopover:this.closePopover,panelPaddingSize:"none",repositionOnScroll:true},_react["default"].createElement(_eui.EuiContextMenuPanel,{className:"eui-textNoWrap",items:items}))}},{key:"render",value:function render(){if(!this.props.isFormatted){return this.renderUnformattedDownload()}return this.renderFormattedDownloads()}}]);return DataDownloadOptions}(_react.Component);exports.DataDownloadOptions=DataDownloadOptions},6112:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.exportAsCsv=exportAsCsv;var _lodash=_interopRequireDefault(__webpack_require__(1));var _filesaver=__webpack_require__(1012);var _chrome=_interopRequireDefault(__webpack_require__(19));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function buildCsv(columns,rows,valueFormatter){var settings=_chrome["default"].getUiSettingsClient();var csvSeparator=settings.get("csv:separator",",");var quoteValues=settings.get("csv:quoteValues",true);var nonAlphaNumRE=/[^a-zA-Z0-9]/;var allDoubleQuoteRE=/"/g;function escape(val){if(_lodash["default"].isObject(val))val=val.valueOf();val=String(val);if(quoteValues&&nonAlphaNumRE.test(val)){val='"'.concat(val.replace(allDoubleQuoteRE,'""'),'"')}return val}var header=columns.map(function(col){return escape(col.name)});var orderedFieldNames=columns.map(function(col){return col.field});var csvRows=rows.map(function(row){return orderedFieldNames.map(function(field){return escape(valueFormatter?valueFormatter(row[field]):row[field])})});return[header].concat(_toConsumableArray(csvRows)).map(function(row){return row.join(csvSeparator)}).join("\r\n")+"\r\n"}function exportAsCsv(filename,columns,rows,valueFormatter){var csv=new Blob([buildCsv(columns,rows,valueFormatter)],{type:"text/plain;charset=utf-8"});(0,_filesaver.saveAs)(csv,filename)}},6113:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.RequestsView=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(17));var _eui=__webpack_require__(2);var _inspector=__webpack_require__(310);var _adapters=__webpack_require__(375);var _request_selector=__webpack_require__(6114);var _request_details=__webpack_require__(6115);var _react2=__webpack_require__(10);var _i18n=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var RequestsViewComponent=function(_Component){_inherits(RequestsViewComponent,_Component);function RequestsViewComponent(props){var _this;_classCallCheck(this,RequestsViewComponent);_this=_possibleConstructorReturn(this,_getPrototypeOf(RequestsViewComponent).call(this,props));_defineProperty(_assertThisInitialized(_this),"_onRequestsChange",function(){var requests=_this.props.adapters.requests.getRequests();var newState={requests:requests};if(!requests.includes(_this.state.request)){newState.request=requests.length?requests[0]:null}_this.setState(newState)});_defineProperty(_assertThisInitialized(_this),"selectRequest",function(request){if(request!==_this.state.request){_this.setState({request:request})}});props.adapters.requests.on("change",_this._onRequestsChange);var _requests=props.adapters.requests.getRequests();_this.state={requests:_requests,request:_requests.length?_requests[0]:null};return _this}_createClass(RequestsViewComponent,[{key:"componentWillUnmount",value:function componentWillUnmount(){this.props.adapters.requests.removeListener("change",this._onRequestsChange)}},{key:"renderEmptyRequests",value:function renderEmptyRequests(){return _react["default"].createElement(_inspector.InspectorView,{useFlex:true},_react["default"].createElement(_eui.EuiEmptyPrompt,{"data-test-subj":"inspectorNoRequestsMessage",title:_react["default"].createElement("h2",null,_react["default"].createElement(_react2.FormattedMessage,{id:"inspectorViews.requests.noRequestsLoggedTitle",defaultMessage:"No requests logged"})),body:_react["default"].createElement(_react["default"].Fragment,null,_react["default"].createElement("p",null,_react["default"].createElement(_react2.FormattedMessage,{id:"inspectorViews.requests.noRequestsLoggedDescription.elementHasNotLoggedAnyRequestsText",defaultMessage:"The element hasn't logged any requests (yet)."})),_react["default"].createElement("p",null,_react["default"].createElement(_react2.FormattedMessage,{id:"inspectorViews.requests.noRequestsLoggedDescription.whatDoesItUsuallyMeanText",defaultMessage:"This usually means that there was no need to fetch any data or that the element has not yet started fetching data."})))}))}},{key:"render",value:function render(){if(!this.state.requests||!this.state.requests.length){return this.renderEmptyRequests()}var failedCount=this.state.requests.filter(function(req){return req.status===_adapters.RequestStatus.ERROR}).length;return _react["default"].createElement(_inspector.InspectorView,null,_react["default"].createElement(_eui.EuiText,{size:"xs"},_react["default"].createElement("p",{role:"status","aria-live":"polite","aria-atomic":"true"},_react["default"].createElement(_react2.FormattedMessage,{id:"inspectorViews.requests.requestWasMadeDescription",defaultMessage:"{requestsCount, plural, one {# request was} other {# requests were} } made{failedRequests}",values:{requestsCount:this.state.requests.length,failedRequests:failedCount>0?_react["default"].createElement(_eui.EuiTextColor,{color:"danger"},_react["default"].createElement(_react2.FormattedMessage,{id:"inspectorViews.requests.requestWasMadeDescription.requestHadFailureText",defaultMessage:", {failedCount} had a failure",values:{failedCount:failedCount}})):""}}))),_react["default"].createElement(_eui.EuiSpacer,{size:"xs"}),_react["default"].createElement(_request_selector.RequestSelector,{requests:this.state.requests,selectedRequest:this.state.request,onRequestChanged:this.selectRequest}),_react["default"].createElement(_eui.EuiSpacer,{size:"xs"}),this.state.request&&this.state.request.description&&_react["default"].createElement(_eui.EuiText,{size:"xs"},_react["default"].createElement("p",null,this.state.request.description)),_react["default"].createElement(_eui.EuiSpacer,{size:"m"}),this.state.request&&_react["default"].createElement(_request_details.RequestDetails,{request:this.state.request}))}}]);return RequestsViewComponent}(_react.Component);RequestsViewComponent.propTypes={adapters:_propTypes["default"].object.isRequired};var RequestsView={title:_i18n.i18n.translate("inspectorViews.requests.requestsTitle",{defaultMessage:"Requests"}),order:20,help:_i18n.i18n.translate("inspectorViews.requests.requestsDescriptionTooltip",{defaultMessage:"View the requests that collected the data"}),shouldShow:function shouldShow(adapters){return Boolean(adapters.requests)},component:RequestsViewComponent};exports.RequestsView=RequestsView},6114:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.RequestSelector=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(17));var _eui=__webpack_require__(2);var _react2=__webpack_require__(10);var _i18n=__webpack_require__(5);var _adapters=__webpack_require__(375);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var RequestSelector=function(_Component){_inherits(RequestSelector,_Component);function RequestSelector(){var _getPrototypeOf2;var _this;_classCallCheck(this,RequestSelector);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(RequestSelector)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"state",{isPopoverOpen:false});_defineProperty(_assertThisInitialized(_this),"togglePopover",function(){_this.setState(function(prevState){return{isPopoverOpen:!prevState.isPopoverOpen}})});_defineProperty(_assertThisInitialized(_this),"closePopover",function(){_this.setState({isPopoverOpen:false})});_defineProperty(_assertThisInitialized(_this),"renderRequestDropdownItem",function(request,index){var hasFailed=request.status===_adapters.RequestStatus.ERROR;var inProgress=request.status===_adapters.RequestStatus.PENDING;return _react["default"].createElement(_eui.EuiContextMenuItem,{key:index,icon:request===_this.props.selectedRequest?"check":"empty",onClick:function onClick(){_this.props.onRequestChanged(request);_this.closePopover()},toolTipContent:request.description,toolTipPosition:"left","data-test-subj":"inspectorRequestChooser".concat(request.name)},_react["default"].createElement(_eui.EuiTextColor,{color:hasFailed?"danger":"default"},request.name,hasFailed&&_react["default"].createElement(_react2.FormattedMessage,{id:"inspectorViews.requests.failedLabel",defaultMessage:" (failed)"}),inProgress&&_react["default"].createElement(_eui.EuiLoadingSpinner,{size:"s","aria-label":_i18n.i18n.translate("inspectorViews.requests.requestInProgressAriaLabel",{defaultMessage:"Request in progress"}),className:"insRequestSelector__menuSpinner"})))});return _this}_createClass(RequestSelector,[{key:"renderRequestDropdown",value:function renderRequestDropdown(){var button=_react["default"].createElement(_eui.EuiButtonEmpty,{iconType:"arrowDown",iconSide:"right",size:"s",onClick:this.togglePopover,"data-test-subj":"inspectorRequestChooser"},this.props.selectedRequest.name);return _react["default"].createElement(_eui.EuiPopover,{id:"inspectorRequestChooser",button:button,isOpen:this.state.isPopoverOpen,closePopover:this.closePopover,panelPaddingSize:"none",anchorPosition:"downLeft",repositionOnScroll:true},_react["default"].createElement(_eui.EuiContextMenuPanel,{items:this.props.requests.map(this.renderRequestDropdownItem),"data-test-subj":"inspectorRequestChooserMenuPanel"}))}},{key:"render",value:function render(){var _this$props=this.props,selectedRequest=_this$props.selectedRequest,requests=_this$props.requests;return _react["default"].createElement(_eui.EuiFlexGroup,{alignItems:"center",gutterSize:"xs"},_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement("strong",null,_react["default"].createElement(_react2.FormattedMessage,{id:"inspectorViews.requests.requestLabel",defaultMessage:"Request:"}))),_react["default"].createElement(_eui.EuiFlexItem,{grow:true},requests.length<=1&&_react["default"].createElement("div",{className:"insRequestSelector__singleRequest","data-test-subj":"inspectorRequestName"},selectedRequest.name),requests.length>1&&this.renderRequestDropdown()),_react["default"].createElement(_eui.EuiFlexItem,{grow:false},selectedRequest.status!==_adapters.RequestStatus.PENDING&&_react["default"].createElement(_eui.EuiToolTip,{position:"left",title:selectedRequest.status===_adapters.RequestStatus.OK?_react["default"].createElement(_react2.FormattedMessage,{id:"inspectorViews.requests.requestSucceededTooltipTitle",defaultMessage:"Request succeeded"}):_react["default"].createElement(_react2.FormattedMessage,{id:"inspectorViews.requests.requestFailedTooltipTitle",defaultMessage:"Request failed"}),content:_react["default"].createElement(_react2.FormattedMessage,{id:"inspectorViews.requests.requestTooltipDescription",defaultMessage:"The total time the request took."})},_react["default"].createElement(_eui.EuiBadge,{color:selectedRequest.status===_adapters.RequestStatus.OK?"secondary":"danger",iconType:selectedRequest.status===_adapters.RequestStatus.OK?"check":"cross"},_react["default"].createElement(_react2.FormattedMessage,{id:"inspectorViews.requests.requestTimeLabel",defaultMessage:"{requestTime}ms",values:{requestTime:selectedRequest.time}}))),selectedRequest.status===_adapters.RequestStatus.PENDING&&_react["default"].createElement(_eui.EuiLoadingSpinner,{size:"m","aria-label":_i18n.i18n.translate("inspectorViews.requests.requestInProgressAriaLabel",{defaultMessage:"Request in progress"})})))}}]);return RequestSelector}(_react.Component);exports.RequestSelector=RequestSelector;RequestSelector.propTypes={requests:_propTypes["default"].array.isRequired,selectedRequest:_propTypes["default"].object.isRequired}},6115:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.RequestDetails=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(17));var _eui=__webpack_require__(2);var _details=__webpack_require__(6116);var _i18n=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var DETAILS=[{name:"Statistics",label:_i18n.i18n.translate("inspectorViews.requests.statisticsTabLabel",{defaultMessage:"Statistics"}),component:_details.RequestDetailsStats},{name:"Request",label:_i18n.i18n.translate("inspectorViews.requests.requestTabLabel",{defaultMessage:"Request"}),component:_details.RequestDetailsRequest},{name:"Response",label:_i18n.i18n.translate("inspectorViews.requests.responseTabLabel",{defaultMessage:"Response"}),component:_details.RequestDetailsResponse}];var RequestDetails=function(_Component){_inherits(RequestDetails,_Component);function RequestDetails(){var _getPrototypeOf2;var _this;_classCallCheck(this,RequestDetails);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(RequestDetails)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"state",{availableDetails:[],selectedDetail:null});_defineProperty(_assertThisInitialized(_this),"selectDetailsTab",function(detail){if(detail!==_this.state.selectedDetail){_this.setState({selectedDetail:detail})}});_defineProperty(_assertThisInitialized(_this),"renderDetailTab",function(detail){return _react["default"].createElement(_eui.EuiTab,{key:detail.name,isSelected:detail===_this.state.selectedDetail,onClick:function onClick(){return _this.selectDetailsTab(detail)},"data-test-subj":"inspectorRequestDetail".concat(detail.name)},detail.label)});return _this}_createClass(RequestDetails,[{key:"render",value:function render(){if(this.state.availableDetails.length===0){return null}var DetailComponent=this.state.selectedDetail.component;return _react["default"].createElement("div",null,_react["default"].createElement(_eui.EuiTabs,{size:"s"},this.state.availableDetails.map(this.renderDetailTab)),_react["default"].createElement(DetailComponent,{request:this.props.request}))}}],[{key:"getDerivedStateFromProps",value:function getDerivedStateFromProps(nextProps,prevState){var selectedDetail=prevState&&prevState.selectedDetail;var availableDetails=DETAILS.filter(function(detail){return!detail.component.shouldShow||detail.component.shouldShow(nextProps.request)});if(selectedDetail&&availableDetails.includes(selectedDetail)){return{availableDetails:availableDetails}}return{availableDetails:availableDetails,selectedDetail:availableDetails[0]}}}]);return RequestDetails}(_react.Component);exports.RequestDetails=RequestDetails;RequestDetails.propTypes={request:_propTypes["default"].object.isRequired}},6116:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _req_details_request=__webpack_require__(6117);Object.keys(_req_details_request).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _req_details_request[key]}})});var _req_details_response=__webpack_require__(6118);Object.keys(_req_details_response).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _req_details_response[key]}})});var _req_details_stats=__webpack_require__(6119);Object.keys(_req_details_stats).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _req_details_stats[key]}})})},6117:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.RequestDetailsRequest=RequestDetailsRequest;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function RequestDetailsRequest(props){return _react["default"].createElement(_eui.EuiCodeBlock,{language:"json",paddingSize:"s",isCopyable:true,"data-test-subj":"inspectorRequestBody"},JSON.stringify(props.request.json,null,2))}RequestDetailsRequest.shouldShow=function(request){return!!request.json}},6118:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.RequestDetailsResponse=RequestDetailsResponse;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function RequestDetailsResponse(props){return _react["default"].createElement(_eui.EuiCodeBlock,{language:"json",paddingSize:"s",isCopyable:true,"data-test-subj":"inspectorResponseBody"},JSON.stringify(props.request.response.json,null,2))}RequestDetailsResponse.shouldShow=function(request){return request.response&&request.response.json}},6119:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.RequestDetailsStats=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(17));var _eui=__webpack_require__(2);var _i18n=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var RequestDetailsStats=function(_Component){_inherits(RequestDetailsStats,_Component);function RequestDetailsStats(){var _getPrototypeOf2;var _this;_classCallCheck(this,RequestDetailsStats);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(RequestDetailsStats)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"renderStatRow",function(stat){return[_react["default"].createElement(_eui.EuiTableRow,{key:stat.id},_react["default"].createElement(_eui.EuiTableRowCell,null,_react["default"].createElement("span",{className:"insRequestDetailsStats__icon"},stat.description&&_react["default"].createElement(_eui.EuiIconTip,{"aria-label":_i18n.i18n.translate("inspectorViews.requests.descriptionRowIconAriaLabel",{defaultMessage:"Description"}),type:"questionInCircle",color:"subdued",content:stat.description}),!stat.description&&_react["default"].createElement(_eui.EuiIcon,{type:"empty"})),stat.label),_react["default"].createElement(_eui.EuiTableRowCell,null,stat.value))]});return _this}_createClass(RequestDetailsStats,[{key:"render",value:function render(){var stats=this.props.request.stats;var sortedStats=Object.keys(stats).sort().map(function(id){return _objectSpread({id:id},stats[id])});return _react["default"].createElement(_eui.EuiTable,{responsive:false},_react["default"].createElement(_eui.EuiTableBody,null,sortedStats.map(this.renderStatRow)))}}]);return RequestDetailsStats}(_react.Component);exports.RequestDetailsStats=RequestDetailsStats;_defineProperty(RequestDetailsStats,"shouldShow",function(request){return!!request.stats&&Object.keys(request.stats).length});RequestDetailsStats.propTypes={request:_propTypes["default"].object.isRequired}},6120:function(module,exports,__webpack_require__){__webpack_require__(6121)},6121:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.defaultSearchStrategy=void 0;var _search_strategy_registry=__webpack_require__(1361);var _is_default_type_index_pattern=__webpack_require__(1362);var _search_error=__webpack_require__(557);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function getAllFetchParams(searchRequests,Promise){return Promise.map(searchRequests,function(searchRequest){return Promise["try"](searchRequest.getFetchParams,void 0,searchRequest).then(function(fetchParams){return searchRequest.fetchParams=fetchParams}).then(function(value){return{resolved:value}})["catch"](function(error){return{rejected:error}})})}function serializeAllFetchParams(_x,_x2,_x3){return _serializeAllFetchParams.apply(this,arguments)}function _serializeAllFetchParams(){_serializeAllFetchParams=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(fetchParams,searchRequests,serializeFetchParams){var searchRequestsWithFetchParams,failedSearchRequests;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:searchRequestsWithFetchParams=[];failedSearchRequests=[];fetchParams.forEach(function(result,index){if(result.resolved){searchRequestsWithFetchParams.push(result.resolved)}else{var searchRequest=searchRequests[index];searchRequest.handleFailure(result.rejected);failedSearchRequests.push(searchRequest)}});_context2.next=5;return serializeFetchParams(searchRequestsWithFetchParams);case 5:_context2.t0=_context2.sent;_context2.t1=failedSearchRequests;return _context2.abrupt("return",{serializedFetchParams:_context2.t0,failedSearchRequests:_context2.t1});case 8:case"end":return _context2.stop()}}},_callee2)}));return _serializeAllFetchParams.apply(this,arguments)}var defaultSearchStrategy={id:"default",search:function(){var _search=_asyncToGenerator(regeneratorRuntime.mark(function _callee(_ref){var searchRequests,es,Promise,serializeFetchParams,_ref$includeFrozen,includeFrozen,_ref$maxConcurrentSha,maxConcurrentShardRequests,allFetchParams,_ref2,serializedFetchParams,failedSearchRequests,msearchParams,searching;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:searchRequests=_ref.searchRequests,es=_ref.es,Promise=_ref.Promise,serializeFetchParams=_ref.serializeFetchParams,_ref$includeFrozen=_ref.includeFrozen,includeFrozen=_ref$includeFrozen===void 0?false:_ref$includeFrozen,_ref$maxConcurrentSha=_ref.maxConcurrentShardRequests,maxConcurrentShardRequests=_ref$maxConcurrentSha===void 0?0:_ref$maxConcurrentSha;_context.next=3;return getAllFetchParams(searchRequests,Promise);case 3:allFetchParams=_context.sent;_context.next=6;return serializeAllFetchParams(allFetchParams,searchRequests,serializeFetchParams);case 6:_ref2=_context.sent;serializedFetchParams=_ref2.serializedFetchParams;failedSearchRequests=_ref2.failedSearchRequests;if(!(serializedFetchParams.trim()==="")){_context.next=11;break}return _context.abrupt("return",{failedSearchRequests:failedSearchRequests});case 11:msearchParams={rest_total_hits_as_int:true,ignore_throttled:!includeFrozen,body:serializedFetchParams};if(maxConcurrentShardRequests!==0){msearchParams.max_concurrent_shard_requests=maxConcurrentShardRequests}searching=es.msearch(msearchParams);return _context.abrupt("return",{searching:new Promise(function(resolve,reject){searching.then(function(_ref3){var responses=_ref3.responses;resolve(responses)})["catch"](function(error){var statusCode=error.statusCode,displayName=error.displayName,message=error.message,path=error.path;var searchError=new _search_error.SearchError({status:statusCode,title:displayName,message:message,path:path});reject(searchError)})}),abort:searching.abort,failedSearchRequests:failedSearchRequests});case 15:case"end":return _context.stop()}}},_callee)}));function search(_x4){return _search.apply(this,arguments)}return search}(),isViable:function isViable(indexPattern){if(!indexPattern){return false}return(0,_is_default_type_index_pattern.isDefaultTypeIndexPattern)(indexPattern)}};exports.defaultSearchStrategy=defaultSearchStrategy;(0,_search_strategy_registry.addSearchStrategy)(defaultSearchStrategy)},6122:function(module,exports){},6123:function(module,exports){},6137:function(module,exports,__webpack_require__){"use strict";var _chrome=_interopRequireDefault(__webpack_require__(19));var _routes=_interopRequireDefault(__webpack_require__(34));var _home_ng_wrapper=_interopRequireDefault(__webpack_require__(6138));var _feature_catalogue=__webpack_require__(128);var _i18n=__webpack_require__(28);var _modules=__webpack_require__(12);var _home_app=__webpack_require__(6139);var _persisted_log=__webpack_require__(262);var _i18n2=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var app=_modules.uiModules.get("apps/home",[]);app.directive("homeApp",function(reactDirective){return reactDirective((0,_i18n.wrapInI18nContext)(_home_app.HomeApp))});var homeTitle=_i18n2.i18n.translate("kbn.home.breadcrumbs.homeTitle",{defaultMessage:"Home"});function getRoute(){return{template:_home_ng_wrapper["default"],controller:function controller($scope,Private){$scope.directories=Private(_feature_catalogue.FeatureCatalogueRegistryProvider).inTitleOrder;$scope.recentlyAccessed=_persisted_log.recentlyAccessed.get().map(function(item){item.link=_chrome["default"].addBasePath(item.link);return item})},k7Breadcrumbs:function k7Breadcrumbs(){return[{text:homeTitle}]}}}_routes["default"].when("/home",getRoute());_routes["default"].when("/home/feature_directory",getRoute());_routes["default"].when("/home/tutorial_directory/:tab?",getRoute());_routes["default"].when("/home/tutorial/:id",getRoute())},6138:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<home-app\n  directories="directories"\n  recently-accessed="recentlyAccessed"\n  data-test-subj="homeApp"\n/>\n'},6139:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.HomeApp=HomeApp;var _react=_interopRequireDefault(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(17));var _home=__webpack_require__(6140);var _feature_directory=__webpack_require__(6143);var _tutorial_directory=__webpack_require__(6144);var _tutorial=__webpack_require__(6150);var _reactRouterDom=__webpack_require__(896);var _load_tutorials=__webpack_require__(2042);var _replace_template_strings=__webpack_require__(6160);var _chrome=_interopRequireDefault(__webpack_require__(19));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function HomeApp(_ref){var directories=_ref.directories;var isCloudEnabled=_chrome["default"].getInjected("isCloudEnabled",false);var apmUiEnabled=_chrome["default"].getInjected("apmUiEnabled",true);var mlEnabled=_chrome["default"].getInjected("mlEnabled",false);var savedObjectsClient=_chrome["default"].getSavedObjectsClient();var renderTutorialDirectory=function renderTutorialDirectory(props){return _react["default"].createElement(_tutorial_directory.TutorialDirectory,{addBasePath:_chrome["default"].addBasePath,openTab:props.match.params.tab,isCloudEnabled:isCloudEnabled})};var renderTutorial=function renderTutorial(props){return _react["default"].createElement(_tutorial.Tutorial,{addBasePath:_chrome["default"].addBasePath,isCloudEnabled:isCloudEnabled,getTutorial:_load_tutorials.getTutorial,replaceTemplateStrings:_replace_template_strings.replaceTemplateStrings,tutorialId:props.match.params.id,bulkCreate:savedObjectsClient.bulkCreate})};return _react["default"].createElement(_reactRouterDom.HashRouter,null,_react["default"].createElement(_reactRouterDom.Switch,null,_react["default"].createElement(_reactRouterDom.Route,{path:"/home/tutorial/:id",render:renderTutorial}),_react["default"].createElement(_reactRouterDom.Route,{path:"/home/tutorial_directory/:tab?",render:renderTutorialDirectory}),_react["default"].createElement(_reactRouterDom.Route,{path:"/home/feature_directory"},_react["default"].createElement(_feature_directory.FeatureDirectory,{addBasePath:_chrome["default"].addBasePath,directories:directories})),_react["default"].createElement(_reactRouterDom.Route,{path:"/home"},_react["default"].createElement(_home.Home,{addBasePath:_chrome["default"].addBasePath,directories:directories,apmUiEnabled:apmUiEnabled,mlEnabled:mlEnabled,find:savedObjectsClient.find,localStorage:localStorage,urlBasePath:_chrome["default"].getBasePath()}))))}HomeApp.propTypes={directories:_propTypes["default"].arrayOf(_propTypes["default"].shape({id:_propTypes["default"].string.isRequired,title:_propTypes["default"].string.isRequired,description:_propTypes["default"].string.isRequired,icon:_propTypes["default"].string.isRequired,path:_propTypes["default"].string.isRequired,showOnHomePage:_propTypes["default"].bool.isRequired,category:_propTypes["default"].string.isRequired}))}},6140:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Home=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(17));var _synopsis=__webpack_require__(1026);var _add_data=__webpack_require__(6141);var _react2=__webpack_require__(10);var _chrome=_interopRequireDefault(__webpack_require__(19));var _eui=__webpack_require__(2);var _welcome=__webpack_require__(6142);var _feature_catalogue=__webpack_require__(128);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var KEY_ENABLE_WELCOME="home:welcome:show";var Home=function(_Component){_inherits(Home,_Component);function Home(props){var _this;_classCallCheck(this,Home);_this=_possibleConstructorReturn(this,_getPrototypeOf(Home).call(this,props));_defineProperty(_assertThisInitialized(_this),"fetchIsNewKibanaInstance",_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var resp;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;setTimeout(function(){if(_this.state.isLoading){_this.setState({isWelcomeEnabled:false})}},500);_context.next=4;return _this.props.find({type:"index-pattern",fields:["title"],search:"*",search_fields:["title"],perPage:1});case 4:resp=_context.sent;_this.endLoading({isNewKibanaInstance:resp.total===0});_context.next=11;break;case 8:_context.prev=8;_context.t0=_context["catch"](0);_this.endLoading();case 11:case"end":return _context.stop()}}},_callee,null,[[0,8]])})));_defineProperty(_assertThisInitialized(_this),"endLoading",function(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};if(_this._isMounted){_this.setState(_objectSpread({},state,{isLoading:false}))}});_defineProperty(_assertThisInitialized(_this),"skipWelcome",function(){_this.props.localStorage.setItem(KEY_ENABLE_WELCOME,"false");_this._isMounted&&_this.setState({isWelcomeEnabled:false})});_defineProperty(_assertThisInitialized(_this),"renderDirectories",function(category){var _this$props=_this.props,addBasePath=_this$props.addBasePath,directories=_this$props.directories;return directories.filter(function(directory){return directory.showOnHomePage&&directory.category===category}).map(function(directory){return _react["default"].createElement(_eui.EuiFlexItem,{className:"homHome__synopsisItem",key:directory.id},_react["default"].createElement(_synopsis.Synopsis,{description:directory.description,iconType:directory.icon,title:directory.title,url:addBasePath(directory.path)}))})});var isWelcomeEnabled=!(_chrome["default"].getInjected("disableWelcomeScreen")||props.localStorage.getItem(KEY_ENABLE_WELCOME)==="false");_this.state={isLoading:isWelcomeEnabled,isNewKibanaInstance:false,isWelcomeEnabled:isWelcomeEnabled};return _this}_createClass(Home,[{key:"componentWillUnmount",value:function componentWillUnmount(){this._isMounted=false}},{key:"componentDidMount",value:function componentDidMount(){this._isMounted=true;this.fetchIsNewKibanaInstance()}},{key:"renderNormal",value:function renderNormal(){var _this$props2=this.props,apmUiEnabled=_this$props2.apmUiEnabled,mlEnabled=_this$props2.mlEnabled;return _react["default"].createElement(_eui.EuiPage,{restrictWidth:1200},_react["default"].createElement(_eui.EuiPageBody,{className:"eui-displayBlock"},_react["default"].createElement(_add_data.AddData,{apmUiEnabled:apmUiEnabled,mlEnabled:mlEnabled,isNewKibanaInstance:this.state.isNewKibanaInstance}),_react["default"].createElement(_eui.EuiSpacer,{size:"l"}),_react["default"].createElement(_eui.EuiFlexGroup,null,_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiPanel,{paddingSize:"l"},_react["default"].createElement(_eui.EuiTitle,{size:"s"},_react["default"].createElement("h3",null,_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.home.directories.visualize.nameTitle",defaultMessage:"Visualize and Explore Data"}))),_react["default"].createElement(_eui.EuiSpacer,{size:"m"}),_react["default"].createElement(_eui.EuiFlexGrid,{columns:2,gutterSize:"s"},this.renderDirectories(_feature_catalogue.FeatureCatalogueCategory.DATA)))),_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiPanel,{paddingSize:"l"},_react["default"].createElement(_eui.EuiTitle,{size:"s"},_react["default"].createElement("h3",null,_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.home.directories.manage.nameTitle",defaultMessage:"Manage and Administer the Elastic Stack"}))),_react["default"].createElement(_eui.EuiSpacer,{size:"m"}),_react["default"].createElement(_eui.EuiFlexGrid,{columns:2},this.renderDirectories(_feature_catalogue.FeatureCatalogueCategory.ADMIN))))),_react["default"].createElement(_eui.EuiSpacer,{size:"l"}),_react["default"].createElement(_eui.EuiFlexGroup,{justifyContent:"center"},_react["default"].createElement(_eui.EuiFlexItem,{grow:false,className:"eui-textCenter"},_react["default"].createElement(_eui.EuiText,{size:"s",color:"subdued"},_react["default"].createElement("p",null,_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.home.directories.notFound.description",defaultMessage:"Didnt find what you were looking for?"}))),_react["default"].createElement(_eui.EuiSpacer,{size:"s"}),_react["default"].createElement(_eui.EuiButton,{href:"#/home/feature_directory"},_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.home.directories.notFound.viewFullButtonLabel",defaultMessage:"View full directory of Kibana plugins"}))))))}},{key:"renderLoading",value:function renderLoading(){return""}},{key:"renderWelcome",value:function renderWelcome(){return _react["default"].createElement(_welcome.Welcome,{onSkip:this.skipWelcome,urlBasePath:this.props.urlBasePath})}},{key:"render",value:function render(){var _this$state=this.state,isLoading=_this$state.isLoading,isWelcomeEnabled=_this$state.isWelcomeEnabled,isNewKibanaInstance=_this$state.isNewKibanaInstance;if(isWelcomeEnabled){if(isLoading){return this.renderLoading()}if(isNewKibanaInstance){return this.renderWelcome()}}return this.renderNormal()}}]);return Home}(_react.Component);exports.Home=Home;Home.propTypes={addBasePath:_propTypes["default"].func.isRequired,directories:_propTypes["default"].arrayOf(_propTypes["default"].shape({id:_propTypes["default"].string.isRequired,title:_propTypes["default"].string.isRequired,description:_propTypes["default"].string.isRequired,icon:_propTypes["default"].string.isRequired,path:_propTypes["default"].string.isRequired,showOnHomePage:_propTypes["default"].bool.isRequired,category:_propTypes["default"].string.isRequired})),apmUiEnabled:_propTypes["default"].bool.isRequired,find:_propTypes["default"].func.isRequired,localStorage:_propTypes["default"].object.isRequired,urlBasePath:_propTypes["default"].string.isRequired,mlEnabled:_propTypes["default"].bool.isRequired}},6141:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AddData=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(17));var _classnames=_interopRequireDefault(__webpack_require__(61));var _react2=__webpack_require__(10);var _chrome=_interopRequireDefault(__webpack_require__(19));var _eui=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var basePath=_chrome["default"].getBasePath();var AddDataUi=function AddDataUi(_ref){var apmUiEnabled=_ref.apmUiEnabled,isNewKibanaInstance=_ref.isNewKibanaInstance,intl=_ref.intl,mlEnabled=_ref.mlEnabled;var renderCards=function renderCards(){var apmData={title:intl.formatMessage({id:"kbn.home.addData.apm.nameTitle",defaultMessage:"APM"}),description:intl.formatMessage({id:"kbn.home.addData.apm.nameDescription",defaultMessage:"APM automatically collects in-depth performance metrics and errors from inside your applications."}),ariaDescribedby:"aria-describedby.addAmpButtonLabel"};var loggingData={title:intl.formatMessage({id:"kbn.home.addData.logging.nameTitle",defaultMessage:"Logging"}),description:intl.formatMessage({id:"kbn.home.addData.logging.nameDescription",defaultMessage:"Ingest logs from popular data sources and easily visualize in preconfigured dashboards."}),ariaDescribedby:"aria-describedby.addLogDataButtonLabel"};var metricsData={title:intl.formatMessage({id:"kbn.home.addData.metrics.nameTitle",defaultMessage:"Metrics"}),description:intl.formatMessage({id:"kbn.home.addData.metrics.nameDescription",defaultMessage:"Collect metrics from the operating system and services running on your servers."}),ariaDescribedby:"aria-describedby.addMetricsButtonLabel"};var siemData={title:intl.formatMessage({id:"kbn.home.addData.siem.nameTitle",defaultMessage:"SIEM"}),description:intl.formatMessage({id:"kbn.home.addData.siem.nameDescription",defaultMessage:"Centralize security events for interactive investigation in ready-to-go visualizations."}),ariaDescribedby:"aria-describedby.addSiemButtonLabel"};var getApmCard=function getApmCard(){return _react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiCard,{className:"homAddData__card",icon:_react["default"].createElement(_eui.EuiIcon,{className:"homAddData__icon",type:"apmApp"}),title:apmData.title,description:_react["default"].createElement("span",{id:apmData.ariaDescribedby},apmData.description),footer:_react["default"].createElement(_eui.EuiButton,{className:"homAddData__button",href:"#/home/tutorial/apm","aria-describedby":apmData.ariaDescribedby},_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.home.addData.apm.addApmButtonLabel",defaultMessage:"Add APM"}))}))};return _react["default"].createElement(_eui.EuiFlexGroup,{className:"homeAddData__flexGroup",wrap:apmUiEnabled,gutterSize:"l",justifyContent:"spaceAround",responsive:false},apmUiEnabled!==false&&getApmCard(),_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiCard,{className:"homAddData__card",icon:_react["default"].createElement(_eui.EuiIcon,{className:"homAddData__icon",type:"loggingApp"}),title:loggingData.title,description:_react["default"].createElement("span",{id:loggingData.ariaDescribedby},loggingData.description),footer:_react["default"].createElement(_eui.EuiButton,{className:"homAddData__button",href:"#/home/tutorial_directory/logging","aria-describedby":loggingData.ariaDescribedby},_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.home.addData.logging.addLogDataButtonLabel",defaultMessage:"Add log data"}))})),_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiCard,{className:"homAddData__card",icon:_react["default"].createElement(_eui.EuiIcon,{className:"homAddData__icon",type:"monitoringApp"}),title:metricsData.title,description:_react["default"].createElement("span",{id:metricsData.ariaDescribedby},metricsData.description),footer:_react["default"].createElement(_eui.EuiButton,{className:"homAddData__button",href:"#/home/tutorial_directory/metrics","aria-describedby":metricsData.ariaDescribedby},_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.home.addData.metrics.addMetricsDataButtonLabel",defaultMessage:"Add metric data"}))})),_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiCard,{className:"homAddData__card",icon:_react["default"].createElement(_eui.EuiIcon,{className:"homAddData__icon",type:"securityAnalyticsApp"}),title:siemData.title,description:_react["default"].createElement("span",{id:siemData.ariaDescribedby},siemData.description),footer:_react["default"].createElement(_eui.EuiButton,{className:"homAddData__button",href:"#/home/tutorial_directory/siem","aria-describedby":siemData.ariaDescribedby},_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.home.addData.siem.addSiemEventsButtonLabel",defaultMessage:"Add security events"}))})))};var footerItemClasses=(0,_classnames["default"])("homAddData__footerItem",{"homAddData__footerItem--highlight":isNewKibanaInstance});return _react["default"].createElement(_eui.EuiPanel,{paddingSize:"l"},_react["default"].createElement(_eui.EuiFlexGroup,null,_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiTitle,null,_react["default"].createElement("h3",null,_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.home.addData.addDataToKibanaTitle",defaultMessage:"Add Data to Kibana"}))),_react["default"].createElement(_eui.EuiText,{size:"s"},_react["default"].createElement("p",null,_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.home.addData.addDataToKibanaDescription",defaultMessage:"Use these solutions to quickly turn your data into pre-built dashboards and monitoring systems."}))))),_react["default"].createElement(_eui.EuiSpacer,null),renderCards(),_react["default"].createElement(_eui.EuiHorizontalRule,null),_react["default"].createElement(_eui.EuiFlexGrid,{columns:mlEnabled!==false?3:2},_react["default"].createElement(_eui.EuiFlexItem,{className:footerItemClasses},_react["default"].createElement(_eui.EuiText,{size:"s"},_react["default"].createElement("strong",{style:{height:38}},_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.home.addData.sampleDataTitle",defaultMessage:"Add sample data"})),_react["default"].createElement(_eui.EuiLink,{style:{display:"block",textAlign:"center"},href:"#/home/tutorial_directory/sampleData"},_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.home.addData.sampleDataLink",defaultMessage:"Load a data set and a Kibana dashboard"})))),mlEnabled!==false?_react["default"].createElement(_eui.EuiFlexItem,{className:footerItemClasses},_react["default"].createElement(_eui.EuiText,{size:"s"},_react["default"].createElement("strong",{style:{height:38}},_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.home.addData.uploadFileTitle",defaultMessage:"Upload data from log file"})),_react["default"].createElement(_eui.EuiLink,{style:{display:"block",textAlign:"center"},href:"".concat(basePath,"/app/ml#/filedatavisualizer")},_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.home.addData.uploadFileLink",defaultMessage:"Import a CSV, NDJSON, or log file"})))):null,_react["default"].createElement(_eui.EuiFlexItem,{className:footerItemClasses},_react["default"].createElement(_eui.EuiText,{size:"s"},_react["default"].createElement("strong",{style:{height:38}},_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.home.addData.yourDataTitle",defaultMessage:"Use Elasticsearch data"})),_react["default"].createElement(_eui.EuiLink,{style:{display:"block",textAlign:"center"},href:"#/management/kibana/index_pattern"},_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.home.addData.yourDataLink",defaultMessage:"Connect to your Elasticsearch index"}))))))};AddDataUi.propTypes={apmUiEnabled:_propTypes["default"].bool.isRequired,mlEnabled:_propTypes["default"].bool.isRequired,isNewKibanaInstance:_propTypes["default"].bool.isRequired};var AddData=(0,_react2.injectI18n)(AddDataUi);exports.AddData=AddData},6142:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Welcome=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(17));var _eui=__webpack_require__(2);var _react2=__webpack_require__(10);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var Welcome=function(_React$Component){_inherits(Welcome,_React$Component);function Welcome(){var _getPrototypeOf2;var _this;_classCallCheck(this,Welcome);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(Welcome)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"hideOnEsc",function(e){if(e.key==="Escape"){_this.props.onSkip()}});return _this}_createClass(Welcome,[{key:"componentDidMount",value:function componentDidMount(){document.addEventListener("keydown",this.hideOnEsc)}},{key:"componentWillUnmount",value:function componentWillUnmount(){document.removeEventListener("keydown",this.hideOnEsc)}},{key:"render",value:function render(){var _this$props=this.props,urlBasePath=_this$props.urlBasePath,onSkip=_this$props.onSkip;return _react["default"].createElement(_eui.EuiPortal,null,_react["default"].createElement("div",{className:"homWelcome"},_react["default"].createElement("header",{className:"homWelcome__header"},_react["default"].createElement("div",{className:"homWelcome__content eui-textCenter"},_react["default"].createElement(_eui.EuiSpacer,{size:"xxl"}),_react["default"].createElement("span",{className:"homWelcome__logo"},_react["default"].createElement(_eui.EuiIcon,{type:"logoKibana",size:"xxl"})),_react["default"].createElement(_eui.EuiTitle,{size:"l",className:"homWelcome__title"},_react["default"].createElement("h1",null,_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.home.welcomeTitle",defaultMessage:"Welcome to Kibana"}))),_react["default"].createElement(_eui.EuiText,{size:"s",color:"subdued",className:"homWelcome__subtitle"},_react["default"].createElement("p",null,_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.home.welcomeDescription",defaultMessage:"Your window into the Elastic Stack"}))),_react["default"].createElement(_eui.EuiSpacer,{size:"xl"}))),_react["default"].createElement("div",{className:"homWelcome__content homWelcome-body"},_react["default"].createElement(_eui.EuiFlexGroup,{gutterSize:"l"},_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiCard,{image:"".concat(urlBasePath,"/plugins/kibana/assets/illo_dashboard.png"),textAlign:"left",title:_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.home.letsStartTitle",defaultMessage:"Let's get started"}),description:_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.home.letsStartDescription",defaultMessage:"We noticed that you don't have any data in your cluster. You can try our sample data and dashboards or jump in with your own data."}),footer:_react["default"].createElement("footer",null,_react["default"].createElement(_eui.EuiButton,{fill:true,className:"homWelcome__footerAction",href:"#/home/tutorial_directory/sampleData"},_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.home.tryButtonLabel",defaultMessage:"Try our sample data"})),_react["default"].createElement(_eui.EuiButtonEmpty,{className:"homWelcome__footerAction",onClick:onSkip,"data-test-subj":"skipWelcomeScreen"},_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.home.exploreButtonLabel",defaultMessage:"Explore on my own"})))}))))))}}]);return Welcome}(_react["default"].Component);exports.Welcome=Welcome;Welcome.propTypes={urlBasePath:_propTypes["default"].string.isRequired,onSkip:_propTypes["default"].func.isRequired}},6143:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FeatureDirectory=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(17));var _synopsis=__webpack_require__(1026);var _eui=__webpack_require__(2);var _feature_catalogue=__webpack_require__(128);var _i18n=__webpack_require__(5);var _react2=__webpack_require__(10);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ALL_TAB_ID="all";var OTHERS_TAB_ID="others";var isOtherCategory=function isOtherCategory(directory){return directory.category!==_feature_catalogue.FeatureCatalogueCategory.DATA&&directory.category!==_feature_catalogue.FeatureCatalogueCategory.ADMIN};var FeatureDirectory=function(_React$Component){_inherits(FeatureDirectory,_React$Component);function FeatureDirectory(props){var _this;_classCallCheck(this,FeatureDirectory);_this=_possibleConstructorReturn(this,_getPrototypeOf(FeatureDirectory).call(this,props));_defineProperty(_assertThisInitialized(_this),"onSelectedTabChanged",function(id){_this.setState({selectedTabId:id})});_defineProperty(_assertThisInitialized(_this),"renderTabs",function(){return _this.tabs.map(function(tab,index){return _react["default"].createElement(_eui.EuiTab,{onClick:function onClick(){return _this.onSelectedTabChanged(tab.id)},isSelected:tab.id===_this.state.selectedTabId,key:index},tab.name)})});_defineProperty(_assertThisInitialized(_this),"renderDirectories",function(){return _this.props.directories.filter(function(directory){if(_this.state.selectedTabId===ALL_TAB_ID){return true}if(_this.state.selectedTabId===OTHERS_TAB_ID){return isOtherCategory(directory)}return _this.state.selectedTabId===directory.category}).map(function(directory){return _react["default"].createElement(_eui.EuiFlexItem,{key:directory.id},_react["default"].createElement(_synopsis.Synopsis,{description:directory.description,iconType:directory.icon,title:directory.title,url:_this.props.addBasePath(directory.path),wrapInPanel:true}))})});_this.tabs=[{id:ALL_TAB_ID,name:_i18n.i18n.translate("kbn.home.directory.tabs.allTitle",{defaultMessage:"All"})},{id:_feature_catalogue.FeatureCatalogueCategory.DATA,name:_i18n.i18n.translate("kbn.home.directory.tabs.dataTitle",{defaultMessage:"Data Exploration & Visualization"})},{id:_feature_catalogue.FeatureCatalogueCategory.ADMIN,name:_i18n.i18n.translate("kbn.home.directory.tabs.administrativeTitle",{defaultMessage:"Administrative"})}];if(props.directories.some(isOtherCategory)){_this.tabs.push({id:OTHERS_TAB_ID,name:_i18n.i18n.translate("kbn.home.directory.tabs.otherTitle",{defaultMessage:"Other"})})}_this.state={selectedTabId:ALL_TAB_ID};return _this}_createClass(FeatureDirectory,[{key:"render",value:function render(){return _react["default"].createElement(_eui.EuiPage,{restrictWidth:1200},_react["default"].createElement(_eui.EuiPageBody,null,_react["default"].createElement(_eui.EuiTitle,{size:"l"},_react["default"].createElement("h1",null,_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.home.directory.directoryTitle",defaultMessage:"Directory"}))),_react["default"].createElement(_eui.EuiSpacer,{size:"m"}),_react["default"].createElement(_eui.EuiTabs,{className:"homeDirectoryTabs"},this.renderTabs()),_react["default"].createElement(_eui.EuiSpacer,null),_react["default"].createElement(_eui.EuiFlexGrid,{columns:4},this.renderDirectories())))}}]);return FeatureDirectory}(_react["default"].Component);exports.FeatureDirectory=FeatureDirectory;FeatureDirectory.propTypes={addBasePath:_propTypes["default"].func.isRequired,directories:_propTypes["default"].arrayOf(_propTypes["default"].shape({id:_propTypes["default"].string.isRequired,title:_propTypes["default"].string.isRequired,description:_propTypes["default"].string.isRequired,icon:_propTypes["default"].string.isRequired,path:_propTypes["default"].string.isRequired,showOnHomePage:_propTypes["default"].bool.isRequired,category:_propTypes["default"].string.isRequired}))}},6144:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TutorialDirectory=void 0;var _lodash=_interopRequireDefault(__webpack_require__(1));var _react=_interopRequireDefault(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(17));var _synopsis=__webpack_require__(1026);var _sample_data_set_cards=__webpack_require__(6145);var _chrome=_interopRequireDefault(__webpack_require__(19));var _eui=__webpack_require__(2);var _load_tutorials=__webpack_require__(2042);var _react2=__webpack_require__(10);var _i18n=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ALL_TAB_ID="all";var SAMPLE_DATA_TAB_ID="sampleData";var homeTitle=_i18n.i18n.translate("kbn.home.breadcrumbs.homeTitle",{defaultMessage:"Home"});var addDataTitle=_i18n.i18n.translate("kbn.home.breadcrumbs.addDataTitle",{defaultMessage:"Add data"});var TutorialDirectoryUi=function(_React$Component){_inherits(TutorialDirectoryUi,_React$Component);function TutorialDirectoryUi(props){var _this;_classCallCheck(this,TutorialDirectoryUi);_this=_possibleConstructorReturn(this,_getPrototypeOf(TutorialDirectoryUi).call(this,props));_defineProperty(_assertThisInitialized(_this),"onSelectedTabChanged",function(id){_this.setState({selectedTabId:id})});_defineProperty(_assertThisInitialized(_this),"renderTabs",function(){return _this.tabs.map(function(tab,index){return _react["default"].createElement(_eui.EuiTab,{onClick:function onClick(){return _this.onSelectedTabChanged(tab.id)},isSelected:tab.id===_this.state.selectedTabId,key:index},tab.name)})});_defineProperty(_assertThisInitialized(_this),"renderTabContent",function(){if(_this.state.selectedTabId===SAMPLE_DATA_TAB_ID){return _react["default"].createElement(_sample_data_set_cards.SampleDataSetCards,{addBasePath:_this.props.addBasePath})}return _react["default"].createElement(_eui.EuiFlexGrid,{columns:4},_this.state.tutorialCards.filter(function(tutorial){return _this.state.selectedTabId===ALL_TAB_ID||_this.state.selectedTabId===tutorial.category}).map(function(tutorial){return _react["default"].createElement(_eui.EuiFlexItem,{key:tutorial.name},_react["default"].createElement(_synopsis.Synopsis,{iconType:tutorial.icon,description:tutorial.description,title:tutorial.name,wrapInPanel:true,url:tutorial.url,onClick:tutorial.onClick,isBeta:tutorial.isBeta}))}))});_this.tabs=[{id:ALL_TAB_ID,name:_this.props.intl.formatMessage({id:"kbn.home.tutorial.tabs.allTitle",defaultMessage:"All"})},{id:"logging",name:_this.props.intl.formatMessage({id:"kbn.home.tutorial.tabs.loggingTitle",defaultMessage:"Logging"})},{id:"metrics",name:_this.props.intl.formatMessage({id:"kbn.home.tutorial.tabs.metricsTitle",defaultMessage:"Metrics"})},{id:"siem",name:_this.props.intl.formatMessage({id:"kbn.home.tutorial.tabs.siemTitle",defaultMessage:"SIEM"})},{id:SAMPLE_DATA_TAB_ID,name:_this.props.intl.formatMessage({id:"kbn.home.tutorial.tabs.sampleDataTitle",defaultMessage:"Sample data"})}];var openTab=ALL_TAB_ID;if(props.openTab&&_this.tabs.some(function(tab){return tab.id===props.openTab})){openTab=props.openTab}_this.state={selectedTabId:openTab,tutorialCards:[]};return _this}_createClass(TutorialDirectoryUi,[{key:"componentWillUnmount",value:function componentWillUnmount(){this._isMounted=false}},{key:"componentDidMount",value:function(){var _componentDidMount=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var _this2=this;var tutorialConfigs,tutorialCards;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:this._isMounted=true;_chrome["default"].breadcrumbs.set([{text:homeTitle,href:"#/home"},{text:addDataTitle}]);_context.next=4;return(0,_load_tutorials.getTutorials)();case 4:tutorialConfigs=_context.sent;if(this._isMounted){_context.next=7;break}return _context.abrupt("return");case 7:tutorialCards=tutorialConfigs.map(function(tutorialConfig){return{category:tutorialConfig.category,icon:tutorialConfig.euiIconType,name:tutorialConfig.name,description:tutorialConfig.shortDescription,url:_this2.props.addBasePath("#/home/tutorial/".concat(tutorialConfig.id)),elasticCloud:tutorialConfig.elasticCloud}});tutorialCards.push({name:this.props.intl.formatMessage({id:"kbn.home.tutorial.card.sampleDataTitle",defaultMessage:"Sample Data"}),description:this.props.intl.formatMessage({id:"kbn.home.tutorial.card.sampleDataDescription",defaultMessage:'Get started exploring Kibana with these "one click" data sets.'}),url:this.props.addBasePath("#/home/tutorial_directory/sampleData"),elasticCloud:true,onClick:this.onSelectedTabChanged.bind(null,SAMPLE_DATA_TAB_ID)});if(this.props.isCloudEnabled){tutorialCards=tutorialCards.filter(function(tutorial){return _lodash["default"].has(tutorial,"elasticCloud")})}tutorialCards.sort(function(a,b){return a.name.toLowerCase().localeCompare(b.name.toLowerCase())});this.setState({tutorialCards:tutorialCards});case 12:case"end":return _context.stop()}}},_callee,this)}));function componentDidMount(){return _componentDidMount.apply(this,arguments)}return componentDidMount}()},{key:"render",value:function render(){return _react["default"].createElement(_eui.EuiPage,{restrictWidth:1200},_react["default"].createElement(_eui.EuiPageBody,null,_react["default"].createElement(_eui.EuiTitle,{size:"l"},_react["default"].createElement("h1",null,_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.home.tutorial.addDataToKibanaTitle",defaultMessage:"Add Data to Kibana"}))),_react["default"].createElement(_eui.EuiSpacer,{size:"m"}),_react["default"].createElement(_eui.EuiTabs,null,this.renderTabs()),_react["default"].createElement(_eui.EuiSpacer,null),this.renderTabContent()))}}]);return TutorialDirectoryUi}(_react["default"].Component);TutorialDirectoryUi.propTypes={addBasePath:_propTypes["default"].func.isRequired,openTab:_propTypes["default"].string,isCloudEnabled:_propTypes["default"].bool.isRequired};var TutorialDirectory=(0,_react2.injectI18n)(TutorialDirectoryUi);exports.TutorialDirectory=TutorialDirectory},6145:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SampleDataSetCards=void 0;var _lodash=_interopRequireDefault(__webpack_require__(1));var _react=_interopRequireDefault(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(17));var _eui=__webpack_require__(2);var _sample_data_set_card=__webpack_require__(6146);var _notify=__webpack_require__(24);var _sample_data_client=__webpack_require__(6148);var _i18n=__webpack_require__(5);var _chrome=_interopRequireDefault(__webpack_require__(19));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var IS_DARK_THEME=_chrome["default"].getUiSettingsClient().get("theme:darkMode");var SampleDataSetCards=function(_React$Component){_inherits(SampleDataSetCards,_React$Component);function SampleDataSetCards(props){var _this;_classCallCheck(this,SampleDataSetCards);_this=_possibleConstructorReturn(this,_getPrototypeOf(SampleDataSetCards).call(this,props));_defineProperty(_assertThisInitialized(_this),"loadSampleDataSets",_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var sampleDataSets;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return(0,_sample_data_client.listSampleDataSets)();case 3:sampleDataSets=_context.sent;_context.next=10;break;case 6:_context.prev=6;_context.t0=_context["catch"](0);_notify.toastNotifications.addDanger({title:_i18n.i18n.translate("kbn.home.sampleDataSet.unableToLoadListErrorMessage",{defaultMessage:"Unable to load sample data sets list"}),text:"".concat(_context.t0.message)});sampleDataSets=[];case 10:if(_this._isMounted){_context.next=12;break}return _context.abrupt("return");case 12:_this.setState({sampleDataSets:sampleDataSets.sort(function(a,b){return a.name.toLowerCase().localeCompare(b.name.toLowerCase())}),processingStatus:{}});case 13:case"end":return _context.stop()}}},_callee,null,[[0,6]])})));_defineProperty(_assertThisInitialized(_this),"install",function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(id){var targetSampleDataSet;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:targetSampleDataSet=_this.state.sampleDataSets.find(function(sampleDataSet){return sampleDataSet.id===id});_this.setState(function(prevState){return{processingStatus:_objectSpread({},prevState.processingStatus,_defineProperty({},id,true))}});_context2.prev=2;_context2.next=5;return(0,_sample_data_client.installSampleDataSet)(id,targetSampleDataSet.defaultIndex);case 5:_context2.next=12;break;case 7:_context2.prev=7;_context2.t0=_context2["catch"](2);if(_this._isMounted){_this.setState(function(prevState){return{processingStatus:_objectSpread({},prevState.processingStatus,_defineProperty({},id,false))}})}_notify.toastNotifications.addDanger({title:_i18n.i18n.translate("kbn.home.sampleDataSet.unableToInstallErrorMessage",{defaultMessage:"Unable to install sample data set: {name}",values:{name:targetSampleDataSet.name}}),text:"".concat(_context2.t0.message)});return _context2.abrupt("return");case 12:if(_this._isMounted){_this.setState(function(prevState){return{processingStatus:_objectSpread({},prevState.processingStatus,_defineProperty({},id,false)),sampleDataSets:prevState.sampleDataSets.map(function(sampleDataSet){if(sampleDataSet.id===id){sampleDataSet.status=_sample_data_set_card.INSTALLED_STATUS}return sampleDataSet})}})}_notify.toastNotifications.addSuccess(_defineProperty({title:_i18n.i18n.translate("kbn.home.sampleDataSet.installedLabel",{defaultMessage:"{name} installed",values:{name:targetSampleDataSet.name}})},"data-test-subj","sampleDataSetInstallToast"));case 14:case"end":return _context2.stop()}}},_callee2,null,[[2,7]])}));return function(_x){return _ref2.apply(this,arguments)}}());_defineProperty(_assertThisInitialized(_this),"uninstall",function(){var _ref3=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(id){var targetSampleDataSet;return regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:targetSampleDataSet=_this.state.sampleDataSets.find(function(sampleDataSet){return sampleDataSet.id===id});_this.setState(function(prevState){return{processingStatus:_objectSpread({},prevState.processingStatus,_defineProperty({},id,true))}});_context3.prev=2;_context3.next=5;return(0,_sample_data_client.uninstallSampleDataSet)(id,targetSampleDataSet.defaultIndex);case 5:_context3.next=12;break;case 7:_context3.prev=7;_context3.t0=_context3["catch"](2);if(_this._isMounted){_this.setState(function(prevState){return{processingStatus:_objectSpread({},prevState.processingStatus,_defineProperty({},id,false))}})}_notify.toastNotifications.addDanger({title:_i18n.i18n.translate("kbn.home.sampleDataSet.unableToUninstallErrorMessage",{defaultMessage:"Unable to uninstall sample data set: {name}",values:{name:targetSampleDataSet.name}}),text:"".concat(_context3.t0.message)});return _context3.abrupt("return");case 12:if(_this._isMounted){_this.setState(function(prevState){return{processingStatus:_objectSpread({},prevState.processingStatus,_defineProperty({},id,false)),sampleDataSets:prevState.sampleDataSets.map(function(sampleDataSet){if(sampleDataSet.id===id){sampleDataSet.status=_sample_data_set_card.UNINSTALLED_STATUS}return sampleDataSet})}})}_notify.toastNotifications.addSuccess(_defineProperty({title:_i18n.i18n.translate("kbn.home.sampleDataSet.uninstalledLabel",{defaultMessage:"{name} uninstalled",values:{name:targetSampleDataSet.name}})},"data-test-subj","sampleDataSetUninstallToast"));case 14:case"end":return _context3.stop()}}},_callee3,null,[[2,7]])}));return function(_x2){return _ref3.apply(this,arguments)}}());_defineProperty(_assertThisInitialized(_this),"lightOrDarkImage",function(sampleDataSet){return IS_DARK_THEME&&sampleDataSet.darkPreviewImagePath?sampleDataSet.darkPreviewImagePath:sampleDataSet.previewImagePath});_this.state={sampleDataSets:[],processingStatus:{}};return _this}_createClass(SampleDataSetCards,[{key:"componentWillUnmount",value:function componentWillUnmount(){this._isMounted=false}},{key:"componentDidMount",value:function(){var _componentDidMount=_asyncToGenerator(regeneratorRuntime.mark(function _callee4(){return regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:this._isMounted=true;this.loadSampleDataSets();case 2:case"end":return _context4.stop()}}},_callee4,this)}));function componentDidMount(){return _componentDidMount.apply(this,arguments)}return componentDidMount}()},{key:"render",value:function render(){var _this2=this;return _react["default"].createElement(_eui.EuiFlexGrid,{columns:3,className:"homSampleDataSetCards"},this.state.sampleDataSets.map(function(sampleDataSet){return _react["default"].createElement(_eui.EuiFlexItem,{key:sampleDataSet.id},_react["default"].createElement(_sample_data_set_card.SampleDataSetCard,{id:sampleDataSet.id,description:sampleDataSet.description,name:sampleDataSet.name,overviewDashboard:sampleDataSet.overviewDashboard,appLinks:sampleDataSet.appLinks,status:sampleDataSet.status,isProcessing:_lodash["default"].get(_this2.state.processingStatus,sampleDataSet.id,false),statusMsg:sampleDataSet.statusMsg,previewUrl:_this2.props.addBasePath(_this2.lightOrDarkImage(sampleDataSet)),onInstall:_this2.install,onUninstall:_this2.uninstall}))}))}}]);return SampleDataSetCards}(_react["default"].Component);exports.SampleDataSetCards=SampleDataSetCards;SampleDataSetCards.propTypes={addBasePath:_propTypes["default"].func.isRequired}},6146:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SampleDataSetCard=exports.UNINSTALLED_STATUS=exports.INSTALLED_STATUS=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(17));var _eui=__webpack_require__(2);var _i18n=__webpack_require__(5);var _react2=__webpack_require__(10);var _sample_data_view_data_button=__webpack_require__(6147);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var INSTALLED_STATUS="installed";exports.INSTALLED_STATUS=INSTALLED_STATUS;var UNINSTALLED_STATUS="not_installed";exports.UNINSTALLED_STATUS=UNINSTALLED_STATUS;var SampleDataSetCard=function(_React$Component){_inherits(SampleDataSetCard,_React$Component);function SampleDataSetCard(){var _getPrototypeOf2;var _this;_classCallCheck(this,SampleDataSetCard);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(SampleDataSetCard)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"isInstalled",function(){if(_this.props.status===INSTALLED_STATUS){return true}return false});_defineProperty(_assertThisInitialized(_this),"install",function(){_this.props.onInstall(_this.props.id)});_defineProperty(_assertThisInitialized(_this),"uninstall",function(){_this.props.onUninstall(_this.props.id)});_defineProperty(_assertThisInitialized(_this),"renderBtn",function(){switch(_this.props.status){case INSTALLED_STATUS:return _react["default"].createElement(_eui.EuiFlexGroup,{gutterSize:"none",justifyContent:"spaceBetween"},_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiButtonEmpty,{isLoading:_this.props.isProcessing,onClick:_this.uninstall,color:"danger","data-test-subj":"removeSampleDataSet".concat(_this.props.id),flush:"left","aria-label":_this.props.isProcessing?_i18n.i18n.translate("kbn.home.sampleDataSetCard.removingButtonAriaLabel",{defaultMessage:"Removing {datasetName}",values:{datasetName:_this.props.name}}):_i18n.i18n.translate("kbn.home.sampleDataSetCard.removeButtonAriaLabel",{defaultMessage:"Remove {datasetName}",values:{datasetName:_this.props.name}})},_this.props.isProcessing?_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.home.sampleDataSetCard.removingButtonLabel",defaultMessage:"Removing"}):_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.home.sampleDataSetCard.removeButtonLabel",defaultMessage:"Remove"}))),_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_sample_data_view_data_button.SampleDataViewDataButton,{id:_this.props.id,name:_this.props.name,overviewDashboard:_this.props.overviewDashboard,appLinks:_this.props.appLinks})));case UNINSTALLED_STATUS:return _react["default"].createElement(_eui.EuiFlexGroup,{justifyContent:"flexEnd"},_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiButton,{isLoading:_this.props.isProcessing,onClick:_this.install,"data-test-subj":"addSampleDataSet".concat(_this.props.id),"aria-label":_this.props.isProcessing?_i18n.i18n.translate("kbn.home.sampleDataSetCard.addingButtonAriaLabel",{defaultMessage:"Adding {datasetName}",values:{datasetName:_this.props.name}}):_i18n.i18n.translate("kbn.home.sampleDataSetCard.addButtonAriaLabel",{defaultMessage:"Add {datasetName}",values:{datasetName:_this.props.name}})},_this.props.isProcessing?_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.home.sampleDataSetCard.addingButtonLabel",defaultMessage:"Adding"}):_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.home.sampleDataSetCard.addButtonLabel",defaultMessage:"Add data"}))));default:{return _react["default"].createElement(_eui.EuiFlexGroup,{justifyContent:"flexEnd"},_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiToolTip,{position:"top",content:_react["default"].createElement("p",null,_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.home.sampleDataSetCard.default.unableToVerifyErrorMessage",defaultMessage:"Unable to verify dataset status, error: {statusMsg}",values:{statusMsg:_this.props.statusMsg}}))},_react["default"].createElement(_eui.EuiButton,{isDisabled:true,"data-test-subj":"addSampleDataSet".concat(_this.props.id),"aria-label":_i18n.i18n.translate("kbn.home.sampleDataSetCard.default.addButtonAriaLabel",{defaultMessage:"Add {datasetName}",values:{datasetName:_this.props.name}})},_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.home.sampleDataSetCard.default.addButtonLabel",defaultMessage:"Add data"})))))}}});return _this}_createClass(SampleDataSetCard,[{key:"render",value:function render(){return _react["default"].createElement(_eui.EuiCard,{textAlign:"left",className:"homSampleDataSetCard",image:this.props.previewUrl,title:this.props.name,description:this.props.description,betaBadgeLabel:this.isInstalled()?"INSTALLED":null,footer:this.renderBtn(),"data-test-subj":"sampleDataSetCard".concat(this.props.id)})}}]);return SampleDataSetCard}(_react["default"].Component);exports.SampleDataSetCard=SampleDataSetCard;SampleDataSetCard.propTypes={id:_propTypes["default"].string.isRequired,description:_propTypes["default"].string.isRequired,name:_propTypes["default"].string.isRequired,overviewDashboard:_propTypes["default"].string.isRequired,appLinks:_propTypes["default"].arrayOf(_propTypes["default"].shape({path:_propTypes["default"].string.isRequired,label:_propTypes["default"].string.isRequired,icon:_propTypes["default"].string.isRequired})).isRequired,status:_propTypes["default"].oneOf([INSTALLED_STATUS,UNINSTALLED_STATUS,"unknown"]).isRequired,isProcessing:_propTypes["default"].bool.isRequired,statusMsg:_propTypes["default"].string,previewUrl:_propTypes["default"].string.isRequired,onInstall:_propTypes["default"].func.isRequired,onUninstall:_propTypes["default"].func.isRequired}},6147:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SampleDataViewDataButton=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(17));var _eui=__webpack_require__(2);var _i18n=__webpack_require__(5);var _chrome=_interopRequireDefault(__webpack_require__(19));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var SampleDataViewDataButton=function(_React$Component){_inherits(SampleDataViewDataButton,_React$Component);function SampleDataViewDataButton(){var _getPrototypeOf2;var _this;_classCallCheck(this,SampleDataViewDataButton);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(SampleDataViewDataButton)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"state",{isPopoverOpen:false});_defineProperty(_assertThisInitialized(_this),"togglePopoverVisibility",function(){_this.setState(function(prevState){return{isPopoverOpen:!prevState.isPopoverOpen}})});_defineProperty(_assertThisInitialized(_this),"closePopover",function(){_this.setState({isPopoverOpen:false})});return _this}_createClass(SampleDataViewDataButton,[{key:"render",value:function render(){var viewDataButtonLabel=_i18n.i18n.translate("kbn.home.sampleDataSetCard.viewDataButtonLabel",{defaultMessage:"View data"});var viewDataButtonAriaLabel=_i18n.i18n.translate("kbn.home.sampleDataSetCard.viewDataButtonAriaLabel",{defaultMessage:"View {datasetName}",values:{datasetName:this.props.name}});var dashboardPath=_chrome["default"].addBasePath("/app/kibana#/dashboard/".concat(this.props.overviewDashboard));if(this.props.appLinks.length===0){return _react["default"].createElement(_eui.EuiButton,{href:dashboardPath,"data-test-subj":"launchSampleDataSet".concat(this.props.id),"aria-label":viewDataButtonAriaLabel},viewDataButtonLabel)}var additionalItems=this.props.appLinks.map(function(_ref){var path=_ref.path,label=_ref.label,icon=_ref.icon;return{name:label,icon:_react["default"].createElement(_eui.EuiIcon,{type:icon,size:"m"}),href:_chrome["default"].addBasePath(path)}});var panels=[{id:0,items:[{name:_i18n.i18n.translate("kbn.home.sampleDataSetCard.dashboardLinkLabel",{defaultMessage:"Dashboard"}),icon:_react["default"].createElement(_eui.EuiIcon,{type:"dashboardApp",size:"m"}),href:dashboardPath}].concat(_toConsumableArray(additionalItems))}];var popoverButton=_react["default"].createElement(_eui.EuiButton,{"aria-label":viewDataButtonAriaLabel,onClick:this.togglePopoverVisibility,iconType:"arrowDown",iconSide:"right"},viewDataButtonLabel);return _react["default"].createElement(_eui.EuiPopover,{id:"sampleDataLinks".concat(this.props.id),button:popoverButton,isOpen:this.state.isPopoverOpen,closePopover:this.closePopover,panelPaddingSize:"none",anchorPosition:"downCenter"},_react["default"].createElement(_eui.EuiContextMenu,{initialPanelId:0,panels:panels}))}}]);return SampleDataViewDataButton}(_react["default"].Component);exports.SampleDataViewDataButton=SampleDataViewDataButton;SampleDataViewDataButton.propTypes={id:_propTypes["default"].string.isRequired,name:_propTypes["default"].string.isRequired,overviewDashboard:_propTypes["default"].string.isRequired,appLinks:_propTypes["default"].arrayOf(_propTypes["default"].shape({path:_propTypes["default"].string.isRequired,label:_propTypes["default"].string.isRequired,icon:_propTypes["default"].string.isRequired})).isRequired}},6148:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.listSampleDataSets=listSampleDataSets;exports.installSampleDataSet=installSampleDataSet;exports.uninstallSampleDataSet=uninstallSampleDataSet;var _kfetch=__webpack_require__(109);var _chrome=_interopRequireDefault(__webpack_require__(19));var _kibana_services=__webpack_require__(6149);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}var sampleDataUrl="/api/sample_data";function clearIndexPatternsCache(){_kibana_services.indexPatternService.getIds.clearCache()}function listSampleDataSets(){return _listSampleDataSets.apply(this,arguments)}function _listSampleDataSets(){_listSampleDataSets=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return(0,_kfetch.kfetch)({method:"GET",pathname:sampleDataUrl});case 2:return _context.abrupt("return",_context.sent);case 3:case"end":return _context.stop()}}},_callee)}));return _listSampleDataSets.apply(this,arguments)}function installSampleDataSet(_x,_x2){return _installSampleDataSet.apply(this,arguments)}function _installSampleDataSet(){_installSampleDataSet=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(id,sampleDataDefaultIndex){return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return(0,_kfetch.kfetch)({method:"POST",pathname:"".concat(sampleDataUrl,"/").concat(id)});case 2:if(_chrome["default"].getUiSettingsClient().isDefault("defaultIndex")){_chrome["default"].getUiSettingsClient().set("defaultIndex",sampleDataDefaultIndex)}clearIndexPatternsCache();case 4:case"end":return _context2.stop()}}},_callee2)}));return _installSampleDataSet.apply(this,arguments)}function uninstallSampleDataSet(_x3,_x4){return _uninstallSampleDataSet.apply(this,arguments)}function _uninstallSampleDataSet(){_uninstallSampleDataSet=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(id,sampleDataDefaultIndex){return regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return(0,_kfetch.kfetch)({method:"DELETE",pathname:"".concat(sampleDataUrl,"/").concat(id)});case 2:if(!_chrome["default"].getUiSettingsClient().isDefault("defaultIndex")&&_chrome["default"].getUiSettingsClient().get("defaultIndex")===sampleDataDefaultIndex){_chrome["default"].getUiSettingsClient().set("defaultIndex",null)}clearIndexPatternsCache();case 4:case"end":return _context3.stop()}}},_callee3)}));return _uninstallSampleDataSet.apply(this,arguments)}},6149:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.indexPatternService=void 0;var _modules=__webpack_require__(12);var indexPatternService;exports.indexPatternService=indexPatternService;_modules.uiModules.get("kibana").run(function($injector){exports.indexPatternService=indexPatternService=$injector.get("indexPatterns")})},6150:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Tutorial=void 0;var _lodash=_interopRequireDefault(__webpack_require__(1));var _react=_interopRequireDefault(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(17));var _footer=__webpack_require__(6151);var _introduction=__webpack_require__(6152);var _instruction_set=__webpack_require__(6153);var _saved_objects_installer=__webpack_require__(6159);var _eui=__webpack_require__(2);var StatusCheckStates=_interopRequireWildcard(__webpack_require__(2043));var _react2=__webpack_require__(10);var _i18n=__webpack_require__(5);var _chrome=_interopRequireDefault(__webpack_require__(19));function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var INSTRUCTIONS_TYPE={ELASTIC_CLOUD:"elasticCloud",ON_PREM:"onPrem",ON_PREM_ELASTIC_CLOUD:"onPremElasticCloud"};var homeTitle=_i18n.i18n.translate("kbn.home.breadcrumbs.homeTitle",{defaultMessage:"Home"});var addDataTitle=_i18n.i18n.translate("kbn.home.breadcrumbs.addDataTitle",{defaultMessage:"Add data"});var TutorialUi=function(_React$Component){_inherits(TutorialUi,_React$Component);function TutorialUi(props){var _this;_classCallCheck(this,TutorialUi);_this=_possibleConstructorReturn(this,_getPrototypeOf(TutorialUi).call(this,props));_defineProperty(_assertThisInitialized(_this),"getInstructions",function(){if(!_this.state.tutorial){return{instructionSets:[]}}switch(_this.state.visibleInstructions){case INSTRUCTIONS_TYPE.ELASTIC_CLOUD:return _this.state.tutorial.elasticCloud;case INSTRUCTIONS_TYPE.ON_PREM:return _this.state.tutorial.onPrem;case INSTRUCTIONS_TYPE.ON_PREM_ELASTIC_CLOUD:return _this.state.tutorial.onPremElasticCloud;default:throw new Error(_this.props.intl.formatMessage({id:"kbn.home.tutorial.unhandledInstructionTypeErrorDescription",defaultMessage:"Unhandled instruction type {visibleInstructions}"},{visibleInstructions:_this.state.visibleInstructions}))}});_defineProperty(_assertThisInitialized(_this),"getInstructionSets",function(){return _this.getInstructions().instructionSets});_defineProperty(_assertThisInitialized(_this),"initInstructionsState",function(){var instructions=_this.getInstructions();var paramValues={};if(instructions.params){instructions.params.forEach(function(param){paramValues[param.id]=param.defaultValue})}var statusCheckStates=new Array(instructions.instructionSets.length).fill(StatusCheckStates.NOT_CHECKED);_this.setState({paramValues:paramValues,statusCheckStates:statusCheckStates})});_defineProperty(_assertThisInitialized(_this),"setVisibleInstructions",function(instructionsType){_this.setState({visibleInstructions:instructionsType},_this.initInstructionsState)});_defineProperty(_assertThisInitialized(_this),"setParameter",function(paramId,newValue){_this.setState(function(previousState){var paramValues=_lodash["default"].cloneDeep(previousState.paramValues);paramValues[paramId]=newValue;return{paramValues:paramValues}})});_defineProperty(_assertThisInitialized(_this),"checkInstructionSetStatus",function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(instructionSetIndex){var instructionSet,esHitsCheckConfig,statusCheckState;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:instructionSet=_this.getInstructionSets()[instructionSetIndex];esHitsCheckConfig=_lodash["default"].get(instructionSet,"statusCheck.esHitsCheck");if(!esHitsCheckConfig){_context.next=7;break}_context.next=5;return _this.fetchEsHitsStatus(esHitsCheckConfig);case 5:statusCheckState=_context.sent;_this.setState(function(prevState){return{statusCheckStates:_objectSpread({},prevState.statusCheckStates,_defineProperty({},instructionSetIndex,statusCheckState))}});case 7:case"end":return _context.stop()}}},_callee)}));return function(_x){return _ref.apply(this,arguments)}}());_defineProperty(_assertThisInitialized(_this),"fetchEsHitsStatus",function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(esHitsCheckConfig){var searchHeader,searchBody,response,results,numHits;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:searchHeader=JSON.stringify({index:esHitsCheckConfig.index});searchBody=JSON.stringify({query:esHitsCheckConfig.query,size:1});_context2.next=4;return fetch(_this.props.addBasePath("/elasticsearch/_msearch"),{method:"post",body:"".concat(searchHeader,"\n").concat(searchBody,"\n"),headers:{accept:"application/json","content-type":"application/x-ndjson","kbn-xsrf":"kibana"},credentials:"same-origin"});case 4:response=_context2.sent;if(!(response.status>300)){_context2.next=7;break}return _context2.abrupt("return",StatusCheckStates.ERROR);case 7:_context2.next=9;return response.json();case 9:results=_context2.sent;numHits=_lodash["default"].get(results,"responses.[0].hits.hits.length",0);return _context2.abrupt("return",numHits===0?StatusCheckStates.NO_DATA:StatusCheckStates.HAS_DATA);case 12:case"end":return _context2.stop()}}},_callee2)}));return function(_x2){return _ref2.apply(this,arguments)}}());_defineProperty(_assertThisInitialized(_this),"renderInstructionSetsToggle",function(){if(!_this.props.isCloudEnabled&&_this.state.tutorial.onPremElasticCloud){var selfManagedLabel=_this.props.intl.formatMessage({id:"kbn.home.tutorial.selfManagedButtonLabel",defaultMessage:"Self managed"});var cloudLabel=_this.props.intl.formatMessage({id:"kbn.home.tutorial.elasticCloudButtonLabel",defaultMessage:"Elastic Cloud"});var radioButtons=[{id:INSTRUCTIONS_TYPE.ON_PREM,label:selfManagedLabel},{id:INSTRUCTIONS_TYPE.ON_PREM_ELASTIC_CLOUD,label:cloudLabel}];return _react["default"].createElement(_eui.EuiFlexGroup,{justifyContent:"center"},_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiButtonGroup,{options:radioButtons,idSelected:_this.state.visibleInstructions,onChange:_this.setVisibleInstructions,color:"primary"})))}});_defineProperty(_assertThisInitialized(_this),"onStatusCheck",function(instructionSetIndex){_this.setState(function(prevState){return{statusCheckStates:_objectSpread({},prevState.statusCheckStates,_defineProperty({},instructionSetIndex,StatusCheckStates.FETCHING))}},_this.checkInstructionSetStatus.bind(null,instructionSetIndex))});_defineProperty(_assertThisInitialized(_this),"renderInstructionSets",function(instructions){var offset=1;return instructions.instructionSets.map(function(instructionSet,index){var currentOffset=offset;offset+=instructionSet.instructionVariants[0].instructions.length;return _react["default"].createElement(_instruction_set.InstructionSet,{title:instructionSet.title,instructionVariants:instructionSet.instructionVariants,statusCheckConfig:instructionSet.statusCheck,statusCheckState:_this.state.statusCheckStates[index],onStatusCheck:function onStatusCheck(){_this.onStatusCheck(index)},offset:currentOffset,params:instructions.params,paramValues:_this.state.paramValues,setParameter:_this.setParameter,replaceTemplateStrings:_this.props.replaceTemplateStrings,key:index})})});_defineProperty(_assertThisInitialized(_this),"renderSavedObjectsInstaller",function(){if(!_this.state.tutorial.savedObjects){return}return _react["default"].createElement(_saved_objects_installer.SavedObjectsInstaller,{bulkCreate:_this.props.bulkCreate,savedObjects:_this.state.tutorial.savedObjects,installMsg:_this.state.tutorial.savedObjectsInstallMsg})});_defineProperty(_assertThisInitialized(_this),"renderFooter",function(){var label;var url;if(_lodash["default"].has(_this.state,"tutorial.artifacts.application")){label=_this.state.tutorial.artifacts.application.label;url=_this.props.addBasePath(_this.state.tutorial.artifacts.application.path)}else if(_lodash["default"].has(_this.state,"tutorial.artifacts.dashboards")){var overviewDashboard=_this.state.tutorial.artifacts.dashboards.find(function(dashboard){return dashboard.isOverview});if(overviewDashboard){label=overviewDashboard.linkLabel;url=_this.props.addBasePath("/app/kibana#/dashboard/".concat(overviewDashboard.id))}}if(url&&label){return _react["default"].createElement(_footer.Footer,{label:label,url:url})}});_this.state={notFound:false,paramValues:{},statusCheckStates:[],tutorial:null};if(props.isCloudEnabled){_this.state.visibleInstructions=INSTRUCTIONS_TYPE.ELASTIC_CLOUD}else{_this.state.visibleInstructions=INSTRUCTIONS_TYPE.ON_PREM}return _this}_createClass(TutorialUi,[{key:"componentWillMount",value:function componentWillMount(){this._isMounted=true}},{key:"componentWillUnmount",value:function componentWillUnmount(){this._isMounted=false}},{key:"componentDidMount",value:function(){var _componentDidMount=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(){var tutorial;return regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return this.props.getTutorial(this.props.tutorialId);case 2:tutorial=_context3.sent;if(this._isMounted){_context3.next=5;break}return _context3.abrupt("return");case 5:if(tutorial){this.setState({tutorial:tutorial},this.initInstructionsState)}else{this.setState({notFound:true})}_chrome["default"].breadcrumbs.set([{text:homeTitle,href:"#/home"},{text:addDataTitle,href:"#/home/tutorial_directory"},{text:tutorial?tutorial.name:this.props.tutorialId}]);case 7:case"end":return _context3.stop()}}},_callee3,this)}));function componentDidMount(){return _componentDidMount.apply(this,arguments)}return componentDidMount}()},{key:"render",value:function render(){var content;if(this.state.notFound){content=_react["default"].createElement("div",{className:"homTutorial__notFoundPanel"},_react["default"].createElement(_eui.EuiText,null,_react["default"].createElement("p",null,_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.home.tutorial.noTutorialLabel",defaultMessage:"Unable to find tutorial {tutorialId}",values:{tutorialId:this.props.tutorialId}}))))}if(this.state.tutorial){var previewUrl;if(this.state.tutorial.previewImagePath){previewUrl=this.props.addBasePath(this.state.tutorial.previewImagePath)}var exportedFieldsUrl;if(_lodash["default"].has(this.state,"tutorial.artifacts.exportedFields")){exportedFieldsUrl=this.props.replaceTemplateStrings(this.state.tutorial.artifacts.exportedFields.documentationUrl)}var instructions=this.getInstructions();content=_react["default"].createElement("div",null,_react["default"].createElement(_introduction.Introduction,{title:this.state.tutorial.name,description:this.props.replaceTemplateStrings(this.state.tutorial.longDescription),previewUrl:previewUrl,exportedFieldsUrl:exportedFieldsUrl,iconType:this.state.tutorial.euiIconType,isBeta:this.state.tutorial.isBeta}),_react["default"].createElement(_eui.EuiSpacer,null),_react["default"].createElement("div",{className:"eui-textCenter"},this.renderInstructionSetsToggle()),_react["default"].createElement(_eui.EuiSpacer,null),_react["default"].createElement(_eui.EuiPanel,{paddingSize:"l"},this.renderInstructionSets(instructions),this.renderSavedObjectsInstaller(),this.renderFooter()))}return _react["default"].createElement(_eui.EuiPage,{restrictWidth:1200},_react["default"].createElement(_eui.EuiPageBody,null,content))}}]);return TutorialUi}(_react["default"].Component);TutorialUi.propTypes={addBasePath:_propTypes["default"].func.isRequired,isCloudEnabled:_propTypes["default"].bool.isRequired,getTutorial:_propTypes["default"].func.isRequired,replaceTemplateStrings:_propTypes["default"].func.isRequired,tutorialId:_propTypes["default"].string.isRequired,bulkCreate:_propTypes["default"].func.isRequired};var Tutorial=(0,_react2.injectI18n)(TutorialUi);exports.Tutorial=Tutorial},6151:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Footer=Footer;var _react=_interopRequireDefault(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(17));var _eui=__webpack_require__(2);var _react2=__webpack_require__(10);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function Footer(_ref){var url=_ref.url,label=_ref.label;return _react["default"].createElement("div",null,_react["default"].createElement(_eui.EuiHorizontalRule,null),_react["default"].createElement(_eui.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"center"},_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiText,null,_react["default"].createElement("p",null,_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.home.exploreYourDataDescription",defaultMessage:"When all steps are complete, you're ready to explore your data."})))),_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiButton,{fill:true,href:url},label))))}Footer.propTypes={url:_propTypes["default"].string.isRequired,label:_propTypes["default"].string.isRequired}},6152:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Introduction=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(17));var _content=__webpack_require__(1027);var _eui=__webpack_require__(2);var _react2=__webpack_require__(10);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function IntroductionUI(_ref){var description=_ref.description,previewUrl=_ref.previewUrl,title=_ref.title,exportedFieldsUrl=_ref.exportedFieldsUrl,iconType=_ref.iconType,isBeta=_ref.isBeta,intl=_ref.intl;var img;if(previewUrl){img=_react["default"].createElement(_eui.EuiImage,{size:"l",hasShadow:true,allowFullScreen:true,fullScreenIconColor:"dark",alt:intl.formatMessage({id:"kbn.home.tutorial.introduction.imageAltDescription",defaultMessage:"screenshot of primary dashboard."}),url:previewUrl})}var exportedFields;if(exportedFieldsUrl){exportedFields=_react["default"].createElement("div",null,_react["default"].createElement(_eui.EuiSpacer,null),_react["default"].createElement(_eui.EuiButton,{href:exportedFieldsUrl,target:"_blank",rel:"noopener noreferrer"},_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.home.tutorial.introduction.viewButtonLabel",defaultMessage:"View exported fields"})))}var icon;if(iconType){icon=_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiIcon,{type:iconType,size:"xl"}))}var betaBadge;if(isBeta){betaBadge=_react["default"].createElement(_eui.EuiBetaBadge,{label:intl.formatMessage({id:"kbn.home.tutorial.introduction.betaLabel",defaultMessage:"Beta"})})}return _react["default"].createElement(_eui.EuiFlexGroup,null,_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiFlexGroup,{gutterSize:"l",alignItems:"center"},icon,_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiTitle,{size:"l"},_react["default"].createElement("h2",null,title," ",betaBadge)))),_react["default"].createElement(_content.Content,{text:description}),exportedFields),_react["default"].createElement(_eui.EuiFlexItem,{grow:false},img))}IntroductionUI.propTypes={description:_propTypes["default"].string.isRequired,title:_propTypes["default"].string.isRequired,previewUrl:_propTypes["default"].string,exportedFieldsUrl:_propTypes["default"].string,iconType:_propTypes["default"].string,isBeta:_propTypes["default"].bool};IntroductionUI.defaultProps={isBeta:false};var Introduction=(0,_react2.injectI18n)(IntroductionUI);exports.Introduction=Introduction},6153:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.InstructionSet=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(17));var _instruction=__webpack_require__(6154);var _parameter_form=__webpack_require__(6155);var _content=__webpack_require__(1027);var _instruction_variant=__webpack_require__(6158);var _eui=__webpack_require__(2);var StatusCheckStates=_interopRequireWildcard(__webpack_require__(2043));var _react2=__webpack_require__(10);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var InstructionSetUi=function(_React$Component){_inherits(InstructionSetUi,_React$Component);function InstructionSetUi(props){var _this;_classCallCheck(this,InstructionSetUi);_this=_possibleConstructorReturn(this,_getPrototypeOf(InstructionSetUi).call(this,props));_defineProperty(_assertThisInitialized(_this),"handleToggleVisibility",function(){_this.setState(function(prevState){return{isParamFormVisible:!prevState.isParamFormVisible}})});_defineProperty(_assertThisInitialized(_this),"onSelectedTabChanged",function(id){_this.setState({selectedTabId:id})});_defineProperty(_assertThisInitialized(_this),"renderTabs",function(){return _this.tabs.map(function(tab,index){return _react["default"].createElement(_eui.EuiTab,{onClick:function onClick(){return _this.onSelectedTabChanged(tab.id)},isSelected:tab.id===_this.state.selectedTabId,key:index},tab.name)})});_defineProperty(_assertThisInitialized(_this),"renderInstructions",function(){var instructionVariant=_this.props.instructionVariants.find(function(variant){return variant.id===_this.state.selectedTabId});if(!instructionVariant){return}var steps=instructionVariant.instructions.map(function(instruction,index){var step=_react["default"].createElement(_instruction.Instruction,{commands:instruction.commands,paramValues:_this.props.paramValues,textPre:instruction.textPre,textPost:instruction.textPost,replaceTemplateStrings:_this.props.replaceTemplateStrings});return{title:instruction.title,children:step,key:index}});if(_this.props.statusCheckConfig){steps.push(_this.renderStatusCheck())}return _react["default"].createElement(_eui.EuiSteps,{steps:steps,firstStepNumber:_this.props.offset})});_defineProperty(_assertThisInitialized(_this),"renderHeader",function(){var paramsVisibilityToggle;if(_this.props.params){var ariaLabel=_this.props.intl.formatMessage({id:"kbn.home.tutorial.instructionSet.toggleAriaLabel",defaultMessage:"toggle command parameters visibility"});paramsVisibilityToggle=_react["default"].createElement(_eui.EuiButtonEmpty,{iconType:_this.state.isParamFormVisible?"arrowDown":"arrowRight","aria-label":ariaLabel,onClick:_this.handleToggleVisibility},_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.home.tutorial.instructionSet.customizeLabel",defaultMessage:"Customize your code snippets"}))}return _react["default"].createElement(_eui.EuiFlexGroup,{responsive:false,wrap:true,justifyContent:"spaceBetween"},_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiTitle,{size:"m"},_react["default"].createElement("h2",null,_this.props.title))),_react["default"].createElement(_eui.EuiFlexItem,{grow:false},paramsVisibilityToggle))});_this.tabs=props.instructionVariants.map(function(variant){return{id:variant.id,name:(0,_instruction_variant.getDisplayText)(variant.id)}});_this.state={isParamFormVisible:false};if(_this.tabs.length>0){_this.state.selectedTabId=_this.tabs[0].id}return _this}_createClass(InstructionSetUi,[{key:"renderStatusCheckMessage",value:function renderStatusCheckMessage(){var message;var color;switch(this.props.statusCheckState){case StatusCheckStates.NOT_CHECKED:case StatusCheckStates.FETCHING:return null;case StatusCheckStates.HAS_DATA:message=this.props.statusCheckConfig.success?this.props.statusCheckConfig.success:this.props.intl.formatMessage({id:"kbn.home.tutorial.instructionSet.successLabel",defaultMessage:"Success"});color="success";break;case StatusCheckStates.ERROR:case StatusCheckStates.NO_DATA:message=this.props.statusCheckConfig.error?this.props.statusCheckConfig.error:this.props.intl.formatMessage({id:"kbn.home.tutorial.instructionSet.noDataLabel",defaultMessage:"No data found"});color="warning";break}return _react["default"].createElement(_eui.EuiCallOut,{title:message,color:color})}},{key:"getStepStatus",value:function getStepStatus(statusCheckState){switch(statusCheckState){case undefined:case StatusCheckStates.NOT_CHECKED:case StatusCheckStates.FETCHING:return"incomplete";case StatusCheckStates.HAS_DATA:return"complete";case StatusCheckStates.NO_DATA:return"warning";case StatusCheckStates.ERROR:return"danger";default:throw new Error(this.props.intl.formatMessage({id:"kbn.home.tutorial.unexpectedStatusCheckStateErrorDescription",defaultMessage:"Unexpected status check state {statusCheckState}"},{statusCheckState:statusCheckState}))}}},{key:"renderStatusCheck",value:function renderStatusCheck(){var _this$props=this.props,statusCheckState=_this$props.statusCheckState,statusCheckConfig=_this$props.statusCheckConfig,onStatusCheck=_this$props.onStatusCheck;var checkStatusStep=_react["default"].createElement(_react.Fragment,null,_react["default"].createElement(_eui.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"center"},_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_content.Content,{text:statusCheckConfig.text})),_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiButton,{onClick:onStatusCheck,isLoading:statusCheckState===StatusCheckStates.FETCHING},statusCheckConfig.btnLabel||_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.home.tutorial.instructionSet.checkStatusButtonLabel",defaultMessage:"Check status"})))),_react["default"].createElement(_eui.EuiSpacer,{size:"s"}),this.renderStatusCheckMessage());return{title:statusCheckConfig.title||this.props.intl.formatMessage({id:"kbn.home.tutorial.instructionSet.statusCheckTitle",defaultMessage:"Status Check"}),status:this.getStepStatus(statusCheckState),children:checkStatusStep,key:"checkStatusStep"}}},{key:"render",value:function render(){var paramsForm;if(this.props.params&&this.state.isParamFormVisible){paramsForm=_react["default"].createElement(_parameter_form.ParameterForm,{params:this.props.params,paramValues:this.props.paramValues,setParameter:this.props.setParameter})}return _react["default"].createElement("div",null,this.renderHeader(),paramsForm,_react["default"].createElement(_eui.EuiTabs,null,this.renderTabs()),_react["default"].createElement(_eui.EuiSpacer,{size:"m"}),this.renderInstructions())}}]);return InstructionSetUi}(_react["default"].Component);var instructionShape=_propTypes["default"].shape({title:_propTypes["default"].string,textPre:_propTypes["default"].string,commands:_propTypes["default"].arrayOf(_propTypes["default"].string),textPost:_propTypes["default"].string});var instructionVariantShape=_propTypes["default"].shape({id:_propTypes["default"].string.isRequired,instructions:_propTypes["default"].arrayOf(instructionShape).isRequired});var statusCheckConfigShape=_propTypes["default"].shape({success:_propTypes["default"].string,error:_propTypes["default"].string,title:_propTypes["default"].string,text:_propTypes["default"].string,btnLabel:_propTypes["default"].string});InstructionSetUi.propTypes={title:_propTypes["default"].string.isRequired,instructionVariants:_propTypes["default"].arrayOf(instructionVariantShape).isRequired,statusCheckConfig:statusCheckConfigShape,statusCheckState:_propTypes["default"].oneOf([StatusCheckStates.FETCHING,StatusCheckStates.NOT_CHECKED,StatusCheckStates.HAS_DATA,StatusCheckStates.NO_DATA,StatusCheckStates.ERROR]),onStatusCheck:_propTypes["default"].func.isRequired,offset:_propTypes["default"].number.isRequired,params:_propTypes["default"].array,paramValues:_propTypes["default"].object.isRequired,setParameter:_propTypes["default"].func,replaceTemplateStrings:_propTypes["default"].func.isRequired};var InstructionSet=(0,_react2.injectI18n)(InstructionSetUi);exports.InstructionSet=InstructionSet},6154:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Instruction=Instruction;var _react=_interopRequireDefault(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(17));var _content=__webpack_require__(1027);var _eui=__webpack_require__(2);var _react2=__webpack_require__(10);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function Instruction(_ref){var commands=_ref.commands,paramValues=_ref.paramValues,textPost=_ref.textPost,textPre=_ref.textPre,replaceTemplateStrings=_ref.replaceTemplateStrings;var pre;if(textPre){pre=_react["default"].createElement(_content.Content,{text:replaceTemplateStrings(textPre)})}var post;if(textPost){post=_react["default"].createElement("div",null,_react["default"].createElement(_eui.EuiSpacer,{size:"m"}),_react["default"].createElement(_content.Content,{text:replaceTemplateStrings(textPost)}))}var copyButton;var commandBlock;if(commands){var cmdText=commands.map(function(cmd){return replaceTemplateStrings(cmd,paramValues)}).join("\n");copyButton=_react["default"].createElement(_eui.EuiCopy,{textToCopy:cmdText},function(copy){return _react["default"].createElement(_eui.EuiButton,{size:"s",onClick:copy},_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.home.tutorial.instruction.copyButtonLabel",defaultMessage:"Copy snippet"}))});commandBlock=_react["default"].createElement("div",null,_react["default"].createElement(_eui.EuiSpacer,{size:"m"}),_react["default"].createElement(_eui.EuiCodeBlock,{language:"sh"},cmdText))}return _react["default"].createElement("div",null,_react["default"].createElement(_eui.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"flexEnd"},_react["default"].createElement(_eui.EuiFlexItem,{grow:false},pre),_react["default"].createElement(_eui.EuiFlexItem,{className:"homTutorial__instruction",grow:false},copyButton)),commandBlock,post,_react["default"].createElement(_eui.EuiSpacer,null))}Instruction.propTypes={commands:_propTypes["default"].array,paramValues:_propTypes["default"].object.isRequired,textPost:_propTypes["default"].string,textPre:_propTypes["default"].string,replaceTemplateStrings:_propTypes["default"].func.isRequired}},6155:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ParameterForm=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(17));var _number_parameter=__webpack_require__(6156);var _string_parameter=__webpack_require__(6157);var _eui=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ParameterForm=function(_React$Component){_inherits(ParameterForm,_React$Component);function ParameterForm(){var _getPrototypeOf2;var _this;_classCallCheck(this,ParameterForm);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(ParameterForm)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"renderInputs",function(){return _this.props.params.map(function(param){switch(param.type){case"number":return _react["default"].createElement(_number_parameter.NumberParameter,{key:param.id,id:param.id,label:param.label,value:_this.props.paramValues[param.id],setParameter:_this.props.setParameter});case"string":return _react["default"].createElement(_string_parameter.StringParameter,{key:param.id,id:param.id,label:param.label,value:_this.props.paramValues[param.id],setParameter:_this.props.setParameter});default:throw new Error("Unhandled parameter type ".concat(param.type))}})});return _this}_createClass(ParameterForm,[{key:"render",value:function render(){return _react["default"].createElement(_eui.EuiPanel,null,this.renderInputs())}}]);return ParameterForm}(_react["default"].Component);exports.ParameterForm=ParameterForm;var paramsShape=_propTypes["default"].shape({id:_propTypes["default"].string.isRequired,label:_propTypes["default"].string.isRequired,type:_propTypes["default"].string.isRequired});ParameterForm.propTypes={params:_propTypes["default"].arrayOf(paramsShape).isRequired,paramValues:_propTypes["default"].object.isRequired,setParameter:_propTypes["default"].func.isRequired}},6156:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.NumberParameter=NumberParameter;var _react=_interopRequireDefault(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(17));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function NumberParameter(_ref){var id=_ref.id,label=_ref.label,value=_ref.value,setParameter=_ref.setParameter;var handleChange=function handleChange(evt){setParameter(id,parseFloat(evt.target.value))};return _react["default"].createElement("div",{className:"visEditorSidebar__formRow"},_react["default"].createElement("label",{className:"visEditorSidebar__formLabel",htmlFor:id},label),_react["default"].createElement("div",{className:"visEditorSidebar__formControl kuiFieldGroupSection--wide"},_react["default"].createElement("input",{className:"kuiTextInput",type:"number",value:value,onChange:handleChange,id:id})))}NumberParameter.propTypes={id:_propTypes["default"].string.isRequired,label:_propTypes["default"].string.isRequired,value:_propTypes["default"].number.isRequired,setParameter:_propTypes["default"].func.isRequired}},6157:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.StringParameter=StringParameter;var _react=_interopRequireDefault(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(17));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function StringParameter(_ref){var id=_ref.id,label=_ref.label,value=_ref.value,setParameter=_ref.setParameter;var handleChange=function handleChange(evt){setParameter(id,evt.target.value)};return _react["default"].createElement("div",{className:"visEditorSidebar__formRow"},_react["default"].createElement("label",{className:"visEditorSidebar__formLabel"},label),_react["default"].createElement("div",{className:"visEditorSidebar__formControl kuiFieldGroupSection--wide"},_react["default"].createElement("input",{className:"kuiTextInput",type:"text",value:value,onChange:handleChange})))}StringParameter.propTypes={id:_propTypes["default"].string.isRequired,label:_propTypes["default"].string.isRequired,value:_propTypes["default"].string.isRequired,setParameter:_propTypes["default"].func.isRequired}},6158:function(module,exports,__webpack_require__){"use strict";var _DISPLAY_MAP;function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}Object.defineProperty(exports,"__esModule",{value:true});exports.getDisplayText=getDisplayText;exports.INSTRUCTION_VARIANT=void 0;var INSTRUCTION_VARIANT={ESC:"esc",OSX:"osx",DEB:"deb",RPM:"rpm",DOCKER:"docker",WINDOWS:"windows",NODE:"node",DJANGO:"django",FLASK:"flask",RAILS:"rails",RACK:"rack",JS:"js",GO:"go",JAVA:"java",DOTNET:"dotnet",LINUX:"linux"};exports.INSTRUCTION_VARIANT=INSTRUCTION_VARIANT;var DISPLAY_MAP=(_DISPLAY_MAP={},_defineProperty(_DISPLAY_MAP,INSTRUCTION_VARIANT.ESC,"Elastic Cloud"),_defineProperty(_DISPLAY_MAP,INSTRUCTION_VARIANT.OSX,"macOS"),_defineProperty(_DISPLAY_MAP,INSTRUCTION_VARIANT.DEB,"DEB"),_defineProperty(_DISPLAY_MAP,INSTRUCTION_VARIANT.RPM,"RPM"),_defineProperty(_DISPLAY_MAP,INSTRUCTION_VARIANT.DOCKER,"Docker"),_defineProperty(_DISPLAY_MAP,INSTRUCTION_VARIANT.WINDOWS,"Windows"),_defineProperty(_DISPLAY_MAP,INSTRUCTION_VARIANT.NODE,"Node.js"),_defineProperty(_DISPLAY_MAP,INSTRUCTION_VARIANT.DJANGO,"Django"),_defineProperty(_DISPLAY_MAP,INSTRUCTION_VARIANT.FLASK,"Flask"),_defineProperty(_DISPLAY_MAP,INSTRUCTION_VARIANT.RAILS,"Ruby on Rails"),_defineProperty(_DISPLAY_MAP,INSTRUCTION_VARIANT.RACK,"Rack"),_defineProperty(_DISPLAY_MAP,INSTRUCTION_VARIANT.JS,"RUM (JS)"),_defineProperty(_DISPLAY_MAP,INSTRUCTION_VARIANT.GO,"Go"),_defineProperty(_DISPLAY_MAP,INSTRUCTION_VARIANT.JAVA,"Java"),_defineProperty(_DISPLAY_MAP,INSTRUCTION_VARIANT.DOTNET,".NET"),_defineProperty(_DISPLAY_MAP,INSTRUCTION_VARIANT.LINUX,"Linux"),_DISPLAY_MAP);function getDisplayText(id){if(id in DISPLAY_MAP){return DISPLAY_MAP[id]}return id}},6159:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SavedObjectsInstaller=void 0;var _react=__webpack_require__(10);var _react2=_interopRequireWildcard(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(17));var _eui=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var SavedObjectsInstallerUi=function(_React$Component){_inherits(SavedObjectsInstallerUi,_React$Component);function SavedObjectsInstallerUi(){var _getPrototypeOf2;var _this;_classCallCheck(this,SavedObjectsInstallerUi);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(SavedObjectsInstallerUi)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"DEFAULT_BUTTON_LABEL",_this.props.intl.formatMessage({id:"kbn.home.tutorial.savedObject.defaultButtonLabel",defaultMessage:"Load Kibana objects"}));_defineProperty(_assertThisInitialized(_this),"state",{isInstalling:false,isInstalled:false,overwrite:false,buttonLabel:_this.DEFAULT_BUTTON_LABEL});_defineProperty(_assertThisInitialized(_this),"installSavedObjects",_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var resp,errors,overwriteErrors,hasErrors,statusMsg;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this.setState({isInstalling:true});_context.prev=1;_context.next=4;return _this.props.bulkCreate(_this.props.savedObjects,{overwrite:_this.state.overwrite});case 4:resp=_context.sent;_context.next=13;break;case 7:_context.prev=7;_context.t0=_context["catch"](1);if(_this._isMounted){_context.next=11;break}return _context.abrupt("return");case 11:_this.setState({isInstalling:false,installStatusMsg:_this.props.intl.formatMessage({id:"kbn.home.tutorial.savedObject.requestFailedErrorMessage",defaultMessage:"Request failed, Error: {message}"},{message:_context.t0.message}),isInstalled:false,overwrite:false,buttonLabel:_this.DEFAULT_BUTTON_LABEL});return _context.abrupt("return");case 13:if(_this._isMounted){_context.next=15;break}return _context.abrupt("return");case 15:errors=resp.savedObjects.filter(function(savedObject){return Boolean(savedObject.error)});overwriteErrors=errors.filter(function(savedObject){return savedObject.error.statusCode===409});if(!(overwriteErrors.length>0)){_context.next=20;break}_this.setState({isInstalling:false,installStatusMsg:_this.props.intl.formatMessage({id:"kbn.home.tutorial.savedObject.installStatusLabel",defaultMessage:"{overwriteErrorsLength} of {savedObjectsLength} objects already exist. Click 'Confirm overwrite' to import and overwrite existing objects. Any changes to the objects will be lost."},{overwriteErrorsLength:overwriteErrors.length,savedObjectsLength:_this.props.savedObjects.length}),isInstalled:false,overwrite:true,buttonLabel:_this.props.intl.formatMessage({id:"kbn.home.tutorial.savedObject.confirmButtonLabel",defaultMessage:"Confirm overwrite"})});return _context.abrupt("return");case 20:hasErrors=errors.length>0;statusMsg=hasErrors?_this.props.intl.formatMessage({id:"kbn.home.tutorial.savedObject.unableToAddErrorMessage",defaultMessage:"Unable to add {errorsLength} of {savedObjectsLength} kibana objects, Error: {errorMessage}"},{errorsLength:errors.length,savedObjectsLength:_this.props.savedObjects.length,errorMessage:errors[0].error.message}):_this.props.intl.formatMessage({id:"kbn.home.tutorial.savedObject.addedLabel",defaultMessage:"{savedObjectsLength} saved objects successfully added"},{savedObjectsLength:_this.props.savedObjects.length});_this.setState({isInstalling:false,installStatusMsg:statusMsg,isInstalled:!hasErrors,overwrite:false,buttonLabel:_this.DEFAULT_BUTTON_LABEL});case 23:case"end":return _context.stop()}}},_callee,null,[[1,7]])})));_defineProperty(_assertThisInitialized(_this),"renderInstallStep",function(){var installMsg=_this.props.installMsg?_this.props.installMsg:_this.props.intl.formatMessage({id:"kbn.home.tutorial.savedObject.installLabel",defaultMessage:"Imports index pattern, visualizations and pre-defined dashboards."});var installStep=_react2["default"].createElement(_react2.Fragment,null,_react2["default"].createElement(_eui.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"center"},_react2["default"].createElement(_eui.EuiFlexItem,null,_react2["default"].createElement(_eui.EuiText,null,_react2["default"].createElement("p",null,installMsg))),_react2["default"].createElement(_eui.EuiFlexItem,{grow:false},_react2["default"].createElement(_eui.EuiButton,{onClick:_this.installSavedObjects,isLoading:_this.state.isInstalling,"data-test-subj":"loadSavedObjects"},_this.state.buttonLabel))),_react2["default"].createElement(_eui.EuiSpacer,{size:"s"}),_this.renderInstallMessage());return{title:_this.props.intl.formatMessage({id:"kbn.home.tutorial.savedObject.loadTitle",defaultMessage:"Load Kibana objects"}),status:_this.state.isInstalled?"complete":"incomplete",children:installStep,key:"installStep"}});return _this}_createClass(SavedObjectsInstallerUi,[{key:"componentDidMount",value:function componentDidMount(){this._isMounted=true}},{key:"componentWillUnmount",value:function componentWillUnmount(){this._isMounted=false}},{key:"renderInstallMessage",value:function renderInstallMessage(){if(!this.state.installStatusMsg){return}return _react2["default"].createElement(_eui.EuiCallOut,{title:this.state.installStatusMsg,color:this.state.isInstalled?"success":"warning","data-test-subj":this.state.isInstalled?"loadSavedObjects_success":"loadSavedObjects_failed"})}},{key:"render",value:function render(){return _react2["default"].createElement(_eui.EuiSteps,{steps:[this.renderInstallStep()]})}}]);return SavedObjectsInstallerUi}(_react2["default"].Component);var savedObjectShape=_propTypes["default"].shape({id:_propTypes["default"].string.isRequired,type:_propTypes["default"].string.isRequired,attributes:_propTypes["default"].object.isRequired});SavedObjectsInstallerUi.propTypes={bulkCreate:_propTypes["default"].func.isRequired,savedObjects:_propTypes["default"].arrayOf(savedObjectShape).isRequired,installMsg:_propTypes["default"].string};var SavedObjectsInstaller=(0,_react.injectI18n)(SavedObjectsInstallerUi);exports.SavedObjectsInstaller=SavedObjectsInstaller},6160:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.replaceTemplateStrings=replaceTemplateStrings;var _mustache=__webpack_require__(1687);var _chrome=_interopRequireDefault(__webpack_require__(19));var _metadata=__webpack_require__(427);var _documentation_links=__webpack_require__(454);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var TEMPLATE_TAGS=["{","}"];var mustacheWriter=new _mustache.Writer;mustacheWriter.escapedValue=function escapedValue(token,context){var value=context.lookup(token[1]);if(value!=null){return value}};function replaceTemplateStrings(text){var params=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var variables={curlyOpen:"{",curlyClose:"}",config:{cloud:{id:_chrome["default"].getInjected("cloudId")},docs:{base_url:_documentation_links.ELASTIC_WEBSITE_URL,beats:{filebeat:_documentation_links.documentationLinks.filebeat.base,metricbeat:_documentation_links.documentationLinks.metricbeat.base,heartbeat:_documentation_links.documentationLinks.heartbeat.base,functionbeat:_documentation_links.documentationLinks.functionbeat.base,winlogbeat:_documentation_links.documentationLinks.winlogbeat.base,auditbeat:_documentation_links.documentationLinks.auditbeat.base},logstash:_documentation_links.documentationLinks.logstash.base,version:_documentation_links.DOC_LINK_VERSION},kibana:{version:_metadata.metadata.version}},params:params};mustacheWriter.parse(text,TEMPLATE_TAGS);return mustacheWriter.render(text,variables)}},6161:function(module,exports,__webpack_require__){"use strict";__webpack_require__(2015);var _i18n=__webpack_require__(5);__webpack_require__(6162);__webpack_require__(2044);__webpack_require__(6167);__webpack_require__(6185);__webpack_require__(2035);var _feature_catalogue=__webpack_require__(128);_feature_catalogue.FeatureCatalogueRegistryProvider.register(function(){return{id:"discover",title:_i18n.i18n.translate("kbn.discover.discoverTitle",{defaultMessage:"Discover"}),description:_i18n.i18n.translate("kbn.discover.discoverDescription",{defaultMessage:"Interactively explore your data by querying and filtering raw documents."}),icon:"discoverApp",path:"/app/kibana#/discover",showOnHomePage:true,category:_feature_catalogue.FeatureCatalogueCategory.DATA}})},6162:function(module,exports,__webpack_require__){"use strict";__webpack_require__(181);var _i18n=__webpack_require__(28);var _modules=__webpack_require__(12);var _no_results=__webpack_require__(6163);var _unsupported_index_pattern=__webpack_require__(6164);__webpack_require__(6165);var app=_modules.uiModules.get("apps/discover",["react"]);app.directive("discoverNoResults",function(reactDirective){return reactDirective((0,_i18n.wrapInI18nContext)(_no_results.DiscoverNoResults))});app.directive("discoverUnsupportedIndexPattern",function(reactDirective){return reactDirective((0,_i18n.wrapInI18nContext)(_unsupported_index_pattern.DiscoverUnsupportedIndexPattern),["unsupportedType"])})},6163:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DiscoverNoResults=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _react2=__webpack_require__(10);var _propTypes=_interopRequireDefault(__webpack_require__(17));var _eui=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var DiscoverNoResults=function(_Component){_inherits(DiscoverNoResults,_Component);function DiscoverNoResults(){_classCallCheck(this,DiscoverNoResults);return _possibleConstructorReturn(this,_getPrototypeOf(DiscoverNoResults).apply(this,arguments))}_createClass(DiscoverNoResults,[{key:"render",value:function render(){var _this$props=this.props,shardFailures=_this$props.shardFailures,timeFieldName=_this$props.timeFieldName,queryLanguage=_this$props.queryLanguage,getDocLink=_this$props.getDocLink;var shardFailuresMessage;if(shardFailures&&shardFailures.length){var failures=shardFailures.map(function(failure,index){return _react["default"].createElement("div",{key:"".concat(failure.index).concat(failure.shard).concat(failure.reason)},_react["default"].createElement(_eui.EuiText,{size:"xs"},_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.discover.noResults.indexFailureShardText",defaultMessage:"{index}, shard {failureShard}",values:{index:_react["default"].createElement("strong",null,_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.discover.noResults.indexFailureIndexText",defaultMessage:"Index {failureIndex}",values:{failureIndex:"&lsquo;".concat(failure.index,"&rsquo;")}})),failureShard:"&lsquo;".concat(failure.shard,"&rsquo;")}})),_react["default"].createElement(_eui.EuiSpacer,{size:"s"}),_react["default"].createElement(_eui.EuiCodeBlock,{paddingSize:"s"},JSON.stringify(failure.reason)),index<shardFailures.length-1?_react["default"].createElement(_eui.EuiSpacer,{size:"l"}):undefined)});shardFailuresMessage=_react["default"].createElement(_react.Fragment,null,_react["default"].createElement(_eui.EuiSpacer,{size:"xl"}),_react["default"].createElement(_eui.EuiText,null,_react["default"].createElement("h3",null,_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.discover.noResults.addressShardFailuresTitle",defaultMessage:"Address shard failures"})),_react["default"].createElement("p",null,_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.discover.noResults.shardFailuresDescription",defaultMessage:"The following shard failures occurred:"})),failures))}var timeFieldMessage;if(timeFieldName){timeFieldMessage=_react["default"].createElement(_react.Fragment,null,_react["default"].createElement(_eui.EuiSpacer,{size:"xl"}),_react["default"].createElement(_eui.EuiText,null,_react["default"].createElement("h3",{"data-test-subj":"discoverNoResultsTimefilter"},_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.discover.noResults.expandYourTimeRangeTitle",defaultMessage:"Expand your time range"})),_react["default"].createElement("p",null,_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.discover.noResults.queryMayNotMatchTitle",defaultMessage:"One or more of the indices youre looking at contains a date field. Your query may not match anything in the current time range, or there may not be any data at all in the currently selected time range. You can try changing the time range to one which contains data."}))))}var luceneQueryMessage;if(queryLanguage==="lucene"){var searchExamples=[{description:_react["default"].createElement(_eui.EuiCode,null,"200"),title:_react["default"].createElement(_eui.EuiText,null,_react["default"].createElement("strong",null,_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.discover.noResults.searchExamples.anyField200StatusCodeExampleTitle",defaultMessage:"Find requests that contain the number 200, in any field"})))},{description:_react["default"].createElement(_eui.EuiCode,null,"status:200"),title:_react["default"].createElement(_eui.EuiText,null,_react["default"].createElement("strong",null,_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.discover.noResults.searchExamples.statusField200StatusCodeExampleTitle",defaultMessage:"Find 200 in the status field"})))},{description:_react["default"].createElement(_eui.EuiCode,null,"status:[400 TO 499]"),title:_react["default"].createElement(_eui.EuiText,null,_react["default"].createElement("strong",null,_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.discover.noResults.searchExamples.400to499StatusCodeExampleTitle",defaultMessage:"Find all status codes between 400-499"})))},{description:_react["default"].createElement(_eui.EuiCode,null,"status:[400 TO 499] AND extension:PHP"),title:_react["default"].createElement(_eui.EuiText,null,_react["default"].createElement("strong",null,_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.discover.noResults.searchExamples.400to499StatusCodeWithPhpExtensionExampleTitle",defaultMessage:"Find status codes 400-499 with the extension php"})))},{description:_react["default"].createElement(_eui.EuiCode,null,"status:[400 TO 499] AND (extension:php OR extension:html)"),title:_react["default"].createElement(_eui.EuiText,null,_react["default"].createElement("strong",null,_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.discover.noResults.searchExamples.400to499StatusCodeWithPhpOrHtmlExtensionExampleTitle",defaultMessage:"Find status codes 400-499 with the extension php or html"})))}];luceneQueryMessage=_react["default"].createElement(_react.Fragment,null,_react["default"].createElement(_eui.EuiSpacer,{size:"xl"}),_react["default"].createElement(_eui.EuiText,null,_react["default"].createElement("h3",null,_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.discover.noResults.searchExamples.refineYourQueryTitle",defaultMessage:"Refine your query"})),_react["default"].createElement("p",null,_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.discover.noResults.searchExamples.howTosearchForWebServerLogsDescription",defaultMessage:"The search bar at the top uses Elasticsearchs support for Lucene {queryStringSyntaxLink}. Here are some examples of how you can search for web server logs that have been parsed into a few fields.",values:{queryStringSyntaxLink:_react["default"].createElement(_eui.EuiLink,{target:"_blank",href:getDocLink("query.luceneQuerySyntax")},_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.discover.noResults.searchExamples.queryStringSyntaxLinkText",defaultMessage:"Query String syntax"}))}}))),_react["default"].createElement(_eui.EuiSpacer,{size:"m"}),_react["default"].createElement(_eui.EuiDescriptionList,{type:"column",listItems:searchExamples}),_react["default"].createElement(_eui.EuiSpacer,{size:"xl"}))}return _react["default"].createElement(_react.Fragment,null,_react["default"].createElement(_eui.EuiSpacer,{size:"xl"}),_react["default"].createElement(_eui.EuiFlexGroup,{justifyContent:"center"},_react["default"].createElement(_eui.EuiFlexItem,{grow:false,className:"dscNoResults"},_react["default"].createElement(_eui.EuiCallOut,{title:_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.discover.noResults.searchExamples.noResultsMatchSearchCriteriaTitle",defaultMessage:"No results match your search criteria"}),color:"warning",iconType:"help","data-test-subj":"discoverNoResults"}),shardFailuresMessage,timeFieldMessage,luceneQueryMessage)))}}]);return DiscoverNoResults}(_react.Component);exports.DiscoverNoResults=DiscoverNoResults;_defineProperty(DiscoverNoResults,"propTypes",{shardFailures:_propTypes["default"].array,timeFieldName:_propTypes["default"].string,queryLanguage:_propTypes["default"].string,getDocLink:_propTypes["default"].func.isRequired})},6164:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DiscoverUnsupportedIndexPattern=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(2);var _react2=__webpack_require__(10);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}var DiscoverUnsupportedIndexPattern=function DiscoverUnsupportedIndexPattern(_ref){var unsupportedType=_ref.unsupportedType;var message=_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.discover.noResults.requiredPluginIsNotInstalledOrDisabledTitle",defaultMessage:"Index patterns based on {unsupportedType} indices require the {unsupportedType} plugin from X-Pack, which is not installed or disabled",values:{unsupportedType:unsupportedType}});return _react["default"].createElement(_react.Fragment,null,_react["default"].createElement(_eui.EuiSpacer,{size:"xl"}),_react["default"].createElement(_eui.EuiFlexGroup,{justifyContent:"center"},_react["default"].createElement(_eui.EuiFlexItem,{grow:false,className:"dscNoResults"},_react["default"].createElement(_eui.EuiCallOut,{title:message,color:"danger",iconType:"alert"}))))};exports.DiscoverUnsupportedIndexPattern=DiscoverUnsupportedIndexPattern},6165:function(module,exports,__webpack_require__){"use strict";var _vislib=_interopRequireDefault(__webpack_require__(809));var _modules=__webpack_require__(12);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_modules.uiModules.get("apps/discover").directive("discoverTimechart",function(Private){var vislib=Private(_vislib["default"]);return{restrict:"E",scope:{data:"="},link:function link($scope,elem){var init=function init(){var myChart=new vislib.Chart(elem[0],{addLegend:false});$scope.$watch("data",function(data){if(data!=null){myChart.render(data)}})};init()}}})},6166:function(module,exports,__webpack_require__){"use strict";var _lodash=_interopRequireDefault(__webpack_require__(1));var _jquery=_interopRequireDefault(__webpack_require__(25));var _modules=__webpack_require__(12);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_modules.uiModules.get("kibana").directive("collapsibleSidebar",function(){var listOfWidthClasses=_lodash["default"].times(11,function(i){return"col-md-"+i});return{restrict:"C",link:function link($scope,$elem){var isCollapsed=false;var $collapser=(0,_jquery["default"])('<button\n          data-test-subj="collapseSideBarButton"\n          type="button"\n          aria-expanded="true"\n          aria-label="Toggle sidebar"\n          class="kuiCollapseButton kbnCollapsibleSidebar__collapseButton"\n        ></button>');if($elem.attr("id")){$collapser.attr("aria-controls",$elem.attr("id"))}var $icon=(0,_jquery["default"])('<span class="kuiIcon fa-chevron-circle-left"></span>');$collapser.append($icon);var $siblings=$elem.siblings();var siblingsClass=listOfWidthClasses.reduce(function(prev,className){if(prev)return prev;return $siblings.hasClass(className)&&className},false);var hasSingleSibling=$siblings.length===1&&siblingsClass;$collapser.on("click",function(){if(isCollapsed){isCollapsed=false;$elem.removeClass("closed");$icon.addClass("fa-chevron-circle-left");$icon.removeClass("fa-chevron-circle-right");$collapser.attr("aria-expanded","true")}else{isCollapsed=true;$elem.addClass("closed");$icon.removeClass("fa-chevron-circle-left");$icon.addClass("fa-chevron-circle-right");$collapser.attr("aria-expanded","false")}if(hasSingleSibling){$siblings.toggleClass(siblingsClass+" col-md-12")}if($scope.toggleSidebar)$scope.toggleSidebar()});$collapser.appendTo($elem)}}})},6167:function(module,exports,__webpack_require__){"use strict";__webpack_require__(1015);var _i18n=__webpack_require__(5);__webpack_require__(2045);__webpack_require__(6178);__webpack_require__(6182);var _lodash=_interopRequireDefault(__webpack_require__(1));var _jquery=_interopRequireDefault(__webpack_require__(25));var _risonNode=_interopRequireDefault(__webpack_require__(251));var _field_calculator=__webpack_require__(6183);var _field_list=__webpack_require__(1356);var _modules=__webpack_require__(12);var _field_chooser=_interopRequireDefault(__webpack_require__(6184));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var app=_modules.uiModules.get("apps/discover");app.directive("discFieldChooser",function($location,config,$route){return{restrict:"E",scope:{columns:"=",hits:"=",fieldCounts:"=",state:"=",indexPattern:"=",indexPatternList:"=",onAddField:"=",onAddFilter:"=",onRemoveField:"="},template:_field_chooser["default"],link:function link($scope){$scope.$parent.$watch("showFilter",function(){$scope.toggleFieldFilterButtonAriaLabel=$scope.$parent.showFilter?_i18n.i18n.translate("kbn.discover.fieldChooser.toggleFieldFilterButtonHideAriaLabel",{defaultMessage:"Hide field settings"}):_i18n.i18n.translate("kbn.discover.fieldChooser.toggleFieldFilterButtonShowAriaLabel",{defaultMessage:"Show field settings"})});$scope.selectedIndexPattern=$scope.indexPatternList.find(function(pattern){return pattern.id===$scope.indexPattern.id});$scope.indexPatternList=_lodash["default"].sortBy($scope.indexPatternList,function(o){return o.get("title")});$scope.setIndexPattern=function(pattern){$scope.state.index=pattern.id;$scope.state.save()};$scope.$watch("state.index",function(id,previousId){if(previousId==null||previousId===id)return;$route.reload()});var filter=$scope.filter={props:["type","aggregatable","searchable","missing","name"],defaults:{missing:true,type:"any"},boolOpts:[{label:"any",value:undefined},{label:"yes",value:true},{label:"no",value:false}],toggleVal:function toggleVal(name,def){if(filter.vals[name]!==def)filter.vals[name]=def;else filter.vals[name]=undefined},reset:function reset(){filter.vals=_lodash["default"].clone(filter.defaults)},isFieldSelected:function isFieldSelected(field){return field.display},isFieldFiltered:function isFieldFiltered(field){var matchFilter=filter.vals.type==="any"||field.type===filter.vals.type;var isAggregatable=filter.vals.aggregatable==null||field.aggregatable===filter.vals.aggregatable;var isSearchable=filter.vals.searchable==null||field.searchable===filter.vals.searchable;var scriptedOrMissing=!filter.vals.missing||field.scripted||field.rowCount>0;var matchName=!filter.vals.name||field.name.indexOf(filter.vals.name)!==-1;return!field.display&&matchFilter&&isAggregatable&&isSearchable&&scriptedOrMissing&&matchName},popularity:function popularity(field){return field.count>0},getActive:function getActive(){return _lodash["default"].some(filter.props,function(prop){return filter.vals[prop]!==filter.defaults[prop]})}};filter.reset();$scope.$watchCollection("filter.vals",function(){filter.active=filter.getActive()});$scope.$watchMulti(["[]fieldCounts","[]columns","[]hits"],function(cur,prev){var newHits=cur[2]!==prev[2];var fields=$scope.fields;var columns=$scope.columns||[];var fieldCounts=$scope.fieldCounts;if(!fields||newHits){$scope.fields=fields=getFields()}if(!fields)return;_lodash["default"].chain(fields).each(function(field){field.displayOrder=_lodash["default"].indexOf(columns,field.name)+1;field.display=!!field.displayOrder;field.rowCount=fieldCounts[field.name]}).sortBy(function(field){return(field.count||0)*-1}).groupBy(function(field){if(field.display)return"selected";return field.count>0?"popular":"unpopular"}).tap(function(groups){groups.selected=_lodash["default"].sortBy(groups.selected||[],"displayOrder");groups.popular=groups.popular||[];groups.unpopular=groups.unpopular||[];var extras=groups.popular.splice(config.get("fields:popularLimit"));groups.unpopular=extras.concat(groups.unpopular)}).each(function(group,name){$scope[name+"Fields"]=_lodash["default"].sortBy(group,name==="selected"?"display":"name")}).commit();$scope.fieldTypes=_lodash["default"].union(["any"],_lodash["default"].pluck(fields,"type"))});$scope.increaseFieldCounter=function(fieldName){$scope.indexPattern.popularizeField(fieldName,1)};function getVisualizeUrl(field){if(!$scope.state){return""}var agg={};var isGeoPoint=field.type==="geo_point";var type=isGeoPoint?"tile_map":"histogram";if(field.type==="date"&&$scope.indexPattern.timeFieldName===field.name){agg={type:"date_histogram",schema:"segment",params:{field:field.name,interval:"auto"}}}else if(isGeoPoint){agg={type:"geohash_grid",schema:"segment",params:{field:field.name,precision:3}}}else{agg={type:"terms",schema:"segment",params:{field:field.name,size:parseInt(config.get("discover:aggs:terms:size"),10),orderBy:"2"}}}return"#/visualize/create?"+_jquery["default"].param(_lodash["default"].assign(_lodash["default"].clone($location.search()),{indexPattern:$scope.state.index,type:type,_a:_risonNode["default"].encode({filters:$scope.state.filters||[],query:$scope.state.query||undefined,vis:{type:type,aggs:[{schema:"metric",type:"count",id:"2"},agg]}})}))}$scope.computeDetails=function(field,recompute){if(_lodash["default"].isUndefined(field.details)||recompute){field.details=_objectSpread({visualizeUrl:field.visualizable?getVisualizeUrl(field):null},_field_calculator.fieldCalculator.getFieldValueCounts({hits:$scope.hits,field:field,count:5,grouped:false}));_lodash["default"].each(field.details.buckets,function(bucket){bucket.display=field.format.convert(bucket.value)});$scope.increaseFieldCounter(field,1)}else{delete field.details}};function getFields(){var prevFields=$scope.fields;var indexPattern=$scope.indexPattern;var hits=$scope.hits;var fieldCounts=$scope.fieldCounts;if(!indexPattern||!hits||!fieldCounts)return;var fieldSpecs=indexPattern.fields.slice(0);var fieldNamesInDocs=_lodash["default"].keys(fieldCounts);var fieldNamesInIndexPattern=_lodash["default"].keys(indexPattern.fields.byName);_lodash["default"].difference(fieldNamesInDocs,fieldNamesInIndexPattern).forEach(function(unknownFieldName){fieldSpecs.push({name:unknownFieldName,type:"unknown"})});var fields=new _field_list.FieldList(indexPattern,fieldSpecs);if(prevFields){fields.forEach(function(field){field.details=_lodash["default"].get(prevFields,["byName",field.name,"details"])})}return fields}}}})},6168:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<span\n  aria-label="<%= booleanFieldAriaLabel %>"\n  class="dscField__icon kuiIcon fa-adjust"\n></span>\n'},6169:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<span\n  aria-label="<%= conflictingFieldAriaLabel %>"\n  class="dscField__icon kuiIcon fa-warning"\n></span>\n'},6170:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<span\n  aria-label="<%= dateFieldAriaLabel %>"\n  class="dscField__icon kuiIcon fa-clock-o"\n></span>\n'},6171:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<span\n  aria-label="<%= geoPointFieldAriaLabel %>"\n  class="dscField__icon kuiIcon fa-globe"\n></span>\n'},6172:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<span\n  aria-label="<%= ipAddressFieldAriaLabel %>"\n  class="dscField__icon kuiIcon fa-laptop"\n></span>\n'},6173:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<span\n  aria-label="<%= murmur3FieldAriaLabel %>"\n  class="dscField__icon"\n>\n  <strong aria-hidden="true">h</strong>\n</span>\n'},6174:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<span\n  aria-label="<%= numberFieldAriaLabel %>"\n  class="dscField__icon"\n>\n  <strong aria-hidden="true">#</strong>\n</span>\n'},6175:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<span\n  aria-label="<%= sourceFieldAriaLabel %>"\n  class="dscField__icon kuiIcon fa-file-text-o"\n></span>\n'},6176:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<span\n  aria-label="<%= stringFieldAriaLabel %>"\n  class="dscField__icon"\n>\n  <strong aria-hidden="true">t</strong>\n</span>\n'},6177:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<span\n  aria-label="<%= unknownFieldAriaLabel %>"\n  class="dscField__icon"\n>\n  <strong aria-hidden="true">?</strong>\n</span>\n'},6178:function(module,exports,__webpack_require__){"use strict";var _jquery=_interopRequireDefault(__webpack_require__(25));var _i18n=__webpack_require__(5);var _discover_field=_interopRequireDefault(__webpack_require__(6179));var _lodash=_interopRequireDefault(__webpack_require__(1));__webpack_require__(1015);__webpack_require__(2045);__webpack_require__(6180);var _string=_interopRequireDefault(__webpack_require__(6181));var _capabilities=__webpack_require__(141);var _modules=__webpack_require__(12);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var app=_modules.uiModules.get("apps/discover");app.directive("discoverField",function($compile){return{restrict:"E",template:_discover_field["default"],replace:true,scope:{field:"=",onAddField:"=",onAddFilter:"=",onRemoveField:"=",onShowDetails:"="},link:function link($scope,$elem){var detailsElem;var detailScope;var init=function init(){if($scope.field.details){$scope.toggleDetails($scope.field,true)}$scope.addRemoveButtonLabel=$scope.field.display?_i18n.i18n.translate("kbn.discover.fieldChooser.discoverField.removeButtonLabel",{defaultMessage:"remove"}):_i18n.i18n.translate("kbn.discover.fieldChooser.discoverField.addButtonLabel",{defaultMessage:"add"})};var getWarnings=function getWarnings(field){var warnings=[];if(field.scripted){warnings.push(_i18n.i18n.translate("kbn.discover.fieldChooser.discoverField.scriptedFieldsTakeLongExecuteDescription",{defaultMessage:"Scripted fields can take a long time to execute."}))}if(warnings.length>1){warnings=warnings.map(function(warning,i){return(i>0?"\n":"")+(i+1)+" - "+warning})}return warnings};$scope.canVisualize=_capabilities.capabilities.get().visualize.show;$scope.toggleDisplay=function(field){if(field.display){$scope.onRemoveField(field.name)}else{$scope.onAddField(field.name)}if(field.details){$scope.toggleDetails(field)}};$scope.onClickToggleDetails=function onClickToggleDetails($event,field){if($event.currentTarget!==$event.target){$event.preventDefault()}$scope.toggleDetails(field)};$scope.toggleDetails=function(field,recompute){if(_lodash["default"].isUndefined(field.details)||recompute){$scope.onShowDetails(field,recompute);detailScope=$scope.$new();detailScope.warnings=getWarnings(field);detailScope.getBucketAriaLabel=function(bucket){return _i18n.i18n.translate("kbn.discover.fieldChooser.discoverField.bucketAriaLabel",{defaultMessage:"Value: {value}",values:{value:bucket.display===""?_i18n.i18n.translate("kbn.discover.fieldChooser.discoverField.emptyStringText",{defaultMessage:"Empty string"}):bucket.display}})};detailsElem=(0,_jquery["default"])(_string["default"]);$compile(detailsElem)(detailScope);$elem.append(detailsElem).addClass("active");$elem.find(".dscSidebarItem").addClass("dscSidebarItem--active")}else{delete field.details;detailScope.$destroy();detailsElem.remove();$elem.removeClass("active");$elem.find(".dscSidebarItem").removeClass("dscSidebarItem--active")}};init()}}})},6179:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<li\n  class="sidebar-item"\n  attr-field="{{::field.name}}"\n>\n  <div\n    data-test-subj="field-{{::field.name}}"\n    ng-click="onClickToggleDetails($event, field)"\n    kbn-accessible-click\n    class="sidebar-item-title dscSidebarItem"\n  >\n    <field-name\n      class="dscField dscSidebarItem__label"\n      field="field"\n    ></field-name>\n\n    <button\n      ng-if="field.name !== \'_source\'"\n      ng-click="toggleDisplay(field)"\n      ng-class="::field.display ? \'kuiButton--danger\' : \'kuiButton--primary\'"\n      ng-bind="::addRemoveButtonLabel"\n      class="dscSidebarItem__action kuiButton kuiButton--small"\n      data-test-subj="fieldToggle-{{::field.name}}"\n    ></button>\n  </div>\n</li>\n'},6180:function(module,exports,__webpack_require__){"use strict";var _i18n=__webpack_require__(28);var _modules=__webpack_require__(12);var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _module=_modules.uiModules.get("discover/field_chooser");function StringFieldProgressBar(props){return _react["default"].createElement(_eui.EuiToolTip,{anchorClassName:"dscProgressBarTooltip__anchor",content:props.count,delay:"regular",position:"right"},_react["default"].createElement(_eui.EuiFlexGroup,{alignItems:"center"},_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiProgress,{value:props.percent,max:100,color:"secondary","aria-labelledby":"CanvasAssetManagerLabel",size:"l"})),_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiText,{size:"xs"},props.percent,"%"))))}_module.directive("stringFieldProgressBar",function(reactDirective){return reactDirective((0,_i18n.wrapInI18nContext)(StringFieldProgressBar))})},6181:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<div class="dscFieldDetails">\n  <div class="kuiVerticalRhythmSmall">\n    <p class="euiText euiText--extraSmall euiTextColor--subdued" ng-show="!field.details.error">\n      <span\n        i18n-id="kbn.discover.fieldChooser.detailViews.topValuesInRecordsDescription"\n        i18n-default-message="Top 5 values in"\n      ></span>\n      <span ng-if="!field.details.error">\n        <a\n          class="kuiLink"\n          kbn-accessible-click\n          ng-show="!field.indexPattern.metaFields.includes(field.name) && !field.scripted"\n          ng-click="onAddFilter(\'_exists_\', field.name, \'+\')">\n          {{::field.details.exists}}\n        </a>\n        <span\n          ng-show="field.indexPattern.metaFields.includes(field.name) || field.scripted">\n          {{::field.details.exists}}\n        </span>\n        / {{::field.details.total}}\n        <span\n          i18n-id="kbn.discover.fieldChooser.detailViews.recordsText"\n          i18n-default-message="records"\n        ></span>\n      </span>\n    </p>\n\n    <div class="clearfix"></div>\n\n    <div ng-if="field.details.error" class="euiText euiText--extraSmall euiTextColor--subdued">{{field.details.error}}</div>\n\n    <div ng-if="!field.details.error">\n      <div ng-repeat="bucket in ::field.details.buckets" class="dscFieldDetailsItem">\n        <div class="dscFieldDetailsItem__title">\n          \x3c!-- Field value --\x3e\n          <div\n            css-truncate\n            css-truncate-expandable="true"\n            class="dscFieldDetails__value"\n            aria-label="{{::getBucketAriaLabel(bucket)}}"\n          >\n            {{::bucket.display}}\n            <em\n              ng-show="bucket.display === \'\'"\n              i18n-id="kbn.discover.fieldChooser.detailViews.emptyStringText"\n              i18n-default-message="Empty string"\n            ></em>\n          </div>\n\n          \x3c!-- Add/remove filter buttons --\x3e\n          <div\n            class="dscFieldDetailsItem__buttonGroup"\n            ng-show="field.filterable"\n          >\n            <button\n              class="dscFieldDetailsItem__button"\n              ng-click="onAddFilter(field, bucket.value, \'+\')"\n              aria-label="{{::\'kbn.discover.fieldChooser.detailViews.filterValueButtonAriaLabel\' | i18n: {defaultMessage: \'Filter for this value\'} }}"\n              data-test-subj="plus-{{::field.name}}-{{::bucket.display}}"\n            >\n              <span\n                aria-hidden="true"\n                class="kuiIcon fa-search-plus dscFieldDetails__filter"\n              ></span>\n            </button>\n\n            <button\n              class="dscFieldDetailsItem__button"\n              ng-click="onAddFilter(field, bucket.value, \'-\')"\n              aria-label="{{::\'kbn.discover.fieldChooser.detailViews.filterOutValueButtonAriaLabel\' | i18n: {defaultMessage: \'Filter out this value\'} }}"\n              data-test-subj="minus-{{::field.name}}-{{::bucket.display}}"\n            >\n              <span\n                aria-hidden="true"\n                class="kuiIcon fa-search-minus dscFieldDetails__filter"\n              ></span>\n            </button>\n          </div>\n        </div>\n        <string-field-progress-bar\n          percent="{{bucket.percent}}"\n          count="{{::bucket.count}}"        \n        ></string-field-progress-bar>\n      </div>\n    </div>\n  </div>\n\n  <a\n    ng-href="{{field.details.visualizeUrl}}"\n    ng-show="field.visualizable && canVisualize"\n    class="kuiButton kuiButton--secondary kuiButton--small kuiVerticalRhythmSmall"\n    data-test-subj="fieldVisualize-{{::field.name}}"\n  >\n    <span\n      i18n-id="kbn.discover.fieldChooser.detailViews.visualizeLinkText"\n      i18n-default-message="Visualize"\n    ></span>\n    <span class="discover-field-vis-warning" ng-show="warnings.length" tooltip="{{warnings.join(\' \')}}">\n    ( <span\n      i18n-id="kbn.discover.fieldChooser.detailViews.warningsText"\n      i18n-default-message="{warningsLength, plural, one {# warning} other {# warnings}}"\n      i18n-values="{ warningsLength: warnings.length }"\n    ></span> <i aria-hidden="true" class="fa fa-warning"></i> )\n    </span>\n  </a>\n</div>\n'},6182:function(module,exports,__webpack_require__){"use strict";__webpack_require__(25);__webpack_require__(31);__webpack_require__(509);__webpack_require__(1967);var _modules=__webpack_require__(12);_modules.uiModules.get("kibana",["ui.select","ngSanitize"])},6183:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.fieldCalculator=void 0;var _lodash=_interopRequireDefault(__webpack_require__(1));var _i18n=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getFieldValues(hits,field){var name=field.name;var flattenHit=field.indexPattern.flattenHit;return _lodash["default"].map(hits,function(hit){return flattenHit(hit)[name]})}function getFieldValueCounts(params){params=_lodash["default"].defaults(params,{count:5,grouped:false});if(params.field.type==="geo_point"||params.field.type==="geo_shape"||params.field.type==="attachment"){return{error:_i18n.i18n.translate("kbn.discover.fieldChooser.fieldCalculator.analysisIsNotAvailableForGeoFieldsErrorMessage",{defaultMessage:"Analysis is not available for geo fields."})}}var allValues=getFieldValues(params.hits,params.field);var counts;var missing=_countMissing(allValues);try{var groups=_groupValues(allValues,params);counts=_lodash["default"].map(_lodash["default"].sortBy(groups,"count").reverse().slice(0,params.count),function(bucket){return{value:bucket.value,count:bucket.count,percent:(bucket.count/(params.hits.length-missing)*100).toFixed(1)}});if(params.hits.length-missing===0){return{error:_i18n.i18n.translate("kbn.discover.fieldChooser.fieldCalculator.fieldIsNotPresentInDocumentsErrorMessage",{defaultMessage:"This field is present in your Elasticsearch mapping but not in the {hitsLength} documents shown in the doc table. You may still be able to visualize or search on it.",values:{hitsLength:params.hits.length}})}}return{total:params.hits.length,exists:params.hits.length-missing,missing:missing,buckets:counts}}catch(e){return{error:e.message}}}function _countMissing(array){return array.length-_lodash["default"].without(array,undefined,null).length}function _groupValues(allValues,params){var groups={};var k;allValues.forEach(function(value){if(_lodash["default"].isObject(value)&&!Array.isArray(value)){throw new Error(_i18n.i18n.translate("kbn.discover.fieldChooser.fieldCalculator.analysisIsNotAvailableForObjectFieldsErrorMessage",{defaultMessage:"Analysis is not available for object fields."}))}if(Array.isArray(value)&&!params.grouped){k=value}else{k=value==null?undefined:[value]}_lodash["default"].each(k,function(key){if(groups.hasOwnProperty(key)){groups[key].count++}else{groups[key]={value:params.grouped?value:key,count:1}}})});return groups}var fieldCalculator={_groupValues:_groupValues,_countMissing:_countMissing,getFieldValues:getFieldValues,getFieldValueCounts:getFieldValueCounts};exports.fieldCalculator=fieldCalculator},6184:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<section class="sidebar-list" aria-label="{{::\'kbn.discover.fieldChooser.filter.indexAndFieldsSectionAriaLabel\' | i18n: {defaultMessage: \'Index and fields\'} }}">\n  <div ng-show="indexPatternList.length > 1">\n    <ui-select\n      class="index-pattern-selection"\n      ng-model="selectedIndexPattern"\n      on-select="setIndexPattern($item)"\n    >\n      <ui-select-match>\n        <span\n          class="uiSelectMatch--ellipsis"\n          tooltip="{{$select.selected.get(\'title\')}}"\n          tooltip-append-to-body="true"\n        >\n          {{$select.selected.get(\'title\')}}\n        </span>\n      </ui-select-match>\n      <ui-select-choices repeat="pattern in indexPatternList | filter:$select.search">\n        <div ng-bind-html="pattern.get(\'title\') | highlight: $select.search"></div>\n      </ui-select-choices>\n    </ui-select>\n  </div>\n  <div ng-hide="indexPatternList.length > 1">\n    <div class="index-pattern">\n      <h2\n        class="index-pattern-label"\n        id="index_pattern_id"\n        tabindex="0"\n        css-truncate>\n\n        {{ indexPattern.title }}</h2>\n    </div>\n  </div>\n\n  <div class="dscSidebar__listHeader sidebar-list-header" ng-if="fields.length">\n    <h3\n      class="euiFlexItem euiTitle euiTitle--xxsmall"\n      id="selected_fields"\n      tabindex="0"\n      i18n-id="kbn.discover.fieldChooser.filter.selectedFieldsTitle"\n      i18n-default-message="Selected fields"\n    ></h3>\n  </div>\n  <ul class="list-unstyled dscFieldList--selected" >\n    <discover-field\n      ng-repeat="field in fields.raw|filter:{display:true}"\n      field="field"\n      on-add-field="onAddField"\n      on-add-filter="onAddFilter"\n      on-remove-field="onRemoveField"\n      on-show-details="computeDetails"\n    >\n    </discover-field>\n  </ul>\n\n  <div class="sidebar-list-header sidebar-item euiFlexGroup euiFlexGroup--gutterMedium" ng-if="fields.length">\n    <h3\n      class="euiFlexItem euiTitle euiTitle--xxsmall"\n      id="available_fields"\n      tabindex="0"\n      i18n-id="kbn.discover.fieldChooser.filter.availableFieldsTitle"\n      i18n-default-message="Available fields"\n    ></h3>\n\n    <div class="euiFlexItem euiFlexItem--flexGrowZero">\n      <button\n        ng-click="$parent.showFields = !$parent.showFields"\n        aria-hidden="true"\n        class="kuiButton kuiButton--small visible-xs visible-sm pull-right dscFieldChooser__toggle"\n      >\n        <span\n          aria-hidden="true"\n          class="kuiIcon"\n          ng-class="{ \'fa-chevron-right\': !$parent.showFields, \'fa-chevron-down\': $parent.showFields }"\n        ></span>\n      </button>\n    </div>\n    <div class="euiFlexItem euiFlexItem--flexGrowZero">\n      <button\n        type="button"\n        ng-class="{ \'kuiButton--basic\': !filter.active, \'kuiButton--primary\': filter.active, \'hidden-xs\': !$parent.showFields, \'hidden-sm\': !$parent.showFields }"\n        class="kuiButton kuiButton--small pull-right discover-field-filter-toggle"\n        ng-click="$parent.showFilter = !$parent.showFilter"\n        aria-label="{{toggleFieldFilterButtonAriaLabel}}"\n        aria-expanded="{{!!$parent.showFilter}}"\n        aria-controls="discoverFieldFilter"\n        data-test-subj="toggleFieldFilterButton"\n      >\n        <span aria-hidden="true" class="kuiIcon fa-gear"></span>\n      </button>\n    </div>\n  </div>\n\n  <div class="sidebar-item dscFieldDetails" ng-show="showFilter" id="discoverFieldFilter" data-test-subj="discoverFieldFilter">\n    <form role="form">\n      <div class="form-group">\n        <label\n          for="discoverFieldChooserFilterAggregatable"\n          i18n-id="kbn.discover.fieldChooser.filter.aggregatableLabel"\n          i18n-default-message="Aggregatable"\n        ></label>\n        <select\n          id="discoverFieldChooserFilterAggregatable"\n          ng-options="opt.value as opt.label for opt in filter.boolOpts"\n          ng-model="filter.vals.aggregatable"\n          class="form-control">\n        </select>\n      </div>\n      <div class="form-group">\n        <label\n          for="discoverFieldChooserFilterSearchable"\n          i18n-id="kbn.discover.fieldChooser.filter.searchableLabel"\n          i18n-default-message="Searchable"\n        ></label>\n        <select\n          id="discoverFieldChooserFilterSearchable"\n          ng-options="opt.value as opt.label for opt in filter.boolOpts"\n          ng-model="filter.vals.searchable"\n          class="form-control">\n        </select>\n      </div>\n      <div class="form-group">\n        <label\n          for="discoverFieldChooserFilterType"\n          i18n-id="kbn.discover.fieldChooser.filter.typeLabel"\n          i18n-default-message="Type"\n        ></label>\n        <select\n          id="discoverFieldChooserFilterType"\n          ng-options="field as field for field in fieldTypes"\n          ng-model="filter.vals.type"\n          class="form-control">\n        </select>\n      </div>\n      <div class="form-group">\n        <label\n          for="discoverFieldChooserFilterFieldName"\n          i18n-id="kbn.discover.fieldChooser.filter.fieldNameLabel"\n          i18n-default-message="Field name"\n        ></label>\n        <input\n          id="discoverFieldChooserFilterFieldName"\n          type="text"\n          class="form-control"\n          ng-model="filter.vals.name"\n        >\n      </div>\n      <div class="form-group">\n        <label for="discoverFieldChooserHideMissingFields">\n          <input id="discoverFieldChooserHideMissingFields" type="checkbox" ng-model="filter.vals.missing">\n          <span\n            i18n-id="kbn.discover.fieldChooser.filter.hideMissingFieldsLabel"\n            i18n-default-message="Hide missing fields"\n          ></span>\n        </label>\n      </div>\n      <button\n        ng-click="filter.reset()"\n        ng-disabled="!filter.active"\n        class="kuiButton kuiButton--danger kuiButton--fullWidth"\n        i18n-id="kbn.discover.fieldChooser.filter.resetFiltersButtonLabel"\n        i18n-default-message="Reset filters"\n      ></button>\n    </form>\n  </div>\n\n  <ul\n    ng-show="(popularFields | filter:filter.isFieldFiltered).length > 0"\n    ng-class="{ \'hidden-sm\': !showFields, \'hidden-xs\': !showFields }"\n    class="list-unstyled sidebar-well dscFieldList--popular">\n    <li class="sidebar-item sidebar-list-header">\n      <h6\n        i18n-id="kbn.discover.fieldChooser.filter.popularTitle"\n        i18n-default-message="Popular"\n      ></h6>\n    </li>\n    <discover-field\n      ng-repeat="field in popularFields | filter:filter.isFieldFiltered"\n      field="field"\n      on-add-field="onAddField"\n      on-add-filter="onAddFilter"\n      on-remove-field="onRemoveField"\n      on-show-details="computeDetails"\n    >\n    </discover-field>\n  </ul>\n\n  <ul\n    ng-class="{ \'hidden-sm\': !showFields, \'hidden-xs\': !showFields  }"\n    class="list-unstyled dscFieldList--unpopular">\n    <discover-field\n      ng-repeat="field in unpopularFields | filter:filter.isFieldFiltered"\n      field="field"\n      on-add-field="onAddField"\n      on-add-filter="onAddFilter"\n      on-remove-field="onRemoveField"\n      on-show-details="computeDetails"\n    >\n    </discover-field>\n  </ul>\n\n</section>\n'},6185:function(module,exports,__webpack_require__){"use strict";var _lodash=_interopRequireDefault(__webpack_require__(1));var _i18n=__webpack_require__(5);var _react=_interopRequireDefault(__webpack_require__(0));var _angular=_interopRequireDefault(__webpack_require__(31));var _moment=_interopRequireDefault(__webpack_require__(23));var _chrome=_interopRequireDefault(__webpack_require__(19));var _datemath=_interopRequireDefault(__webpack_require__(45));__webpack_require__(2033);var _get_sort=__webpack_require__(2034);var columnActions=_interopRequireWildcard(__webpack_require__(2038));var filterActions=_interopRequireWildcard(__webpack_require__(2046));__webpack_require__(781);__webpack_require__(2047);__webpack_require__(6186);__webpack_require__(263);__webpack_require__(514);var _timefilter=__webpack_require__(74);var _courier=__webpack_require__(451);var _notify=__webpack_require__(24);var _vis=__webpack_require__(806);var _query_filter=__webpack_require__(188);var _vislib=__webpack_require__(561);var _doc_title=__webpack_require__(423);var _interval_options=__webpack_require__(1432);var _state_monitor_factory=__webpack_require__(1028);var _routes=_interopRequireDefault(__webpack_require__(34));var _modules=__webpack_require__(12);var _index=_interopRequireDefault(__webpack_require__(6187));var _state=__webpack_require__(682);var _migrate_legacy_query=__webpack_require__(669);var _subscribe_with_scope=__webpack_require__(511);var _filter_manager=__webpack_require__(1029);var _saved_objects=__webpack_require__(108);var _visualize_loader=__webpack_require__(663);var _persisted_log=__webpack_require__(262);var _documentation_links=__webpack_require__(227);__webpack_require__(6189);var _get_painless_error=__webpack_require__(6191);var _share=__webpack_require__(1030);var _state_hashing=__webpack_require__(432);var _inspector=__webpack_require__(310);var _adapters=__webpack_require__(375);var _courier_inspector_utils=__webpack_require__(566);var _show_open_search_panel=__webpack_require__(6197);var _tabify=__webpack_require__(6199);var _show_saved_object_save_modal=__webpack_require__(1031);var _saved_object_save_modal=__webpack_require__(1032);var _breadcrumbs=__webpack_require__(1033);var _build_pipeline=__webpack_require__(1005);__webpack_require__(670);var _setup=__webpack_require__(84);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}_setup.data.search.loadLegacyDirectives();var fetchStatuses={UNINITIALIZED:"uninitialized",LOADING:"loading",COMPLETE:"complete"};var app=_modules.uiModules.get("apps/discover",["kibana/notify","kibana/courier","kibana/url","kibana/index_patterns"]);_routes["default"].defaults(/^\/discover(\/|$)/,{requireDefaultIndex:true,requireUICapability:"discover.show",k7Breadcrumbs:function k7Breadcrumbs($route,$injector){return $injector.invoke($route.current.params.id?_breadcrumbs.getSavedSearchBreadcrumbs:_breadcrumbs.getRootBreadcrumbs)},badge:function badge(uiCapabilities){if(uiCapabilities.discover.save){return undefined}return{text:_i18n.i18n.translate("kbn.discover.badge.readOnly.text",{defaultMessage:"Read only"}),tooltip:_i18n.i18n.translate("kbn.discover.badge.readOnly.tooltip",{defaultMessage:"Unable to save searches"}),iconType:"glasses"}}}).when("/discover/:id?",{template:_index["default"],reloadOnSearch:false,resolve:{ip:function ip(Promise,indexPatterns,config,Private){var State=Private(_state.StateProvider);var savedObjectsClient=Private(_saved_objects.SavedObjectsClientProvider);return savedObjectsClient.find({type:"index-pattern",fields:["title"],perPage:1e4}).then(function(_ref){var savedObjects=_ref.savedObjects;var state=new State("_a",{});var specified=!!state.index;var exists=_lodash["default"].findIndex(savedObjects,function(o){return o.id===state.index})>-1;var id=exists?state.index:config.get("defaultIndex");state.destroy();return Promise.props({list:savedObjects,loaded:indexPatterns.get(id),stateVal:state.index,stateValFound:specified&&exists})})},savedSearch:function savedSearch(redirectWhenMissing,savedSearches,$route){var savedSearchId=$route.current.params.id;return savedSearches.get(savedSearchId).then(function(savedSearch){if(savedSearchId){_persisted_log.recentlyAccessed.add(savedSearch.getFullPath(),savedSearch.title,savedSearchId)}return savedSearch})["catch"](redirectWhenMissing({search:"/discover","index-pattern":"/management/kibana/objects/savedSearches/"+$route.current.params.id}))}}});app.directive("discoverApp",function(){return{restrict:"E",controllerAs:"discoverApp",controller:discoverController}});function discoverController($element,$route,$scope,$timeout,$window,AppState,Private,Promise,config,courier,kbnUrl,localStorage,uiCapabilities){var _this=this;var visualizeLoader=Private(_visualize_loader.VisualizeLoaderProvider);var visualizeHandler;var Vis=Private(_vis.VisProvider);var responseHandler=(0,_vislib.vislibSeriesResponseHandlerProvider)().handler;var getUnhashableStates=Private(_state_hashing.getUnhashableStatesProvider);var shareContextMenuExtensions=Private(_share.ShareContextMenuExtensionsRegistryProvider);var queryFilter=Private(_query_filter.FilterBarQueryFilterProvider);var filterGen=(0,_filter_manager.getFilterGenerator)(queryFilter);var inspectorAdapters={requests:new _adapters.RequestAdapter};var filterUpdateSubscription;var filterFetchSubscription;_timefilter.timefilter.disableTimeRangeSelector();_timefilter.timefilter.disableAutoRefreshSelector();$scope.getDocLink=_documentation_links.getDocLink;$scope.intervalOptions=_interval_options.intervalOptions;$scope.showInterval=false;$scope.minimumVisibleRows=50;$scope.fetchStatus=fetchStatuses.UNINITIALIZED;$scope.refreshInterval=_timefilter.timefilter.getRefreshInterval();$scope.intervalEnabled=function(interval){return interval.val!=="custom"};var savedSearch=$route.current.locals.savedSearch;$scope.$on("$destroy",function(){savedSearch.destroy();if(filterFetchSubscription)filterFetchSubscription.unsubscribe();if(filterUpdateSubscription)filterUpdateSubscription.unsubscribe()});var $appStatus=$scope.appStatus=this.appStatus={dirty:!savedSearch.id};var getTopNavLinks=function getTopNavLinks(){var newSearch={key:"new",label:_i18n.i18n.translate("kbn.discover.localMenu.localMenu.newSearchTitle",{defaultMessage:"New"}),description:_i18n.i18n.translate("kbn.discover.localMenu.newSearchDescription",{defaultMessage:"New Search"}),run:function run(){kbnUrl.change("/discover")},testId:"discoverNewButton"};var saveSearch={key:"save",label:_i18n.i18n.translate("kbn.discover.localMenu.saveTitle",{defaultMessage:"Save"}),description:_i18n.i18n.translate("kbn.discover.localMenu.saveSearchDescription",{defaultMessage:"Save Search"}),testId:"discoverSaveButton",run:function(){var _run=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var onSave,saveModal;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:onSave=function onSave(_ref2){var newTitle=_ref2.newTitle,newCopyOnSave=_ref2.newCopyOnSave,isTitleDuplicateConfirmed=_ref2.isTitleDuplicateConfirmed,onTitleDuplicate=_ref2.onTitleDuplicate;var currentTitle=savedSearch.title;savedSearch.title=newTitle;savedSearch.copyOnSave=newCopyOnSave;var saveOptions={confirmOverwrite:false,isTitleDuplicateConfirmed:isTitleDuplicateConfirmed,onTitleDuplicate:onTitleDuplicate};return saveDataSource(saveOptions).then(function(_ref3){var id=_ref3.id,error=_ref3.error;if(!id||error){savedSearch.title=currentTitle}return{id:id,error:error}})};saveModal=_react["default"].createElement(_saved_object_save_modal.SavedObjectSaveModal,{onSave:onSave,onClose:function onClose(){},title:savedSearch.title,showCopyOnSave:savedSearch.id?true:false,objectType:"search"});(0,_show_saved_object_save_modal.showSaveModal)(saveModal);case 3:case"end":return _context.stop()}}},_callee)}));function run(){return _run.apply(this,arguments)}return run}()};var openSearch={key:"open",label:_i18n.i18n.translate("kbn.discover.localMenu.openTitle",{defaultMessage:"Open"}),description:_i18n.i18n.translate("kbn.discover.localMenu.openSavedSearchDescription",{defaultMessage:"Open Saved Search"}),testId:"discoverOpenButton",run:function run(){(0,_show_open_search_panel.showOpenSearchPanel)({makeUrl:function makeUrl(searchId){return kbnUrl.eval("#/discover/{{id}}",{id:searchId})}})}};var shareSearch={key:"share",label:_i18n.i18n.translate("kbn.discover.localMenu.shareTitle",{defaultMessage:"Share"}),description:_i18n.i18n.translate("kbn.discover.localMenu.shareSearchDescription",{defaultMessage:"Share Search"}),testId:"shareTopNavButton",run:function(){var _run2=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(menuItem,navController,anchorElement){var sharingData;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return _this.getSharingData();case 2:sharingData=_context2.sent;(0,_share.showShareContextMenu)({anchorElement:anchorElement,allowEmbed:false,allowShortUrl:uiCapabilities.discover.createShortUrl,getUnhashableStates:getUnhashableStates,objectId:savedSearch.id,objectType:"search",shareContextMenuExtensions:shareContextMenuExtensions,sharingData:_objectSpread({},sharingData,{title:savedSearch.title}),isDirty:$appStatus.dirty});case 4:case"end":return _context2.stop()}}},_callee2)}));function run(_x,_x2,_x3){return _run2.apply(this,arguments)}return run}()};var inspectSearch={key:"inspect",label:_i18n.i18n.translate("kbn.discover.localMenu.inspectTitle",{defaultMessage:"Inspect"}),description:_i18n.i18n.translate("kbn.discover.localMenu.openInspectorForSearchDescription",{defaultMessage:"Open Inspector for search"}),testId:"openInspectorButton",run:function run(){_inspector.Inspector.open(inspectorAdapters,{title:savedSearch.title})}};return[newSearch].concat(_toConsumableArray(uiCapabilities.discover.save?[saveSearch]:[]),[openSearch,shareSearch,inspectSearch])};$scope.topNavMenu=getTopNavLinks();$scope.searchSource=savedSearch.searchSource;$scope.indexPattern=resolveIndexPatternLoading();$scope.searchSource.setField("index",$scope.indexPattern).setField("highlightAll",true).setField("version",true);$scope.searchSource.setPreferredSearchStrategyId("default");var timeRangeSearchSource=savedSearch.searchSource.create();if((0,_courier.isDefaultTypeIndexPattern)($scope.indexPattern)){timeRangeSearchSource.setField("filter",function(){return _timefilter.timefilter.createFilter($scope.indexPattern)})}$scope.searchSource.setParent(timeRangeSearchSource);var pageTitleSuffix=savedSearch.id&&savedSearch.title?": ".concat(savedSearch.title):"";_doc_title.docTitle.change("Discover".concat(pageTitleSuffix));var discoverBreadcrumbsTitle=_i18n.i18n.translate("kbn.discover.discoverBreadcrumbTitle",{defaultMessage:"Discover"});if(savedSearch.id&&savedSearch.title){_chrome["default"].breadcrumbs.set([{text:discoverBreadcrumbsTitle,href:"#/discover"},{text:savedSearch.title}])}else{_chrome["default"].breadcrumbs.set([{text:discoverBreadcrumbsTitle}])}var stateMonitor;var $state=$scope.state=new AppState(getStateDefaults());$scope.filters=queryFilter.getFilters();$scope.screenTitle=savedSearch.title;$scope.onFiltersUpdated=function(filters){queryFilter.setFilters(filters)};$scope.applyFilters=function(filters){queryFilter.addFiltersAndChangeTimeFilter(filters);$scope.state.$newFilters=[]};$scope.$watch("state.$newFilters",function(){var filters=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];if(filters.length===1){$scope.applyFilters(filters)}});var getFieldCounts=function(){var _ref4=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(){return regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(!($scope.fetchStatus===fetchStatuses.COMPLETE)){_context3.next=2;break}return _context3.abrupt("return",$scope.fieldCounts);case 2:_context3.next=4;return new Promise(function(resolve){var unwatch=$scope.$watch("fetchStatus",function(newValue){if(newValue===fetchStatuses.COMPLETE){unwatch();resolve($scope.fieldCounts)}})});case 4:return _context3.abrupt("return",_context3.sent);case 5:case"end":return _context3.stop()}}},_callee3)}));return function getFieldCounts(){return _ref4.apply(this,arguments)}}();var getSharingDataFields=function(){var _ref5=_asyncToGenerator(regeneratorRuntime.mark(function _callee4(){var selectedFields,fieldCounts,timeFieldName,hideTimeColumn,fields;return regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:selectedFields=$state.columns;if(!(selectedFields.length===1&&selectedFields[0]==="_source")){_context4.next=6;break}_context4.next=4;return getFieldCounts();case 4:fieldCounts=_context4.sent;return _context4.abrupt("return",{searchFields:null,selectFields:_lodash["default"].keys(fieldCounts).sort()});case 6:timeFieldName=$scope.indexPattern.timeFieldName;hideTimeColumn=config.get("doc_table:hideTimeColumn");fields=timeFieldName&&!hideTimeColumn?[timeFieldName].concat(_toConsumableArray(selectedFields)):selectedFields;return _context4.abrupt("return",{searchFields:fields,selectFields:fields});case 10:case"end":return _context4.stop()}}},_callee4)}));return function getSharingDataFields(){return _ref5.apply(this,arguments)}}();this.getSharingData=_asyncToGenerator(regeneratorRuntime.mark(function _callee5(){var searchSource,_ref7,searchFields,selectFields,body;return regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:searchSource=$scope.searchSource.createCopy();_context5.next=3;return getSharingDataFields();case 3:_ref7=_context5.sent;searchFields=_ref7.searchFields;selectFields=_ref7.selectFields;searchSource.setField("fields",searchFields);searchSource.setField("sort",(0,_get_sort.getSort)($state.sort,$scope.indexPattern));searchSource.setField("highlight",null);searchSource.setField("highlightAll",null);searchSource.setField("aggs",null);searchSource.setField("size",null);_context5.next=14;return searchSource.getSearchRequestBody();case 14:body=_context5.sent;return _context5.abrupt("return",{searchRequest:{index:searchSource.getField("index").title,body:body},fields:selectFields,metaFields:$scope.indexPattern.metaFields,conflictedTypesFields:$scope.indexPattern.fields.filter(function(f){return f.type==="conflict"}).map(function(f){return f.name}),indexPatternId:searchSource.getField("index").id});case 16:case"end":return _context5.stop()}}},_callee5)}));$scope.uiState=$state.makeStateful("uiState");function getStateDefaults(){return{query:$scope.searchSource.getField("query")||{query:"",language:localStorage.get("kibana.userQueryLanguage")||config.get("search:queryLanguage")},sort:_get_sort.getSort.array(savedSearch.sort,$scope.indexPattern,config.get("discover:sort:defaultOrder")),columns:savedSearch.columns.length>0?savedSearch.columns:config.get("defaultColumns").slice(),index:$scope.indexPattern.id,interval:"auto",filters:_lodash["default"].cloneDeep($scope.searchSource.getOwnField("filter"))}}$state.index=$scope.indexPattern.id;$state.sort=_get_sort.getSort.array($state.sort,$scope.indexPattern);$scope.getBucketIntervalToolTipText=function(){return _i18n.i18n.translate("kbn.discover.bucketIntervalTooltip",{defaultMessage:"This interval creates {bucketsDescription} to show in the selected time range, so it has been scaled to {bucketIntervalDescription}",values:{bucketsDescription:$scope.bucketInterval.scale>1?_i18n.i18n.translate("kbn.discover.bucketIntervalTooltip.tooLargeBucketsText",{defaultMessage:"buckets that are too large"}):_i18n.i18n.translate("kbn.discover.bucketIntervalTooltip.tooManyBucketsText",{defaultMessage:"too many buckets"}),bucketIntervalDescription:$scope.bucketInterval.description}})};$scope.$watchCollection("state.columns",function(){$state.save()});$scope.opts={sampleSize:config.get("discover:sampleSize"),timefield:(0,_courier.isDefaultTypeIndexPattern)($scope.indexPattern)&&$scope.indexPattern.timeFieldName,savedSearch:savedSearch,indexPatternList:$route.current.locals.ip.list};var init=_lodash["default"].once(function(){stateMonitor=_state_monitor_factory.stateMonitorFactory.create($state,getStateDefaults());stateMonitor.onChange(function(status){$appStatus.dirty=status.dirty||!savedSearch.id});$scope.$on("$destroy",function(){return stateMonitor.destroy()});$scope.updateDataSource().then(function(){$scope.$listen(_timefilter.timefilter,"autoRefreshFetch",$scope.fetch);$scope.$listen(_timefilter.timefilter,"refreshIntervalUpdate",$scope.updateRefreshInterval);$scope.$listen(_timefilter.timefilter,"timeUpdate",$scope.updateTime);$scope.$listen(_timefilter.timefilter,"fetch",$scope.fetch);$scope.$watchCollection("state.sort",function(sort){if(!sort)return;var currentSort=_lodash["default"].pairs($scope.searchSource.getField("sort")).pop();if(!_angular["default"].equals(sort,currentSort))$scope.fetch()});filterUpdateSubscription=(0,_subscribe_with_scope.subscribeWithScope)($scope,queryFilter.getUpdates$(),{next:function next(){$scope.filters=queryFilter.getFilters();$scope.updateDataSource().then(function(){$state.save()})}});filterFetchSubscription=(0,_subscribe_with_scope.subscribeWithScope)($scope,queryFilter.getUpdates$(),{next:$scope.fetch});$scope.$listen($state,"fetch_with_changes",function(diff){if(diff.indexOf("query")>=0)$scope.fetch()});$scope.$watch("opts.timefield",function(timefield){$scope.enableTimeRangeSelector=!!timefield});$scope.$watch("state.interval",function(){$scope.fetch()});$scope.$watch("vis.aggs",function(){if(!$scope.opts.timefield)return;var buckets=$scope.vis.getAggConfig().bySchemaGroup.buckets;if(buckets&&buckets.length===1){$scope.bucketInterval=buckets[0].buckets.getInterval()}});$scope.$watch("state.query",function(newQuery){var query=(0,_migrate_legacy_query.migrateLegacyQuery)(newQuery);$scope.updateQueryAndFetch({query:query})});$scope.$watchMulti(["rows","fetchStatus"],function updateResultState(){var prev={};var status={LOADING:"loading",READY:"ready",NO_RESULTS:"none"};function pick(rows,oldRows,fetchStatus){if(rows==null&&oldRows==null)return status.LOADING;var rowsEmpty=_lodash["default"].isEmpty(rows);var preparingForFetch=fetchStatus===fetchStatuses.UNINITIALIZED;if(preparingForFetch)return status.LOADING;else if(rowsEmpty&&fetchStatus===fetchStatuses.LOADING)return status.LOADING;else if(!rowsEmpty)return status.READY;else return status.NO_RESULTS}return function(){var current={rows:$scope.rows,fetchStatus:$scope.fetchStatus};$scope.resultState=pick(current.rows,prev.rows,current.fetchStatus,prev.fetchStatus);prev=current}}());if($scope.opts.timefield){setupVisualization();$scope.updateTime()}init.complete=true;$state.replace()})});function saveDataSource(_x4){return _saveDataSource.apply(this,arguments)}function _saveDataSource(){_saveDataSource=_asyncToGenerator(regeneratorRuntime.mark(function _callee6(saveOptions){var id;return regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.next=2;return $scope.updateDataSource();case 2:savedSearch.columns=$scope.state.columns;savedSearch.sort=$scope.state.sort;_context6.prev=4;_context6.next=7;return savedSearch.save(saveOptions);case 7:id=_context6.sent;$scope.$evalAsync(function(){stateMonitor.setInitialState($state.toJSON());if(id){_notify.toastNotifications.addSuccess({title:_i18n.i18n.translate("kbn.discover.notifications.savedSearchTitle",{defaultMessage:"Search '{savedSearchTitle}' was saved",values:{savedSearchTitle:savedSearch.title}}),"data-test-subj":"saveSearchSuccess"});if(savedSearch.id!==$route.current.params.id){kbnUrl.change("/discover/{{id}}",{id:savedSearch.id})}else{$state.setDefaults(getStateDefaults());_doc_title.docTitle.change(savedSearch.lastSavedTitle)}}});return _context6.abrupt("return",{id:id});case 12:_context6.prev=12;_context6.t0=_context6["catch"](4);_notify.toastNotifications.addDanger({title:_i18n.i18n.translate("kbn.discover.notifications.notSavedSearchTitle",{defaultMessage:"Search '{savedSearchTitle}' was not saved.",values:{savedSearchTitle:savedSearch.title}}),text:_context6.t0.message});return _context6.abrupt("return",{error:_context6.t0});case 16:case"end":return _context6.stop()}}},_callee6,null,[[4,12]])}));return _saveDataSource.apply(this,arguments)}$scope.opts.fetch=$scope.fetch=function(){if(!init.complete)return;$scope.fetchError=undefined;$scope.updateTime();$scope.searchSource.cancelQueued();$scope.updateDataSource().then(setupVisualization).then(function(){$state.save();$scope.fetchStatus=fetchStatuses.LOADING;logInspectorRequest();return $scope.searchSource.fetch()}).then(onResults)["catch"](function(error){var fetchError=(0,_get_painless_error.getPainlessError)(error);if(fetchError){$scope.fetchError=fetchError}else{_notify.toastNotifications.addError(error,{title:_i18n.i18n.translate("kbn.discover.errorLoadingData",{defaultMessage:"Error loading data"})})}})};$scope.updateQueryAndFetch=function(_ref8){var query=_ref8.query,dateRange=_ref8.dateRange;_timefilter.timefilter.setTime(dateRange);$state.query=query;$scope.fetch()};function onResults(resp){logInspectorResponse(resp);if($scope.opts.timefield){var tabifiedData=(0,_tabify.tabifyAggResponse)($scope.vis.aggs,resp);$scope.searchSource.rawResponse=resp;Promise.resolve((0,_build_pipeline.buildVislibDimensions)($scope.vis,{timeRange:$scope.timeRange,searchSource:$scope.searchSource})).then(function(resp){return responseHandler(tabifiedData,resp)}).then(function(resp){visualizeHandler.render({as:"visualization",value:{visType:$scope.vis.type.name,visData:resp,visConfig:$scope.vis.params,params:{}}})})}$scope.hits=resp.hits.total;$scope.rows=resp.hits.hits;var counts=$scope.fieldCounts=$scope.fieldCounts||{};$scope.rows.forEach(function(hit){var fields=Object.keys($scope.indexPattern.flattenHit(hit));fields.forEach(function(fieldName){counts[fieldName]=(counts[fieldName]||0)+1})});$scope.fetchStatus=fetchStatuses.COMPLETE}var inspectorRequest;function logInspectorRequest(){inspectorAdapters.requests.reset();var title=_i18n.i18n.translate("kbn.discover.inspectorRequestDataTitle",{defaultMessage:"Data"});var description=_i18n.i18n.translate("kbn.discover.inspectorRequestDescription",{defaultMessage:"This request queries Elasticsearch to fetch the data for the search."});inspectorRequest=inspectorAdapters.requests.start(title,{description:description});inspectorRequest.stats((0,_courier_inspector_utils.getRequestInspectorStats)($scope.searchSource));$scope.searchSource.getSearchRequestBody().then(function(body){inspectorRequest.json(body)})}function logInspectorResponse(resp){inspectorRequest.stats((0,_courier_inspector_utils.getResponseInspectorStats)($scope.searchSource,resp)).ok({json:resp})}$scope.updateTime=function(){$scope.timeRange={from:_datemath["default"].parse(_timefilter.timefilter.getTime().from),to:_datemath["default"].parse(_timefilter.timefilter.getTime().to,{roundUp:true})};$scope.time=_timefilter.timefilter.getTime()};$scope.toMoment=function(datetime){return(0,_moment["default"])(datetime).format(config.get("dateFormat"))};$scope.updateRefreshInterval=function(){$scope.refreshInterval=_timefilter.timefilter.getRefreshInterval()};$scope.onRefreshChange=function(_ref9){var isPaused=_ref9.isPaused,refreshInterval=_ref9.refreshInterval;_timefilter.timefilter.setRefreshInterval({pause:isPaused,value:refreshInterval?refreshInterval:$scope.refreshInterval.value})};$scope.resetQuery=function(){kbnUrl.change("/discover/{{id}}",{id:$route.current.params.id})};$scope.newQuery=function(){kbnUrl.change("/discover")};$scope.updateDataSource=Promise.method(function updateDataSource(){$scope.searchSource.setField("size",$scope.opts.sampleSize).setField("sort",(0,_get_sort.getSort)($state.sort,$scope.indexPattern)).setField("query",!$state.query?null:$state.query).setField("filter",queryFilter.getFilters())});$scope.setSortOrder=function setSortOrder(columnName,direction){$scope.state.sort=[columnName,direction]};$scope.filterQuery=function(field,values,operation){$scope.indexPattern.popularizeField(field,1);filterActions.addFilter(field,values,operation,$scope.indexPattern.id,$scope.state,filterGen)};$scope.addColumn=function addColumn(columnName){$scope.indexPattern.popularizeField(columnName,1);columnActions.addColumn($scope.state.columns,columnName)};$scope.removeColumn=function removeColumn(columnName){$scope.indexPattern.popularizeField(columnName,1);columnActions.removeColumn($scope.state.columns,columnName)};$scope.moveColumn=function moveColumn(columnName,newIndex){columnActions.moveColumn($scope.state.columns,columnName,newIndex)};$scope.scrollToTop=function(){$window.scrollTo(0,0)};$scope.scrollToBottom=function(){$timeout(function(){$element.find("#discoverBottomMarker").focus()},0)};$scope.showAllRows=function(){$scope.minimumVisibleRows=$scope.hits};function setupVisualization(){return _setupVisualization.apply(this,arguments)}function _setupVisualization(){_setupVisualization=_asyncToGenerator(regeneratorRuntime.mark(function _callee8(){var visStateAggs,visState,visSavedObject;return regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:if($scope.opts.timefield){_context8.next=2;break}return _context8.abrupt("return");case 2:visStateAggs=[{type:"count",schema:"metric"},{type:"date_histogram",schema:"segment",params:{field:$scope.opts.timefield,interval:$state.interval,timeRange:_timefilter.timefilter.getTime()}}];if(!$scope.vis){_context8.next=8;break}visState=$scope.vis.getEnabledState();visState.aggs=visStateAggs;$scope.vis.setState(visState);return _context8.abrupt("return");case 8:visSavedObject={indexPattern:$scope.indexPattern.id,visState:{type:"histogram",title:savedSearch.title,params:{addLegend:false,addTimeMarker:true},aggs:visStateAggs}};$scope.vis=new Vis($scope.searchSource.getField("index"),visSavedObject.visState);visSavedObject.vis=$scope.vis;$scope.searchSource.onRequestStart(function(searchSource,searchRequest){return $scope.vis.getAggConfig().onSearchRequestStart(searchSource,searchRequest)});$scope.searchSource.setField("aggs",function(){return $scope.vis.getAggConfig().toDsl()});$timeout(_asyncToGenerator(regeneratorRuntime.mark(function _callee7(){var visEl;return regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:visEl=$element.find("#discoverHistogram")[0];_context7.next=3;return visualizeLoader.embedVisualizationWithSavedObject(visEl,visSavedObject,{autoFetch:false});case 3:visualizeHandler=_context7.sent;case 4:case"end":return _context7.stop()}}},_callee7)})));case 14:case"end":return _context8.stop()}}},_callee8)}));return _setupVisualization.apply(this,arguments)}function resolveIndexPatternLoading(){var _$route$current$local=$route.current.locals.ip,loadedIndexPattern=_$route$current$local.loaded,stateVal=_$route$current$local.stateVal,stateValFound=_$route$current$local.stateValFound;var ownIndexPattern=$scope.searchSource.getOwnField("index");if(ownIndexPattern&&!stateVal){return ownIndexPattern}if(stateVal&&!stateValFound){var warningTitle=_i18n.i18n.translate("kbn.discover.valueIsNotConfiguredIndexPatternIDWarningTitle",{defaultMessage:"{stateVal} is not a configured index pattern ID",values:{stateVal:'"'.concat(stateVal,'"')}});if(ownIndexPattern){_notify.toastNotifications.addWarning({title:warningTitle,text:_i18n.i18n.translate("kbn.discover.showingSavedIndexPatternWarningDescription",{defaultMessage:'Showing the saved index pattern: "{ownIndexPatternTitle}" ({ownIndexPatternId})',values:{ownIndexPatternTitle:ownIndexPattern.title,ownIndexPatternId:ownIndexPattern.id}})});return ownIndexPattern}_notify.toastNotifications.addWarning({title:warningTitle,text:_i18n.i18n.translate("kbn.discover.showingDefaultIndexPatternWarningDescription",{defaultMessage:'Showing the default index pattern: "{loadedIndexPatternTitle}" ({loadedIndexPatternId})',values:{loadedIndexPatternTitle:loadedIndexPattern.title,loadedIndexPatternId:loadedIndexPattern.id}})})}return loadedIndexPattern}$scope.isUnsupportedIndexPattern=!(0,_courier.isDefaultTypeIndexPattern)($route.current.locals.ip.loaded)&&!(0,_courier.hasSearchStategyForIndexPattern)($route.current.locals.ip.loaded);if($scope.isUnsupportedIndexPattern){$scope.unsupportedIndexPatternType=$route.current.locals.ip.loaded.type;return}init()}},6186:function(module,exports,__webpack_require__){"use strict";var _jquery=_interopRequireDefault(__webpack_require__(25));var _lodash=_interopRequireDefault(__webpack_require__(1));var _modules=__webpack_require__(12);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var SCROLLER_HEIGHT=20;_modules.uiModules.get("kibana").directive("fixedScroll",function(debounce){return{restrict:"A",link:function link($scope,$el){var $window=(0,_jquery["default"])(window);var $scroller=(0,_jquery["default"])('<div class="fixed-scroll-scroller">').height(SCROLLER_HEIGHT);var unlisten=_lodash["default"].noop;function listen(){if(unlisten!==_lodash["default"].noop){throw new Error("fixedScroll listeners were not cleaned up properly before re-listening!")}var blockTo;function bind($from,$to){function handler(){if(blockTo===$to)return blockTo=null;$to.scrollLeft((blockTo=$from).scrollLeft())}$from.on("scroll",handler);return function(){$from.off("scroll",handler)}}unlisten=_lodash["default"].flow(bind($el,$scroller),bind($scroller,$el),function(){unlisten=_lodash["default"].noop})}function cleanUp(){unlisten();$scroller.detach();$el.css("padding-bottom",0)}function setup(){cleanUp();var containerWidth=$el.width();var contentWidth=$el.prop("scrollWidth");var containerHorizOverflow=contentWidth-containerWidth;var elTop=$el.offset().top-$window.scrollTop();var elBottom=elTop+$el.height();var windowVertOverflow=elBottom-$window.height();var requireScroller=containerHorizOverflow>0&&windowVertOverflow>0;if(!requireScroller)return;$el.css("padding-bottom",SCROLLER_HEIGHT);$scroller.width(containerWidth).html((0,_jquery["default"])("<div>").css({width:contentWidth,height:SCROLLER_HEIGHT})).insertAfter($el);listen()}var width;var scrollWidth;function checkWidth(){var newScrollWidth=$el.prop("scrollWidth");var newWidth=$el.width();if(scrollWidth!==newScrollWidth||width!==newWidth){$scope.$apply(setup);scrollWidth=newScrollWidth;width=newWidth}}var debouncedCheckWidth=debounce(checkWidth,100,{invokeApply:false});$scope.$watch(debouncedCheckWidth);$scope.$on("$destroy",function(){cleanUp();debouncedCheckWidth.cancel();$scroller=$window=null})}}})},6187:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<discover-app class="app-container">\n  \x3c!-- Local nav. --\x3e\n  <kbn-top-nav name="discover" config="topNavMenu">\n    \x3c!-- Transcluded elements. --\x3e\n    <div data-transclude-slots>\n      \x3c!-- Breadcrumbs. --\x3e\n      <div data-transclude-slot="topLeftCorner" class="kuiLocalBreadcrumbs">\n        <h1 id="kui_local_breadcrumb" class="kuiLocalBreadcrumb" ng-if="opts.savedSearch.id">\n          <span class="kuiLocalBreadcrumb__emphasis">\n            <button\n              class="kuiLink"\n              type="button"\n              id="reload_saved_search"\n              aria-label="{{::\'kbn.discover.reloadSavedSearchAriaLabel\' | i18n: {defaultMessage: \'Reload saved search\'} }}"\n              tooltip="{{::\'kbn.discover.reloadSavedSearchTooltip\' | i18n: {defaultMessage: \'Reload saved search\'} }}"\n              tooltip-placement="right"\n              tooltip-append-to-body="1"\n              ng-click="resetQuery()"\n            >\n              <span class="kuiIcon fa-undo small"></span>\n              {{::\'kbn.discover.reloadSavedSearchButton\' | i18n: {defaultMessage: \'Reload\'} }}\n            </button>\n          </span>\n        </h1>\n        <div class="kuiLocalBreadcrumb">\n          <span data-test-subj="discoverQueryHits" class="kuiLocalBreadcrumb__emphasis">{{(hits || 0) | number:0}}</span>\n          <span\n            i18n-id="kbn.discover.hitsPluralTitle"\n            i18n-default-message="{hits, plural, one {hit} other {hits}}"\n            i18n-values="{ hits }"\n          ></span>\n        </div>\n      </div>\n\n      \x3c!-- Search. --\x3e\n      <div data-transclude-slot="bottomRow" class="fullWidth">\n        <search-bar\n          query="state.query"\n          screen-title="screenTitle"\n          on-query-submit="updateQueryAndFetch"\n          app-name="\'discover\'"\n          index-patterns="[indexPattern]"\n          filters="filters"\n          on-filters-updated="onFiltersUpdated"\n          show-date-picker="enableTimeRangeSelector"\n          date-range-from="time.from"\n          date-range-to="time.to"\n          is-refresh-paused="refreshInterval.pause"\n          refresh-interval="refreshInterval.value"\n          on-refresh-change="onRefreshChange"\n        ></search-bar>\n      </div>\n    </div>\n  </kbn-top-nav>\n\n  <main class="container-fluid">\n    <div class="row">\n      <div class="col-md-2 sidebar-container collapsible-sidebar" id="discover-sidebar">\n        <disc-field-chooser\n          class="dscFieldChooser"\n          columns="state.columns"\n          hits="rows"\n          field-counts="fieldCounts"\n          index-pattern="searchSource.getField(\'index\')"\n          index-pattern-list="opts.indexPatternList"\n          state="state"\n          on-add-field="addColumn"\n          on-add-filter="filterQuery"\n          on-remove-field="removeColumn"\n        >\n        </disc-field-chooser>\n      </div>\n\n      <div class="dscWrapper col-md-10">\n        <div class="dscWrapper__content">\n          <discover-unsupported-index-pattern\n            ng-if="isUnsupportedIndexPattern"\n            unsupported-type="unsupportedIndexPatternType"\n          ></discover-unsupported-index-pattern>\n\n          <discover-no-results\n            ng-show="resultState === \'none\'"\n            shard-failures="failures"\n            time-field-name="opts.timefield"\n            query-language="state.query.language"\n            get-doc-link="getDocLink"\n          ></discover-no-results>\n\n          \x3c!-- loading --\x3e\n          <div ng-show="resultState === \'loading\'">\n            <discover-fetch-error\n              ng-show="fetchError"\n              fetch-error="fetchError"\n            ></discover-fetch-error>\n\n            <div\n              ng-hide="fetchError"\n              class="dscOverlay"\n            >\n              <h2\n                i18n-id="kbn.discover.searchingTitle"\n                i18n-default-message="Searching"\n                class="euiTitle euiTitle--small"\n              ></h2>\n              <div class="euiSpacer euiSpacer--m"></div>\n              <div class="euiLoadingSpinner euiLoadingSpinner--large" data-test-subj="loadingSpinner"></div>\n            </div>\n          </div>\n\n          \x3c!-- result --\x3e\n          <div class="dscResults" ng-show="resultState === \'ready\'">\n            <button\n              class="kuiButton kuiButton--basic kuiButton--iconText dscSkipButton"\n              ng-click="showAllRows(); scrollToBottom()"\n            >\n              <span class="kuiButton__inner">\n                <span aria-hidden="true" class="kuiButton__icon kuiIcon fa-chevron-down"></span>\n                <span\n                  i18n-id="kbn.discover.skipToBottomButtonLabel"\n                  i18n-default-message="Skip to bottom"\n                ></span>\n              </span>\n            </button>\n\n            <section\n              aria-label="{{::\'kbn.discover.histogramOfFoundDocumentsAriaLabel\' | i18n: {defaultMessage: \'Histogram of found documents\'} }}"\n              class="dscTimechart"\n              ng-if="opts.timefield"\n            >\n              <header class="dscTimechart__header">\n                <div class="small">\n                  <label\n                    for="dscResultsIntervalSelector"\n                    tooltip="{{::\'kbn.discover.howToChangeTheTimeTooltip\' | i18n: {defaultMessage: \'To change the time, click the clock icon in the navigation bar\'} }}"\n                  >\n                    {{toMoment(timeRange.from)}} - {{toMoment(timeRange.to)}}\n                  </label>\n\n                  &mdash;\n\n                  <span class="form-inline">\n                    <select\n                      id="dscResultsIntervalSelector"\n                      class="dscResults__interval form-control"\n                      ng-model="state.interval"\n                      ng-options="interval.val as interval.display for interval in intervalOptions | filter: intervalEnabled"\n                      ng-blur="toggleInterval()"\n                      data-test-subj="discoverIntervalSelect"\n                    >\n                    </select>\n                    <span ng-if="bucketInterval.scaled">\n                      <icon-tip\n                        content="getBucketIntervalToolTipText()"\n                        position="\'top\'"\n                      ></icon-tip>\n                      <span\n                        i18n-id="kbn.discover.scaledToDescription"\n                        i18n-default-message="Scaled to {bucketIntervalDescription}"\n                        i18n-values="{\n                          bucketIntervalDescription: bucketInterval.description\n                        }"\n                      ></span>\n                    </span>\n                  </span>\n                </div>\n\n              </header>\n\n              <div id="discoverHistogram"\n                ng-show="vis && rows.length !== 0"\n                style="display: flex; height: 200px"\n              >\n              </div>\n            </section>\n\n            <section\n              class="dscTable"\n              fixed-scroll\n              aria-label="{{::\'kbn.discover.documentsAriaLabel\' | i18n: {defaultMessage: \'Documents\'} }}"\n            >\n              <doc-table\n                hits="rows"\n                index-pattern="indexPattern"\n                sorting="state.sort"\n                columns="state.columns"\n                infinite-scroll="true"\n                filter="filterQuery"\n                filters="state.filters"\n                data-shared-item\n                data-title="{{opts.savedSearch.lastSavedTitle}}"\n                data-description="{{opts.savedSearch.description}}"\n                minimum-visible-rows="minimumVisibleRows"\n                render-complete\n                on-add-column="addColumn"\n                on-change-sort-order="setSortOrder"\n                on-move-column="moveColumn"\n                on-remove-column="removeColumn"\n              ></doc-table>\n\n              <a tabindex="0" id="discoverBottomMarker"></a>\n\n              <div\n                ng-if="rows.length == opts.sampleSize"\n                class="dscTable__footer"\n              >\n                <span\n                  i18n-id="kbn.discover.howToSeeOtherMatchingDocumentsDescription"\n                  i18n-default-message="These are the first {sampleSize} documents matching\n                  your search, refine your search to see others. "\n                  i18n-values="{\n                    sampleSize: opts.sampleSize,\n                  }"\n                ></span>\n                <a\n                  kbn-accessible-click\n                  ng-click="scrollToTop()"\n                  i18n-id="kbn.discover.backToTopLinkText"\n                  i18n-default-message="Back to top."\n                ></a>\n              </div>\n            </section>\n          </div>\n        </div>\n      </div>\n    </div>\n  </main>\n</discover-app>\n'},6188:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getFilterGenerator=getFilterGenerator;var _lodash=_interopRequireDefault(__webpack_require__(1));var _esQuery=__webpack_require__(51);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getFilterGenerator(queryFilter){var filterGen={};filterGen.generate=function(field,values,operation,index){values=Array.isArray(values)?values:[values];var fieldName=_lodash["default"].isObject(field)?field.name:field;var filters=_lodash["default"].flatten([queryFilter.getAppFilters()]);var newFilters=[];var negate=operation==="-";_lodash["default"].each(values,function(value){var filter;var existing=_lodash["default"].find(filters,function(filter){if(!filter)return;if(fieldName==="_exists_"&&filter.exists){return filter.exists.field===value}if(_lodash["default"].has(filter,"query.match")){return filter.query.match[fieldName]&&filter.query.match[fieldName].query===value}if(filter.script){return filter.meta.field===fieldName&&filter.script.script.params.value===value}});if(existing){existing.meta.disabled=false;if(existing.meta.negate!==negate){existing.meta.negate=!existing.meta.negate}newFilters.push(existing);return}switch(fieldName){case"_exists_":filter={meta:{negate:negate,index:index},exists:{field:value}};break;default:if(field.scripted){filter={meta:{negate:negate,index:index,field:fieldName},script:(0,_esQuery.getPhraseScript)(field,value)}}else{filter={meta:{negate:negate,index:index},query:{match:{}}};filter.query.match[fieldName]={query:value,type:"phrase"}}break}newFilters.push(filter)});return newFilters};filterGen.add=function(field,values,operation,index){var newFilters=this.generate(field,values,operation,index);return queryFilter.addFilters(newFilters)};return filterGen}},6189:function(module,exports,__webpack_require__){"use strict";__webpack_require__(6190)},6190:function(module,exports,__webpack_require__){"use strict";__webpack_require__(181);var _react=_interopRequireWildcard(__webpack_require__(0));var _modules=__webpack_require__(12);var _i18n=__webpack_require__(28);var _react2=__webpack_require__(10);var _new_platform=__webpack_require__(32);var _eui=__webpack_require__(2);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}var DiscoverFetchError=function DiscoverFetchError(_ref){var fetchError=_ref.fetchError;if(!fetchError){return null}var body;if(fetchError.lang==="painless"){var managementUrl=_new_platform.npStart.core.chrome.navLinks.get("kibana:management").url;var url="".concat(managementUrl,"/kibana/index_patterns");body=_react["default"].createElement("p",null,_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.discover.fetchError.howToAddressErrorDescription",defaultMessage:"You can address this error by editing the {fetchErrorScript} field in {managementLink}, under the {scriptedFields} tab.",values:{fetchErrorScript:"'".concat(fetchError.script,"'"),scriptedFields:_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.discover.fetchError.scriptedFieldsText",defaultMessage:"Scripted fields"}),managementLink:_react["default"].createElement("a",{href:url},_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.discover.fetchError.managmentLinkText",defaultMessage:"Management > Index Patterns"}))}}))}return _react["default"].createElement(_react.Fragment,null,_react["default"].createElement(_eui.EuiSpacer,{size:"xl"}),_react["default"].createElement(_eui.EuiFlexGroup,{justifyContent:"center","data-test-subj":"discoverFetchError"},_react["default"].createElement(_eui.EuiFlexItem,{grow:false,className:"discoverFetchError"},_react["default"].createElement(_eui.EuiCallOut,{title:fetchError.message,color:"danger",iconType:"cross"},body,_react["default"].createElement(_eui.EuiCodeBlock,null,fetchError.error)))),_react["default"].createElement(_eui.EuiSpacer,{size:"xl"}))};var app=_modules.uiModules.get("apps/discover",["react"]);app.directive("discoverFetchError",function(reactDirective){return reactDirective((0,_i18n.wrapInI18nContext)(DiscoverFetchError))})},6191:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getPainlessError=getPainlessError;var _i18n=__webpack_require__(5);var _lodash=__webpack_require__(1);function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function getPainlessError(error){var rootCause=(0,_lodash.get)(error,"resp.error.root_cause");if(!rootCause){return}var _rootCause=_slicedToArray(rootCause,1),_rootCause$=_rootCause[0],lang=_rootCause$.lang,script=_rootCause$.script;if(lang!=="painless"){return}return{lang:lang,script:script,message:_i18n.i18n.translate("kbn.discover.painlessError.painlessScriptedFieldErrorMessage",{defaultMessage:"Error with Painless scripted field '{script}'.",values:{script:script}}),error:error.message}}},6192:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.showShareContextMenu=showShareContextMenu;var _react=_interopRequireDefault(__webpack_require__(0));var _reactDom=_interopRequireDefault(__webpack_require__(27));var _eui=__webpack_require__(2);var _i18n=__webpack_require__(28);var _share_context_menu=__webpack_require__(6193);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var isOpen=false;var container=document.createElement("div");var onClose=function onClose(){_reactDom["default"].unmountComponentAtNode(container);isOpen=false};function showShareContextMenu(_ref){var anchorElement=_ref.anchorElement,allowEmbed=_ref.allowEmbed,allowShortUrl=_ref.allowShortUrl,getUnhashableStates=_ref.getUnhashableStates,objectId=_ref.objectId,objectType=_ref.objectType,shareContextMenuExtensions=_ref.shareContextMenuExtensions,sharingData=_ref.sharingData,isDirty=_ref.isDirty;if(isOpen){onClose();return}isOpen=true;document.body.appendChild(container);var element=_react["default"].createElement(_i18n.I18nContext,null,_react["default"].createElement(_eui.EuiWrappingPopover,{id:"sharePopover",button:anchorElement,isOpen:true,closePopover:onClose,panelPaddingSize:"none",withTitle:true,anchorPosition:"downLeft"},_react["default"].createElement(_share_context_menu.ShareContextMenu,{allowEmbed:allowEmbed,allowShortUrl:allowShortUrl,getUnhashableStates:getUnhashableStates,objectId:objectId,objectType:objectType,shareContextMenuExtensions:shareContextMenuExtensions,sharingData:sharingData,isDirty:isDirty,onClose:onClose})));_reactDom["default"].render(element,container)}},6193:function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.ShareContextMenu=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(2);var _react2=__webpack_require__(10);var _url_panel_content=__webpack_require__(6194);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ShareContextMenuUI=function(_Component){_inherits(ShareContextMenuUI,_Component);function ShareContextMenuUI(){var _getPrototypeOf2;var _this;_classCallCheck(this,ShareContextMenuUI);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(ShareContextMenuUI)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"getPanels",function(){var panels=[];var menuItems=[];var intl=_this.props.intl;var permalinkPanel={id:panels.length+1,title:intl.formatMessage({id:"common.ui.share.contextMenu.permalinkPanelTitle",defaultMessage:"Permalink"}),content:_react["default"].createElement(_url_panel_content.UrlPanelContent,{allowShortUrl:_this.props.allowShortUrl,objectId:_this.props.objectId,objectType:_this.props.objectType,getUnhashableStates:_this.props.getUnhashableStates})};menuItems.push({name:intl.formatMessage({id:"common.ui.share.contextMenu.permalinksLabel",defaultMessage:"Permalinks"}),icon:"link",panel:permalinkPanel.id,sortOrder:0});panels.push(permalinkPanel);if(_this.props.allowEmbed){var embedPanel={id:panels.length+1,title:intl.formatMessage({id:"common.ui.share.contextMenu.embedCodePanelTitle",defaultMessage:"Embed Code"}),content:_react["default"].createElement(_url_panel_content.UrlPanelContent,{allowShortUrl:_this.props.allowShortUrl,isEmbedded:true,objectId:_this.props.objectId,objectType:_this.props.objectType,getUnhashableStates:_this.props.getUnhashableStates})};panels.push(embedPanel);menuItems.push({name:intl.formatMessage({id:"common.ui.share.contextMenu.embedCodeLabel",defaultMessage:"Embed code"}),icon:"console",panel:embedPanel.id,sortOrder:0})}if(_this.props.shareContextMenuExtensions){var _this$props=_this.props,objectType=_this$props.objectType,objectId=_this$props.objectId,getUnhashableStates=_this$props.getUnhashableStates,sharingData=_this$props.sharingData,isDirty=_this$props.isDirty,onClose=_this$props.onClose;_this.props.shareContextMenuExtensions.forEach(function(provider){provider.getShareActions({objectType:objectType,objectId:objectId,getUnhashableStates:getUnhashableStates,sharingData:sharingData,isDirty:isDirty,onClose:onClose}).forEach(function(_ref){var shareMenuItem=_ref.shareMenuItem,panel=_ref.panel;var panelId=panels.length+1;panels.push(_objectSpread({},panel,{id:panelId}));menuItems.push(_objectSpread({},shareMenuItem,{panel:panelId}))})})}if(menuItems.length>1){var topLevelMenuPanel={id:panels.length+1,title:intl.formatMessage({id:"common.ui.share.contextMenuTitle",defaultMessage:"Share this {objectType}"},{objectType:_this.props.objectType}),items:menuItems.sort(function(a,b){var aSortOrder=a.sortOrder||0;var bSortOrder=b.sortOrder||0;if(aSortOrder>bSortOrder){return 1}if(aSortOrder<bSortOrder){return-1}if(a.name.toLowerCase().localeCompare(b.name.toLowerCase())>0){return 1}return-1}).map(function(menuItem){menuItem["data-test-subj"]="sharePanel-".concat(menuItem.name.replace(" ",""));delete menuItem.sortOrder;return menuItem})};panels.push(topLevelMenuPanel)}var lastPanelIndex=panels.length-1;var initialPanelId=panels[lastPanelIndex].id;return{panels:panels,initialPanelId:initialPanelId}});return _this}_createClass(ShareContextMenuUI,[{key:"render",value:function render(){var _this$getPanels=this.getPanels(),panels=_this$getPanels.panels,initialPanelId=_this$getPanels.initialPanelId;return _react["default"].createElement(_eui.EuiContextMenu,{initialPanelId:initialPanelId,panels:panels,"data-test-subj":"shareContextMenu"})}}]);return ShareContextMenuUI}(_react.Component);var ShareContextMenu=(0,_react2.injectI18n)(ShareContextMenuUI);exports.ShareContextMenu=ShareContextMenu},6194:function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.UrlPanelContent=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(2);var _url=__webpack_require__(79);var _react2=__webpack_require__(10);var _state_hashing=__webpack_require__(432);var _url_shortener=__webpack_require__(6195);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var FixedEuiIconTip=_eui.EuiIconTip;var ExportUrlAsType;(function(ExportUrlAsType){ExportUrlAsType["EXPORT_URL_AS_SAVED_OBJECT"]="savedObject";ExportUrlAsType["EXPORT_URL_AS_SNAPSHOT"]="snapshot"})(ExportUrlAsType||(ExportUrlAsType={}));var UrlPanelContentUI=function(_Component){_inherits(UrlPanelContentUI,_Component);function UrlPanelContentUI(props){var _this;_classCallCheck(this,UrlPanelContentUI);_this=_possibleConstructorReturn(this,_getPrototypeOf(UrlPanelContentUI).call(this,props));_defineProperty(_assertThisInitialized(_this),"mounted",void 0);_defineProperty(_assertThisInitialized(_this),"shortUrlCache",void 0);_defineProperty(_assertThisInitialized(_this),"isNotSaved",function(){return _this.props.objectId===undefined||_this.props.objectId===""});_defineProperty(_assertThisInitialized(_this),"resetUrl",function(){if(_this.mounted){_this.shortUrlCache=undefined;_this.setState({useShortUrl:false},_this.setUrl)}});_defineProperty(_assertThisInitialized(_this),"getSavedObjectUrl",function(){if(_this.isNotSaved()){return}var url=window.location.href;var unhashedUrl=(0,_state_hashing.unhashUrl)(url,_this.props.getUnhashableStates());var parsedUrl=(0,_url.parse)(unhashedUrl);if(!parsedUrl||!parsedUrl.hash){return}var parsedAppUrl=(0,_url.parse)(parsedUrl.hash.slice(1),true);return(0,_url.format)({protocol:parsedUrl.protocol,auth:parsedUrl.auth,host:parsedUrl.host,pathname:parsedUrl.pathname,hash:(0,_url.format)({pathname:parsedAppUrl.pathname,query:{_g:parsedAppUrl.query._g}})})});_defineProperty(_assertThisInitialized(_this),"getSnapshotUrl",function(){var url=window.location.href;return(0,_state_hashing.unhashUrl)(url,_this.props.getUnhashableStates())});_defineProperty(_assertThisInitialized(_this),"makeUrlEmbeddable",function(url){var embedQueryParam="?embed=true";var urlHasQueryString=url.indexOf("?")!==-1;if(urlHasQueryString){return url.replace("?","".concat(embedQueryParam,"&"))}return"".concat(url).concat(embedQueryParam)});_defineProperty(_assertThisInitialized(_this),"makeIframeTag",function(url){if(!url){return}var embeddableUrl=_this.makeUrlEmbeddable(url);return'<iframe src="'.concat(embeddableUrl,'" height="600" width="800"></iframe>')});_defineProperty(_assertThisInitialized(_this),"setUrl",function(){var url;if(_this.state.exportUrlAs===ExportUrlAsType.EXPORT_URL_AS_SAVED_OBJECT){url=_this.getSavedObjectUrl()}else if(_this.state.useShortUrl){url=_this.shortUrlCache}else{url=_this.getSnapshotUrl()}if(_this.props.isEmbedded){url=_this.makeIframeTag(url)}_this.setState({url:url})});_defineProperty(_assertThisInitialized(_this),"handleExportUrlAs",function(optionId){_this.setState({exportUrlAs:optionId},_this.setUrl)});_defineProperty(_assertThisInitialized(_this),"handleShortUrlChange",function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(evt){var isChecked,shortUrl;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:isChecked=evt.target.checked;if(!(!isChecked||_this.shortUrlCache!==undefined)){_context.next=4;break}_this.setState({useShortUrl:isChecked},_this.setUrl);return _context.abrupt("return");case 4:_this.setState({isCreatingShortUrl:true,shortUrlErrorMsg:undefined});_context.prev=5;_context.next=8;return(0,_url_shortener.shortenUrl)(_this.getSnapshotUrl());case 8:shortUrl=_context.sent;if(_this.mounted){_this.shortUrlCache=shortUrl;_this.setState({isCreatingShortUrl:false,useShortUrl:isChecked},_this.setUrl)}_context.next=15;break;case 12:_context.prev=12;_context.t0=_context["catch"](5);if(_this.mounted){_this.shortUrlCache=undefined;_this.setState({useShortUrl:false,isCreatingShortUrl:false,shortUrlErrorMsg:_this.props.intl.formatMessage({id:"common.ui.share.urlPanel.unableCreateShortUrlErrorMessage",defaultMessage:"Unable to create short URL. Error: {errorMessage}"},{errorMessage:_context.t0.message})},_this.setUrl)}case 15:case"end":return _context.stop()}}},_callee,null,[[5,12]])}));return function(_x){return _ref.apply(this,arguments)}}());_defineProperty(_assertThisInitialized(_this),"renderExportUrlAsOptions",function(){return[_defineProperty({id:ExportUrlAsType.EXPORT_URL_AS_SNAPSHOT,label:_this.renderWithIconTip(_react["default"].createElement(_react2.FormattedMessage,{id:"common.ui.share.urlPanel.snapshotLabel",defaultMessage:"Snapshot"}),_react["default"].createElement(_react2.FormattedMessage,{id:"common.ui.share.urlPanel.snapshotDescription",defaultMessage:"Snapshot URLs encode the current state of the {objectType} in the URL itself. Edits to the saved {objectType} won't be visible via this URL.",values:{objectType:_this.props.objectType}}))},"data-test-subj","exportAsSnapshot"),_defineProperty({id:ExportUrlAsType.EXPORT_URL_AS_SAVED_OBJECT,disabled:_this.isNotSaved(),label:_this.renderWithIconTip(_react["default"].createElement(_react2.FormattedMessage,{id:"common.ui.share.urlPanel.savedObjectLabel",defaultMessage:"Saved object"}),_react["default"].createElement(_react2.FormattedMessage,{id:"common.ui.share.urlPanel.savedObjectDescription",defaultMessage:"You can share this URL with people to let them load the most recent saved version of this {objectType}.",values:{objectType:_this.props.objectType}}))},"data-test-subj","exportAsSavedObject")]});_defineProperty(_assertThisInitialized(_this),"renderWithIconTip",function(child,tipContent){return _react["default"].createElement(_eui.EuiFlexGroup,{gutterSize:"none",responsive:false},_react["default"].createElement(_eui.EuiFlexItem,null,child),_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(FixedEuiIconTip,{content:tipContent,position:"bottom"})))});_defineProperty(_assertThisInitialized(_this),"renderExportAsRadioGroup",function(){var generateLinkAsHelp=_this.isNotSaved()?_react["default"].createElement(_react2.FormattedMessage,{id:"common.ui.share.urlPanel.canNotShareAsSavedObjectHelpText",defaultMessage:"Can't share as saved object until the {objectType} has been saved.",values:{objectType:_this.props.objectType}}):undefined;return _react["default"].createElement(_eui.EuiFormRow,{label:_react["default"].createElement(_react2.FormattedMessage,{id:"common.ui.share.urlPanel.generateLinkAsLabel",defaultMessage:"Generate the link as"}),helpText:generateLinkAsHelp},_react["default"].createElement(_eui.EuiRadioGroup,{options:_this.renderExportUrlAsOptions(),idSelected:_this.state.exportUrlAs,onChange:_this.handleExportUrlAs}))});_defineProperty(_assertThisInitialized(_this),"renderShortUrlSwitch",function(){if(_this.state.exportUrlAs===ExportUrlAsType.EXPORT_URL_AS_SAVED_OBJECT||!_this.props.allowShortUrl){return}var shortUrlLabel=_react["default"].createElement(_react2.FormattedMessage,{id:"common.ui.share.urlPanel.shortUrlLabel",defaultMessage:"Short URL"});var switchLabel=_this.state.isCreatingShortUrl?_react["default"].createElement("span",null,_react["default"].createElement(_eui.EuiLoadingSpinner,{size:"s"})," ",shortUrlLabel):shortUrlLabel;var switchComponent=_react["default"].createElement(_eui.EuiSwitch,{label:switchLabel,checked:_this.state.useShortUrl,onChange:_this.handleShortUrlChange,"data-test-subj":"useShortUrl"});var tipContent=_react["default"].createElement(_react2.FormattedMessage,{id:"common.ui.share.urlPanel.shortUrlHelpText",defaultMessage:"We recommend sharing shortened snapshot URLs for maximum compatibility. Internet Explorer has URL length restrictions, and some wiki and markup parsers don't do well with the full-length version of the snapshot URL, but the short URL should work great."});return _react["default"].createElement(_eui.EuiFormRow,{helpText:_this.state.shortUrlErrorMsg,"data-test-subj":"createShortUrl"},_this.renderWithIconTip(switchComponent,tipContent))});_this.shortUrlCache=undefined;_this.state={exportUrlAs:ExportUrlAsType.EXPORT_URL_AS_SNAPSHOT,useShortUrl:false,isCreatingShortUrl:false,url:""};return _this}_createClass(UrlPanelContentUI,[{key:"componentWillUnmount",value:function componentWillUnmount(){window.removeEventListener("hashchange",this.resetUrl);this.mounted=false}},{key:"componentDidMount",value:function componentDidMount(){this.mounted=true;this.setUrl();window.addEventListener("hashchange",this.resetUrl,false)}},{key:"render",value:function render(){var _this2=this;return _react["default"].createElement(_eui.EuiForm,{className:"kbnShareContextMenu__finalPanel","data-test-subj":"shareUrlForm"},this.renderExportAsRadioGroup(),this.renderShortUrlSwitch(),_react["default"].createElement(_eui.EuiCopy,{textToCopy:this.state.url||"",anchorClassName:"kbnShareContextMenu__copyAnchor"},function(copy){return _react["default"].createElement(_eui.EuiButton,{fill:true,onClick:copy,disabled:_this2.state.isCreatingShortUrl||_this2.state.url==="","data-share-url":_this2.state.url,"data-test-subj":"copyShareUrlButton",size:"s"},_this2.props.isEmbedded?_react["default"].createElement(_react2.FormattedMessage,{id:"common.ui.share.urlPanel.copyIframeCodeButtonLabel",defaultMessage:"Copy iFrame code"}):_react["default"].createElement(_react2.FormattedMessage,{id:"common.ui.share.urlPanel.copyLinkButtonLabel",defaultMessage:"Copy link"}))}))}}]);return UrlPanelContentUI}(_react.Component);var UrlPanelContent=(0,_react2.injectI18n)(UrlPanelContentUI);exports.UrlPanelContent=UrlPanelContent},6195:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.shortenUrl=shortenUrl;var _kfetch=__webpack_require__(109);var _url=_interopRequireDefault(__webpack_require__(79));var _chrome=_interopRequireDefault(__webpack_require__(19));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function shortenUrl(_x){return _shortenUrl.apply(this,arguments)}function _shortenUrl(){_shortenUrl=_asyncToGenerator(regeneratorRuntime.mark(function _callee(absoluteUrl){var basePath,parsedUrl,path,hash,relativeUrl,body,resp;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:basePath=_chrome["default"].getBasePath();parsedUrl=_url["default"].parse(absoluteUrl);if(!(!parsedUrl||!parsedUrl.path)){_context.next=4;break}return _context.abrupt("return");case 4:path=parsedUrl.path.replace(basePath,"");hash=parsedUrl.hash?parsedUrl.hash:"";relativeUrl=path+hash;body=JSON.stringify({url:relativeUrl});_context.next=10;return(0,_kfetch.kfetch)({method:"POST",pathname:"/api/shorten_url",body:body});case 10:resp=_context.sent;return _context.abrupt("return",_url["default"].format({protocol:parsedUrl.protocol,host:parsedUrl.host,pathname:"".concat(basePath,"/goto/").concat(resp.urlId)}));case 12:case"end":return _context.stop()}}},_callee)}));return _shortenUrl.apply(this,arguments)}},6196:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ShareContextMenuExtensionsRegistryProvider=void 0;var _registry=__webpack_require__(107);var ShareContextMenuExtensionsRegistryProvider=(0,_registry.uiRegistry)({name:"shareContextMenuExtensions",index:["id"]});exports.ShareContextMenuExtensionsRegistryProvider=ShareContextMenuExtensionsRegistryProvider},6197:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.showOpenSearchPanel=showOpenSearchPanel;var _react=_interopRequireDefault(__webpack_require__(0));var _reactDom=_interopRequireDefault(__webpack_require__(27));var _open_search_panel=__webpack_require__(6198);var _i18n=__webpack_require__(28);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var isOpen=false;function showOpenSearchPanel(_ref){var makeUrl=_ref.makeUrl;if(isOpen){return}isOpen=true;var container=document.createElement("div");var onClose=function onClose(){_reactDom["default"].unmountComponentAtNode(container);document.body.removeChild(container);isOpen=false};document.body.appendChild(container);var element=_react["default"].createElement(_i18n.I18nContext,null,_react["default"].createElement(_open_search_panel.OpenSearchPanel,{onClose:onClose,makeUrl:makeUrl}));_reactDom["default"].render(element,container)}},6198:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.OpenSearchPanel=OpenSearchPanel;var _react=_interopRequireDefault(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(17));var _saved_object_finder=__webpack_require__(553);var _risonNode=_interopRequireDefault(__webpack_require__(251));var _i18n=__webpack_require__(5);var _react2=__webpack_require__(10);var _eui=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var SEARCH_OBJECT_TYPE="search";function OpenSearchPanel(props){return _react["default"].createElement(_eui.EuiFlyout,{ownFocus:true,onClose:props.onClose,"data-test-subj":"loadSearchForm"},_react["default"].createElement(_eui.EuiFlyoutHeader,{hasBorder:true},_react["default"].createElement(_eui.EuiTitle,{size:"m"},_react["default"].createElement("h2",null,_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.discover.topNav.openSearchPanel.openSearchTitle",defaultMessage:"Open search"})))),_react["default"].createElement(_eui.EuiFlyoutBody,null,_react["default"].createElement(_saved_object_finder.SavedObjectFinder,{noItemsMessage:_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.discover.topNav.openSearchPanel.noSearchesFoundDescription",defaultMessage:"No matching searches found."}),savedObjectMetaData:[{type:SEARCH_OBJECT_TYPE,getIconForSavedObject:function getIconForSavedObject(){return"search"},name:_i18n.i18n.translate("kbn.discover.savedSearch.savedObjectName",{defaultMessage:"Saved search"})}],onChoose:function onChoose(id){window.location.assign(props.makeUrl(id));props.onClose()}})),_react["default"].createElement(_eui.EuiFlyoutFooter,null,_react["default"].createElement(_eui.EuiFlexGroup,{justifyContent:"flexEnd"},_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiButton,{fill:true,onClick:props.onClose,href:"#/management/kibana/objects?_a=".concat(_risonNode["default"].encode({tab:SEARCH_OBJECT_TYPE}))},_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.discover.topNav.openSearchPanel.manageSearchesButtonLabel",defaultMessage:"Manage searches"}))))))}OpenSearchPanel.propTypes={onClose:_propTypes["default"].func.isRequired,makeUrl:_propTypes["default"].func.isRequired}},6199:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"tabifyAggResponse",{enumerable:true,get:function get(){return _tabify.tabifyAggResponse}});var _tabify=__webpack_require__(796)},6200:function(module,exports,__webpack_require__){"use strict";__webpack_require__(6201);var _i18n=__webpack_require__(5);__webpack_require__(2016);__webpack_require__(1016);var _routes=_interopRequireDefault(__webpack_require__(34));__webpack_require__(670);var _visualize_listing=_interopRequireDefault(__webpack_require__(6206));var _visualize_listing2=__webpack_require__(6207);var _visualize_constants=__webpack_require__(421);var _feature_catalogue=__webpack_require__(128);var _breadcrumbs=__webpack_require__(2048);var _setup=__webpack_require__(84);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_setup.data.search.loadLegacyDirectives();_setup.data.filter.loadLegacyDirectives();_routes["default"].defaults(/visualize/,{requireDefaultIndex:true,requireUICapability:"visualize.show",badge:function badge(uiCapabilities){if(uiCapabilities.visualize.save){return undefined}return{text:_i18n.i18n.translate("kbn.visualize.badge.readOnly.text",{defaultMessage:"Read only"}),tooltip:_i18n.i18n.translate("kbn.visualize.badge.readOnly.tooltip",{defaultMessage:"Unable to save visualizations"}),iconType:"glasses"}}}).when(_visualize_constants.VisualizeConstants.LANDING_PAGE_PATH,{template:_visualize_listing["default"],k7Breadcrumbs:_breadcrumbs.getLandingBreadcrumbs,controller:_visualize_listing2.VisualizeListingController,controllerAs:"listingController",resolve:{createNewVis:function createNewVis(){return false}}}).when(_visualize_constants.VisualizeConstants.WIZARD_STEP_1_PAGE_PATH,{template:_visualize_listing["default"],k7Breadcrumbs:_breadcrumbs.getWizardStep1Breadcrumbs,controller:_visualize_listing2.VisualizeListingController,controllerAs:"listingController",resolve:{createNewVis:function createNewVis(){return true}}});_feature_catalogue.FeatureCatalogueRegistryProvider.register(function(){return{id:"visualize",title:"Visualize",description:_i18n.i18n.translate("kbn.visualize.visualizeDescription",{defaultMessage:"Create visualizations and aggregate data stores in your Elasticsearch indices."}),icon:"visualizeApp",path:"/app/kibana#".concat(_visualize_constants.VisualizeConstants.LANDING_PAGE_PATH),showOnHomePage:true,category:_feature_catalogue.FeatureCatalogueCategory.DATA}})},6201:function(module,exports,__webpack_require__){"use strict";var _lodash=_interopRequireDefault(__webpack_require__(1));var _i18n=__webpack_require__(5);__webpack_require__(1016);__webpack_require__(6202);__webpack_require__(2009);__webpack_require__(2047);__webpack_require__(2044);var _capabilities=__webpack_require__(141);var _chrome=_interopRequireDefault(__webpack_require__(19));var _react=_interopRequireDefault(__webpack_require__(0));var _angular=_interopRequireDefault(__webpack_require__(31));var _react2=__webpack_require__(10);var _notify=__webpack_require__(24);var _vis_types=__webpack_require__(85);var _doc_title=__webpack_require__(423);var _query_filter=__webpack_require__(188);var _state_monitor_factory=__webpack_require__(1028);var _lib=__webpack_require__(6203);var _routes=_interopRequireDefault(__webpack_require__(34));var _modules=__webpack_require__(12);var _editor=_interopRequireDefault(__webpack_require__(6205));var _dashboard_constants=__webpack_require__(261);var _visualize_constants=__webpack_require__(421);var _kibana_parsed_url=__webpack_require__(1095);var _absolute_to_parsed_url=__webpack_require__(1094);var _migrate_legacy_query=__webpack_require__(669);var _subscribe_with_scope=__webpack_require__(511);var _persisted_log=__webpack_require__(262);var _timefilter=__webpack_require__(74);var _loader=__webpack_require__(1024);var _share=__webpack_require__(1030);var _state_hashing=__webpack_require__(432);var _show_saved_object_save_modal=__webpack_require__(1031);var _saved_object_save_modal=__webpack_require__(1032);var _breadcrumbs=__webpack_require__(2048);var _new_platform=__webpack_require__(32);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}_routes["default"].when(_visualize_constants.VisualizeConstants.CREATE_PATH,{template:_editor["default"],k7Breadcrumbs:_breadcrumbs.getCreateBreadcrumbs,resolve:{savedVis:function savedVis(savedVisualizations,redirectWhenMissing,$route,Private){var visTypes=Private(_vis_types.VisTypesRegistryProvider);var visType=_lodash["default"].find(visTypes,{name:$route.current.params.type});var shouldHaveIndex=visType.requiresSearch&&visType.options.showIndexSelection;var hasIndex=$route.current.params.indexPattern||$route.current.params.savedSearchId;if(shouldHaveIndex&&!hasIndex){throw new Error(_i18n.i18n.translate("kbn.visualize.createVisualization.noIndexPatternOrSavedSearchIdErrorMessage",{defaultMessage:"You must provide either an indexPattern or a savedSearchId"}))}return savedVisualizations.get($route.current.params)["catch"](redirectWhenMissing({"*":"/visualize"}))}}}).when("".concat(_visualize_constants.VisualizeConstants.EDIT_PATH,"/:id"),{template:_editor["default"],k7Breadcrumbs:_breadcrumbs.getEditBreadcrumbs,resolve:{savedVis:function savedVis(savedVisualizations,redirectWhenMissing,$route){return savedVisualizations.get($route.current.params.id).then(function(savedVis){_persisted_log.recentlyAccessed.add(savedVis.getFullPath(),savedVis.title,savedVis.id);return savedVis})["catch"](redirectWhenMissing({visualization:"/visualize",search:"/management/kibana/objects/savedVisualizations/"+$route.current.params.id,"index-pattern":"/management/kibana/objects/savedVisualizations/"+$route.current.params.id,"index-pattern-field":"/management/kibana/objects/savedVisualizations/"+$route.current.params.id}))}}});_modules.uiModules.get("app/visualize",["kibana/notify","kibana/url"]).directive("visualizeApp",function(){return{restrict:"E",controllerAs:"visualizeApp",controller:VisEditor}});function VisEditor($scope,$element,$route,AppState,$window,$injector,indexPatterns,kbnUrl,redirectWhenMissing,Private,Promise,config,kbnBaseUrl,localStorage,courier){var queryFilter=Private(_query_filter.FilterBarQueryFilterProvider);var getUnhashableStates=Private(_state_hashing.getUnhashableStatesProvider);var shareContextMenuExtensions=Private(_share.ShareContextMenuExtensionsRegistryProvider);var savedVis=$route.current.locals.savedVis;var vis=savedVis.vis,searchSource=savedVis.searchSource;$scope.vis=vis;var $appStatus=this.appStatus={dirty:!savedVis.id};$scope.topNavMenu=[].concat(_toConsumableArray(_capabilities.capabilities.get().visualize.save?[{key:_i18n.i18n.translate("kbn.topNavMenu.saveVisualizationButtonLabel",{defaultMessage:"save"}),description:_i18n.i18n.translate("kbn.visualize.topNavMenu.saveVisualizationButtonAriaLabel",{defaultMessage:"Save Visualization"}),testId:"visualizeSaveButton",disableButton:function disableButton(){return Boolean(vis.dirty)},tooltip:function tooltip(){if(vis.dirty){return _i18n.i18n.translate("kbn.visualize.topNavMenu.saveVisualizationDisabledButtonTooltip",{defaultMessage:"Apply or Discard your changes before saving"})}},run:function(){var _run=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var onSave,confirmButtonLabel,saveModal;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:onSave=function onSave(_ref){var newTitle=_ref.newTitle,newCopyOnSave=_ref.newCopyOnSave,isTitleDuplicateConfirmed=_ref.isTitleDuplicateConfirmed,onTitleDuplicate=_ref.onTitleDuplicate;var currentTitle=savedVis.title;savedVis.title=newTitle;savedVis.copyOnSave=newCopyOnSave;var saveOptions={confirmOverwrite:false,isTitleDuplicateConfirmed:isTitleDuplicateConfirmed,onTitleDuplicate:onTitleDuplicate};return doSave(saveOptions).then(function(_ref2){var id=_ref2.id,error=_ref2.error;if(!id||error){savedVis.title=currentTitle}return{id:id,error:error}})};confirmButtonLabel=$scope.isAddToDashMode()?_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.visualize.saveDialog.saveAndAddToDashboardButtonLabel",defaultMessage:"Save and add to dashboard"}):null;saveModal=_react["default"].createElement(_saved_object_save_modal.SavedObjectSaveModal,{onSave:onSave,onClose:function onClose(){},title:savedVis.title,showCopyOnSave:savedVis.id?true:false,objectType:"visualization",confirmButtonLabel:confirmButtonLabel});(0,_show_saved_object_save_modal.showSaveModal)(saveModal);case 4:case"end":return _context.stop()}}},_callee)}));function run(){return _run.apply(this,arguments)}return run}()}]:[]),[{key:_i18n.i18n.translate("kbn.topNavMenu.shareVisualizationButtonLabel",{defaultMessage:"share"}),description:_i18n.i18n.translate("kbn.visualize.topNavMenu.shareVisualizationButtonAriaLabel",{defaultMessage:"Share Visualization"}),testId:"shareTopNavButton",run:function run(menuItem,navController,anchorElement){var hasUnappliedChanges=vis.dirty;var hasUnsavedChanges=$appStatus.dirty;(0,_share.showShareContextMenu)({anchorElement:anchorElement,allowEmbed:true,allowShortUrl:_capabilities.capabilities.get().visualize.createShortUrl,getUnhashableStates:getUnhashableStates,objectId:savedVis.id,objectType:"visualization",shareContextMenuExtensions:shareContextMenuExtensions,sharingData:{title:savedVis.title},isDirty:hasUnappliedChanges||hasUnsavedChanges})}},{key:_i18n.i18n.translate("kbn.topNavMenu.openInspectorButtonLabel",{defaultMessage:"inspect"}),description:_i18n.i18n.translate("kbn.visualize.topNavMenu.openInspectorButtonAriaLabel",{defaultMessage:"Open Inspector for visualization"}),testId:"openInspectorButton",disableButton:function disableButton(){return!vis.hasInspector||!vis.hasInspector()},run:function run(){var inspectorSession=vis.openInspector();var removeWatch=$scope.$on("$destroy",function(){return inspectorSession.close()});inspectorSession.onClose["finally"](removeWatch)},tooltip:function tooltip(){if(!vis.hasInspector||!vis.hasInspector()){return _i18n.i18n.translate("kbn.visualize.topNavMenu.openInspectorDisabledButtonTooltip",{defaultMessage:"This visualization doesn't support any inspectors."})}}},{key:_i18n.i18n.translate("kbn.topNavMenu.refreshButtonLabel",{defaultMessage:"refresh"}),description:_i18n.i18n.translate("kbn.visualize.topNavMenu.refreshButtonAriaLabel",{defaultMessage:"Refresh"}),run:function run(){vis.forceReload()},testId:"visualizeRefreshButton"}]);var stateMonitor;if(savedVis.id){_doc_title.docTitle.change(savedVis.title)}var savedVisState=vis.getState();var stateDefaults={uiState:savedVis.uiStateJSON?JSON.parse(savedVis.uiStateJSON):{},linked:!!savedVis.savedSearchId,query:searchSource.getOwnField("query")||{query:"",language:localStorage.get("kibana.userQueryLanguage")||config.get("search:queryLanguage")},filters:searchSource.getOwnField("filter")||[],vis:savedVisState};var $state=function initState(){var appState=new AppState(stateDefaults);(0,_lib.migrateAppState)(appState);if(!_angular["default"].equals(appState.vis,savedVisState)){Promise["try"](function(){vis.setState(appState.vis)})["catch"](redirectWhenMissing({"index-pattern-field":"/visualize"}))}return appState}();$scope.filters=queryFilter.getFilters();$scope.onFiltersUpdated=function(filters){queryFilter.setFilters(filters)};$scope.onCancelApplyFilters=function(){$scope.state.$newFilters=[]};$scope.onApplyFilters=function(filters){queryFilter.addFiltersAndChangeTimeFilter(filters);$scope.state.$newFilters=[]};$scope.$watch("state.$newFilters",function(){var filters=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];if(filters.length===1){$scope.onApplyFilters(filters)}});function init(){$scope.savedVis=savedVis;if(vis.indexPattern){$scope.indexPattern=vis.indexPattern}else{indexPatterns.getDefault().then(function(defaultIndexPattern){$scope.indexPattern=defaultIndexPattern})}$scope.searchSource=searchSource;$scope.state=$state;$scope.refreshInterval=_timefilter.timefilter.getRefreshInterval();$scope.uiState=$state.makeStateful("uiState");$scope.appStatus=$appStatus;var addToDashMode=$route.current.params[_dashboard_constants.DashboardConstants.ADD_VISUALIZATION_TO_DASHBOARD_MODE_PARAM];kbnUrl.removeParam(_dashboard_constants.DashboardConstants.ADD_VISUALIZATION_TO_DASHBOARD_MODE_PARAM);$scope.isAddToDashMode=function(){return addToDashMode};$scope.showQueryBar=function(){return vis.type.requiresSearch&&vis.type.options.showQueryBar};$scope.timeRange=_timefilter.timefilter.getTime();$scope.opts=_lodash["default"].pick($scope,"savedVis","isAddToDashMode");stateMonitor=_state_monitor_factory.stateMonitorFactory.create($state,stateDefaults);stateMonitor.ignoreProps(["vis.listeners"]).onChange(function(status){$appStatus.dirty=status.dirty||!savedVis.id});$scope.$watch("state.query",function(newQuery){var query=(0,_migrate_legacy_query.migrateLegacyQuery)(newQuery);$scope.updateQueryAndFetch({query:query})});$state.replace();$scope.$watchMulti(['searchSource.getField("index")',"vis.type.options.showTimePicker",$scope.showQueryBar],function(_ref3){var _ref4=_slicedToArray(_ref3,3),index=_ref4[0],requiresTimePicker=_ref4[1],showQueryBar=_ref4[2];var showTimeFilter=Boolean((!index||index.timeFieldName)&&requiresTimePicker);if(showQueryBar){_timefilter.timefilter.disableTimeRangeSelector();_timefilter.timefilter.disableAutoRefreshSelector();$scope.enableQueryBarTimeRangeSelector=true;$scope.showAutoRefreshOnlyInQueryBar=!showTimeFilter}else if(showTimeFilter){_timefilter.timefilter.enableTimeRangeSelector();_timefilter.timefilter.enableAutoRefreshSelector();$scope.enableQueryBarTimeRangeSelector=false;$scope.showAutoRefreshOnlyInQueryBar=false}else{_timefilter.timefilter.disableTimeRangeSelector();_timefilter.timefilter.enableAutoRefreshSelector();$scope.enableQueryBarTimeRangeSelector=false;$scope.showAutoRefreshOnlyInQueryBar=false}});var updateTimeRange=function updateTimeRange(){$scope.timeRange=_timefilter.timefilter.getTime();if($scope._handler){$scope._handler.update({timeRange:$scope.timeRange})}};var updateRefreshInterval=function updateRefreshInterval(){$scope.refreshInterval=_timefilter.timefilter.getRefreshInterval()};$scope.$listenAndDigestAsync(_timefilter.timefilter,"timeUpdate",updateTimeRange);$scope.$listenAndDigestAsync(_timefilter.timefilter,"refreshIntervalUpdate",updateRefreshInterval);var filterUpdateSubscription=(0,_subscribe_with_scope.subscribeWithScope)($scope,queryFilter.getUpdates$(),{next:function next(){$scope.filters=queryFilter.getFilters();$scope.fetch()}});$scope.fetch=function(){$state.save();savedVis.searchSource.setField("query",$state.query);savedVis.searchSource.setField("filter",$state.filters);$scope.globalFilters=queryFilter.getGlobalFilters();$scope.vis.forceReload()};$scope.$on("$destroy",function(){if($scope._handler){$scope._handler.destroy()}savedVis.destroy();stateMonitor.destroy();filterUpdateSubscription.unsubscribe()});if(!$scope.chrome.getVisible()){(0,_loader.getVisualizeLoader)().then(function(loader){$scope._handler=loader.embedVisualizationWithSavedObject($element.find(".visualize")[0],savedVis,{timeRange:$scope.timeRange,uiState:$scope.uiState,appState:$state,listenOnChange:false})})}}$scope.updateQueryAndFetch=function(_ref5){var query=_ref5.query,dateRange=_ref5.dateRange;_timefilter.timefilter.setTime(dateRange);$state.query=query;$scope.fetch()};$scope.onRefreshChange=function(_ref6){var isPaused=_ref6.isPaused,refreshInterval=_ref6.refreshInterval;_timefilter.timefilter.setRefreshInterval({pause:isPaused,value:refreshInterval?refreshInterval:$scope.refreshInterval.value})};function doSave(saveOptions){$state.vis.title=savedVis.title;$state.vis.type=savedVis.type||$state.vis.type;savedVis.visState=$state.vis;savedVis.uiStateJSON=_angular["default"].toJson($scope.uiState.getChanges());return savedVis.save(saveOptions).then(function(id){$scope.$evalAsync(function(){stateMonitor.setInitialState($state.toJSON());if(id){_notify.toastNotifications.addSuccess({title:_i18n.i18n.translate("kbn.visualize.topNavMenu.saveVisualization.successNotificationText",{defaultMessage:"Saved '{visTitle}'",values:{visTitle:savedVis.title}}),"data-test-subj":"saveVisualizationSuccess"});if($scope.isAddToDashMode()){var savedVisualizationParsedUrl=new _kibana_parsed_url.KibanaParsedUrl({basePath:_chrome["default"].getBasePath(),appId:kbnBaseUrl.slice("/app/".length),appPath:kbnUrl.eval("".concat(_visualize_constants.VisualizeConstants.EDIT_PATH,"/{{id}}"),{id:savedVis.id})});$window.history.pushState({},"",savedVisualizationParsedUrl.getRootRelativePath());_chrome["default"].trackSubUrlForApp("kibana:visualize",savedVisualizationParsedUrl);var lastDashboardAbsoluteUrl=_new_platform.npStart.core.chrome.navLinks.get("kibana:dashboard").url;var dashboardParsedUrl=(0,_absolute_to_parsed_url.absoluteToParsedUrl)(lastDashboardAbsoluteUrl,_chrome["default"].getBasePath());dashboardParsedUrl.addQueryParameter(_dashboard_constants.DashboardConstants.NEW_VISUALIZATION_ID_PARAM,savedVis.id);kbnUrl.change(dashboardParsedUrl.appPath)}else if(savedVis.id===$route.current.params.id){_doc_title.docTitle.change(savedVis.lastSavedTitle);_chrome["default"].breadcrumbs.set($injector.invoke(_breadcrumbs.getEditBreadcrumbs))}else{kbnUrl.change("".concat(_visualize_constants.VisualizeConstants.EDIT_PATH,"/{{id}}"),{id:savedVis.id})}}});return{id:id}},function(error){console.error(error);_notify.toastNotifications.addDanger({title:_i18n.i18n.translate("kbn.visualize.topNavMenu.saveVisualization.failureNotificationText",{defaultMessage:"Error on saving '{visTitle}'",values:{visTitle:savedVis.title}}),text:error.message,"data-test-subj":"saveVisualizationError"});return{error:error}})}$scope.unlink=function(){if(!$state.linked)return;$state.linked=false;var searchSourceParent=searchSource.getParent();var searchSourceGrandparent=searchSourceParent.getParent();delete savedVis.savedSearchId;delete vis.savedSearchId;searchSourceParent.setField("filter",_lodash["default"].union(searchSource.getOwnField("filter"),searchSourceParent.getOwnField("filter")));$state.query=searchSourceParent.getField("query");$state.filters=searchSourceParent.getField("filter");searchSource.setField("index",searchSourceParent.getField("index"));searchSource.setParent(searchSourceGrandparent);_notify.toastNotifications.addSuccess(_i18n.i18n.translate("kbn.visualize.linkedToSearch.unlinkSuccessNotificationText",{defaultMessage:"Unlinked from saved search '{searchTitle}'",values:{searchTitle:savedVis.savedSearch.title}}));$scope.fetch()};$scope.getAdditionalMessage=function(){return'<i class="kuiIcon fa-flask"></i>'+_i18n.i18n.translate("kbn.visualize.experimentalVisInfoText",{defaultMessage:"This visualization is marked as experimental."})+" "+vis.type.feedbackMessage};init()}},6202:function(module,exports,__webpack_require__){"use strict";var _lodash=__webpack_require__(1);var _modules=__webpack_require__(12);__webpack_require__(509);var _vis_editor_types=__webpack_require__(2012);_modules.uiModules.get("kibana/directive",["ngSanitize"]).directive("visualizationEditor",function(Private,$timeout,getAppState){var editorTypes=Private(_vis_editor_types.VisEditorTypesRegistryProvider);return{restrict:"E",scope:{savedObj:"=",uiState:"=?",timeRange:"=",filters:"="},link:function link($scope,element){var editorType=$scope.savedObj.vis.type.editor;var Editor=typeof editorType==="function"?editorType:editorTypes.find(function(editor){return editor.key===editorType});var editor=new Editor(element[0],$scope.savedObj);$scope.renderFunction=function(){editor.render({uiState:$scope.uiState,timeRange:$scope.timeRange,filters:$scope.filters,appState:getAppState()})};$scope.$on("render",function(event){event.preventDefault();$timeout(function(){$scope.renderFunction()})});$scope.$on("$destroy",function(){editor.destroy()});$scope.$watchGroup(["timeRange","filters"],(0,_lodash.debounce)(function(){$scope.renderFunction()},100))}}})},6203:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"migrateAppState",{enumerable:true,get:function get(){return _migrate_app_state.migrateAppState}});var _migrate_app_state=__webpack_require__(6204)},6204:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.migrateAppState=migrateAppState;var _lodash=__webpack_require__(1);function migrateAppState(appState){if(appState.vis.type!=="table"){return}var visAggs=(0,_lodash.get)(appState,"vis.aggs",[]);var splitCount=0;var migratedAggs=visAggs.map(function(agg){if(agg.schema!=="split"){return agg}splitCount++;if(splitCount===1){return agg}agg.schema="bucket";agg.params=(0,_lodash.omit)(agg.params,["row"]);return agg});if(splitCount<=1){return}appState.vis.aggs=migratedAggs;appState.save()}},6205:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<visualize-app class="app-container visEditor visEditor--{{ vis.type.name }}">\n  \x3c!-- Local nav. --\x3e\n  <kbn-top-nav name="visualize" config="topNavMenu">\n    \x3c!-- Transcluded elements. --\x3e\n    <div data-transclude-slots>\n      \x3c!-- Search. --\x3e\n      <div\n        data-transclude-slot="bottomRow"\n        ng-show="chrome.getVisible()"\n        class="fullWidth"\n      >\n        <div ng-if="vis.type.requiresSearch && state.linked" class="kuiVerticalRhythmSmall">\n          {{ ::\'kbn.visualize.linkedToSearchInfoText\' | i18n: { defaultMessage: \'Linked to Saved Search\' } }}\n          <a\n            href="#/discover/{{savedVis.savedSearch.id}}"\n          >\n            {{ savedVis.savedSearch.title }}\n          </a>\n          &nbsp;\n          <a\n            data-test-subj="unlinkSavedSearch"\n            href=""\n            ng-dblclick="unlink()"\n            tooltip="{{ ::\'kbn.visualize.linkedToSearch.unlinkButtonTooltip\' | i18n: { defaultMessage: \'Double click to unlink from Saved Search\' } }}"\n          >\n            <span aria-hidden="true" class="kuiIcon fa-chain-broken"></span>\n          </a>\n        </div>\n\n        <div class="fullWidth kuiVerticalRhythmSmall">\n          <search-bar\n            query="state.query"\n            screen-title="state.vis.title"\n            on-query-submit="updateQueryAndFetch"\n            app-name="\'visualize\'"\n            index-patterns="[indexPattern]"\n            filters="filters"\n            on-filters-updated="onFiltersUpdated"\n            show-query-bar="showQueryBar()"\n            show-filter-bar="vis.type.options.showFilterBar && chrome.getVisible()"\n            show-date-picker="enableQueryBarTimeRangeSelector"\n            date-range-from="timeRange.from"\n            date-range-to="timeRange.to"\n            is-refresh-paused="refreshInterval.pause"\n            refresh-interval="refreshInterval.value"\n            show-auto-refresh-only="showAutoRefreshOnlyInQueryBar"\n            on-refresh-change="onRefreshChange"\n          ></search-bar>\n        </div>\n      </div>\n    </div>\n  </kbn-top-nav>\n\n  \x3c!--\n    The top nav is hidden in embed mode but the filter bar must still be present so\n    we show the filter bar on its own here if the chrome is not visible.\n  --\x3e\n  <filter-bar\n    ng-if="vis.type.options.showFilterBar && !chrome.getVisible()"\n    class-name="\'globalFilterGroup__filterBar\'"\n    filters="filters"\n    on-filters-updated="onFiltersUpdated"\n    index-patterns="[indexPattern]"\n  ></filter-bar>\n\n  <apply-filters-popover\n    key="applyFiltersKey"\n    filters="state.$newFilters"\n    on-cancel="onCancelApplyFilters"\n    on-submit="onApplyFilters"\n  ></apply-filters-popover>\n\n  <div\n    class="euiCallOut euiCallOut--primary euiCallOut--small hide-for-sharing"\n    ng-if="vis.type.shouldMarkAsExperimentalInUI()"\n    data-test-subj="experimentalVisInfo"\n  >\n    <div class="euiText">\n      <p ng-bind-html="getAdditionalMessage()"></p>\n    </div>\n  </div>\n\n  <div class="visualize" ng-if="!chrome.getVisible()"/>\n\n  <visualization-editor\n    ng-if="chrome.getVisible()"\n    saved-obj="savedVis"\n    ui-state="uiState"\n    time-range="timeRange"\n    filters="globalFilters"\n    class="visEditor__content"\n  />\n\n</visualize-app>\n'},6206:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<div class="kuiViewContent kuiViewContent--constrainedWidth kuiViewContentItem"\n     data-test-subj="visualizeLandingPage"\n>\n  <visualize-listing-table\n    find-items="listingController.fetchItems"\n    delete-items="listingController.deleteSelectedItems"\n    create-item="listingController.createNewVis"\n    get-view-url="listingController.getViewUrl"\n    edit-item="listingController.editItem"\n    listing-limit="listingController.listingLimit"\n  ></visualize-listing-table>\n\n  <new-vis-modal\n    is-open="listingController.showNewVisModal"\n    on-close="listingController.closeNewVisModal"\n    vis-types-registry="listingController.visTypeRegistry"\n    vis-type-aliases="listingController.visTypeAliases"\n  ></new-vis-modal>\n\n</div>\n'},6207:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VisualizeListingController=VisualizeListingController;var _saved_object_registry=__webpack_require__(252);__webpack_require__(1e3);var _modules=__webpack_require__(12);var _timefilter=__webpack_require__(74);var _vis_types=__webpack_require__(85);var _chrome=_interopRequireDefault(__webpack_require__(19));var _i18n=__webpack_require__(28);var _notify=__webpack_require__(24);var _visualize_listing_table=__webpack_require__(6208);var _new_vis_modal=__webpack_require__(1034);var _visualize_constants=__webpack_require__(421);var _visualizations=__webpack_require__(785);var _i18n2=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var app=_modules.uiModules.get("app/visualize",["ngRoute","react"]);app.directive("visualizeListingTable",function(reactDirective){return reactDirective((0,_i18n.wrapInI18nContext)(_visualize_listing_table.VisualizeListingTable))});app.directive("newVisModal",function(reactDirective){return reactDirective((0,_i18n.wrapInI18nContext)(_new_vis_modal.NewVisModal))});function VisualizeListingController($injector,createNewVis){var _this=this;var Private=$injector.get("Private");var config=$injector.get("config");var kbnUrl=$injector.get("kbnUrl");this.visTypeRegistry=Private(_vis_types.VisTypesRegistryProvider);this.visTypeAliases=_visualizations.visualizations.types.visTypeAliasRegistry.get();_timefilter.timefilter.disableAutoRefreshSelector();_timefilter.timefilter.disableTimeRangeSelector();this.showNewVisModal=false;this.createNewVis=function(){_this.showNewVisModal=true};this.editItem=function(_ref){var id=_ref.id;kbnUrl.change((0,_visualize_constants.createVisualizeEditUrl)(id))};this.getViewUrl=function(_ref2){var id=_ref2.id;return _chrome["default"].addBasePath("#".concat((0,_visualize_constants.createVisualizeEditUrl)(id)))};this.closeNewVisModal=function(){_this.showNewVisModal=false;if(createNewVis){kbnUrl.changePath(_visualize_constants.VisualizeConstants.LANDING_PAGE_PATH)}};if(createNewVis){this.createNewVis()}var services=Private(_saved_object_registry.SavedObjectRegistryProvider).byLoaderPropertiesName;var visualizationService=services.visualizations;this.fetchItems=function(filter){var isLabsEnabled=config.get("visualize:enableLabs");return visualizationService.find(filter,config.get("savedObjects:listingLimit")).then(function(result){_this.totalItems=result.total;return{total:result.total,hits:result.hits.filter(function(result){return isLabsEnabled||result.type.stage!=="experimental"})}})};this.deleteSelectedItems=function deleteSelectedItems(selectedIds){return visualizationService["delete"](selectedIds)["catch"](function(error){_notify.toastNotifications.addError(error,{title:_i18n2.i18n.translate("kbn.visualize.visualizeListingDeleteErrorTitle",{defaultMessage:"Error deleting visualization"})})})};_chrome["default"].breadcrumbs.set([{text:_i18n2.i18n.translate("kbn.visualize.visualizeListingBreadcrumbsTitle",{defaultMessage:"Visualize"})}]);this.listingLimit=config.get("savedObjects:listingLimit")}},6208:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VisualizeListingTable=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(17));var _react2=__webpack_require__(10);var _i18n=__webpack_require__(5);var _capabilities=__webpack_require__(141);var _table_list_view=__webpack_require__(2049);var _eui=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var VisualizeListingTableUi=function(_Component){_inherits(VisualizeListingTableUi,_Component);function VisualizeListingTableUi(props){_classCallCheck(this,VisualizeListingTableUi);return _possibleConstructorReturn(this,_getPrototypeOf(VisualizeListingTableUi).call(this,props))}_createClass(VisualizeListingTableUi,[{key:"render",value:function render(){var intl=this.props.intl;return _react["default"].createElement(_table_list_view.TableListView,{createItem:this.props.createItem,findItems:this.props.findItems,deleteItems:_capabilities.capabilities.get().visualize["delete"]?this.props.deleteItems:null,editItem:_capabilities.capabilities.get().visualize.save?this.props.editItem:null,tableColumns:this.getTableColumns(),listingLimit:this.props.listingLimit,initialFilter:"",noItemsFragment:this.getNoItemsMessage(),entityName:intl.formatMessage({id:"kbn.visualize.listing.table.entityName",defaultMessage:"visualization"}),entityNamePlural:intl.formatMessage({id:"kbn.visualize.listing.table.entityNamePlural",defaultMessage:"visualizations"}),tableListTitle:intl.formatMessage({id:"kbn.visualize.listing.table.listTitle",defaultMessage:"Visualizations"})})}},{key:"getTableColumns",value:function getTableColumns(){var _this=this;var intl=this.props.intl;var tableColumns=[{field:"title",name:intl.formatMessage({id:"kbn.visualize.listing.table.titleColumnName",defaultMessage:"Title"}),sortable:true,render:function render(field,record){return _react["default"].createElement(_eui.EuiLink,{href:_this.props.getViewUrl(record),"data-test-subj":"visListingTitleLink-".concat(record.title.split(" ").join("-"))},field)}},{field:"type.title",name:intl.formatMessage({id:"kbn.visualize.listing.table.typeColumnName",defaultMessage:"Type"}),sortable:true,render:function render(field,record){return _react["default"].createElement("span",null,_this.renderItemTypeIcon(record),record.type.title,_this.getExperimentalBadge(record))}}];return tableColumns}},{key:"getNoItemsMessage",value:function getNoItemsMessage(){if(this.props.hideWriteControls){return _react["default"].createElement("div",null,_react["default"].createElement(_eui.EuiEmptyPrompt,{iconType:"visualizeApp",title:_react["default"].createElement("h2",null,_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.visualize.listing.noItemsMessage",defaultMessage:"Looks like you don't have any visualizations."}))}))}return _react["default"].createElement("div",null,_react["default"].createElement(_eui.EuiEmptyPrompt,{iconType:"visualizeApp",title:_react["default"].createElement("h2",null,_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.visualize.listing.createNew.title",defaultMessage:"Create your first visualization"})),body:_react["default"].createElement(_react.Fragment,null,_react["default"].createElement("p",null,_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.visualize.listing.createNew.description",defaultMessage:"You can create different visualizations, based on your data."}))),actions:_react["default"].createElement(_eui.EuiButton,{onClick:this.props.createItem,fill:true,iconType:"plusInCircle","data-test-subj":"createVisualizationPromptButton"},_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.visualize.listing.createNew.createButtonLabel",defaultMessage:"Create new visualization"}))}))}},{key:"renderItemTypeIcon",value:function renderItemTypeIcon(item){var icon;if(item.type.image){icon=_react["default"].createElement("img",{className:"visListingTable__typeImage","aria-hidden":"true",alt:"",src:item.type.image})}else{icon=_react["default"].createElement(_eui.EuiIcon,{className:"visListingTable__typeIcon","aria-hidden":"true",type:item.icon||"empty",size:"m"})}return icon}},{key:"getExperimentalBadge",value:function getExperimentalBadge(item){return item.type.shouldMarkAsExperimentalInUI()&&_react["default"].createElement(_eui.EuiBetaBadge,{className:"visListingTable__experimentalIcon",label:"E",title:_i18n.i18n.translate("kbn.visualize.listing.experimentalTitle",{defaultMessage:"Experimental"}),tooltipContent:_i18n.i18n.translate("kbn.visualize.listing.experimentalTooltip",{defaultMessage:"This visualization might be changed or removed in a future release and is not subject to the support SLA."})})}}]);return VisualizeListingTableUi}(_react.Component);VisualizeListingTableUi.propTypes={deleteItems:_propTypes["default"].func.isRequired,findItems:_propTypes["default"].func.isRequired,createItem:_propTypes["default"].func.isRequired,getViewUrl:_propTypes["default"].func.isRequired,editItem:_propTypes["default"].func.isRequired,listingLimit:_propTypes["default"].number.isRequired};var VisualizeListingTable=(0,_react2.injectI18n)(VisualizeListingTableUi);exports.VisualizeListingTable=VisualizeListingTable},6209:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TableListView=exports.EMPTY_FILTER=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(17));var _react2=__webpack_require__(10);var _i18n=__webpack_require__(5);var _lodash=_interopRequireDefault(__webpack_require__(1));var _notify=__webpack_require__(24);var _eui=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var EMPTY_FILTER="";exports.EMPTY_FILTER=EMPTY_FILTER;var PAGE_SIZE_OPTIONS=[10,20,50];var TableListViewUi=function(_React$Component){_inherits(TableListViewUi,_React$Component);function TableListViewUi(props){var _this;_classCallCheck(this,TableListViewUi);_this=_possibleConstructorReturn(this,_getPrototypeOf(TableListViewUi).call(this,props));_defineProperty(_assertThisInitialized(_this),"debouncedFetch",_lodash["default"].debounce(function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(filter){var response;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return _this.props.findItems(filter);case 2:response=_context.sent;if(_this._isMounted){_context.next=5;break}return _context.abrupt("return");case 5:if(filter===_this.state.filter){_this.setState({hasInitialFetchReturned:true,isFetchingItems:false,items:!filter?_lodash["default"].sortBy(response.hits,"title"):response.hits,totalItems:response.total,showLimitError:response.total>_this.props.listingLimit})}case 6:case"end":return _context.stop()}}},_callee)}));return function(_x){return _ref.apply(this,arguments)}}(),300));_defineProperty(_assertThisInitialized(_this),"fetchItems",function(){_this.setState({isFetchingItems:true},_this.debouncedFetch.bind(null,_this.state.filter))});_defineProperty(_assertThisInitialized(_this),"deleteSelectedItems",_asyncToGenerator(regeneratorRuntime.mark(function _callee2(){return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!_this.state.isDeletingItems){_context2.next=2;break}return _context2.abrupt("return");case 2:_this.setState({isDeletingItems:true});_context2.prev=3;_context2.next=6;return _this.props.deleteItems(_this.state.selectedIds);case 6:_context2.next=11;break;case 8:_context2.prev=8;_context2.t0=_context2["catch"](3);_notify.toastNotifications.addDanger({title:_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.table_list_view.listing.unableToDeleteDangerMessage",defaultMessage:"Unable to delete {entityName}(s)",values:{entityName:_this.props.entityName}}),text:"".concat(_context2.t0)});case 11:_this.fetchItems();_this.setState({isDeletingItems:false,selectedIds:[]});_this.closeDeleteModal();case 14:case"end":return _context2.stop()}}},_callee2,null,[[3,8]])})));_defineProperty(_assertThisInitialized(_this),"closeDeleteModal",function(){_this.setState({showDeleteModal:false})});_defineProperty(_assertThisInitialized(_this),"openDeleteModal",function(){_this.setState({showDeleteModal:true})});_this.state={items:[],totalItems:0,hasInitialFetchReturned:false,isFetchingItems:false,isDeletingItems:false,showDeleteModal:false,showLimitError:false,filter:_this.props.initialFilter,selectedIds:[],page:0,perPage:20};return _this}_createClass(TableListViewUi,[{key:"componentWillMount",value:function componentWillMount(){this._isMounted=true}},{key:"componentWillUnmount",value:function componentWillUnmount(){this._isMounted=false;this.debouncedFetch.cancel()}},{key:"componentDidMount",value:function componentDidMount(){this.fetchItems()}},{key:"setFilter",value:function setFilter(filter){this.setState({filter:filter.queryText},this.fetchItems)}},{key:"hasNoItems",value:function hasNoItems(){if(!this.state.isFetchingItems&&this.state.items.length===0&&!this.state.filter){return true}return false}},{key:"renderConfirmDeleteModal",value:function renderConfirmDeleteModal(){var deleteButton=_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.table_list_view.listing.deleteSelectedItemsConfirmModal.confirmButtonLabel",defaultMessage:"Delete"});if(this.state.isDeletingItems){deleteButton=_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.table_list_view.listing.deleteSelectedItemsConfirmModal.confirmButtonLabelDeleting",defaultMessage:"Deleting"})}return _react["default"].createElement(_eui.EuiOverlayMask,null,_react["default"].createElement(_eui.EuiConfirmModal,{title:_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.table_list_view.listing.deleteSelectedConfirmModal.title",defaultMessage:"Delete {itemCount} selected {entityName}?",values:{itemCount:this.state.selectedIds.length,entityName:this.state.selectedIds.length===1?this.props.entityName:this.props.entityNamePlural}}),buttonColor:"danger",onCancel:this.closeDeleteModal,onConfirm:this.deleteSelectedItems,cancelButtonText:_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.table_list_view.listing.deleteSelectedItemsConfirmModal.cancelButtonLabel",defaultMessage:"Cancel"}),confirmButtonText:deleteButton,defaultFocusedButton:"cancel"},_react["default"].createElement("p",null,_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.table_list_view.listing.deleteConfirmModalDescription",defaultMessage:"You can't recover deleted {entityNamePlural}.",values:{entityNamePlural:this.props.entityNamePlural}}))))}},{key:"renderListingLimitWarning",value:function renderListingLimitWarning(){if(this.state.showLimitError){return _react["default"].createElement(_react["default"].Fragment,null,_react["default"].createElement(_eui.EuiCallOut,{title:_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.table_list_view.listing.listingLimitExceededTitle",defaultMessage:"Listing limit exceeded"}),color:"warning",iconType:"help"},_react["default"].createElement("p",null,_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.table_list_view.listing.listingLimitExceededDescription",defaultMessage:"You have {totalItems} {entityNamePlural}, but your {listingLimitText} setting prevents the table below from displaying more than {listingLimitValue}. You can change this setting under {advancedSettingsLink}.",values:{entityNamePlural:this.props.entityNamePlural,totalItems:this.state.totalItems,listingLimitValue:this.props.listingLimit,listingLimitText:_react["default"].createElement("strong",null,"listingLimit"),advancedSettingsLink:_react["default"].createElement(_eui.EuiLink,{href:"#/management/kibana/settings"},_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.table_list_view.listing.listingLimitExceeded.advancedSettingsLinkText",defaultMessage:"Advanced Settings"}))}}))),_react["default"].createElement(_eui.EuiSpacer,{size:"m"}))}}},{key:"renderNoItemsMessage",value:function renderNoItemsMessage(){if(this.props.noItemsFragment){return this.props.noItemsFragment}else{return _react["default"].createElement(_react2.FormattedMessage,{id:"kbn.table_list_view.listing.noAvailableItemsMessage",defaultMessage:"No {entityNamePlural} available.",values:{entityNamePlural:this.props.entityNamePlural}})}}},{key:"renderToolsLeft",value:function renderToolsLeft(){var _this2=this;var selection=this.state.selectedIds;if(selection.length===0){return}var onClick=function onClick(){_this2.openDeleteModal()};return _react["default"].createElement(_eui.EuiButton,{color:"danger",iconType:"trash",onClick:onClick,"data-test-subj":"deleteSelectedItems"},_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.table_list_view.listing.deleteButtonMessage",defaultMessage:"Delete {itemCount} {entityName}",values:{itemCount:selection.length,entityName:selection.length===1?this.props.entityName:this.props.entityNamePlural}}))}},{key:"renderTable",value:function renderTable(){var _this3=this;var pagination={pageIndex:this.state.page,pageSize:this.state.perPage,totalItemCount:this.state.items.length,pageSizeOptions:PAGE_SIZE_OPTIONS};var selection=this.props.deleteItems?{onSelectionChange:function onSelectionChange(selection){_this3.setState({selectedIds:selection.map(function(item){return item.id})})}}:null;var actions=[{name:_i18n.i18n.translate("kbn.table_list_view.listing.table.editActionName",{defaultMessage:"Edit"}),description:_i18n.i18n.translate("kbn.table_list_view.listing.table.editActionDescription",{defaultMessage:"Edit"}),icon:"pencil",type:"icon",onClick:this.props.editItem}];var search={onChange:this.setFilter.bind(this),toolsLeft:this.renderToolsLeft(),defaultQuery:this.state.filter,box:{incremental:true}};var columns=this.props.tableColumns.slice();if(this.props.editItem){columns.push({name:_i18n.i18n.translate("kbn.table_list_view.listing.table.actionTitle",{defaultMessage:"Actions"}),width:"100px",actions:actions})}var noItemsMessage=_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.table_list_view.listing.noMatchedItemsMessage",defaultMessage:"No {entityNamePlural} matched your search.",values:{entityNamePlural:this.props.entityNamePlural}});return _react["default"].createElement(_eui.EuiInMemoryTable,{itemId:"id",items:this.state.items,columns:columns,pagination:pagination,loading:this.state.isFetchingItems,message:noItemsMessage,selection:selection,search:search,sorting:true,"data-test-subj":"itemsInMemTable"})}},{key:"renderListingOrEmptyState",value:function renderListingOrEmptyState(){if(this.hasNoItems()){return this.renderNoItemsMessage()}return this.renderListing()}},{key:"renderListing",value:function renderListing(){var createButton;if(this.props.createItem){createButton=_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiButton,{onClick:this.props.createItem,"data-test-subj":"newItemButton",iconType:"plusInCircle",fill:true},_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.table_list_view.listing.createNewItemButtonLabel",defaultMessage:"Create new {entityName}",values:{entityName:this.props.entityName}})))}return _react["default"].createElement("div",null,this.state.showDeleteModal&&this.renderConfirmDeleteModal(),_react["default"].createElement(_eui.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"flexEnd","data-test-subj":"top-nav"},_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiTitle,{size:"l"},_react["default"].createElement("h1",null,this.props.tableListTitle))),createButton),_react["default"].createElement(_eui.EuiSpacer,{size:"m"}),this.renderListingLimitWarning(),this.renderTable())}},{key:"renderPageContent",value:function renderPageContent(){if(!this.state.hasInitialFetchReturned){return}return _react["default"].createElement(_eui.EuiPageContent,{horizontalPosition:"center"},this.renderListingOrEmptyState())}},{key:"render",value:function render(){return _react["default"].createElement(_eui.EuiPage,{"data-test-subj":this.props.entityName+"LandingPage",className:"itemListing__page",restrictWidth:true},_react["default"].createElement(_eui.EuiPageBody,null,this.renderPageContent()))}}]);return TableListViewUi}(_react["default"].Component);TableListViewUi.propTypes={tableColumns:_propTypes["default"].array.isRequired,noItemsFragment:_propTypes["default"].object,findItems:_propTypes["default"].func.isRequired,deleteItems:_propTypes["default"].func,createItem:_propTypes["default"].func,editItem:_propTypes["default"].func,listingLimit:_propTypes["default"].number,initialFilter:_propTypes["default"].string,entityName:_propTypes["default"].string.isRequired,entityNamePlural:_propTypes["default"].string.isRequired,tableListTitle:_propTypes["default"].string.isRequired};TableListViewUi.defaultProps={initialFilter:EMPTY_FILTER};var TableListView=(0,_react2.injectI18n)(TableListViewUi);exports.TableListView=TableListView},6210:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"SearchSelection",{enumerable:true,get:function get(){return _search_selection.SearchSelection}});var _search_selection=__webpack_require__(6211)},6211:function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.SearchSelection=void 0;var _eui=__webpack_require__(2);var _i18n=__webpack_require__(5);var _react=__webpack_require__(10);var _react2=_interopRequireDefault(__webpack_require__(0));var _saved_object_finder=__webpack_require__(553);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var SearchSelection=function(_React$Component){_inherits(SearchSelection,_React$Component);function SearchSelection(){var _getPrototypeOf2;var _this;_classCallCheck(this,SearchSelection);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(SearchSelection)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"fixedPageSize",8);return _this}_createClass(SearchSelection,[{key:"render",value:function render(){return _react2["default"].createElement(_react2["default"].Fragment,null,_react2["default"].createElement(_eui.EuiModalHeader,null,_react2["default"].createElement(_eui.EuiModalHeaderTitle,null,_react2["default"].createElement(_react.FormattedMessage,{id:"kbn.visualize.newVisWizard.newVisTypeTitle",defaultMessage:"New {visTypeName}",values:{visTypeName:this.props.visType.title}})," ","/"," ",_react2["default"].createElement(_react.FormattedMessage,{id:"kbn.visualize.newVisWizard.chooseSourceTitle",defaultMessage:"Choose a source"}))),_react2["default"].createElement(_eui.EuiModalBody,null,_react2["default"].createElement(_saved_object_finder.SavedObjectFinder,{key:"searchSavedObjectFinder",onChoose:this.props.onSearchSelected,showFilter:true,noItemsMessage:_i18n.i18n.translate("kbn.visualize.newVisWizard.searchSelection.notFoundLabel",{defaultMessage:"No matching indices or saved searches found."}),savedObjectMetaData:[{type:"search",getIconForSavedObject:function getIconForSavedObject(){return"search"},name:_i18n.i18n.translate("kbn.visualize.newVisWizard.searchSelection.savedObjectType.search",{defaultMessage:"Saved search"})},{type:"index-pattern",getIconForSavedObject:function getIconForSavedObject(){return"indexPatternApp"},name:_i18n.i18n.translate("kbn.visualize.newVisWizard.searchSelection.savedObjectType.indexPattern",{defaultMessage:"Index pattern"})}],fixedPageSize:this.fixedPageSize})))}}]);return SearchSelection}(_react2["default"].Component);exports.SearchSelection=SearchSelection},6212:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"TypeSelection",{enumerable:true,get:function get(){return _type_selection.TypeSelection}});var _type_selection=__webpack_require__(6213)},6213:function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.TypeSelection=void 0;var _i18n=__webpack_require__(5);var _react=__webpack_require__(10);var _lodash=__webpack_require__(1);var _react2=_interopRequireDefault(__webpack_require__(0));var _chrome=_interopRequireDefault(__webpack_require__(19));var _eui=__webpack_require__(2);var _memoize=__webpack_require__(1440);var _new_vis_help=__webpack_require__(6214);var _vis_help_text=__webpack_require__(6215);var _vis_type_icon=__webpack_require__(6216);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var TypeSelection=function(_React$Component){_inherits(TypeSelection,_React$Component);function TypeSelection(){var _getPrototypeOf2;var _this;_classCallCheck(this,TypeSelection);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(TypeSelection)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"state",{highlightedType:null,query:""});_defineProperty(_assertThisInitialized(_this),"getFilteredVisTypes",(0,_memoize.memoizeLast)(_this.filteredVisTypes));_defineProperty(_assertThisInitialized(_this),"renderVisType",function(visType){var stage={};var highlightMsg;if(!("aliasUrl"in visType)&&visType.stage==="experimental"){stage={betaBadgeLabel:_i18n.i18n.translate("kbn.visualize.newVisWizard.experimentalTitle",{defaultMessage:"Experimental"}),betaBadgeTooltipContent:_i18n.i18n.translate("kbn.visualize.newVisWizard.experimentalTooltip",{defaultMessage:"This visualization might be changed or removed in a future release and is not subject to the support SLA."})};highlightMsg=_i18n.i18n.translate("kbn.visualize.newVisWizard.experimentalDescription",{defaultMessage:"This visualization is experimental. The design and implementation are less mature than stable visualizations and might be subject to change."})}else if("aliasUrl"in visType){var aliasDescription=_i18n.i18n.translate("kbn.visualize.newVisWizard.visTypeAliasDescription",{defaultMessage:"Opens a Kibana application that is outside of Visualize."});stage={betaBadgeLabel:_i18n.i18n.translate("kbn.visualize.newVisWizard.visTypeAliasTitle",{defaultMessage:"Kibana application"}),betaBadgeTooltipContent:aliasDescription,betaBadgeIconType:"popout"};highlightMsg=aliasDescription}var isDisabled=_this.state.query!==""&&!visType.highlighted;var onClick="aliasUrl"in visType?function(){window.location=_chrome["default"].addBasePath(visType.aliasUrl)}:function(){return _this.props.onVisTypeSelected(visType)};var highlightedType={title:visType.title,name:visType.name,description:visType.description,highlightMsg:highlightMsg};return _react2["default"].createElement(_eui.EuiKeyPadMenuItemButton,_extends({key:visType.name,label:_react2["default"].createElement("span",{"data-test-subj":"visTypeTitle"},visType.title),onClick:onClick,onFocus:function onFocus(){return _this.setHighlightType(highlightedType)},onMouseEnter:function onMouseEnter(){return _this.setHighlightType(highlightedType)},onMouseLeave:function onMouseLeave(){return _this.setHighlightType(null)},onBlur:function onBlur(){return _this.setHighlightType(null)},className:"visNewVisDialog__type","data-test-subj":"visType-".concat(visType.name),"data-vis-stage":!("aliasUrl"in visType)?visType.stage:"alias",disabled:isDisabled,"aria-describedby":"visTypeDescription-".concat(visType.name),role:"menuitem"},stage),_react2["default"].createElement(_vis_type_icon.VisTypeIcon,{icon:visType.icon,image:!("aliasUrl"in visType)?visType.image:undefined}))});_defineProperty(_assertThisInitialized(_this),"onQueryChange",function(ev){_this.setState({query:ev.target.value})});return _this}_createClass(TypeSelection,[{key:"render",value:function render(){var _this$state=this.state,query=_this$state.query,highlightedType=_this$state.highlightedType;var visTypes=this.getFilteredVisTypes(this.props.visTypesRegistry,this.props.visTypeAliases,query);return _react2["default"].createElement(_react2["default"].Fragment,null,_react2["default"].createElement(_eui.EuiModalHeader,null,_react2["default"].createElement(_eui.EuiModalHeaderTitle,null,_react2["default"].createElement(_react.FormattedMessage,{id:"kbn.visualize.newVisWizard.title",defaultMessage:"New Visualization"}))),_react2["default"].createElement("div",{className:"visNewVisDialog__body"},_react2["default"].createElement(_eui.EuiFlexGroup,{gutterSize:"xl"},_react2["default"].createElement(_eui.EuiFlexItem,null,_react2["default"].createElement(_eui.EuiFlexGroup,{className:"visNewVisDialog__list",direction:"column",gutterSize:"none",responsive:false},_react2["default"].createElement(_eui.EuiFlexItem,{grow:false,className:"visNewVisDialog__searchWrapper"},_react2["default"].createElement(_eui.EuiFieldSearch,{placeholder:"Filter",value:query,onChange:this.onQueryChange,fullWidth:true,"data-test-subj":"filterVisType","aria-label":_i18n.i18n.translate("kbn.visualize.newVisWizard.filterVisTypeAriaLabel",{defaultMessage:"Filter for a visualization type"})})),_react2["default"].createElement(_eui.EuiFlexItem,{grow:1,className:"visNewVisDialog__typesWrapper"},_react2["default"].createElement(_eui.EuiScreenReaderOnly,null,_react2["default"].createElement("span",{"aria-live":"polite"},query&&_react2["default"].createElement(_react.FormattedMessage,{id:"kbn.visualize.newVisWizard.resultsFound",defaultMessage:"{resultCount} {resultCount, plural, one {type} other {types} } found",values:{resultCount:visTypes.filter(function(type){return type.highlighted}).length}}))),_react2["default"].createElement(_eui.EuiKeyPadMenu,{className:"visNewVisDialog__types","data-test-subj":"visNewDialogTypes"},visTypes.map(this.renderVisType))))),_react2["default"].createElement(_eui.EuiFlexItem,{className:"visNewVisDialog__description",grow:false},highlightedType?_react2["default"].createElement(_vis_help_text.VisHelpText,highlightedType):_react2["default"].createElement(_react2["default"].Fragment,null,_react2["default"].createElement(_eui.EuiTitle,{size:"s"},_react2["default"].createElement("h2",null,_react2["default"].createElement(_react.FormattedMessage,{id:"kbn.visualize.newVisWizard.selectVisType",defaultMessage:"Select a visualization type"}))),_react2["default"].createElement(_eui.EuiSpacer,{size:"m"}),_react2["default"].createElement(_new_vis_help.NewVisHelp,null))))))}},{key:"filteredVisTypes",value:function filteredVisTypes(visTypes){var _this2=this;var visTypeAliases=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];var query=arguments.length>2?arguments[2]:undefined;var types=visTypes.filter(function(type){if(!_this2.props.showExperimental&&type.stage==="experimental"){return false}if(type.hidden){return false}return true});var allTypes=[].concat(_toConsumableArray(types),_toConsumableArray(visTypeAliases));var entries;if(!query){entries=allTypes.map(function(type){return _objectSpread({},type,{highlighted:false})})}else{var q=query.toLowerCase();entries=allTypes.map(function(type){var matchesQuery=type.name.toLowerCase().includes(q)||type.title.toLowerCase().includes(q)||typeof type.description==="string"&&type.description.toLowerCase().includes(q);return _objectSpread({},type,{highlighted:matchesQuery})})}return(0,_lodash.sortByOrder)(entries,["highlighted","title"],["desc","asc"])}},{key:"setHighlightType",value:function setHighlightType(highlightedType){this.setState({highlightedType:highlightedType})}}]);return TypeSelection}(_react2["default"].Component);exports.TypeSelection=TypeSelection},6214:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.NewVisHelp=void 0;var _react=__webpack_require__(10);var _react2=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var NewVisHelp=function NewVisHelp(){return _react2["default"].createElement(_eui.EuiText,null,_react2["default"].createElement("p",null,_react2["default"].createElement(_react.FormattedMessage,{id:"kbn.visualize.newVisWizard.helpText",defaultMessage:"Start creating your visualization by selecting a type for that visualization."})))};exports.NewVisHelp=NewVisHelp},6215:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VisHelpText=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var VisHelpText=function VisHelpText(_ref){var name=_ref.name,title=_ref.title,description=_ref.description,highlightMsg=_ref.highlightMsg;return _react["default"].createElement(_react["default"].Fragment,null,_react["default"].createElement(_eui.EuiTitle,{size:"s"},_react["default"].createElement("h2",null,title)),_react["default"].createElement(_eui.EuiSpacer,{size:"s"}),_react["default"].createElement("div",{id:"visTypeDescription-".concat(name)},_react["default"].createElement(_eui.EuiText,null,highlightMsg&&_react["default"].createElement("p",null,_react["default"].createElement("em",null,highlightMsg)),_react["default"].createElement("p",null,description))))};exports.VisHelpText=VisHelpText},6216:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VisTypeIcon=void 0;var _eui=__webpack_require__(2);var _react=_interopRequireDefault(__webpack_require__(0));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var VisTypeIcon=function VisTypeIcon(_ref){var icon=_ref.icon,image=_ref.image;return _react["default"].createElement(_react["default"].Fragment,null,image&&_react["default"].createElement("img",{src:image,"aria-hidden":"true",role:"presentation",alt:"",className:"visNewVisDialog__typeImage"}),!image&&_react["default"].createElement(_eui.EuiIcon,{type:icon||"empty",size:"l",color:"secondary","aria-hidden":"true"}))};exports.VisTypeIcon=VisTypeIcon},6217:function(module,exports,__webpack_require__){"use strict";__webpack_require__(6218);var _i18n=__webpack_require__(5);__webpack_require__(2014);__webpack_require__(1368);var _routes=_interopRequireDefault(__webpack_require__(34));var _chrome=_interopRequireDefault(__webpack_require__(19));var _i18n2=__webpack_require__(28);var _notify=__webpack_require__(24);var _dashboard_app2=_interopRequireDefault(__webpack_require__(6274));var _dashboard_listing_ng_wrapper=_interopRequireDefault(__webpack_require__(6275));var _dashboard_constants=__webpack_require__(261);var _errors=__webpack_require__(80);var _feature_catalogue=__webpack_require__(128);var _saved_objects=__webpack_require__(108);var _persisted_log=__webpack_require__(262);var _saved_object_registry=__webpack_require__(252);var _dashboard_listing=__webpack_require__(6276);var _modules=__webpack_require__(12);__webpack_require__(670);var _setup=__webpack_require__(84);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_setup.data.search.loadLegacyDirectives();_setup.data.filter.loadLegacyDirectives();var app=_modules.uiModules.get("app/dashboard",["ngRoute","react"]);app.directive("dashboardListing",function(reactDirective){return reactDirective((0,_i18n2.wrapInI18nContext)(_dashboard_listing.DashboardListing))});function createNewDashboardCtrl($scope){$scope.visitVisualizeAppLinkText=_i18n.i18n.translate("kbn.dashboard.visitVisualizeAppLinkText",{defaultMessage:"visit the Visualize app"})}_routes["default"].defaults(/dashboard/,{requireDefaultIndex:true,requireUICapability:"dashboard.show",badge:function badge(uiCapabilities){if(uiCapabilities.dashboard.showWriteControls){return undefined}return{text:_i18n.i18n.translate("kbn.dashboard.badge.readOnly.text",{defaultMessage:"Read only"}),tooltip:_i18n.i18n.translate("kbn.dashboard.badge.readOnly.tooltip",{defaultMessage:"Unable to save dashboards"}),iconType:"glasses"}}}).when(_dashboard_constants.DashboardConstants.LANDING_PAGE_PATH,{template:_dashboard_listing_ng_wrapper["default"],controller:function controller($injector,$location,$scope,Private,config){var services=Private(_saved_object_registry.SavedObjectRegistryProvider).byLoaderPropertiesName;var kbnUrl=$injector.get("kbnUrl");var dashboardConfig=$injector.get("dashboardConfig");$scope.listingLimit=config.get("savedObjects:listingLimit");$scope.create=function(){kbnUrl.redirect(_dashboard_constants.DashboardConstants.CREATE_NEW_DASHBOARD_URL)};$scope.find=function(search){return services.dashboards.find(search,$scope.listingLimit)};$scope.editItem=function(_ref){var id=_ref.id;kbnUrl.redirect("".concat((0,_dashboard_constants.createDashboardEditUrl)(id),"?_a=(viewMode:edit)"))};$scope.getViewUrl=function(_ref2){var id=_ref2.id;return _chrome["default"].addBasePath("#".concat((0,_dashboard_constants.createDashboardEditUrl)(id)))};$scope["delete"]=function(ids){return services.dashboards["delete"](ids)};$scope.hideWriteControls=dashboardConfig.getHideWriteControls();$scope.initialFilter=$location.search().filter||_dashboard_listing.EMPTY_FILTER;_chrome["default"].breadcrumbs.set([{text:_i18n.i18n.translate("kbn.dashboard.dashboardBreadcrumbsTitle",{defaultMessage:"Dashboards"})}])},resolve:{dash:function dash($route,Private,redirectWhenMissing,kbnUrl){var savedObjectsClient=Private(_saved_objects.SavedObjectsClientProvider);var title=$route.current.params.title;if(title){return savedObjectsClient.find({search:'"'.concat(title,'"'),search_fields:"title",type:"dashboard"}).then(function(results){var matchingDashboards=results.savedObjects.filter(function(dashboard){return dashboard.attributes.title.toLowerCase()===title.toLowerCase()});if(matchingDashboards.length===1){kbnUrl.redirect((0,_dashboard_constants.createDashboardEditUrl)(matchingDashboards[0].id))}else{kbnUrl.redirect("".concat(_dashboard_constants.DashboardConstants.LANDING_PAGE_PATH,'?filter="').concat(title,'"'))}throw _routes["default"].WAIT_FOR_URL_CHANGE_TOKEN})["catch"](redirectWhenMissing({dashboard:_dashboard_constants.DashboardConstants.LANDING_PAGE_PATH}))}}}}).when(_dashboard_constants.DashboardConstants.CREATE_NEW_DASHBOARD_URL,{template:_dashboard_app2["default"],controller:createNewDashboardCtrl,requireUICapability:"dashboard.createNew",resolve:{dash:function dash(savedDashboards,redirectWhenMissing){return savedDashboards.get()["catch"](redirectWhenMissing({dashboard:_dashboard_constants.DashboardConstants.LANDING_PAGE_PATH}))}}}).when((0,_dashboard_constants.createDashboardEditUrl)(":id"),{template:_dashboard_app2["default"],controller:createNewDashboardCtrl,resolve:{dash:function dash(savedDashboards,$route,redirectWhenMissing,kbnUrl,AppState){var id=$route.current.params.id;return savedDashboards.get(id).then(function(savedDashboard){_persisted_log.recentlyAccessed.add(savedDashboard.getFullPath(),savedDashboard.title,id);return savedDashboard})["catch"](function(error){if(error instanceof _errors.InvalidJSONProperty){_notify.toastNotifications.addDanger(error.message);kbnUrl.redirect(_dashboard_constants.DashboardConstants.LANDING_PAGE_PATH);return}if(error instanceof _errors.SavedObjectNotFound&&id==="create"){kbnUrl.redirect(_dashboard_constants.DashboardConstants.CREATE_NEW_DASHBOARD_URL,{},new AppState);_notify.toastNotifications.addWarning(_i18n.i18n.translate("kbn.dashboard.urlWasRemovedInSixZeroWarningMessage",{defaultMessage:'The url "dashboard/create" was removed in 6.0. Please update your bookmarks.'}))}else{throw error}})["catch"](redirectWhenMissing({dashboard:_dashboard_constants.DashboardConstants.LANDING_PAGE_PATH}))}}});_feature_catalogue.FeatureCatalogueRegistryProvider.register(function(){return{id:"dashboard",title:_i18n.i18n.translate("kbn.dashboard.featureCatalogue.dashboardTitle",{defaultMessage:"Dashboard"}),description:_i18n.i18n.translate("kbn.dashboard.featureCatalogue.dashboardDescription",{defaultMessage:"Display and share a collection of visualizations and saved searches."}),icon:"dashboardApp",path:"/app/kibana#".concat(_dashboard_constants.DashboardConstants.LANDING_PAGE_PATH),showOnHomePage:true,category:_feature_catalogue.FeatureCatalogueCategory.DATA}})},6218:function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(12);var _i18n=__webpack_require__(28);var filterActions=_interopRequireWildcard(__webpack_require__(2046));var _filter_manager=__webpack_require__(1029);var _query_filter=__webpack_require__(188);var _dashboard_viewport_provider=__webpack_require__(6219);var _dashboard_app_controller=__webpack_require__(6255);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}var app=_modules.uiModules.get("app/dashboard",["elasticsearch","ngRoute","react","kibana/courier","kibana/config"]);app.directive("dashboardViewportProvider",function(reactDirective){return reactDirective((0,_i18n.wrapInI18nContext)(_dashboard_viewport_provider.DashboardViewportProvider))});app.directive("dashboardApp",function($injector){var AppState=$injector.get("AppState");var kbnUrl=$injector.get("kbnUrl");var confirmModal=$injector.get("confirmModal");var config=$injector.get("config");var courier=$injector.get("courier");var Private=$injector.get("Private");var queryFilter=Private(_query_filter.FilterBarQueryFilterProvider);var filterGen=(0,_filter_manager.getFilterGenerator)(queryFilter);var addFilter=function addFilter(_ref,appState){var field=_ref.field,value=_ref.value,operator=_ref.operator,index=_ref.index;filterActions.addFilter(field,value,operator,index,appState,filterGen)};var indexPatterns=$injector.get("indexPatterns");return{restrict:"E",controllerAs:"dashboardApp",controller:function controller($scope,$rootScope,$route,$routeParams,getAppState,dashboardConfig,localStorage){return new _dashboard_app_controller.DashboardAppController({$route:$route,$rootScope:$rootScope,$scope:$scope,$routeParams:$routeParams,getAppState:getAppState,dashboardConfig:dashboardConfig,localStorage:localStorage,Private:Private,kbnUrl:kbnUrl,AppStateClass:AppState,indexPatterns:indexPatterns,config:config,confirmModal:confirmModal,addFilter:addFilter,courier:courier})}}})},6219:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DashboardViewportProvider=DashboardViewportProvider;var _react=_interopRequireDefault(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(17));var _store=__webpack_require__(2050);var _reactRedux=__webpack_require__(426);var _dashboard_viewport_container=__webpack_require__(6234);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function DashboardViewportProvider(props){return _react["default"].createElement(_reactRedux.Provider,{store:_store.store},_react["default"].createElement(_dashboard_viewport_container.DashboardViewportContainer,props))}DashboardViewportProvider.propTypes={getEmbeddableFactory:_propTypes["default"].func.isRequired}},6220:function(module,exports,__webpack_require__){module.exports=__webpack_require__(18)(2759)},6221:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.reducers=void 0;var _redux=__webpack_require__(1035);var _reducers=__webpack_require__(6222);var reducers=(0,_redux.combineReducers)({dashboard:_reducers.dashboard});exports.reducers=reducers},6222:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.dashboard=void 0;var _redux=__webpack_require__(1035);var _embeddables=__webpack_require__(6223);var _panels=__webpack_require__(6231);var _view=__webpack_require__(6232);var _metadata=__webpack_require__(6233);var dashboard=(0,_redux.combineReducers)({embeddables:_embeddables.embeddablesReducer,metadata:_metadata.metadataReducer,panels:_panels.panelsReducer,view:_view.viewReducer});exports.dashboard=dashboard},6223:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.embeddablesReducer=void 0;var _lodash=_interopRequireDefault(__webpack_require__(1));var _actions=__webpack_require__(249);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var embeddableIsInitializing=function embeddableIsInitializing(embeddables,panelId){return _objectSpread({},embeddables,_defineProperty({},panelId,{error:undefined,initialized:false,metadata:{},stagedFilter:undefined,lastReloadRequestTime:0}))};var embeddableIsInitialized=function embeddableIsInitialized(embeddables,_ref){var panelId=_ref.panelId,metadata=_ref.metadata;return _objectSpread({},embeddables,_defineProperty({},panelId,_objectSpread({},embeddables[panelId],{initialized:true,metadata:_objectSpread({},metadata)})))};var setStagedFilter=function setStagedFilter(embeddables,_ref2){var panelId=_ref2.panelId,stagedFilter=_ref2.stagedFilter;return _objectSpread({},embeddables,_defineProperty({},panelId,_objectSpread({},embeddables[panelId],{stagedFilter:stagedFilter})))};var embeddableError=function embeddableError(embeddables,payload){return _objectSpread({},embeddables,_defineProperty({},payload.panelId,_objectSpread({},embeddables[payload.panelId],{error:payload.error})))};var clearStagedFilters=function clearStagedFilters(embeddables){var omitStagedFilters=function omitStagedFilters(embeddable){return _lodash["default"].omit(_objectSpread({},embeddable),["stagedFilter"])};return _lodash["default"].mapValues(embeddables,omitStagedFilters)};var deleteEmbeddable=function deleteEmbeddable(embeddables,panelId){var embeddablesCopy=_objectSpread({},embeddables);delete embeddablesCopy[panelId];return embeddablesCopy};var setReloadRequestTime=function setReloadRequestTime(embeddables,lastReloadRequestTime){return _lodash["default"].mapValues(embeddables,function(embeddable){return _objectSpread({},embeddable,{lastReloadRequestTime:lastReloadRequestTime})})};var embeddablesReducer=function embeddablesReducer(){var embeddables=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var action=arguments.length>1?arguments[1]:undefined;switch(action.type){case _actions.EmbeddableActionTypeKeys.EMBEDDABLE_IS_INITIALIZING:return embeddableIsInitializing(embeddables,action.payload);case _actions.EmbeddableActionTypeKeys.EMBEDDABLE_IS_INITIALIZED:return embeddableIsInitialized(embeddables,action.payload);case _actions.EmbeddableActionTypeKeys.SET_STAGED_FILTER:return setStagedFilter(embeddables,action.payload);case _actions.EmbeddableActionTypeKeys.CLEAR_STAGED_FILTERS:return clearStagedFilters(embeddables);case _actions.EmbeddableActionTypeKeys.EMBEDDABLE_ERROR:return embeddableError(embeddables,action.payload);case _actions.PanelActionTypeKeys.DELETE_PANEL:return deleteEmbeddable(embeddables,action.payload);case _actions.EmbeddableActionTypeKeys.REQUEST_RELOAD:return setReloadRequestTime(embeddables,(new Date).getTime());default:return embeddables}};exports.embeddablesReducer=embeddablesReducer},6224:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.updateQuery=exports.updateFilters=exports.updateRefreshConfig=exports.updateTimeRange=exports.updateHidePanelTitles=exports.updateUseMargins=exports.updateIsFullScreenMode=exports.minimizePanel=exports.maximizePanel=exports.setVisibleContextMenuPanelId=exports.closeContextMenu=exports.updateViewMode=exports.ViewActionTypeKeys=void 0;var _reduxActions=__webpack_require__(672);var ViewActionTypeKeys;exports.ViewActionTypeKeys=ViewActionTypeKeys;(function(ViewActionTypeKeys){ViewActionTypeKeys["UPDATE_VIEW_MODE"]="UPDATE_VIEW_MODE";ViewActionTypeKeys["SET_VISIBLE_CONTEXT_MENU_PANEL_ID"]="SET_VISIBLE_CONTEXT_MENU_PANEL_ID";ViewActionTypeKeys["MAXIMIZE_PANEL"]="MAXIMIZE_PANEL";ViewActionTypeKeys["MINIMIZE_PANEL"]="MINIMIZE_PANEL";ViewActionTypeKeys["UPDATE_IS_FULL_SCREEN_MODE"]="UPDATE_IS_FULL_SCREEN_MODE";ViewActionTypeKeys["UPDATE_USE_MARGINS"]="UPDATE_USE_MARGINS";ViewActionTypeKeys["UPDATE_HIDE_PANEL_TITLES"]="UPDATE_HIDE_PANEL_TITLES";ViewActionTypeKeys["UPDATE_TIME_RANGE"]="UPDATE_TIME_RANGE";ViewActionTypeKeys["UPDATE_REFRESH_CONFIG"]="UPDATE_REFRESH_CONFIG";ViewActionTypeKeys["UPDATE_FILTERS"]="UPDATE_FILTERS";ViewActionTypeKeys["UPDATE_QUERY"]="UPDATE_QUERY";ViewActionTypeKeys["CLOSE_CONTEXT_MENU"]="CLOSE_CONTEXT_MENU"})(ViewActionTypeKeys||(exports.ViewActionTypeKeys=ViewActionTypeKeys={}));var updateViewMode=(0,_reduxActions.createAction)(ViewActionTypeKeys.UPDATE_VIEW_MODE);exports.updateViewMode=updateViewMode;var closeContextMenu=(0,_reduxActions.createAction)(ViewActionTypeKeys.CLOSE_CONTEXT_MENU);exports.closeContextMenu=closeContextMenu;var setVisibleContextMenuPanelId=(0,_reduxActions.createAction)(ViewActionTypeKeys.SET_VISIBLE_CONTEXT_MENU_PANEL_ID);exports.setVisibleContextMenuPanelId=setVisibleContextMenuPanelId;var maximizePanel=(0,_reduxActions.createAction)(ViewActionTypeKeys.MAXIMIZE_PANEL);exports.maximizePanel=maximizePanel;var minimizePanel=(0,_reduxActions.createAction)(ViewActionTypeKeys.MINIMIZE_PANEL);exports.minimizePanel=minimizePanel;var updateIsFullScreenMode=(0,_reduxActions.createAction)(ViewActionTypeKeys.UPDATE_IS_FULL_SCREEN_MODE);exports.updateIsFullScreenMode=updateIsFullScreenMode;var updateUseMargins=(0,_reduxActions.createAction)(ViewActionTypeKeys.UPDATE_USE_MARGINS);exports.updateUseMargins=updateUseMargins;var updateHidePanelTitles=(0,_reduxActions.createAction)(ViewActionTypeKeys.UPDATE_HIDE_PANEL_TITLES);exports.updateHidePanelTitles=updateHidePanelTitles;var updateTimeRange=(0,_reduxActions.createAction)(ViewActionTypeKeys.UPDATE_TIME_RANGE);exports.updateTimeRange=updateTimeRange;var updateRefreshConfig=(0,_reduxActions.createAction)(ViewActionTypeKeys.UPDATE_REFRESH_CONFIG);exports.updateRefreshConfig=updateRefreshConfig;var updateFilters=(0,_reduxActions.createAction)(ViewActionTypeKeys.UPDATE_FILTERS);exports.updateFilters=updateFilters;var updateQuery=(0,_reduxActions.createAction)(ViewActionTypeKeys.UPDATE_QUERY);exports.updateQuery=updateQuery},6225:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.embeddableStateChanged=embeddableStateChanged;exports.requestReload=exports.embeddableError=exports.clearStagedFilters=exports.setStagedFilter=exports.embeddableIsInitialized=exports.embeddableIsInitializing=exports.EmbeddableActionTypeKeys=void 0;var _lodash=_interopRequireDefault(__webpack_require__(1));var _reduxActions=__webpack_require__(672);var _selectors=__webpack_require__(2052);var _panels=__webpack_require__(2051);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var EmbeddableActionTypeKeys;exports.EmbeddableActionTypeKeys=EmbeddableActionTypeKeys;(function(EmbeddableActionTypeKeys){EmbeddableActionTypeKeys["EMBEDDABLE_IS_INITIALIZING"]="EMBEDDABLE_IS_INITIALIZING";EmbeddableActionTypeKeys["EMBEDDABLE_IS_INITIALIZED"]="EMBEDDABLE_IS_INITIALIZED";EmbeddableActionTypeKeys["SET_STAGED_FILTER"]="SET_STAGED_FILTER";EmbeddableActionTypeKeys["CLEAR_STAGED_FILTERS"]="CLEAR_STAGED_FILTERS";EmbeddableActionTypeKeys["EMBEDDABLE_ERROR"]="EMBEDDABLE_ERROR";EmbeddableActionTypeKeys["REQUEST_RELOAD"]="REQUEST_RELOAD"})(EmbeddableActionTypeKeys||(exports.EmbeddableActionTypeKeys=EmbeddableActionTypeKeys={}));var embeddableIsInitializing=(0,_reduxActions.createAction)(EmbeddableActionTypeKeys.EMBEDDABLE_IS_INITIALIZING);exports.embeddableIsInitializing=embeddableIsInitializing;var embeddableIsInitialized=(0,_reduxActions.createAction)(EmbeddableActionTypeKeys.EMBEDDABLE_IS_INITIALIZED);exports.embeddableIsInitialized=embeddableIsInitialized;var setStagedFilter=(0,_reduxActions.createAction)(EmbeddableActionTypeKeys.SET_STAGED_FILTER);exports.setStagedFilter=setStagedFilter;var clearStagedFilters=(0,_reduxActions.createAction)(EmbeddableActionTypeKeys.CLEAR_STAGED_FILTERS);exports.clearStagedFilters=clearStagedFilters;var embeddableError=(0,_reduxActions.createAction)(EmbeddableActionTypeKeys.EMBEDDABLE_ERROR);exports.embeddableError=embeddableError;var requestReload=(0,_reduxActions.createAction)(EmbeddableActionTypeKeys.REQUEST_RELOAD);exports.requestReload=requestReload;function embeddableStateChanged(changeData){var panelId=changeData.panelId,embeddableState=changeData.embeddableState;return function(dispatch,getState){var customization=(0,_selectors.getEmbeddableCustomization)(getState(),panelId);if(!_lodash["default"].isEqual(embeddableState.customization,customization)){var originalPanelState=(0,_selectors.getPanel)(getState(),panelId);var newPanelState=_objectSpread({},originalPanelState,{embeddableConfig:_lodash["default"].cloneDeep(embeddableState.customization)||{}});dispatch((0,_panels.updatePanel)(newPanelState))}if(embeddableState.stagedFilter){dispatch(setStagedFilter({stagedFilter:embeddableState.stagedFilter,panelId:panelId}))}}}},6226:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getDescription=exports.getTitle=exports.getQuery=exports.getFilters=exports.getTimeRange=exports.getHidePanelTitles=exports.getUseMargins=exports.getMaximizedPanelId=exports.getFullScreenMode=exports.getViewMode=exports.getStagedFilters=exports.getEmbeddableMetadata=exports.getEmbeddableStagedFilter=exports.getEmbeddableCustomization=exports.getEmbeddableInitialized=exports.getEmbeddableError=exports.getEmbeddables=exports.getPanelType=exports.getPanel=exports.getPanels=exports.getDashboard=void 0;var DashboardSelectors=_interopRequireWildcard(__webpack_require__(425));function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}var getDashboard=function getDashboard(state){return state.dashboard};exports.getDashboard=getDashboard;var getPanels=function getPanels(state){return DashboardSelectors.getPanels(getDashboard(state))};exports.getPanels=getPanels;var getPanel=function getPanel(state,panelId){return DashboardSelectors.getPanel(getDashboard(state),panelId)};exports.getPanel=getPanel;var getPanelType=function getPanelType(state,panelId){return DashboardSelectors.getPanelType(getDashboard(state),panelId)};exports.getPanelType=getPanelType;var getEmbeddables=function getEmbeddables(state){return DashboardSelectors.getEmbeddables(getDashboard(state))};exports.getEmbeddables=getEmbeddables;var getEmbeddableError=function getEmbeddableError(state,panelId){return DashboardSelectors.getEmbeddableError(getDashboard(state),panelId)};exports.getEmbeddableError=getEmbeddableError;var getEmbeddableInitialized=function getEmbeddableInitialized(state,panelId){return DashboardSelectors.getEmbeddableInitialized(getDashboard(state),panelId)};exports.getEmbeddableInitialized=getEmbeddableInitialized;var getEmbeddableCustomization=function getEmbeddableCustomization(state,panelId){return DashboardSelectors.getEmbeddableCustomization(getDashboard(state),panelId)};exports.getEmbeddableCustomization=getEmbeddableCustomization;var getEmbeddableStagedFilter=function getEmbeddableStagedFilter(state,panelId){return DashboardSelectors.getEmbeddableStagedFilter(getDashboard(state),panelId)};exports.getEmbeddableStagedFilter=getEmbeddableStagedFilter;var getEmbeddableMetadata=function getEmbeddableMetadata(state,panelId){return DashboardSelectors.getEmbeddableMetadata(getDashboard(state),panelId)};exports.getEmbeddableMetadata=getEmbeddableMetadata;var getStagedFilters=function getStagedFilters(state){return DashboardSelectors.getStagedFilters(getDashboard(state))};exports.getStagedFilters=getStagedFilters;var getViewMode=function getViewMode(state){return DashboardSelectors.getViewMode(getDashboard(state))};exports.getViewMode=getViewMode;var getFullScreenMode=function getFullScreenMode(state){return DashboardSelectors.getFullScreenMode(getDashboard(state))};exports.getFullScreenMode=getFullScreenMode;var getMaximizedPanelId=function getMaximizedPanelId(state){return DashboardSelectors.getMaximizedPanelId(getDashboard(state))};exports.getMaximizedPanelId=getMaximizedPanelId;var getUseMargins=function getUseMargins(state){return DashboardSelectors.getUseMargins(getDashboard(state))};exports.getUseMargins=getUseMargins;var getHidePanelTitles=function getHidePanelTitles(state){return DashboardSelectors.getHidePanelTitles(getDashboard(state))};exports.getHidePanelTitles=getHidePanelTitles;var getTimeRange=function getTimeRange(state){return DashboardSelectors.getTimeRange(getDashboard(state))};exports.getTimeRange=getTimeRange;var getFilters=function getFilters(state){return DashboardSelectors.getFilters(getDashboard(state))};exports.getFilters=getFilters;var getQuery=function getQuery(state){return DashboardSelectors.getQuery(getDashboard(state))};exports.getQuery=getQuery;var getTitle=function getTitle(state){return DashboardSelectors.getTitle(getDashboard(state))};exports.getTitle=getTitle;var getDescription=function getDescription(state){return DashboardSelectors.getDescription(getDashboard(state))};exports.getDescription=getDescription},6227:function(module,exports,__webpack_require__){"use strict";var _dashboard_view_mode=__webpack_require__(139)},6228:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getStagedFilters=exports.getContainerState=exports.getDescription=exports.getTitle=exports.getMetadata=exports.getQuery=exports.getFilters=exports.getRefreshConfig=exports.getTimeRange=exports.getMaximizedPanelId=exports.getHidePanelTitles=exports.getFullScreenMode=exports.getViewMode=exports.getUseMargins=exports.getVisibleContextMenuPanelId=exports.getEmbeddableEditUrl=exports.getEmbeddableMetadata=exports.getEmbeddableStagedFilter=exports.getEmbeddableInitialized=exports.getEmbeddableTitle=exports.getEmbeddableError=exports.getEmbeddable=exports.getEmbeddableCustomization=exports.getEmbeddables=exports.getPanelType=exports.getPanel=exports.getPanels=void 0;var _lodash=_interopRequireDefault(__webpack_require__(1));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var getPanels=function getPanels(dashboard){return dashboard.panels};exports.getPanels=getPanels;var getPanel=function getPanel(dashboard,panelId){return getPanels(dashboard)[panelId]};exports.getPanel=getPanel;var getPanelType=function getPanelType(dashboard,panelId){return getPanel(dashboard,panelId).type};exports.getPanelType=getPanelType;var getEmbeddables=function getEmbeddables(dashboard){return dashboard.embeddables};exports.getEmbeddables=getEmbeddables;var getEmbeddableCustomization=function getEmbeddableCustomization(dashboard,panelId){return getPanel(dashboard,panelId).embeddableConfig};exports.getEmbeddableCustomization=getEmbeddableCustomization;var getEmbeddable=function getEmbeddable(dashboard,panelId){return dashboard.embeddables[panelId]};exports.getEmbeddable=getEmbeddable;var getEmbeddableError=function getEmbeddableError(dashboard,panelId){return getEmbeddable(dashboard,panelId).error};exports.getEmbeddableError=getEmbeddableError;var getEmbeddableTitle=function getEmbeddableTitle(dashboard,panelId){var embeddable=getEmbeddable(dashboard,panelId);return embeddable&&embeddable.initialized&&embeddable.metadata?embeddable.metadata.title:""};exports.getEmbeddableTitle=getEmbeddableTitle;var getEmbeddableInitialized=function getEmbeddableInitialized(dashboard,panelId){return getEmbeddable(dashboard,panelId).initialized};exports.getEmbeddableInitialized=getEmbeddableInitialized;var getEmbeddableStagedFilter=function getEmbeddableStagedFilter(dashboard,panelId){return getEmbeddable(dashboard,panelId).stagedFilter};exports.getEmbeddableStagedFilter=getEmbeddableStagedFilter;var getEmbeddableMetadata=function getEmbeddableMetadata(dashboard,panelId){return getEmbeddable(dashboard,panelId).metadata};exports.getEmbeddableMetadata=getEmbeddableMetadata;var getEmbeddableEditUrl=function getEmbeddableEditUrl(dashboard,panelId){var embeddable=getEmbeddable(dashboard,panelId);return embeddable&&embeddable.initialized&&embeddable.metadata?embeddable.metadata.editUrl:""};exports.getEmbeddableEditUrl=getEmbeddableEditUrl;var getVisibleContextMenuPanelId=function getVisibleContextMenuPanelId(dashboard){return dashboard.view.visibleContextMenuPanelId};exports.getVisibleContextMenuPanelId=getVisibleContextMenuPanelId;var getUseMargins=function getUseMargins(dashboard){return dashboard.view.useMargins};exports.getUseMargins=getUseMargins;var getViewMode=function getViewMode(dashboard){return dashboard.view.viewMode};exports.getViewMode=getViewMode;var getFullScreenMode=function getFullScreenMode(dashboard){return dashboard.view.isFullScreenMode};exports.getFullScreenMode=getFullScreenMode;var getHidePanelTitles=function getHidePanelTitles(dashboard){return dashboard.view.hidePanelTitles};exports.getHidePanelTitles=getHidePanelTitles;var getMaximizedPanelId=function getMaximizedPanelId(dashboard){return dashboard.view.maximizedPanelId};exports.getMaximizedPanelId=getMaximizedPanelId;var getTimeRange=function getTimeRange(dashboard){return dashboard.view.timeRange};exports.getTimeRange=getTimeRange;var getRefreshConfig=function getRefreshConfig(dashboard){return dashboard.view.refreshConfig};exports.getRefreshConfig=getRefreshConfig;var getFilters=function getFilters(dashboard){return dashboard.view.filters};exports.getFilters=getFilters;var getQuery=function getQuery(dashboard){return dashboard.view.query};exports.getQuery=getQuery;var getMetadata=function getMetadata(dashboard){return dashboard.metadata};exports.getMetadata=getMetadata;var getTitle=function getTitle(dashboard){return dashboard.metadata.title};exports.getTitle=getTitle;var getDescription=function getDescription(dashboard){return dashboard.metadata.description};exports.getDescription=getDescription;var getContainerState=function getContainerState(dashboard,panelId){var time=getTimeRange(dashboard);return{customTitle:getPanel(dashboard,panelId).title,embeddableCustomization:_lodash["default"].cloneDeep(getEmbeddableCustomization(dashboard,panelId)||{}),filters:getFilters(dashboard),hidePanelTitles:getHidePanelTitles(dashboard),isPanelExpanded:getMaximizedPanelId(dashboard)===panelId,query:getQuery(dashboard),timeRange:{from:time.from,to:time.to},refreshConfig:getRefreshConfig(dashboard),viewMode:getViewMode(dashboard)}};exports.getContainerState=getContainerState;var getStagedFilters=function getStagedFilters(dashboard){return _lodash["default"].compact(_lodash["default"].map(dashboard.embeddables,"stagedFilter"))};exports.getStagedFilters=getStagedFilters},6229:function(module,exports,__webpack_require__){"use strict"},6230:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.updateTitle=exports.updateDescription=exports.MetadataActionTypeKeys=void 0;var _reduxActions=__webpack_require__(672);var MetadataActionTypeKeys;exports.MetadataActionTypeKeys=MetadataActionTypeKeys;(function(MetadataActionTypeKeys){MetadataActionTypeKeys["UPDATE_DESCRIPTION"]="UPDATE_DESCRIPTION";MetadataActionTypeKeys["UPDATE_TITLE"]="UPDATE_TITLE"})(MetadataActionTypeKeys||(exports.MetadataActionTypeKeys=MetadataActionTypeKeys={}));var updateDescription=(0,_reduxActions.createAction)(MetadataActionTypeKeys.UPDATE_DESCRIPTION);exports.updateDescription=updateDescription;var updateTitle=(0,_reduxActions.createAction)(MetadataActionTypeKeys.UPDATE_TITLE);exports.updateTitle=updateTitle},6231:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.panelsReducer=void 0;var _lodash=_interopRequireDefault(__webpack_require__(1));var _actions=__webpack_require__(249);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _objectDestructuringEmpty(obj){if(obj==null)throw new TypeError("Cannot destructure undefined")}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var deletePanel=function deletePanel(panels,panelId){var panelsCopy=_objectSpread({},panels);delete panelsCopy[panelId];return panelsCopy};var updatePanel=function updatePanel(panels,panelState){return _objectSpread({},panels,_defineProperty({},panelState.panelIndex,panelState))};var updatePanels=function updatePanels(panels,updatedPanels){var panelsCopy=_objectSpread({},panels);Object.values(updatedPanels).forEach(function(panel){panelsCopy[panel.panelIndex]=panel});return panelsCopy};var resetPanelTitle=function resetPanelTitle(panels,panelId){return _objectSpread({},panels,_defineProperty({},panelId,_objectSpread({},panels[panelId],{title:undefined})))};var setPanelTitle=function setPanelTitle(panels,payload){return _objectSpread({},panels,_defineProperty({},payload.panelId,_objectSpread({},panels[payload.panelId],{title:payload.title})))};var setPanels=function setPanels(_ref,newPanels){_objectDestructuringEmpty(_ref);return _lodash["default"].cloneDeep(newPanels)};var panelsReducer=function panelsReducer(){var panels=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var action=arguments.length>1?arguments[1]:undefined;switch(action.type){case _actions.PanelActionTypeKeys.DELETE_PANEL:return deletePanel(panels,action.payload);case _actions.PanelActionTypeKeys.UPDATE_PANEL:return updatePanel(panels,action.payload);case _actions.PanelActionTypeKeys.UPDATE_PANELS:return updatePanels(panels,action.payload);case _actions.PanelActionTypeKeys.RESET_PANEL_TITLE:return resetPanelTitle(panels,action.payload);case _actions.PanelActionTypeKeys.SET_PANEL_TITLE:return setPanelTitle(panels,action.payload);case _actions.PanelActionTypeKeys.SET_PANELS:return setPanels(panels,action.payload);default:return panels}};exports.panelsReducer=panelsReducer},6232:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.viewReducer=void 0;var _lodash=__webpack_require__(1);var _actions=__webpack_require__(249);var _dashboard_view_mode=__webpack_require__(139);function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var closeContextMenu=function closeContextMenu(view){return _objectSpread({},view,{visibleContextMenuPanelId:undefined})};var setVisibleContextMenuPanelId=function setVisibleContextMenuPanelId(view,panelId){return _objectSpread({},view,{visibleContextMenuPanelId:panelId})};var updateHidePanelTitles=function updateHidePanelTitles(view,hidePanelTitles){return _objectSpread({},view,{hidePanelTitles:hidePanelTitles})};var minimizePanel=function minimizePanel(view){return _objectSpread({},view,{maximizedPanelId:undefined})};var maximizePanel=function maximizePanel(view,panelId){return _objectSpread({},view,{maximizedPanelId:panelId})};var updateIsFullScreenMode=function updateIsFullScreenMode(view,isFullScreenMode){return _objectSpread({},view,{isFullScreenMode:isFullScreenMode})};var updateTimeRange=function updateTimeRange(view,timeRange){return _objectSpread({},view,{timeRange:timeRange})};var updateRefreshConfig=function updateRefreshConfig(view,refreshConfig){return _objectSpread({},view,{refreshConfig:refreshConfig})};var updateFilters=function updateFilters(view,filters){return _objectSpread({},view,{filters:(0,_lodash.cloneDeep)(filters)})};var updateQuery=function updateQuery(view,query){return _objectSpread({},view,{query:query})};var updateUseMargins=function updateUseMargins(view,useMargins){return _objectSpread({},view,{useMargins:useMargins})};var updateViewMode=function updateViewMode(view,viewMode){return _objectSpread({},view,{viewMode:viewMode})};var viewReducer=function viewReducer(){var view=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{filters:[],hidePanelTitles:false,isFullScreenMode:false,query:{language:"lucene",query:""},timeRange:{to:"now",from:"now-15m"},refreshConfig:{pause:true,value:0},useMargins:true,viewMode:_dashboard_view_mode.DashboardViewMode.VIEW};var action=arguments.length>1?arguments[1]:undefined;switch(action.type){case _actions.ViewActionTypeKeys.MINIMIZE_PANEL:return minimizePanel(view);case _actions.ViewActionTypeKeys.MAXIMIZE_PANEL:return maximizePanel(view,action.payload);case _actions.ViewActionTypeKeys.SET_VISIBLE_CONTEXT_MENU_PANEL_ID:return setVisibleContextMenuPanelId(view,action.payload);case _actions.ViewActionTypeKeys.CLOSE_CONTEXT_MENU:return closeContextMenu(view);case _actions.ViewActionTypeKeys.UPDATE_HIDE_PANEL_TITLES:return updateHidePanelTitles(view,action.payload);case _actions.ViewActionTypeKeys.UPDATE_TIME_RANGE:return updateTimeRange(view,action.payload);case _actions.ViewActionTypeKeys.UPDATE_REFRESH_CONFIG:return updateRefreshConfig(view,action.payload);case _actions.ViewActionTypeKeys.UPDATE_USE_MARGINS:return updateUseMargins(view,action.payload);case _actions.ViewActionTypeKeys.UPDATE_VIEW_MODE:return updateViewMode(view,action.payload);case _actions.ViewActionTypeKeys.UPDATE_IS_FULL_SCREEN_MODE:return updateIsFullScreenMode(view,action.payload);case _actions.ViewActionTypeKeys.UPDATE_FILTERS:return updateFilters(view,action.payload);case _actions.ViewActionTypeKeys.UPDATE_QUERY:return updateQuery(view,action.payload);default:return view}};exports.viewReducer=viewReducer},6233:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.metadataReducer=void 0;var _actions=__webpack_require__(249);function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var updateTitle=function updateTitle(metadata,title){return _objectSpread({},metadata,{title:title})};var updateDescription=function updateDescription(metadata,description){return _objectSpread({},metadata,{description:description})};var metadataReducer=function metadataReducer(){var metadata=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{description:"",title:""};var action=arguments.length>1?arguments[1]:undefined;switch(action.type){case _actions.MetadataActionTypeKeys.UPDATE_TITLE:return updateTitle(metadata,action.payload);case _actions.MetadataActionTypeKeys.UPDATE_DESCRIPTION:return updateDescription(metadata,action.payload);default:return metadata}};exports.metadataReducer=metadataReducer},6234:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DashboardViewportContainer=void 0;var _reactRedux=__webpack_require__(426);var _dashboard_viewport=__webpack_require__(6235);var _actions=__webpack_require__(249);var _selectors=__webpack_require__(425);var mapStateToProps=function mapStateToProps(_ref){var dashboard=_ref.dashboard;var maximizedPanelId=(0,_selectors.getMaximizedPanelId)(dashboard);return{maximizedPanelId:maximizedPanelId,panelCount:Object.keys((0,_selectors.getPanels)(dashboard)).length,description:(0,_selectors.getDescription)(dashboard),title:(0,_selectors.getTitle)(dashboard),useMargins:(0,_selectors.getUseMargins)(dashboard),isFullScreenMode:(0,_selectors.getFullScreenMode)(dashboard)}};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{onExitFullScreenMode:function onExitFullScreenMode(){return dispatch((0,_actions.updateIsFullScreenMode)(false))}}};var DashboardViewportContainer=(0,_reactRedux.connect)(mapStateToProps,mapDispatchToProps)(_dashboard_viewport.DashboardViewport);exports.DashboardViewportContainer=DashboardViewportContainer},6235:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DashboardViewport=DashboardViewport;var _react=_interopRequireDefault(__webpack_require__(0));var _exit_full_screen=__webpack_require__(1345);var _grid=__webpack_require__(6236);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function DashboardViewport(_ref){var maximizedPanelId=_ref.maximizedPanelId,getEmbeddableFactory=_ref.getEmbeddableFactory,panelCount=_ref.panelCount,title=_ref.title,description=_ref.description,useMargins=_ref.useMargins,isFullScreenMode=_ref.isFullScreenMode,onExitFullScreenMode=_ref.onExitFullScreenMode;return _react["default"].createElement("div",{"data-shared-items-count":panelCount,"data-shared-items-container":true,"data-title":title,"data-description":description,className:useMargins?"dshDashboardViewport-withMargins":"dshDashboardViewport"},isFullScreenMode&&_react["default"].createElement(_exit_full_screen.ExitFullScreenButton,{onExitFullScreenMode:onExitFullScreenMode}),_react["default"].createElement(_grid.DashboardGrid,{getEmbeddableFactory:getEmbeddableFactory,maximizedPanelId:maximizedPanelId}))}},6236:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"DashboardGrid",{enumerable:true,get:function get(){return _dashboard_grid_container.DashboardGridContainer}});var _dashboard_grid_container=__webpack_require__(6237)},6237:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DashboardGridContainer=void 0;var _reactRedux=__webpack_require__(426);var _actions=__webpack_require__(249);var _selectors=__webpack_require__(425);var _dashboard_grid=__webpack_require__(6238);var mapStateToProps=function mapStateToProps(_ref){var dashboard=_ref.dashboard;return{panels:(0,_selectors.getPanels)(dashboard),dashboardViewMode:(0,_selectors.getViewMode)(dashboard),useMargins:(0,_selectors.getUseMargins)(dashboard)}};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{onPanelsUpdated:function onPanelsUpdated(updatedPanels){return dispatch((0,_actions.updatePanels)(updatedPanels))}}};var DashboardGridContainer=(0,_reactRedux.connect)(mapStateToProps,mapDispatchToProps)(_dashboard_grid.DashboardGrid);exports.DashboardGridContainer=DashboardGridContainer},6238:function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.DashboardGrid=void 0;var _react=__webpack_require__(10);var _classnames=_interopRequireDefault(__webpack_require__(61));var _lodash=_interopRequireDefault(__webpack_require__(1));var _react2=_interopRequireDefault(__webpack_require__(0));var _reactGridLayout=_interopRequireDefault(__webpack_require__(1346));__webpack_require__(1347);__webpack_require__(1348);var _reactSizeme=_interopRequireDefault(__webpack_require__(1349));var _notify=__webpack_require__(24);var _dashboard_constants=__webpack_require__(261);var _dashboard_view_mode=__webpack_require__(139);var _panel=__webpack_require__(2053);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _objectDestructuringEmpty(obj){if(obj==null)throw new TypeError("Cannot destructure undefined")}var lastValidGridSize=0;function ensureWindowScrollsToBottom(event){var WINDOW_BUFFER=10;if(event.clientY>window.innerHeight-WINDOW_BUFFER){window.scrollTo(0,event.pageY+WINDOW_BUFFER-window.innerHeight)}}function ResponsiveGrid(_ref){var size=_ref.size,isViewMode=_ref.isViewMode,layout=_ref.layout,onLayoutChange=_ref.onLayoutChange,children=_ref.children,maximizedPanelId=_ref.maximizedPanelId,useMargins=_ref.useMargins;lastValidGridSize=size.width>0?size.width:lastValidGridSize;var classes=(0,_classnames["default"])({"dshLayout--viewing":isViewMode,"dshLayout--editing":!isViewMode,"dshLayout-isMaximizedPanel":maximizedPanelId!==undefined,"dshLayout-withoutMargins":!useMargins});var MARGINS=useMargins?8:0;return _react2["default"].createElement(_reactGridLayout["default"],{width:lastValidGridSize,className:classes,isDraggable:true,isResizable:true,useCSSTransforms:false,margin:[MARGINS,MARGINS],cols:_dashboard_constants.DASHBOARD_GRID_COLUMN_COUNT,rowHeight:_dashboard_constants.DASHBOARD_GRID_HEIGHT,draggableHandle:isViewMode?".doesnt-exist":".dshPanel__dragger",layout:layout,onLayoutChange:onLayoutChange,onResize:function onResize(_ref2,_ref3,_ref4,_ref5,event){_objectDestructuringEmpty(_ref2);_objectDestructuringEmpty(_ref3);_objectDestructuringEmpty(_ref4);_objectDestructuringEmpty(_ref5);return ensureWindowScrollsToBottom(event)}},children)}var config={monitorWidth:true};var ResponsiveSizedGrid=(0,_reactSizeme["default"])(config)(ResponsiveGrid);var DashboardGridUi=function(_React$Component){_inherits(DashboardGridUi,_React$Component);function DashboardGridUi(props){var _this;_classCallCheck(this,DashboardGridUi);_this=_possibleConstructorReturn(this,_getPrototypeOf(DashboardGridUi).call(this,props));_defineProperty(_assertThisInitialized(_this),"gridItems",{});_defineProperty(_assertThisInitialized(_this),"embeddableFactoryMap",{});_defineProperty(_assertThisInitialized(_this),"onLayoutChange",function(layout){var _this$props=_this.props,onPanelsUpdated=_this$props.onPanelsUpdated,panels=_this$props.panels;var updatedPanels=layout.reduce(function(updatedPanelsAcc,panelLayout){updatedPanelsAcc[panelLayout.i]=_objectSpread({},panels[panelLayout.i],{panelIndex:panelLayout.i,gridData:_lodash["default"].pick(panelLayout,["x","y","w","h","i"])});return updatedPanelsAcc},{});onPanelsUpdated(updatedPanels)});_defineProperty(_assertThisInitialized(_this),"onPanelFocused",function(focusedPanelIndex){_this.setState({focusedPanelIndex:focusedPanelIndex})});_defineProperty(_assertThisInitialized(_this),"onPanelBlurred",function(blurredPanelIndex){if(_this.state.focusedPanelIndex===blurredPanelIndex){_this.setState({focusedPanelIndex:undefined})}});var isLayoutInvalid=false;var _layout;try{_layout=_this.buildLayoutFromPanels()}catch(error){isLayoutInvalid=true;_notify.toastNotifications.addDanger({title:props.intl.formatMessage({id:"kbn.dashboard.dashboardGrid.unableToLoadDashboardDangerMessage",defaultMessage:"Unable to load dashboard."}),text:error.message});window.location.hash=_dashboard_constants.DashboardConstants.LANDING_PAGE_PATH}_this.state={focusedPanelIndex:undefined,layout:_layout,isLayoutInvalid:isLayoutInvalid};return _this}_createClass(DashboardGridUi,[{key:"buildLayoutFromPanels",value:function buildLayoutFromPanels(){return _lodash["default"].map(this.props.panels,function(panel){return panel.gridData})}},{key:"createEmbeddableFactoriesMap",value:function createEmbeddableFactoriesMap(panels){var _this2=this;Object.values(panels).map(function(panel){if(!_this2.embeddableFactoryMap[panel.type]){_this2.embeddableFactoryMap[panel.type]=_this2.props.getEmbeddableFactory(panel.type)}})}},{key:"componentWillMount",value:function componentWillMount(){this.createEmbeddableFactoriesMap(this.props.panels)}},{key:"componentWillReceiveProps",value:function componentWillReceiveProps(nextProps){this.createEmbeddableFactoriesMap(nextProps.panels)}},{key:"renderDOM",value:function renderDOM(){var _this3=this;var _this$props2=this.props,panels=_this$props2.panels,maximizedPanelId=_this$props2.maximizedPanelId;var focusedPanelIndex=this.state.focusedPanelIndex;var panelsInOrder=Object.keys(panels).map(function(key){return panels[key]});panelsInOrder.sort(function(panelA,panelB){if(panelA.gridData.y===panelB.gridData.y){return panelA.gridData.x-panelB.gridData.x}else{return panelA.gridData.y-panelB.gridData.y}});return _lodash["default"].map(panelsInOrder,function(panel){var expandPanel=maximizedPanelId!==undefined&&maximizedPanelId===panel.panelIndex;var hidePanel=maximizedPanelId!==undefined&&maximizedPanelId!==panel.panelIndex;var classes=(0,_classnames["default"])({"dshDashboardGrid__item--expanded":expandPanel,"dshDashboardGrid__item--hidden":hidePanel});return _react2["default"].createElement("div",{style:{zIndex:focusedPanelIndex===panel.panelIndex?2:"auto"},className:classes,key:panel.panelIndex,ref:function ref(reactGridItem){_this3.gridItems[panel.panelIndex]=reactGridItem}},_react2["default"].createElement(_panel.DashboardPanel,{panelId:panel.panelIndex,embeddableFactory:_this3.embeddableFactoryMap[panel.type],onPanelFocused:_this3.onPanelFocused,onPanelBlurred:_this3.onPanelBlurred}))})}},{key:"render",value:function render(){if(this.state.isLayoutInvalid){return null}var _this$props3=this.props,dashboardViewMode=_this$props3.dashboardViewMode,maximizedPanelId=_this$props3.maximizedPanelId,useMargins=_this$props3.useMargins;var isViewMode=dashboardViewMode===_dashboard_view_mode.DashboardViewMode.VIEW;return _react2["default"].createElement(ResponsiveSizedGrid,{isViewMode:isViewMode,layout:this.buildLayoutFromPanels(),onLayoutChange:this.onLayoutChange,maximizedPanelId:maximizedPanelId,useMargins:useMargins},this.renderDOM())}}]);return DashboardGridUi}(_react2["default"].Component);var DashboardGrid=(0,_react.injectI18n)(DashboardGridUi);exports.DashboardGrid=DashboardGrid},6239:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DashboardPanelContainer=void 0;var _i18n=__webpack_require__(5);var _reactRedux=__webpack_require__(426);var _actions=__webpack_require__(249);var _dashboard_view_mode=__webpack_require__(139);var _selectors=__webpack_require__(425);var _dashboard_panel=__webpack_require__(6240);var mapStateToProps=function mapStateToProps(_ref,_ref2){var dashboard=_ref.dashboard;var embeddableFactory=_ref2.embeddableFactory,panelId=_ref2.panelId;var embeddable=(0,_selectors.getEmbeddable)(dashboard,panelId);var error=null;if(!embeddableFactory){var panelType=(0,_selectors.getPanelType)(dashboard,panelId);error=_i18n.i18n.translate("kbn.dashboard.panel.noFoundEmbeddableFactoryErrorMessage",{defaultMessage:"No embeddable factory found for panel type {panelType}",values:{panelType:panelType}})}else{error=embeddable&&(0,_selectors.getEmbeddableError)(dashboard,panelId)||""}var lastReloadRequestTime=embeddable?embeddable.lastReloadRequestTime:0;var initialized=embeddable?(0,_selectors.getEmbeddableInitialized)(dashboard,panelId):false;return{error:error,viewOnlyMode:(0,_selectors.getFullScreenMode)(dashboard)||(0,_selectors.getViewMode)(dashboard)===_dashboard_view_mode.DashboardViewMode.VIEW,containerState:(0,_selectors.getContainerState)(dashboard,panelId),initialized:initialized,panel:(0,_selectors.getPanel)(dashboard,panelId),lastReloadRequestTime:lastReloadRequestTime}};var mapDispatchToProps=function mapDispatchToProps(dispatch,_ref3){var panelId=_ref3.panelId;return{destroy:function destroy(){return dispatch((0,_actions.deletePanel)(panelId))},embeddableIsInitializing:function embeddableIsInitializing(){return dispatch((0,_actions.embeddableIsInitializing)(panelId))},embeddableIsInitialized:function embeddableIsInitialized(metadata){return dispatch((0,_actions.embeddableIsInitialized)({panelId:panelId,metadata:metadata}))},embeddableStateChanged:function embeddableStateChanged(embeddableState){return dispatch((0,_actions.embeddableStateChanged)({panelId:panelId,embeddableState:embeddableState}))},embeddableError:function embeddableError(errorMessage){return dispatch((0,_actions.embeddableError)({panelId:panelId,error:errorMessage}))}}};var DashboardPanelContainer=(0,_reactRedux.connect)(mapStateToProps,mapDispatchToProps)(_dashboard_panel.DashboardPanel);exports.DashboardPanelContainer=DashboardPanelContainer},6240:function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.DashboardPanel=void 0;var _eui=__webpack_require__(2);var _react=__webpack_require__(10);var _classnames=_interopRequireDefault(__webpack_require__(61));var _lodash=_interopRequireDefault(__webpack_require__(1));var _react2=_interopRequireDefault(__webpack_require__(0));var _panel_error=__webpack_require__(6241);var _panel_header=__webpack_require__(6242);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var DashboardPanelUi=function(_React$Component){_inherits(DashboardPanelUi,_React$Component);function DashboardPanelUi(props){var _this;_classCallCheck(this,DashboardPanelUi);_this=_possibleConstructorReturn(this,_getPrototypeOf(DashboardPanelUi).call(this,props));_defineProperty(_assertThisInitialized(_this),"mounted",void 0);_defineProperty(_assertThisInitialized(_this),"embeddable",void 0);_defineProperty(_assertThisInitialized(_this),"onFocus",function(){var _this$props=_this.props,onPanelFocused=_this$props.onPanelFocused,panel=_this$props.panel;if(onPanelFocused){onPanelFocused(panel.panelIndex)}});_defineProperty(_assertThisInitialized(_this),"onBlur",function(){var _this$props2=_this.props,onPanelBlurred=_this$props2.onPanelBlurred,panel=_this$props2.panel;if(onPanelBlurred){onPanelBlurred(panel.panelIndex)}});_this.state={error:props.embeddableFactory?null:props.intl.formatMessage({id:"kbn.dashboard.panel.noEmbeddableFactoryErrorMessage",defaultMessage:"The feature to render this panel is missing."})};_this.mounted=false;return _this}_createClass(DashboardPanelUi,[{key:"componentDidMount",value:function(){var _componentDidMount=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var _this2=this;var _this$props3,initialized,embeddableFactory,embeddableIsInitializing,panel,embeddableStateChanged,embeddableIsInitialized,embeddableError;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:this.mounted=true;_this$props3=this.props,initialized=_this$props3.initialized,embeddableFactory=_this$props3.embeddableFactory,embeddableIsInitializing=_this$props3.embeddableIsInitializing,panel=_this$props3.panel,embeddableStateChanged=_this$props3.embeddableStateChanged,embeddableIsInitialized=_this$props3.embeddableIsInitialized,embeddableError=_this$props3.embeddableError;if(!initialized){embeddableIsInitializing();embeddableFactory.create(panel,embeddableStateChanged).then(function(embeddable){if(_this2.mounted){_this2.embeddable=embeddable;embeddableIsInitialized(embeddable.metadata);_this2.embeddable.render(_this2.panelElement,_this2.props.containerState)}else{embeddable.destroy()}})["catch"](function(error){if(_this2.mounted){embeddableError(error.message)}})}case 3:case"end":return _context.stop()}}},_callee,this)}));function componentDidMount(){return _componentDidMount.apply(this,arguments)}return componentDidMount}()},{key:"componentWillUnmount",value:function componentWillUnmount(){this.props.destroy();this.mounted=false;if(this.embeddable){this.embeddable.destroy()}}},{key:"renderEmbeddableViewport",value:function renderEmbeddableViewport(){var _this3=this;var classes=(0,_classnames["default"])("panel-content",{"panel-content-isLoading":!this.props.initialized});return _react2["default"].createElement("div",{id:"embeddedPanel",className:classes,ref:function ref(panelElement){return _this3.panelElement=panelElement}},!this.props.initialized&&_react2["default"].createElement(_eui.EuiLoadingChart,{size:"l",mono:true}))}},{key:"shouldComponentUpdate",value:function shouldComponentUpdate(nextProps){if(this.embeddable&&!_lodash["default"].isEqual(nextProps.containerState,this.props.containerState)){this.embeddable.onContainerStateChanged(nextProps.containerState)}if(this.embeddable&&nextProps.lastReloadRequestTime!==this.props.lastReloadRequestTime){this.embeddable.reload()}return nextProps.error!==this.props.error||nextProps.initialized!==this.props.initialized}},{key:"renderEmbeddedError",value:function renderEmbeddedError(){return _react2["default"].createElement(_panel_error.PanelError,{error:this.props.error})}},{key:"renderContent",value:function renderContent(){var error=this.props.error;if(error){return this.renderEmbeddedError()}else{return this.renderEmbeddableViewport()}}},{key:"render",value:function render(){var _this$props4=this.props,viewOnlyMode=_this$props4.viewOnlyMode,panel=_this$props4.panel;var classes=(0,_classnames["default"])("dshPanel",this.props.className,{"dshPanel--editing":!viewOnlyMode});return _react2["default"].createElement(_eui.EuiPanel,{className:classes,"data-test-subj":"dashboardPanel",onFocus:this.onFocus,onBlur:this.onBlur,paddingSize:"none"},_react2["default"].createElement(_panel_header.PanelHeader,{panelId:panel.panelIndex,embeddable:this.embeddable}),this.renderContent())}}]);return DashboardPanelUi}(_react2["default"].Component);var DashboardPanel=(0,_react.injectI18n)(DashboardPanelUi);exports.DashboardPanel=DashboardPanel},6241:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PanelError=PanelError;var _eui=__webpack_require__(2);var _reactMarkdown=_interopRequireDefault(__webpack_require__(1076));var _react=_interopRequireDefault(__webpack_require__(0));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function PanelError(_ref){var error=_ref.error;return _react["default"].createElement("div",{className:"dshPanel__error panel-content"},_react["default"].createElement(_eui.EuiText,{color:"subdued",size:"xs"},_react["default"].createElement(_eui.EuiIcon,{type:"alert",color:"danger"}),_react["default"].createElement(_eui.EuiSpacer,{size:"s"}),typeof error==="string"?_react["default"].createElement(_reactMarkdown["default"],{source:error}):error))}},6242:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"PanelHeader",{enumerable:true,get:function get(){return _panel_header_container.PanelHeaderContainer}});var _panel_header_container=__webpack_require__(6243)},6243:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PanelHeaderContainer=void 0;var _reactRedux=__webpack_require__(426);var _dashboard_view_mode=__webpack_require__(139);var _panel_header=__webpack_require__(6244);var _selectors=__webpack_require__(425);var mapStateToProps=function mapStateToProps(_ref,_ref2){var dashboard=_ref.dashboard;var panelId=_ref2.panelId;var panel=(0,_selectors.getPanel)(dashboard,panelId);var embeddableTitle=(0,_selectors.getEmbeddableTitle)(dashboard,panelId);return{title:panel.title===undefined?embeddableTitle:panel.title,isExpanded:(0,_selectors.getMaximizedPanelId)(dashboard)===panelId,isViewOnlyMode:(0,_selectors.getFullScreenMode)(dashboard)||(0,_selectors.getViewMode)(dashboard)===_dashboard_view_mode.DashboardViewMode.VIEW,hidePanelTitles:(0,_selectors.getHidePanelTitles)(dashboard)}};var PanelHeaderContainer=(0,_reactRedux.connect)(mapStateToProps)(_panel_header.PanelHeader);exports.PanelHeaderContainer=PanelHeaderContainer},6244:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PanelHeader=void 0;var _react=__webpack_require__(10);var _classnames=_interopRequireDefault(__webpack_require__(61));var _react2=_interopRequireDefault(__webpack_require__(0));var _panel_options_menu_container=__webpack_require__(6245);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function PanelHeaderUi(_ref){var title=_ref.title,panelId=_ref.panelId,embeddable=_ref.embeddable,isViewOnlyMode=_ref.isViewOnlyMode,hidePanelTitles=_ref.hidePanelTitles,intl=_ref.intl;var classes=(0,_classnames["default"])("dshPanel__header",{"dshPanel__header--floater":!title||hidePanelTitles});if(isViewOnlyMode&&(!title||hidePanelTitles)){return _react2["default"].createElement("div",{className:classes},_react2["default"].createElement(_panel_options_menu_container.PanelOptionsMenuContainer,{panelId:panelId,embeddable:embeddable}))}return _react2["default"].createElement("div",{className:classes,"data-test-subj":"dashboardPanelHeading-".concat((title||"").replace(/\s/g,""))},_react2["default"].createElement("div",{"data-test-subj":"dashboardPanelTitle",className:"dshPanel__title dshPanel__dragger",title:title,"aria-label":intl.formatMessage({id:"kbn.dashboard.panel.dashboardPanelAriaLabel",defaultMessage:"Dashboard panel: {title}"},{title:title})},hidePanelTitles?"":title),_react2["default"].createElement(_panel_options_menu_container.PanelOptionsMenuContainer,{panelId:panelId,embeddable:embeddable}))}var PanelHeader=(0,_react.injectI18n)(PanelHeaderUi);exports.PanelHeader=PanelHeader},6245:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PanelOptionsMenuContainer=void 0;var _i18n=__webpack_require__(5);var _reactRedux=__webpack_require__(426);var _embeddable=__webpack_require__(180);var _panel_actions_store=__webpack_require__(2054);var _panel_actions=__webpack_require__(6246);var _panel_options_menu=__webpack_require__(6253);var _actions=__webpack_require__(249);var _dashboard_view_mode=__webpack_require__(139);var _selectors=__webpack_require__(425);var mapStateToProps=function mapStateToProps(_ref,_ref2){var dashboard=_ref.dashboard;var panelId=_ref2.panelId;var embeddable=(0,_selectors.getEmbeddable)(dashboard,panelId);var panel=(0,_selectors.getPanel)(dashboard,panelId);var embeddableTitle=(0,_selectors.getEmbeddableTitle)(dashboard,panelId);var containerState=(0,_selectors.getContainerState)(dashboard,panelId);var visibleContextMenuPanelId=(0,_selectors.getVisibleContextMenuPanelId)(dashboard);var viewMode=(0,_selectors.getViewMode)(dashboard);return{panelTitle:panel.title===undefined?embeddableTitle:panel.title,editUrl:embeddable?(0,_selectors.getEmbeddableEditUrl)(dashboard,panelId):null,isExpanded:(0,_selectors.getMaximizedPanelId)(dashboard)===panelId,containerState:containerState,visibleContextMenuPanelId:visibleContextMenuPanelId,isViewMode:viewMode===_dashboard_view_mode.DashboardViewMode.VIEW}};var mapDispatchToProps=function mapDispatchToProps(dispatch,_ref3){var panelId=_ref3.panelId;return{onDeletePanel:function onDeletePanel(){dispatch((0,_actions.deletePanel)(panelId))},onCloseContextMenu:function onCloseContextMenu(){return dispatch((0,_actions.closeContextMenu)())},openContextMenu:function openContextMenu(){return dispatch((0,_actions.setVisibleContextMenuPanelId)(panelId))},onMaximizePanel:function onMaximizePanel(){return dispatch((0,_actions.maximizePanel)(panelId))},onMinimizePanel:function onMinimizePanel(){return dispatch((0,_actions.minimizePanel)())},onResetPanelTitle:function onResetPanelTitle(){return dispatch((0,_actions.resetPanelTitle)(panelId))},onUpdatePanelTitle:function onUpdatePanelTitle(newTitle){return dispatch((0,_actions.setPanelTitle)({title:newTitle,panelId:panelId}))}}};var mergeProps=function mergeProps(stateProps,dispatchProps,ownProps){var isExpanded=stateProps.isExpanded,panelTitle=stateProps.panelTitle,containerState=stateProps.containerState,visibleContextMenuPanelId=stateProps.visibleContextMenuPanelId,isViewMode=stateProps.isViewMode;var isPopoverOpen=visibleContextMenuPanelId===ownProps.panelId;var onMaximizePanel=dispatchProps.onMaximizePanel,onMinimizePanel=dispatchProps.onMinimizePanel,onDeletePanel=dispatchProps.onDeletePanel,onResetPanelTitle=dispatchProps.onResetPanelTitle,onUpdatePanelTitle=dispatchProps.onUpdatePanelTitle,onCloseContextMenu=dispatchProps.onCloseContextMenu,openContextMenu=dispatchProps.openContextMenu;var toggleContextMenu=function toggleContextMenu(){return isPopoverOpen?onCloseContextMenu():openContextMenu()};var closeMyContextMenuPanel=function closeMyContextMenuPanel(){if(isPopoverOpen){onCloseContextMenu()}};var toggleExpandedPanel=function toggleExpandedPanel(){isExpanded?onMinimizePanel():onMaximizePanel();closeMyContextMenuPanel()};var panels=[];if(isPopoverOpen){var contextMenuPanel=new _embeddable.ContextMenuPanel({title:_i18n.i18n.translate("kbn.dashboard.panel.optionsMenu.optionsContextMenuTitle",{defaultMessage:"Options"}),id:"mainMenu"});var actions=[(0,_panel_actions.getInspectorPanelAction)({closeContextMenu:closeMyContextMenuPanel,panelTitle:panelTitle}),(0,_panel_actions.getEditPanelAction)(),(0,_panel_actions.getCustomizePanelAction)({onResetPanelTitle:onResetPanelTitle,onUpdatePanelTitle:onUpdatePanelTitle,title:panelTitle,closeContextMenu:closeMyContextMenuPanel}),(0,_panel_actions.getToggleExpandPanelAction)({isExpanded:isExpanded,toggleExpandedPanel:toggleExpandedPanel}),(0,_panel_actions.getRemovePanelAction)(onDeletePanel)].concat(_panel_actions_store.panelActionsStore.actions);panels=(0,_embeddable.buildEuiContextMenuPanels)({contextMenuPanel:contextMenuPanel,actions:actions,embeddable:ownProps.embeddable,containerState:containerState})}return{panels:panels,toggleContextMenu:toggleContextMenu,closeContextMenu:closeMyContextMenuPanel,isPopoverOpen:isPopoverOpen,isViewMode:isViewMode}};var PanelOptionsMenuContainer=(0,_reactRedux.connect)(mapStateToProps,mapDispatchToProps,mergeProps)(_panel_options_menu.PanelOptionsMenu);exports.PanelOptionsMenuContainer=PanelOptionsMenuContainer},6246:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"getEditPanelAction",{enumerable:true,get:function get(){return _get_edit_panel_action.getEditPanelAction}});Object.defineProperty(exports,"getRemovePanelAction",{enumerable:true,get:function get(){return _get_remove_panel_action.getRemovePanelAction}});Object.defineProperty(exports,"getCustomizePanelAction",{enumerable:true,get:function get(){return _get_customize_panel_action.getCustomizePanelAction}});Object.defineProperty(exports,"getToggleExpandPanelAction",{enumerable:true,get:function get(){return _get_toggle_expand_panel_action.getToggleExpandPanelAction}});Object.defineProperty(exports,"getInspectorPanelAction",{enumerable:true,get:function get(){return _get_inspector_panel_action.getInspectorPanelAction}});var _get_edit_panel_action=__webpack_require__(6247);var _get_remove_panel_action=__webpack_require__(6248);var _get_customize_panel_action=__webpack_require__(6249);var _get_toggle_expand_panel_action=__webpack_require__(6251);var _get_inspector_panel_action=__webpack_require__(6252)},6247:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getEditPanelAction=getEditPanelAction;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(2);var _i18n=__webpack_require__(5);var _embeddable=__webpack_require__(180);var _dashboard_view_mode=__webpack_require__(139);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getEditPanelAction(){return new _embeddable.ContextMenuAction({id:"editPanel",parentPanelId:"mainMenu"},{icon:_react["default"].createElement(_eui.EuiIcon,{type:"pencil"}),isDisabled:function isDisabled(_ref){var embeddable=_ref.embeddable;return!embeddable||!embeddable.metadata||!embeddable.metadata.editUrl},isVisible:function isVisible(_ref2){var containerState=_ref2.containerState,embeddable=_ref2.embeddable;var canEditEmbeddable=Boolean(embeddable&&embeddable.metadata&&embeddable.metadata.editable);var inDashboardEditMode=containerState.viewMode===_dashboard_view_mode.DashboardViewMode.EDIT;return canEditEmbeddable&&inDashboardEditMode},getHref:function getHref(_ref3){var embeddable=_ref3.embeddable;if(embeddable&&embeddable.metadata.editUrl){return embeddable.metadata.editUrl}},getDisplayName:function getDisplayName(_ref4){var embeddable=_ref4.embeddable;if(embeddable&&embeddable.metadata.editLabel){return embeddable.metadata.editLabel}return _i18n.i18n.translate("kbn.dashboard.panel.editPanel.defaultDisplayName",{defaultMessage:"Edit"})}})}},6248:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getRemovePanelAction=getRemovePanelAction;var _eui=__webpack_require__(2);var _i18n=__webpack_require__(5);var _react=_interopRequireDefault(__webpack_require__(0));var _embeddable=__webpack_require__(180);var _dashboard_view_mode=__webpack_require__(139);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getRemovePanelAction(onDeletePanel){return new _embeddable.ContextMenuAction({id:"deletePanel",parentPanelId:"mainMenu"},{getDisplayName:function getDisplayName(){return _i18n.i18n.translate("kbn.dashboard.panel.removePanel.displayName",{defaultMessage:"Delete from dashboard"})},icon:_react["default"].createElement(_eui.EuiIcon,{type:"trash"}),isVisible:function isVisible(_ref){var containerState=_ref.containerState;return containerState.viewMode===_dashboard_view_mode.DashboardViewMode.EDIT&&!containerState.isPanelExpanded},onClick:onDeletePanel})}},6249:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getCustomizePanelAction=getCustomizePanelAction;var _eui=__webpack_require__(2);var _i18n=__webpack_require__(5);var _react=_interopRequireDefault(__webpack_require__(0));var _embeddable=__webpack_require__(180);var _dashboard_view_mode=__webpack_require__(139);var _panel_options_menu_form=__webpack_require__(6250);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getCustomizePanelAction(_ref){var onResetPanelTitle=_ref.onResetPanelTitle,onUpdatePanelTitle=_ref.onUpdatePanelTitle,closeContextMenu=_ref.closeContextMenu,title=_ref.title;return new _embeddable.ContextMenuAction({id:"customizePanel",parentPanelId:"mainMenu"},{childContextMenuPanel:new _embeddable.ContextMenuPanel({id:"panelSubOptionsMenu",title:_i18n.i18n.translate("kbn.dashboard.panel.customizePanelTitle",{defaultMessage:"Customize panel"})},{getContent:function getContent(){return _react["default"].createElement(_panel_options_menu_form.PanelOptionsMenuForm,{onReset:onResetPanelTitle,onUpdatePanelTitle:onUpdatePanelTitle,title:title,onClose:closeContextMenu})}}),icon:_react["default"].createElement(_eui.EuiIcon,{type:"pencil"}),isVisible:function isVisible(_ref2){var containerState=_ref2.containerState;return containerState.viewMode===_dashboard_view_mode.DashboardViewMode.EDIT},getDisplayName:function getDisplayName(){return _i18n.i18n.translate("kbn.dashboard.panel.customizePanel.displayName",{defaultMessage:"Customize panel"})}})}},6250:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PanelOptionsMenuForm=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(2);var _react2=__webpack_require__(10);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function PanelOptionsMenuFormUi(_ref){var title=_ref.title,onReset=_ref.onReset,onUpdatePanelTitle=_ref.onUpdatePanelTitle,onClose=_ref.onClose,intl=_ref.intl;function onInputChange(event){onUpdatePanelTitle(event.target.value)}function onKeyDown(event){if(event.keyCode===_eui.keyCodes.ENTER){onClose()}}return _react["default"].createElement("div",{className:"dshPanel__optionsMenuForm","data-test-subj":"dashboardPanelTitleInputMenuItem"},_react["default"].createElement(_eui.EuiFormRow,{label:intl.formatMessage({id:"kbn.dashboard.panel.optionsMenuForm.panelTitleFormRowLabel",defaultMessage:"Panel title"})},_react["default"].createElement(_eui.EuiFieldText,{id:"panelTitleInput","data-test-subj":"customDashboardPanelTitleInput",name:"min",type:"text",value:title,onChange:onInputChange,onKeyDown:onKeyDown,"aria-label":intl.formatMessage({id:"kbn.dashboard.panel.optionsMenuForm.panelTitleInputAriaLabel",defaultMessage:"Changes to this input are applied immediately. Press enter to exit."})})),_react["default"].createElement(_eui.EuiButtonEmpty,{"data-test-subj":"resetCustomDashboardPanelTitle",onClick:onReset},_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.dashboard.panel.optionsMenuForm.resetCustomDashboardButtonLabel",defaultMessage:"Reset title"})))}var PanelOptionsMenuForm=(0,_react2.injectI18n)(PanelOptionsMenuFormUi);exports.PanelOptionsMenuForm=PanelOptionsMenuForm},6251:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getToggleExpandPanelAction=getToggleExpandPanelAction;var _eui=__webpack_require__(2);var _i18n=__webpack_require__(5);var _react=_interopRequireDefault(__webpack_require__(0));var _embeddable=__webpack_require__(180);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getToggleExpandPanelAction(_ref){var isExpanded=_ref.isExpanded,toggleExpandedPanel=_ref.toggleExpandedPanel;return new _embeddable.ContextMenuAction({id:"togglePanel",parentPanelId:"mainMenu"},{getDisplayName:function getDisplayName(){return isExpanded?_i18n.i18n.translate("kbn.dashboard.panel.toggleExpandPanel.expandedDisplayName",{defaultMessage:"Minimize"}):_i18n.i18n.translate("kbn.dashboard.panel.toggleExpandPanel.notExpandedDisplayName",{defaultMessage:"Full screen"})},icon:_react["default"].createElement(_eui.EuiIcon,{type:isExpanded?"expand":"expand"}),onClick:toggleExpandedPanel})}},6252:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getInspectorPanelAction=getInspectorPanelAction;var _eui=__webpack_require__(2);var _i18n=__webpack_require__(5);var _react=_interopRequireDefault(__webpack_require__(0));var _embeddable=__webpack_require__(180);var _inspector=__webpack_require__(310);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getInspectorPanelAction(_ref){var closeContextMenu=_ref.closeContextMenu,panelTitle=_ref.panelTitle;return new _embeddable.ContextMenuAction({id:"openInspector",parentPanelId:"mainMenu"},{getDisplayName:function getDisplayName(){return _i18n.i18n.translate("kbn.dashboard.panel.inspectorPanel.displayName",{defaultMessage:"Inspect"})},icon:_react["default"].createElement(_eui.EuiIcon,{type:"inspect"}),isVisible:function isVisible(_ref2){var embeddable=_ref2.embeddable;if(!embeddable){return false}return _inspector.Inspector.isAvailable(embeddable.getInspectorAdapters())},onClick:function onClick(_ref3){var embeddable=_ref3.embeddable;if(!embeddable){return}closeContextMenu();var adapters=embeddable.getInspectorAdapters();if(!adapters){return}var session=_inspector.Inspector.open(adapters,{title:panelTitle});var originalDestroy=embeddable.destroy;embeddable.destroy=function(){session.close();if(originalDestroy){originalDestroy.call(embeddable)}};session.onClose["finally"](function(){embeddable.destroy=originalDestroy})}})}},6253:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PanelOptionsMenu=void 0;var _react=__webpack_require__(10);var _react2=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function PanelOptionsMenuUi(_ref){var toggleContextMenu=_ref.toggleContextMenu,isPopoverOpen=_ref.isPopoverOpen,closeContextMenu=_ref.closeContextMenu,panels=_ref.panels,isViewMode=_ref.isViewMode,intl=_ref.intl;var button=_react2["default"].createElement(_eui.EuiButtonIcon,{iconType:isViewMode?"boxesHorizontal":"gear",color:"text",className:"dshPanel_optionsMenuButton","aria-label":intl.formatMessage({id:"kbn.dashboard.panel.optionsMenu.panelOptionsButtonAriaLabel",defaultMessage:"Panel options"}),"data-test-subj":"dashboardPanelToggleMenuIcon",onClick:toggleContextMenu});return _react2["default"].createElement(_eui.EuiPopover,{id:"dashboardPanelContextMenu",className:"dshPanel_optionsMenuPopover",button:button,isOpen:isPopoverOpen,closePopover:closeContextMenu,panelPaddingSize:"none",anchorPosition:"downRight","data-test-subj":isPopoverOpen?"dashboardPanelContextMenuOpen":"dashboardPanelContextMenuClosed",withTitle:true},_react2["default"].createElement(_eui.EuiContextMenu,{initialPanelId:"mainMenu",panels:panels}))}var PanelOptionsMenu=(0,_react.injectI18n)(PanelOptionsMenuUi);exports.PanelOptionsMenu=PanelOptionsMenu},6254:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createPanelState=createPanelState;var _chrome=_interopRequireDefault(__webpack_require__(19));var _dashboard_constants=__webpack_require__(261);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function findTopLeftMostOpenSpace(width,height,currentPanels){var maxY=-1;currentPanels.forEach(function(panel){maxY=Math.max(panel.gridData.y+panel.gridData.h,maxY)});if(maxY<0){return{x:0,y:0}}var grid=new Array(maxY);for(var y=0;y<maxY;y++){grid[y]=new Array(_dashboard_constants.DASHBOARD_GRID_COLUMN_COUNT).fill(0)}currentPanels.forEach(function(panel){for(var x=panel.gridData.x;x<panel.gridData.x+panel.gridData.w;x++){for(var _y=panel.gridData.y;_y<panel.gridData.y+panel.gridData.h;_y++){var row=grid[_y];if(row===undefined){throw new Error("Attempted to access a row that doesn't exist at ".concat(_y," for panel ").concat(JSON.stringify(panel)))}grid[_y][x]=1}}});for(var _y2=0;_y2<maxY;_y2++){for(var x=0;x<_dashboard_constants.DASHBOARD_GRID_COLUMN_COUNT;x++){if(grid[_y2][x]===1){continue}else{for(var h=_y2;h<Math.min(_y2+height,maxY);h++){for(var w=x;w<Math.min(x+width,_dashboard_constants.DASHBOARD_GRID_COLUMN_COUNT);w++){var spaceIsEmpty=grid[h][w]===0;var fitsPanelWidth=w===x+width-1;var fitsPanelHeight=h===Math.min(_y2+height-1,maxY-1);if(spaceIsEmpty&&fitsPanelWidth&&fitsPanelHeight){return{x:x,y:_y2}}else if(grid[h][w]===1){break}}}}}}return{x:0,y:maxY}}function createPanelState(id,type,panelIndex,currentPanels){var _findTopLeftMostOpenS=findTopLeftMostOpenSpace(_dashboard_constants.DEFAULT_PANEL_WIDTH,_dashboard_constants.DEFAULT_PANEL_HEIGHT,currentPanels),x=_findTopLeftMostOpenS.x,y=_findTopLeftMostOpenS.y;return{gridData:{w:_dashboard_constants.DEFAULT_PANEL_WIDTH,h:_dashboard_constants.DEFAULT_PANEL_HEIGHT,x:x,y:y,i:panelIndex.toString()},version:_chrome["default"].getKibanaVersion(),panelIndex:panelIndex.toString(),type:type,id:id,embeddableConfig:{}}}},6255:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DashboardAppController=void 0;var _lodash=_interopRequireDefault(__webpack_require__(1));var _i18n=__webpack_require__(5);var _react=_interopRequireDefault(__webpack_require__(0));var _angular=_interopRequireDefault(__webpack_require__(31));var _chrome=_interopRequireDefault(__webpack_require__(19));var _notify=__webpack_require__(24);var _confirm_modal=__webpack_require__(1366);var _query_filter=__webpack_require__(188);var _doc_title=__webpack_require__(2021);var _show_saved_object_save_modal=__webpack_require__(1031);var _share=__webpack_require__(1030);var _migrate_legacy_query=__webpack_require__(669);var _embeddable_factories_registry=__webpack_require__(671);var _embeddable=__webpack_require__(180);var _vis_types=__webpack_require__(85);var _timefilter=__webpack_require__(74);var _get_unhashable_states_provider=__webpack_require__(1088);var _wizard=__webpack_require__(6256);var _show_options_popover=__webpack_require__(6258);var _show_add_panel=__webpack_require__(6260);var _save_modal=__webpack_require__(6262);var _show_clone_modal=__webpack_require__(6263);var _lib=__webpack_require__(2055);var _dashboard_state_manager=__webpack_require__(6270);var _dashboard_constants=__webpack_require__(261);var _get_top_nav_config=__webpack_require__(6272);var _top_nav_ids=__webpack_require__(2058);var _dashboard_view_mode=__webpack_require__(139);var _dashboard_strings=__webpack_require__(6273);var _panel_actions_store=__webpack_require__(2054);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var DashboardAppController=function DashboardAppController(_ref){var _this=this;var $scope=_ref.$scope,$rootScope=_ref.$rootScope,$route=_ref.$route,$routeParams=_ref.$routeParams,getAppState=_ref.getAppState,dashboardConfig=_ref.dashboardConfig,localStorage=_ref.localStorage,Private=_ref.Private,kbnUrl=_ref.kbnUrl,AppStateClass=_ref.AppStateClass,indexPatterns=_ref.indexPatterns,config=_ref.config,confirmModal=_ref.confirmModal,addFilter=_ref.addFilter,courier=_ref.courier;_classCallCheck(this,DashboardAppController);_defineProperty(this,"appStatus",void 0);var queryFilter=Private(_query_filter.FilterBarQueryFilterProvider);var embeddableFactories=Private(_embeddable_factories_registry.EmbeddableFactoriesRegistryProvider);var panelActionsRegistry=Private(_embeddable.ContextMenuActionsRegistryProvider);var getUnhashableStates=Private(_get_unhashable_states_provider.getUnhashableStatesProvider);var shareContextMenuExtensions=Private(_share.ShareContextMenuExtensionsRegistryProvider);_panel_actions_store.panelActionsStore.initializeFromRegistry(panelActionsRegistry);var visTypes=Private(_vis_types.VisTypesRegistryProvider);$scope.getEmbeddableFactory=function(panelType){return embeddableFactories.byName[panelType]};var dash=$scope.dash=$route.current.locals.dash;if(dash.id){_doc_title.docTitle.change(dash.title)}var dashboardStateManager=new _dashboard_state_manager.DashboardStateManager({savedDashboard:dash,AppStateClass:AppStateClass,hideWriteControls:dashboardConfig.getHideWriteControls(),addFilter:addFilter});$scope.getDashboardState=function(){return dashboardStateManager};$scope.appState=dashboardStateManager.getAppState();if(dashboardStateManager.getIsTimeSavedWithDashboard()&&!getAppState.previouslyStored()){dashboardStateManager.syncTimefilterWithDashboard(_timefilter.timefilter)}var updateState=function updateState(){$scope.model={query:dashboardStateManager.getQuery(),filters:queryFilter.getFilters(),timeRestore:dashboardStateManager.getTimeRestore(),title:dashboardStateManager.getTitle(),description:dashboardStateManager.getDescription(),timeRange:_timefilter.timefilter.getTime(),refreshInterval:_timefilter.timefilter.getRefreshInterval()};$scope.panels=dashboardStateManager.getPanels();$scope.screenTitle=dashboardStateManager.getTitle();var panelIndexPatterns=dashboardStateManager.getPanelIndexPatterns();if(panelIndexPatterns&&panelIndexPatterns.length>0){$scope.indexPatterns=panelIndexPatterns}else{indexPatterns.getDefault().then(function(defaultIndexPattern){$scope.$evalAsync(function(){$scope.indexPatterns=[defaultIndexPattern]})})}};this.appStatus={dirty:!dash.id};dashboardStateManager.registerChangeListener(function(status){_this.appStatus.dirty=status.dirty||!dash.id;updateState()});dashboardStateManager.applyFilters(dashboardStateManager.getQuery()||{query:"",language:localStorage.get("kibana.userQueryLanguage")||config.get("search:queryLanguage")},queryFilter.getFilters());_timefilter.timefilter.disableTimeRangeSelector();_timefilter.timefilter.disableAutoRefreshSelector();updateState();$scope.refresh=function(){$rootScope.$broadcast("fetch");courier.fetch()};dashboardStateManager.handleTimeChange(_timefilter.timefilter.getTime());dashboardStateManager.handleRefreshConfigChange(_timefilter.timefilter.getRefreshInterval());var landingPageUrl=function landingPageUrl(){return"#".concat(_dashboard_constants.DashboardConstants.LANDING_PAGE_PATH)};var getDashTitle=function getDashTitle(){return(0,_dashboard_strings.getDashboardTitle)(dashboardStateManager.getTitle(),dashboardStateManager.getViewMode(),dashboardStateManager.getIsDirty(_timefilter.timefilter))};var updateBreadcrumbs=function updateBreadcrumbs(){_chrome["default"].breadcrumbs.set([{text:_i18n.i18n.translate("kbn.dashboard.dashboardAppBreadcrumbsTitle",{defaultMessage:"Dashboard"}),href:landingPageUrl()},{text:getDashTitle()}])};updateBreadcrumbs();dashboardStateManager.registerChangeListener(updateBreadcrumbs);$scope.getShouldShowEditHelp=function(){return!dashboardStateManager.getPanels().length&&dashboardStateManager.getIsEditMode()&&!dashboardConfig.getHideWriteControls()};$scope.getShouldShowViewHelp=function(){return!dashboardStateManager.getPanels().length&&dashboardStateManager.getIsViewMode()&&!dashboardConfig.getHideWriteControls()};$scope.updateQueryAndFetch=function(_ref2){var query=_ref2.query,dateRange=_ref2.dateRange;if(dateRange){_timefilter.timefilter.setTime(dateRange)}var oldQuery=$scope.model.query;if(_lodash["default"].isEqual(oldQuery,query)){dashboardStateManager.requestReload()}else{$scope.model.query=query;dashboardStateManager.applyFilters($scope.model.query,$scope.model.filters)}$scope.refresh()};$scope.onRefreshChange=function(_ref3){var isPaused=_ref3.isPaused,refreshInterval=_ref3.refreshInterval;_timefilter.timefilter.setRefreshInterval({pause:isPaused,value:refreshInterval?refreshInterval:$scope.model.refreshInterval.value})};$scope.onFiltersUpdated=function(filters){queryFilter.setFilters(filters)};$scope.onCancelApplyFilters=function(){$scope.appState.$newFilters=[]};$scope.onApplyFilters=function(filters){queryFilter.addFiltersAndChangeTimeFilter(filters);$scope.appState.$newFilters=[]};$scope.$watch("appState.$newFilters",function(){var filters=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];if(filters.length===1){$scope.onApplyFilters(filters)}});$scope.indexPatterns=[];$scope.$watch("model.query",function(newQuery){var query=(0,_migrate_legacy_query.migrateLegacyQuery)(newQuery);$scope.updateQueryAndFetch({query:query})});$scope.$listenAndDigestAsync(_timefilter.timefilter,"fetch",function(){dashboardStateManager.handleTimeChange(_timefilter.timefilter.getTime());$scope.refresh()});$scope.$listenAndDigestAsync(_timefilter.timefilter,"refreshIntervalUpdate",function(){dashboardStateManager.handleRefreshConfigChange(_timefilter.timefilter.getRefreshInterval());updateState()});$scope.$listenAndDigestAsync(_timefilter.timefilter,"timeUpdate",updateState);function updateViewMode(newMode){$scope.topNavMenu=(0,_get_top_nav_config.getTopNavConfig)(newMode,navActions,dashboardConfig.getHideWriteControls());dashboardStateManager.switchViewMode(newMode)}var onChangeViewMode=function onChangeViewMode(newMode){var isPageRefresh=newMode===dashboardStateManager.getViewMode();var isLeavingEditMode=!isPageRefresh&&newMode===_dashboard_view_mode.DashboardViewMode.VIEW;var willLoseChanges=isLeavingEditMode&&dashboardStateManager.getIsDirty(_timefilter.timefilter);if(!willLoseChanges){updateViewMode(newMode);return}function revertChangesAndExitEditMode(){dashboardStateManager.resetState();kbnUrl.change(dash.id?(0,_dashboard_constants.createDashboardEditUrl)(dash.id):_dashboard_constants.DashboardConstants.CREATE_NEW_DASHBOARD_URL);updateViewMode(_dashboard_view_mode.DashboardViewMode.VIEW);if(dashboardStateManager.getIsTimeSavedWithDashboard()){dashboardStateManager.syncTimefilterWithDashboard(_timefilter.timefilter)}}confirmModal(_i18n.i18n.translate("kbn.dashboard.changeViewModeConfirmModal.discardChangesDescription",{defaultMessage:"Once you discard your changes, there's no getting them back."}),{onConfirm:revertChangesAndExitEditMode,onCancel:_lodash["default"].noop,confirmButtonText:_i18n.i18n.translate("kbn.dashboard.changeViewModeConfirmModal.confirmButtonLabel",{defaultMessage:"Discard changes"}),cancelButtonText:_i18n.i18n.translate("kbn.dashboard.changeViewModeConfirmModal.cancelButtonLabel",{defaultMessage:"Continue editing"}),defaultFocusedButton:_confirm_modal.ConfirmationButtonTypes.CANCEL,title:_i18n.i18n.translate("kbn.dashboard.changeViewModeConfirmModal.discardChangesTitle",{defaultMessage:"Discard changes to dashboard?"})})};function save(saveOptions){return(0,_lib.saveDashboard)(_angular["default"].toJson,_timefilter.timefilter,dashboardStateManager,saveOptions).then(function(id){if(id){_notify.toastNotifications.addSuccess({title:_i18n.i18n.translate("kbn.dashboard.dashboardWasSavedSuccessMessage",{defaultMessage:"Dashboard '{dashTitle}' was saved",values:{dashTitle:dash.title}}),"data-test-subj":"saveDashboardSuccess"});if(dash.id!==$routeParams.id){kbnUrl.change((0,_dashboard_constants.createDashboardEditUrl)(dash.id))}else{_doc_title.docTitle.change(dash.lastSavedTitle);updateViewMode(_dashboard_view_mode.DashboardViewMode.VIEW)}}return{id:id}})["catch"](function(error){_notify.toastNotifications.addDanger({title:_i18n.i18n.translate("kbn.dashboard.dashboardWasNotSavedDangerMessage",{defaultMessage:"Dashboard '{dashTitle}' was not saved. Error: {errorMessage}",values:{dashTitle:dash.title,errorMessage:error.message}}),"data-test-subj":"saveDashboardFailure"});return{error:error}})}$scope.showFilterBar=function(){return $scope.model.filters.length>0||!dashboardStateManager.getFullScreenMode()};$scope.showAddPanel=function(){dashboardStateManager.setFullScreenMode(false);$scope.kbnTopNav.click(_top_nav_ids.TopNavIds.ADD)};$scope.enterEditMode=function(){dashboardStateManager.setFullScreenMode(false);$scope.kbnTopNav.click("edit")};var navActions={};navActions[_top_nav_ids.TopNavIds.FULL_SCREEN]=function(){return dashboardStateManager.setFullScreenMode(true)};navActions[_top_nav_ids.TopNavIds.EXIT_EDIT_MODE]=function(){return onChangeViewMode(_dashboard_view_mode.DashboardViewMode.VIEW)};navActions[_top_nav_ids.TopNavIds.ENTER_EDIT_MODE]=function(){return onChangeViewMode(_dashboard_view_mode.DashboardViewMode.EDIT)};navActions[_top_nav_ids.TopNavIds.SAVE]=function(){var currentTitle=dashboardStateManager.getTitle();var currentDescription=dashboardStateManager.getDescription();var currentTimeRestore=dashboardStateManager.getTimeRestore();var onSave=function onSave(_ref4){var newTitle=_ref4.newTitle,newDescription=_ref4.newDescription,newCopyOnSave=_ref4.newCopyOnSave,newTimeRestore=_ref4.newTimeRestore,isTitleDuplicateConfirmed=_ref4.isTitleDuplicateConfirmed,onTitleDuplicate=_ref4.onTitleDuplicate;dashboardStateManager.setTitle(newTitle);dashboardStateManager.setDescription(newDescription);dashboardStateManager.savedDashboard.copyOnSave=newCopyOnSave;dashboardStateManager.setTimeRestore(newTimeRestore);var saveOptions={confirmOverwrite:false,isTitleDuplicateConfirmed:isTitleDuplicateConfirmed,onTitleDuplicate:onTitleDuplicate};return save(saveOptions).then(function(response){if(!response.id){dashboardStateManager.setTitle(currentTitle);dashboardStateManager.setDescription(currentDescription);dashboardStateManager.setTimeRestore(currentTimeRestore)}return response})};var dashboardSaveModal=_react["default"].createElement(_save_modal.DashboardSaveModal,{onSave:onSave,onClose:function onClose(){},title:currentTitle,description:currentDescription,timeRestore:currentTimeRestore,showCopyOnSave:dash.id?true:false});(0,_show_saved_object_save_modal.showSaveModal)(dashboardSaveModal)};navActions[_top_nav_ids.TopNavIds.CLONE]=function(){var currentTitle=dashboardStateManager.getTitle();var onClone=function onClone(newTitle,isTitleDuplicateConfirmed,onTitleDuplicate){dashboardStateManager.savedDashboard.copyOnSave=true;dashboardStateManager.setTitle(newTitle);var saveOptions={confirmOverwrite:false,isTitleDuplicateConfirmed:isTitleDuplicateConfirmed,onTitleDuplicate:onTitleDuplicate};return save(saveOptions).then(function(response){if(response.error){dashboardStateManager.setTitle(currentTitle)}return response})};(0,_show_clone_modal.showCloneModal)(onClone,currentTitle)};navActions[_top_nav_ids.TopNavIds.ADD]=function(){var addNewVis=function addNewVis(){(0,_wizard.showNewVisModal)(visTypes,{editorParams:[_dashboard_constants.DashboardConstants.ADD_VISUALIZATION_TO_DASHBOARD_MODE_PARAM]})};(0,_show_add_panel.showAddPanel)(dashboardStateManager.addNewPanel,addNewVis,embeddableFactories)};navActions[_top_nav_ids.TopNavIds.OPTIONS]=function(menuItem,navController,anchorElement){(0,_show_options_popover.showOptionsPopover)({anchorElement:anchorElement,useMargins:dashboardStateManager.getUseMargins(),onUseMarginsChange:function onUseMarginsChange(isChecked){dashboardStateManager.setUseMargins(isChecked)},hidePanelTitles:dashboardStateManager.getHidePanelTitles(),onHidePanelTitlesChange:function onHidePanelTitlesChange(isChecked){dashboardStateManager.setHidePanelTitles(isChecked)}})};navActions[_top_nav_ids.TopNavIds.SHARE]=function(menuItem,navController,anchorElement){(0,_share.showShareContextMenu)({anchorElement:anchorElement,allowEmbed:true,allowShortUrl:!dashboardConfig.getHideWriteControls(),getUnhashableStates:getUnhashableStates,objectId:dash.id,objectType:"dashboard",shareContextMenuExtensions:shareContextMenuExtensions.raw,sharingData:{title:dash.title},isDirty:dashboardStateManager.getIsDirty()})};updateViewMode(dashboardStateManager.getViewMode());var updateSubscription=queryFilter.getUpdates$().subscribe({next:function next(){$scope.model.filters=queryFilter.getFilters();dashboardStateManager.applyFilters($scope.model.query,$scope.model.filters)}});var fetchSubscription=queryFilter.getFetches$().subscribe($scope.refresh);$scope.$on("$destroy",function(){updateSubscription.unsubscribe();fetchSubscription.unsubscribe();dashboardStateManager.destroy()});if($route.current.params&&$route.current.params[_dashboard_constants.DashboardConstants.NEW_VISUALIZATION_ID_PARAM]){dashboardStateManager.addNewPanel($route.current.params[_dashboard_constants.DashboardConstants.NEW_VISUALIZATION_ID_PARAM],"visualization");kbnUrl.removeParam(_dashboard_constants.DashboardConstants.ADD_VISUALIZATION_TO_DASHBOARD_MODE_PARAM);kbnUrl.removeParam(_dashboard_constants.DashboardConstants.NEW_VISUALIZATION_ID_PARAM)}};exports.DashboardAppController=DashboardAppController},6256:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"NewVisModal",{enumerable:true,get:function get(){return _new_vis_modal.NewVisModal}});Object.defineProperty(exports,"showNewVisModal",{enumerable:true,get:function get(){return _show_new_vis.showNewVisModal}});var _new_vis_modal=__webpack_require__(1034);var _show_new_vis=__webpack_require__(6257)},6257:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.showNewVisModal=showNewVisModal;var _react=_interopRequireDefault(__webpack_require__(0));var _reactDom=_interopRequireDefault(__webpack_require__(27));var _i18n=__webpack_require__(28);var _new_vis_modal=__webpack_require__(1034);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function showNewVisModal(visTypeRegistry){var _ref=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},_ref$editorParams=_ref.editorParams,editorParams=_ref$editorParams===void 0?[]:_ref$editorParams;var container=document.createElement("div");var onClose=function onClose(){_reactDom["default"].unmountComponentAtNode(container);document.body.removeChild(container)};document.body.appendChild(container);var element=_react["default"].createElement(_i18n.I18nContext,null,_react["default"].createElement(_new_vis_modal.NewVisModal,{isOpen:true,onClose:onClose,visTypesRegistry:visTypeRegistry,editorParams:editorParams}));_reactDom["default"].render(element,container)}},6258:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.showOptionsPopover=showOptionsPopover;var _react=_interopRequireDefault(__webpack_require__(0));var _reactDom=_interopRequireDefault(__webpack_require__(27));var _i18n=__webpack_require__(28);var _eui=__webpack_require__(2);var _options=__webpack_require__(6259);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var isOpen=false;var container=document.createElement("div");var onClose=function onClose(){_reactDom["default"].unmountComponentAtNode(container);isOpen=false};function showOptionsPopover(_ref){var anchorElement=_ref.anchorElement,useMargins=_ref.useMargins,onUseMarginsChange=_ref.onUseMarginsChange,hidePanelTitles=_ref.hidePanelTitles,onHidePanelTitlesChange=_ref.onHidePanelTitlesChange;if(isOpen){onClose();return}isOpen=true;document.body.appendChild(container);var element=_react["default"].createElement(_i18n.I18nContext,null,_react["default"].createElement(_eui.EuiWrappingPopover,{id:"popover",button:anchorElement,isOpen:true,closePopover:onClose},_react["default"].createElement(_options.OptionsMenu,{useMargins:useMargins,onUseMarginsChange:onUseMarginsChange,hidePanelTitles:hidePanelTitles,onHidePanelTitlesChange:onHidePanelTitlesChange})));_reactDom["default"].render(element,container)}},6259:function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.OptionsMenu=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _react2=__webpack_require__(10);var _eui=__webpack_require__(2);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var OptionsMenuUi=function(_Component){_inherits(OptionsMenuUi,_Component);function OptionsMenuUi(props){var _this;_classCallCheck(this,OptionsMenuUi);_this=_possibleConstructorReturn(this,_getPrototypeOf(OptionsMenuUi).call(this,props));_defineProperty(_assertThisInitialized(_this),"state",{useMargins:_this.props.useMargins,hidePanelTitles:_this.props.hidePanelTitles});_defineProperty(_assertThisInitialized(_this),"handleUseMarginsChange",function(evt){var isChecked=evt.target.checked;_this.props.onUseMarginsChange(isChecked);_this.setState({useMargins:isChecked})});_defineProperty(_assertThisInitialized(_this),"handleHidePanelTitlesChange",function(evt){var isChecked=!evt.target.checked;_this.props.onHidePanelTitlesChange(isChecked);_this.setState({hidePanelTitles:isChecked})});return _this}_createClass(OptionsMenuUi,[{key:"render",value:function render(){return _react["default"].createElement(_eui.EuiForm,{"data-test-subj":"dashboardOptionsMenu"},_react["default"].createElement(_eui.EuiFormRow,null,_react["default"].createElement(_eui.EuiSwitch,{label:this.props.intl.formatMessage({id:"kbn.dashboard.topNav.options.useMarginsBetweenPanelsSwitchLabel",defaultMessage:"Use margins between panels"}),checked:this.state.useMargins,onChange:this.handleUseMarginsChange,"data-test-subj":"dashboardMarginsCheckbox"})),_react["default"].createElement(_eui.EuiFormRow,null,_react["default"].createElement(_eui.EuiSwitch,{label:this.props.intl.formatMessage({id:"kbn.dashboard.topNav.options.hideAllPanelTitlesSwitchLabel",defaultMessage:"Show panel titles"}),checked:!this.state.hidePanelTitles,onChange:this.handleHidePanelTitlesChange,"data-test-subj":"dashboardPanelTitlesCheckbox"})))}}]);return OptionsMenuUi}(_react.Component);var OptionsMenu=(0,_react2.injectI18n)(OptionsMenuUi);exports.OptionsMenu=OptionsMenu},6260:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.showAddPanel=showAddPanel;var _i18n=__webpack_require__(28);var _react=_interopRequireDefault(__webpack_require__(0));var _reactDom=_interopRequireDefault(__webpack_require__(27));var _add_panel=__webpack_require__(6261);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var isOpen=false;function showAddPanel(addNewPanel,addNewVis,embeddableFactories){if(isOpen){return}isOpen=true;var container=document.createElement("div");var onClose=function onClose(){_reactDom["default"].unmountComponentAtNode(container);document.body.removeChild(container);isOpen=false};var addNewVisWithCleanup=function addNewVisWithCleanup(){onClose();addNewVis()};document.body.appendChild(container);var element=_react["default"].createElement(_i18n.I18nContext,null,_react["default"].createElement(_add_panel.DashboardAddPanel,{onClose:onClose,addNewPanel:addNewPanel,addNewVis:addNewVisWithCleanup,embeddableFactories:embeddableFactories}));_reactDom["default"].render(element,container)}},6261:function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.DashboardAddPanel=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _i18n=__webpack_require__(5);var _react2=__webpack_require__(10);var _capabilities=__webpack_require__(141);var _notify=__webpack_require__(24);var _saved_object_finder=__webpack_require__(553);var _eui=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var DashboardAddPanel=function(_React$Component){_inherits(DashboardAddPanel,_React$Component);function DashboardAddPanel(){var _getPrototypeOf2;var _this;_classCallCheck(this,DashboardAddPanel);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(DashboardAddPanel)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"lastToast",void 0);_defineProperty(_assertThisInitialized(_this),"onAddPanel",function(id,type,name){_this.props.addNewPanel(id,type);if(_this.lastToast){_notify.toastNotifications.remove(_this.lastToast)}_this.lastToast=_notify.toastNotifications.addSuccess({title:_i18n.i18n.translate("kbn.dashboard.topNav.addPanel.savedObjectAddedToDashboardSuccessMessageTitle",{defaultMessage:"{savedObjectName} was added to your dashboard",values:{savedObjectName:name}}),"data-test-subj":"addObjectToDashboardSuccess"})});return _this}_createClass(DashboardAddPanel,[{key:"render",value:function render(){return _react["default"].createElement(_eui.EuiFlyout,{ownFocus:true,onClose:this.props.onClose,"data-test-subj":"dashboardAddPanel"},_react["default"].createElement(_eui.EuiFlyoutHeader,{hasBorder:true},_react["default"].createElement(_eui.EuiTitle,{size:"m"},_react["default"].createElement("h2",null,_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.dashboard.topNav.addPanelsTitle",defaultMessage:"Add panels"})))),_react["default"].createElement(_eui.EuiFlyoutBody,null,_react["default"].createElement(_saved_object_finder.SavedObjectFinder,{onChoose:this.onAddPanel,savedObjectMetaData:this.props.embeddableFactories.filter(function(embeddableFactory){return Boolean(embeddableFactory.savedObjectMetaData)}).map(function(_ref){var savedObjectMetaData=_ref.savedObjectMetaData;return savedObjectMetaData}),showFilter:true,noItemsMessage:_i18n.i18n.translate("kbn.dashboard.topNav.addPanel.noMatchingObjectsMessage",{defaultMessage:"No matching objects found."})})),_capabilities.capabilities.get().visualize.save?_react["default"].createElement(_eui.EuiFlyoutFooter,null,_react["default"].createElement(_eui.EuiFlexGroup,{justifyContent:"flexEnd"},_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiButton,{fill:true,onClick:this.props.addNewVis,"data-test-subj":"addNewSavedObjectLink"},_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.dashboard.topNav.addPanel.createNewVisualizationButtonLabel",defaultMessage:"Create new visualization"}))))):null)}}]);return DashboardAddPanel}(_react["default"].Component);exports.DashboardAddPanel=DashboardAddPanel},6262:function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.DashboardSaveModal=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _react2=__webpack_require__(10);var _saved_object_save_modal=__webpack_require__(1032);var _eui=__webpack_require__(2);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var DashboardSaveModalUi=function(_React$Component){_inherits(DashboardSaveModalUi,_React$Component);function DashboardSaveModalUi(props){var _this;_classCallCheck(this,DashboardSaveModalUi);_this=_possibleConstructorReturn(this,_getPrototypeOf(DashboardSaveModalUi).call(this,props));_defineProperty(_assertThisInitialized(_this),"state",{description:_this.props.description,timeRestore:_this.props.timeRestore});_defineProperty(_assertThisInitialized(_this),"saveDashboard",function(_ref){var newTitle=_ref.newTitle,newCopyOnSave=_ref.newCopyOnSave,isTitleDuplicateConfirmed=_ref.isTitleDuplicateConfirmed,onTitleDuplicate=_ref.onTitleDuplicate;_this.props.onSave({newTitle:newTitle,newDescription:_this.state.description,newCopyOnSave:newCopyOnSave,newTimeRestore:_this.state.timeRestore,isTitleDuplicateConfirmed:isTitleDuplicateConfirmed,onTitleDuplicate:onTitleDuplicate})});_defineProperty(_assertThisInitialized(_this),"onDescriptionChange",function(event){_this.setState({description:event.target.value})});_defineProperty(_assertThisInitialized(_this),"onTimeRestoreChange",function(event){_this.setState({timeRestore:event.target.checked})});return _this}_createClass(DashboardSaveModalUi,[{key:"renderDashboardSaveOptions",value:function renderDashboardSaveOptions(){return _react["default"].createElement(_react.Fragment,null,_react["default"].createElement(_eui.EuiFormRow,{label:_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.dashboard.topNav.saveModal.descriptionFormRowLabel",defaultMessage:"Description"})},_react["default"].createElement(_eui.EuiTextArea,{"data-test-subj":"dashboardDescription",value:this.state.description,onChange:this.onDescriptionChange})),_react["default"].createElement(_eui.EuiFormRow,{helpText:_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.dashboard.topNav.saveModal.storeTimeWithDashboardFormRowHelpText",defaultMessage:"This changes the time filter to the currently selected time each time this dashboard is loaded."})},_react["default"].createElement(_eui.EuiSwitch,{"data-test-subj":"storeTimeWithDashboard",checked:this.state.timeRestore,onChange:this.onTimeRestoreChange,label:_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.dashboard.topNav.saveModal.storeTimeWithDashboardFormRowLabel",defaultMessage:"Store time with dashboard"})})))}},{key:"render",value:function render(){return _react["default"].createElement(_saved_object_save_modal.SavedObjectSaveModal,{onSave:this.saveDashboard,onClose:this.props.onClose,title:this.props.title,showCopyOnSave:this.props.showCopyOnSave,objectType:"dashboard",options:this.renderDashboardSaveOptions()})}}]);return DashboardSaveModalUi}(_react["default"].Component);var DashboardSaveModal=(0,_react2.injectI18n)(DashboardSaveModalUi);exports.DashboardSaveModal=DashboardSaveModal},6263:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.showCloneModal=showCloneModal;var _i18n=__webpack_require__(28);var _react=_interopRequireDefault(__webpack_require__(0));var _reactDom=_interopRequireDefault(__webpack_require__(27));var _i18n2=__webpack_require__(5);var _clone_modal=__webpack_require__(6264);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function showCloneModal(onClone,title){var container=document.createElement("div");var closeModal=function closeModal(){_reactDom["default"].unmountComponentAtNode(container);document.body.removeChild(container)};var onCloneConfirmed=function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(newTitle,isTitleDuplicateConfirmed,onTitleDuplicate){return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:onClone(newTitle,isTitleDuplicateConfirmed,onTitleDuplicate).then(function(response){if(response.error||response.id){closeModal()}});case 1:case"end":return _context.stop()}}},_callee)}));return function onCloneConfirmed(_x,_x2,_x3){return _ref.apply(this,arguments)}}();document.body.appendChild(container);var element=_react["default"].createElement(_i18n.I18nContext,null,_react["default"].createElement(_clone_modal.DashboardCloneModal,{onClone:onCloneConfirmed,onClose:closeModal,title:_i18n2.i18n.translate("kbn.dashboard.topNav.showCloneModal.dashboardCopyTitle",{defaultMessage:"{title} Copy",values:{title:title}})}));_reactDom["default"].render(element,container)}},6264:function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.DashboardCloneModal=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _react2=__webpack_require__(10);var _eui=__webpack_require__(2);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var DashboardCloneModalUi=function(_React$Component){_inherits(DashboardCloneModalUi,_React$Component);function DashboardCloneModalUi(props){var _this;_classCallCheck(this,DashboardCloneModalUi);_this=_possibleConstructorReturn(this,_getPrototypeOf(DashboardCloneModalUi).call(this,props));_defineProperty(_assertThisInitialized(_this),"isMounted",false);_defineProperty(_assertThisInitialized(_this),"onTitleDuplicate",function(){_this.setState({isTitleDuplicateConfirmed:true,hasTitleDuplicate:true})});_defineProperty(_assertThisInitialized(_this),"cloneDashboard",_asyncToGenerator(regeneratorRuntime.mark(function _callee(){return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this.setState({isLoading:true});_context.next=3;return _this.props.onClone(_this.state.newDashboardName,_this.state.isTitleDuplicateConfirmed,_this.onTitleDuplicate);case 3:if(_this.isMounted){_this.setState({isLoading:false})}case 4:case"end":return _context.stop()}}},_callee)})));_defineProperty(_assertThisInitialized(_this),"onInputChange",function(event){_this.setState({newDashboardName:event.target.value,isTitleDuplicateConfirmed:false,hasTitleDuplicate:false})});_defineProperty(_assertThisInitialized(_this),"renderDuplicateTitleCallout",function(){if(!_this.state.hasTitleDuplicate){return}return _react["default"].createElement(_react.Fragment,null,_react["default"].createElement(_eui.EuiSpacer,null),_react["default"].createElement(_eui.EuiCallOut,{size:"s",title:_this.props.intl.formatMessage({id:"kbn.dashboard.topNav.cloneModal.dashboardExistsTitle",defaultMessage:"A dashboard with the title {newDashboardName} already exists."},{newDashboardName:"'".concat(_this.state.newDashboardName,"'")}),color:"warning","data-test-subj":"titleDupicateWarnMsg"},_react["default"].createElement("p",null,_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.dashboard.topNav.cloneModal.dashboardExistsDescription",defaultMessage:"Click {confirmClone} to clone the dashboard with the duplicate title.",values:{confirmClone:_react["default"].createElement("strong",null,_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.dashboard.topNav.cloneModal.confirmCloneDescription",defaultMessage:"Confirm Clone"}))}}))))});_this.state={newDashboardName:props.title,isTitleDuplicateConfirmed:false,hasTitleDuplicate:false,isLoading:false};return _this}_createClass(DashboardCloneModalUi,[{key:"componentDidMount",value:function componentDidMount(){this.isMounted=true}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.isMounted=false}},{key:"render",value:function render(){return _react["default"].createElement(_eui.EuiOverlayMask,null,_react["default"].createElement(_eui.EuiModal,{"data-test-subj":"dashboardCloneModal",className:"dshCloneModal",onClose:this.props.onClose},_react["default"].createElement(_eui.EuiModalHeader,null,_react["default"].createElement(_eui.EuiModalHeaderTitle,null,_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.dashboard.topNav.cloneModal.cloneDashboardModalHeaderTitle",defaultMessage:"Clone dashboard"}))),_react["default"].createElement(_eui.EuiModalBody,null,_react["default"].createElement(_eui.EuiText,null,_react["default"].createElement("p",null,_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.dashboard.topNav.cloneModal.enterNewNameForDashboardDescription",defaultMessage:"Please enter a new name for your dashboard."}))),_react["default"].createElement(_eui.EuiSpacer,null),_react["default"].createElement(_eui.EuiFieldText,{autoFocus:true,"data-test-subj":"clonedDashboardTitle",value:this.state.newDashboardName,onChange:this.onInputChange,isInvalid:this.state.hasTitleDuplicate}),this.renderDuplicateTitleCallout()),_react["default"].createElement(_eui.EuiModalFooter,null,_react["default"].createElement(_eui.EuiButtonEmpty,{"data-test-subj":"cloneCancelButton",onClick:this.props.onClose},_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.dashboard.topNav.cloneModal.cancelButtonLabel",defaultMessage:"Cancel"})),_react["default"].createElement(_eui.EuiButton,{fill:true,"data-test-subj":"cloneConfirmButton",onClick:this.cloneDashboard,isLoading:this.state.isLoading},_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.dashboard.topNav.cloneModal.confirmButtonLabel",defaultMessage:"Confirm Clone"})))))}}]);return DashboardCloneModalUi}(_react["default"].Component);var DashboardCloneModal=(0,_react2.injectI18n)(DashboardCloneModalUi);exports.DashboardCloneModal=DashboardCloneModal},6265:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.saveDashboard=saveDashboard;var _update_saved_dashboard=__webpack_require__(6266);function saveDashboard(toJson,timeFilter,dashboardStateManager,saveOptions){dashboardStateManager.saveState();var savedDashboard=dashboardStateManager.savedDashboard;var appState=dashboardStateManager.appState;(0,_update_saved_dashboard.updateSavedDashboard)(savedDashboard,appState,timeFilter,toJson);return savedDashboard.save(saveOptions).then(function(id){dashboardStateManager.lastSavedDashboardFilters=dashboardStateManager.getFilterState();dashboardStateManager.resetState();return id})}},6266:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.updateSavedDashboard=updateSavedDashboard;var _lodash=_interopRequireDefault(__webpack_require__(1));var _filter_utils=__webpack_require__(2056);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function updateSavedDashboard(savedDashboard,appState,timeFilter,toJson){savedDashboard.title=appState.title;savedDashboard.description=appState.description;savedDashboard.timeRestore=appState.timeRestore;savedDashboard.panelsJSON=toJson(appState.panels);savedDashboard.optionsJSON=toJson(appState.options);savedDashboard.timeFrom=savedDashboard.timeRestore?_filter_utils.FilterUtils.convertTimeToUTCString(timeFilter.getTime().from):undefined;savedDashboard.timeTo=savedDashboard.timeRestore?_filter_utils.FilterUtils.convertTimeToUTCString(timeFilter.getTime().to):undefined;var timeRestoreObj=_lodash["default"].pick(timeFilter.getRefreshInterval(),["display","pause","section","value"]);savedDashboard.refreshInterval=savedDashboard.timeRestore?timeRestoreObj:undefined}},6267:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getAppStateDefaults=getAppStateDefaults;var _dashboard_view_mode=__webpack_require__(139);function getAppStateDefaults(savedDashboard,hideWriteControls){return{fullScreenMode:false,title:savedDashboard.title,description:savedDashboard.description||"",timeRestore:savedDashboard.timeRestore,panels:savedDashboard.panelsJSON?JSON.parse(savedDashboard.panelsJSON):[],options:savedDashboard.optionsJSON?JSON.parse(savedDashboard.optionsJSON):{},query:savedDashboard.getQuery(),filters:savedDashboard.getFilters(),viewMode:savedDashboard.id||hideWriteControls?_dashboard_view_mode.DashboardViewMode.VIEW:_dashboard_view_mode.DashboardViewMode.EDIT}}},6268:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.migrateAppState=migrateAppState;var _semver=_interopRequireDefault(__webpack_require__(2057));var _chrome=_interopRequireDefault(__webpack_require__(19));var _i18n=__webpack_require__(5);var _public=__webpack_require__(1369);var _migrate_to_730_panels=__webpack_require__(6269);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function migrateAppState(appState){if(!appState.panels){throw new Error(_i18n.i18n.translate("kbn.dashboard.panel.invalidData",{defaultMessage:"Invalid data in url"}))}var panelNeedsMigration=appState.panels.some(function(panel){if(panel.version===undefined)return true;var version=panel.version;(0,_public.trackUiMetric)("DashboardPanelVersionInUrl","".concat(version));return _semver["default"].satisfies(version,"<7.3")});if(panelNeedsMigration){appState.panels=(0,_migrate_to_730_panels.migratePanelsTo730)(appState.panels,_chrome["default"].getKibanaVersion(),appState.useMargins,appState.uiState);delete appState.uiState;appState.save()}}},6269:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.migratePanelsTo730=migratePanelsTo730;var _i18n=__webpack_require__(5);var _semver=_interopRequireDefault(__webpack_require__(2057));var _dashboard_constants=__webpack_require__(261);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}var PANEL_HEIGHT_SCALE_FACTOR=5;var PANEL_HEIGHT_SCALE_FACTOR_WITH_MARGINS=4;var PANEL_WIDTH_SCALE_FACTOR=4;function isPre61Panel(panel){return panel.row!==undefined}function is61Panel(panel){return _semver["default"].satisfies(panel.version,"6.1.x")}function is62Panel(panel){return _semver["default"].satisfies(panel.version,"6.2.x")}function is63Panel(panel){return _semver["default"].satisfies(panel.version,"6.3.x")}function is640To720Panel(panel){return _semver["default"].satisfies(panel.version,">6.3")&&_semver["default"].satisfies(panel.version,"<7.3")}function migratePre61PanelToLatest(panel,version,useMargins,uiState){if(panel.col===undefined||panel.row===undefined){throw new Error(_i18n.i18n.translate("kbn.dashboard.panel.unableToMigratePanelDataForSixOneZeroErrorMessage",{defaultMessage:'Unable to migrate panel data for "6.1.0" backwards compatibility, panel does not contain expected col and/or row fields'}))}var embeddableConfig=uiState?uiState["P-".concat(panel.panelIndex)]||{}:{};if(panel.columns||panel.sort){embeddableConfig.columns=panel.columns;embeddableConfig.sort=panel.sort}var heightScaleFactor=useMargins?PANEL_HEIGHT_SCALE_FACTOR_WITH_MARGINS:PANEL_HEIGHT_SCALE_FACTOR;var columns=panel.columns,sort=panel.sort,row=panel.row,col=panel.col,sizeX=panel.size_x,sizeY=panel.size_y,rest=_objectWithoutProperties(panel,["columns","sort","row","col","size_x","size_y"]);return _objectSpread({},rest,{version:version,panelIndex:panel.panelIndex.toString(),gridData:{x:(col-1)*PANEL_WIDTH_SCALE_FACTOR,y:(row-1)*heightScaleFactor,w:sizeX?sizeX*PANEL_WIDTH_SCALE_FACTOR:_dashboard_constants.DEFAULT_PANEL_WIDTH,h:sizeY?sizeY*heightScaleFactor:_dashboard_constants.DEFAULT_PANEL_HEIGHT,i:panel.panelIndex.toString()},embeddableConfig:embeddableConfig})}function migrate610PanelToLatest(panel,version,useMargins,uiState){["w","x","h","y"].forEach(function(key){if(panel.gridData[key]===undefined){throw new Error(_i18n.i18n.translate("kbn.dashboard.panel.unableToMigratePanelDataForSixThreeZeroErrorMessage",{defaultMessage:'Unable to migrate panel data for "6.3.0" backwards compatibility, panel does not contain expected field: {key}',values:{key:key}}))}});var embeddableConfig=uiState?uiState["P-".concat(panel.panelIndex)]||{}:{};if(panel.columns||panel.sort){embeddableConfig.columns=panel.columns;embeddableConfig.sort=panel.sort}var heightScaleFactor=useMargins?PANEL_HEIGHT_SCALE_FACTOR_WITH_MARGINS:PANEL_HEIGHT_SCALE_FACTOR;var columns=panel.columns,sort=panel.sort,rest=_objectWithoutProperties(panel,["columns","sort"]);return _objectSpread({},rest,{version:version,panelIndex:panel.panelIndex.toString(),gridData:{w:panel.gridData.w*PANEL_WIDTH_SCALE_FACTOR,h:panel.gridData.h*heightScaleFactor,x:panel.gridData.x*PANEL_WIDTH_SCALE_FACTOR,y:panel.gridData.y*heightScaleFactor,i:panel.gridData.i},embeddableConfig:embeddableConfig})}function migrate620PanelToLatest(panel,version,useMargins){var embeddableConfig=panel.embeddableConfig||{};if(panel.columns||panel.sort){embeddableConfig.columns=panel.columns;embeddableConfig.sort=panel.sort}var heightScaleFactor=useMargins?PANEL_HEIGHT_SCALE_FACTOR_WITH_MARGINS:PANEL_HEIGHT_SCALE_FACTOR;var columns=panel.columns,sort=panel.sort,rest=_objectWithoutProperties(panel,["columns","sort"]);return _objectSpread({},rest,{version:version,panelIndex:panel.panelIndex.toString(),gridData:{w:panel.gridData.w*PANEL_WIDTH_SCALE_FACTOR,h:panel.gridData.h*heightScaleFactor,x:panel.gridData.x*PANEL_WIDTH_SCALE_FACTOR,y:panel.gridData.y*heightScaleFactor,i:panel.gridData.i},embeddableConfig:embeddableConfig})}function migrate630PanelToLatest(panel,version){var embeddableConfig=panel.embeddableConfig||{};if(panel.columns||panel.sort){embeddableConfig.columns=panel.columns;embeddableConfig.sort=panel.sort}var columns=panel.columns,sort=panel.sort,rest=_objectWithoutProperties(panel,["columns","sort"]);return _objectSpread({},rest,{version:version,panelIndex:panel.panelIndex.toString(),embeddableConfig:embeddableConfig})}function migrate640To720PanelsToLatest(panel,version){return _objectSpread({},panel,{version:version,panelIndex:panel.panelIndex.toString()})}function migratePanelsTo730(panels,version,useMargins,uiState){return panels.map(function(panel){if(isPre61Panel(panel)){return migratePre61PanelToLatest(panel,version,useMargins,uiState)}if(is61Panel(panel)){return migrate610PanelToLatest(panel,version,useMargins,uiState)}if(is62Panel(panel)){return migrate620PanelToLatest(panel,version,useMargins)}if(is63Panel(panel)){return migrate630PanelToLatest(panel,version)}if(is640To720Panel(panel)){return migrate640To720PanelsToLatest(panel,version)}return panel})}},6270:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DashboardStateManager=void 0;var _i18n=__webpack_require__(5);var _lodash=_interopRequireDefault(__webpack_require__(1));var _state_monitor_factory=__webpack_require__(1028);var _dashboard_view_mode=__webpack_require__(139);var _filter_utils=__webpack_require__(2056);var _panel_utils=__webpack_require__(6271);var _store=__webpack_require__(2050);var _actions=__webpack_require__(249);var _panel=__webpack_require__(2053);var _lib=__webpack_require__(2055);var _selectors=__webpack_require__(2052);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var DashboardStateManager=function(){function DashboardStateManager(_ref){var _this=this;var savedDashboard=_ref.savedDashboard,AppStateClass=_ref.AppStateClass,hideWriteControls=_ref.hideWriteControls,addFilter=_ref.addFilter;_classCallCheck(this,DashboardStateManager);_defineProperty(this,"savedDashboard",void 0);_defineProperty(this,"appState",void 0);_defineProperty(this,"lastSavedDashboardFilters",void 0);_defineProperty(this,"stateDefaults",void 0);_defineProperty(this,"hideWriteControls",void 0);_defineProperty(this,"isDirty",void 0);_defineProperty(this,"changeListeners",void 0);_defineProperty(this,"stateMonitor",void 0);_defineProperty(this,"panelIndexPatternMapping",{});_defineProperty(this,"addFilter",void 0);_defineProperty(this,"unsubscribe",void 0);_defineProperty(this,"addNewPanel",function(id,type){var maxPanelIndex=_panel_utils.PanelUtils.getMaxPanelIndex(_this.getPanels());var newPanel=(0,_panel.createPanelState)(id,type,maxPanelIndex.toString(),_this.getPanels());_this.getPanels().push(newPanel);_this.saveState()});this.savedDashboard=savedDashboard;this.hideWriteControls=hideWriteControls;this.addFilter=addFilter;this.stateDefaults=(0,_lib.getAppStateDefaults)(this.savedDashboard,this.hideWriteControls);this.appState=new AppStateClass(this.stateDefaults);(0,_lib.migrateAppState)(this.appState);this.isDirty=false;this.lastSavedDashboardFilters=this.getFilterState();this.panelIndexPatternMapping={};_panel_utils.PanelUtils.initPanelIndexes(this.getPanels());this.stateMonitor=_state_monitor_factory.stateMonitorFactory.create(this.appState,this.stateDefaults);this.stateMonitor.ignoreProps("viewMode");this.stateMonitor.ignoreProps("filters");this.stateMonitor.ignoreProps("query");this.stateMonitor.onChange(function(status){_this.isDirty=status.dirty});_store.store.dispatch((0,_actions.closeContextMenu)());_store.store.dispatch((0,_actions.minimizePanel)());this.pushAppStateChangesToStore();this.changeListeners=[];this.unsubscribe=_store.store.subscribe(function(){return _this.handleStoreChanges()});this.stateMonitor.onChange(function(status){_this.changeListeners.forEach(function(listener){return listener(status)});_this.pushAppStateChangesToStore()})}_createClass(DashboardStateManager,[{key:"registerChangeListener",value:function registerChangeListener(callback){this.changeListeners.push(callback)}},{key:"areStoreAndAppStatePanelsEqual",value:function areStoreAndAppStatePanelsEqual(){var state=_store.store.getState();var storePanels=(0,_selectors.getPanels)(_store.store.getState());var appStatePanels=this.getPanels();if(Object.values(storePanels).length!==appStatePanels.length){return false}return appStatePanels.every(function(appStatePanel){var storePanel=(0,_selectors.getPanel)(state,appStatePanel.panelIndex);return _lodash["default"].isEqual(appStatePanel,storePanel)})}},{key:"handleTimeChange",value:function handleTimeChange(newTimeRange){var from=_filter_utils.FilterUtils.convertTimeToUTCString(newTimeRange.from);var to=_filter_utils.FilterUtils.convertTimeToUTCString(newTimeRange.to);_store.store.dispatch((0,_actions.updateTimeRange)({from:from?from.toString():"",to:to?to.toString():""}))}},{key:"handleRefreshConfigChange",value:function handleRefreshConfigChange(refreshInterval){_store.store.dispatch((0,_actions.updateRefreshConfig)(refreshInterval))}},{key:"pushAppStateChangesToStore",value:function pushAppStateChangesToStore(){if(!this.areStoreAndAppStatePanelsEqual()){var panelsMap=this.getPanels().reduce(function(acc,panel){acc[panel.panelIndex]=_lodash["default"].cloneDeep(panel);return acc},{});_store.store.dispatch((0,_actions.setPanels)(panelsMap))}var state=_store.store.getState();if((0,_selectors.getTitle)(state)!==this.getTitle()){_store.store.dispatch((0,_actions.updateTitle)(this.getTitle()))}if((0,_selectors.getDescription)(state)!==this.getDescription()){_store.store.dispatch((0,_actions.updateDescription)(this.getDescription()))}if((0,_selectors.getViewMode)(state)!==this.getViewMode()){_store.store.dispatch((0,_actions.updateViewMode)(this.getViewMode()))}if((0,_selectors.getUseMargins)(state)!==this.getUseMargins()){_store.store.dispatch((0,_actions.updateUseMargins)(this.getUseMargins()))}if((0,_selectors.getHidePanelTitles)(state)!==this.getHidePanelTitles()){_store.store.dispatch((0,_actions.updateHidePanelTitles)(this.getHidePanelTitles()))}if((0,_selectors.getFullScreenMode)(state)!==this.getFullScreenMode()){_store.store.dispatch((0,_actions.updateIsFullScreenMode)(this.getFullScreenMode()))}if((0,_selectors.getTitle)(state)!==this.getTitle()){_store.store.dispatch((0,_actions.updateTitle)(this.getTitle()))}if((0,_selectors.getDescription)(state)!==this.getDescription()){_store.store.dispatch((0,_actions.updateDescription)(this.getDescription()))}if((0,_selectors.getQuery)(state)!==this.getQuery()){_store.store.dispatch((0,_actions.updateQuery)(this.getQuery()))}this._pushFiltersToStore()}},{key:"_pushFiltersToStore",value:function _pushFiltersToStore(){var state=_store.store.getState();var dashboardFilters=this.savedDashboard.getFilters();if(!_lodash["default"].isEqual(_filter_utils.FilterUtils.cleanFiltersForComparison(dashboardFilters),_filter_utils.FilterUtils.cleanFiltersForComparison((0,_selectors.getFilters)(state)))){_store.store.dispatch((0,_actions.updateFilters)(dashboardFilters))}}},{key:"requestReload",value:function requestReload(){_store.store.dispatch((0,_actions.requestReload)())}},{key:"handleStoreChanges",value:function handleStoreChanges(){var _this2=this;var dirty=false;if(!this.areStoreAndAppStatePanelsEqual()){var panels=(0,_selectors.getPanels)(_store.store.getState());this.appState.panels=[];this.panelIndexPatternMapping={};Object.values(panels).map(function(panel){_this2.appState.panels.push(_lodash["default"].cloneDeep(panel))});dirty=true}_lodash["default"].forEach((0,_selectors.getEmbeddables)(_store.store.getState()),function(embeddable,panelId){if(panelId&&embeddable.initialized&&!_this2.panelIndexPatternMapping.hasOwnProperty(panelId)){var embeddableMetadata=(0,_selectors.getEmbeddableMetadata)(_store.store.getState(),panelId);if(embeddableMetadata&&embeddableMetadata.indexPatterns){_this2.panelIndexPatternMapping[panelId]=_lodash["default"].compact(embeddableMetadata.indexPatterns);dirty=true}}});var stagedFilters=(0,_selectors.getStagedFilters)(_store.store.getState());stagedFilters.forEach(function(filter){_this2.addFilter(filter,_this2.getAppState())});if(stagedFilters.length>0){this.saveState();_store.store.dispatch((0,_actions.clearStagedFilters)())}var fullScreen=(0,_selectors.getFullScreenMode)(_store.store.getState());if(fullScreen!==this.getFullScreenMode()){this.setFullScreenMode(fullScreen)}this.changeListeners.forEach(function(listener){return listener({dirty:dirty})});this.saveState()}},{key:"getFullScreenMode",value:function getFullScreenMode(){return this.appState.fullScreenMode}},{key:"setFullScreenMode",value:function setFullScreenMode(fullScreenMode){this.appState.fullScreenMode=fullScreenMode;this.saveState()}},{key:"getPanelIndexPatterns",value:function getPanelIndexPatterns(){var indexPatterns=_lodash["default"].flatten(Object.values(this.panelIndexPatternMapping));return _lodash["default"].uniq(indexPatterns,"id")}},{key:"resetState",value:function resetState(){this.savedDashboard.title=this.savedDashboard.lastSavedTitle;this.stateDefaults=(0,_lib.getAppStateDefaults)(this.savedDashboard,this.hideWriteControls);this.stateDefaults.query=this.lastSavedDashboardFilters.query;this.stateDefaults.filters=_toConsumableArray(this.getLastSavedFilterBars());this.isDirty=false;this.appState.setDefaults(this.stateDefaults);this.appState.reset();this.stateMonitor.setInitialState(this.appState.toJSON())}},{key:"getFilterState",value:function getFilterState(){return{timeTo:this.savedDashboard.timeTo,timeFrom:this.savedDashboard.timeFrom,filterBars:this.savedDashboard.getFilters(),query:this.savedDashboard.getQuery()}}},{key:"getTitle",value:function getTitle(){return this.appState.title}},{key:"getDescription",value:function getDescription(){return this.appState.description}},{key:"setDescription",value:function setDescription(description){this.appState.description=description;this.saveState()}},{key:"setTitle",value:function setTitle(title){this.appState.title=title;this.savedDashboard.title=title;this.saveState()}},{key:"getAppState",value:function getAppState(){return this.appState}},{key:"getQuery",value:function getQuery(){return this.appState.query}},{key:"getUseMargins",value:function getUseMargins(){return this.appState.options.useMargins===undefined?false:this.appState.options.useMargins}},{key:"setUseMargins",value:function setUseMargins(useMargins){this.appState.options.useMargins=useMargins;this.saveState()}},{key:"getHidePanelTitles",value:function getHidePanelTitles(){return this.appState.options.hidePanelTitles}},{key:"setHidePanelTitles",value:function setHidePanelTitles(hidePanelTitles){this.appState.options.hidePanelTitles=hidePanelTitles;this.saveState()}},{key:"getTimeRestore",value:function getTimeRestore(){return this.appState.timeRestore}},{key:"setTimeRestore",value:function setTimeRestore(timeRestore){this.appState.timeRestore=timeRestore;this.saveState()}},{key:"getIsTimeSavedWithDashboard",value:function getIsTimeSavedWithDashboard(){return this.savedDashboard.timeRestore}},{key:"getLastSavedFilterBars",value:function getLastSavedFilterBars(){return this.lastSavedDashboardFilters.filterBars}},{key:"getLastSavedQuery",value:function getLastSavedQuery(){return this.lastSavedDashboardFilters.query}},{key:"getQueryChanged",value:function getQueryChanged(){var currentQuery=this.appState.query;var lastSavedQuery=this.getLastSavedQuery();var isLegacyStringQuery=_lodash["default"].isString(lastSavedQuery)&&_lodash["default"].isPlainObject(currentQuery)&&_lodash["default"].has(currentQuery,"query");if(isLegacyStringQuery){return lastSavedQuery!==currentQuery.query}return!_lodash["default"].isEqual(currentQuery,lastSavedQuery)}},{key:"getFilterBarChanged",value:function getFilterBarChanged(){return!_lodash["default"].isEqual(_filter_utils.FilterUtils.cleanFiltersForComparison(this.appState.filters),_filter_utils.FilterUtils.cleanFiltersForComparison(this.getLastSavedFilterBars()))}},{key:"getTimeChanged",value:function getTimeChanged(timeFilter){return!_filter_utils.FilterUtils.areTimesEqual(this.lastSavedDashboardFilters.timeFrom,timeFilter.getTime().from)||!_filter_utils.FilterUtils.areTimesEqual(this.lastSavedDashboardFilters.timeTo,timeFilter.getTime().to)}},{key:"getViewMode",value:function getViewMode(){return this.hideWriteControls?_dashboard_view_mode.DashboardViewMode.VIEW:this.appState.viewMode}},{key:"getIsViewMode",value:function getIsViewMode(){return this.getViewMode()===_dashboard_view_mode.DashboardViewMode.VIEW}},{key:"getIsEditMode",value:function getIsEditMode(){return this.getViewMode()===_dashboard_view_mode.DashboardViewMode.EDIT}},{key:"getIsDirty",value:function getIsDirty(timeFilter){var hasTimeFilterChanged=timeFilter?this.getFiltersChanged(timeFilter):false;return this.getIsEditMode()&&(this.isDirty||hasTimeFilterChanged)}},{key:"getPanels",value:function getPanels(){return this.appState.panels}},{key:"updatePanel",value:function updatePanel(panelIndex,panelAttributes){var foundPanel=this.getPanels().find(function(panel){return panel.panelIndex===panelIndex});Object.assign(foundPanel,panelAttributes);this.saveState();return foundPanel}},{key:"removePanel",value:function removePanel(panelIndex){var _this3=this;_lodash["default"].remove(this.getPanels(),function(panel){if(panel.panelIndex===panelIndex){delete _this3.panelIndexPatternMapping[panelIndex];return true}else{return false}});this.saveState()}},{key:"getChangedFilterTypes",value:function getChangedFilterTypes(timeFilter){var changedFilters=[];if(this.getFilterBarChanged()){changedFilters.push("filter")}if(this.getQueryChanged()){changedFilters.push("query")}if(this.savedDashboard.timeRestore&&this.getTimeChanged(timeFilter)){changedFilters.push("time range")}return changedFilters}},{key:"getFiltersChanged",value:function getFiltersChanged(timeFilter){return this.getChangedFilterTypes(timeFilter).length>0}},{key:"syncTimefilterWithDashboard",value:function syncTimefilterWithDashboard(timeFilter){if(!this.getIsTimeSavedWithDashboard()){throw new Error(_i18n.i18n.translate("kbn.dashboard.stateManager.timeNotSavedWithDashboardErrorMessage",{defaultMessage:"The time is not saved with this dashboard so should not be synced."}))}if(this.savedDashboard.timeFrom&&this.savedDashboard.timeTo){timeFilter.setTime({from:this.savedDashboard.timeFrom,to:this.savedDashboard.timeTo})}if(this.savedDashboard.refreshInterval){timeFilter.setRefreshInterval(this.savedDashboard.refreshInterval)}}},{key:"saveState",value:function saveState(){this.appState.save()}},{key:"applyFilters",value:function applyFilters(query,filters){this.appState.query=query;this.savedDashboard.searchSource.setField("query",query);this.savedDashboard.searchSource.setField("filter",filters);this.saveState();this._pushFiltersToStore()}},{key:"switchViewMode",value:function switchViewMode(newMode){this.appState.viewMode=newMode;this.saveState()}},{key:"destroy",value:function destroy(){if(this.stateMonitor){this.stateMonitor.destroy()}this.savedDashboard.destroy();this.unsubscribe()}}]);return DashboardStateManager}();exports.DashboardStateManager=DashboardStateManager},6271:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PanelUtils=void 0;function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var PanelUtils=function(){function PanelUtils(){_classCallCheck(this,PanelUtils)}_createClass(PanelUtils,null,[{key:"initPanelIndexes",value:function initPanelIndexes(panels){var maxIndex=this.getMaxPanelIndex(panels);panels.forEach(function(panel){if(!panel.panelIndex){panel.panelIndex=(maxIndex++).toString()}})}},{key:"getMaxPanelIndex",value:function getMaxPanelIndex(panels){var maxId=panels.reduce(function(id,panel){return Math.max(id,Number(panel.panelIndex||id))},0);return++maxId}}]);return PanelUtils}();exports.PanelUtils=PanelUtils},6272:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getTopNavConfig=getTopNavConfig;var _i18n=__webpack_require__(5);var _dashboard_view_mode=__webpack_require__(139);var _top_nav_ids=__webpack_require__(2058);function getTopNavConfig(dashboardMode,actions,hideWriteControls){switch(dashboardMode){case _dashboard_view_mode.DashboardViewMode.VIEW:return hideWriteControls?[getFullScreenConfig(actions[_top_nav_ids.TopNavIds.FULL_SCREEN]),getShareConfig(actions[_top_nav_ids.TopNavIds.SHARE])]:[getFullScreenConfig(actions[_top_nav_ids.TopNavIds.FULL_SCREEN]),getShareConfig(actions[_top_nav_ids.TopNavIds.SHARE]),getCloneConfig(actions[_top_nav_ids.TopNavIds.CLONE]),getEditConfig(actions[_top_nav_ids.TopNavIds.ENTER_EDIT_MODE])];case _dashboard_view_mode.DashboardViewMode.EDIT:return[getSaveConfig(actions[_top_nav_ids.TopNavIds.SAVE]),getViewConfig(actions[_top_nav_ids.TopNavIds.EXIT_EDIT_MODE]),getAddConfig(actions[_top_nav_ids.TopNavIds.ADD]),getOptionsConfig(actions[_top_nav_ids.TopNavIds.OPTIONS]),getShareConfig(actions[_top_nav_ids.TopNavIds.SHARE])];default:return[]}}function getFullScreenConfig(action){return{key:_i18n.i18n.translate("kbn.dashboard.topNave.fullScreenButtonAriaLabel",{defaultMessage:"full screen"}),description:_i18n.i18n.translate("kbn.dashboard.topNave.fullScreenConfigDescription",{defaultMessage:"Full Screen Mode"}),testId:"dashboardFullScreenMode",run:action}}function getEditConfig(action){return{key:_i18n.i18n.translate("kbn.dashboard.topNave.editButtonAriaLabel",{defaultMessage:"edit"}),description:_i18n.i18n.translate("kbn.dashboard.topNave.editConfigDescription",{defaultMessage:"Switch to edit mode"}),testId:"dashboardEditMode",className:"eui-hideFor--s eui-hideFor--xs",run:action}}function getSaveConfig(action){return{key:_i18n.i18n.translate("kbn.dashboard.topNave.saveButtonAriaLabel",{defaultMessage:"save"}),description:_i18n.i18n.translate("kbn.dashboard.topNave.saveConfigDescription",{defaultMessage:"Save your dashboard"}),testId:"dashboardSaveMenuItem",run:action}}function getViewConfig(action){return{key:_i18n.i18n.translate("kbn.dashboard.topNave.cancelButtonAriaLabel",{defaultMessage:"cancel"}),description:_i18n.i18n.translate("kbn.dashboard.topNave.viewConfigDescription",{defaultMessage:"Cancel editing and switch to view-only mode"}),testId:"dashboardViewOnlyMode",run:action}}function getCloneConfig(action){return{key:_i18n.i18n.translate("kbn.dashboard.topNave.cloneButtonAriaLabel",{defaultMessage:"clone"}),description:_i18n.i18n.translate("kbn.dashboard.topNave.cloneConfigDescription",{defaultMessage:"Create a copy of your dashboard"}),testId:"dashboardClone",run:action}}function getAddConfig(action){return{key:_i18n.i18n.translate("kbn.dashboard.topNave.addButtonAriaLabel",{defaultMessage:"add"}),description:_i18n.i18n.translate("kbn.dashboard.topNave.addConfigDescription",{defaultMessage:"Add a panel to the dashboard"}),testId:"dashboardAddPanelButton",run:action}}function getShareConfig(action){return{key:_i18n.i18n.translate("kbn.dashboard.topNave.shareButtonAriaLabel",{defaultMessage:"share"}),description:_i18n.i18n.translate("kbn.dashboard.topNave.shareConfigDescription",{defaultMessage:"Share Dashboard"}),testId:"shareTopNavButton",run:action}}function getOptionsConfig(action){return{key:_i18n.i18n.translate("kbn.dashboard.topNave.optionsButtonAriaLabel",{defaultMessage:"options"}),description:_i18n.i18n.translate("kbn.dashboard.topNave.optionsConfigDescription",{defaultMessage:"Options"}),testId:"dashboardOptionsButton",run:action}}},6273:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getDashboardTitle=getDashboardTitle;var _i18n=__webpack_require__(5);var _dashboard_view_mode=__webpack_require__(139);function getDashboardTitle(title,viewMode,isDirty){var isEditMode=viewMode===_dashboard_view_mode.DashboardViewMode.EDIT;var displayTitle;if(isEditMode&&isDirty){displayTitle=_i18n.i18n.translate("kbn.dashboard.strings.dashboardUnsavedEditTitle",{defaultMessage:"Editing {title} (unsaved)",values:{title:title}})}else if(isEditMode){displayTitle=_i18n.i18n.translate("kbn.dashboard.strings.dashboardEditTitle",{defaultMessage:"Editing {title}",values:{title:title}})}else{displayTitle=title}return displayTitle}},6274:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<dashboard-app\n  class="app-container dshAppContainer"\n  ng-class="{\'dshAppContainer--withMargins\': model.useMargins}"\n>\n  \x3c!-- Local nav. --\x3e\n  <kbn-top-nav name="dashboard" config="topNavMenu">\n    \x3c!-- Transcluded elements. --\x3e\n    <div data-transclude-slots>\n      \x3c!-- Search. --\x3e\n      <div ng-show="chrome.getVisible()" class="fullWidth" data-transclude-slot="bottomRow">\n        <search-bar\n          query="model.query"\n          screen-title="screenTitle"\n          on-query-submit="updateQueryAndFetch"\n          app-name="\'dashboard\'"\n          index-patterns="indexPatterns"\n          filters="model.filters"\n          on-filters-updated="onFiltersUpdated"\n          show-filter-bar="showFilterBar()"\n          show-date-picker="true"\n          date-range-from="model.timeRange.from"\n          date-range-to="model.timeRange.to"\n          is-refresh-paused="model.refreshInterval.pause"\n          refresh-interval="model.refreshInterval.value"\n          on-refresh-change="onRefreshChange"\n        ></search-bar>\n      </div>\n    </div>\n  </kbn-top-nav>\n\n  \x3c!--\n  The top nav is hidden in embed mode but the filter bar must still be present so\n  we show the filter bar on its own here if the chrome is not visible.\n--\x3e\n  <filter-bar\n    ng-if="showFilterBar() && !chrome.getVisible()"\n    class-name="\'globalFilterGroup__filterBar\'"\n    filters="model.filters"\n    on-filters-updated="onFiltersUpdated"\n    index-patterns="indexPatterns"\n  ></filter-bar>\n\n  <apply-filters-popover\n    filters="appState.$newFilters"\n    on-cancel="onCancelApplyFilters"\n    on-submit="onApplyFilters"\n  ></apply-filters-popover>\n\n  <div ng-show="getShouldShowEditHelp() || getShouldShowViewHelp()" class="dshStartScreen">\n    <div class="euiPanel euiPanel--paddingLarge euiPageContent euiPageContent--horizontalCenter">\n      <icon type="\'dashboardApp\'" size="\'xxl\'" color="\'subdued\'"></icon>\n\n      <br><br>\n\n      <div ng-show="getShouldShowEditHelp()" class="euiText">\n        <h2\n          i18n-id="kbn.dashboard.fillDashboardTitle"\n          i18n-default-message="This dashboard is empty. Let&rsquo;s fill it up!"\n        >\n        </h2>\n\n        <p>\n          <span\n            i18n-id="kbn.dashboard.addVisualizationDescription1"\n            i18n-default-message="Click the "\n            i18n-context="Part of composite label kbn.dashboard.addVisualizationDescription1 + kbn.dashboard.addVisualizationLinkText + kbn.dashboard.addVisualizationDescription2"\n          ></span>\n          <a\n            kbn-accessible-click\n            class="euiLink"\n            ng-click="showAddPanel()"\n            aria-label="{{::\'kbn.dashboard.addVisualizationLinkAriaLabel\' | i18n: { defaultMessage: \'Add visualization\' } }}"\n            data-test-subj="emptyDashboardAddPanelButton"\n            i18n-id="kbn.dashboard.addVisualizationLinkText"\n            i18n-default-message="Add"\n          ></a>\n          <span\n            i18n-id="kbn.dashboard.addVisualizationDescription2"\n            i18n-default-message=" button in the menu bar above to add a visualization to the dashboard."\n          ></span>\n        </p>\n        <p\n          i18n-id="kbn.dashboard.addVisualizationDescription3"\n          i18n-default-message="If you haven\'t set up any visualizations yet, {visitVisualizeAppLink} to create your first visualization."\n          i18n-values="{\n            html_visitVisualizeAppLink: \'<a class=\\\'euiLink\\\' href=\\\'#/visualize\\\'>\' + visitVisualizeAppLinkText + \'</a>\'\n          }"\n        ></p>\n      </div>\n\n      <div ng-show="getShouldShowViewHelp()" class="euiText">\n        <h2\n          i18n-id="kbn.dashboard.fillDashboardTitle"\n          i18n-default-message="This dashboard is empty. Let&rsquo;s fill it up!"\n        >\n        </h2>\n\n        <p>\n          <span\n            i18n-id="kbn.dashboard.howToStartWorkingOnNewDashboardDescription1"\n            i18n-default-message="Click the "\n            i18n-context="Part of composite label kbn.dashboard.howToStartWorkingOnNewDashboardDescription1 + kbn.dashboard.howToStartWorkingOnNewDashboardEditLinkText + kbn.dashboard.howToStartWorkingOnNewDashboardDescription2"\n          ></span>\n          <a\n            kbn-accessible-click\n            class="euiLink"\n            ng-click="enterEditMode()"\n            i18n-id="kbn.dashboard.howToStartWorkingOnNewDashboardEditLinkText"\n            i18n-default-message="Edit"\n          ></a>\n          <span\n            i18n-id="kbn.dashboard.howToStartWorkingOnNewDashboardDescription2"\n            i18n-default-message=" button in the menu bar above to start working on your new dashboard."\n          ></span>\n        </p>\n      </div>\n\n    </div>\n  </div>\n\n  <dashboard-viewport-provider\n    get-embeddable-factory="getEmbeddableFactory"\n  >\n  </dashboard-viewport-provider>\n\n</dashboard-app>\n'},6275:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<dashboard-listing\n  create-item="create"\n  get-view-url="getViewUrl"\n  edit-item="editItem"\n  find-items="find"\n  delete-items="delete"\n  listing-limit="listingLimit"\n  hide-write-controls="hideWriteControls"\n  initial-filter="initialFilter"\n/>\n'},6276:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DashboardListing=exports.EMPTY_FILTER=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(17));var _react2=__webpack_require__(10);var _i18n=__webpack_require__(5);var _eui=__webpack_require__(2);var _table_list_view=__webpack_require__(2049);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var EMPTY_FILTER="";exports.EMPTY_FILTER=EMPTY_FILTER;var DashboardListingUi=function(_React$Component){_inherits(DashboardListingUi,_React$Component);function DashboardListingUi(props){_classCallCheck(this,DashboardListingUi);return _possibleConstructorReturn(this,_getPrototypeOf(DashboardListingUi).call(this,props))}_createClass(DashboardListingUi,[{key:"render",value:function render(){return _react["default"].createElement(_table_list_view.TableListView,{createItem:this.props.hideWriteControls?null:this.props.createItem,findItems:this.props.findItems,deleteItems:this.props.hideWriteControls?null:this.props.deleteItems,editItem:this.props.hideWriteControls?null:this.props.editItem,tableColumns:this.getTableColumns(),listingLimit:this.props.listingLimit,initialFilter:this.props.initialFilter,noItemsFragment:this.getNoItemsMessage(),entityName:_i18n.i18n.translate("kbn.dashboard.listing.table.entityName",{defaultMessage:"dashboard"}),entityNamePlural:_i18n.i18n.translate("kbn.dashboard.listing.table.entityNamePlural",{defaultMessage:"dashboards"}),tableListTitle:_i18n.i18n.translate("kbn.dashboard.listing.dashboardsTitle",{defaultMessage:"Dashboards"})})}},{key:"getNoItemsMessage",value:function getNoItemsMessage(){if(this.props.hideWriteControls){return _react["default"].createElement("div",null,_react["default"].createElement(_eui.EuiEmptyPrompt,{iconType:"visualizeApp",title:_react["default"].createElement("h2",null,_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.dashboard.listing.noItemsMessage",defaultMessage:"Looks like you don't have any dashboards."}))}))}return _react["default"].createElement("div",null,_react["default"].createElement(_eui.EuiEmptyPrompt,{iconType:"dashboardApp",title:_react["default"].createElement("h2",null,_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.dashboard.listing.createNewDashboard.title",defaultMessage:"Create your first dashboard"})),body:_react["default"].createElement(_react.Fragment,null,_react["default"].createElement("p",null,_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.dashboard.listing.createNewDashboard.combineDataViewFromKibanaAppDescription",defaultMessage:"You can combine data views from any Kibana app into one dashboard and see everything in one place."})),_react["default"].createElement("p",null,_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.dashboard.listing.createNewDashboard.newToKibanaDescription",defaultMessage:"New to Kibana? {sampleDataInstallLink} to take a test drive.",values:{sampleDataInstallLink:_react["default"].createElement(_eui.EuiLink,{href:"#/home/tutorial_directory/sampleData"},_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.dashboard.listing.createNewDashboard.sampleDataInstallLinkText",defaultMessage:"Install some sample data"}))}}))),actions:_react["default"].createElement(_eui.EuiButton,{onClick:this.props.createItem,fill:true,iconType:"plusInCircle","data-test-subj":"createDashboardPromptButton"},_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.dashboard.listing.createNewDashboard.createButtonLabel",defaultMessage:"Create new dashboard"}))}))}},{key:"getTableColumns",value:function getTableColumns(){var _this=this;var tableColumns=[{field:"title",name:_i18n.i18n.translate("kbn.dashboard.listing.table.titleColumnName",{defaultMessage:"Title"}),sortable:true,render:function render(field,record){return _react["default"].createElement(_eui.EuiLink,{href:_this.props.getViewUrl(record),"data-test-subj":"dashboardListingTitleLink-".concat(record.title.split(" ").join("-"))},field)}},{field:"description",name:_i18n.i18n.translate("kbn.dashboard.listing.table.descriptionColumnName",{defaultMessage:"Description"}),dataType:"string",sortable:true}];return tableColumns}}]);return DashboardListingUi}(_react["default"].Component);DashboardListingUi.propTypes={createItem:_propTypes["default"].func.isRequired,findItems:_propTypes["default"].func.isRequired,deleteItems:_propTypes["default"].func.isRequired,editItem:_propTypes["default"].func.isRequired,getViewUrl:_propTypes["default"].func.isRequired,listingLimit:_propTypes["default"].number.isRequired,hideWriteControls:_propTypes["default"].bool.isRequired,initialFilter:_propTypes["default"].string};DashboardListingUi.defaultProps={initialFilter:EMPTY_FILTER};var DashboardListing=(0,_react2.injectI18n)(DashboardListingUi);exports.DashboardListing=DashboardListing},6277:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.updateLandingPage=updateLandingPage;exports.updateSidebar=updateSidebar;exports.destroyReact=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _i18n=__webpack_require__(5);var _reactDom=__webpack_require__(27);var _react2=__webpack_require__(10);__webpack_require__(6278);var _routes=_interopRequireDefault(__webpack_require__(34));var _i18n2=__webpack_require__(28);var _modules=__webpack_require__(12);var _app=_interopRequireDefault(__webpack_require__(6439));var _landing=_interopRequireDefault(__webpack_require__(6440));var _capabilities=__webpack_require__(141);var _management=__webpack_require__(349);var _feature_catalogue=__webpack_require__(128);var _timefilter=__webpack_require__(74);var _eui=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var SIDENAV_ID="management-sidenav";var LANDING_ID="management-landing";_routes["default"].when("/management",{template:_landing["default"],k7Breadcrumbs:function k7Breadcrumbs(){return[_management.MANAGEMENT_BREADCRUMB]}});_routes["default"].when("/management/:section",{redirectTo:"/management"});__webpack_require__(6441)({whenMissingRedirectTo:function whenMissingRedirectTo(){var canManageIndexPatterns=_capabilities.capabilities.get().management.kibana.index_patterns;return canManageIndexPatterns?"/management/kibana/index_pattern":"/home"}});function updateLandingPage(version){var node=document.getElementById(LANDING_ID);if(!node){return}(0,_reactDom.render)(_react["default"].createElement(_eui.EuiPageContent,{horizontalPosition:"center"},_react["default"].createElement(_i18n2.I18nContext,null,_react["default"].createElement("div",null,_react["default"].createElement("div",{className:"eui-textCenter"},_react["default"].createElement(_eui.EuiIcon,{type:"managementApp",size:"xxl"}),_react["default"].createElement(_eui.EuiSpacer,null),_react["default"].createElement(_eui.EuiTitle,null,_react["default"].createElement("h1",null,_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.landing.header",defaultMessage:"Kibana {version} management",values:{version:version}}))),_react["default"].createElement(_eui.EuiText,null,_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.landing.subhead",defaultMessage:"Manage your indices, index patterns, saved objects, Kibana settings, and more."}))),_react["default"].createElement(_eui.EuiHorizontalRule,null),_react["default"].createElement(_eui.EuiText,{color:"subdued",size:"s",textAlign:"center"},_react["default"].createElement("p",null,_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.landing.text",defaultMessage:"A full list of tools can be found in the left menu"})))))),node)}function updateSidebar(items,id){var node=document.getElementById(SIDENAV_ID);if(!node){return}(0,_reactDom.render)(_react["default"].createElement(_i18n2.I18nContext,null,_react["default"].createElement(_management.SidebarNav,{sections:items,selectedId:id,className:"mgtSideNav"})),node)}var destroyReact=function destroyReact(id){var node=document.getElementById(id);node&&(0,_reactDom.unmountComponentAtNode)(node)};exports.destroyReact=destroyReact;_modules.uiModules.get("apps/management").directive("kbnManagementApp",function($location){return{restrict:"E",template:_app["default"],transclude:true,scope:{sectionName:"@section",omitPages:"@omitBreadcrumbPages",pageTitle:"="},link:function link($scope){_timefilter.timefilter.disableAutoRefreshSelector();_timefilter.timefilter.disableTimeRangeSelector();$scope.sections=_management.management.visibleItems;$scope.section=_management.management.getSection($scope.sectionName)||_management.management;if($scope.section){$scope.section.items.forEach(function(item){item.active="#".concat($location.path()).indexOf(item.url)>-1})}updateSidebar($scope.sections,$scope.section.id);$scope.$on("$destroy",function(){return destroyReact(SIDENAV_ID)});_management.management.addListener(function(){return updateSidebar(_management.management.visibleItems,$scope.section.id)});updateLandingPage($scope.$root.chrome.getKibanaVersion());$scope.$on("$destroy",function(){return destroyReact(LANDING_ID)})}}});_modules.uiModules.get("apps/management").directive("kbnManagementLanding",function(kbnVersion){return{restrict:"E",link:function link($scope){$scope.sections=_management.management.visibleItems;$scope.kbnVersion=kbnVersion}}});_feature_catalogue.FeatureCatalogueRegistryProvider.register(function(){return{id:"management",title:_i18n.i18n.translate("kbn.management.managementLabel",{defaultMessage:"Management"}),description:_i18n.i18n.translate("kbn.management.managementDescription",{defaultMessage:"Your center console for managing the Elastic Stack."}),icon:"managementApp",path:"/app/kibana#/management",showOnHomePage:false,category:_feature_catalogue.FeatureCatalogueCategory.ADMIN}})},6278:function(module,exports,__webpack_require__){"use strict";__webpack_require__(6279);__webpack_require__(6308);__webpack_require__(6337)},6279:function(module,exports,__webpack_require__){"use strict";var _management=__webpack_require__(349);var _routes=_interopRequireDefault(__webpack_require__(34));var _modules=__webpack_require__(12);var _capabilities=__webpack_require__(141);var _i18n=__webpack_require__(28);var _index=_interopRequireDefault(__webpack_require__(6296));var _feature_catalogue=__webpack_require__(128);var _react=_interopRequireDefault(__webpack_require__(0));var _reactDom=__webpack_require__(27);var _advanced_settings=__webpack_require__(6297);var _i18n2=__webpack_require__(5);var _breadcrumbs=__webpack_require__(6307);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var REACT_ADVANCED_SETTINGS_DOM_ELEMENT_ID="reactAdvancedSettings";function updateAdvancedSettings($scope,config,query){$scope.$$postDigest(function(){var node=document.getElementById(REACT_ADVANCED_SETTINGS_DOM_ELEMENT_ID);if(!node){return}(0,_reactDom.render)(_react["default"].createElement(_i18n.I18nContext,null,_react["default"].createElement(_advanced_settings.AdvancedSettings,{config:config,query:query,enableSaving:_capabilities.capabilities.get().advancedSettings.save})),node)})}function destroyAdvancedSettings(){var node=document.getElementById(REACT_ADVANCED_SETTINGS_DOM_ELEMENT_ID);node&&(0,_reactDom.unmountComponentAtNode)(node)}_routes["default"].when("/management/kibana/settings/:setting?",{template:_index["default"],k7Breadcrumbs:_breadcrumbs.getBreadcrumbs,requireUICapability:"management.kibana.settings",badge:function badge(uiCapabilities){if(uiCapabilities.advancedSettings.save){return undefined}return{text:_i18n2.i18n.translate("kbn.management.advancedSettings.badge.readOnly.text",{defaultMessage:"Read only"}),tooltip:_i18n2.i18n.translate("kbn.management.advancedSettings.badge.readOnly.tooltip",{defaultMessage:"Unable to save advanced settings"}),iconType:"glasses"}}});_modules.uiModules.get("apps/management").directive("kbnManagementAdvanced",function(config,$route){return{restrict:"E",link:function link($scope){config.watchAll(function(){updateAdvancedSettings($scope,config,$route.current.params.setting||"")},$scope);$scope.$on("$destroy",function(){destroyAdvancedSettings()});$route.updateParams({setting:null})}}});_management.management.getSection("kibana").register("settings",{display:_i18n2.i18n.translate("kbn.management.settings.sectionLabel",{defaultMessage:"Advanced Settings"}),order:20,url:"#/management/kibana/settings"});_feature_catalogue.FeatureCatalogueRegistryProvider.register(function(){return{id:"advanced_settings",title:_i18n2.i18n.translate("kbn.management.settings.advancedSettingsLabel",{defaultMessage:"Advanced Settings"}),description:_i18n2.i18n.translate("kbn.management.settings.advancedSettingsDescription",{defaultMessage:"Directly edit settings that control behavior in Kibana."}),icon:"advancedSettingsApp",path:"/app/kibana#/management/kibana/settings",showOnHomePage:false,category:_feature_catalogue.FeatureCatalogueCategory.ADMIN}})},6280:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"PageTitle",{enumerable:true,get:function get(){return _page_title.PageTitle}});var _page_title=__webpack_require__(6281)},6281:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PageTitle=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(2);var _react2=__webpack_require__(10);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var PageTitle=function PageTitle(){return _react["default"].createElement(_eui.EuiText,null,_react["default"].createElement("h1",{"data-test-subj":"managementSettingsTitle"},_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.settings.pageTitle",defaultMessage:"Settings"})))};exports.PageTitle=PageTitle},6282:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"PageSubtitle",{enumerable:true,get:function get(){return _page_subtitle.PageSubtitle}});var _page_subtitle=__webpack_require__(6283)},6283:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PageSubtitle=void 0;var PageSubtitle=function PageSubtitle(){return null};exports.PageSubtitle=PageSubtitle},6284:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"PageFooter",{enumerable:true,get:function get(){return _page_footer.PageFooter}});var _page_footer=__webpack_require__(6285)},6285:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PageFooter=void 0;var PageFooter=function PageFooter(){return null};exports.PageFooter=PageFooter},6286:function(module,exports,__webpack_require__){module.exports=__webpack_require__(18)(2184)},6287:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isDefaultValue=isDefaultValue;function isDefaultValue(setting){return setting.isCustom||setting.value===undefined||setting.value===""||String(setting.value)===String(setting.defVal)}},6288:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.toEditableConfig=toEditableConfig;var _get_val_type=__webpack_require__(6289);var _get_aria_name=__webpack_require__(2061);var _default_category=__webpack_require__(2062);function toEditableConfig(_ref){var def=_ref.def,name=_ref.name,value=_ref.value,isCustom=_ref.isCustom,isOverridden=_ref.isOverridden;if(!def){def={}}var conf={name:name,displayName:def.name||name,ariaName:def.name||(0,_get_aria_name.getAriaName)(name),value:value,category:def.category&&def.category.length?def.category:[_default_category.DEFAULT_CATEGORY],isCustom:isCustom,isOverridden:isOverridden,readonly:!!def.readonly,defVal:def.value,type:(0,_get_val_type.getValType)(def,value),description:def.description,options:def.options,optionLabels:def.optionLabels,requiresPageReload:!!def.requiresPageReload};return conf}},6289:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getValType=getValType;function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function getValType(def,value){if(def.type){return def.type}if(Array.isArray(value)||Array.isArray(def.value)){return"array"}return def.value!=null?_typeof(def.value):_typeof(value)}},6290:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getCategoryName=getCategoryName;var _string_utils=__webpack_require__(1099);var _i18n=__webpack_require__(5);var names={general:_i18n.i18n.translate("kbn.management.settings.categoryNames.generalLabel",{defaultMessage:"General"}),timelion:_i18n.i18n.translate("kbn.management.settings.categoryNames.timelionLabel",{defaultMessage:"Timelion"}),notifications:_i18n.i18n.translate("kbn.management.settings.categoryNames.notificationsLabel",{defaultMessage:"Notifications"}),visualizations:_i18n.i18n.translate("kbn.management.settings.categoryNames.visualizationsLabel",{defaultMessage:"Visualizations"}),discover:_i18n.i18n.translate("kbn.management.settings.categoryNames.discoverLabel",{defaultMessage:"Discover"}),dashboard:_i18n.i18n.translate("kbn.management.settings.categoryNames.dashboardLabel",{defaultMessage:"Dashboard"}),reporting:_i18n.i18n.translate("kbn.management.settings.categoryNames.reportingLabel",{defaultMessage:"Reporting"}),search:_i18n.i18n.translate("kbn.management.settings.categoryNames.searchLabel",{defaultMessage:"Search"})};function getCategoryName(category){return category?names[category]||_string_utils.StringUtils.upperFirst(category):""}},6291:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.management=void 0;var _section=__webpack_require__(6292);var _i18n=__webpack_require__(5);var management=new _section.ManagementSection("management",{display:_i18n.i18n.translate("common.ui.management.displayName",{defaultMessage:"Management"})});exports.management=management;management.register("data",{display:_i18n.i18n.translate("common.ui.management.connectDataDisplayName",{defaultMessage:"Connect Data"}),order:0});management.register("elasticsearch",{display:"Elasticsearch",order:20,icon:"logoElasticsearch"});management.register("kibana",{display:"Kibana",order:30,icon:"logoKibana"});management.register("logstash",{display:"Logstash",order:30,icon:"logoLogstash"})},6292:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ManagementSection=void 0;var _lodash=__webpack_require__(1);var _indexed_array=__webpack_require__(182);var _capabilities=__webpack_require__(141);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var listeners=[];var ManagementSection=function(){function ManagementSection(id){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};_classCallCheck(this,ManagementSection);this.display=id;this.id=id;this.items=new _indexed_array.IndexedArray({index:["id"],order:["order"]});this.visible=true;this.disabled=false;this.tooltip="";this.icon="";this.url="";(0,_lodash.assign)(this,options)}_createClass(ManagementSection,[{key:"addListener",value:function addListener(fn){listeners.push(fn)}},{key:"register",value:function register(id){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var item=new ManagementSection(id,(0,_lodash.assign)(options,{parent:this}));if(this.hasItem(id)){throw new Error("'".concat(id,"' is already registered"))}this.items.push(item);listeners.forEach(function(fn){return fn()});return item}},{key:"deregister",value:function deregister(id){var _this=this;this.items.remove(function(item){return item.id===id});listeners.forEach(function(fn){return fn(_this.items)})}},{key:"hasItem",value:function hasItem(id){return this.items.byId.hasOwnProperty(id)}},{key:"getSection",value:function getSection(id){if(!id){return}var sectionPath=id.split("/");return sectionPath.reduce(function(currentSection,nextSection){if(!currentSection){return}return currentSection.items.byId[nextSection]},this)}},{key:"hide",value:function hide(){this.visible=false}},{key:"show",value:function show(){this.visible=true}},{key:"disable",value:function disable(){this.disabled=true}},{key:"enable",value:function enable(){this.disabled=false}},{key:"visibleItems",get:function get(){var _this2=this;return this.items.inOrder.filter(function(item){var capabilityManagementSection=_capabilities.capabilities.get().management[_this2.id];var itemCapability=capabilityManagementSection?capabilityManagementSection[item.id]:null;return item.visible&&itemCapability!==false})}}]);return ManagementSection}();exports.ManagementSection=ManagementSection},6293:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"SidebarNav",{enumerable:true,get:function get(){return _sidebar_nav.SidebarNav}});var _sidebar_nav=__webpack_require__(6294)},6294:function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.SidebarNav=exports.sideNavItems=void 0;var _eui=__webpack_require__(2);var _react=__webpack_require__(10);var _react2=_interopRequireDefault(__webpack_require__(0));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var sectionVisible=function sectionVisible(section){return!section.disabled&&section.visible};var sectionToNav=function sectionToNav(selectedId){return function(_ref){var display=_ref.display,id=_ref.id,url=_ref.url,icon=_ref.icon;return{id:id,name:display,icon:icon?_react2["default"].createElement(_eui.EuiIcon,{type:icon}):null,isSelected:selectedId===id,href:url,"data-test-subj":id}}};var sideNavItems=function sideNavItems(sections,selectedId){return sections.filter(sectionVisible).filter(function(section){return section.visibleItems.filter(sectionVisible).length}).map(function(section){return _objectSpread({items:section.visibleItems.filter(sectionVisible).map(sectionToNav(selectedId))},sectionToNav(selectedId)(section))})};exports.sideNavItems=sideNavItems;var SidebarNav=function(_React$Component){_inherits(SidebarNav,_React$Component);function SidebarNav(props){var _this;_classCallCheck(this,SidebarNav);_this=_possibleConstructorReturn(this,_getPrototypeOf(SidebarNav).call(this,props));_defineProperty(_assertThisInitialized(_this),"toggleOpenOnMobile",function(){_this.setState({isSideNavOpenOnMobile:!_this.state.isSideNavOpenOnMobile})});_this.state={isSideNavOpenOnMobile:false};return _this}_createClass(SidebarNav,[{key:"render",value:function render(){return _react2["default"].createElement(_eui.EuiSideNav,{mobileTitle:this.renderMobileTitle(),isOpenOnMobile:this.state.isSideNavOpenOnMobile,toggleOpenOnMobile:this.toggleOpenOnMobile,items:sideNavItems(this.props.sections,this.props.selectedId),className:"mgtSideBarNav"})}},{key:"renderMobileTitle",value:function renderMobileTitle(){return _react2["default"].createElement(_react.FormattedMessage,{id:"common.ui.management.nav.menu",defaultMessage:"Management menu"})}}]);return SidebarNav}(_react2["default"].Component);exports.SidebarNav=SidebarNav},6295:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.MANAGEMENT_BREADCRUMB=void 0;var _i18n=__webpack_require__(5);var MANAGEMENT_BREADCRUMB=Object.freeze({text:_i18n.i18n.translate("common.ui.management.breadcrumb",{defaultMessage:"Management"}),href:"#/management"});exports.MANAGEMENT_BREADCRUMB=MANAGEMENT_BREADCRUMB},6296:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<kbn-management-app section="kibana/settings">\n  <kbn-management-advanced>\n    <div id="reactAdvancedSettings"></div>\n  </kbn-management-advanced>\n</kbn-management-app>\n'},6297:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AdvancedSettings=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(17));var _eui=__webpack_require__(2);var _call_outs=__webpack_require__(6298);var _search=__webpack_require__(6300);var _form=__webpack_require__(6302);var _advanced_settings_voice_announcement=__webpack_require__(6305);var _lib=__webpack_require__(673);var _default_component_registry=__webpack_require__(2059);var _component_registry=__webpack_require__(1036);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var AdvancedSettings=function(_Component){_inherits(AdvancedSettings,_Component);function AdvancedSettings(props){var _this;_classCallCheck(this,AdvancedSettings);_this=_possibleConstructorReturn(this,_getPrototypeOf(AdvancedSettings).call(this,props));_defineProperty(_assertThisInitialized(_this),"saveConfig",function(name,value){return _this.props.config.set(name,value)});_defineProperty(_assertThisInitialized(_this),"clearConfig",function(name){return _this.props.config.remove(name)});_defineProperty(_assertThisInitialized(_this),"onQueryChange",function(_ref){var query=_ref.query;_this.setState({query:query,filteredSettings:_this.mapSettings(_eui.Query.execute(query,_this.settings))})});_defineProperty(_assertThisInitialized(_this),"clearQuery",function(){_this.setState({query:_eui.Query.parse(""),footerQueryMatched:false,filteredSettings:_this.groupedSettings})});_defineProperty(_assertThisInitialized(_this),"onFooterQueryMatchChange",function(matched){_this.setState({footerQueryMatched:matched})});var _this$props=_this.props,config=_this$props.config,_query=_this$props.query;var parsedQuery=_eui.Query.parse(_query?'ariaName:"'.concat((0,_lib.getAriaName)(_query),'"'):"");_this.init(config);_this.state={query:parsedQuery,footerQueryMatched:false,filteredSettings:_this.mapSettings(_eui.Query.execute(parsedQuery,_this.settings))};(0,_default_component_registry.registerDefaultComponents)();return _this}_createClass(AdvancedSettings,[{key:"init",value:function init(config){var _this2=this;this.settings=this.mapConfig(config);this.groupedSettings=this.mapSettings(this.settings);this.categories=Object.keys(this.groupedSettings).sort(function(a,b){if(a===_lib.DEFAULT_CATEGORY)return-1;if(b===_lib.DEFAULT_CATEGORY)return 1;if(a>b)return 1;return a===b?0:-1});this.categoryCounts=Object.keys(this.groupedSettings).reduce(function(counts,category){counts[category]=_this2.groupedSettings[category].length;return counts},{})}},{key:"componentWillReceiveProps",value:function componentWillReceiveProps(nextProps){var config=nextProps.config;var query=this.state.query;this.init(config);this.setState({filteredSettings:this.mapSettings(_eui.Query.execute(query,this.settings))})}},{key:"mapConfig",value:function mapConfig(config){var all=config.getAll();return Object.entries(all).map(function(setting){return(0,_lib.toEditableConfig)({def:setting[1],name:setting[0],value:setting[1].userValue,isCustom:config.isCustom(setting[0]),isOverridden:config.isOverridden(setting[0])})}).filter(function(c){return!c.readonly}).sort(_eui.Comparators.property("name",_eui.Comparators["default"]("asc")))}},{key:"mapSettings",value:function mapSettings(settings){return settings.reduce(function(groupedSettings,setting){var category=setting.category[0];(groupedSettings[category]=groupedSettings[category]||[]).push(setting);return groupedSettings},{})}},{key:"render",value:function render(){var _this$state=this.state,filteredSettings=_this$state.filteredSettings,query=_this$state.query,footerQueryMatched=_this$state.footerQueryMatched;var PageTitle=(0,_component_registry.getSettingsComponent)(_default_component_registry.PAGE_TITLE_COMPONENT);var PageSubtitle=(0,_component_registry.getSettingsComponent)(_default_component_registry.PAGE_SUBTITLE_COMPONENT);var PageFooter=(0,_component_registry.getSettingsComponent)(_default_component_registry.PAGE_FOOTER_COMPONENT);return _react["default"].createElement("div",null,_react["default"].createElement(_eui.EuiFlexGroup,{gutterSize:"none"},_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(PageTitle,null)),_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_search.Search,{query:query,categories:this.categories,onQueryChange:this.onQueryChange}))),_react["default"].createElement(PageSubtitle,null),_react["default"].createElement(_eui.EuiSpacer,{size:"m"}),_react["default"].createElement(_call_outs.CallOuts,null),_react["default"].createElement(_eui.EuiSpacer,{size:"m"}),_react["default"].createElement(_advanced_settings_voice_announcement.AdvancedSettingsVoiceAnnouncement,{queryText:query.text,settings:filteredSettings}),_react["default"].createElement(_form.Form,{settings:filteredSettings,categories:this.categories,categoryCounts:this.categoryCounts,clearQuery:this.clearQuery,save:this.saveConfig,clear:this.clearConfig,showNoResultsMessage:!footerQueryMatched,enableSaving:this.props.enableSaving}),_react["default"].createElement(PageFooter,{query:query,onQueryMatchChange:this.onFooterQueryMatchChange,enableSaving:this.props.enableSaving}))}}]);return AdvancedSettings}(_react.Component);exports.AdvancedSettings=AdvancedSettings;_defineProperty(AdvancedSettings,"propTypes",{config:_propTypes["default"].object.isRequired,query:_propTypes["default"].string,enableSaving:_propTypes["default"].bool.isRequired})},6298:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"CallOuts",{enumerable:true,get:function get(){return _call_outs.CallOuts}});var _call_outs=__webpack_require__(6299)},6299:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.CallOuts=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(2);var _react2=__webpack_require__(10);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var CallOuts=function CallOuts(){return _react["default"].createElement("div",null,_react["default"].createElement(_eui.EuiCallOut,{title:_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.settings.callOutCautionTitle",defaultMessage:"Caution: You can break stuff here"}),color:"warning",iconType:"bolt"},_react["default"].createElement("p",null,_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.settings.callOutCautionDescription",defaultMessage:"Be careful in here, these settings are for very advanced users only. Tweaks you make here can break large portions of Kibana. Some of these settings may be undocumented, unsupported or experimental. If a field has a default value, blanking the field will reset it to its default which may be unacceptable given other configuration directives. Deleting a custom setting will permanently remove it from Kibana's config."}))))};exports.CallOuts=CallOuts},6300:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"Search",{enumerable:true,get:function get(){return _search.Search}});var _search=__webpack_require__(6301)},6301:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Search=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(17));var _react2=__webpack_require__(10);var _eui=__webpack_require__(2);var _lib=__webpack_require__(673);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var SearchUI=function(_PureComponent){_inherits(SearchUI,_PureComponent);function SearchUI(props){var _this;_classCallCheck(this,SearchUI);_this=_possibleConstructorReturn(this,_getPrototypeOf(SearchUI).call(this,props));_defineProperty(_assertThisInitialized(_this),"state",{isSearchTextValid:true,parseErrorMessage:null});_defineProperty(_assertThisInitialized(_this),"onChange",function(_ref){var query=_ref.query,error=_ref.error;if(error){_this.setState({isSearchTextValid:false,parseErrorMessage:error.message});return}_this.setState({isSearchTextValid:true,parseErrorMessage:null});_this.props.onQueryChange({query:query})});var categories=props.categories;_this.categories=categories.map(function(category){return{value:category,name:(0,_lib.getCategoryName)(category)}});return _this}_createClass(SearchUI,[{key:"render",value:function render(){var _this$props=this.props,query=_this$props.query,intl=_this$props.intl;var box={incremental:true,"data-test-subj":"settingsSearchBar","aria-label":intl.formatMessage({id:"kbn.management.settings.searchBarAriaLabel",defaultMessage:"Search advanced settings"})};var filters=[{type:"field_value_selection",field:"category",name:intl.formatMessage({id:"kbn.management.settings.categorySearchLabel",defaultMessage:"Category"}),multiSelect:"or",options:this.categories}];var queryParseError;if(!this.state.isSearchTextValid){var parseErrorMsg=intl.formatMessage({id:"kbn.management.settings.searchBar.unableToParseQueryErrorMessage",defaultMessage:"Unable to parse query"});queryParseError=_react["default"].createElement(_eui.EuiFormErrorText,null,"".concat(parseErrorMsg,". ").concat(this.state.parseErrorMessage))}return _react["default"].createElement(_react.Fragment,null,_react["default"].createElement(_eui.EuiSearchBar,{box:box,filters:filters,onChange:this.onChange,query:query}),queryParseError)}}]);return SearchUI}(_react.PureComponent);_defineProperty(SearchUI,"propTypes",{categories:_propTypes["default"].array.isRequired,query:_propTypes["default"].object.isRequired,onQueryChange:_propTypes["default"].func.isRequired});var Search=(0,_react2.injectI18n)(SearchUI);exports.Search=Search},6302:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"Form",{enumerable:true,get:function get(){return _form.Form}});var _form=__webpack_require__(6303)},6303:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Form=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(17));var _eui=__webpack_require__(2);var _lib=__webpack_require__(673);var _field=__webpack_require__(6304);var _react2=__webpack_require__(10);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var FormUI=function(_PureComponent){_inherits(FormUI,_PureComponent);function FormUI(){_classCallCheck(this,FormUI);return _possibleConstructorReturn(this,_getPrototypeOf(FormUI).apply(this,arguments))}_createClass(FormUI,[{key:"renderClearQueryLink",value:function renderClearQueryLink(totalSettings,currentSettings){var clearQuery=this.props.clearQuery;if(totalSettings!==currentSettings){return _react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement("em",null,_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.settings.form.searchResultText",defaultMessage:"Search terms are hiding {settingsCount} settings {clearSearch}",values:{settingsCount:totalSettings-currentSettings,clearSearch:_react["default"].createElement(_eui.EuiLink,{onClick:clearQuery},_react["default"].createElement("em",null,_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.settings.form.clearSearchResultText",defaultMessage:"(clear search)"})))}})))}return null}},{key:"renderCategory",value:function renderCategory(category,settings,totalSettings){var _this=this;return _react["default"].createElement(_react.Fragment,{key:category},_react["default"].createElement(_eui.EuiPanel,{paddingSize:"l"},_react["default"].createElement(_eui.EuiForm,null,_react["default"].createElement(_eui.EuiText,null,_react["default"].createElement(_eui.EuiFlexGroup,{alignItems:"baseline"},_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement("h2",null,(0,_lib.getCategoryName)(category))),this.renderClearQueryLink(totalSettings,settings.length))),_react["default"].createElement(_eui.EuiSpacer,{size:"m"}),settings.map(function(setting){return _react["default"].createElement(_field.Field,{key:setting.name,setting:setting,save:_this.props.save,clear:_this.props.clear,enableSaving:_this.props.enableSaving})}))),_react["default"].createElement(_eui.EuiSpacer,{size:"l"}))}},{key:"maybeRenderNoSettings",value:function maybeRenderNoSettings(clearQuery){if(this.props.showNoResultsMessage){return _react["default"].createElement(_eui.EuiPanel,{paddingSize:"l"},_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.settings.form.noSearchResultText",defaultMessage:"No settings found {clearSearch}",values:{clearSearch:_react["default"].createElement(_eui.EuiLink,{onClick:clearQuery},_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.settings.form.clearNoSearchResultText",defaultMessage:"(clear search)"}))}}))}return null}},{key:"render",value:function render(){var _this2=this;var _this$props=this.props,settings=_this$props.settings,categories=_this$props.categories,categoryCounts=_this$props.categoryCounts,clearQuery=_this$props.clearQuery;var currentCategories=[];categories.forEach(function(category){if(settings[category]&&settings[category].length){currentCategories.push(category)}});return _react["default"].createElement(_react.Fragment,null,currentCategories.length?currentCategories.map(function(category){return _this2.renderCategory(category,settings[category],categoryCounts[category])}):this.maybeRenderNoSettings(clearQuery))}}]);return FormUI}(_react.PureComponent);_defineProperty(FormUI,"propTypes",{settings:_propTypes["default"].object.isRequired,categories:_propTypes["default"].array.isRequired,categoryCounts:_propTypes["default"].object.isRequired,clearQuery:_propTypes["default"].func.isRequired,save:_propTypes["default"].func.isRequired,clear:_propTypes["default"].func.isRequired,showNoResultsMessage:_propTypes["default"].bool.isRequired,enableSaving:_propTypes["default"].bool.isRequired});var Form=(0,_react2.injectI18n)(FormUI);exports.Form=Form},6304:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"Field",{enumerable:true,get:function get(){return _field.Field}});var _field=__webpack_require__(2060)},6305:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"AdvancedSettingsVoiceAnnouncement",{enumerable:true,get:function get(){return _advanced_settings_voice_announcement.AdvancedSettingsVoiceAnnouncement}});var _advanced_settings_voice_announcement=__webpack_require__(6306)},6306:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AdvancedSettingsVoiceAnnouncement=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _react2=__webpack_require__(10);var _eui=__webpack_require__(2);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var AdvancedSettingsVoiceAnnouncement=function(_Component){_inherits(AdvancedSettingsVoiceAnnouncement,_Component);function AdvancedSettingsVoiceAnnouncement(){var _this;_classCallCheck(this,AdvancedSettingsVoiceAnnouncement);_this=_possibleConstructorReturn(this,_getPrototypeOf(AdvancedSettingsVoiceAnnouncement).call(this));_defineProperty(_assertThisInitialized(_this),"shouldComponentUpdate",function(nextProps,nextState){var needsReset=nextProps.queryText!==_this.props.queryText;_this.resetDelayOffTiming(needsReset);return!nextState.isDelaying&&!needsReset});_defineProperty(_assertThisInitialized(_this),"resetDelayOffTiming",function(needsReset){if(!needsReset){return}clearTimeout(_this.delayID);_this.delayID=setTimeout(function(){return _this.turnDelayOff()},500)});_defineProperty(_assertThisInitialized(_this),"turnDelayOff",function(){_this.setState({isDelaying:false})});_defineProperty(_assertThisInitialized(_this),"componentWillUnmount",function(){clearTimeout(_this.delayID)});_this.state={isDelaying:true};_this.delayID=null;return _this}_createClass(AdvancedSettingsVoiceAnnouncement,[{key:"render",value:function render(){var _ref;if(this.props.queryText===""){return null}var filteredSections=Object.values(this.props.settings).map(function(setting){return setting.map(function(option){return option.ariaName})});var filteredOptions=(_ref=[]).concat.apply(_ref,_toConsumableArray(filteredSections));return _react["default"].createElement(_eui.EuiScreenReaderOnly,null,_react["default"].createElement("div",{role:"region","aria-live":"polite"},_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.settings.advancedSettings.voiceAnnouncement.searchResultScreenReaderMessage",defaultMessage:"You searched for {query}. There {optionLenght, plural, one {is # option} other {are # options}} in {sectionLenght, plural, one {# section} other {# sections}}",values:{query:this.props.queryText,sectionLenght:filteredSections.length,optionLenght:filteredOptions.length}})))}}]);return AdvancedSettingsVoiceAnnouncement}(_react.Component);exports.AdvancedSettingsVoiceAnnouncement=AdvancedSettingsVoiceAnnouncement},6307:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getBreadcrumbs=getBreadcrumbs;var _management=__webpack_require__(349);var _i18n=__webpack_require__(5);function getBreadcrumbs(){return[_management.MANAGEMENT_BREADCRUMB,{text:_i18n.i18n.translate("kbn.management.settings.breadcrumb",{defaultMessage:"Advanced settings"})}]}},6308:function(module,exports,__webpack_require__){"use strict";var _i18n=__webpack_require__(5);var _management=__webpack_require__(349);__webpack_require__(6309);__webpack_require__(6313);__webpack_require__(1003);var _modules=__webpack_require__(12);var _feature_catalogue=__webpack_require__(128);_modules.uiModules.get("apps/management");_management.management.getSection("kibana").register("objects",{display:_i18n.i18n.translate("kbn.management.objects.savedObjectsSectionLabel",{defaultMessage:"Saved Objects"}),order:10,url:"#/management/kibana/objects"});_feature_catalogue.FeatureCatalogueRegistryProvider.register(function(){return{id:"saved_objects",title:_i18n.i18n.translate("kbn.management.objects.savedObjectsTitle",{defaultMessage:"Saved Objects"}),description:_i18n.i18n.translate("kbn.management.objects.savedObjectsDescription",{defaultMessage:"Import, export, and manage your saved searches, visualizations, and dashboards."}),icon:"savedObjectsApp",path:"/app/kibana#/management/kibana/objects",showOnHomePage:true,category:_feature_catalogue.FeatureCatalogueCategory.ADMIN}})},6309:function(module,exports,__webpack_require__){"use strict";var _lodash=_interopRequireDefault(__webpack_require__(1));var _i18n=__webpack_require__(5);var _angular=_interopRequireDefault(__webpack_require__(31));__webpack_require__(6310);var _risonNode=_interopRequireDefault(__webpack_require__(251));var _saved_object_registry=__webpack_require__(347);var _view=_interopRequireDefault(__webpack_require__(6311));var _routes=_interopRequireDefault(__webpack_require__(34));var _modules=__webpack_require__(12);var _notify=__webpack_require__(24);__webpack_require__(2008);var _utils=__webpack_require__(428);var _saved_objects=__webpack_require__(108);var _numeric=__webpack_require__(6312);var _in_app_url=__webpack_require__(2063);var _breadcrumbs=__webpack_require__(2064);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}var location="SavedObject view";_routes["default"].when("/management/kibana/objects/:service/:id",{template:_view["default"],k7Breadcrumbs:_breadcrumbs.getViewBreadcrumbs,requireUICapability:"management.kibana.objects"});_modules.uiModules.get("apps/management",["monospaced.elastic"]).directive("kbnManagementObjectsView",function(kbnIndex,confirmModal){return{restrict:"E",controller:function controller($scope,$injector,$routeParams,$location,$window,$rootScope,Private,uiCapabilities){var serviceObj=_saved_object_registry.savedObjectManagementRegistry.get($routeParams.service);var service=$injector.get(serviceObj.service);var savedObjectsClient=Private(_saved_objects.SavedObjectsClientProvider);var createField=function createField(memo,val,key,collection,parents){if(Array.isArray(parents)){parents.push(key)}else{parents=[key]}var field={type:"text",name:parents.join("."),value:val};if(_lodash["default"].isString(field.value)){try{field.value=_angular["default"].toJson(JSON.parse(field.value),true);field.type="json"}catch(err){field.value=field.value}}else if((0,_numeric.isNumeric)(field.value)){field.type="number"}else if(Array.isArray(field.value)){field.type="array";field.value=_angular["default"].toJson(field.value,true)}else if(_lodash["default"].isBoolean(field.value)){field.type="boolean";field.value=field.value}else if(_lodash["default"].isPlainObject(field.value)){return _lodash["default"].reduce(field.value,_lodash["default"].partialRight(createField,parents),memo)}memo.push(field);parents.pop();return memo};var readObjectClass=function readObjectClass(fields,Class){var fieldMap=_lodash["default"].indexBy(fields,"name");_lodash["default"].forOwn(Class.mapping,function(esType,name){if(fieldMap[name])return;fields.push({name:name,type:function(){switch((0,_utils.castEsToKbnFieldTypeName)(esType)){case"string":return"text";case"number":return"number";case"boolean":return"boolean";default:return"json"}}()})});if(Class.searchSource&&!fieldMap["kibanaSavedObjectMeta.searchSourceJSON"]){fields.push({name:"kibanaSavedObjectMeta.searchSourceJSON",type:"json",value:"{}"})}if(!fieldMap.references){fields.push({name:"references",type:"array",value:"[]"})}};var _uiCapabilities$saved=uiCapabilities.savedObjectsManagement,canEdit=_uiCapabilities$saved.edit,canDelete=_uiCapabilities$saved["delete"];$scope.canEdit=canEdit;$scope.canDelete=canDelete;$scope.canViewInApp=(0,_in_app_url.canViewInApp)(uiCapabilities,service.type);$scope.notFound=$routeParams.notFound;$scope.title=service.type;savedObjectsClient.get(service.type,$routeParams.id).then(function(obj){$scope.obj=obj;$scope.link=service.urlFor(obj.id);var fields=_lodash["default"].reduce(obj.attributes,createField,[]);createField(fields,obj.references,"references");if(service.Class)readObjectClass(fields,service.Class);var nameSortedFields=_lodash["default"].sortBy(fields,"name");$scope.fields=_lodash["default"].sortBy(nameSortedFields,function(field){var orderIndex=service.Class.fieldOrder?service.Class.fieldOrder.indexOf(field.name):-1;return orderIndex>-1?orderIndex:Infinity})})["catch"](function(error){return(0,_notify.fatalError)(error,location)});var loadedEditors=[];$scope.aceInvalidEditors=[];$scope.aceLoaded=function(editor){if(_lodash["default"].contains(loadedEditors,editor))return;loadedEditors.push(editor);editor.$blockScrolling=Infinity;var session=editor.getSession();var fieldName=editor.container.id;session.setTabSize(2);session.setUseSoftTabs(true);session.on("changeAnnotation",function(){var annotations=session.getAnnotations();if(_lodash["default"].some(annotations,{type:"error"})){if(!_lodash["default"].contains($scope.aceInvalidEditors,fieldName)){$scope.aceInvalidEditors.push(fieldName)}}else{$scope.aceInvalidEditors=_lodash["default"].without($scope.aceInvalidEditors,fieldName)}if(!$rootScope.$$phase)$scope.$apply()})};$scope.cancel=function(){$window.history.back();return false};$scope["delete"]=function(){function doDelete(){savedObjectsClient["delete"](service.type,$routeParams.id).then(function(){return redirectHandler("deleted")})["catch"](function(error){return(0,_notify.fatalError)(error,location)})}var confirmModalOptions={onConfirm:doDelete,confirmButtonText:_i18n.i18n.translate("kbn.management.objects.confirmModalOptions.deleteButtonLabel",{defaultMessage:"Delete"}),title:_i18n.i18n.translate("kbn.management.objects.confirmModalOptions.modalTitle",{defaultMessage:"Delete saved Kibana object?"})};confirmModal(_i18n.i18n.translate("kbn.management.objects.confirmModalOptions.modalDescription",{defaultMessage:"You can't recover deleted objects"}),confirmModalOptions)};$scope.submit=function(){var source=_lodash["default"].cloneDeep($scope.obj.attributes);_lodash["default"].each($scope.fields,function(field){var value=field.value;if(field.type==="number"){value=Number(field.value)}if(field.type==="array"){value=JSON.parse(field.value)}_lodash["default"].set(source,field.name,value)});var references=source.references,attributes=_objectWithoutProperties(source,["references"]);savedObjectsClient.update(service.type,$routeParams.id,attributes,{references:references}).then(function(){return redirectHandler("updated")})["catch"](function(error){return(0,_notify.fatalError)(error,location)})};function redirectHandler(action){$location.path("/management/kibana/objects").search({_a:_risonNode["default"].encode({tab:serviceObj.title})});_notify.toastNotifications.addSuccess("".concat(_lodash["default"].capitalize(action)," '").concat($scope.obj.attributes.title,"' ").concat($scope.title.toLowerCase()," object"))}}}})},6310:function(module,exports,__webpack_require__){module.exports=__webpack_require__(18)(2167)},6311:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<kbn-management-app section="kibana/objects" class="kuiView" data-test-subj="savedObjectsEdit">\n  <kbn-management-objects-view class="kuiViewContent kuiViewContent--constrainedWidth">\n    \x3c!-- Header --\x3e\n    <div class="kuiViewContentItem kuiBar kuiVerticalRhythm">\n      <div class="kuiBarSection">\n        <h1\n          class="kuiTitle"\n          i18n-id="kbn.management.objects.view.editItemTitle"\n          i18n-default-message="Edit {title}"\n          i18n-values="{ title }"\n          ng-if="canEdit"\n        ></h1>\n\n        <h1\n          class="kuiTitle"\n          i18n-id="kbn.management.objects.view.viewItemTitle"\n          i18n-default-message="View {title}"\n          i18n-values="{ title }"\n          ng-if="!canEdit"\n        ></h1>\n      </div>\n\n      <div class="kuiBarSection">\n        <a\n          class="kuiButton kuiButton--basic kuiButton--iconText"\n          href="{{ link }}"\n          ng-if="canViewInApp"\n        >\n          <span class="kuiButton__inner">\n            <span class="kuiButton__icon kuiIcon fa-eye"></span>\n            <span\n              i18n-id="kbn.management.objects.view.viewItemButtonLabel"\n              i18n-default-message="View {title}"\n              i18n-values="{ title }"\n            ></span>\n          </span>\n        </a>\n\n        <button\n          class="kuiButton kuiButton--danger kuiButton--iconText"\n          ng-click="delete()"\n          ng-if="canDelete"\n          data-test-subj="savedObjectEditDelete"\n        >\n          <span class="kuiButton__inner">\n            <span class="kuiButton__icon kuiIcon fa-trash-o"></span>\n            <span\n              i18n-id="kbn.management.objects.view.deleteItemButtonLabel"\n              i18n-default-message="Delete {title}"\n              i18n-values="{ title }"\n              ></span>\n          </span>\n        </button>\n      </div>\n    </div>\n\n    \x3c!-- Errors --\x3e\n    <div\n      class="kuiViewContentItem kuiVerticalRhythm"\n      ng-if="notFound"\n    >\n      <div class="kuiInfoPanel kuiInfoPanel--error">\n        <div class="kuiInfoPanelHeader">\n          <span class="kuiInfoPanelHeader__icon kuiIcon kuiIcon--error fa-warning"></span>\n          <span\n            class="kuiInfoPanelHeader__title"\n            i18n-id="kbn.management.objects.view.savedObjectProblemErrorMessage"\n            i18n-default-message="There is a problem with this saved object"\n            ></span>\n        </div>\n\n        <div class="kuiInfoPanelBody">\n          <div\n            class="kuiInfoPanelBody__message"\n            ng-if="notFound === \'search\'"\n            i18n-id="kbn.management.objects.view.savedSearchDoesNotExistErrorMessage"\n            i18n-default-message="The saved search associated with this object no longer exists."\n          ></div>\n\n          <div\n            class="kuiInfoPanelBody__message"\n            ng-if="notFound === \'index-pattern\'"\n            i18n-id="kbn.management.objects.view.indexPatternDoesNotExistErrorMessage"\n            i18n-default-message="The index pattern associated with this object no longer exists."\n          ></div>\n\n          <div\n            class="kuiInfoPanelBody__message"\n            ng-if="notFound === \'index-pattern-field\'"\n            i18n-id="kbn.management.objects.view.fieldDoesNotExistErrorMessage"\n            i18n-default-message="A field associated with this object no longer exists in the index pattern."\n          ></div>\n\n          <div\n            class="kuiInfoPanelBody__message"\n            i18n-id="kbn.management.objects.view.howToFixErrorDescription"\n            i18n-default-message="If you know what this error means, go ahead and fix it &mdash; otherwise click the delete button above."\n          ></div>\n        </div>\n      </div>\n    </div>\n\n    \x3c!-- Intro --\x3e\n    <div class="kuiViewContentItem kuiVerticalRhythm">\n      <div class="kuiInfoPanel kuiInfoPanel--warning" ng-if="canEdit">\n        <div class="kuiInfoPanelHeader">\n          <span class="kuiInfoPanelHeader__icon kuiIcon kuiIcon--warning fa-bolt"></span>\n          <span\n            class="kuiInfoPanelHeader__title"\n            i18n-id="kbn.management.objects.view.howToModifyObjectTitle"\n            i18n-default-message="Proceed with caution!"\n          ></span>\n        </div>\n\n        <div class="kuiInfoPanelBody">\n          <div\n            class="kuiInfoPanelBody__message"\n            i18n-id="kbn.management.objects.view.howToModifyObjectDescription"\n            i18n-default-message=" Modifying objects is for advanced users only. Object properties are not validated and invalid objects could cause errors, data loss, or worse. Unless someone with intimate knowledge of the code told you to be in here, you probably shouldn&rsquo;t be."\n          >\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <div class="kuiViewContentItem kuiVerticalRhythm">\n      \x3c!-- Form --\x3e\n      <form\n        role="form"\n        name="objectForm"\n        ng-submit="submit()"\n        data-test-subj="savedObjectEditForm"\n      >\n        <div class="kuiFormSection" ng-repeat="field in fields">\n          <label for="{{ field.name }}" class="kuiFormLabel">\n            {{ field.name }}\n          </label>\n\n          <input\n            id="{{ field.name }}"\n            ng-if="field.type === \'number\'"\n            class="kuiTextInput"\n            type="number"\n            ng-model="field.value"\n            ng-disabled="{{ !canEdit }}"\n          >\n\n          <textarea\n            id="{{ field.name }}"\n            ng-if="field.type === \'text\'"\n            class="kuiTextArea"\n            rows="1"\n            msd-elastic=" "\n            ng-model="field.value"\n            ng-disabled="{{ !canEdit }}"\n          ></textarea>\n\n          <input\n            ng-if="field.type === \'boolean\'"\n            class="kuiCheckBox"\n            type="checkbox"\n            ng-model="field.value"\n            ng-checked="field.value"\n            ng-disabled="{{ !canEdit }}"\n          >\n\n          <div\n            ng-if="field.type === \'json\' || field.type === \'array\'"\n            kbn-ui-ace-keyboard-mod\n            ng-attr-readonly="{{ canEdit ? undefined : true }}"\n            ui-ace="{ onLoad: aceLoaded, mode: \'json\' }"\n            id="{{field.name}}"\n            ng-model="field.value"\n            class="form-control"\n          ></div>\n        </div>\n      </form>\n\n      \x3c!-- Actions --\x3e\n      <div class="kuiButtonGroup">\n        <button\n          class="kuiButton kuiButton--primary"\n          aria-label="{{ \'kbn.management.objects.view.saveButtonAriaLabel\' | i18n: { defaultMessage: \'Save { title } Object\', values: { title } } }}"\n          ng-click="submit()"\n          ng-disabled="objectForm.$invalid || aceInvalidEditors.length !==0"\n          i18n-id="kbn.management.objects.view.saveButtonLabel"\n          i18n-default-message="Save { title } Object"\n          i18n-values="{ title }"\n          ng-if="canEdit"\n          data-test-subj="savedObjectEditSave"\n        ></button>\n\n        <button\n          class="kuiButton kuiButton--basic"\n          aria-label="{{ \'kbn.management.objects.view.cancelButtonAriaLabel\' | i18n: { defaultMessage: \'Cancel\'} }}"\n          ng-click="cancel()"\n          i18n-id="kbn.management.objects.view.cancelButtonLabel"\n          i18n-default-message="Cancel"\n        ></button>\n      </div>\n    </div>\n  </kbn-management-objects-view>\n</kbn-management-app>\n'},6312:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isNumeric=isNumeric;var _lodash=_interopRequireDefault(__webpack_require__(1));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function isNumeric(v){return!_lodash["default"].isNaN(v)&&(typeof v==="number"||!Array.isArray(v)&&!_lodash["default"].isNaN(parseFloat(v)))}},6313:function(module,exports,__webpack_require__){"use strict";var _saved_object_registry=__webpack_require__(347);var _objects=_interopRequireDefault(__webpack_require__(6314));var _routes=_interopRequireDefault(__webpack_require__(34));var _chrome=_interopRequireDefault(__webpack_require__(19));var _saved_objects=__webpack_require__(108);var _modules=__webpack_require__(12);var _react=_interopRequireDefault(__webpack_require__(0));var _reactDom=__webpack_require__(27);var _objects_table=__webpack_require__(6315);var _i18n=__webpack_require__(28);var _lodash=__webpack_require__(1);var _new_platform=__webpack_require__(32);var _breadcrumbs=__webpack_require__(2064);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var REACT_OBJECTS_TABLE_DOM_ELEMENT_ID="reactSavedObjectsTable";function updateObjectsTable($scope,$injector){var Private=$injector.get("Private");var indexPatterns=$injector.get("indexPatterns");var $http=$injector.get("$http");var kbnUrl=$injector.get("kbnUrl");var config=$injector.get("config");var confirmModalPromise=$injector.get("confirmModalPromise");var savedObjectsClient=Private(_saved_objects.SavedObjectsClientProvider);var services=_saved_object_registry.savedObjectManagementRegistry.all().map(function(obj){return $injector.get(obj.service)});var uiCapabilites=_new_platform.npStart.core.application.capabilities;$scope.$$postDigest(function(){var node=document.getElementById(REACT_OBJECTS_TABLE_DOM_ELEMENT_ID);if(!node){return}(0,_reactDom.render)(_react["default"].createElement(_i18n.I18nContext,null,_react["default"].createElement(_objects_table.ObjectsTable,{savedObjectsClient:savedObjectsClient,confirmModalPromise:confirmModalPromise,services:services,indexPatterns:indexPatterns,$http:$http,perPageConfig:config.get("savedObjects:perPage"),basePath:_chrome["default"].getBasePath(),newIndexPatternUrl:kbnUrl.eval("#/management/kibana/index_pattern"),uiCapabilities:uiCapabilites,goInspectObject:function goInspectObject(object){if(object.meta.editUrl){kbnUrl.change(object.meta.editUrl);$scope.$apply()}},canGoInApp:function canGoInApp(object){var inAppUrl=object.meta.inAppUrl;return inAppUrl&&(0,_lodash.get)(uiCapabilites,inAppUrl.uiCapabilitiesPath)}})),node)})}function destroyObjectsTable(){var node=document.getElementById(REACT_OBJECTS_TABLE_DOM_ELEMENT_ID);node&&(0,_reactDom.unmountComponentAtNode)(node)}_routes["default"].when("/management/kibana/objects",{template:_objects["default"],k7Breadcrumbs:_breadcrumbs.getIndexBreadcrumbs,requireUICapability:"management.kibana.objects"}).when("/management/kibana/objects/:service",{redirectTo:"/management/kibana/objects"});_modules.uiModules.get("apps/management").directive("kbnManagementObjects",function(){return{restrict:"E",controllerAs:"managementObjectsController",controller:function controller($scope,$injector){updateObjectsTable($scope,$injector);$scope.$on("$destroy",destroyObjectsTable)}}})},6314:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<kbn-management-app section="kibana/objects">\n  <kbn-management-objects>\n    <div id="reactSavedObjectsTable"></div>\n  </kbn-management-objects>\n</kbn-management-app>\n'},6315:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"ObjectsTable",{enumerable:true,get:function get(){return _objects_table.ObjectsTable}});var _objects_table=__webpack_require__(2065)},6316:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"Header",{enumerable:true,get:function get(){return _header.Header}});var _header=__webpack_require__(6317)},6317:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Header=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(17));var _eui=__webpack_require__(2);var _react2=__webpack_require__(10);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}var Header=function Header(_ref){var onExportAll=_ref.onExportAll,onImport=_ref.onImport,onRefresh=_ref.onRefresh,filteredCount=_ref.filteredCount;return _react["default"].createElement(_react.Fragment,null,_react["default"].createElement(_eui.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"baseline"},_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiTitle,null,_react["default"].createElement("h1",null,_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.objects.objectsTable.header.savedObjectsTitle",defaultMessage:"Saved Objects"})))),_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiFlexGroup,{alignItems:"baseline",gutterSize:"m",responsive:false},_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiButtonEmpty,{size:"s",iconType:"exportAction","data-test-subj":"exportAllObjects",onClick:onExportAll},_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.objects.objectsTable.header.exportButtonLabel",defaultMessage:"Export {filteredCount, plural, one{# object} other {# objects}}",values:{filteredCount:filteredCount}}))),_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiButtonEmpty,{size:"s",iconType:"importAction","data-test-subj":"importObjects",onClick:onImport},_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.objects.objectsTable.header.importButtonLabel",defaultMessage:"Import"}))),_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiButtonEmpty,{size:"s",iconType:"refresh",onClick:onRefresh},_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.objects.objectsTable.header.refreshButtonLabel",defaultMessage:"Refresh"})))))),_react["default"].createElement(_eui.EuiSpacer,{size:"m"}),_react["default"].createElement(_eui.EuiText,{size:"s"},_react["default"].createElement("p",null,_react["default"].createElement(_eui.EuiTextColor,{color:"subdued"},_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.objects.objectsTable.howToDeleteSavedObjectsDescription",defaultMessage:"From here you can delete saved objects, such as saved searches. You can also edit the raw data of saved objects. Typically objects are only modified via their associated application, which is probably what you should use instead of this screen."})))),_react["default"].createElement(_eui.EuiSpacer,{size:"m"}))};exports.Header=Header;Header.propTypes={onExportAll:_propTypes["default"].func.isRequired,onImport:_propTypes["default"].func.isRequired,onRefresh:_propTypes["default"].func.isRequired,filteredCount:_propTypes["default"].number.isRequired}},6318:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"Flyout",{enumerable:true,get:function get(){return _flyout.Flyout}});var _flyout=__webpack_require__(6319)},6319:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Flyout=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(17));var _lodash=__webpack_require__(1);var _eui=__webpack_require__(2);var _lib=__webpack_require__(674);var _resolve_saved_objects=__webpack_require__(2066);var _objects_table=__webpack_require__(2065);var _react2=__webpack_require__(10);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var FlyoutUI=function(_Component){_inherits(FlyoutUI,_Component);function FlyoutUI(props){var _this;_classCallCheck(this,FlyoutUI);_this=_possibleConstructorReturn(this,_getPrototypeOf(FlyoutUI).call(this,props));_defineProperty(_assertThisInitialized(_this),"fetchIndexPatterns",_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var indexPatterns;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return _this.props.indexPatterns.getFields(["id","title"]);case 2:indexPatterns=_context.sent;_this.setState({indexPatterns:indexPatterns});case 4:case"end":return _context.stop()}}},_callee)})));_defineProperty(_assertThisInitialized(_this),"changeOverwriteAll",function(){_this.setState(function(state){return{isOverwriteAllChecked:!state.isOverwriteAllChecked}})});_defineProperty(_assertThisInitialized(_this),"setImportFile",function(_ref2){var _ref3=_slicedToArray(_ref2,1),file=_ref3[0];if(!file){_this.setState({file:undefined,isLegacyFile:false});return}_this.setState({file:file,isLegacyFile:/\.json$/i.test(file.name)||file.type==="application/json"})});_defineProperty(_assertThisInitialized(_this),"import",_asyncToGenerator(regeneratorRuntime.mark(function _callee2(){var intl,_this$state,file,isOverwriteAllChecked,response;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:intl=_this.props.intl;_this$state=_this.state,file=_this$state.file,isOverwriteAllChecked=_this$state.isOverwriteAllChecked;_this.setState({status:"loading",error:undefined});_context2.prev=3;_context2.next=6;return(0,_lib.importFile)(file,isOverwriteAllChecked);case 6:response=_context2.sent;_context2.next=13;break;case 9:_context2.prev=9;_context2.t0=_context2["catch"](3);_this.setState({status:"error",error:intl.formatMessage({id:"kbn.management.objects.objectsTable.flyout.importFileErrorMessage",defaultMessage:"The file could not be processed."})});return _context2.abrupt("return");case 13:_this.setState((0,_lib.processImportResponse)(response),function(){if(_this.state.unmatchedReferences.length===0){_this.resolveImportErrors()}});case 14:case"end":return _context2.stop()}}},_callee2,null,[[3,9]])})));_defineProperty(_assertThisInitialized(_this),"getConflictResolutions",function(){var _ref5=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(objects){var resolutions,_iteratorNormalCompletion,_didIteratorError,_iteratorError,_loop,_iterator,_step;return regeneratorRuntime.wrap(function _callee3$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:resolutions={};_iteratorNormalCompletion=true;_didIteratorError=false;_iteratorError=undefined;_context4.prev=4;_loop=regeneratorRuntime.mark(function _loop(){var _step$value,type,id,title,overwrite;return regeneratorRuntime.wrap(function _loop$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_step$value=_step.value,type=_step$value.type,id=_step$value.id,title=_step$value.title;_context3.next=3;return new Promise(function(resolve){_this.setState({conflictingRecord:{id:id,type:type,title:title,done:resolve}})});case 3:overwrite=_context3.sent;resolutions["".concat(type,":").concat(id)]=overwrite;_this.setState({conflictingRecord:undefined});case 6:case"end":return _context3.stop()}}},_loop)});_iterator=objects[Symbol.iterator]();case 7:if(_iteratorNormalCompletion=(_step=_iterator.next()).done){_context4.next=12;break}return _context4.delegateYield(_loop(),"t0",9);case 9:_iteratorNormalCompletion=true;_context4.next=7;break;case 12:_context4.next=18;break;case 14:_context4.prev=14;_context4.t1=_context4["catch"](4);_didIteratorError=true;_iteratorError=_context4.t1;case 18:_context4.prev=18;_context4.prev=19;if(!_iteratorNormalCompletion&&_iterator["return"]!=null){_iterator["return"]()}case 21:_context4.prev=21;if(!_didIteratorError){_context4.next=24;break}throw _iteratorError;case 24:return _context4.finish(21);case 25:return _context4.finish(18);case 26:return _context4.abrupt("return",resolutions);case 27:case"end":return _context4.stop()}}},_callee3,null,[[4,14,18,26],[19,,21,25]])}));return function(_x){return _ref5.apply(this,arguments)}}());_defineProperty(_assertThisInitialized(_this),"resolveImportErrors",_asyncToGenerator(regeneratorRuntime.mark(function _callee4(){var intl,updatedState;return regeneratorRuntime.wrap(function _callee4$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:intl=_this.props.intl;_this.setState({error:undefined,status:"loading",loadingMessage:undefined});_context5.prev=2;_context5.next=5;return(0,_lib.resolveImportErrors)({state:_this.state,getConflictResolutions:_this.getConflictResolutions});case 5:updatedState=_context5.sent;_this.setState(updatedState);_context5.next=12;break;case 9:_context5.prev=9;_context5.t0=_context5["catch"](2);_this.setState({status:"error",error:intl.formatMessage({id:"kbn.management.objects.objectsTable.flyout.resolveImportErrorsFileErrorMessage",defaultMessage:"The file could not be processed."})});case 12:case"end":return _context5.stop()}}},_callee4,null,[[2,9]])})));_defineProperty(_assertThisInitialized(_this),"legacyImport",_asyncToGenerator(regeneratorRuntime.mark(function _callee5(){var _this$props,services,indexPatterns,intl,confirmModalPromise,_this$state2,file,isOverwriteAllChecked,contents,_ref8,conflictedIndexPatterns,conflictedSavedObjectsLinkedToSavedSearches,conflictedSearchDocs,importedObjectCount,failedImports,byId,unmatchedReferences;return regeneratorRuntime.wrap(function _callee5$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_this$props=_this.props,services=_this$props.services,indexPatterns=_this$props.indexPatterns,intl=_this$props.intl,confirmModalPromise=_this$props.confirmModalPromise;_this$state2=_this.state,file=_this$state2.file,isOverwriteAllChecked=_this$state2.isOverwriteAllChecked;_this.setState({status:"loading",error:undefined});(0,_lib.logLegacyImport)();_context6.prev=4;_context6.next=7;return(0,_lib.importLegacyFile)(file);case 7:contents=_context6.sent;_context6.next=14;break;case 10:_context6.prev=10;_context6.t0=_context6["catch"](4);_this.setState({status:"error",error:intl.formatMessage({id:"kbn.management.objects.objectsTable.flyout.importLegacyFileErrorMessage",defaultMessage:"The file could not be processed."})});return _context6.abrupt("return");case 14:if(Array.isArray(contents)){_context6.next=17;break}_this.setState({status:"error",error:intl.formatMessage({id:"kbn.management.objects.objectsTable.flyout.invalidFormatOfImportedFileErrorMessage",defaultMessage:"Saved objects file format is invalid and cannot be imported."})});return _context6.abrupt("return");case 17:contents=contents.filter(function(content){return _objects_table.POSSIBLE_TYPES.includes(content._type)}).map(function(doc){return _objectSpread({},doc,{_migrationVersion:doc._migrationVersion||{}})});_context6.next=20;return(0,_resolve_saved_objects.resolveSavedObjects)(contents,isOverwriteAllChecked,services,indexPatterns,confirmModalPromise);case 20:_ref8=_context6.sent;conflictedIndexPatterns=_ref8.conflictedIndexPatterns;conflictedSavedObjectsLinkedToSavedSearches=_ref8.conflictedSavedObjectsLinkedToSavedSearches;conflictedSearchDocs=_ref8.conflictedSearchDocs;importedObjectCount=_ref8.importedObjectCount;failedImports=_ref8.failedImports;byId={};conflictedIndexPatterns.map(function(_ref9){var doc=_ref9.doc,obj=_ref9.obj;return{doc:doc,obj:obj._serialize()}}).forEach(function(_ref10){var doc=_ref10.doc,obj=_ref10.obj;return obj.references.forEach(function(ref){byId[ref.id]=byId[ref.id]!=null?byId[ref.id].concat({doc:doc,obj:obj}):[{doc:doc,obj:obj}]})});unmatchedReferences=Object.entries(byId).reduce(function(accum,_ref11){var _ref12=_slicedToArray(_ref11,2),existingIndexPatternId=_ref12[0],list=_ref12[1];accum.push({existingIndexPatternId:existingIndexPatternId,newIndexPatternId:undefined,list:list.map(function(_ref13){var doc=_ref13.doc;return{id:existingIndexPatternId,type:doc._type,title:doc._source.title}})});return accum},[]);_this.setState({conflictedIndexPatterns:conflictedIndexPatterns,conflictedSavedObjectsLinkedToSavedSearches:conflictedSavedObjectsLinkedToSavedSearches,conflictedSearchDocs:conflictedSearchDocs,failedImports:failedImports,unmatchedReferences:unmatchedReferences,importCount:importedObjectCount,status:unmatchedReferences.length===0?"success":"idle"});case 30:case"end":return _context6.stop()}}},_callee5,null,[[4,10]])})));_defineProperty(_assertThisInitialized(_this),"confirmLegacyImport",_asyncToGenerator(regeneratorRuntime.mark(function _callee6(){var _this$state3,conflictedIndexPatterns,isOverwriteAllChecked,conflictedSavedObjectsLinkedToSavedSearches,conflictedSearchDocs,failedImports,_this$props2,services,indexPatterns,intl,importCount,resolutions;return regeneratorRuntime.wrap(function _callee6$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_this$state3=_this.state,conflictedIndexPatterns=_this$state3.conflictedIndexPatterns,isOverwriteAllChecked=_this$state3.isOverwriteAllChecked,conflictedSavedObjectsLinkedToSavedSearches=_this$state3.conflictedSavedObjectsLinkedToSavedSearches,conflictedSearchDocs=_this$state3.conflictedSearchDocs,failedImports=_this$state3.failedImports;_this$props2=_this.props,services=_this$props2.services,indexPatterns=_this$props2.indexPatterns,intl=_this$props2.intl;_this.setState({error:undefined,status:"loading",loadingMessage:undefined});importCount=_this.state.importCount;if(!_this.hasUnmatchedReferences){_context7.next=34;break}_context7.prev=5;resolutions=_this.resolutions;_this.setState({loadingMessage:intl.formatMessage({id:"kbn.management.objects.objectsTable.flyout.confirmLegacyImport.resolvingConflictsLoadingMessage",defaultMessage:"Resolving conflicts"})});if(!resolutions.length){_context7.next=13;break}_context7.t0=importCount;_context7.next=12;return(0,_resolve_saved_objects.resolveIndexPatternConflicts)(resolutions,conflictedIndexPatterns,isOverwriteAllChecked);case 12:importCount=_context7.t0+=_context7.sent;case 13:_this.setState({loadingMessage:intl.formatMessage({id:"kbn.management.objects.objectsTable.flyout.confirmLegacyImport.savingConflictsLoadingMessage",defaultMessage:"Saving conflicts"})});_context7.t1=importCount;_context7.next=17;return(0,_resolve_saved_objects.saveObjects)(conflictedSavedObjectsLinkedToSavedSearches,isOverwriteAllChecked);case 17:importCount=_context7.t1+=_context7.sent;_this.setState({loadingMessage:intl.formatMessage({id:"kbn.management.objects.objectsTable.flyout.confirmLegacyImport.savedSearchAreLinkedProperlyLoadingMessage",defaultMessage:"Ensure saved searches are linked properly"})});_context7.t2=importCount;_context7.next=22;return(0,_resolve_saved_objects.resolveSavedSearches)(conflictedSearchDocs,services,indexPatterns,isOverwriteAllChecked);case 22:importCount=_context7.t2+=_context7.sent;_this.setState({loadingMessage:intl.formatMessage({id:"kbn.management.objects.objectsTable.flyout.confirmLegacyImport.retryingFailedObjectsLoadingMessage",defaultMessage:"Retrying failed objects"})});_context7.t3=importCount;_context7.next=27;return(0,_resolve_saved_objects.saveObjects)(failedImports.map(function(_ref15){var obj=_ref15.obj;return obj}),isOverwriteAllChecked);case 27:importCount=_context7.t3+=_context7.sent;_context7.next=34;break;case 30:_context7.prev=30;_context7.t4=_context7["catch"](5);_this.setState({error:_context7.t4.message,status:"error",loadingMessage:undefined});return _context7.abrupt("return");case 34:_this.setState({status:"success",importCount:importCount});case 35:case"end":return _context7.stop()}}},_callee6,null,[[5,30]])})));_defineProperty(_assertThisInitialized(_this),"onIndexChanged",function(id,e){var value=e.target.value;_this.setState(function(state){var conflictIndex=state.unmatchedReferences.findIndex(function(conflict){return conflict.existingIndexPatternId===id});if(conflictIndex===-1){return state}return{unmatchedReferences:[].concat(_toConsumableArray(state.unmatchedReferences.slice(0,conflictIndex)),[_objectSpread({},state.unmatchedReferences[conflictIndex],{newIndexPatternId:value})],_toConsumableArray(state.unmatchedReferences.slice(conflictIndex+1)))}})});_this.state={conflictedIndexPatterns:undefined,conflictedSavedObjectsLinkedToSavedSearches:undefined,conflictedSearchDocs:undefined,unmatchedReferences:undefined,conflictingRecord:undefined,error:undefined,file:undefined,importCount:0,indexPatterns:undefined,isOverwriteAllChecked:true,loadingMessage:undefined,isLegacyFile:false,status:"idle"};return _this}_createClass(FlyoutUI,[{key:"componentDidMount",value:function componentDidMount(){this.fetchIndexPatterns()}},{key:"renderUnmatchedReferences",value:function renderUnmatchedReferences(){var _this2=this;var unmatchedReferences=this.state.unmatchedReferences;var intl=this.props.intl;if(!unmatchedReferences){return null}var columns=[{field:"existingIndexPatternId",name:intl.formatMessage({id:"kbn.management.objects.objectsTable.flyout.renderConflicts.columnIdName",defaultMessage:"ID"}),description:intl.formatMessage({id:"kbn.management.objects.objectsTable.flyout.renderConflicts.columnIdDescription",defaultMessage:"ID of the index pattern"}),sortable:true},{field:"list",name:intl.formatMessage({id:"kbn.management.objects.objectsTable.flyout.renderConflicts.columnCountName",defaultMessage:"Count"}),description:intl.formatMessage({id:"kbn.management.objects.objectsTable.flyout.renderConflicts.columnCountDescription",defaultMessage:"How many affected objects"}),render:function render(list){return _react["default"].createElement(_react.Fragment,null,list.length)}},{field:"list",name:intl.formatMessage({id:"kbn.management.objects.objectsTable.flyout.renderConflicts.columnSampleOfAffectedObjectsName",defaultMessage:"Sample of affected objects"}),description:intl.formatMessage({id:"kbn.management.objects.objectsTable.flyout.renderConflicts.columnSampleOfAffectedObjectsDescription",defaultMessage:"Sample of affected objects"}),render:function render(list){return _react["default"].createElement("ul",{style:{listStyle:"none"}},(0,_lodash.take)(list,3).map(function(obj,key){return _react["default"].createElement("li",{key:key},obj.title)}))}},{field:"existingIndexPatternId",name:intl.formatMessage({id:"kbn.management.objects.objectsTable.flyout.renderConflicts.columnNewIndexPatternName",defaultMessage:"New index pattern"}),render:function render(id){var options=_this2.state.indexPatterns.map(function(indexPattern){return _defineProperty({text:indexPattern.get("title"),value:indexPattern.id},"data-test-subj","indexPatternOption-".concat(indexPattern.get("title")))});options.unshift({text:"-- Skip Import --",value:""});return _react["default"].createElement(_eui.EuiSelect,{"data-test-subj":"managementChangeIndexSelection-".concat(id),onChange:function onChange(e){return _this2.onIndexChanged(id,e)},options:options})}}];var pagination={pageSizeOptions:[5,10,25]};return _react["default"].createElement(_eui.EuiInMemoryTable,{items:unmatchedReferences,columns:columns,pagination:pagination})}},{key:"renderError",value:function renderError(){var _this$state4=this.state,error=_this$state4.error,status=_this$state4.status;if(status!=="error"){return null}return _react["default"].createElement(_react.Fragment,null,_react["default"].createElement(_eui.EuiCallOut,{title:_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.objects.objectsTable.flyout.errorCalloutTitle",defaultMessage:"Sorry, there was an error"}),color:"danger"},_react["default"].createElement("p",null,error)),_react["default"].createElement(_eui.EuiSpacer,{size:"s"}))}},{key:"renderBody",value:function renderBody(){var intl=this.props.intl;var _this$state5=this.state,status=_this$state5.status,loadingMessage=_this$state5.loadingMessage,isOverwriteAllChecked=_this$state5.isOverwriteAllChecked,importCount=_this$state5.importCount,_this$state5$failedIm=_this$state5.failedImports,failedImports=_this$state5$failedIm===void 0?[]:_this$state5$failedIm,isLegacyFile=_this$state5.isLegacyFile;if(status==="loading"){return _react["default"].createElement(_eui.EuiFlexGroup,{justifyContent:"spaceAround"},_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiLoadingKibana,{size:"xl"}),_react["default"].createElement(_eui.EuiSpacer,{size:"m"}),_react["default"].createElement(_eui.EuiText,null,_react["default"].createElement("p",null,loadingMessage))))}if(failedImports.length&&(!this.hasUnmatchedReferences||isLegacyFile===false&&status==="success")){return _react["default"].createElement(_eui.EuiCallOut,{title:_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.objects.objectsTable.flyout.importFailedTitle",defaultMessage:"Import failed"}),color:"warning",iconType:"help"},_react["default"].createElement("p",null,_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.objects.objectsTable.flyout.importFailedDescription",defaultMessage:"Failed to import {failedImportCount} of {totalImportCount} objects. Import failed",values:{failedImportCount:failedImports.length,totalImportCount:importCount+failedImports.length}})),_react["default"].createElement("p",null,failedImports.map(function(_ref17){var error=_ref17.error,obj=_ref17.obj;if(error.type==="missing_references"){return error.references.map(function(reference){return intl.formatMessage({id:"kbn.management.objects.objectsTable.flyout.importFailedMissingReference",defaultMessage:"{type} [id={id}] could not locate {refType} [id={refId}]"},{id:obj.id,type:obj.type,refId:reference.id,refType:reference.type})})}else if(error.type==="unsupported_type"){return intl.formatMessage({id:"kbn.management.objects.objectsTable.flyout.importFailedUnsupportedType",defaultMessage:"{type} [id={id}] unsupported type"},{id:obj.id,type:obj.type})}return(0,_lodash.get)(error,"body.message",error.message||"")}).join(" ")))}if(status==="success"){if(importCount===0){return _react["default"].createElement(_eui.EuiCallOut,{"data-test-subj":"importSavedObjectsSuccessNoneImported",title:_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.objects.objectsTable.flyout.importSuccessfulCallout.noObjectsImportedTitle",defaultMessage:"No objects imported"}),color:"primary"})}return _react["default"].createElement(_eui.EuiCallOut,{"data-test-subj":"importSavedObjectsSuccess",title:_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.objects.objectsTable.flyout.importSuccessfulTitle",defaultMessage:"Import successful"}),color:"success",iconType:"check"},_react["default"].createElement("p",null,_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.objects.objectsTable.flyout.importSuccessfulDescription",defaultMessage:"Successfully imported {importCount} objects.",values:{importCount:importCount}})))}if(this.hasUnmatchedReferences){return this.renderUnmatchedReferences()}return _react["default"].createElement(_eui.EuiForm,null,_react["default"].createElement(_eui.EuiFormRow,{label:_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.objects.objectsTable.flyout.selectFileToImportFormRowLabel",defaultMessage:"Please select a file to import"})},_react["default"].createElement(_eui.EuiFilePicker,{initialPromptText:_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.objects.objectsTable.flyout.importPromptText",defaultMessage:"Import"}),onChange:this.setImportFile})),_react["default"].createElement(_eui.EuiFormRow,null,_react["default"].createElement(_eui.EuiSwitch,{name:"overwriteAll",label:_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.objects.objectsTable.flyout.overwriteSavedObjectsLabel",defaultMessage:"Automatically overwrite all saved objects?"}),"data-test-subj":"importSavedObjectsOverwriteToggle",checked:isOverwriteAllChecked,onChange:this.changeOverwriteAll})))}},{key:"renderFooter",value:function renderFooter(){var status=this.state.status;var _this$props3=this.props,done=_this$props3.done,close=_this$props3.close;var confirmButton;if(status==="success"){confirmButton=_react["default"].createElement(_eui.EuiButton,{onClick:done,size:"s",fill:true,"data-test-subj":"importSavedObjectsDoneBtn"},_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.objects.objectsTable.flyout.importSuccessful.confirmButtonLabel",defaultMessage:"Done"}))}else if(this.hasUnmatchedReferences){confirmButton=_react["default"].createElement(_eui.EuiButton,{onClick:this.state.isLegacyFile?this.confirmLegacyImport:this.resolveImportErrors,size:"s",fill:true,isLoading:status==="loading","data-test-subj":"importSavedObjectsConfirmBtn"},_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.objects.objectsTable.flyout.importSuccessful.confirmAllChangesButtonLabel",defaultMessage:"Confirm all changes"}))}else{confirmButton=_react["default"].createElement(_eui.EuiButton,{onClick:this.state.isLegacyFile?this.legacyImport:this["import"],size:"s",fill:true,isLoading:status==="loading","data-test-subj":"importSavedObjectsImportBtn"},_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.objects.objectsTable.flyout.import.confirmButtonLabel",defaultMessage:"Import"}))}return _react["default"].createElement(_eui.EuiFlexGroup,{justifyContent:"spaceBetween"},_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiButtonEmpty,{onClick:close,size:"s"},_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.objects.objectsTable.flyout.import.cancelButtonLabel",defaultMessage:"Cancel"}))),_react["default"].createElement(_eui.EuiFlexItem,{grow:false},confirmButton))}},{key:"renderSubheader",value:function renderSubheader(){if(this.state.status==="loading"||this.state.status==="success"){return null}var legacyFileWarning;if(this.state.isLegacyFile){legacyFileWarning=_react["default"].createElement(_eui.EuiCallOut,{title:_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.objects.objectsTable.flyout.legacyFileUsedTitle",defaultMessage:"Support for JSON files is going away"}),color:"warning",iconType:"help"},_react["default"].createElement("p",null,_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.objects.objectsTable.flyout.legacyFileUsedBody",defaultMessage:"Use our updated export to generate NDJSON files, and you'll be all set."})))}var indexPatternConflictsWarning;if(this.hasUnmatchedReferences){indexPatternConflictsWarning=_react["default"].createElement(_eui.EuiCallOut,{title:_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.objects.objectsTable.flyout.indexPatternConflictsTitle",defaultMessage:"Index Pattern Conflicts"}),color:"warning",iconType:"help"},_react["default"].createElement("p",null,_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.objects.objectsTable.flyout.indexPatternConflictsDescription",defaultMessage:"The following saved objects use index patterns that do not exist. Please select the index patterns you'd like re-associated with them. You can {indexPatternLink} if necessary.",values:{indexPatternLink:_react["default"].createElement(_eui.EuiLink,{href:this.props.newIndexPatternUrl},_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.objects.objectsTable.flyout.indexPatternConflictsCalloutLinkText",defaultMessage:"create a new index pattern"}))}})))}if(!legacyFileWarning&&!indexPatternConflictsWarning){return null}return _react["default"].createElement(_react.Fragment,null,legacyFileWarning&&_react["default"].createElement("span",null,_react["default"].createElement(_eui.EuiSpacer,{size:"s"}),legacyFileWarning),indexPatternConflictsWarning&&_react["default"].createElement("span",null,_react["default"].createElement(_eui.EuiSpacer,{size:"s"}),indexPatternConflictsWarning))}},{key:"overwriteConfirmed",value:function overwriteConfirmed(){this.state.conflictingRecord.done(true)}},{key:"overwriteSkipped",value:function overwriteSkipped(){this.state.conflictingRecord.done(false)}},{key:"render",value:function render(){var _this$props4=this.props,close=_this$props4.close,intl=_this$props4.intl;var confirmOverwriteModal;if(this.state.conflictingRecord){confirmOverwriteModal=_react["default"].createElement(_eui.EuiOverlayMask,null,_react["default"].createElement(_eui.EuiConfirmModal,{title:intl.formatMessage({id:"kbn.management.objects.objectsTable.flyout.confirmOverwriteTitle",defaultMessage:"Overwrite {type}?"},{type:this.state.conflictingRecord.type}),cancelButtonText:intl.formatMessage({id:"kbn.management.objects.objectsTable.flyout.confirmOverwriteCancelButtonText",defaultMessage:"Cancel"}),confirmButtonText:intl.formatMessage({id:"kbn.management.objects.objectsTable.flyout.confirmOverwriteOverwriteButtonText",defaultMessage:"Overwrite"}),buttonColor:"danger",onCancel:this.overwriteSkipped.bind(this),onConfirm:this.overwriteConfirmed.bind(this),defaultFocusedButton:_eui.EUI_MODAL_CONFIRM_BUTTON},_react["default"].createElement("p",null,_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.objects.objectsTable.flyout.confirmOverwriteBody",defaultMessage:"Are you sure you want to overwrite {title}?",values:{title:this.state.conflictingRecord.title||(0,_lib.getDefaultTitle)(this.state.conflictingRecord)}}))))}return _react["default"].createElement(_eui.EuiFlyout,{onClose:close,size:"s"},_react["default"].createElement(_eui.EuiFlyoutHeader,{hasBorder:true},_react["default"].createElement(_eui.EuiTitle,{size:"m"},_react["default"].createElement("h2",null,_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.objects.objectsTable.flyout.importSavedObjectTitle",defaultMessage:"Import saved objects"})))),_react["default"].createElement(_eui.EuiFlyoutBody,null,this.renderSubheader(),this.renderError(),this.renderBody()),_react["default"].createElement(_eui.EuiFlyoutFooter,null,this.renderFooter()),confirmOverwriteModal)}},{key:"hasUnmatchedReferences",get:function get(){return this.state.unmatchedReferences&&this.state.unmatchedReferences.length>0}},{key:"resolutions",get:function get(){return this.state.unmatchedReferences.reduce(function(accum,_ref18){var existingIndexPatternId=_ref18.existingIndexPatternId,newIndexPatternId=_ref18.newIndexPatternId;if(newIndexPatternId){accum.push({oldId:existingIndexPatternId,newId:newIndexPatternId})}return accum},[])}}]);return FlyoutUI}(_react.Component);_defineProperty(FlyoutUI,"propTypes",{close:_propTypes["default"].func.isRequired,done:_propTypes["default"].func.isRequired,services:_propTypes["default"].array.isRequired,newIndexPatternUrl:_propTypes["default"].string.isRequired,indexPatterns:_propTypes["default"].object.isRequired,confirmModalPromise:_propTypes["default"].func.isRequired});var Flyout=(0,_react2.injectI18n)(FlyoutUI);exports.Flyout=Flyout},6320:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.fetchExportByType=fetchExportByType;var _kfetch=__webpack_require__(109);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function fetchExportByType(_x){return _fetchExportByType.apply(this,arguments)}function _fetchExportByType(){_fetchExportByType=_asyncToGenerator(regeneratorRuntime.mark(function _callee(types){var includeReferencesDeep,_args=arguments;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:includeReferencesDeep=_args.length>1&&_args[1]!==undefined?_args[1]:false;_context.next=3;return(0,_kfetch.kfetch)({method:"POST",pathname:"/api/saved_objects/_export",body:JSON.stringify({type:types,includeReferencesDeep:includeReferencesDeep})});case 3:return _context.abrupt("return",_context.sent);case 4:case"end":return _context.stop()}}},_callee)}));return _fetchExportByType.apply(this,arguments)}},6321:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.fetchExportObjects=fetchExportObjects;var _kfetch=__webpack_require__(109);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function fetchExportObjects(_x){return _fetchExportObjects.apply(this,arguments)}function _fetchExportObjects(){_fetchExportObjects=_asyncToGenerator(regeneratorRuntime.mark(function _callee(objects){var includeReferencesDeep,_args=arguments;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:includeReferencesDeep=_args.length>1&&_args[1]!==undefined?_args[1]:false;_context.next=3;return(0,_kfetch.kfetch)({method:"POST",pathname:"/api/saved_objects/_export",body:JSON.stringify({objects:objects,includeReferencesDeep:includeReferencesDeep})});case 3:return _context.abrupt("return",_context.sent);case 4:case"end":return _context.stop()}}},_callee)}));return _fetchExportObjects.apply(this,arguments)}},6322:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getRelationships=getRelationships;var _lodash=__webpack_require__(1);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function getRelationships(_x,_x2,_x3,_x4,_x5){return _getRelationships.apply(this,arguments)}function _getRelationships(){_getRelationships=_asyncToGenerator(regeneratorRuntime.mark(function _callee(type,id,savedObjectTypes,$http,basePath){var url,options,response,respBody,err;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:url="".concat(basePath,"/api/kibana/management/saved_objects/relationships/").concat(encodeURIComponent(type),"/").concat(encodeURIComponent(id));options={method:"GET",url:url,params:{savedObjectTypes:savedObjectTypes}};_context.prev=2;_context.next=5;return $http(options);case 5:response=_context.sent;return _context.abrupt("return",response?response.data:undefined);case 9:_context.prev=9;_context.t0=_context["catch"](2);respBody=(0,_lodash.get)(_context.t0,"data",{});err=new Error(respBody.message||respBody.error||"".concat(_context.t0.status," Response"));err.statusCode=respBody.statusCode||_context.t0.status;err.body=respBody;throw err;case 16:case"end":return _context.stop()}}},_callee,null,[[2,9]])}));return _getRelationships.apply(this,arguments)}},6323:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getSavedObjectCounts=getSavedObjectCounts;var _chrome=_interopRequireDefault(__webpack_require__(19));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}var apiBase=_chrome["default"].addBasePath("/api/kibana/management/saved_objects/scroll");function getSavedObjectCounts(_x,_x2,_x3){return _getSavedObjectCounts.apply(this,arguments)}function _getSavedObjectCounts(){_getSavedObjectCounts=_asyncToGenerator(regeneratorRuntime.mark(function _callee($http,typesToInclude,searchString){var results;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return $http.post("".concat(apiBase,"/counts"),{typesToInclude:typesToInclude,searchString:searchString});case 2:results=_context.sent;return _context.abrupt("return",results.data);case 4:case"end":return _context.stop()}}},_callee)}));return _getSavedObjectCounts.apply(this,arguments)}},6324:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getSavedObjectLabel=getSavedObjectLabel;function getSavedObjectLabel(type){switch(type){case"index-pattern":case"index-patterns":case"indexPatterns":return"index patterns";default:return type}}},6325:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.importFile=importFile;var _kfetch=__webpack_require__(109);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function importFile(_x){return _importFile.apply(this,arguments)}function _importFile(){_importFile=_asyncToGenerator(regeneratorRuntime.mark(function _callee(file){var overwriteAll,formData,_args=arguments;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:overwriteAll=_args.length>1&&_args[1]!==undefined?_args[1]:false;formData=new FormData;formData.append("file",file);_context.next=5;return(0,_kfetch.kfetch)({method:"POST",pathname:"/api/saved_objects/_import",body:formData,headers:{"Content-Type":undefined},query:{overwrite:overwriteAll}});case 5:return _context.abrupt("return",_context.sent);case 6:case"end":return _context.stop()}}},_callee)}));return _importFile.apply(this,arguments)}},6326:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.importLegacyFile=importLegacyFile;function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function importLegacyFile(_x){return _importLegacyFile.apply(this,arguments)}function _importLegacyFile(){_importLegacyFile=_asyncToGenerator(regeneratorRuntime.mark(function _callee(file){var FileReader,_args=arguments;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:FileReader=_args.length>1&&_args[1]!==undefined?_args[1]:window.FileReader;return _context.abrupt("return",new Promise(function(resolve,reject){var fr=new FileReader;fr.onload=function(_ref){var result=_ref.target.result;try{resolve(JSON.parse(result))}catch(e){reject(e)}};fr.readAsText(file)}));case 2:case"end":return _context.stop()}}},_callee)}));return _importLegacyFile.apply(this,arguments)}},6327:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.parseQuery=parseQuery;function parseQuery(query){var queryText=undefined;var visibleTypes=undefined;if(query){if(query.ast.getTermClauses().length){queryText=query.ast.getTermClauses().map(function(clause){return clause.value}).join(" ")}if(query.ast.getFieldClauses("type")){visibleTypes=query.ast.getFieldClauses("type")[0].value}}return{queryText:queryText,visibleTypes:visibleTypes}}},6328:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.resolveImportErrors=resolveImportErrors;var _kfetch=__webpack_require__(109);function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function callResolveImportErrorsApi(_x,_x2){return _callResolveImportErrorsApi.apply(this,arguments)}function _callResolveImportErrorsApi(){_callResolveImportErrorsApi=_asyncToGenerator(regeneratorRuntime.mark(function _callee(file,retries){var formData;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:formData=new FormData;formData.append("file",file);formData.append("retries",JSON.stringify(retries));_context.next=5;return(0,_kfetch.kfetch)({method:"POST",pathname:"/api/saved_objects/_resolve_import_errors",headers:{"Content-Type":undefined},body:formData});case 5:return _context.abrupt("return",_context.sent);case 6:case"end":return _context.stop()}}},_callee)}));return _callResolveImportErrorsApi.apply(this,arguments)}function mapImportFailureToRetryObject(_ref){var failure=_ref.failure,overwriteDecisionCache=_ref.overwriteDecisionCache,replaceReferencesCache=_ref.replaceReferencesCache,state=_ref.state;var isOverwriteAllChecked=state.isOverwriteAllChecked,unmatchedReferences=state.unmatchedReferences;var isOverwriteGranted=isOverwriteAllChecked||overwriteDecisionCache.get("".concat(failure.obj.type,":").concat(failure.obj.id))===true;if(!isOverwriteGranted&&failure.error.type==="conflict"){return}if(failure.error.type==="missing_references"){var objReplaceReferences=replaceReferencesCache.get("".concat(failure.obj.type,":").concat(failure.obj.id))||[];var indexPatternRefs=failure.error.references.filter(function(obj){return obj.type==="index-pattern"});var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=indexPatternRefs[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var reference=_step.value;var _iteratorNormalCompletion2=true;var _didIteratorError2=false;var _iteratorError2=undefined;try{for(var _iterator2=unmatchedReferences[Symbol.iterator](),_step2;!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=true){var unmatchedReference=_step2.value;var hasNewValue=!!unmatchedReference.newIndexPatternId;var matchesIndexPatternId=unmatchedReference.existingIndexPatternId===reference.id;if(!hasNewValue||!matchesIndexPatternId){continue}objReplaceReferences.push({type:"index-pattern",from:unmatchedReference.existingIndexPatternId,to:unmatchedReference.newIndexPatternId})}}catch(err){_didIteratorError2=true;_iteratorError2=err}finally{try{if(!_iteratorNormalCompletion2&&_iterator2["return"]!=null){_iterator2["return"]()}}finally{if(_didIteratorError2){throw _iteratorError2}}}}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator["return"]!=null){_iterator["return"]()}}finally{if(_didIteratorError){throw _iteratorError}}}replaceReferencesCache.set("".concat(failure.obj.type,":").concat(failure.obj.id),objReplaceReferences);if(objReplaceReferences.length===0){return}}return{id:failure.obj.id,type:failure.obj.type,overwrite:isOverwriteAllChecked||overwriteDecisionCache.get("".concat(failure.obj.type,":").concat(failure.obj.id))===true,replaceReferences:replaceReferencesCache.get("".concat(failure.obj.type,":").concat(failure.obj.id))||[]}}function resolveImportErrors(_x3){return _resolveImportErrors.apply(this,arguments)}function _resolveImportErrors(){_resolveImportErrors=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(_ref2){var getConflictResolutions,state,overwriteDecisionCache,replaceReferencesCache,successImportCount,_state$failedImports,importFailures,file,isOverwriteAllChecked,doesntHaveOverwriteDecision,getOverwriteDecision,callMapImportFailure,isNotSkipped,result,_i,_Object$keys,key,retries,_iteratorNormalCompletion3,_didIteratorError3,_iteratorError3,_loop,_iterator3,_step3,_ret,response,_iteratorNormalCompletion4,_didIteratorError4,_iteratorError4,_iterator4,_step4,_step4$value,error,obj;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:getConflictResolutions=_ref2.getConflictResolutions,state=_ref2.state;overwriteDecisionCache=new Map;replaceReferencesCache=new Map;successImportCount=state.importCount,_state$failedImports=state.failedImports,importFailures=_state$failedImports===void 0?[]:_state$failedImports;file=state.file,isOverwriteAllChecked=state.isOverwriteAllChecked;doesntHaveOverwriteDecision=function doesntHaveOverwriteDecision(_ref3){var obj=_ref3.obj;return!overwriteDecisionCache.has("".concat(obj.type,":").concat(obj.id))};getOverwriteDecision=function getOverwriteDecision(_ref4){var obj=_ref4.obj;return overwriteDecisionCache.get("".concat(obj.type,":").concat(obj.id))};callMapImportFailure=function callMapImportFailure(failure){return mapImportFailureToRetryObject({failure:failure,overwriteDecisionCache:overwriteDecisionCache,replaceReferencesCache:replaceReferencesCache,state:state})};isNotSkipped=function isNotSkipped(failure){return failure.error.type!=="conflict"&&failure.error.type!=="missing_references"||getOverwriteDecision(failure)};case 9:if(!importFailures.some(function(failure){return["conflict","missing_references"].includes(failure.error.type)})){_context2.next=72;break}if(isOverwriteAllChecked){_context2.next=15;break}_context2.next=13;return getConflictResolutions(importFailures.filter(function(_ref5){var error=_ref5.error;return error.type==="conflict"}).filter(doesntHaveOverwriteDecision).map(function(_ref6){var obj=_ref6.obj;return obj}));case 13:result=_context2.sent;for(_i=0,_Object$keys=Object.keys(result);_i<_Object$keys.length;_i++){key=_Object$keys[_i];overwriteDecisionCache.set(key,result[key])}case 15:retries=importFailures.map(callMapImportFailure).filter(function(obj){return!!obj});_iteratorNormalCompletion3=true;_didIteratorError3=false;_iteratorError3=undefined;_context2.prev=19;_loop=function _loop(){var _step3$value=_step3.value,error=_step3$value.error,obj=_step3$value.obj;if(error.type!=="missing_references"){return"continue"}if(!retries.some(function(retryObj){return retryObj.type===obj.type&&retryObj.id===obj.id})){return"continue"}var _iteratorNormalCompletion5=true;var _didIteratorError5=false;var _iteratorError5=undefined;try{for(var _iterator5=(error.blocking||[])[Symbol.iterator](),_step5;!(_iteratorNormalCompletion5=(_step5=_iterator5.next()).done);_iteratorNormalCompletion5=true){var _step5$value=_step5.value,type=_step5$value.type,id=_step5$value.id;retries.push({type:type,id:id})}}catch(err){_didIteratorError5=true;_iteratorError5=err}finally{try{if(!_iteratorNormalCompletion5&&_iterator5["return"]!=null){_iterator5["return"]()}}finally{if(_didIteratorError5){throw _iteratorError5}}}};_iterator3=importFailures[Symbol.iterator]();case 22:if(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done){_context2.next=29;break}_ret=_loop();if(!(_ret==="continue")){_context2.next=26;break}return _context2.abrupt("continue",26);case 26:_iteratorNormalCompletion3=true;_context2.next=22;break;case 29:_context2.next=35;break;case 31:_context2.prev=31;_context2.t0=_context2["catch"](19);_didIteratorError3=true;_iteratorError3=_context2.t0;case 35:_context2.prev=35;_context2.prev=36;if(!_iteratorNormalCompletion3&&_iterator3["return"]!=null){_iterator3["return"]()}case 38:_context2.prev=38;if(!_didIteratorError3){_context2.next=41;break}throw _iteratorError3;case 41:return _context2.finish(38);case 42:return _context2.finish(35);case 43:if(!(retries.length===0)){_context2.next=46;break}importFailures=importFailures.filter(isNotSkipped);return _context2.abrupt("break",72);case 46:_context2.next=48;return callResolveImportErrorsApi(file,retries);case 48:response=_context2.sent;successImportCount+=response.successCount;importFailures=[];_iteratorNormalCompletion4=true;_didIteratorError4=false;_iteratorError4=undefined;_context2.prev=54;for(_iterator4=(response.errors||[])[Symbol.iterator]();!(_iteratorNormalCompletion4=(_step4=_iterator4.next()).done);_iteratorNormalCompletion4=true){_step4$value=_step4.value,error=_step4$value.error,obj=_objectWithoutProperties(_step4$value,["error"]);importFailures.push({error:error,obj:obj})}_context2.next=62;break;case 58:_context2.prev=58;_context2.t1=_context2["catch"](54);_didIteratorError4=true;_iteratorError4=_context2.t1;case 62:_context2.prev=62;_context2.prev=63;if(!_iteratorNormalCompletion4&&_iterator4["return"]!=null){_iterator4["return"]()}case 65:_context2.prev=65;if(!_didIteratorError4){_context2.next=68;break}throw _iteratorError4;case 68:return _context2.finish(65);case 69:return _context2.finish(62);case 70:_context2.next=9;break;case 72:return _context2.abrupt("return",{status:"success",importCount:successImportCount,failedImports:importFailures});case 73:case"end":return _context2.stop()}}},_callee2,null,[[19,31,35,43],[36,,38,42],[54,58,62,70],[63,,65,69]])}));return _resolveImportErrors.apply(this,arguments)}},6329:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.logLegacyImport=logLegacyImport;var _kfetch=__webpack_require__(109);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function logLegacyImport(){return _logLegacyImport.apply(this,arguments)}function _logLegacyImport(){_logLegacyImport=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return(0,_kfetch.kfetch)({method:"POST",pathname:"/api/saved_objects/_log_legacy_import"});case 2:return _context.abrupt("return",_context.sent);case 3:case"end":return _context.stop()}}},_callee)}));return _logLegacyImport.apply(this,arguments)}},6330:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.processImportResponse=processImportResponse;function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}function processImportResponse(response){var failedImports=[];var unmatchedReferences=new Map;var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=(response.errors||[])[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var _step$value=_step.value,error=_step$value.error,obj=_objectWithoutProperties(_step$value,["error"]);failedImports.push({obj:obj,error:error});if(error.type!=="missing_references"){continue}var indexPatternRefs=error.references.filter(function(ref){return ref.type==="index-pattern"});var _iteratorNormalCompletion2=true;var _didIteratorError2=false;var _iteratorError2=undefined;try{for(var _iterator2=indexPatternRefs[Symbol.iterator](),_step2;!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=true){var missingReference=_step2.value;var conflict=unmatchedReferences.get("".concat(missingReference.type,":").concat(missingReference.id))||{existingIndexPatternId:missingReference.id,list:[],newIndexPatternId:undefined};conflict.list.push(obj);unmatchedReferences.set("".concat(missingReference.type,":").concat(missingReference.id),conflict)}}catch(err){_didIteratorError2=true;_iteratorError2=err}finally{try{if(!_iteratorNormalCompletion2&&_iterator2["return"]!=null){_iterator2["return"]()}}finally{if(_didIteratorError2){throw _iteratorError2}}}}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator["return"]!=null){_iterator["return"]()}}finally{if(_didIteratorError){throw _iteratorError}}}return{failedImports:failedImports,unmatchedReferences:Array.from(unmatchedReferences.values()),status:unmatchedReferences.size===0&&!failedImports.some(function(issue){return issue.error.type==="conflict"})?"success":"idle",importCount:response.successCount,conflictedSavedObjectsLinkedToSavedSearches:undefined,conflictedSearchDocs:undefined}}},6331:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getDefaultTitle=getDefaultTitle;function getDefaultTitle(object){return"".concat(object.type," [id=").concat(object.id,"]")}},6332:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.findObjects=findObjects;var _kfetch=__webpack_require__(109);var _case_conversion=__webpack_require__(1096);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function findObjects(_x){return _findObjects.apply(this,arguments)}function _findObjects(){_findObjects=_asyncToGenerator(regeneratorRuntime.mark(function _callee(findOptions){var response;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return(0,_kfetch.kfetch)({method:"GET",pathname:"/api/kibana/management/saved_objects/_find",query:findOptions});case 2:response=_context.sent;return _context.abrupt("return",(0,_case_conversion.keysToCamelCaseShallow)(response));case 4:case"end":return _context.stop()}}},_callee)}));return _findObjects.apply(this,arguments)}},6333:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"Relationships",{enumerable:true,get:function get(){return _relationships.Relationships}});var _relationships=__webpack_require__(6334)},6334:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Relationships=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(17));var _eui=__webpack_require__(2);var _chrome=_interopRequireDefault(__webpack_require__(19));var _react2=__webpack_require__(10);var _lib=__webpack_require__(674);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var RelationshipsUI=function(_Component){_inherits(RelationshipsUI,_Component);function RelationshipsUI(props){var _this;_classCallCheck(this,RelationshipsUI);_this=_possibleConstructorReturn(this,_getPrototypeOf(RelationshipsUI).call(this,props));_this.state={relationships:undefined,isLoading:false,error:undefined};return _this}_createClass(RelationshipsUI,[{key:"componentWillMount",value:function componentWillMount(){this.getRelationshipData()}},{key:"componentWillReceiveProps",value:function componentWillReceiveProps(nextProps){if(nextProps.savedObject.id!==this.props.savedObject.id){this.getRelationshipData()}}},{key:"getRelationshipData",value:function(){var _getRelationshipData=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var _this$props,savedObject,getRelationships,relationships;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this$props=this.props,savedObject=_this$props.savedObject,getRelationships=_this$props.getRelationships;this.setState({isLoading:true});_context.prev=2;_context.next=5;return getRelationships(savedObject.type,savedObject.id);case 5:relationships=_context.sent;this.setState({relationships:relationships,isLoading:false,error:undefined});_context.next=12;break;case 9:_context.prev=9;_context.t0=_context["catch"](2);this.setState({error:_context.t0.message,isLoading:false});case 12:case"end":return _context.stop()}}},_callee,this,[[2,9]])}));function getRelationshipData(){return _getRelationshipData.apply(this,arguments)}return getRelationshipData}()},{key:"renderError",value:function renderError(){var error=this.state.error;if(!error){return null}return _react["default"].createElement(_eui.EuiCallOut,{title:_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.objects.objectsTable.relationships.renderErrorMessage",defaultMessage:"Error"}),color:"danger"},error)}},{key:"renderRelationships",value:function renderRelationships(){var _this2=this;var _this$props2=this.props,intl=_this$props2.intl,goInspectObject=_this$props2.goInspectObject,savedObject=_this$props2.savedObject;var _this$state=this.state,relationships=_this$state.relationships,isLoading=_this$state.isLoading,error=_this$state.error;if(error){return this.renderError()}if(isLoading){return _react["default"].createElement(_eui.EuiLoadingKibana,{size:"xl"})}var columns=[{field:"type",name:intl.formatMessage({id:"kbn.management.objects.objectsTable.relationships.columnTypeName",defaultMessage:"Type"}),width:"50px",align:"center",description:intl.formatMessage({id:"kbn.management.objects.objectsTable.relationships.columnTypeDescription",defaultMessage:"Type of the saved object"}),sortable:false,render:function render(type,object){return _react["default"].createElement(_eui.EuiToolTip,{position:"top",content:(0,_lib.getSavedObjectLabel)(type)},_react["default"].createElement(_eui.EuiIcon,{"aria-label":(0,_lib.getSavedObjectLabel)(type),type:object.meta.icon||"apps",size:"s"}))}},{field:"relationship",name:intl.formatMessage({id:"kbn.management.objects.objectsTable.relationships.columnRelationshipName",defaultMessage:"Direct relationship"}),dataType:"string",sortable:false,width:"125px",render:function render(relationship){if(relationship==="parent"){return _react["default"].createElement(_eui.EuiText,{size:"s"},_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.objects.objectsTable.relationships.columnRelationship.parentAsValue",defaultMessage:"Parent"}))}if(relationship==="child"){return _react["default"].createElement(_eui.EuiText,{size:"s"},_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.objects.objectsTable.relationships.columnRelationship.childAsValue",defaultMessage:"Child"}))}}},{field:"meta.title",name:intl.formatMessage({id:"kbn.management.objects.objectsTable.relationships.columnTitleName",defaultMessage:"Title"}),description:intl.formatMessage({id:"kbn.management.objects.objectsTable.relationships.columnTitleDescription",defaultMessage:"Title of the saved object"}),dataType:"string",sortable:false,render:function render(title,object){var _ref=object.meta.inAppUrl||{},path=_ref.path;var canGoInApp=_this2.props.canGoInApp(object);if(!canGoInApp){return _react["default"].createElement(_eui.EuiText,{size:"s"},title||(0,_lib.getDefaultTitle)(object))}return _react["default"].createElement(_eui.EuiLink,{href:_chrome["default"].addBasePath(path)},title||(0,_lib.getDefaultTitle)(object))}},{name:intl.formatMessage({id:"kbn.management.objects.objectsTable.relationships.columnActionsName",defaultMessage:"Actions"}),actions:[{name:intl.formatMessage({id:"kbn.management.objects.objectsTable.relationships.columnActions.inspectActionName",defaultMessage:"Inspect"}),description:intl.formatMessage({id:"kbn.management.objects.objectsTable.relationships.columnActions.inspectActionDescription",defaultMessage:"Inspect this saved object"}),type:"icon",icon:"inspect",onClick:function onClick(object){return goInspectObject(object)},available:function available(object){return!!object.meta.editUrl}}]}];var filterTypesMap=new Map(relationships.map(function(relationship){return[relationship.type,{value:relationship.type,name:relationship.type,view:relationship.type}]}));var search={filters:[{type:"field_value_selection",field:"relationship",name:intl.formatMessage({id:"kbn.management.objects.objectsTable.relationships.search.filters.relationship.name",defaultMessage:"Direct relationship"}),multiSelect:"or",options:[{value:"parent",name:"parent",view:intl.formatMessage({id:"kbn.management.objects.objectsTable.relationships.search.filters.relationship.parentAsValue.view",defaultMessage:"Parent"})},{value:"child",name:"child",view:intl.formatMessage({id:"kbn.management.objects.objectsTable.relationships.search.filters.relationship.childAsValue.view",defaultMessage:"Child"})}]},{type:"field_value_selection",field:"type",name:intl.formatMessage({id:"kbn.management.objects.objectsTable.relationships.search.filters.type.name",defaultMessage:"Type"}),multiSelect:"or",options:_toConsumableArray(filterTypesMap.values())}]};return _react["default"].createElement("div",null,_react["default"].createElement(_eui.EuiCallOut,null,_react["default"].createElement("p",null,intl.formatMessage({id:"kbn.management.objects.objectsTable.relationships.relationshipsTitle",defaultMessage:"Here are the saved objects related to {title}. "+"Deleting this {type} affects its parent objects, but not its children."},{type:savedObject.type,title:savedObject.meta.title||(0,_lib.getDefaultTitle)(savedObject)}))),_react["default"].createElement(_eui.EuiSpacer,null),_react["default"].createElement(_eui.EuiInMemoryTable,{items:relationships,columns:columns,pagination:true,search:search}))}},{key:"render",value:function render(){var _this$props3=this.props,close=_this$props3.close,savedObject=_this$props3.savedObject;return _react["default"].createElement(_eui.EuiFlyout,{onClose:close},_react["default"].createElement(_eui.EuiFlyoutHeader,{hasBorder:true},_react["default"].createElement(_eui.EuiTitle,{size:"m"},_react["default"].createElement("h2",null,_react["default"].createElement(_eui.EuiToolTip,{position:"top",content:(0,_lib.getSavedObjectLabel)(savedObject.type)},_react["default"].createElement(_eui.EuiIcon,{"aria-label":(0,_lib.getSavedObjectLabel)(savedObject.type),size:"m",type:savedObject.meta.icon||"apps"})),"",savedObject.meta.title||(0,_lib.getDefaultTitle)(savedObject)))),_react["default"].createElement(_eui.EuiFlyoutBody,null,this.renderRelationships()))}}]);return RelationshipsUI}(_react.Component);_defineProperty(RelationshipsUI,"propTypes",{getRelationships:_propTypes["default"].func.isRequired,savedObject:_propTypes["default"].object.isRequired,close:_propTypes["default"].func.isRequired,goInspectObject:_propTypes["default"].func.isRequired,canGoInApp:_propTypes["default"].func.isRequired});var Relationships=(0,_react2.injectI18n)(RelationshipsUI);exports.Relationships=Relationships},6335:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"Table",{enumerable:true,get:function get(){return _table.Table}});var _table=__webpack_require__(6336)},6336:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Table=void 0;var _chrome=_interopRequireDefault(__webpack_require__(19));var _react=_interopRequireWildcard(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(17));var _eui=__webpack_require__(2);var _lib=__webpack_require__(674);var _i18n=__webpack_require__(5);var _react2=__webpack_require__(10);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var TableUI=function(_PureComponent){_inherits(TableUI,_PureComponent);function TableUI(){var _getPrototypeOf2;var _this;_classCallCheck(this,TableUI);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(TableUI)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"state",{isSearchTextValid:true,parseErrorMessage:null,isExportPopoverOpen:false,isIncludeReferencesDeepChecked:true});_defineProperty(_assertThisInitialized(_this),"onChange",function(_ref){var query=_ref.query,error=_ref.error;if(error){_this.setState({isSearchTextValid:false,parseErrorMessage:error.message});return}_this.setState({isSearchTextValid:true,parseErrorMessage:null});_this.props.onQueryChange({query:query})});_defineProperty(_assertThisInitialized(_this),"closeExportPopover",function(){_this.setState({isExportPopoverOpen:false})});_defineProperty(_assertThisInitialized(_this),"toggleExportPopoverVisibility",function(){_this.setState(function(state){return{isExportPopoverOpen:!state.isExportPopoverOpen}})});_defineProperty(_assertThisInitialized(_this),"toggleIsIncludeReferencesDeepChecked",function(){_this.setState(function(state){return{isIncludeReferencesDeepChecked:!state.isIncludeReferencesDeepChecked}})});_defineProperty(_assertThisInitialized(_this),"onExportClick",function(){var onExport=_this.props.onExport;var isIncludeReferencesDeepChecked=_this.state.isIncludeReferencesDeepChecked;onExport(isIncludeReferencesDeepChecked);_this.setState({isExportPopoverOpen:false})});return _this}_createClass(TableUI,[{key:"render",value:function render(){var _this2=this;var _this$props=this.props,pageIndex=_this$props.pageIndex,pageSize=_this$props.pageSize,itemId=_this$props.itemId,items=_this$props.items,totalItemCount=_this$props.totalItemCount,isSearching=_this$props.isSearching,filterOptions=_this$props.filterOptions,selection=_this$props.selectionConfig,onDelete=_this$props.onDelete,selectedSavedObjects=_this$props.selectedSavedObjects,onTableChange=_this$props.onTableChange,goInspectObject=_this$props.goInspectObject,onShowRelationships=_this$props.onShowRelationships,intl=_this$props.intl;var pagination={pageIndex:pageIndex,pageSize:pageSize,totalItemCount:totalItemCount,pageSizeOptions:[5,10,20,50]};var filters=[{type:"field_value_selection",field:"type",name:intl.formatMessage({id:"kbn.management.objects.objectsTable.table.typeFilterName",defaultMessage:"Type"}),multiSelect:"or",options:filterOptions}];var columns=[{field:"type",name:intl.formatMessage({id:"kbn.management.objects.objectsTable.table.columnTypeName",defaultMessage:"Type"}),width:"50px",align:"center",description:intl.formatMessage({id:"kbn.management.objects.objectsTable.table.columnTypeDescription",defaultMessage:"Type of the saved object"}),sortable:false,render:function render(type,object){return _react["default"].createElement(_eui.EuiToolTip,{position:"top",content:(0,_lib.getSavedObjectLabel)(type)},_react["default"].createElement(_eui.EuiIcon,{"aria-label":(0,_lib.getSavedObjectLabel)(type),type:object.meta.icon||"apps",size:"s"}))}},{field:"meta.title",name:intl.formatMessage({id:"kbn.management.objects.objectsTable.table.columnTitleName",defaultMessage:"Title"}),description:intl.formatMessage({id:"kbn.management.objects.objectsTable.table.columnTitleDescription",defaultMessage:"Title of the saved object"}),dataType:"string",sortable:false,render:function render(title,object){var _ref2=object.meta.inAppUrl||{},path=_ref2.path;var canGoInApp=_this2.props.canGoInApp(object);if(!canGoInApp){return _react["default"].createElement(_eui.EuiText,{size:"s"},title||(0,_lib.getDefaultTitle)(object))}return _react["default"].createElement(_eui.EuiLink,{href:_chrome["default"].addBasePath(path)},title||(0,_lib.getDefaultTitle)(object))}},{name:intl.formatMessage({id:"kbn.management.objects.objectsTable.table.columnActionsName",defaultMessage:"Actions"}),actions:[{name:intl.formatMessage({id:"kbn.management.objects.objectsTable.table.columnActions.inspectActionName",defaultMessage:"Inspect"}),description:intl.formatMessage({id:"kbn.management.objects.objectsTable.table.columnActions.inspectActionDescription",defaultMessage:"Inspect this saved object"}),type:"icon",icon:"inspect",onClick:function onClick(object){return goInspectObject(object)},available:function available(object){return!!object.meta.editUrl}},{name:intl.formatMessage({id:"kbn.management.objects.objectsTable.table.columnActions.viewRelationshipsActionName",defaultMessage:"Relationships"}),description:intl.formatMessage({id:"kbn.management.objects.objectsTable.table.columnActions.viewRelationshipsActionDescription",defaultMessage:"View the relationships this saved object has to other saved objects"}),type:"icon",icon:"kqlSelector",onClick:function onClick(object){return onShowRelationships(object)}}]}];var queryParseError;if(!this.state.isSearchTextValid){var parseErrorMsg=intl.formatMessage({id:"kbn.management.objects.objectsTable.searchBar.unableToParseQueryErrorMessage",defaultMessage:"Unable to parse query"});queryParseError=_react["default"].createElement(_eui.EuiFormErrorText,null,"".concat(parseErrorMsg,". ").concat(this.state.parseErrorMessage))}var button=_react["default"].createElement(_eui.EuiButton,{iconType:"arrowDown",iconSide:"right",onClick:this.toggleExportPopoverVisibility,isDisabled:selectedSavedObjects.length===0},_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.objects.objectsTable.table.exportPopoverButtonLabel",defaultMessage:"Export"}));return _react["default"].createElement(_react.Fragment,null,_react["default"].createElement(_eui.EuiSearchBar,{box:{"data-test-subj":"savedObjectSearchBar"},filters:filters,onChange:this.onChange,toolsRight:[_react["default"].createElement(_eui.EuiButton,{key:"deleteSO",iconType:"trash",color:"danger",onClick:onDelete,isDisabled:selectedSavedObjects.length===0||!this.props.canDelete,title:this.props.canDelete?undefined:_i18n.i18n.translate("kbn.management.objects.objectsTable.table.deleteButtonTitle",{defaultMessage:"Unable to delete saved objects"}),"data-test-subj":"savedObjectsManagementDelete"},_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.objects.objectsTable.table.deleteButtonLabel",defaultMessage:"Delete"})),_react["default"].createElement(_eui.EuiPopover,{key:"exportSOOptions",button:button,isOpen:this.state.isExportPopoverOpen,closePopover:this.closeExportPopover},_react["default"].createElement(_eui.EuiFormRow,{label:_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.objects.objectsTable.exportObjectsConfirmModal.exportOptionsLabel",defaultMessage:"Options"})},_react["default"].createElement(_eui.EuiSwitch,{name:"includeReferencesDeep",label:_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.objects.objectsTable.exportObjectsConfirmModal.includeReferencesDeepLabel",defaultMessage:"Include related objects"}),checked:this.state.isIncludeReferencesDeepChecked,onChange:this.toggleIsIncludeReferencesDeepChecked})),_react["default"].createElement(_eui.EuiFormRow,null,_react["default"].createElement(_eui.EuiButton,{key:"exportSO",iconType:"exportAction",onClick:this.onExportClick,fill:true},_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.objects.objectsTable.table.exportButtonLabel",defaultMessage:"Export"}))))]}),queryParseError,_react["default"].createElement(_eui.EuiSpacer,{size:"s"}),_react["default"].createElement("div",{"data-test-subj":"savedObjectsTable"},_react["default"].createElement(_eui.EuiBasicTable,{loading:isSearching,itemId:itemId,items:items,columns:columns,pagination:pagination,selection:selection,onChange:onTableChange})))}}]);return TableUI}(_react.PureComponent);_defineProperty(TableUI,"propTypes",{selectedSavedObjects:_propTypes["default"].array.isRequired,selectionConfig:_propTypes["default"].shape({selectable:_propTypes["default"].func,selectableMessage:_propTypes["default"].func,onSelectionChange:_propTypes["default"].func.isRequired}).isRequired,filterOptions:_propTypes["default"].array.isRequired,canDelete:_propTypes["default"].bool.isRequired,onDelete:_propTypes["default"].func.isRequired,onExport:_propTypes["default"].func.isRequired,goInspectObject:_propTypes["default"].func.isRequired,pageIndex:_propTypes["default"].number.isRequired,pageSize:_propTypes["default"].number.isRequired,items:_propTypes["default"].array.isRequired,itemId:_propTypes["default"].oneOfType([_propTypes["default"].string,_propTypes["default"].func]),totalItemCount:_propTypes["default"].number.isRequired,onQueryChange:_propTypes["default"].func.isRequired,onTableChange:_propTypes["default"].func.isRequired,isSearching:_propTypes["default"].bool.isRequired,onShowRelationships:_propTypes["default"].func.isRequired});var Table=(0,_react2.injectI18n)(TableUI);exports.Table=Table},6337:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.updateIndexPatternList=updateIndexPatternList;exports.destroyIndexPatternList=void 0;var _management=__webpack_require__(349);var _index_pattern_list=__webpack_require__(2067);var _index_pattern_creation=__webpack_require__(2069);__webpack_require__(6342);__webpack_require__(6379);var _routes=_interopRequireDefault(__webpack_require__(34));var _modules=__webpack_require__(12);var _index=_interopRequireDefault(__webpack_require__(6429));var _list=_interopRequireDefault(__webpack_require__(6430));var _index_pattern_table=__webpack_require__(6431);var _saved_objects=__webpack_require__(108);var _feature_catalogue=__webpack_require__(128);var _i18n=__webpack_require__(5);var _i18n2=__webpack_require__(28);var _react=__webpack_require__(2073);var _breadcrumbs=__webpack_require__(675);var _react2=_interopRequireDefault(__webpack_require__(0));var _reactDom=__webpack_require__(27);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}var INDEX_PATTERN_LIST_DOM_ELEMENT_ID="indexPatternListReact";function updateIndexPatternList(indexPatterns,kbnUrl,indexPatternCreationOptions){var node=document.getElementById(INDEX_PATTERN_LIST_DOM_ELEMENT_ID);if(!node){return}(0,_reactDom.render)(_react2["default"].createElement(_i18n2.I18nContext,null,_react2["default"].createElement(_react.UICapabilitiesProvider,null,_react2["default"].createElement(_index_pattern_table.IndexPatternTable,{indexPatterns:indexPatterns,navTo:kbnUrl.redirect,indexPatternCreationOptions:indexPatternCreationOptions}))),node)}var destroyIndexPatternList=function destroyIndexPatternList(){var node=document.getElementById(INDEX_PATTERN_LIST_DOM_ELEMENT_ID);node&&(0,_reactDom.unmountComponentAtNode)(node)};exports.destroyIndexPatternList=destroyIndexPatternList;var indexPatternsResolutions={indexPatterns:function indexPatterns(Private){var savedObjectsClient=Private(_saved_objects.SavedObjectsClientProvider);return savedObjectsClient.find({type:"index-pattern",fields:["title","type"],perPage:1e4}).then(function(response){return response.savedObjects})}};_routes["default"].defaults(/management\/kibana\/(index_patterns|index_pattern)/,{resolve:indexPatternsResolutions,requireUICapability:"management.kibana.index_patterns",badge:function badge(uiCapabilities){if(uiCapabilities.indexPatterns.save){return undefined}return{text:_i18n.i18n.translate("kbn.management.indexPatterns.badge.readOnly.text",{defaultMessage:"Read only"}),tooltip:_i18n.i18n.translate("kbn.management.indexPatterns.badge.readOnly.tooltip",{defaultMessage:"Unable to save index patterns"}),iconType:"glasses"}}});_routes["default"].when("/management/kibana/index_patterns",{template:_list["default"],k7Breadcrumbs:_breadcrumbs.getListBreadcrumbs});_modules.uiModules.get("apps/management").directive("kbnManagementIndexPatterns",function($route,config,kbnUrl,Private){return{restrict:"E",transclude:true,template:_index["default"],link:function(){var _link=_asyncToGenerator(regeneratorRuntime.mark(function _callee($scope){var indexPatternListProvider,indexPatternCreationProvider,indexPatternCreationOptions,renderList;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:indexPatternListProvider=Private(_index_pattern_list.IndexPatternListFactory)();indexPatternCreationProvider=Private(_index_pattern_creation.IndexPatternCreationFactory)();_context.next=4;return indexPatternCreationProvider.getIndexPatternCreationOptions(function(url){$scope.$evalAsync(function(){return kbnUrl.change(url)})});case 4:indexPatternCreationOptions=_context.sent;renderList=function renderList(){$scope.indexPatternList=$route.current.locals.indexPatterns.map(function(pattern){var id=pattern.id;var title=pattern.get("title");var isDefault=$scope.defaultIndex===id;var tags=indexPatternListProvider.getIndexPatternTags(pattern,isDefault);return{id:id,title:title,url:kbnUrl.eval("#/management/kibana/index_patterns/{{id}}",{id:id}),active:$scope.editingId===id,default:isDefault,tags:tags,sort:"".concat(isDefault?"0":"1").concat(title)}}).sort(function(a,b){if(a.sort<b.sort){return-1}else if(a.sort>b.sort){return 1}else{return 0}})||[];updateIndexPatternList($scope.indexPatternList,kbnUrl,indexPatternCreationOptions)};$scope.$on("$destroy",destroyIndexPatternList);$scope.editingId=$route.current.params.indexPatternId;$scope.$watch("defaultIndex",function(){return renderList()});config.bindToScope($scope,"defaultIndex");$scope.$apply();case 11:case"end":return _context.stop()}}},_callee)}));function link(_x){return _link.apply(this,arguments)}return link}()}});_management.management.getSection("kibana").register("index_patterns",{display:_i18n.i18n.translate("kbn.management.indexPattern.sectionsHeader",{defaultMessage:"Index Patterns"}),order:0,url:"#/management/kibana/index_patterns/"});_feature_catalogue.FeatureCatalogueRegistryProvider.register(function(){return{id:"index_patterns",title:_i18n.i18n.translate("kbn.management.indexPatternHeader",{defaultMessage:"Index Patterns"}),description:_i18n.i18n.translate("kbn.management.indexPatternLabel",{defaultMessage:"Manage the index patterns that help retrieve your data from Elasticsearch."}),icon:"indexPatternApp",path:"/app/kibana#/management/kibana/index_patterns",showOnHomePage:true,category:_feature_catalogue.FeatureCatalogueCategory.ADMIN}})},6338:function(module,exports,__webpack_require__){"use strict";var _index_pattern_list_config=__webpack_require__(2068);var _index_pattern_list_config_registry=__webpack_require__(1037);_index_pattern_list_config_registry.IndexPatternListConfigRegistry.register(function(){return _index_pattern_list_config.IndexPatternListConfig})},6339:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.IndexPatternListFactory=void 0;var _index_pattern_list_config_registry=__webpack_require__(1037);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var IndexPatternList=function IndexPatternList(registry){var _this=this;_classCallCheck(this,IndexPatternList);_defineProperty(this,"getIndexPatternTags",function(indexPattern,isDefault){return _this._plugins.reduce(function(tags,plugin){return plugin.getIndexPatternTags?tags.concat(plugin.getIndexPatternTags(indexPattern,isDefault)):tags},[])});_defineProperty(this,"getFieldInfo",function(indexPattern,field){return _this._plugins.reduce(function(info,plugin){return plugin.getFieldInfo?info.concat(plugin.getFieldInfo(indexPattern,field)):info},[])});_defineProperty(this,"areScriptedFieldsEnabled",function(indexPattern){return _this._plugins.every(function(plugin){return plugin.areScriptedFieldsEnabled?plugin.areScriptedFieldsEnabled(indexPattern):true})});this._plugins=registry.inOrder.map(function(Plugin){return new Plugin})};var IndexPatternListFactory=function IndexPatternListFactory(Private){return function(){var indexPatternListRegistry=Private(_index_pattern_list_config_registry.IndexPatternListConfigRegistry);var indexPatternListProvider=new IndexPatternList(indexPatternListRegistry);return indexPatternListProvider}};exports.IndexPatternListFactory=IndexPatternListFactory},6340:function(module,exports,__webpack_require__){"use strict";var _index_pattern_creation_config=__webpack_require__(2070);var _index_pattern_types=__webpack_require__(1038);(0,_index_pattern_types.addIndexPatternType)(_index_pattern_creation_config.IndexPatternCreationConfig)},6341:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.IndexPatternCreationFactory=void 0;var _index_pattern_types=__webpack_require__(1038);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var IndexPatternCreation=function IndexPatternCreation(httpClient,_type){var _this=this;_classCallCheck(this,IndexPatternCreation);_defineProperty(this,"_setCurrentType",function(type){var index=type?_index_pattern_types.indexPatternTypes.findIndex(function(Plugin){return Plugin.key===type}):-1;_this._currentType=index>-1&&_this._allTypes[index]?_this._allTypes[index]:null});_defineProperty(this,"getType",function(){return _this._currentType||null});_defineProperty(this,"getIndexPatternCreationOptions",function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(urlHandler){var options;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:options=[];_context2.next=3;return Promise.all(_this._allTypes.map(function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark(function _callee(type){var option;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!type.getIndexPatternCreationOption){_context.next=6;break}_context.next=3;return type.getIndexPatternCreationOption(urlHandler);case 3:_context.t0=_context.sent;_context.next=7;break;case 6:_context.t0=null;case 7:option=_context.t0;if(option){options.push(option)}case 9:case"end":return _context.stop()}}},_callee)}));return function(_x2){return _ref2.apply(this,arguments)}}()));case 3:return _context2.abrupt("return",options);case 4:case"end":return _context2.stop()}}},_callee2)}));return function(_x){return _ref.apply(this,arguments)}}());this._allTypes=_index_pattern_types.indexPatternTypes.map(function(Plugin){return new Plugin({httpClient:httpClient})});this._setCurrentType(_type)};var IndexPatternCreationFactory=function IndexPatternCreationFactory(Private,$http){return function(){var type=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"default";var indexPatternCreationProvider=new IndexPatternCreation($http,type);return indexPatternCreationProvider}};exports.IndexPatternCreationFactory=IndexPatternCreationFactory},6342:function(module,exports,__webpack_require__){"use strict";var _saved_objects=__webpack_require__(108);var _routes=_interopRequireDefault(__webpack_require__(34));var _angular_template=_interopRequireDefault(__webpack_require__(6343));__webpack_require__(263);var _index_pattern_creation=__webpack_require__(2069);var _breadcrumbs=__webpack_require__(675);var _render=__webpack_require__(6344);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_routes["default"].when("/management/kibana/index_pattern",{template:_angular_template["default"],k7Breadcrumbs:_breadcrumbs.getCreateBreadcrumbs,controller:function controller($scope,$injector){var kbnUrl=$injector.get("kbnUrl");var Private=$injector.get("Private");$scope.$$postDigest(function(){var $routeParams=$injector.get("$routeParams");var indexPatternCreationProvider=Private(_index_pattern_creation.IndexPatternCreationFactory)($routeParams.type);var indexPatternCreationType=indexPatternCreationProvider.getType();var services={config:$injector.get("config"),es:$injector.get("es"),indexPatterns:$injector.get("indexPatterns"),$http:$injector.get("$http"),savedObjectsClient:Private(_saved_objects.SavedObjectsClientProvider),indexPatternCreationType:indexPatternCreationType,confirmModalPromise:$injector.get("confirmModalPromise"),changeUrl:function changeUrl(url){$scope.$evalAsync(function(){return kbnUrl.changePath(url)})}};var initialQuery=$routeParams.id?decodeURIComponent($routeParams.id):undefined;(0,_render.renderCreateIndexPatternWizard)(initialQuery,services)});$scope.$on("$destroy",_render.destroyCreateIndexPatternWizard)}})},6343:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<kbn-management-app section="kibana/index_patterns">\n  <div class="euiPanel euiPanel--paddingLarge">\n    <div id="createIndexPatternReact"></div>\n  </div>\n</kbn-management-app>\n'},6344:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.renderCreateIndexPatternWizard=renderCreateIndexPatternWizard;exports.destroyCreateIndexPatternWizard=destroyCreateIndexPatternWizard;var _react=_interopRequireDefault(__webpack_require__(0));var _reactDom=__webpack_require__(27);var _create_index_pattern_wizard=__webpack_require__(6345);var _i18n=__webpack_require__(28);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var CREATE_INDEX_PATTERN_DOM_ELEMENT_ID="createIndexPatternReact";function renderCreateIndexPatternWizard(initialQuery,services){var node=document.getElementById(CREATE_INDEX_PATTERN_DOM_ELEMENT_ID);if(!node){return}(0,_reactDom.render)(_react["default"].createElement(_i18n.I18nContext,null,_react["default"].createElement(_create_index_pattern_wizard.CreateIndexPatternWizard,{initialQuery:initialQuery,services:services})),node)}function destroyCreateIndexPatternWizard(){var node=document.getElementById(CREATE_INDEX_PATTERN_DOM_ELEMENT_ID);node&&(0,_reactDom.unmountComponentAtNode)(node)}},6345:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.CreateIndexPatternWizard=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(17));var _eui=__webpack_require__(2);var _react2=__webpack_require__(10);var _step_index_pattern=__webpack_require__(6346);var _step_time_field=__webpack_require__(6362);var _header=__webpack_require__(6373);var _loading_state=__webpack_require__(6375);var _empty_state=__webpack_require__(6377);var _constants=__webpack_require__(676);var _lib=__webpack_require__(1039);var _i18n=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var CreateIndexPatternWizard=function(_Component){_inherits(CreateIndexPatternWizard,_Component);function CreateIndexPatternWizard(props){var _this;_classCallCheck(this,CreateIndexPatternWizard);_this=_possibleConstructorReturn(this,_getPrototypeOf(CreateIndexPatternWizard).call(this,props));_defineProperty(_assertThisInitialized(_this),"catchAndWarn",function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(asyncFn,errorValue,errorMsg){return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return asyncFn;case 3:return _context.abrupt("return",_context.sent);case 6:_context.prev=6;_context.t0=_context["catch"](0);_this.setState(function(prevState){return{toasts:prevState.toasts.concat([{title:errorMsg,id:errorMsg.props.id,color:"warning",iconType:"alert"}])}});return _context.abrupt("return",errorValue);case 10:case"end":return _context.stop()}}},_callee,null,[[0,6]])}));return function(_x,_x2,_x3){return _ref.apply(this,arguments)}}());_defineProperty(_assertThisInitialized(_this),"fetchData",_asyncToGenerator(regeneratorRuntime.mark(function _callee2(){var services,indicesFailMsg,clustersFailMsg;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:services=_this.props.services;_this.setState({allIndices:[],isInitiallyLoadingIndices:true,remoteClustersExist:false});indicesFailMsg=_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.createIndexPattern.loadIndicesFailMsg",defaultMessage:"Failed to load indices"});clustersFailMsg=_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.createIndexPattern.loadClustersFailMsg",defaultMessage:"Failed to load remote clusters"});(0,_lib.ensureMinimumTime)(_this.catchAndWarn((0,_lib.getIndices)(services.es,_this.indexPatternCreationType,"*",_constants.MAX_SEARCH_SIZE),[],indicesFailMsg)).then(function(allIndices){return _this.setState({allIndices:allIndices,isInitiallyLoadingIndices:false})});_this.catchAndWarn((0,_lib.getIndices)(services.es,_this.indexPatternCreationType,"*:*",1),["a"],clustersFailMsg).then(function(remoteIndices){return _this.setState({remoteClustersExist:!!remoteIndices.length})});case 6:case"end":return _context2.stop()}}},_callee2)})));_defineProperty(_assertThisInitialized(_this),"createIndexPattern",function(){var _ref3=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(timeFieldName,indexPatternId){var services,indexPattern,emptyPattern,createdId,confirmMessage;return regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:services=_this.props.services;indexPattern=_this.state.indexPattern;_context3.next=4;return services.indexPatterns.get();case 4:emptyPattern=_context3.sent;Object.assign(emptyPattern,_objectSpread({id:indexPatternId,title:indexPattern,timeFieldName:timeFieldName},_this.indexPatternCreationType.getIndexPatternMappings()));_context3.next=8;return emptyPattern.create();case 8:createdId=_context3.sent;if(createdId){_context3.next=20;break}confirmMessage=_i18n.i18n.translate("kbn.management.indexPattern.titleExistsLabel",{values:{title:_this.title},defaultMessage:"An index pattern with the title '{title}' already exists."});_context3.prev=11;_context3.next=14;return services.confirmModalPromise(confirmMessage,{confirmButtonText:"Go to existing pattern"});case 14:return _context3.abrupt("return",services.changeUrl("/management/kibana/index_patterns/".concat(indexPatternId)));case 17:_context3.prev=17;_context3.t0=_context3["catch"](11);return _context3.abrupt("return",false);case 20:if(services.config.get("defaultIndex")){_context3.next=23;break}_context3.next=23;return services.config.set("defaultIndex",createdId);case 23:services.indexPatterns.cache.clear(createdId);services.changeUrl("/management/kibana/index_patterns/".concat(createdId));case 25:case"end":return _context3.stop()}}},_callee3,null,[[11,17]])}));return function(_x4,_x5){return _ref3.apply(this,arguments)}}());_defineProperty(_assertThisInitialized(_this),"goToTimeFieldStep",function(indexPattern){_this.setState({step:2,indexPattern:indexPattern})});_defineProperty(_assertThisInitialized(_this),"goToIndexPatternStep",function(){_this.setState({step:1})});_defineProperty(_assertThisInitialized(_this),"onChangeIncludingSystemIndices",function(){_this.setState(function(state){return{isIncludingSystemIndices:!state.isIncludingSystemIndices}})});_defineProperty(_assertThisInitialized(_this),"removeToast",function(removedToast){_this.setState(function(prevState){return{toasts:prevState.toasts.filter(function(toast){return toast.id!==removedToast.id})}})});_this.indexPatternCreationType=_this.props.services.indexPatternCreationType;_this.state={step:1,indexPattern:"",allIndices:[],remoteClustersExist:false,isInitiallyLoadingIndices:true,isIncludingSystemIndices:false,toasts:[]};return _this}_createClass(CreateIndexPatternWizard,[{key:"componentWillMount",value:function(){var _componentWillMount=_asyncToGenerator(regeneratorRuntime.mark(function _callee4(){return regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:this.fetchData();case 1:case"end":return _context4.stop()}}},_callee4,this)}));function componentWillMount(){return _componentWillMount.apply(this,arguments)}return componentWillMount}()},{key:"renderHeader",value:function renderHeader(){var isIncludingSystemIndices=this.state.isIncludingSystemIndices;return _react["default"].createElement(_header.Header,{prompt:this.indexPatternCreationType.renderPrompt(),showSystemIndices:this.indexPatternCreationType.getShowSystemIndices(),isIncludingSystemIndices:isIncludingSystemIndices,onChangeIncludingSystemIndices:this.onChangeIncludingSystemIndices,indexPatternName:this.indexPatternCreationType.getIndexPatternName(),isBeta:this.indexPatternCreationType.getIsBeta()})}},{key:"renderContent",value:function renderContent(){var _this$state=this.state,allIndices=_this$state.allIndices,isInitiallyLoadingIndices=_this$state.isInitiallyLoadingIndices,isIncludingSystemIndices=_this$state.isIncludingSystemIndices,step=_this$state.step,indexPattern=_this$state.indexPattern,remoteClustersExist=_this$state.remoteClustersExist;if(isInitiallyLoadingIndices){return _react["default"].createElement(_loading_state.LoadingState,null)}var hasDataIndices=allIndices.some(function(_ref4){var name=_ref4.name;return!name.startsWith(".")});if(!hasDataIndices&&!isIncludingSystemIndices&&!remoteClustersExist){return _react["default"].createElement(_empty_state.EmptyState,{onRefresh:this.fetchData})}if(step===1){var _this$props=this.props,services=_this$props.services,initialQuery=_this$props.initialQuery;return _react["default"].createElement(_step_index_pattern.StepIndexPattern,{allIndices:allIndices,initialQuery:indexPattern||initialQuery,isIncludingSystemIndices:isIncludingSystemIndices,esService:services.es,savedObjectsClient:services.savedObjectsClient,indexPatternCreationType:this.indexPatternCreationType,goToNextStep:this.goToTimeFieldStep})}if(step===2){var _services=this.props.services;return _react["default"].createElement(_step_time_field.StepTimeField,{indexPattern:indexPattern,indexPatternsService:_services.indexPatterns,goToPreviousStep:this.goToIndexPatternStep,createIndexPattern:this.createIndexPattern,indexPatternCreationType:this.indexPatternCreationType})}return null}},{key:"render",value:function render(){var header=this.renderHeader();var content=this.renderContent();return _react["default"].createElement(_react["default"].Fragment,null,_react["default"].createElement("div",null,header,content),_react["default"].createElement(_eui.EuiGlobalToastList,{toasts:this.state.toasts,dismissToast:this.removeToast,toastLifeTimeMs:6e3}))}}]);return CreateIndexPatternWizard}(_react.Component);exports.CreateIndexPatternWizard=CreateIndexPatternWizard;_defineProperty(CreateIndexPatternWizard,"propTypes",{initialQuery:_propTypes["default"].string,services:_propTypes["default"].shape({es:_propTypes["default"].object.isRequired,indexPatterns:_propTypes["default"].object.isRequired,savedObjectsClient:_propTypes["default"].object.isRequired,indexPatternCreationType:_propTypes["default"].object.isRequired,config:_propTypes["default"].object.isRequired,changeUrl:_propTypes["default"].func.isRequired}).isRequired})},6346:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"StepIndexPattern",{enumerable:true,get:function get(){return _step_index_pattern.StepIndexPattern}});var _step_index_pattern=__webpack_require__(6347)},6347:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.StepIndexPattern=exports.StepIndexPatternComponent=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(17));var _index_patterns=__webpack_require__(263);var _constants=__webpack_require__(676);var _lib=__webpack_require__(1039);var _loading_indices=__webpack_require__(6354);var _status_message=__webpack_require__(6356);var _indices_list=__webpack_require__(6358);var _header=__webpack_require__(6360);var _eui=__webpack_require__(2);var _react2=__webpack_require__(10);var _chrome=_interopRequireDefault(__webpack_require__(19));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var uiSettings=_chrome["default"].getUiSettingsClient();var StepIndexPatternComponent=function(_Component){_inherits(StepIndexPatternComponent,_Component);function StepIndexPatternComponent(props){var _this;_classCallCheck(this,StepIndexPatternComponent);_this=_possibleConstructorReturn(this,_getPrototypeOf(StepIndexPatternComponent).call(this,props));_defineProperty(_assertThisInitialized(_this),"fetchExistingIndexPatterns",_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var _ref2,savedObjects,existingIndexPatterns;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return _this.props.savedObjectsClient.find({type:"index-pattern",fields:["title"],perPage:1e4});case 2:_ref2=_context.sent;savedObjects=_ref2.savedObjects;existingIndexPatterns=savedObjects.map(function(obj){return obj&&obj.attributes?obj.attributes.title:""});_this.setState({existingIndexPatterns:existingIndexPatterns});case 6:case"end":return _context.stop()}}},_callee)})));_defineProperty(_assertThisInitialized(_this),"fetchIndices",function(){var _ref3=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(query){var _this$props,esService,indexPatternCreationType,existingIndexPatterns,_exactMatchedIndices,_ref4,_ref5,partialMatchedIndices,exactMatchedIndices;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_this$props=_this.props,esService=_this$props.esService,indexPatternCreationType=_this$props.indexPatternCreationType;existingIndexPatterns=_this.state.existingIndexPatterns;if(!existingIndexPatterns.includes(query)){_context2.next=5;break}_this.setState({indexPatternExists:true});return _context2.abrupt("return");case 5:_this.setState({isLoadingIndices:true,indexPatternExists:false});if(!query.endsWith("*")){_context2.next=14;break}_context2.next=9;return(0,_lib.ensureMinimumTime)((0,_lib.getIndices)(esService,indexPatternCreationType,query,_constants.MAX_SEARCH_SIZE));case 9:_exactMatchedIndices=_context2.sent;if(!(query!==_this.lastQuery)){_context2.next=12;break}return _context2.abrupt("return");case 12:_this.setState({exactMatchedIndices:_exactMatchedIndices,isLoadingIndices:false});return _context2.abrupt("return");case 14:_context2.next=16;return(0,_lib.ensureMinimumTime)([(0,_lib.getIndices)(esService,indexPatternCreationType,"".concat(query,"*"),_constants.MAX_SEARCH_SIZE),(0,_lib.getIndices)(esService,indexPatternCreationType,query,_constants.MAX_SEARCH_SIZE)]);case 16:_ref4=_context2.sent;_ref5=_slicedToArray(_ref4,2);partialMatchedIndices=_ref5[0];exactMatchedIndices=_ref5[1];if(!(query!==_this.lastQuery)){_context2.next=22;break}return _context2.abrupt("return");case 22:_this.setState({partialMatchedIndices:partialMatchedIndices,exactMatchedIndices:exactMatchedIndices,isLoadingIndices:false});case 23:case"end":return _context2.stop()}}},_callee2)}));return function(_x){return _ref3.apply(this,arguments)}}());_defineProperty(_assertThisInitialized(_this),"onQueryChanged",function(e){var appendedWildcard=_this.state.appendedWildcard;var target=e.target;var query=target.value;if(query.length===1&&(0,_lib.canAppendWildcard)(query)){query+="*";_this.setState({appendedWildcard:true});setTimeout(function(){return target.setSelectionRange(1,1)})}else{if(query==="*"&&appendedWildcard){query="";_this.setState({appendedWildcard:false})}}_this.lastQuery=query;_this.setState({query:query,showingIndexPatternQueryErrors:!!query.length});_this.fetchIndices(query)});var _indexPatternCreationType=_this.props.indexPatternCreationType;_this.state={partialMatchedIndices:[],exactMatchedIndices:[],isLoadingIndices:false,existingIndexPatterns:[],indexPatternExists:false,query:props.initialQuery,appendedWildcard:false,showingIndexPatternQueryErrors:false,indexPatternName:_indexPatternCreationType.getIndexPatternName()};_this.ILLEGAL_CHARACTERS=_toConsumableArray(_index_patterns.INDEX_PATTERN_ILLEGAL_CHARACTERS);_this.lastQuery=null;return _this}_createClass(StepIndexPatternComponent,[{key:"componentWillMount",value:function(){var _componentWillMount=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(){return regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:this.fetchExistingIndexPatterns();if(this.state.query){this.lastQuery=this.state.query;this.fetchIndices(this.state.query)}case 2:case"end":return _context3.stop()}}},_callee3,this)}));function componentWillMount(){return _componentWillMount.apply(this,arguments)}return componentWillMount}()},{key:"renderLoadingState",value:function renderLoadingState(){var isLoadingIndices=this.state.isLoadingIndices;if(!isLoadingIndices){return null}return _react["default"].createElement(_loading_indices.LoadingIndices,{"data-test-subj":"createIndexPatternStep1Loading"})}},{key:"renderStatusMessage",value:function renderStatusMessage(matchedIndices){var indexPatternCreationType=this.props.indexPatternCreationType;var _this$state=this.state,query=_this$state.query,isLoadingIndices=_this$state.isLoadingIndices,indexPatternExists=_this$state.indexPatternExists,isIncludingSystemIndices=_this$state.isIncludingSystemIndices;if(isLoadingIndices||indexPatternExists){return null}return _react["default"].createElement(_status_message.StatusMessage,{matchedIndices:matchedIndices,showSystemIndices:indexPatternCreationType.getShowSystemIndices(),isIncludingSystemIndices:isIncludingSystemIndices,query:query})}},{key:"renderList",value:function renderList(_ref6){var visibleIndices=_ref6.visibleIndices,allIndices=_ref6.allIndices;var _this$state2=this.state,query=_this$state2.query,isLoadingIndices=_this$state2.isLoadingIndices,indexPatternExists=_this$state2.indexPatternExists;if(isLoadingIndices||indexPatternExists){return null}var indicesToList=query.length?visibleIndices:allIndices;return _react["default"].createElement(_indices_list.IndicesList,{"data-test-subj":"createIndexPatternStep1IndicesList",query:query,indices:indicesToList})}},{key:"renderIndexPatternExists",value:function renderIndexPatternExists(){var _this$state3=this.state,indexPatternExists=_this$state3.indexPatternExists,query=_this$state3.query;if(!indexPatternExists){return null}return _react["default"].createElement(_eui.EuiCallOut,{title:_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.createIndexPattern.step.warningHeader",defaultMessage:"There's already an index pattern called {query}",values:{query:query}}),iconType:"help",color:"warning"})}},{key:"renderHeader",value:function renderHeader(_ref7){var indices=_ref7.exactMatchedIndices;var _this$props2=this.props,goToNextStep=_this$props2.goToNextStep,indexPatternCreationType=_this$props2.indexPatternCreationType,intl=_this$props2.intl;var _this$state4=this.state,query=_this$state4.query,showingIndexPatternQueryErrors=_this$state4.showingIndexPatternQueryErrors,indexPatternExists=_this$state4.indexPatternExists,indexPatternName=_this$state4.indexPatternName;var containsErrors=false;var errors=[];var characterList=this.ILLEGAL_CHARACTERS.slice(0,this.ILLEGAL_CHARACTERS.length-1).join(", ");var checkIndices=indexPatternCreationType.checkIndicesForErrors(indices);if(!query||!query.length||query==="."||query===".."){containsErrors=true}else if((0,_lib.containsIllegalCharacters)(query,_index_patterns.INDEX_PATTERN_ILLEGAL_CHARACTERS)){var errorMessage=intl.formatMessage({id:"kbn.management.createIndexPattern.step.invalidCharactersErrorMessage",defaultMessage:"A {indexPatternName} cannot contain spaces or the characters: {characterList}"},{characterList:characterList,indexPatternName:indexPatternName});errors.push(errorMessage);containsErrors=true}else if(checkIndices){errors.push.apply(errors,_toConsumableArray(checkIndices));containsErrors=true}var isInputInvalid=showingIndexPatternQueryErrors&&containsErrors&&errors.length>0;var isNextStepDisabled=containsErrors||indices.length===0||indexPatternExists;return _react["default"].createElement(_header.Header,{"data-test-subj":"createIndexPatternStep1Header",isInputInvalid:isInputInvalid,errors:errors,characterList:characterList,query:query,onQueryChanged:this.onQueryChanged,goToNextStep:goToNextStep,isNextStepDisabled:isNextStepDisabled})}},{key:"render",value:function render(){var _this$props3=this.props,isIncludingSystemIndices=_this$props3.isIncludingSystemIndices,allIndices=_this$props3.allIndices;var _this$state5=this.state,query=_this$state5.query,partialMatchedIndices=_this$state5.partialMatchedIndices,exactMatchedIndices=_this$state5.exactMatchedIndices;var matchedIndices=(0,_lib.getMatchedIndices)(allIndices,partialMatchedIndices,exactMatchedIndices,query,isIncludingSystemIndices);return _react["default"].createElement(_eui.EuiPanel,{paddingSize:"l"},this.renderHeader(matchedIndices),_react["default"].createElement(_eui.EuiSpacer,{size:"s"}),this.renderLoadingState(matchedIndices),this.renderIndexPatternExists(),this.renderStatusMessage(matchedIndices),_react["default"].createElement(_eui.EuiSpacer,{size:"s"}),this.renderList(matchedIndices))}}]);return StepIndexPatternComponent}(_react.Component);exports.StepIndexPatternComponent=StepIndexPatternComponent;_defineProperty(StepIndexPatternComponent,"propTypes",{allIndices:_propTypes["default"].array.isRequired,isIncludingSystemIndices:_propTypes["default"].bool.isRequired,esService:_propTypes["default"].object.isRequired,savedObjectsClient:_propTypes["default"].object.isRequired,indexPatternCreationType:_propTypes["default"].object.isRequired,goToNextStep:_propTypes["default"].func.isRequired,initialQuery:_propTypes["default"].string});_defineProperty(StepIndexPatternComponent,"defaultProps",{initialQuery:uiSettings.get("indexPattern:placeholder")});var StepIndexPattern=(0,_react2.injectI18n)(StepIndexPatternComponent);exports.StepIndexPattern=StepIndexPattern},6348:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.canAppendWildcard=void 0;var canAppendWildcard=function canAppendWildcard(keyPressed){if(!keyPressed||!/[a-z0-9]/i.test(keyPressed)||keyPressed.length!==1){return false}return true};exports.canAppendWildcard=canAppendWildcard},6349:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ensureMinimumTime=ensureMinimumTime;exports.DEFAULT_MINIMUM_TIME_MS=void 0;function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}var DEFAULT_MINIMUM_TIME_MS=300;exports.DEFAULT_MINIMUM_TIME_MS=DEFAULT_MINIMUM_TIME_MS;function ensureMinimumTime(_x){return _ensureMinimumTime.apply(this,arguments)}function _ensureMinimumTime(){_ensureMinimumTime=_asyncToGenerator(regeneratorRuntime.mark(function _callee(promiseOrPromises){var minimumTimeMs,returnValue,bufferedMinimumTimeMs,asyncActionStartTime,asyncActionCompletionTime,asyncActionDuration,additionalWaitingTime,_args=arguments;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:minimumTimeMs=_args.length>1&&_args[1]!==undefined?_args[1]:DEFAULT_MINIMUM_TIME_MS;bufferedMinimumTimeMs=minimumTimeMs+5;asyncActionStartTime=(new Date).getTime();if(!Array.isArray(promiseOrPromises)){_context.next=9;break}_context.next=6;return Promise.all(promiseOrPromises);case 6:returnValue=_context.sent;_context.next=12;break;case 9:_context.next=11;return promiseOrPromises;case 11:returnValue=_context.sent;case 12:asyncActionCompletionTime=(new Date).getTime();asyncActionDuration=asyncActionCompletionTime-asyncActionStartTime;if(!(asyncActionDuration<bufferedMinimumTimeMs)){_context.next=18;break}additionalWaitingTime=bufferedMinimumTimeMs-(asyncActionCompletionTime-asyncActionStartTime);_context.next=18;return new Promise(function(resolve){return setTimeout(resolve,additionalWaitingTime)});case 18:return _context.abrupt("return",returnValue);case 19:case"end":return _context.stop()}}},_callee)}));return _ensureMinimumTime.apply(this,arguments)}},6350:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getIndices=getIndices;var _lodash=__webpack_require__(1);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function getIndices(_x,_x2,_x3,_x4){return _getIndices.apply(this,arguments)}function _getIndices(){_getIndices=_asyncToGenerator(regeneratorRuntime.mark(function _callee(es,indexPatternCreationType,rawPattern,limit){var pattern,params,response,type;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:pattern=rawPattern.trim();if(!(pattern==="*:")){_context.next=3;break}return _context.abrupt("return",[]);case 3:if(!(pattern==="")){_context.next=5;break}return _context.abrupt("return",[]);case 5:if(!pattern.startsWith(",")){_context.next=7;break}return _context.abrupt("return",[]);case 7:if(limit){_context.next=9;break}throw new Error("`getIndices()` was called without the required `limit` parameter.");case 9:params={ignoreUnavailable:true,index:pattern,ignore:[404],body:{size:0,aggs:{indices:{terms:{field:"_index",size:limit}}}}};_context.prev=10;_context.next=13;return es.search(params);case 13:response=_context.sent;if(!(!response||response.error||!response.aggregations)){_context.next=16;break}return _context.abrupt("return",[]);case 16:return _context.abrupt("return",(0,_lodash.sortBy)(response.aggregations.indices.buckets.map(function(bucket){return bucket.key}).map(function(indexName){return{name:indexName,tags:indexPatternCreationType.getIndexTags(indexName)}}),"name"));case 19:_context.prev=19;_context.t0=_context["catch"](10);type=(0,_lodash.get)(_context.t0,"body.error.caused_by.type");if(!(type==="index_not_found_exception")){_context.next=24;break}return _context.abrupt("return",[]);case 24:throw _context.t0;case 25:case"end":return _context.stop()}}},_callee,null,[[10,19]])}));return _getIndices.apply(this,arguments)}},6351:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getMatchedIndices=getMatchedIndices;var _constants=__webpack_require__(676);function isSystemIndex(index){if(index.startsWith(".")){return true}if(index.includes(":")){return index.split(":").reduce(function(isSystem,index){return isSystem||isSystemIndex(index)},false)}return false}function filterSystemIndices(indices,isIncludingSystemIndices){if(!indices){return indices}var acceptableIndices=isIncludingSystemIndices?indices:indices.filter(function(index){return!isSystemIndex(index.name)});return acceptableIndices.slice(0,_constants.MAX_NUMBER_OF_MATCHING_INDICES)}function getMatchedIndices(unfilteredAllIndices,unfilteredPartialMatchedIndices,unfilteredExactMatchedIndices,query,isIncludingSystemIndices){var allIndices=filterSystemIndices(unfilteredAllIndices,isIncludingSystemIndices);var partialMatchedIndices=filterSystemIndices(unfilteredPartialMatchedIndices,isIncludingSystemIndices);var exactMatchedIndices=filterSystemIndices(unfilteredExactMatchedIndices,isIncludingSystemIndices);var visibleIndices;if(exactMatchedIndices.length){visibleIndices=exactMatchedIndices}else if(partialMatchedIndices.length){visibleIndices=partialMatchedIndices}else{visibleIndices=allIndices}return{allIndices:allIndices,exactMatchedIndices:exactMatchedIndices,partialMatchedIndices:partialMatchedIndices,visibleIndices:visibleIndices}}},6352:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.containsIllegalCharacters=containsIllegalCharacters;function containsIllegalCharacters(pattern,illegalCharacters){return illegalCharacters.some(function(_char){return pattern.includes(_char)})}},6353:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.extractTimeFields=extractTimeFields;var _i18n=__webpack_require__(5);function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function extractTimeFields(fields){var dateFields=fields.filter(function(field){return field.type==="date"});var label=_i18n.i18n.translate("kbn.management.createIndexPattern.stepTime.noTimeFieldsLabel",{defaultMessage:"The indices which match this index pattern don't contain any time fields."});if(dateFields.length===0){return[{display:label}]}var disabledDividerOption={isDisabled:true,display:"",fieldName:""};var noTimeFieldLabel=_i18n.i18n.translate("kbn.management.createIndexPattern.stepTime.noTimeFieldOptionLabel",{defaultMessage:"I don't want to use the Time Filter"});var noTimeFieldOption={display:noTimeFieldLabel,fieldName:undefined};return[].concat(_toConsumableArray(dateFields.map(function(field){return{display:field.name,fieldName:field.name}})),[disabledDividerOption,noTimeFieldOption])}},6354:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"LoadingIndices",{enumerable:true,get:function get(){return _loading_indices.LoadingIndices}});var _loading_indices=__webpack_require__(6355)},6355:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.LoadingIndices=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(2);var _react2=__webpack_require__(10);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}var LoadingIndices=function LoadingIndices(_ref){var rest=Object.assign({},_ref);return _react["default"].createElement(_eui.EuiFlexGroup,_extends({justifyContent:"center",alignItems:"center"},rest),_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiLoadingSpinner,{size:"m"})),_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiText,null,_react["default"].createElement(_eui.EuiTextColor,{color:"subdued"},_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.createIndexPattern.step.loadingHeader",defaultMessage:"Looking for matching indices"}))),_react["default"].createElement(_eui.EuiText,{size:"s",style:{textAlign:"center"}},_react["default"].createElement(_eui.EuiTextColor,{color:"subdued"},_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.createIndexPattern.step.loadingLabel",defaultMessage:"Just a sec"})))))};exports.LoadingIndices=LoadingIndices},6356:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"StatusMessage",{enumerable:true,get:function get(){return _status_message.StatusMessage}});var _status_message=__webpack_require__(6357)},6357:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.StatusMessage=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(2);var _react2=__webpack_require__(10);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var StatusMessage=function StatusMessage(_ref){var _ref$matchedIndices=_ref.matchedIndices,_ref$matchedIndices$a=_ref$matchedIndices.allIndices,allIndices=_ref$matchedIndices$a===void 0?[]:_ref$matchedIndices$a,_ref$matchedIndices$e=_ref$matchedIndices.exactMatchedIndices,exactMatchedIndices=_ref$matchedIndices$e===void 0?[]:_ref$matchedIndices$e,_ref$matchedIndices$p=_ref$matchedIndices.partialMatchedIndices,partialMatchedIndices=_ref$matchedIndices$p===void 0?[]:_ref$matchedIndices$p,isIncludingSystemIndices=_ref.isIncludingSystemIndices,query=_ref.query,showSystemIndicies=_ref.showSystemIndicies;var statusIcon;var statusMessage;var statusColor;var allIndicesLength=allIndices.length;if(query.length===0){statusIcon=null;statusColor="default";if(allIndicesLength>1){statusMessage=_react["default"].createElement("span",null,_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.createIndexPattern.step.status.matchAnyLabel.matchAnyDetail",defaultMessage:"Your index pattern can match any of your {strongIndices}, below.",values:{strongIndices:_react["default"].createElement("strong",null,allIndicesLength," indices")}}))}else if(!isIncludingSystemIndices&&showSystemIndicies){statusMessage=_react["default"].createElement("span",null,_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.createIndexPattern.step.status.noSystemIndicesWithPromptLabel",defaultMessage:"No Elasticsearch indices match your pattern. To view the matching system indices, toggle the switch in the upper right."}))}else{statusMessage=_react["default"].createElement("span",null,_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.createIndexPattern.step.status.noSystemIndicesLabel",defaultMessage:"No Elasticsearch indices match your pattern."}))}}else if(exactMatchedIndices.length){statusIcon="check";statusColor="secondary";statusMessage=_react["default"].createElement("span",null,"",_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.createIndexPattern.step.status.successLabel.successDetail",defaultMessage:"{strongSuccess} Your index pattern matches {strongIndices}.",values:{strongSuccess:_react["default"].createElement("strong",null,_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.createIndexPattern.step.status.successLabel.strongSuccessLabel",defaultMessage:"Success!"})),strongIndices:_react["default"].createElement("strong",null,_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.createIndexPattern.step.status.successLabel.strongIndicesLabel",defaultMessage:"{indicesLength, plural, one {# index} other {# indices}}",values:{indicesLength:exactMatchedIndices.length}}))}}))}else if(partialMatchedIndices.length){statusIcon=null;statusColor="default";statusMessage=_react["default"].createElement("span",null,_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.createIndexPattern.step.status.partialMatchLabel.partialMatchDetail",defaultMessage:"Your index pattern doesn't match any indices, but you have {strongIndices} which {matchedIndicesLength, plural, one {looks} other {look}} similar.",values:{matchedIndicesLength:partialMatchedIndices.length,strongIndices:_react["default"].createElement("strong",null,_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.createIndexPattern.step.status.partialMatchLabel.strongIndicesLabel",defaultMessage:"{matchedIndicesLength, plural, one {# index} other {# indices}}",values:{matchedIndicesLength:partialMatchedIndices.length}}))}}))}else if(allIndicesLength){statusIcon=null;statusColor="default";statusMessage=_react["default"].createElement("span",null,_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.createIndexPattern.step.status.notMatchLabel.notMatchDetail",defaultMessage:"The index pattern you've entered doesn't match any indices. You can match {indicesLength, plural, one {your} other {any of your}} {strongIndices}, below.",values:{strongIndices:_react["default"].createElement("strong",null,_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.createIndexPattern.step.status.notMatchLabel.allIndicesLabel",defaultMessage:"{indicesLength, plural, one {# index} other {# indices}}",values:{indicesLength:allIndicesLength}})),indicesLength:allIndicesLength}}))}return _react["default"].createElement(_eui.EuiText,{size:"s","data-test-subj":"createIndexPatternStatusMessage"},_react["default"].createElement(_eui.EuiTextColor,{color:statusColor},statusIcon?_react["default"].createElement(_eui.EuiIcon,{type:statusIcon}):null,statusMessage))};exports.StatusMessage=StatusMessage},6358:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"IndicesList",{enumerable:true,get:function get(){return _indices_list.IndicesList}});var _indices_list=__webpack_require__(6359)},6359:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.IndicesList=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(17));var _constants=__webpack_require__(676);var _eui=__webpack_require__(2);var _services=__webpack_require__(1455);var _react2=__webpack_require__(10);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var IndicesList=function(_Component){_inherits(IndicesList,_Component);function IndicesList(props){var _this;_classCallCheck(this,IndicesList);_this=_possibleConstructorReturn(this,_getPrototypeOf(IndicesList).call(this,props));_defineProperty(_assertThisInitialized(_this),"resetPageTo0",function(){return _this.onChangePage(0)});_defineProperty(_assertThisInitialized(_this),"onChangePage",function(page){_this.pager.goToPageIndex(page);_this.setState({page:page})});_defineProperty(_assertThisInitialized(_this),"onChangePerPage",function(perPage){_this.pager.setItemsPerPage(perPage);_this.setState({perPage:perPage});_this.resetPageTo0();_this.closePerPageControl()});_defineProperty(_assertThisInitialized(_this),"openPerPageControl",function(){_this.setState({isPerPageControlOpen:true})});_defineProperty(_assertThisInitialized(_this),"closePerPageControl",function(){_this.setState({isPerPageControlOpen:false})});_this.state={page:0,perPage:_constants.PER_PAGE_INCREMENTS[1],isPerPageControlOpen:false};_this.pager=new _services.Pager(props.indices.length,_this.state.perPage,_this.state.page);return _this}_createClass(IndicesList,[{key:"componentWillReceiveProps",value:function componentWillReceiveProps(nextProps){if(nextProps.indices.length!==this.props.indices.length){this.pager.setTotalItems(nextProps.indices.length);this.resetPageTo0()}}},{key:"renderPagination",value:function renderPagination(){var _this2=this;var _this$state=this.state,perPage=_this$state.perPage,page=_this$state.page,isPerPageControlOpen=_this$state.isPerPageControlOpen;var button=_react["default"].createElement(_eui.EuiButtonEmpty,{size:"s",color:"text",iconType:"arrowDown",iconSide:"right",onClick:this.openPerPageControl},_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.createIndexPattern.step.pagingLabel",defaultMessage:"Rows per page: {perPage}",values:{perPage:perPage}}));var items=_constants.PER_PAGE_INCREMENTS.map(function(increment){return _react["default"].createElement(_eui.EuiContextMenuItem,{key:increment,icon:"empty",onClick:function onClick(){return _this2.onChangePerPage(increment)}},increment)});var pageCount=this.pager.getTotalPages();var paginationControls=pageCount>1?_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiPagination,{pageCount:pageCount,activePage:page,onPageClick:this.onChangePage})):null;return _react["default"].createElement(_eui.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"center"},_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiPopover,{id:"customizablePagination",button:button,isOpen:isPerPageControlOpen,closePopover:this.closePerPageControl,panelPaddingSize:"none",withTitle:true},_react["default"].createElement(_eui.EuiContextMenuPanel,{items:items}))),paginationControls)}},{key:"highlightIndexName",value:function highlightIndexName(indexName,query){var queryIdx=indexName.indexOf(query);if(!query||queryIdx===-1){return indexName}var preStr=indexName.substr(0,queryIdx);var postStr=indexName.substr(queryIdx+query.length);return _react["default"].createElement("span",null,preStr,_react["default"].createElement("strong",null,query),postStr)}},{key:"render",value:function render(){var _this3=this;var _this$props=this.props,indices=_this$props.indices,query=_this$props.query,rest=_objectWithoutProperties(_this$props,["indices","query"]);var queryWithoutWildcard=query.endsWith("*")?query.substr(0,query.length-1):query;var paginatedIndices=indices.slice(this.pager.firstItemIndex,this.pager.lastItemIndex+1);var rows=paginatedIndices.map(function(index,key){return _react["default"].createElement(_eui.EuiTableRow,{key:key},_react["default"].createElement(_eui.EuiTableRowCell,null,_this3.highlightIndexName(index.name,queryWithoutWildcard)),_react["default"].createElement(_eui.EuiTableRowCell,null,index.tags.map(function(tag){return _react["default"].createElement(_eui.EuiBadge,{key:"index_".concat(key,"_tag_").concat(tag.key),color:"primary"},tag.name)})))});return _react["default"].createElement("div",rest,_react["default"].createElement(_eui.EuiTable,null,_react["default"].createElement(_eui.EuiTableBody,null,rows)),_react["default"].createElement(_eui.EuiSpacer,{size:"m"}),this.renderPagination())}}]);return IndicesList}(_react.Component);exports.IndicesList=IndicesList;_defineProperty(IndicesList,"propTypes",{indices:_propTypes["default"].array.isRequired,query:_propTypes["default"].string.isRequired})},6360:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"Header",{enumerable:true,get:function get(){return _header.Header}});var _header=__webpack_require__(6361)},6361:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Header=exports.HeaderComponent=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(2);var _react2=__webpack_require__(10);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}var HeaderComponent=function HeaderComponent(_ref){var isInputInvalid=_ref.isInputInvalid,errors=_ref.errors,characterList=_ref.characterList,query=_ref.query,onQueryChanged=_ref.onQueryChanged,goToNextStep=_ref.goToNextStep,isNextStepDisabled=_ref.isNextStepDisabled,intl=_ref.intl,rest=_objectWithoutProperties(_ref,["isInputInvalid","errors","characterList","query","onQueryChanged","goToNextStep","isNextStepDisabled","intl"]);return _react["default"].createElement("div",rest,_react["default"].createElement(_eui.EuiTitle,{size:"s"},_react["default"].createElement("h2",null,_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.createIndexPattern.stepHeader",defaultMessage:"Step 1 of 2: Define index pattern"}))),_react["default"].createElement(_eui.EuiSpacer,{size:"m"}),_react["default"].createElement(_eui.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"flexEnd"},_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiForm,{isInvalid:isInputInvalid},_react["default"].createElement(_eui.EuiFormRow,{label:_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.createIndexPattern.step.indexPatternLabel",defaultMessage:"Index pattern"}),isInvalid:isInputInvalid,error:errors,helpText:_react["default"].createElement("div",null,_react["default"].createElement("p",null,_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.createIndexPattern.step.indexPattern.allowLabel",defaultMessage:"You can use a {asterisk} as a wildcard in your index pattern.",values:{asterisk:_react["default"].createElement("strong",null,"*")}})),_react["default"].createElement("p",null,_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.createIndexPattern.step.indexPattern.disallowLabel",defaultMessage:"You can't use spaces or the characters {characterList}.",values:{characterList:_react["default"].createElement("strong",null,characterList)}})))},_react["default"].createElement(_eui.EuiFieldText,{name:"indexPattern",placeholder:intl.formatMessage({id:"kbn.management.createIndexPattern.step.indexPatternPlaceholder",defaultMessage:"index-name-*"}),value:query,isInvalid:isInputInvalid,onChange:onQueryChanged,"data-test-subj":"createIndexPatternNameInput"})))),_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiButton,{iconType:"arrowRight",onClick:function onClick(){return goToNextStep(query)},isDisabled:isNextStepDisabled,"data-test-subj":"createIndexPatternGoToStep2Button"},_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.createIndexPattern.step.nextStepButton",defaultMessage:"Next step"})))))};exports.HeaderComponent=HeaderComponent;var Header=(0,_react2.injectI18n)(HeaderComponent);exports.Header=Header},6362:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"StepTimeField",{enumerable:true,get:function get(){return _step_time_field.StepTimeField}});var _step_time_field=__webpack_require__(6363)},6363:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.StepTimeField=exports.StepTimeFieldComponent=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(17));var _lib=__webpack_require__(1039);var _header=__webpack_require__(6364);var _time_field=__webpack_require__(6366);var _advanced_options=__webpack_require__(6369);var _action_buttons=__webpack_require__(6371);var _eui=__webpack_require__(2);var _react2=__webpack_require__(10);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var StepTimeFieldComponent=function(_Component){_inherits(StepTimeFieldComponent,_Component);function StepTimeFieldComponent(props){var _this;_classCallCheck(this,StepTimeFieldComponent);_this=_possibleConstructorReturn(this,_getPrototypeOf(StepTimeFieldComponent).call(this,props));_defineProperty(_assertThisInitialized(_this),"mounted",false);_defineProperty(_assertThisInitialized(_this),"fetchTimeFields",_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var _this$props,indexPatternsService,indexPattern,getFetchForWildcardOptions,fields,timeFields;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this$props=_this.props,indexPatternsService=_this$props.indexPatternsService,indexPattern=_this$props.indexPattern;getFetchForWildcardOptions=_this.props.indexPatternCreationType.getFetchForWildcardOptions;_this.setState({isFetchingTimeFields:true});_context.next=5;return(0,_lib.ensureMinimumTime)(indexPatternsService.fieldsFetcher.fetchForWildcard(indexPattern,getFetchForWildcardOptions()));case 5:fields=_context.sent;timeFields=(0,_lib.extractTimeFields)(fields);_this.setState({timeFields:timeFields,isFetchingTimeFields:false});case 8:case"end":return _context.stop()}}},_callee)})));_defineProperty(_assertThisInitialized(_this),"onTimeFieldChanged",function(e){var value=e.target.value;var timeField=_this.state.timeFields.find(function(timeField){return timeField.fieldName===value});var validSelection=value!=="";_this.setState({selectedTimeField:timeField?timeField.fieldName:undefined,timeFieldSet:validSelection})});_defineProperty(_assertThisInitialized(_this),"onChangeIndexPatternId",function(e){_this.setState({indexPatternId:e.target.value})});_defineProperty(_assertThisInitialized(_this),"toggleAdvancedOptions",function(){_this.setState(function(state){return{isAdvancedOptionsVisible:!state.isAdvancedOptionsVisible}})});_defineProperty(_assertThisInitialized(_this),"createIndexPattern",_asyncToGenerator(regeneratorRuntime.mark(function _callee2(){var createIndexPattern,_this$state,selectedTimeField,indexPatternId;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:createIndexPattern=_this.props.createIndexPattern;_this$state=_this.state,selectedTimeField=_this$state.selectedTimeField,indexPatternId=_this$state.indexPatternId;_this.setState({isCreating:true});_context2.prev=3;_context2.next=6;return createIndexPattern(selectedTimeField,indexPatternId);case 6:_context2.next=13;break;case 8:_context2.prev=8;_context2.t0=_context2["catch"](3);if(_this.mounted){_context2.next=12;break}return _context2.abrupt("return");case 12:_this.setState({error:_context2.t0 instanceof Error?_context2.t0.message:String(_context2.t0),isCreating:false});case 13:case"end":return _context2.stop()}}},_callee2,null,[[3,8]])})));var _props$indexPatternCr=props.indexPatternCreationType,getIndexPatternType=_props$indexPatternCr.getIndexPatternType,getIndexPatternName=_props$indexPatternCr.getIndexPatternName;_this.state={error:"",timeFields:[],selectedTimeField:undefined,timeFieldSet:false,isAdvancedOptionsVisible:false,isFetchingTimeFields:false,isCreating:false,indexPatternId:"",indexPatternType:getIndexPatternType(),indexPatternName:getIndexPatternName()};return _this}_createClass(StepTimeFieldComponent,[{key:"componentDidMount",value:function componentDidMount(){this.mounted=true;this.fetchTimeFields()}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.mounted=false}},{key:"formatErrorMessage",value:function formatErrorMessage(message){return message==="Conflict"?_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.createIndexPattern.stepTime.patterAlreadyExists",defaultMessage:"Custom index pattern ID already exists."}):message}},{key:"render",value:function render(){var _this$state2=this.state,timeFields=_this$state2.timeFields,selectedTimeField=_this$state2.selectedTimeField,timeFieldSet=_this$state2.timeFieldSet,isAdvancedOptionsVisible=_this$state2.isAdvancedOptionsVisible,indexPatternId=_this$state2.indexPatternId,isCreating=_this$state2.isCreating,isFetchingTimeFields=_this$state2.isFetchingTimeFields,indexPatternName=_this$state2.indexPatternName;if(isCreating){return _react["default"].createElement(_eui.EuiPanel,null,_react["default"].createElement(_eui.EuiFlexGroup,{alignItems:"center"},_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiLoadingSpinner,null)),_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiText,null,_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.createIndexPattern.stepTime.creatingLabel",defaultMessage:"Creating index pattern"})))))}var _this$props2=this.props,indexPattern=_this$props2.indexPattern,goToPreviousStep=_this$props2.goToPreviousStep;var timeFieldOptions=timeFields?[{text:"",value:""}].concat(_toConsumableArray(timeFields.map(function(timeField){return{text:timeField.display,value:timeField.fieldName,disabled:timeFields.isDisabled}}))):[];var showTimeField=!timeFields||timeFields.length>1;var submittable=!showTimeField||timeFieldSet;var error=this.state.error?_react["default"].createElement(_react["default"].Fragment,null,_react["default"].createElement(_eui.EuiCallOut,{title:_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.createIndexPattern.stepTime.error",defaultMessage:"Error"}),color:"danger",iconType:"cross"},_react["default"].createElement("p",null,this.formatErrorMessage(this.state.error))),_react["default"].createElement(_eui.EuiSpacer,{size:"m"})):null;return _react["default"].createElement(_eui.EuiPanel,{paddingSize:"l"},_react["default"].createElement(_header.Header,{indexPattern:indexPattern,indexPatternName:indexPatternName}),_react["default"].createElement(_eui.EuiSpacer,{size:"m"}),_react["default"].createElement(_time_field.TimeField,{isVisible:showTimeField,fetchTimeFields:this.fetchTimeFields,timeFieldOptions:timeFieldOptions,isLoading:isFetchingTimeFields,selectedTimeField:selectedTimeField,onTimeFieldChanged:this.onTimeFieldChanged}),_react["default"].createElement(_eui.EuiSpacer,{size:"s"}),_react["default"].createElement(_advanced_options.AdvancedOptions,{isVisible:isAdvancedOptionsVisible,indexPatternId:indexPatternId,toggleAdvancedOptions:this.toggleAdvancedOptions,onChangeIndexPatternId:this.onChangeIndexPatternId}),_react["default"].createElement(_eui.EuiSpacer,{size:"m"}),error,_react["default"].createElement(_action_buttons.ActionButtons,{goToPreviousStep:goToPreviousStep,submittable:submittable,createIndexPattern:this.createIndexPattern}))}}]);return StepTimeFieldComponent}(_react.Component);exports.StepTimeFieldComponent=StepTimeFieldComponent;_defineProperty(StepTimeFieldComponent,"propTypes",{indexPattern:_propTypes["default"].string.isRequired,indexPatternsService:_propTypes["default"].object.isRequired,goToPreviousStep:_propTypes["default"].func.isRequired,createIndexPattern:_propTypes["default"].func.isRequired,indexPatternCreationType:_propTypes["default"].object.isRequired});var StepTimeField=(0,_react2.injectI18n)(StepTimeFieldComponent);exports.StepTimeField=StepTimeField},6364:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"Header",{enumerable:true,get:function get(){return _header.Header}});var _header=__webpack_require__(6365)},6365:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Header=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(2);var _react2=__webpack_require__(10);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Header=function Header(_ref){var indexPattern=_ref.indexPattern,indexPatternName=_ref.indexPatternName;return _react["default"].createElement("div",null,_react["default"].createElement(_eui.EuiTitle,{size:"s"},_react["default"].createElement("h2",null,_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.createIndexPattern.stepTimeHeader",defaultMessage:"Step 2 of 2: Configure settings"}))),_react["default"].createElement(_eui.EuiSpacer,{size:"m"}),_react["default"].createElement(_eui.EuiText,{color:"subdued"},_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.createIndexPattern.stepTimeLabel",defaultMessage:"You've defined {indexPattern} as your {indexPatternName}. Now you can specify some settings before we create it.",values:{indexPattern:_react["default"].createElement("strong",null,indexPattern),indexPatternName:indexPatternName}})))};exports.Header=Header},6366:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"TimeField",{enumerable:true,get:function get(){return _time_field.TimeField}});var _time_field=__webpack_require__(6367)},6367:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TimeField=exports.TimeFieldComponent=void 0;var _react=_interopRequireDefault(__webpack_require__(0));__webpack_require__(6368);var _eui=__webpack_require__(2);var _react2=__webpack_require__(10);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var TimeFieldComponent=function TimeFieldComponent(_ref){var isVisible=_ref.isVisible,fetchTimeFields=_ref.fetchTimeFields,timeFieldOptions=_ref.timeFieldOptions,isLoading=_ref.isLoading,selectedTimeField=_ref.selectedTimeField,onTimeFieldChanged=_ref.onTimeFieldChanged,intl=_ref.intl;return _react["default"].createElement(_eui.EuiForm,null,isVisible?_react["default"].createElement(_eui.EuiFormRow,{label:_react["default"].createElement(_eui.EuiFlexGroup,{gutterSize:"xs",justifyContent:"spaceBetween",alignItems:"center"},_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement("span",null,_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.createIndexPattern.stepTime.fieldHeader",defaultMessage:"Time Filter field name"}))),_react["default"].createElement(_eui.EuiFlexItem,{grow:false},isLoading?_react["default"].createElement(_eui.EuiLoadingSpinner,{size:"s"}):_react["default"].createElement(_eui.EuiLink,{className:"timeFieldRefreshButton",onClick:fetchTimeFields},_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.createIndexPattern.stepTime.refreshButton",defaultMessage:"Refresh"})))),helpText:_react["default"].createElement("div",null,_react["default"].createElement("p",null,_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.createIndexPattern.stepTime.fieldLabel",defaultMessage:"The Time Filter will use this field to filter your data by time."})),_react["default"].createElement("p",null,_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.createIndexPattern.stepTime.fieldWarningLabel",defaultMessage:"You can choose not to have a time field, but you will not be able to narrow down your data by a time range."})))},isLoading?_react["default"].createElement(_eui.EuiSelect,{name:"timeField","data-test-subj":"createIndexPatternTimeFieldSelect",options:[{text:intl.formatMessage({id:"kbn.management.createIndexPattern.stepTime.field.loadingDropDown",defaultMessage:"Loading"}),value:""}],disabled:true}):_react["default"].createElement(_eui.EuiSelect,{name:"timeField","data-test-subj":"createIndexPatternTimeFieldSelect",options:timeFieldOptions,isLoading:isLoading,disabled:isLoading,value:selectedTimeField,onChange:onTimeFieldChanged})):_react["default"].createElement(_eui.EuiText,null,_react["default"].createElement("p",null,_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.createIndexPattern.stepTime.field.noTimeFieldsLabel",defaultMessage:"The indices which match this index pattern don't contain any time fields."}))))};exports.TimeFieldComponent=TimeFieldComponent;var TimeField=(0,_react2.injectI18n)(TimeFieldComponent);exports.TimeField=TimeField},6368:function(module,exports,__webpack_require__){},6369:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"AdvancedOptions",{enumerable:true,get:function get(){return _advanced_options.AdvancedOptions}});var _advanced_options=__webpack_require__(6370)},6370:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AdvancedOptions=exports.AdvancedOptionsComponent=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(2);var _react2=__webpack_require__(10);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var AdvancedOptionsComponent=function AdvancedOptionsComponent(_ref){var isVisible=_ref.isVisible,indexPatternId=_ref.indexPatternId,toggleAdvancedOptions=_ref.toggleAdvancedOptions,onChangeIndexPatternId=_ref.onChangeIndexPatternId,intl=_ref.intl;return _react["default"].createElement("div",null,_react["default"].createElement(_eui.EuiButtonEmpty,{iconType:isVisible?"arrowDown":"arrowRight",onClick:toggleAdvancedOptions},isVisible?_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.createIndexPattern.stepTime.options.hideButton",defaultMessage:"Hide advanced options"}):_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.createIndexPattern.stepTime.options.showButton",defaultMessage:"Show advanced options"})),_react["default"].createElement(_eui.EuiSpacer,{size:"xs"}),isVisible?_react["default"].createElement(_eui.EuiForm,null,_react["default"].createElement(_eui.EuiFormRow,{label:_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.createIndexPattern.stepTime.options.patternHeader",defaultMessage:"Custom index pattern ID"}),helpText:_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.createIndexPattern.stepTime.options.patternLabel",defaultMessage:"Kibana will provide a unique identifier for each index pattern. If you do not want to use this unique ID, enter a custom one."})},_react["default"].createElement(_eui.EuiFieldText,{name:"indexPatternId","data-test-subj":"createIndexPatternIdInput",value:indexPatternId,onChange:onChangeIndexPatternId,placeholder:intl.formatMessage({id:"kbn.management.createIndexPattern.stepTime.options.patternPlaceholder",defaultMessage:"custom-index-pattern-id"})}))):null)};exports.AdvancedOptionsComponent=AdvancedOptionsComponent;var AdvancedOptions=(0,_react2.injectI18n)(AdvancedOptionsComponent);exports.AdvancedOptions=AdvancedOptions},6371:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"ActionButtons",{enumerable:true,get:function get(){return _action_buttons.ActionButtons}});var _action_buttons=__webpack_require__(6372)},6372:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ActionButtons=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(2);var _react2=__webpack_require__(10);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ActionButtons=function ActionButtons(_ref){var goToPreviousStep=_ref.goToPreviousStep,submittable=_ref.submittable,createIndexPattern=_ref.createIndexPattern;return _react["default"].createElement(_eui.EuiFlexGroup,{justifyContent:"flexEnd"},_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiButtonEmpty,{iconType:"arrowLeft",onClick:goToPreviousStep},_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.createIndexPattern.stepTime.backButton",defaultMessage:"Back"}))),_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiButton,{isDisabled:!submittable,"data-test-subj":"createIndexPatternButton",fill:true,onClick:createIndexPattern},_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.createIndexPattern.stepTime.createPatternButton",defaultMessage:"Create index pattern"}))))};exports.ActionButtons=ActionButtons},6373:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"Header",{enumerable:true,get:function get(){return _header.Header}});var _header=__webpack_require__(6374)},6374:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Header=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(2);var _react2=__webpack_require__(10);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}var HeaderUi=function HeaderUi(_ref){var prompt=_ref.prompt,indexPatternName=_ref.indexPatternName,showSystemIndices=_ref.showSystemIndices,isIncludingSystemIndices=_ref.isIncludingSystemIndices,onChangeIncludingSystemIndices=_ref.onChangeIncludingSystemIndices,isBeta=_ref.isBeta,intl=_ref.intl;return _react["default"].createElement("div",null,_react["default"].createElement(_eui.EuiTitle,null,_react["default"].createElement("h1",null,_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.createIndexPatternHeader",defaultMessage:"Create {indexPatternName}",values:{indexPatternName:indexPatternName}}),isBeta?_react["default"].createElement(_react.Fragment,null," ",_react["default"].createElement(_eui.EuiBetaBadge,{label:intl.formatMessage({id:"kbn.management.createIndexPattern.betaLabel",defaultMessage:"Beta"})})):null)),_react["default"].createElement(_eui.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"flexEnd"},_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiText,{size:"s"},_react["default"].createElement("p",null,_react["default"].createElement(_eui.EuiTextColor,{color:"subdued"},_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.createIndexPatternLabel",defaultMessage:"Kibana uses index patterns to retrieve data from Elasticsearch indices for things like visualizations."}))))),showSystemIndices?_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiSwitch,{label:_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.createIndexPattern.includeSystemIndicesToggleSwitchLabel",defaultMessage:"Include system indices"}),id:"checkboxShowSystemIndices",checked:isIncludingSystemIndices,onChange:onChangeIncludingSystemIndices})):null),prompt?_react["default"].createElement(_react.Fragment,null,_react["default"].createElement(_eui.EuiSpacer,{size:"s"}),prompt):null,_react["default"].createElement(_eui.EuiSpacer,{size:"m"}))};var Header=(0,_react2.injectI18n)(HeaderUi);exports.Header=Header},6375:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"LoadingState",{enumerable:true,get:function get(){return _loading_state.LoadingState}});var _loading_state=__webpack_require__(6376)},6376:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.LoadingState=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(2);var _react2=__webpack_require__(10);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var LoadingState=function LoadingState(){return _react["default"].createElement(_eui.EuiFlexGroup,{justifyContent:"center",alignItems:"center",direction:"column",gutterSize:"s"},_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiTitle,{size:"s"},_react["default"].createElement("h2",{style:{textAlign:"center"}},_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.createIndexPattern.loadingState.checkingLabel",defaultMessage:"Checking for Elasticsearch data"})))),_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiLoadingSpinner,{size:"l"})))};exports.LoadingState=LoadingState},6377:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"EmptyState",{enumerable:true,get:function get(){return _empty_state.EmptyState}});var _empty_state=__webpack_require__(6378)},6378:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.EmptyState=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(17));var _eui=__webpack_require__(2);var _react2=__webpack_require__(10);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var EmptyState=function EmptyState(_ref){var onRefresh=_ref.onRefresh;return _react["default"].createElement("div",null,_react["default"].createElement(_eui.EuiCallOut,{color:"warning",title:_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.createIndexPattern.emptyStateHeader",defaultMessage:"Couldn't find any Elasticsearch data"})},_react["default"].createElement("p",null,_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.createIndexPattern.emptyStateLabel.emptyStateDetail",defaultMessage:"{needToIndex} {learnHowLink} or {getStartedLink}",values:{needToIndex:_react["default"].createElement(_eui.EuiTextColor,{color:"subdued"},_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.createIndexPattern.emptyStateLabel.needToIndexLabel",defaultMessage:"You'll need to index some data into Elasticsearch before you can create an index pattern."})),learnHowLink:_react["default"].createElement(_eui.EuiLink,{href:"#/home/tutorial_directory"},_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.createIndexPattern.emptyStateLabel.learnHowLink",defaultMessage:"Learn how"})),getStartedLink:_react["default"].createElement(_eui.EuiLink,{href:"#/home/tutorial_directory/sampleData"},_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.createIndexPattern.emptyStateLabel.getStartedLink",defaultMessage:"get started with some sample data sets."}))}})),_react["default"].createElement(_eui.EuiButton,{iconType:"refresh",onClick:onRefresh,"data-test-subj":"refreshIndicesButton",color:"warning"},_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.createIndexPattern.emptyState.checkDataButton",defaultMessage:"Check for new data"}))))};exports.EmptyState=EmptyState;EmptyState.propTypes={onRefresh:_propTypes["default"].func.isRequired}},6379:function(module,exports,__webpack_require__){"use strict";__webpack_require__(6380)},6380:function(module,exports,__webpack_require__){"use strict";var _lodash=_interopRequireDefault(__webpack_require__(1));__webpack_require__(6381);__webpack_require__(6384);var _doc_title=__webpack_require__(423);var _url=__webpack_require__(350);var _edit_sections=__webpack_require__(6404);var _notify=__webpack_require__(24);var _routes=_interopRequireDefault(__webpack_require__(34));var _modules=__webpack_require__(12);var _edit_index_pattern=_interopRequireDefault(__webpack_require__(6405));var _field_wildcard=__webpack_require__(1364);var _index_pattern_list=__webpack_require__(2067);var _react=_interopRequireDefault(__webpack_require__(0));var _reactDom=__webpack_require__(27);var _source_filters_table=__webpack_require__(6406);var _indexed_fields_table=__webpack_require__(6414);var _scripted_fields_table=__webpack_require__(6420);var _i18n=__webpack_require__(5);var _i18n2=__webpack_require__(28);var _breadcrumbs=__webpack_require__(675);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}var REACT_SOURCE_FILTERS_DOM_ELEMENT_ID="reactSourceFiltersTable";var REACT_INDEXED_FIELDS_DOM_ELEMENT_ID="reactIndexedFieldsTable";var REACT_SCRIPTED_FIELDS_DOM_ELEMENT_ID="reactScriptedFieldsTable";function updateSourceFiltersTable($scope,$state){if($state.tab==="sourceFilters"){$scope.$$postDigest(function(){var node=document.getElementById(REACT_SOURCE_FILTERS_DOM_ELEMENT_ID);if(!node){return}(0,_reactDom.render)(_react["default"].createElement(_i18n2.I18nContext,null,_react["default"].createElement(_source_filters_table.SourceFiltersTable,{indexPattern:$scope.indexPattern,filterFilter:$scope.fieldFilter,fieldWildcardMatcher:$scope.fieldWildcardMatcher,onAddOrRemoveFilter:function onAddOrRemoveFilter(){$scope.editSections=$scope.editSectionsProvider($scope.indexPattern,$scope.fieldFilter,$scope.indexPatternListProvider);$scope.refreshFilters();$scope.$apply()}})),node)})}else{destroySourceFiltersTable()}}function destroySourceFiltersTable(){var node=document.getElementById(REACT_SOURCE_FILTERS_DOM_ELEMENT_ID);node&&(0,_reactDom.unmountComponentAtNode)(node)}function updateScriptedFieldsTable($scope,$state){if($state.tab==="scriptedFields"){$scope.$$postDigest(function(){var node=document.getElementById(REACT_SCRIPTED_FIELDS_DOM_ELEMENT_ID);if(!node){return}(0,_reactDom.render)(_react["default"].createElement(_i18n2.I18nContext,null,_react["default"].createElement(_scripted_fields_table.ScriptedFieldsTable,{indexPattern:$scope.indexPattern,fieldFilter:$scope.fieldFilter,scriptedFieldLanguageFilter:$scope.scriptedFieldLanguageFilter,helpers:{redirectToRoute:function redirectToRoute(obj,route){$scope.kbnUrl.redirectToRoute(obj,route);$scope.$apply()},getRouteHref:function getRouteHref(obj,route){return $scope.kbnUrl.getRouteHref(obj,route)}},onRemoveField:function onRemoveField(){$scope.editSections=$scope.editSectionsProvider($scope.indexPattern,$scope.fieldFilter,$scope.indexPatternListProvider);$scope.refreshFilters();$scope.$apply()}})),node)})}else{destroyScriptedFieldsTable()}}function destroyScriptedFieldsTable(){var node=document.getElementById(REACT_SCRIPTED_FIELDS_DOM_ELEMENT_ID);node&&(0,_reactDom.unmountComponentAtNode)(node)}function updateIndexedFieldsTable($scope,$state){if($state.tab==="indexedFields"){$scope.$$postDigest(function(){var node=document.getElementById(REACT_INDEXED_FIELDS_DOM_ELEMENT_ID);if(!node){return}(0,_reactDom.render)(_react["default"].createElement(_i18n2.I18nContext,null,_react["default"].createElement(_indexed_fields_table.IndexedFieldsTable,{fields:$scope.fields,indexPattern:$scope.indexPattern,fieldFilter:$scope.fieldFilter,fieldWildcardMatcher:$scope.fieldWildcardMatcher,indexedFieldTypeFilter:$scope.indexedFieldTypeFilter,helpers:{redirectToRoute:function redirectToRoute(obj,route){$scope.kbnUrl.redirectToRoute(obj,route);$scope.$apply()},getFieldInfo:$scope.getFieldInfo}})),node)})}else{destroyIndexedFieldsTable()}}function destroyIndexedFieldsTable(){var node=document.getElementById(REACT_INDEXED_FIELDS_DOM_ELEMENT_ID);node&&(0,_reactDom.unmountComponentAtNode)(node)}_routes["default"].when("/management/kibana/index_patterns/:indexPatternId",{template:_edit_index_pattern["default"],k7Breadcrumbs:_breadcrumbs.getEditBreadcrumbs,resolve:{indexPattern:function indexPattern($route,Promise,redirectWhenMissing,indexPatterns){return Promise.resolve(indexPatterns.get($route.current.params.indexPatternId))["catch"](redirectWhenMissing("/management/kibana/index_patterns"))}}});_modules.uiModules.get("apps/management").controller("managementIndexPatternsEdit",function($scope,$location,$route,Promise,config,indexPatterns,Private,AppState,confirmModal){var $state=$scope.state=new AppState;var _Private=Private(_field_wildcard.FieldWildcardProvider),fieldWildcardMatcher=_Private.fieldWildcardMatcher;var indexPatternListProvider=Private(_index_pattern_list.IndexPatternListFactory)();$scope.fieldWildcardMatcher=fieldWildcardMatcher;$scope.editSectionsProvider=Private(_edit_sections.IndicesEditSectionsProvider);$scope.kbnUrl=Private(_url.KbnUrlProvider);$scope.indexPattern=$route.current.locals.indexPattern;$scope.indexPatternListProvider=indexPatternListProvider;$scope.indexPattern.tags=indexPatternListProvider.getIndexPatternTags($scope.indexPattern,$scope.indexPattern.id===config.get("defaultIndex"));$scope.getFieldInfo=indexPatternListProvider.getFieldInfo;_doc_title.docTitle.change($scope.indexPattern.title);var otherPatterns=_lodash["default"].filter($route.current.locals.indexPatterns,function(pattern){return pattern.id!==$scope.indexPattern.id});$scope.$watch("indexPattern.fields",function(){$scope.editSections=$scope.editSectionsProvider($scope.indexPattern,$scope.fieldFilter,indexPatternListProvider);$scope.refreshFilters();$scope.fields=$scope.indexPattern.getNonScriptedFields();updateIndexedFieldsTable($scope,$state);updateScriptedFieldsTable($scope,$state)});$scope.migration={isMigrating:false,newTitle:$scope.indexPattern.getIndex()};$scope.migrate=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:$scope.migration.isMigrating=true;_context.next=3;return $scope.indexPattern.migrate($scope.migration.newTitle);case 3:$scope.migration.isMigrating=false;case 4:case"end":return _context.stop()}}},_callee)}));$scope.refreshFilters=function(){var indexedFieldTypes=[];var scriptedFieldLanguages=[];$scope.indexPattern.fields.forEach(function(field){if(field.scripted){scriptedFieldLanguages.push(field.lang)}else{indexedFieldTypes.push(field.type)}});$scope.indexedFieldTypes=_lodash["default"].unique(indexedFieldTypes);$scope.scriptedFieldLanguages=_lodash["default"].unique(scriptedFieldLanguages)};$scope.changeFilter=function(filter,val){$scope[filter]=val||""};$scope.changeTab=function(obj){$state.tab=obj.index;updateIndexedFieldsTable($scope,$state);updateScriptedFieldsTable($scope,$state);updateSourceFiltersTable($scope,$state);$state.save()};$scope.$watch("state.tab",function(tab){if(!tab)$scope.changeTab($scope.editSections[0])});$scope.$watchCollection("indexPattern.fields",function(){$scope.conflictFields=$scope.indexPattern.fields.filter(function(field){return field.type==="conflict"})});$scope.refreshFields=function(){var confirmMessage=_i18n.i18n.translate("kbn.management.editIndexPattern.refreshLabel",{defaultMessage:"This action resets the popularity counter of each field."});var confirmModalOptions={confirmButtonText:_i18n.i18n.translate("kbn.management.editIndexPattern.refreshButton",{defaultMessage:"Refresh"}),onConfirm:function(){var _onConfirm=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(){return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return $scope.indexPattern.init(true);case 2:$scope.fields=$scope.indexPattern.getNonScriptedFields();case 3:case"end":return _context2.stop()}}},_callee2)}));function onConfirm(){return _onConfirm.apply(this,arguments)}return onConfirm}(),title:_i18n.i18n.translate("kbn.management.editIndexPattern.refreshHeader",{defaultMessage:"Refresh field list?"})};confirmModal(confirmMessage,confirmModalOptions)};$scope.removePattern=function(){function doRemove(){if($scope.indexPattern.id===config.get("defaultIndex")){config.remove("defaultIndex");if(otherPatterns.length){config.set("defaultIndex",otherPatterns[0].id)}}Promise.resolve(indexPatterns["delete"]($scope.indexPattern)).then(function(){$location.url("/management/kibana/index_patterns")})["catch"](_notify.fatalError)}var confirmModalOptions={confirmButtonText:_i18n.i18n.translate("kbn.management.editIndexPattern.deleteButton",{defaultMessage:"Delete"}),onConfirm:doRemove,title:_i18n.i18n.translate("kbn.management.editIndexPattern.deleteHeader",{defaultMessage:"Delete index pattern?"})};confirmModal("",confirmModalOptions)};$scope.setDefaultPattern=function(){config.set("defaultIndex",$scope.indexPattern.id)};$scope.setIndexPatternsTimeField=function(field){if(field.type!=="date"){var errorMessage=_i18n.i18n.translate("kbn.management.editIndexPattern.notDateErrorMessage",{defaultMessage:"That field is a {fieldType} not a date.",values:{fieldType:field.type}});_notify.toastNotifications.addDanger(errorMessage);return}$scope.indexPattern.timeFieldName=field.name;return $scope.indexPattern.save()};$scope.$watch("fieldFilter",function(){$scope.editSections=$scope.editSectionsProvider($scope.indexPattern,$scope.fieldFilter,indexPatternListProvider);if($scope.fieldFilter===undefined){return}switch($state.tab){case"indexedFields":updateIndexedFieldsTable($scope,$state);case"scriptedFields":updateScriptedFieldsTable($scope,$state);case"sourceFilters":updateSourceFiltersTable($scope,$state)}});$scope.$watch("indexedFieldTypeFilter",function(){if($scope.indexedFieldTypeFilter!==undefined&&$state.tab==="indexedFields"){updateIndexedFieldsTable($scope,$state)}});$scope.$watch("scriptedFieldLanguageFilter",function(){if($scope.scriptedFieldLanguageFilter!==undefined&&$state.tab==="scriptedFields"){updateScriptedFieldsTable($scope,$state)}});$scope.$on("$destroy",function(){destroyIndexedFieldsTable();destroyScriptedFieldsTable()});updateScriptedFieldsTable($scope,$state);updateSourceFiltersTable($scope,$state)})},6381:function(module,exports,__webpack_require__){"use strict";__webpack_require__(6382)},6382:function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(12);var _index_header=_interopRequireDefault(__webpack_require__(6383));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_modules.uiModules.get("apps/management").directive("kbnManagementIndexPatternsHeader",function(config){return{restrict:"E",template:_index_header["default"],replace:true,scope:{indexPattern:"=",setDefault:"&",refreshFields:"&",delete:"&"},link:function link($scope,$el,attrs){$scope["delete"]=attrs["delete"]?$scope["delete"]:null;$scope.setDefault=attrs.setDefault?$scope.setDefault:null;$scope.refreshFields=attrs.refreshFields?$scope.refreshFields:null;config.bindToScope($scope,"defaultIndex")}}})},6383:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<div class="kuiBar kuiVerticalRhythm">\n  <div class="kuiBarSection">\n    \x3c!-- Index pattern name --\x3e\n    <h1\n      class="euiTitle euiTitle--medium"\n      data-test-subj="indexPatternTitle"\n    >\n      <span\n        aria-hidden="true"\n        ng-if="defaultIndex === indexPattern.id"\n        class="kuiIcon fa-star"\n      ></span>\n      {{indexPattern.title}}\n    </h1>\n  </div>\n\n  <div class="kuiBarSection">\n    <button\n      ng-if="setDefault"\n      ng-click="setDefault()"\n      aria-label="{{::\'kbn.management.editIndexPattern.setDefaultAria\' | i18n: { defaultMessage: \'Set as default index\' } }}"\n      tooltip="{{::\'kbn.management.editIndexPattern.setDefaultTooltip\' | i18n: { defaultMessage: \'Set as default index\' } }}"\n      class="kuiButton kuiButton--basic"\n      data-test-subj="setDefaultIndexPatternButton"\n    >\n      <span\n        aria-hidden="true"\n        class="kuiIcon fa-star"\n      ></span>\n    </button>\n\n    <button\n      ng-if="refreshFields"\n      ng-click="refreshFields()"\n      aria-label="{{::\'kbn.management.editIndexPattern.refreshAria\' | i18n: { defaultMessage: \'Reload field list\' } }}"\n      tooltip="{{::\'kbn.management.editIndexPattern.refreshTooltip\' | i18n: { defaultMessage: \'Refresh field list\' } }}"\n      class="kuiButton kuiButton--basic"\n    >\n      <span\n        aria-hidden="true"\n        class="kuiIcon fa-refresh"\n      ></span>\n    </button>\n\n    <button\n      ng-if="delete"\n      ng-click="delete()"\n      aria-label="{{::\'kbn.management.editIndexPattern.removeAria\' | i18n: { defaultMessage: \'Remove index pattern\' } }}"\n      tooltip="{{::\'kbn.management.editIndexPattern.removeTooltip\' | i18n: { defaultMessage: \'Remove index pattern\' } }}"\n      class="kuiButton kuiButton--danger"\n      data-test-subj="deleteIndexPatternButton"\n    >\n      <span\n        aria-hidden="true"\n        class="kuiIcon fa-trash"\n      ></span>\n    </button>\n  </div>\n</div>\n'},6384:function(module,exports,__webpack_require__){"use strict";__webpack_require__(6385)},6385:function(module,exports,__webpack_require__){"use strict";var _field=__webpack_require__(1357);var _field_format_editors=__webpack_require__(2020);var _doc_title=__webpack_require__(423);var _url=__webpack_require__(350);var _routes=_interopRequireDefault(__webpack_require__(34));var _notify=__webpack_require__(24);var _create_edit_field=_interopRequireDefault(__webpack_require__(6386));var _breadcrumbs=__webpack_require__(675);var _react=_interopRequireDefault(__webpack_require__(0));var _reactDom=__webpack_require__(27);var _field_editor=__webpack_require__(6387);var _i18n=__webpack_require__(28);var _i18n2=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var REACT_FIELD_EDITOR_ID="reactFieldEditor";var renderFieldEditor=function renderFieldEditor($scope,indexPattern,field,_ref){var Field=_ref.Field,getConfig=_ref.getConfig,$http=_ref.$http,fieldFormatEditors=_ref.fieldFormatEditors,redirectAway=_ref.redirectAway;$scope.$$postDigest(function(){var node=document.getElementById(REACT_FIELD_EDITOR_ID);if(!node){return}(0,_reactDom.render)(_react["default"].createElement(_i18n.I18nContext,null,_react["default"].createElement(_field_editor.FieldEditor,{indexPattern:indexPattern,field:field,helpers:{Field:Field,getConfig:getConfig,$http:$http,fieldFormatEditors:fieldFormatEditors,redirectAway:redirectAway}})),node)})};var destroyFieldEditor=function destroyFieldEditor(){var node=document.getElementById(REACT_FIELD_EDITOR_ID);node&&(0,_reactDom.unmountComponentAtNode)(node)};_routes["default"].when("/management/kibana/index_patterns/:indexPatternId/field/:fieldName*",{mode:"edit",k7Breadcrumbs:_breadcrumbs.getEditFieldBreadcrumbs}).when("/management/kibana/index_patterns/:indexPatternId/create-field/",{mode:"create",k7Breadcrumbs:_breadcrumbs.getCreateFieldBreadcrumbs}).defaults(/management\/kibana\/index_patterns\/[^\/]+\/(field|create-field)(\/|$)/,{template:_create_edit_field["default"],mapBreadcrumbs:function mapBreadcrumbs($route,breadcrumbs){var indexPattern=$route.current.locals.indexPattern;return breadcrumbs.map(function(crumb){if(crumb.id!==indexPattern.id){return crumb}return _objectSpread({},crumb,{display:indexPattern.title})})},resolve:{indexPattern:function indexPattern($route,Promise,redirectWhenMissing,indexPatterns){return Promise.resolve(indexPatterns.get($route.current.params.indexPatternId))["catch"](redirectWhenMissing("/management/kibana/index_patterns"))}},controllerAs:"fieldSettings",controller:function FieldEditorPageController($scope,$route,$timeout,$http,Private,config){var _this=this;var getConfig=function getConfig(){return config.get.apply(config,arguments)};var fieldFormatEditors=Private(_field_format_editors.RegistryFieldFormatEditorsProvider);var kbnUrl=Private(_url.KbnUrlProvider);this.mode=$route.current.mode;this.indexPattern=$route.current.locals.indexPattern;if(this.mode==="edit"){var _fieldName=$route.current.params.fieldName;this.field=this.indexPattern.fields.byName[_fieldName];if(!this.field){var message=_i18n2.i18n.translate("kbn.management.editIndexPattern.scripted.noFieldLabel",{defaultMessage:"'{indexPatternTitle}' index pattern doesn't have a scripted field called '{fieldName}'",values:{indexPatternTitle:this.indexPattern.title,fieldName:_fieldName}});_notify.toastNotifications.add(message);kbnUrl.redirectToRoute(this.indexPattern,"edit");return}}else if(this.mode==="create"){this.field=new _field.Field(this.indexPattern,{scripted:true,type:"number"})}else{var errorMessage=_i18n2.i18n.translate("kbn.management.editIndexPattern.scripted.unknownModeErrorMessage",{defaultMessage:"unknown fieldSettings mode {mode}",values:{mode:this.mode}});throw new Error(errorMessage)}var fieldName=this.field.name||_i18n2.i18n.translate("kbn.management.editIndexPattern.scripted.newFieldPlaceholder",{defaultMessage:"New Scripted Field"});_doc_title.docTitle.change([fieldName,this.indexPattern.title]);renderFieldEditor($scope,this.indexPattern,this.field,{Field:_field.Field,getConfig:getConfig,$http:$http,fieldFormatEditors:fieldFormatEditors,redirectAway:function redirectAway(){$timeout(function(){kbnUrl.changeToRoute(_this.indexPattern,_this.field.scripted?"scriptedFields":"indexedFields")})}});$scope.$on("$destroy",function(){destroyFieldEditor()})}})},6386:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<kbn-management-app section="kibana/index_patterns">\n  <div class="euiPanel euiPanel--paddingLarge">\n    <div class="kuiViewContent">\n      <kbn-management-index-patterns-header\n        index-pattern="fieldSettings.indexPattern"\n      ></kbn-management-index-patterns-header>\n    </div>\n\n    <div id="reactFieldEditor"></div>\n  </div>\n</kbn-management-app>\n'},6387:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"FieldEditor",{enumerable:true,get:function get(){return _field_editor.FieldEditor}});var _field_editor=__webpack_require__(6388)},6388:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FieldEditor=exports.FieldEditorComponent=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(17));var _lodash=__webpack_require__(1);var _scripting_languages=__webpack_require__(2071);var _field_formats=__webpack_require__(111);var _documentation_links=__webpack_require__(227);var _notify=__webpack_require__(24);var _eui=__webpack_require__(2);var _scripting_call_outs=__webpack_require__(6389);var _scripting_help=__webpack_require__(6392);var _field_format_editor=__webpack_require__(6396);var _constants=__webpack_require__(6398);var _lib=__webpack_require__(6399);var _react2=__webpack_require__(10);__webpack_require__(6403);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var FieldEditorComponent=function(_PureComponent){_inherits(FieldEditorComponent,_PureComponent);function FieldEditorComponent(props){var _this;_classCallCheck(this,FieldEditorComponent);_this=_possibleConstructorReturn(this,_getPrototypeOf(FieldEditorComponent).call(this,props));_defineProperty(_assertThisInitialized(_this),"onFieldChange",function(fieldName,value){var field=_this.state.field;field[fieldName]=value;_this.forceUpdate()});_defineProperty(_assertThisInitialized(_this),"onTypeChange",function(type){var getConfig=_this.props.helpers.getConfig;var field=_this.state.field;var DefaultFieldFormat=_field_formats.fieldFormats.getDefaultType(type);field.type=type;var fieldTypeFormats=[(0,_lib.getDefaultFormat)(DefaultFieldFormat)].concat(_toConsumableArray(_field_formats.fieldFormats.byFieldType[field.type]));var FieldFormat=fieldTypeFormats[0];field.format=new FieldFormat(null,getConfig);_this.setState({fieldTypeFormats:fieldTypeFormats,fieldFormatId:FieldFormat.id,fieldFormatParams:field.format.params()})});_defineProperty(_assertThisInitialized(_this),"onLangChange",function(lang){var field=_this.state.field;var fieldTypes=(0,_lodash.get)(_constants.FIELD_TYPES_BY_LANG,lang,_constants.DEFAULT_FIELD_TYPES);field.lang=lang;field.type=fieldTypes.includes(field.type)?field.type:fieldTypes[0];_this.setState({fieldTypes:fieldTypes})});_defineProperty(_assertThisInitialized(_this),"onFormatChange",function(formatId,params){var getConfig=_this.props.helpers.getConfig;var _this$state=_this.state,field=_this$state.field,fieldTypeFormats=_this$state.fieldTypeFormats;var FieldFormat=fieldTypeFormats.find(function(format){return format.id===formatId})||fieldTypeFormats[0];field.format=new FieldFormat(params,getConfig);_this.setState({fieldFormatId:FieldFormat.id,fieldFormatParams:field.format.params()})});_defineProperty(_assertThisInitialized(_this),"onFormatParamsChange",function(newParams){var fieldFormatId=_this.state.fieldFormatId;_this.onFormatChange(fieldFormatId,newParams)});_defineProperty(_assertThisInitialized(_this),"onFormatParamsError",function(error){_this.setState({hasFormatError:!!error})});_defineProperty(_assertThisInitialized(_this),"onScriptChange",function(value){_this.setState({hasScriptError:false});_this.onFieldChange("script",value)});_defineProperty(_assertThisInitialized(_this),"showScriptingHelp",function(){_this.setState({showScriptingHelp:true})});_defineProperty(_assertThisInitialized(_this),"hideScriptingHelp",function(){_this.setState({showScriptingHelp:false})});_defineProperty(_assertThisInitialized(_this),"renderDeleteModal",function(){var field=_this.state.field;var intl=_this.props.intl;return _this.state.showDeleteModal?_react["default"].createElement(_eui.EuiOverlayMask,null,_react["default"].createElement(_eui.EuiConfirmModal,{title:intl.formatMessage({id:"common.ui.fieldEditor.deleteFieldHeader",defaultMessage:"Delete field '{fieldName}'"},{fieldName:field.name}),onCancel:_this.hideDeleteModal,onConfirm:function onConfirm(){_this.hideDeleteModal();_this.deleteField()},cancelButtonText:intl.formatMessage({id:"common.ui.fieldEditor.deleteField.cancelButton",defaultMessage:"Cancel"}),confirmButtonText:intl.formatMessage({id:"common.ui.fieldEditor.deleteField.deleteButton",defaultMessage:"Delete"}),buttonColor:"danger",defaultFocusedButton:_eui.EUI_MODAL_CONFIRM_BUTTON},_react["default"].createElement("p",null,_react["default"].createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.deleteFieldLabel",defaultMessage:"You can't recover a deleted field.{separator}Are you sure you want to do this?",values:{separator:_react["default"].createElement("span",null,_react["default"].createElement("br",null),_react["default"].createElement("br",null))}})))):null});_defineProperty(_assertThisInitialized(_this),"showDeleteModal",function(){_this.setState({showDeleteModal:true})});_defineProperty(_assertThisInitialized(_this),"hideDeleteModal",function(){_this.setState({showDeleteModal:false})});_defineProperty(_assertThisInitialized(_this),"renderScriptingPanels",function(){var _this$state2=_this.state,scriptingLangs=_this$state2.scriptingLangs,field=_this$state2.field,showScriptingHelp=_this$state2.showScriptingHelp;if(!field.scripted){return}return _react["default"].createElement(_react.Fragment,null,_react["default"].createElement(_scripting_call_outs.ScriptingDisabledCallOut,{isVisible:!scriptingLangs.length}),_react["default"].createElement(_scripting_call_outs.ScriptingWarningCallOut,{isVisible:true}),_react["default"].createElement(_scripting_help.ScriptingHelpFlyout,{isVisible:showScriptingHelp,onClose:_this.hideScriptingHelp,indexPattern:_this.props.indexPattern,lang:field.lang,name:field.name,script:field.script,executeScript:_lib.executeScript}))});_defineProperty(_assertThisInitialized(_this),"deleteField",function(){var redirectAway=_this.props.helpers.redirectAway;var _this$props=_this.props,indexPattern=_this$props.indexPattern,intl=_this$props.intl;var field=_this.state.field;var remove=indexPattern.removeScriptedField(field.name);if(remove){remove.then(function(){var message=intl.formatMessage({id:"common.ui.fieldEditor.deleteField.deletedHeader",defaultMessage:"Deleted '{fieldName}'"},{fieldName:field.name});_notify.toastNotifications.addSuccess(message);redirectAway()})}else{redirectAway()}});_defineProperty(_assertThisInitialized(_this),"saveField",_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var field,_this$props2,indexPattern,intl,fieldFormatId,isValid,redirectAway,index;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:field=_this.state.field.toActualField();_this$props2=_this.props,indexPattern=_this$props2.indexPattern,intl=_this$props2.intl;fieldFormatId=_this.state.fieldFormatId;if(!field.scripted){_context.next=11;break}_this.setState({isSaving:true});_context.next=7;return(0,_lib.isScriptValid)({name:field.name,lang:field.lang,script:field.script,indexPatternTitle:indexPattern.title});case 7:isValid=_context.sent;if(isValid){_context.next=11;break}_this.setState({hasScriptError:true,isSaving:false});return _context.abrupt("return");case 11:redirectAway=_this.props.helpers.redirectAway;index=indexPattern.fields.findIndex(function(f){return f.name===field.name});if(index>-1){indexPattern.fields.splice(index,1,field)}else{indexPattern.fields.push(field)}if(!fieldFormatId){indexPattern.fieldFormatMap[field.name]=undefined}else{indexPattern.fieldFormatMap[field.name]=field.format}return _context.abrupt("return",indexPattern.save().then(function(){var message=intl.formatMessage({id:"common.ui.fieldEditor.deleteField.savedHeader",defaultMessage:"Saved '{fieldName}'"},{fieldName:field.name});_notify.toastNotifications.addSuccess(message);redirectAway()}));case 16:case"end":return _context.stop()}}},_callee)})));var _field=props.field,_indexPattern=props.indexPattern,Field=props.helpers.Field;_this.state={isReady:false,isCreating:false,isDeprecatedLang:false,scriptingLangs:[],fieldTypes:[],fieldTypeFormats:[],existingFieldNames:_indexPattern.fields.map(function(f){return f.name}),field:(0,_lib.copyField)(_field,_indexPattern,Field),fieldFormatId:undefined,fieldFormatParams:{},showScriptingHelp:false,showDeleteModal:false,hasFormatError:false,hasScriptError:false,isSaving:false};_this.supportedLangs=(0,_scripting_languages.getSupportedScriptingLanguages)();_this.deprecatedLangs=(0,_scripting_languages.getDeprecatedScriptingLanguages)();_this.init();return _this}_createClass(FieldEditorComponent,[{key:"init",value:function(){var _init=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(){var $http,field,indexPattern,getEnabledScriptingLanguages,enabledLangs,scriptingLangs,fieldTypes,DefaultFieldFormat,fieldTypeFormats;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:$http=this.props.helpers.$http;field=this.state.field;indexPattern=this.props.indexPattern;getEnabledScriptingLanguages=new _scripting_languages.GetEnabledScriptingLanguagesProvider($http);_context2.next=6;return getEnabledScriptingLanguages();case 6:enabledLangs=_context2.sent;scriptingLangs=(0,_lodash.intersection)(enabledLangs,(0,_lodash.union)(this.supportedLangs,this.deprecatedLangs));field.lang=scriptingLangs.includes(field.lang)?field.lang:undefined;fieldTypes=(0,_lodash.get)(_constants.FIELD_TYPES_BY_LANG,field.lang,_constants.DEFAULT_FIELD_TYPES);field.type=fieldTypes.includes(field.type)?field.type:fieldTypes[0];DefaultFieldFormat=_field_formats.fieldFormats.getDefaultType(field.type,field.esTypes);fieldTypeFormats=[(0,_lib.getDefaultFormat)(DefaultFieldFormat)].concat(_toConsumableArray(_field_formats.fieldFormats.byFieldType[field.type]));this.setState({isReady:true,isCreating:!indexPattern.fields.byName[field.name],isDeprecatedLang:this.deprecatedLangs.includes(field.lang),errors:[],scriptingLangs:scriptingLangs,fieldTypes:fieldTypes,fieldTypeFormats:fieldTypeFormats,fieldFormatId:(0,_lodash.get)(indexPattern,["fieldFormatMap",field.name,"type","id"]),fieldFormatParams:field.format.params()});case 14:case"end":return _context2.stop()}}},_callee2,this)}));function init(){return _init.apply(this,arguments)}return init}()},{key:"isDuplicateName",value:function isDuplicateName(){var _this$state3=this.state,isCreating=_this$state3.isCreating,field=_this$state3.field,existingFieldNames=_this$state3.existingFieldNames;return isCreating&&existingFieldNames.includes(field.name)}},{key:"renderName",value:function renderName(){var _this2=this;var _this$state4=this.state,isCreating=_this$state4.isCreating,field=_this$state4.field;var intl=this.props.intl;var isInvalid=!field.name||!field.name.trim();return isCreating?_react["default"].createElement(_eui.EuiFormRow,{label:intl.formatMessage({id:"common.ui.fieldEditor.nameLabel",defaultMessage:"Name"}),helpText:this.isDuplicateName()?_react["default"].createElement("span",null,_react["default"].createElement(_eui.EuiIcon,{type:"alert",color:"warning",size:"s"}),"",_react["default"].createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.mappingConflictLabel.mappingConflictDetail",defaultMessage:"{mappingConflict} You already have a field with the name {fieldName}. Naming your scripted field with the same name means you won't be able to query both fields at the same time.",values:{mappingConflict:_react["default"].createElement("strong",null,_react["default"].createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.mappingConflictLabel.mappingConflictLabel",defaultMessage:"Mapping Conflict:"})),fieldName:_react["default"].createElement(_eui.EuiCode,null,field.name)}})):null,isInvalid:isInvalid,error:isInvalid?intl.formatMessage({id:"common.ui.fieldEditor.nameErrorMessage",defaultMessage:"Name is required"}):null},_react["default"].createElement(_eui.EuiFieldText,{value:field.name||"",placeholder:intl.formatMessage({id:"common.ui.fieldEditor.namePlaceholder",defaultMessage:"New scripted field"}),"data-test-subj":"editorFieldName",onChange:function onChange(e){_this2.onFieldChange("name",e.target.value)},isInvalid:isInvalid})):null}},{key:"renderLanguage",value:function renderLanguage(){var _this3=this;var _this$state5=this.state,field=_this$state5.field,scriptingLangs=_this$state5.scriptingLangs,isDeprecatedLang=_this$state5.isDeprecatedLang;var intl=this.props.intl;return field.scripted?_react["default"].createElement(_eui.EuiFormRow,{label:intl.formatMessage({id:"common.ui.fieldEditor.languageLabel",defaultMessage:"Language"}),helpText:isDeprecatedLang?_react["default"].createElement("span",null,_react["default"].createElement(_eui.EuiIcon,{type:"alert",color:"warning",size:"s"}),"",_react["default"].createElement("strong",null,_react["default"].createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.warningHeader",defaultMessage:"Deprecation Warning:"})),"",_react["default"].createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.warningLabel.warningDetail",defaultMessage:"{language} is deprecated and support will be removed in the next major version of Kibana and Elasticsearch. We recommend using {painlessLink} for new scripted fields.",values:{language:_react["default"].createElement(_eui.EuiCode,null,field.lang),painlessLink:_react["default"].createElement(_eui.EuiLink,{target:"_blank",href:(0,_documentation_links.getDocLink)("scriptedFields.painless")},_react["default"].createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.warningLabel.painlessLinkLabel",defaultMessage:"Painless"}))}})):null},_react["default"].createElement(_eui.EuiSelect,{value:field.lang,options:scriptingLangs.map(function(lang){return{value:lang,text:lang}}),"data-test-subj":"editorFieldLang",onChange:function onChange(e){_this3.onLangChange(e.target.value)}})):null}},{key:"renderType",value:function renderType(){var _this4=this;var _this$state6=this.state,field=_this$state6.field,fieldTypes=_this$state6.fieldTypes;var intl=this.props.intl;return _react["default"].createElement(_eui.EuiFormRow,{label:intl.formatMessage({id:"common.ui.fieldEditor.typeLabel",defaultMessage:"Type"})},_react["default"].createElement(_eui.EuiSelect,{value:field.type,disabled:!field.scripted,options:fieldTypes.map(function(type){return{value:type,text:type}}),"data-test-subj":"editorFieldType",onChange:function onChange(e){_this4.onTypeChange(e.target.value)}}))}},{key:"renderTypeConflict",value:function renderTypeConflict(){var intl=this.props.intl;var _this$state$field=this.state.field,field=_this$state$field===void 0?{}:_this$state$field;if(!field.conflictDescriptions||_typeof(field.conflictDescriptions)!=="object"){return null}var columns=[{field:"type",name:intl.formatMessage({id:"common.ui.fieldEditor.typeLabel",defaultMessage:"Type"}),width:"100px"},{field:"indices",name:intl.formatMessage({id:"common.ui.fieldEditor.indexNameLabel",defaultMessage:"Index names"})}];var items=Object.entries(field.conflictDescriptions).map(function(_ref2){var _ref3=_slicedToArray(_ref2,2),type=_ref3[0],indices=_ref3[1];return{type:type,indices:Array.isArray(indices)?indices.join(", "):"Index names unavailable"}});return _react["default"].createElement("div",null,_react["default"].createElement(_eui.EuiCallOut,{color:"warning",iconType:"alert",title:_react["default"].createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.fieldTypeConflict",defaultMessage:"Field type conflict"}),size:"s"},_react["default"].createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.multiTypeLabelDesc",defaultMessage:"The type of this field changes across indices. It is unavailable for many analysis functions. The indices per type are as follows:"})),_react["default"].createElement(_eui.EuiSpacer,{size:"m"}),_react["default"].createElement(_eui.EuiBasicTable,{items:items,columns:columns}),_react["default"].createElement(_eui.EuiSpacer,{size:"m"}))}},{key:"renderFormat",value:function renderFormat(){var _this5=this;var _this$state7=this.state,field=_this$state7.field,fieldTypeFormats=_this$state7.fieldTypeFormats,fieldFormatId=_this$state7.fieldFormatId,fieldFormatParams=_this$state7.fieldFormatParams;var fieldFormatEditors=this.props.helpers.fieldFormatEditors;var defaultFormat=fieldTypeFormats[0]&&fieldTypeFormats[0].resolvedTitle;var label=defaultFormat?_react["default"].createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.defaultFormatHeader",defaultMessage:"Format (Default: {defaultFormat})",values:{defaultFormat:_react["default"].createElement(_eui.EuiCode,null,defaultFormat)}}):_react["default"].createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.formatHeader",defaultMessage:"Format"});return _react["default"].createElement(_react.Fragment,null,_react["default"].createElement(_eui.EuiFormRow,{label:label,helpText:_react["default"].createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.formatLabel",defaultMessage:"Formatting allows you to control the way that specific values are displayed. It can also cause values to be completely changed and prevent highlighting in Discover from working."})},_react["default"].createElement(_eui.EuiSelect,{value:fieldFormatId,options:fieldTypeFormats.map(function(format){return{value:format.id||"",text:format.title}}),"data-test-subj":"editorSelectedFormatId",onChange:function onChange(e){_this5.onFormatChange(e.target.value)}})),fieldFormatId?_react["default"].createElement(_field_format_editor.FieldFormatEditor,{fieldType:field.type,fieldFormat:field.format,fieldFormatId:fieldFormatId,fieldFormatParams:fieldFormatParams,fieldFormatEditors:fieldFormatEditors,onChange:this.onFormatParamsChange,onError:this.onFormatParamsError}):null)}},{key:"renderPopularity",value:function renderPopularity(){var _this6=this;var field=this.state.field;var intl=this.props.intl;return _react["default"].createElement(_eui.EuiFormRow,{label:intl.formatMessage({id:"common.ui.fieldEditor.popularityLabel",defaultMessage:"Popularity",description:'"Popularity" refers to Kibana\'s measurement how popular a field is (i.e. how commonly it is used).'})},_react["default"].createElement(_eui.EuiFieldNumber,{value:field.count,"data-test-subj":"editorFieldCount",onChange:function onChange(e){_this6.onFieldChange("count",e.target.value?Number(e.target.value):"")}}))}},{key:"renderScript",value:function renderScript(){var _this$state8=this.state,field=_this$state8.field,hasScriptError=_this$state8.hasScriptError;var intl=this.props.intl;var isInvalid=!field.script||!field.script.trim()||hasScriptError;var errorMsg=hasScriptError?_react["default"].createElement("span",{"data-test-subj":"invalidScriptError"},intl.formatMessage({id:"common.ui.fieldEditor.scriptInvalidErrorMessage",defaultMessage:"Script is invalid. View script preview for details"})):intl.formatMessage({id:"common.ui.fieldEditor.scriptRequiredErrorMessage",defaultMessage:"Script is required"});return field.scripted?_react["default"].createElement(_react.Fragment,null,_react["default"].createElement(_eui.EuiFormRow,{fullWidth:true,label:intl.formatMessage({id:"common.ui.fieldEditor.scriptLabel",defaultMessage:"Script"}),isInvalid:isInvalid,error:isInvalid?errorMsg:null},_react["default"].createElement(_eui.EuiCodeEditor,{value:field.script,"data-test-subj":"editorFieldScript",onChange:this.onScriptChange,mode:"groovy",width:"100%",height:"300px"})),_react["default"].createElement(_eui.EuiFormRow,null,_react["default"].createElement(_react.Fragment,null,_react["default"].createElement(_eui.EuiText,null,_react["default"].createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.script.accessWithLabel",defaultMessage:"Access fields with {code}.",values:{code:_react["default"].createElement("code",null,"doc['some_field'].value")}})),_react["default"].createElement("br",null),_react["default"].createElement(_eui.EuiLink,{onClick:this.showScriptingHelp,"data-test-subj":"scriptedFieldsHelpLink"},_react["default"].createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.script.getHelpLabel",defaultMessage:"Get help with the syntax and preview the results of your script."}))))):null}},{key:"renderActions",value:function renderActions(){var _this$state9=this.state,isCreating=_this$state9.isCreating,field=_this$state9.field,isSaving=_this$state9.isSaving;var redirectAway=this.props.helpers.redirectAway;return _react["default"].createElement(_eui.EuiFormRow,null,_react["default"].createElement(_eui.EuiFlexGroup,null,_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiButton,{fill:true,onClick:this.saveField,isDisabled:this.isSavingDisabled(),isLoading:isSaving,"data-test-subj":"fieldSaveButton"},isCreating?_react["default"].createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.actions.createButton",defaultMessage:"Create field"}):_react["default"].createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.actions.saveButton",defaultMessage:"Save field"}))),_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiButtonEmpty,{onClick:redirectAway,"data-test-subj":"fieldCancelButton"},_react["default"].createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.actions.cancelButton",defaultMessage:"Cancel"}))),!isCreating&&field.scripted?_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiFlexGroup,{justifyContent:"flexEnd"},_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiButtonEmpty,{color:"danger",onClick:this.showDeleteModal},_react["default"].createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.actions.deleteButton",defaultMessage:"Delete"}))))):null))}},{key:"isSavingDisabled",value:function isSavingDisabled(){var _this$state10=this.state,field=_this$state10.field,hasFormatError=_this$state10.hasFormatError,hasScriptError=_this$state10.hasScriptError;if(hasFormatError||hasScriptError||!field.name||!field.name.trim()||field.scripted&&(!field.script||!field.script.trim())){return true}return false}},{key:"render",value:function render(){var _this$state11=this.state,isReady=_this$state11.isReady,isCreating=_this$state11.isCreating,field=_this$state11.field;return isReady?_react["default"].createElement("div",null,_react["default"].createElement(_eui.EuiText,null,_react["default"].createElement("h3",null,isCreating?_react["default"].createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.createHeader",defaultMessage:"Create scripted field"}):_react["default"].createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.editHeader",defaultMessage:"Edit {fieldName}",values:{fieldName:field.name}}))),_react["default"].createElement(_eui.EuiSpacer,{size:"m"}),_react["default"].createElement(_eui.EuiForm,null,this.renderScriptingPanels(),this.renderName(),this.renderLanguage(),this.renderType(),this.renderTypeConflict(),this.renderFormat(),this.renderPopularity(),this.renderScript(),this.renderActions(),this.renderDeleteModal()),_react["default"].createElement(_eui.EuiSpacer,{size:"l"})):null}}]);return FieldEditorComponent}(_react.PureComponent);exports.FieldEditorComponent=FieldEditorComponent;_defineProperty(FieldEditorComponent,"propTypes",{indexPattern:_propTypes["default"].object.isRequired,field:_propTypes["default"].object.isRequired,helpers:_propTypes["default"].shape({Field:_propTypes["default"].func.isRequired,getConfig:_propTypes["default"].func.isRequired,$http:_propTypes["default"].func.isRequired,fieldFormatEditors:_propTypes["default"].object.isRequired,redirectAway:_propTypes["default"].func.isRequired})});var FieldEditor=(0,_react2.injectI18n)(FieldEditorComponent);exports.FieldEditor=FieldEditor},6389:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"ScriptingDisabledCallOut",{enumerable:true,get:function get(){return _disabled_call_out.ScriptingDisabledCallOut}});Object.defineProperty(exports,"ScriptingWarningCallOut",{enumerable:true,get:function get(){return _warning_call_out.ScriptingWarningCallOut}});var _disabled_call_out=__webpack_require__(6390);var _warning_call_out=__webpack_require__(6391)},6390:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ScriptingDisabledCallOut=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(2);var _react2=__webpack_require__(10);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}var ScriptingDisabledCallOut=function ScriptingDisabledCallOut(_ref){var _ref$isVisible=_ref.isVisible,isVisible=_ref$isVisible===void 0?false:_ref$isVisible;return isVisible?_react["default"].createElement(_react.Fragment,null,_react["default"].createElement(_eui.EuiCallOut,{title:_react["default"].createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.disabledCallOutHeader",defaultMessage:"Scripting disabled",description:"Showing the status that scripting is disabled in Elasticsearch. Not an update message, that it JUST got disabled."}),color:"danger",iconType:"alert"},_react["default"].createElement("p",null,_react["default"].createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.disabledCallOutLabel",defaultMessage:"All inline scripting has been disabled in Elasticsearch. You must enable inline scripting for at least one language in order to use scripted fields in Kibana."}))),_react["default"].createElement(_eui.EuiSpacer,{size:"m"})):null};exports.ScriptingDisabledCallOut=ScriptingDisabledCallOut;ScriptingDisabledCallOut.displayName="ScriptingDisabledCallOut"},6391:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ScriptingWarningCallOut=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _documentation_links=__webpack_require__(227);var _eui=__webpack_require__(2);var _react2=__webpack_require__(10);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}var ScriptingWarningCallOut=function ScriptingWarningCallOut(_ref){var _ref$isVisible=_ref.isVisible,isVisible=_ref$isVisible===void 0?false:_ref$isVisible;return isVisible?_react["default"].createElement(_react.Fragment,null,_react["default"].createElement(_eui.EuiCallOut,{title:_react["default"].createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.warningCallOutHeader",defaultMessage:"Proceed with caution"}),color:"warning",iconType:"alert"},_react["default"].createElement("p",null,_react["default"].createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.warningCallOutLabel.callOutDetail",defaultMessage:"Please familiarize yourself with {scripFields} and with {scriptsInAggregation} before using scripted fields.",values:{scripFields:_react["default"].createElement(_eui.EuiLink,{target:"_blank",href:(0,_documentation_links.getDocLink)("scriptedFields.scriptFields")},_react["default"].createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.warningCallOutLabel.scripFieldsLink",defaultMessage:"script fields"}),"",_react["default"].createElement(_eui.EuiIcon,{type:"link"})),scriptsInAggregation:_react["default"].createElement(_eui.EuiLink,{target:"_blank",href:(0,_documentation_links.getDocLink)("scriptedFields.scriptAggs")},_react["default"].createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.warningCallOutLabel.scriptsInAggregationLink",defaultMessage:"scripts in aggregations"}),"",_react["default"].createElement(_eui.EuiIcon,{type:"link"}))}})),_react["default"].createElement("p",null,_react["default"].createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.warningCallOut.descriptionLabel",defaultMessage:"Scripted fields can be used to display and aggregate calculated values. As such, they can be very slow, and if done incorrectly, can cause Kibana to be unusable. There's no safety net here. If you make a typo, unexpected exceptions will be thrown all over the place!"}))),_react["default"].createElement(_eui.EuiSpacer,{size:"m"})):null};exports.ScriptingWarningCallOut=ScriptingWarningCallOut;ScriptingWarningCallOut.displayName="ScriptingWarningCallOut"},6392:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"ScriptingHelpFlyout",{enumerable:true,get:function get(){return _help_flyout.ScriptingHelpFlyout}});var _help_flyout=__webpack_require__(6393)},6393:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ScriptingHelpFlyout=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(17));var _eui=__webpack_require__(2);var _scripting_syntax=__webpack_require__(6394);var _test_script=__webpack_require__(6395);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ScriptingHelpFlyout=function ScriptingHelpFlyout(_ref){var _ref2,_ref3;var _ref$isVisible=_ref.isVisible,isVisible=_ref$isVisible===void 0?false:_ref$isVisible,_ref$onClose=_ref.onClose,onClose=_ref$onClose===void 0?function(){}:_ref$onClose,indexPattern=_ref.indexPattern,lang=_ref.lang,name=_ref.name,script=_ref.script,executeScript=_ref.executeScript;var tabs=[(_ref2={id:"syntax",name:"Syntax"},_defineProperty(_ref2,"data-test-subj","syntaxTab"),_defineProperty(_ref2,"content",_react["default"].createElement(_scripting_syntax.ScriptingSyntax,null)),_ref2),(_ref3={id:"test",name:"Preview results"},_defineProperty(_ref3,"data-test-subj","testTab"),_defineProperty(_ref3,"content",_react["default"].createElement(_test_script.TestScript,{indexPattern:indexPattern,lang:lang,name:name,script:script,executeScript:executeScript})),_ref3)];return isVisible?_react["default"].createElement(_eui.EuiFlyout,{onClose:onClose,"data-test-subj":"scriptedFieldsHelpFlyout"},_react["default"].createElement(_eui.EuiFlyoutBody,null,_react["default"].createElement(_eui.EuiTabbedContent,{tabs:tabs,initialSelectedTab:tabs[0]}))):null};exports.ScriptingHelpFlyout=ScriptingHelpFlyout;ScriptingHelpFlyout.displayName="ScriptingHelpFlyout";ScriptingHelpFlyout.propTypes={indexPattern:_propTypes["default"].object.isRequired,lang:_propTypes["default"].string.isRequired,name:_propTypes["default"].string,script:_propTypes["default"].string,executeScript:_propTypes["default"].func.isRequired}},6394:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ScriptingSyntax=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _documentation_links=__webpack_require__(227);var _eui=__webpack_require__(2);var _react2=__webpack_require__(10);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}var ScriptingSyntax=function ScriptingSyntax(){return _react["default"].createElement(_react.Fragment,null,_react["default"].createElement(_eui.EuiSpacer,null),_react["default"].createElement(_eui.EuiText,null,_react["default"].createElement("h3",null,_react["default"].createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.syntaxHeader",defaultMessage:"Syntax"})),_react["default"].createElement("p",null,_react["default"].createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.syntax.defaultLabel.defaultDetail",defaultMessage:"By default, Kibana scripted fields use {painless}, a simple and secure scripting language designed specifically for use with Elasticsearch, to access values in the document use the following format:",values:{painless:_react["default"].createElement(_eui.EuiLink,{target:"_blank",href:(0,_documentation_links.getDocLink)("scriptedFields.painless")},_react["default"].createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.syntax.defaultLabel.painlessLink",defaultMessage:"Painless"})," ",_react["default"].createElement(_eui.EuiIcon,{type:"link"}))}})),_react["default"].createElement("p",null,_react["default"].createElement(_eui.EuiCode,null,_react["default"].createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.syntax.default.formatLabel",defaultMessage:"doc['some_field'].value"}))),_react["default"].createElement("p",null,_react["default"].createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.syntax.painlessLabel.painlessDetail",defaultMessage:"Painless is powerful but easy to use. It provides access to many {javaAPIs}. Read up on its {syntax} and you'll be up to speed in no time!",values:{javaAPIs:_react["default"].createElement(_eui.EuiLink,{target:"_blank",href:(0,_documentation_links.getDocLink)("scriptedFields.painlessApi")},_react["default"].createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.syntax.painlessLabel.javaAPIsLink",defaultMessage:"native Java APIs"}),"",_react["default"].createElement(_eui.EuiIcon,{type:"link"})),syntax:_react["default"].createElement(_eui.EuiLink,{target:"_blank",href:(0,_documentation_links.getDocLink)("scriptedFields.painlessSyntax")},_react["default"].createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.syntax.painlessLabel.syntaxLink",defaultMessage:"syntax"}),"",_react["default"].createElement(_eui.EuiIcon,{type:"link"}))}})),_react["default"].createElement("p",null,_react["default"].createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.syntax.kibanaLabel",defaultMessage:"Kibana currently imposes one special limitation on the painless scripts you write. They cannot contain named functions."})),_react["default"].createElement("p",null,_react["default"].createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.syntax.lucene.commonLabel.commonDetail",defaultMessage:"Coming from an older version of Kibana? The {lucene} you know and love are still available. Lucene expressions are a lot like JavaScript, but limited to basic arithmetic, bitwise and comparison operations.",values:{lucene:_react["default"].createElement(_eui.EuiLink,{target:"_blank",href:(0,_documentation_links.getDocLink)("scriptedFields.luceneExpressions")},_react["default"].createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.syntax.lucene.commonLabel.luceneLink",defaultMessage:"Lucene Expressions"}),"",_react["default"].createElement(_eui.EuiIcon,{type:"link"}))}})),_react["default"].createElement("p",null,_react["default"].createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.syntax.lucene.limitsLabel",defaultMessage:"There are a few limitations when using Lucene Expressions:"})),_react["default"].createElement("ul",null,_react["default"].createElement("li",null,_react["default"].createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.syntax.lucene.limits.typesLabel",defaultMessage:"Only numeric, boolean, date, and geo_point fields may be accessed"})),_react["default"].createElement("li",null,_react["default"].createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.syntax.lucene.limits.fieldsLabel",defaultMessage:"Stored fields are not available"})),_react["default"].createElement("li",null,_react["default"].createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.syntax.lucene.limits.sparseLabel",defaultMessage:"If a field is sparse (only some documents contain a value), documents missing the field will have a value of 0"}))),_react["default"].createElement("p",null,_react["default"].createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.syntax.lucene.operationsLabel",defaultMessage:"Here are all the operations available to lucene expressions:"})),_react["default"].createElement("ul",null,_react["default"].createElement("li",null,_react["default"].createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.syntax.lucene.operations.arithmeticLabel",defaultMessage:"Arithmetic operators: {operators}",values:{operators:_react["default"].createElement("code",null,"+ - * / %")}})),_react["default"].createElement("li",null,_react["default"].createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.syntax.lucene.operations.bitwiseLabel",defaultMessage:"Bitwise operators: {operators}",values:{operators:_react["default"].createElement("code",null,"| & ^ ~ << >> >>>")}})),_react["default"].createElement("li",null,_react["default"].createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.syntax.lucene.operations.booleanLabel",defaultMessage:"Boolean operators (including the ternary operator): {operators}",values:{operators:_react["default"].createElement("code",null,"&& || ! ?:")}})),_react["default"].createElement("li",null,_react["default"].createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.syntax.lucene.operations.comparisonLabel",defaultMessage:"Comparison operators: {operators}",values:{operators:_react["default"].createElement("code",null,"< <= == >= >")}})),_react["default"].createElement("li",null,_react["default"].createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.syntax.lucene.operations.mathLabel",defaultMessage:"Common mathematic functions: {operators}",values:{operators:_react["default"].createElement("code",null,"abs ceil exp floor ln log10 logn max min sqrt pow")}})),_react["default"].createElement("li",null,_react["default"].createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.syntax.lucene.operations.trigLabel",defaultMessage:"Trigonometric library functions: {operators}",values:{operators:_react["default"].createElement("code",null,"acosh acos asinh asin atanh atan atan2 cosh cos sinh sin tanh tan")}})),_react["default"].createElement("li",null,_react["default"].createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.syntax.lucene.operations.distanceLabel",defaultMessage:"Distance functions: {operators}",values:{operators:_react["default"].createElement("code",null,"haversin")}})),_react["default"].createElement("li",null,_react["default"].createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.syntax.lucene.operations.miscellaneousLabel",defaultMessage:"Miscellaneous functions: {operators}",values:{operators:_react["default"].createElement("code",null,"min, max")}})))))};exports.ScriptingSyntax=ScriptingSyntax},6395:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TestScript=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(17));var _eui=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var TestScript=function(_Component){_inherits(TestScript,_Component);function TestScript(){var _getPrototypeOf2;var _this;_classCallCheck(this,TestScript);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(TestScript)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"state",{isLoading:false,additionalFields:[]});_defineProperty(_assertThisInitialized(_this),"previewScript",_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var _this$props,indexPattern,lang,name,script,executeScript,scriptResponse;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this$props=_this.props,indexPattern=_this$props.indexPattern,lang=_this$props.lang,name=_this$props.name,script=_this$props.script,executeScript=_this$props.executeScript;if(!(!script||script.length===0)){_context.next=3;break}return _context.abrupt("return");case 3:_this.setState({isLoading:true});_context.next=6;return executeScript({name:name,lang:lang,script:script,indexPatternTitle:indexPattern.title,additionalFields:_this.state.additionalFields.map(function(option){return option.value})});case 6:scriptResponse=_context.sent;if(!(scriptResponse.status!==200)){_context.next=10;break}_this.setState({isLoading:false,previewData:scriptResponse});return _context.abrupt("return");case 10:_this.setState({isLoading:false,previewData:scriptResponse.hits.hits.map(function(hit){return _objectSpread({_id:hit._id},hit._source,hit.fields)})});case 11:case"end":return _context.stop()}}},_callee)})));_defineProperty(_assertThisInitialized(_this),"onAdditionalFieldsChange",function(selectedOptions){_this.setState({additionalFields:selectedOptions})});return _this}_createClass(TestScript,[{key:"componentDidMount",value:function componentDidMount(){if(this.props.script){this.previewScript()}}},{key:"renderPreview",value:function renderPreview(){var previewData=this.state.previewData;if(!previewData){return null}if(previewData.error){return _react["default"].createElement(_eui.EuiCallOut,{title:"There's an error in your script",color:"danger",iconType:"cross"},_react["default"].createElement(_eui.EuiCodeBlock,{language:"json",className:"scriptPreviewCodeBlock","data-test-subj":"scriptedFieldPreview"},JSON.stringify(previewData.error,null," ")))}return _react["default"].createElement(_react.Fragment,null,_react["default"].createElement(_eui.EuiTitle,{size:"xs"},_react["default"].createElement("p",null,"First 10 results")),_react["default"].createElement(_eui.EuiSpacer,{size:"s"}),_react["default"].createElement(_eui.EuiCodeBlock,{language:"json",className:"scriptPreviewCodeBlock","data-test-subj":"scriptedFieldPreview"},JSON.stringify(previewData,null," ")))}},{key:"renderToolbar",value:function renderToolbar(){var fieldsByTypeMap=new Map;var fields=[];this.props.indexPattern.fields.filter(function(field){return!field.name.startsWith("_")}).forEach(function(field){if(fieldsByTypeMap.has(field.type)){var fieldsList=fieldsByTypeMap.get(field.type);fieldsList.push(field.name);fieldsByTypeMap.set(field.type,fieldsList)}else{fieldsByTypeMap.set(field.type,[field.name])}});fieldsByTypeMap.forEach(function(fieldsList,fieldType){fields.push({label:fieldType,options:fieldsList.sort().map(function(fieldName){return{value:fieldName,label:fieldName}})})});fields.sort(function(a,b){if(a.label<b.label)return-1;if(a.label>b.label)return 1;return 0});return _react["default"].createElement(_react.Fragment,null,_react["default"].createElement(_eui.EuiFormRow,{label:"Additional fields"},_react["default"].createElement(_eui.EuiComboBox,{placeholder:"Select...",options:fields,selectedOptions:this.state.additionalFields,onChange:this.onAdditionalFieldsChange,"data-test-subj":"additionalFieldsSelect"})),_react["default"].createElement(_eui.EuiButton,{onClick:this.previewScript,disabled:this.props.script?false:true,isLoading:this.state.isLoading,"data-test-subj":"runScriptButton"},"Run script"))}},{key:"render",value:function render(){return _react["default"].createElement(_react.Fragment,null,_react["default"].createElement(_eui.EuiSpacer,null),_react["default"].createElement(_eui.EuiText,null,_react["default"].createElement("h3",null,"Preview results"),_react["default"].createElement("p",null,"Run your script to preview the first 10 results. You can also select some additional fields to include in your results to gain more context.")),_react["default"].createElement(_eui.EuiSpacer,null),this.renderToolbar(),_react["default"].createElement(_eui.EuiSpacer,null),this.renderPreview())}}]);return TestScript}(_react.Component);exports.TestScript=TestScript;TestScript.propTypes={indexPattern:_propTypes["default"].object.isRequired,lang:_propTypes["default"].string.isRequired,name:_propTypes["default"].string,script:_propTypes["default"].string,executeScript:_propTypes["default"].func.isRequired};TestScript.defaultProps={name:"myScriptedField"}},6396:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"FieldFormatEditor",{enumerable:true,get:function get(){return _field_format_editor.FieldFormatEditor}});var _field_format_editor=__webpack_require__(6397)},6397:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FieldFormatEditor=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(17));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var FieldFormatEditor=function(_PureComponent){_inherits(FieldFormatEditor,_PureComponent);function FieldFormatEditor(props){var _this;_classCallCheck(this,FieldFormatEditor);_this=_possibleConstructorReturn(this,_getPrototypeOf(FieldFormatEditor).call(this,props));_this.state={EditorComponent:null};return _this}_createClass(FieldFormatEditor,[{key:"render",value:function render(){var EditorComponent=this.state.EditorComponent;var _this$props=this.props,fieldType=_this$props.fieldType,fieldFormat=_this$props.fieldFormat,fieldFormatParams=_this$props.fieldFormatParams,onChange=_this$props.onChange,onError=_this$props.onError;return _react["default"].createElement(_react.Fragment,null,EditorComponent?_react["default"].createElement(EditorComponent,{fieldType:fieldType,format:fieldFormat,formatParams:fieldFormatParams,onChange:onChange,onError:onError}):null)}}],[{key:"getDerivedStateFromProps",value:function getDerivedStateFromProps(nextProps){return{EditorComponent:nextProps.fieldFormatEditors.getEditor(nextProps.fieldFormatId)||null}}}]);return FieldFormatEditor}(_react.PureComponent);exports.FieldFormatEditor=FieldFormatEditor;_defineProperty(FieldFormatEditor,"propTypes",{fieldType:_propTypes["default"].string.isRequired,fieldFormat:_propTypes["default"].object.isRequired,fieldFormatId:_propTypes["default"].string.isRequired,fieldFormatParams:_propTypes["default"].object.isRequired,fieldFormatEditors:_propTypes["default"].object.isRequired,onChange:_propTypes["default"].func.isRequired,onError:_propTypes["default"].func.isRequired})},6398:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DEFAULT_FIELD_TYPES=exports.FIELD_TYPES_BY_LANG=void 0;var _utils=__webpack_require__(428);var FIELD_TYPES_BY_LANG={painless:["number","string","date","boolean"],expression:["number"]};exports.FIELD_TYPES_BY_LANG=FIELD_TYPES_BY_LANG;var DEFAULT_FIELD_TYPES=(0,_utils.getKbnTypeNames)();exports.DEFAULT_FIELD_TYPES=DEFAULT_FIELD_TYPES},6399:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"copyField",{enumerable:true,get:function get(){return _copy_field.copyField}});Object.defineProperty(exports,"getDefaultFormat",{enumerable:true,get:function get(){return _get_default_format.getDefaultFormat}});Object.defineProperty(exports,"executeScript",{enumerable:true,get:function get(){return _validate_script.executeScript}});Object.defineProperty(exports,"isScriptValid",{enumerable:true,get:function get(){return _validate_script.isScriptValid}});var _copy_field=__webpack_require__(6400);var _get_default_format=__webpack_require__(6401);var _validate_script=__webpack_require__(6402)},64:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createTextHandler=void 0;var _lodash=_interopRequireDefault(__webpack_require__(1));var _detect_ie=__webpack_require__(1992);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var createTextHandler=function createTextHandler(handleChange){return function(name,defaultValue){return function(e){if(!(0,_detect_ie.detectIE)()||e.keyCode===13)e.preventDefault();var value=_lodash["default"].get(e,"target.value",defaultValue);if(_lodash["default"].isFunction(handleChange)){return handleChange(_defineProperty({},name,value))}}}};exports.createTextHandler=createTextHandler},6400:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.copyField=void 0;var _lodash=__webpack_require__(1);function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var copyField=function copyField(field,indexPattern,Field){var changes={};var newFieldProps={toActualField:{value:function value(){return new Field(indexPattern,_objectSpread({},field.$$spec,changes))}}};Object.getOwnPropertyNames(field).forEach(function(prop){var desc=Object.getOwnPropertyDescriptor(field,prop);newFieldProps[prop]={enumerable:desc.enumerable,get:function get(){return(0,_lodash.has)(changes,prop)?changes[prop]:field[prop]},set:function set(v){changes[prop]=v}}});return Object.create(null,newFieldProps)};exports.copyField=copyField},6401:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getDefaultFormat=void 0;var _i18n=__webpack_require__(5);function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var getDefaultFormat=function getDefaultFormat(Format){var DefaultFormat=function(_Format){_inherits(DefaultFormat,_Format);function DefaultFormat(){_classCallCheck(this,DefaultFormat);return _possibleConstructorReturn(this,_getPrototypeOf(DefaultFormat).apply(this,arguments))}return DefaultFormat}(Format);_defineProperty(DefaultFormat,"id","");_defineProperty(DefaultFormat,"resolvedTitle",Format.title);_defineProperty(DefaultFormat,"title",_i18n.i18n.translate("common.ui.fieldEditor.defaultFormatDropDown",{defaultMessage:"- Default -"}));return DefaultFormat};exports.getDefaultFormat=getDefaultFormat},6402:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isScriptValid=exports.executeScript=void 0;var _kfetch=__webpack_require__(109);function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}var executeScript=function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark(function _callee(_ref){var name,lang,script,indexPatternTitle,_ref$additionalFields,additionalFields,header,search,body,esResp;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:name=_ref.name,lang=_ref.lang,script=_ref.script,indexPatternTitle=_ref.indexPatternTitle,_ref$additionalFields=_ref.additionalFields,additionalFields=_ref$additionalFields===void 0?[]:_ref$additionalFields;header={index:indexPatternTitle,ignore_unavailable:true};search={query:{match_all:{}},script_fields:_defineProperty({},name,{script:{lang:lang,source:script}}),size:10,timeout:"30s"};if(additionalFields.length>0){search._source=additionalFields}body="".concat(JSON.stringify(header),"\n").concat(JSON.stringify(search),"\n");_context.next=7;return(0,_kfetch.kfetch)({method:"POST",pathname:"/elasticsearch/_msearch",body:body});case 7:esResp=_context.sent;return _context.abrupt("return",esResp.responses[0]);case 9:case"end":return _context.stop()}}},_callee)}));return function executeScript(_x){return _ref2.apply(this,arguments)}}();exports.executeScript=executeScript;var isScriptValid=function(){var _ref4=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(_ref3){var name,lang,script,indexPatternTitle,scriptResponse;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:name=_ref3.name,lang=_ref3.lang,script=_ref3.script,indexPatternTitle=_ref3.indexPatternTitle;_context2.next=3;return executeScript({name:name,lang:lang,script:script,indexPatternTitle:indexPatternTitle});case 3:scriptResponse=_context2.sent;if(!(scriptResponse.status!==200)){_context2.next=6;break}return _context2.abrupt("return",false);case 6:return _context2.abrupt("return",true);case 7:case"end":return _context2.stop()}}},_callee2)}));return function isScriptValid(_x2){return _ref4.apply(this,arguments)}}();exports.isScriptValid=isScriptValid},6403:function(module,exports,__webpack_require__){module.exports=__webpack_require__(18)(2175)},6404:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.IndicesEditSectionsProvider=IndicesEditSectionsProvider;var _lodash=_interopRequireDefault(__webpack_require__(1));var _i18n=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function filterBy(items,key,filter){var lowercaseFilter=(filter||"").toLowerCase();return items.filter(function(item){return item[key].toLowerCase().includes(lowercaseFilter)})}function getCounts(fields,sourceFilters){var fieldFilter=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"";var fieldCount=_lodash["default"].countBy(filterBy(fields,"name",fieldFilter),function(field){return field.scripted?"scripted":"indexed"});_lodash["default"].defaults(fieldCount,{indexed:0,scripted:0,sourceFilters:sourceFilters?filterBy(sourceFilters,"value",fieldFilter).length:0});return fieldCount}function IndicesEditSectionsProvider(){return function(indexPattern,fieldFilter,indexPatternListProvider){var totalCount=getCounts(indexPattern.fields,indexPattern.sourceFilters);var filteredCount=getCounts(indexPattern.fields,indexPattern.sourceFilters,fieldFilter);var editSections=[];editSections.push({title:_i18n.i18n.translate("kbn.management.editIndexPattern.tabs.fieldsHeader",{defaultMessage:"Fields"}),index:"indexedFields",count:filteredCount.indexed,totalCount:totalCount.indexed});if(indexPatternListProvider.areScriptedFieldsEnabled(indexPattern)){editSections.push({title:_i18n.i18n.translate("kbn.management.editIndexPattern.tabs.scriptedHeader",{defaultMessage:"Scripted fields"}),index:"scriptedFields",count:filteredCount.scripted,totalCount:totalCount.scripted})}editSections.push({title:_i18n.i18n.translate("kbn.management.editIndexPattern.tabs.sourceHeader",{defaultMessage:"Source filters"}),index:"sourceFilters",count:filteredCount.sourceFilters,totalCount:totalCount.sourceFilters});return editSections}}},6405:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<kbn-management-app section="kibana/index_patterns" omit-breadcrumb-pages="[\'index_patterns\']">\n  <div class="euiPanel euiPanel--paddingLarge">\n    <div\n      ng-controller="managementIndexPatternsEdit"\n      data-test-subj="editIndexPattern"\n      role="region"\n      aria-label="{{::\'kbn.management.editIndexPattern.detailsAria\' | i18n: { defaultMessage: \'Index pattern details\' } }}"\n    >\n      \x3c!-- Header --\x3e\n      <kbn-management-index-patterns-header\n        index-pattern="indexPattern"\n        set-default="setDefaultPattern()"\n        refresh-fields="refreshFields()"\n        delete="removePattern()"\n      ></kbn-management-index-patterns-header>\n\n      <div class="euiSpacer euiSpacer--s"></div>\n      <p ng-if="::(indexPattern.timeFieldName || (indexPattern.tags && indexPattern.tags.length))">\n        <span ng-if="::indexPattern.timeFieldName">\n          <span class="euiBadge euiBadge--warning">\n            <span class="euiBadge__content">\n              <span class="euiBadge__text">\n                <span\n                  i18n-id="kbn.management.editIndexPattern.timeFilterHeader"\n                  i18n-default-message="Time Filter field name: {timeFieldName}"\n                  i18n-values="{ timeFieldName: indexPattern.timeFieldName }">\n                </span>\n              </span>\n            </span>\n          </span>\n        </span>\n        <span ng-repeat="tag in indexPattern.tags">\n          <span class="euiBadge euiBadge--hollow">\n            <span class="euiBadge__content">\n              <span class="euiBadge__text">\n                  {{tag.name}}\n                </span>\n              </span>\n            </span>\n        </span>\n      </p>\n\n      <div class="euiSpacer euiSpacer--m"></div>\n\n      <div class="euiText">\n        <p>\n          <span i18n-id="kbn.management.editIndexPattern.timeFilterLabel.timeFilterDetail"\n            i18n-default-message="This page lists every field in the {indexPatternTitle} index and the field\'s associated core type as recorded by Elasticsearch. To change a field type, use the Elasticsearch"\n            i18n-values="{ html_indexPatternTitle: \'<strong>\' + indexPattern.title + \'</strong>\' }"></span>\n          <a target="_blank" class="euiLink euiLink--primary" href="http://www.elastic.co/guide/en/elasticsearch/reference/current/mapping.html">\n            <span i18n-id="kbn.management.editIndexPattern.timeFilterLabel.mappingAPILink"\n                  i18n-default-message="Mapping API"></span>\n            <i aria-hidden="true" class="fa-link fa"></i>\n          </a>\n        </p>\n      </div>\n\n      <div class="euiSpacer euiSpacer--m"></div>\n\n      \x3c!-- Alerts --\x3e\n      <div\n        ng-if="indexPattern.isUnsupportedTimePattern()"\n        class="kuiInfoPanel kuiInfoPanel--error kuiVerticalRhythm"\n      >\n        <div class="kuiInfoPanelHeader">\n          <span class="kuiInfoPanelHeader__icon kuiIcon kuiIcon--error fa-warning"></span>\n          <span class="kuiInfoPanelHeader__title"\n                i18n-id="kbn.management.editIndexPattern.unsupportedTimePatternHeader"\n                i18n-default-message="Support for repeating index patterns removed">\n          </span>\n        </div>\n\n        <div class="kuiInfoPanelBody">\n          <div class="kuiInfoPanelBody__message">\n            <span i18n-id="kbn.management.editIndexPattern.unsupportedTimePatternLabel"\n                  i18n-default-message="Support for time-interval based index patterns has been removed! In the next major version of Kibana these index patterns will stop working. Migrate this index pattern to a wildcard pattern by specifying the new pattern below."></span>\n          </div>\n          <form>\n            <input\n              class="form-control"\n              type="text"\n              ng-model="migration.newTitle"\n            />\n          </form>\n          <button ng-disabled="migration.isMigrating || !migration.newTitle.trim()" class="kuiButton kuiButton--primary kuiButton--iconText" ng-click="migrate()">\n            <span ng-if="migration.isMigrating" class="euiLoadingSpinner euiLoadingSpinner--medium" />\n            <span i18n-id="kbn.management.editIndexPattern.migrate"\n                  i18n-default-message="Migrate"></span>\n          </button>\n        </div>\n      </div>\n\n      <div\n        ng-if="conflictFields.length"\n        class="kuiInfoPanel kuiInfoPanel--warning kuiVerticalRhythm"\n      >\n        <div class="kuiInfoPanelHeader">\n          <span class="kuiInfoPanelHeader__icon kuiIcon kuiIcon--warning fa-bolt"></span>\n          <span class="kuiInfoPanelHeader__title"\n                i18n-id="kbn.management.editIndexPattern.mappingConflictHeader"\n                i18n-default-message="Mapping conflict"></span>\n        </div>\n\n        <div class="kuiInfoPanelBody">\n          <div class="kuiInfoPanelBody__message">\n            <span i18n-id="kbn.management.editIndexPattern.mappingConflictLabel"\n                  i18n-default-message="{conflictFieldsLength, plural, one {A field is} other {# fields are}} defined as several types (string, integer, etc) across the indices that match this pattern. You may still be able to use these conflict fields in parts of Kibana, but they will be unavailable for functions that require Kibana to know their type. Correcting this issue will require reindexing your data."\n                  i18n-values="{ conflictFieldsLength: conflictFields.length }"></span>\n          </div>\n        </div>\n      </div>\n\n      \x3c!-- Tabs --\x3e\n      <div class="kuiTabs kuiVerticalRhythm">\n        <button\n          class="kuiTab"\n          ng-repeat="editSection in editSections"\n          ng-class="{ \'kuiTab-isSelected\': state.tab === editSection.index }"\n          ng-click="changeTab(editSection)"\n          data-test-subj="tab-{{ editSection.index }}"\n        >\n          {{ editSection.title }}\n          <span\n            data-test-subj="tab-count-{{ editSection.index }}"\n            aria-label="{{:: editSection.count + \' \' + editSection.title}}"\n          >\n            <span ng-if="editSection.count != editSection.totalCount">\n              ({{ editSection.count }} / {{ editSection.totalCount }})\n            </span>\n            <span ng-if="editSection.count == editSection.totalCount">\n              ({{ editSection.count }})\n            </span>\n          </span>\n        </button>\n      </div>\n\n      \x3c!-- Field Filters --\x3e\n      <form role="form" class="kuiFieldGroup kuiVerticalRhythm">\n        <div class="kuiFieldGroupSection kuiFieldGroupSection--wide">\n          <div class="kuiSearchInput">\n            <div class="kuiSearchInput__icon kuiIcon fa-search"></div>\n            <input\n              class="kuiSearchInput__input"\n              type="text"\n              aria-label="{{::\'kbn.management.editIndexPattern.fields.filterAria\' | i18n: {defaultMessage: \'Filter\'} }}"\n              ng-model="fieldFilter"\n              placeholder="{{::\'kbn.management.editIndexPattern.fields.filterPlaceholder\' | i18n: {defaultMessage: \'Filter\'} }}"\n              data-test-subj="indexPatternFieldFilter"\n            >\n          </div>\n        </div>\n\n        <div\n          class="kuiFieldGroupSection"\n          ng-if="state.tab == \'indexedFields\' && indexedFieldTypes.length > 0"\n        >\n          <select\n            data-test-subj="indexedFieldTypeFilterDropdown"\n            class="kuiSelect"\n            ng-model="indexedFieldTypeFilter"\n            ng-change="changeFilter(\'indexedFieldTypeFilter\', indexedFieldTypeFilter)"\n            ng-options="o for o in indexedFieldTypes"\n          >\n            <option value=""\n                    i18n-id="kbn.management.editIndexPattern.fields.allTypesDropDown"\n                    i18n-default-message="All field types"></option>\n          </select>\n        </div>\n\n        <div\n          class="kuiFieldGroupSection"\n          ng-if="state.tab == \'scriptedFields\' && scriptedFieldLanguages.length > 0"\n        >\n          <select\n            data-test-subj="scriptedFieldLanguageFilterDropdown"\n            class="kuiSelect"\n            ng-model="scriptedFieldLanguageFilter"\n            ng-change="changeFilter(\'scriptedFieldLanguageFilter\', scriptedFieldLanguageFilter)"\n            ng-options="o for o in scriptedFieldLanguages"\n          >\n            <option value=""\n                    i18n-id="kbn.management.editIndexPattern.fields.allLangsDropDown"\n                    i18n-default-message="All languages"></option>\n          </select>\n        </div>\n      </form>\n\n      \x3c!-- Tab content --\x3e\n      <div class="kuiVerticalRhythm">\n        <div id="reactIndexedFieldsTable"></div>\n\n        <div id="reactScriptedFieldsTable"></div>\n\n        <div id="reactSourceFiltersTable"></div>\n      </div>\n    </div>\n  </div>\n</kbn-management-app>\n'},6406:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"SourceFiltersTable",{enumerable:true,get:function get(){return _source_filters_table.SourceFiltersTable}});var _source_filters_table=__webpack_require__(6407)},6407:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SourceFiltersTable=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(17));var _reselect=__webpack_require__(2072);var _eui=__webpack_require__(2);var _table=__webpack_require__(6408);var _header=__webpack_require__(6410);var _add_filter=__webpack_require__(6412);var _react2=__webpack_require__(10);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var SourceFiltersTable=function(_Component){_inherits(SourceFiltersTable,_Component);function SourceFiltersTable(_props){var _this;_classCallCheck(this,SourceFiltersTable);_this=_possibleConstructorReturn(this,_getPrototypeOf(SourceFiltersTable).call(this,_props));_defineProperty(_assertThisInitialized(_this),"updateFilters",function(){var sourceFilters=_this.props.indexPattern.sourceFilters||[];var filters=sourceFilters.map(function(filter){return _objectSpread({},filter,{clientId:++_this.clientSideId})});_this.setState({filters:filters})});_defineProperty(_assertThisInitialized(_this),"getFilteredFilters",(0,_reselect.createSelector)(function(state){return state.filters},function(state,props){return props.filterFilter},function(filters,filterFilter){if(filterFilter){var filterFilterToLowercase=filterFilter.toLowerCase();return filters.filter(function(filter){return filter.value.toLowerCase().includes(filterFilterToLowercase)})}return filters}));_defineProperty(_assertThisInitialized(_this),"startDeleteFilter",function(filter){_this.setState({filterToDelete:filter,isDeleteConfirmationModalVisible:true})});_defineProperty(_assertThisInitialized(_this),"hideDeleteConfirmationModal",function(){_this.setState({filterToDelete:undefined,isDeleteConfirmationModalVisible:false})});_defineProperty(_assertThisInitialized(_this),"deleteFilter",_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var _this$props,indexPattern,onAddOrRemoveFilter,_this$state,filterToDelete,filters;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this$props=_this.props,indexPattern=_this$props.indexPattern,onAddOrRemoveFilter=_this$props.onAddOrRemoveFilter;_this$state=_this.state,filterToDelete=_this$state.filterToDelete,filters=_this$state.filters;indexPattern.sourceFilters=filters.filter(function(filter){return filter.clientId!==filterToDelete.clientId});_this.setState({isSaving:true});_context.next=6;return indexPattern.save();case 6:onAddOrRemoveFilter&&onAddOrRemoveFilter();_this.updateFilters();_this.setState({isSaving:false});_this.hideDeleteConfirmationModal();case 10:case"end":return _context.stop()}}},_callee)})));_defineProperty(_assertThisInitialized(_this),"onAddFilter",function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(value){var _this$props2,indexPattern,onAddOrRemoveFilter;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_this$props2=_this.props,indexPattern=_this$props2.indexPattern,onAddOrRemoveFilter=_this$props2.onAddOrRemoveFilter;indexPattern.sourceFilters=[].concat(_toConsumableArray(indexPattern.sourceFilters||[]),[{value:value}]);_this.setState({isSaving:true});_context2.next=5;return indexPattern.save();case 5:onAddOrRemoveFilter&&onAddOrRemoveFilter();_this.updateFilters();_this.setState({isSaving:false});case 8:case"end":return _context2.stop()}}},_callee2)}));return function(_x){return _ref2.apply(this,arguments)}}());_defineProperty(_assertThisInitialized(_this),"saveFilter",function(){var _ref4=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(_ref3){var filterId,newFilterValue,indexPattern,filters;return regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:filterId=_ref3.filterId,newFilterValue=_ref3.newFilterValue;indexPattern=_this.props.indexPattern;filters=_this.state.filters;indexPattern.sourceFilters=filters.map(function(filter){if(filter.clientId===filterId){return{value:newFilterValue,clientId:filter.clientId}}return filter});_this.setState({isSaving:true});_context3.next=7;return indexPattern.save();case 7:_this.updateFilters();_this.setState({isSaving:false});case 9:case"end":return _context3.stop()}}},_callee3)}));return function(_x2){return _ref4.apply(this,arguments)}}());_this.clientSideId=0;_this.state={filterToDelete:undefined,isDeleteConfirmationModalVisible:false,isSaving:false,filters:[]};return _this}_createClass(SourceFiltersTable,[{key:"componentWillMount",value:function componentWillMount(){this.updateFilters()}},{key:"renderDeleteConfirmationModal",value:function renderDeleteConfirmationModal(){var filterToDelete=this.state.filterToDelete;if(!filterToDelete){return null}return _react["default"].createElement(_eui.EuiOverlayMask,null,_react["default"].createElement(_eui.EuiConfirmModal,{title:_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.editIndexPattern.source.deleteSourceFilterLabel",defaultMessage:"Delete source filter '{value}'?",values:{value:filterToDelete.value}}),onCancel:this.hideDeleteConfirmationModal,onConfirm:this.deleteFilter,cancelButtonText:_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.editIndexPattern.source.deleteFilter.cancelButtonLabel",defaultMessage:"Cancel"}),buttonColor:"danger",confirmButtonText:_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.editIndexPattern.source.deleteFilter.deleteButtonLabel",defaultMessage:"Delete"}),defaultFocusedButton:_eui.EUI_MODAL_CONFIRM_BUTTON}))}},{key:"render",value:function render(){var _this$props3=this.props,indexPattern=_this$props3.indexPattern,fieldWildcardMatcher=_this$props3.fieldWildcardMatcher;var isSaving=this.state.isSaving;var filteredFilters=this.getFilteredFilters(this.state,this.props);return _react["default"].createElement("div",null,_react["default"].createElement(_header.Header,null),_react["default"].createElement(_add_filter.AddFilter,{onAddFilter:this.onAddFilter}),_react["default"].createElement(_eui.EuiSpacer,{size:"l"}),_react["default"].createElement(_table.Table,{isSaving:isSaving,indexPattern:indexPattern,items:filteredFilters,fieldWildcardMatcher:fieldWildcardMatcher,deleteFilter:this.startDeleteFilter,saveFilter:this.saveFilter}),this.renderDeleteConfirmationModal())}}]);return SourceFiltersTable}(_react.Component);exports.SourceFiltersTable=SourceFiltersTable;_defineProperty(SourceFiltersTable,"propTypes",{indexPattern:_propTypes["default"].object.isRequired,filterFilter:_propTypes["default"].string,fieldWildcardMatcher:_propTypes["default"].func.isRequired,onAddOrRemoveFilter:_propTypes["default"].func})},6408:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"Table",{enumerable:true,get:function get(){return _table.Table}});var _table=__webpack_require__(6409)},6409:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Table=exports.TableComponent=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(17));var _eui=__webpack_require__(2);var _react2=__webpack_require__(10);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var TableComponent=function(_Component){_inherits(TableComponent,_Component);function TableComponent(props){var _this;_classCallCheck(this,TableComponent);_this=_possibleConstructorReturn(this,_getPrototypeOf(TableComponent).call(this,props));_defineProperty(_assertThisInitialized(_this),"startEditingFilter",function(id,value){return _this.setState({editingFilterId:id,editingFilterValue:value})});_defineProperty(_assertThisInitialized(_this),"stopEditingFilter",function(){return _this.setState({editingFilterId:null})});_defineProperty(_assertThisInitialized(_this),"onEditingFilterChange",function(e){return _this.setState({editingFilterValue:e.target.value})});_defineProperty(_assertThisInitialized(_this),"onEditFieldKeyDown",function(_ref){var keyCode=_ref.keyCode;if(_eui.keyCodes.ENTER===keyCode){_this.props.saveFilter({filterId:_this.state.editingFilterId,newFilterValue:_this.state.editingFilterValue});_this.stopEditingFilter()}if(_eui.keyCodes.ESCAPE===keyCode){_this.stopEditingFilter()}});_this.state={editingFilterId:null,editingFilterValue:null};return _this}_createClass(TableComponent,[{key:"getColumns",value:function getColumns(){var _this2=this;var _this$props=this.props,deleteFilter=_this$props.deleteFilter,fieldWildcardMatcher=_this$props.fieldWildcardMatcher,indexPattern=_this$props.indexPattern,saveFilter=_this$props.saveFilter,intl=_this$props.intl;return[{field:"value",name:intl.formatMessage({id:"kbn.management.editIndexPattern.source.table.filterHeader",defaultMessage:"Filter"}),description:intl.formatMessage({id:"kbn.management.editIndexPattern.source.table.filterDescription",defaultMessage:"Filter name"}),dataType:"string",sortable:true,render:function render(value,filter){if(_this2.state.editingFilterId===filter.clientId){return _react["default"].createElement(_eui.EuiFieldText,{autoFocus:true,value:_this2.state.editingFilterValue,onChange:_this2.onEditingFilterChange,onKeyDown:_this2.onEditFieldKeyDown})}return _react["default"].createElement("span",null,value)}},{field:"value",name:intl.formatMessage({id:"kbn.management.editIndexPattern.source.table.matchesHeader",defaultMessage:"Matches"}),description:intl.formatMessage({id:"kbn.management.editIndexPattern.source.table.matchesDescription",defaultMessage:"Language used for the field"}),dataType:"string",sortable:true,render:function render(value,filter){var realtimeValue=_this2.state.editingFilterId===filter.clientId?_this2.state.editingFilterValue:value;var matcher=fieldWildcardMatcher([realtimeValue]);var matches=indexPattern.getNonScriptedFields().map(function(f){return f.name}).filter(matcher).sort();if(matches.length){return _react["default"].createElement("span",null,matches.join(", "))}return _react["default"].createElement("em",null,_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.editIndexPattern.source.table.notMatchedLabel",defaultMessage:"The source filter doesn't match any known fields."}))}},{name:"",align:_eui.RIGHT_ALIGNMENT,width:"100",render:function render(filter){if(_this2.state.editingFilterId===filter.clientId){return _react["default"].createElement(_react.Fragment,null,_react["default"].createElement(_eui.EuiButtonIcon,{size:"s",onClick:function onClick(){saveFilter({filterId:_this2.state.editingFilterId,newFilterValue:_this2.state.editingFilterValue});_this2.stopEditingFilter()},iconType:"checkInCircleFilled","aria-label":intl.formatMessage({id:"kbn.management.editIndexPattern.source.table.saveAria",defaultMessage:"Save"})}),_react["default"].createElement(_eui.EuiButtonIcon,{size:"s",onClick:function onClick(){_this2.stopEditingFilter()},iconType:"cross","aria-label":intl.formatMessage({id:"kbn.management.editIndexPattern.source.table.cancelAria",defaultMessage:"Cancel"})}))}return _react["default"].createElement(_react.Fragment,null,_react["default"].createElement(_eui.EuiButtonIcon,{size:"s",color:"danger",onClick:function onClick(){return deleteFilter(filter)},iconType:"trash","aria-label":intl.formatMessage({id:"kbn.management.editIndexPattern.source.table.deleteAria",defaultMessage:"Delete"})}),_react["default"].createElement(_eui.EuiButtonIcon,{size:"s",onClick:function onClick(){return _this2.startEditingFilter(filter.clientId,filter.value)},iconType:"pencil","aria-label":intl.formatMessage({id:"kbn.management.editIndexPattern.source.table.editAria",defaultMessage:"Edit"})}))}}]}},{key:"render",value:function render(){var _this$props2=this.props,items=_this$props2.items,isSaving=_this$props2.isSaving;var columns=this.getColumns();var pagination={initialPageSize:10,pageSizeOptions:[5,10,25,50]};return _react["default"].createElement(_eui.EuiInMemoryTable,{loading:isSaving,items:items,columns:columns,pagination:pagination,sorting:true})}}]);return TableComponent}(_react.Component);exports.TableComponent=TableComponent;_defineProperty(TableComponent,"propTypes",{indexPattern:_propTypes["default"].object.isRequired,items:_propTypes["default"].array.isRequired,deleteFilter:_propTypes["default"].func.isRequired,fieldWildcardMatcher:_propTypes["default"].func.isRequired,saveFilter:_propTypes["default"].func.isRequired,isSaving:_propTypes["default"].bool.isRequired});var Table=(0,_react2.injectI18n)(TableComponent);exports.Table=Table},6410:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"Header",{enumerable:true,get:function get(){return _header.Header}});var _header=__webpack_require__(6411)},6411:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Header=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(2);var _react2=__webpack_require__(10);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Header=function Header(){return _react["default"].createElement("div",null,_react["default"].createElement(_eui.EuiTitle,{size:"s"},_react["default"].createElement("h3",null,_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.editIndexPattern.sourceHeader",defaultMessage:"Source filters"}))),_react["default"].createElement(_eui.EuiText,null,_react["default"].createElement("p",null,_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.editIndexPattern.sourceLabel",defaultMessage:"Source filters can be used to exclude one or more fields when fetching the document source. This happens when viewing a document in the Discover app, or with a table displaying results from a saved search in the Dashboard app. Each row is built using the source of a single document, and if you have documents with large or unimportant fields you may benefit from filtering those out at this lower level."})),_react["default"].createElement("p",null,_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.editIndexPattern.source.noteLabel",defaultMessage:"Note that multi-fields will incorrectly appear as matches in the table below. These filters only actually apply to fields in the original source document, so matching multi-fields are not actually being filtered."}))),_react["default"].createElement(_eui.EuiSpacer,{size:"s"}))};exports.Header=Header},6412:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"AddFilter",{enumerable:true,get:function get(){return _add_filter.AddFilter}});var _add_filter=__webpack_require__(6413)},6413:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AddFilter=exports.AddFilterComponent=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(17));var _eui=__webpack_require__(2);var _react2=__webpack_require__(10);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var AddFilterComponent=function(_Component){_inherits(AddFilterComponent,_Component);function AddFilterComponent(props){var _this;_classCallCheck(this,AddFilterComponent);_this=_possibleConstructorReturn(this,_getPrototypeOf(AddFilterComponent).call(this,props));_defineProperty(_assertThisInitialized(_this),"onAddFilter",function(){_this.props.onAddFilter(_this.state.filter);_this.setState({filter:""})});_this.state={filter:""};return _this}_createClass(AddFilterComponent,[{key:"render",value:function render(){var _this2=this;var filter=this.state.filter;var intl=this.props.intl;var placeholder=intl.formatMessage({id:"kbn.management.editIndexPattern.sourcePlaceholder",defaultMessage:"source filter, accepts wildcards (e.g., `user*` to filter fields starting with 'user')"});return _react["default"].createElement(_eui.EuiFlexGroup,null,_react["default"].createElement(_eui.EuiFlexItem,{grow:10},_react["default"].createElement(_eui.EuiFieldText,{fullWidth:true,value:filter,onChange:function onChange(e){return _this2.setState({filter:e.target.value.trim()})},placeholder:placeholder})),_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiButton,{isDisabled:filter.length===0,onClick:this.onAddFilter},_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.editIndexPattern.source.addButtonLabel",defaultMessage:"Add"}))))}}]);return AddFilterComponent}(_react.Component);exports.AddFilterComponent=AddFilterComponent;_defineProperty(AddFilterComponent,"propTypes",{onAddFilter:_propTypes["default"].func.isRequired});var AddFilter=(0,_react2.injectI18n)(AddFilterComponent);exports.AddFilter=AddFilter},6414:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"IndexedFieldsTable",{enumerable:true,get:function get(){return _indexed_fields_table.IndexedFieldsTable}});var _indexed_fields_table=__webpack_require__(6415)},6415:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.IndexedFieldsTable=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(17));var _reselect=__webpack_require__(2072);var _table=__webpack_require__(6416);var _lib=__webpack_require__(6418);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var IndexedFieldsTable=function(_Component){_inherits(IndexedFieldsTable,_Component);function IndexedFieldsTable(_props){var _this;_classCallCheck(this,IndexedFieldsTable);_this=_possibleConstructorReturn(this,_getPrototypeOf(IndexedFieldsTable).call(this,_props));_defineProperty(_assertThisInitialized(_this),"getFilteredFields",(0,_reselect.createSelector)(function(state){return state.fields},function(state,props){return props.fieldFilter},function(state,props){return props.indexedFieldTypeFilter},function(fields,fieldFilter,indexedFieldTypeFilter){if(fieldFilter){var normalizedFieldFilter=fieldFilter.toLowerCase();fields=fields.filter(function(field){return field.name.toLowerCase().includes(normalizedFieldFilter)})}if(indexedFieldTypeFilter){fields=fields.filter(function(field){return field.type===indexedFieldTypeFilter})}return fields}));_this.state={fields:_this.mapFields(_this.props.fields)};return _this}_createClass(IndexedFieldsTable,[{key:"componentWillReceiveProps",value:function componentWillReceiveProps(nextProps){if(nextProps.fields!==this.props.fields){this.setState({fields:this.mapFields(nextProps.fields)})}}},{key:"mapFields",value:function mapFields(fields){var _this$props=this.props,indexPattern=_this$props.indexPattern,fieldWildcardMatcher=_this$props.fieldWildcardMatcher,helpers=_this$props.helpers;var sourceFilters=indexPattern.sourceFilters&&indexPattern.sourceFilters.map(function(f){return f.value});var fieldWildcardMatch=fieldWildcardMatcher(sourceFilters||[]);return fields&&fields.map(function(field){return _objectSpread({},field,{displayName:field.displayName,routes:field.routes,indexPattern:field.indexPattern,format:(0,_lib.getFieldFormat)(indexPattern,field.name),excluded:fieldWildcardMatch?fieldWildcardMatch(field.name):false,info:helpers.getFieldInfo&&helpers.getFieldInfo(indexPattern,field.name)})})||[]}},{key:"render",value:function render(){var _this2=this;var indexPattern=this.props.indexPattern;var fields=this.getFilteredFields(this.state,this.props);return _react["default"].createElement("div",null,_react["default"].createElement(_table.Table,{indexPattern:indexPattern,items:fields,editField:function editField(field){return _this2.props.helpers.redirectToRoute(field,"edit")}}))}}]);return IndexedFieldsTable}(_react.Component);exports.IndexedFieldsTable=IndexedFieldsTable;_defineProperty(IndexedFieldsTable,"propTypes",{fields:_propTypes["default"].array.isRequired,indexPattern:_propTypes["default"].object.isRequired,fieldFilter:_propTypes["default"].string,indexedFieldTypeFilter:_propTypes["default"].string,helpers:_propTypes["default"].shape({redirectToRoute:_propTypes["default"].func.isRequired,getFieldInfo:_propTypes["default"].func}),fieldWildcardMatcher:_propTypes["default"].func.isRequired})},6416:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _table=__webpack_require__(6417);Object.keys(_table).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _table[key]}})})},6417:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Table=exports.TableComponent=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(17));var _eui=__webpack_require__(2);var _react2=__webpack_require__(10);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var TableComponent=function(_PureComponent){_inherits(TableComponent,_PureComponent);function TableComponent(){_classCallCheck(this,TableComponent);return _possibleConstructorReturn(this,_getPrototypeOf(TableComponent).apply(this,arguments))}_createClass(TableComponent,[{key:"renderBooleanTemplate",value:function renderBooleanTemplate(value,label){return value?_react["default"].createElement(_eui.EuiIcon,{type:"dot",color:"secondary","aria-label":label}):_react["default"].createElement("span",null)}},{key:"renderFieldName",value:function renderFieldName(name,field){var indexPattern=this.props.indexPattern;var intl=this.props.intl;var infoLabel=intl.formatMessage({id:"kbn.management.editIndexPattern.fields.table.additionalInfoAriaLabel",defaultMessage:"Additional field information"});var timeLabel=intl.formatMessage({id:"kbn.management.editIndexPattern.fields.table.primaryTimeAriaLabel",defaultMessage:"Primary time field"});var timeContent=intl.formatMessage({id:"kbn.management.editIndexPattern.fields.table.primaryTimeTooltip",defaultMessage:"This field represents the time that events occurred."});return _react["default"].createElement("span",null,name,field.info&&field.info.length?_react["default"].createElement("span",null,"",_react["default"].createElement(_eui.EuiIconTip,{type:"questionInCircle",color:"primary","aria-label":infoLabel,content:field.info.map(function(info,i){return _react["default"].createElement("div",{key:i},info)})})):null,indexPattern.timeFieldName===name?_react["default"].createElement("span",null,"",_react["default"].createElement(_eui.EuiIconTip,{type:"clock",color:"primary","aria-label":timeLabel,content:timeContent})):null)}},{key:"renderFieldType",value:function renderFieldType(type,isConflict){var intl=this.props.intl;var label=intl.formatMessage({id:"kbn.management.editIndexPattern.fields.table.multiTypeAria",defaultMessage:"Multiple type field"});var content=intl.formatMessage({id:"kbn.management.editIndexPattern.fields.table.multiTypeTooltip",defaultMessage:"The type of this field changes across indices. It is unavailable for many analysis functions."});return _react["default"].createElement("span",null,type,isConflict?_react["default"].createElement("span",null,"",_react["default"].createElement(_eui.EuiIconTip,{type:"alert",color:"warning","aria-label":label,content:content})):"")}},{key:"render",value:function render(){var _this=this;var _this$props=this.props,items=_this$props.items,editField=_this$props.editField,intl=_this$props.intl;var pagination={initialPageSize:10,pageSizeOptions:[5,10,25,50]};var columns=[{field:"displayName",name:intl.formatMessage({id:"kbn.management.editIndexPattern.fields.table.nameHeader",defaultMessage:"Name"}),dataType:"string",sortable:true,render:function render(value,field){return _this.renderFieldName(value,field)},width:"38%","data-test-subj":"indexedFieldName"},{field:"type",name:intl.formatMessage({id:"kbn.management.editIndexPattern.fields.table.typeHeader",defaultMessage:"Type"}),dataType:"string",sortable:true,render:function render(value){return _this.renderFieldType(value,value==="conflict")},"data-test-subj":"indexedFieldType"},{field:"format",name:intl.formatMessage({id:"kbn.management.editIndexPattern.fields.table.formatHeader",defaultMessage:"Format"}),dataType:"string",sortable:true},{field:"searchable",name:intl.formatMessage({id:"kbn.management.editIndexPattern.fields.table.searchableHeader",defaultMessage:"Searchable"}),description:intl.formatMessage({id:"kbn.management.editIndexPattern.fields.table.searchableDescription",defaultMessage:"These fields can be used in the filter bar"}),dataType:"boolean",sortable:true,render:function render(value){return _this.renderBooleanTemplate(value,intl.formatMessage({id:"kbn.management.editIndexPattern.fields.table.isSearchableAria",defaultMessage:"Is searchable"}))}},{field:"aggregatable",name:intl.formatMessage({id:"kbn.management.editIndexPattern.fields.table.aggregatableLabel",defaultMessage:"Aggregatable"}),description:intl.formatMessage({id:"kbn.management.editIndexPattern.fields.table.aggregatableDescription",defaultMessage:"These fields can be used in visualization aggregations"}),dataType:"boolean",sortable:true,render:function render(value){return _this.renderBooleanTemplate(value,intl.formatMessage({id:"kbn.management.editIndexPattern.fields.table.isAggregatableAria",defaultMessage:"Is aggregatable"}))}},{field:"excluded",name:intl.formatMessage({id:"kbn.management.editIndexPattern.fields.table.excludedLabel",defaultMessage:"Excluded"}),description:intl.formatMessage({id:"kbn.management.editIndexPattern.fields.table.excludedDescription",defaultMessage:"Fields that are excluded from _source when it is fetched"}),dataType:"boolean",sortable:true,render:function render(value){return _this.renderBooleanTemplate(value,intl.formatMessage({id:"kbn.management.editIndexPattern.fields.table.isExcludedAria",defaultMessage:"Is excluded"}))}},{name:"",actions:[{name:intl.formatMessage({id:"kbn.management.editIndexPattern.fields.table.editLabel",defaultMessage:"Edit"}),description:intl.formatMessage({id:"kbn.management.editIndexPattern.fields.table.editDescription",defaultMessage:"Edit"}),icon:"pencil",onClick:editField,type:"icon"}],width:"40px"}];return _react["default"].createElement(_eui.EuiInMemoryTable,{items:items,columns:columns,pagination:pagination,sorting:true})}}]);return TableComponent}(_react.PureComponent);exports.TableComponent=TableComponent;_defineProperty(TableComponent,"propTypes",{indexPattern:_propTypes["default"].object.isRequired,items:_propTypes["default"].array.isRequired,editField:_propTypes["default"].func.isRequired});var Table=(0,_react2.injectI18n)(TableComponent);exports.Table=Table},6418:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"getFieldFormat",{enumerable:true,get:function get(){return _get_field_format.getFieldFormat}});var _get_field_format=__webpack_require__(6419)},6419:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getFieldFormat=getFieldFormat;var _lodash=__webpack_require__(1);function getFieldFormat(indexPattern,fieldName){return indexPattern&&fieldName?(0,_lodash.get)(indexPattern,["fieldFormatMap",fieldName,"type","title"]):""}},6420:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"ScriptedFieldsTable",{enumerable:true,get:function get(){return _scripted_fields_table.ScriptedFieldsTable}});var _scripted_fields_table=__webpack_require__(6421)},6421:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ScriptedFieldsTable=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(17));var _scripting_languages=__webpack_require__(2071);var _documentation_links=__webpack_require__(227);var _eui=__webpack_require__(2);var _i18n=__webpack_require__(5);var _components=__webpack_require__(6422);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ScriptedFieldsTable=function(_Component){_inherits(ScriptedFieldsTable,_Component);function ScriptedFieldsTable(props){var _this;_classCallCheck(this,ScriptedFieldsTable);_this=_possibleConstructorReturn(this,_getPrototypeOf(ScriptedFieldsTable).call(this,props));_defineProperty(_assertThisInitialized(_this),"fetchFields",_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var fields,deprecatedLangsInUse,deprecatedLangs,supportedLangs,_iteratorNormalCompletion,_didIteratorError,_iteratorError,_iterator,_step,lang;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return _this.props.indexPattern.getScriptedFields();case 2:fields=_context.sent;deprecatedLangsInUse=[];deprecatedLangs=(0,_scripting_languages.getDeprecatedScriptingLanguages)();supportedLangs=(0,_scripting_languages.getSupportedScriptingLanguages)();_iteratorNormalCompletion=true;_didIteratorError=false;_iteratorError=undefined;_context.prev=9;for(_iterator=fields[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){lang=_step.value.lang;if(deprecatedLangs.includes(lang)||!supportedLangs.includes(lang)){deprecatedLangsInUse.push(lang)}}_context.next=17;break;case 13:_context.prev=13;_context.t0=_context["catch"](9);_didIteratorError=true;_iteratorError=_context.t0;case 17:_context.prev=17;_context.prev=18;if(!_iteratorNormalCompletion&&_iterator["return"]!=null){_iterator["return"]()}case 20:_context.prev=20;if(!_didIteratorError){_context.next=23;break}throw _iteratorError;case 23:return _context.finish(20);case 24:return _context.finish(17);case 25:_this.setState({fields:fields,deprecatedLangsInUse:deprecatedLangsInUse});case 26:case"end":return _context.stop()}}},_callee,null,[[9,13,17,25],[18,,20,24]])})));_defineProperty(_assertThisInitialized(_this),"getFilteredItems",function(){var fields=_this.state.fields;var _this$props=_this.props,fieldFilter=_this$props.fieldFilter,scriptedFieldLanguageFilter=_this$props.scriptedFieldLanguageFilter;var languageFilteredFields=fields;if(scriptedFieldLanguageFilter){languageFilteredFields=fields.filter(function(field){return field.lang===_this.props.scriptedFieldLanguageFilter})}var filteredFields=languageFilteredFields;if(fieldFilter){var normalizedFieldFilter=_this.props.fieldFilter.toLowerCase();filteredFields=languageFilteredFields.filter(function(field){return field.name.toLowerCase().includes(normalizedFieldFilter)})}return filteredFields});_defineProperty(_assertThisInitialized(_this),"startDeleteField",function(field){_this.setState({fieldToDelete:field,isDeleteConfirmationModalVisible:true})});_defineProperty(_assertThisInitialized(_this),"hideDeleteConfirmationModal",function(){_this.setState({fieldToDelete:undefined,isDeleteConfirmationModalVisible:false})});_defineProperty(_assertThisInitialized(_this),"deleteField",function(){var _this$props2=_this.props,indexPattern=_this$props2.indexPattern,onRemoveField=_this$props2.onRemoveField;var fieldToDelete=_this.state.fieldToDelete;indexPattern.removeScriptedField(fieldToDelete.name);onRemoveField&&onRemoveField();_this.fetchFields();_this.hideDeleteConfirmationModal()});_this.state={deprecatedLangsInUse:[],fieldToDelete:undefined,isDeleteConfirmationModalVisible:false,fields:[]};return _this}_createClass(ScriptedFieldsTable,[{key:"componentWillMount",value:function componentWillMount(){this.fetchFields()}},{key:"renderCallOuts",value:function renderCallOuts(){var deprecatedLangsInUse=this.state.deprecatedLangsInUse;return _react["default"].createElement(_components.CallOuts,{deprecatedLangsInUse:deprecatedLangsInUse,painlessDocLink:_documentation_links.documentationLinks.scriptedFields.painless})}},{key:"renderDeleteConfirmationModal",value:function renderDeleteConfirmationModal(){var fieldToDelete=this.state.fieldToDelete;if(!fieldToDelete){return null}var title=_i18n.i18n.translate("kbn.management.editIndexPattern.scripted.deleteFieldLabel",{defaultMessage:"Delete scripted field '{fieldName}'?",values:{fieldName:fieldToDelete.name}});var cancelButtonText=_i18n.i18n.translate("kbn.management.editIndexPattern.scripted.deleteField.cancelButton",{defaultMessage:"Cancel"});var confirmButtonText=_i18n.i18n.translate("kbn.management.editIndexPattern.scripted.deleteField.deleteButton",{defaultMessage:"Delete"});return _react["default"].createElement(_eui.EuiOverlayMask,null,_react["default"].createElement(_eui.EuiConfirmModal,{title:title,onCancel:this.hideDeleteConfirmationModal,onConfirm:this.deleteField,cancelButtonText:cancelButtonText,confirmButtonText:confirmButtonText,defaultFocusedButton:_eui.EUI_MODAL_CONFIRM_BUTTON}))}},{key:"render",value:function render(){var _this2=this;var _this$props3=this.props,helpers=_this$props3.helpers,indexPattern=_this$props3.indexPattern;var items=this.getFilteredItems();return _react["default"].createElement("div",null,_react["default"].createElement(_components.Header,{addScriptedFieldUrl:helpers.getRouteHref(indexPattern,"addField")}),this.renderCallOuts(),_react["default"].createElement(_eui.EuiSpacer,{size:"l"}),_react["default"].createElement(_components.Table,{indexPattern:indexPattern,items:items,editField:function editField(field){return _this2.props.helpers.redirectToRoute(field,"edit")},deleteField:this.startDeleteField}),this.renderDeleteConfirmationModal())}}]);return ScriptedFieldsTable}(_react.Component);exports.ScriptedFieldsTable=ScriptedFieldsTable;_defineProperty(ScriptedFieldsTable,"propTypes",{indexPattern:_propTypes["default"].object.isRequired,fieldFilter:_propTypes["default"].string,scriptedFieldLanguageFilter:_propTypes["default"].string,helpers:_propTypes["default"].shape({redirectToRoute:_propTypes["default"].func.isRequired,getRouteHref:_propTypes["default"].func.isRequired}),onRemoveField:_propTypes["default"].func})},6422:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"Table",{enumerable:true,get:function get(){return _table.Table}});Object.defineProperty(exports,"Header",{enumerable:true,get:function get(){return _header.Header}});Object.defineProperty(exports,"CallOuts",{enumerable:true,get:function get(){return _call_outs.CallOuts}});var _table=__webpack_require__(6423);var _header=__webpack_require__(6425);var _call_outs=__webpack_require__(6427)},6423:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"Table",{enumerable:true,get:function get(){return _table.Table}});var _table=__webpack_require__(6424)},6424:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Table=exports.TableComponent=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(17));var _eui=__webpack_require__(2);var _react2=__webpack_require__(10);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var TableComponent=function(_PureComponent){_inherits(TableComponent,_PureComponent);function TableComponent(){var _getPrototypeOf2;var _this;_classCallCheck(this,TableComponent);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(TableComponent)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"renderFormatCell",function(value){var indexPattern=_this.props.indexPattern;var title=indexPattern.fieldFormatMap[value]&&indexPattern.fieldFormatMap[value].type?indexPattern.fieldFormatMap[value].type.title:"";return _react["default"].createElement("span",null,title)});return _this}_createClass(TableComponent,[{key:"render",value:function render(){var _this$props=this.props,items=_this$props.items,editField=_this$props.editField,deleteField=_this$props.deleteField,intl=_this$props.intl;var columns=[{field:"displayName",name:intl.formatMessage({id:"kbn.management.editIndexPattern.scripted.table.nameHeader",defaultMessage:"Name"}),description:intl.formatMessage({id:"kbn.management.editIndexPattern.scripted.table.nameDescription",defaultMessage:"Name of the field"}),dataType:"string",sortable:true,width:"38%"},{field:"lang",name:intl.formatMessage({id:"kbn.management.editIndexPattern.scripted.table.langHeader",defaultMessage:"Lang"}),description:intl.formatMessage({id:"kbn.management.editIndexPattern.scripted.table.langDescription",defaultMessage:"Language used for the field"}),dataType:"string",sortable:true,"data-test-subj":"scriptedFieldLang"},{field:"script",name:intl.formatMessage({id:"kbn.management.editIndexPattern.scripted.table.scriptHeader",defaultMessage:"Script"}),description:intl.formatMessage({id:"kbn.management.editIndexPattern.scripted.table.scriptDescription",defaultMessage:"Script for the field"}),dataType:"string",sortable:true},{field:"name",name:intl.formatMessage({id:"kbn.management.editIndexPattern.scripted.table.formatHeader",defaultMessage:"Format"}),description:intl.formatMessage({id:"kbn.management.editIndexPattern.scripted.table.formatDescription",defaultMessage:"Format used for the field"}),render:this.renderFormatCell,sortable:false},{name:"",actions:[{name:intl.formatMessage({id:"kbn.management.editIndexPattern.scripted.table.editHeader",defaultMessage:"Edit"}),description:intl.formatMessage({id:"kbn.management.editIndexPattern.scripted.table.editDescription",defaultMessage:"Edit this field"}),icon:"pencil",onClick:editField},{name:intl.formatMessage({id:"kbn.management.editIndexPattern.scripted.table.deleteHeader",defaultMessage:"Delete"}),description:intl.formatMessage({id:"kbn.management.editIndexPattern.scripted.table.deleteDescription",defaultMessage:"Delete this field"}),icon:"trash",color:"danger",onClick:deleteField}],width:"40px"}];var pagination={initialPageSize:10,pageSizeOptions:[5,10,25,50]};return _react["default"].createElement(_eui.EuiInMemoryTable,{items:items,columns:columns,pagination:pagination,sorting:true})}}]);return TableComponent}(_react.PureComponent);exports.TableComponent=TableComponent;_defineProperty(TableComponent,"propTypes",{indexPattern:_propTypes["default"].object.isRequired,items:_propTypes["default"].array.isRequired,editField:_propTypes["default"].func.isRequired,deleteField:_propTypes["default"].func.isRequired});var Table=(0,_react2.injectI18n)(TableComponent);exports.Table=Table},6425:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"Header",{enumerable:true,get:function get(){return _header.Header}});var _header=__webpack_require__(6426)},6426:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Header=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(17));var _eui=__webpack_require__(2);var _react2=__webpack_require__(10);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Header=function Header(_ref){var addScriptedFieldUrl=_ref.addScriptedFieldUrl;return _react["default"].createElement(_eui.EuiFlexGroup,{alignItems:"center"},_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiTitle,{size:"s"},_react["default"].createElement("h3",null,_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.editIndexPattern.scriptedHeader",defaultMessage:"Scripted fields"}))),_react["default"].createElement(_eui.EuiText,null,_react["default"].createElement("p",null,_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.editIndexPattern.scriptedLabel",defaultMessage:"You can use scripted fields in visualizations and display them in your documents. However, you cannot search scripted fields."})))),_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiButton,{"data-test-subj":"addScriptedFieldLink",href:addScriptedFieldUrl},_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.editIndexPattern.scripted.addFieldButton",defaultMessage:"Add scripted field"}))))};exports.Header=Header;Header.propTypes={addScriptedFieldUrl:_propTypes["default"].string.isRequired}},6427:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"CallOuts",{enumerable:true,get:function get(){return _call_outs.CallOuts}});var _call_outs=__webpack_require__(6428)},6428:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.CallOuts=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(2);var _react2=__webpack_require__(10);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var CallOuts=function CallOuts(_ref){var deprecatedLangsInUse=_ref.deprecatedLangsInUse,painlessDocLink=_ref.painlessDocLink;if(!deprecatedLangsInUse.length){return null}return _react["default"].createElement("div",null,_react["default"].createElement(_eui.EuiCallOut,{title:_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.editIndexPattern.scripted.deprecationLangHeader",defaultMessage:"Deprecation languages in use"}),color:"danger",iconType:"cross"},_react["default"].createElement("p",null,_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.editIndexPattern.scripted.deprecationLangLabel.deprecationLangDetail",defaultMessage:"The following deprecated languages are in use: {deprecatedLangsInUse}. Support for these languages will be removed in the next major version of Kibana and Elasticsearch. Convert you scripted fields to {link} to avoid any problems.",values:{deprecatedLangsInUse:deprecatedLangsInUse.join(", "),link:_react["default"].createElement(_eui.EuiLink,{href:painlessDocLink},_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.editIndexPattern.scripted.deprecationLangLabel.painlessDescription",defaultMessage:"Painless"}))}}))),_react["default"].createElement(_eui.EuiSpacer,{size:"m"}))};exports.CallOuts=CallOuts},6429:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<div>\n  <div>\n    <div id="indexPatternListReact" role="region" aria-label="{{\'kbn.management.editIndexPatternLiveRegionAriaLabel\' | i18n: { defaultMessage: \'Index patterns\' } }}"></div>\n  </div>\n</div>\n'},6430:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<kbn-management-app section="kibana/index_patterns">\n  <kbn-management-index-patterns\n    index-pattern="fieldSettings.indexPattern">\n  </kbn-management-index-patterns>\n</kbn-management-app>\n'},6431:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"IndexPatternTable",{enumerable:true,get:function get(){return _index_pattern_table.IndexPatternTable}});var _index_pattern_table=__webpack_require__(6432)},6432:function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.IndexPatternTable=void 0;var _eui=__webpack_require__(2);var _react=__webpack_require__(10);var _react2=_interopRequireDefault(__webpack_require__(0));var _create_button=__webpack_require__(6433);var _create_index_pattern_prompt=__webpack_require__(6438);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var columns=[{field:"title",name:"Pattern",render:function render(name,index){return _react2["default"].createElement(_eui.EuiButtonEmpty,{size:"xs",href:"#/management/kibana/index_patterns/".concat(index.id)},name,index.tags&&index.tags.map(function(_ref){var tagKey=_ref.key,tagName=_ref.name;return _react2["default"].createElement(_eui.EuiBadge,{className:"indexPatternList__badge",key:tagKey},tagName)}))},dataType:"string",sortable:function sortable(_ref2){var sort=_ref2.sort;return sort}}];var pagination={initialPageSize:10,pageSizeOptions:[5,10,25,50]};var sorting={sort:{field:"title",direction:"asc"}};var search={box:{incremental:true,schema:{fields:{title:{type:"string"}}}}};var IndexPatternTable=function(_React$Component){_inherits(IndexPatternTable,_React$Component);function IndexPatternTable(){var _getPrototypeOf2;var _this;_classCallCheck(this,IndexPatternTable);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(IndexPatternTable)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"state",{showFlyout:_this.props.indexPatterns.length===0});return _this}_createClass(IndexPatternTable,[{key:"render",value:function render(){var _this2=this;return _react2["default"].createElement(_eui.EuiPanel,{paddingSize:"l","data-test-subj":"indexPatternTable"},this.state.showFlyout&&_react2["default"].createElement(_create_index_pattern_prompt.CreateIndexPatternPrompt,{onClose:function onClose(){return _this2.setState({showFlyout:false})}}),_react2["default"].createElement(_eui.EuiFlexGroup,{justifyContent:"spaceBetween"},_react2["default"].createElement(_eui.EuiFlexItem,{grow:false,className:"euiIEFlexWrapFix"},_react2["default"].createElement(_eui.EuiFlexGroup,{alignItems:"center",gutterSize:"s"},_react2["default"].createElement(_eui.EuiFlexItem,{grow:false},_react2["default"].createElement(_eui.EuiText,null,_react2["default"].createElement("h2",null,_react2["default"].createElement(_react.FormattedMessage,{id:"kbn.management.indexPatternTable.title",defaultMessage:"Index patterns"})))),_react2["default"].createElement(_eui.EuiFlexItem,{grow:false},_react2["default"].createElement(_eui.EuiButtonIcon,{iconSize:"l",iconType:"questionInCircle",onClick:function onClick(){return _this2.setState({showFlyout:true})},"aria-label":"Help"})))),_react2["default"].createElement(_eui.EuiFlexItem,{grow:false},_react2["default"].createElement(_create_button.CreateButton,{options:this.props.indexPatternCreationOptions},_react2["default"].createElement(_react.FormattedMessage,{id:"kbn.management.indexPatternTable.createBtn",defaultMessage:"Create index pattern"})))),_react2["default"].createElement(_eui.EuiSpacer,null),_react2["default"].createElement(_eui.EuiInMemoryTable,{allowNeutralSort:false,itemId:"id",isSelectable:false,items:this.props.indexPatterns,columns:columns,pagination:pagination,sorting:sorting,search:search}))}}]);return IndexPatternTable}(_react2["default"].Component);exports.IndexPatternTable=IndexPatternTable},6433:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"CreateButton",{enumerable:true,get:function get(){return _create_button.CreateButton}});var _create_button=__webpack_require__(6434)},6434:function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.CreateButton=void 0;var _eui_theme_k6_light=__webpack_require__(6435);var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(2);var _react2=__webpack_require__(10);var _react3=__webpack_require__(2073);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var CreateButtonComponent=function(_Component){_inherits(CreateButtonComponent,_Component);function CreateButtonComponent(){var _getPrototypeOf2;var _this;_classCallCheck(this,CreateButtonComponent);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(CreateButtonComponent)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"state",{isPopoverOpen:false});_defineProperty(_assertThisInitialized(_this),"togglePopover",function(){_this.setState({isPopoverOpen:!_this.state.isPopoverOpen})});_defineProperty(_assertThisInitialized(_this),"closePopover",function(){_this.setState({isPopoverOpen:false})});_defineProperty(_assertThisInitialized(_this),"renderBetaBadge",function(){return _react["default"].createElement(_eui.EuiBadge,{color:_eui_theme_k6_light.euiColorAccent},_react["default"].createElement(_react2.FormattedMessage,{id:"kbn.management.indexPatternList.createButton.betaLabel",defaultMessage:"Beta"}))});return _this}_createClass(CreateButtonComponent,[{key:"render",value:function render(){var _this2=this;var _this$props=this.props,options=_this$props.options,children=_this$props.children,uiCapabilities=_this$props.uiCapabilities;var isPopoverOpen=this.state.isPopoverOpen;if(!options||!options.length){return null}if(!uiCapabilities.indexPatterns.save){return null}if(options.length===1){return _react["default"].createElement(_eui.EuiButton,{"data-test-subj":"createIndexPatternButton",fill:true,onClick:options[0].onClick,iconType:"plusInCircle"},children)}var button=_react["default"].createElement(_eui.EuiButton,{"data-test-subj":"createIndexPatternButton",fill:true,size:"s",iconType:"arrowDown",iconSide:"right",onClick:this.togglePopover},children);if(options.length>1){return _react["default"].createElement(_eui.EuiPopover,{id:"singlePanel",button:button,isOpen:isPopoverOpen,closePopover:this.closePopover,panelPaddingSize:"none",anchorPosition:"downLeft"},_react["default"].createElement(_eui.EuiContextMenuPanel,{items:options.map(function(option){return _react["default"].createElement(_eui.EuiContextMenuItem,{key:option.text,onClick:option.onClick,"data-test-subj":option.testSubj},_react["default"].createElement(_eui.EuiDescriptionList,{style:{whiteSpace:"nowrap"}},_react["default"].createElement(_eui.EuiDescriptionListTitle,null,option.text,option.isBeta?_react["default"].createElement(_react.Fragment,null," ",_this2.renderBetaBadge()):null),_react["default"].createElement(_eui.EuiDescriptionListDescription,null,option.description)))})}))}}}]);return CreateButtonComponent}(_react.Component);var CreateButton=(0,_react3.injectUICapabilities)(CreateButtonComponent);exports.CreateButton=CreateButton},6435:function(module,exports,__webpack_require__){module.exports=__webpack_require__(18)(1183)},6436:function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.UICapabilitiesProvider=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _ui_capabilities_context=__webpack_require__(2074);var _=__webpack_require__(141);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var UICapabilitiesProvider=function(_React$Component){_inherits(UICapabilitiesProvider,_React$Component);function UICapabilitiesProvider(){_classCallCheck(this,UICapabilitiesProvider);return _possibleConstructorReturn(this,_getPrototypeOf(UICapabilitiesProvider).apply(this,arguments))}_createClass(UICapabilitiesProvider,[{key:"render",value:function render(){return _react["default"].createElement(_ui_capabilities_context.UICapabilitiesContext.Provider,{value:_.capabilities.get()},this.props.children)}}]);return UICapabilitiesProvider}(_react["default"].Component);exports.UICapabilitiesProvider=UICapabilitiesProvider;_defineProperty(UICapabilitiesProvider,"displayName","UICapabilitiesProvider")},6437:function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.injectUICapabilities=injectUICapabilities;var _react=_interopRequireWildcard(__webpack_require__(0));var _ui_capabilities_context=__webpack_require__(2074);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function getDisplayName(component){return component.displayName||component.name||"Component"}function injectUICapabilities(WrappedComponent){var InjectUICapabilities=function(_Component){_inherits(InjectUICapabilities,_Component);function InjectUICapabilities(props,context){_classCallCheck(this,InjectUICapabilities);return _possibleConstructorReturn(this,_getPrototypeOf(InjectUICapabilities).call(this,props,context))}_createClass(InjectUICapabilities,[{key:"render",value:function render(){return _react["default"].createElement(WrappedComponent,_extends({},this.props,{uiCapabilities:this.context}))}}]);return InjectUICapabilities}(_react.Component);_defineProperty(InjectUICapabilities,"displayName","InjectUICapabilities(".concat(getDisplayName(WrappedComponent),")"));_defineProperty(InjectUICapabilities,"WrappedComponent",WrappedComponent);_defineProperty(InjectUICapabilities,"contextType",_ui_capabilities_context.UICapabilitiesContext);return InjectUICapabilities}},6438:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.CreateIndexPatternPrompt=void 0;var _eui=__webpack_require__(2);var _react=__webpack_require__(10);var _react2=_interopRequireDefault(__webpack_require__(0));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var CreateIndexPatternPrompt=function CreateIndexPatternPrompt(_ref){var onClose=_ref.onClose;return _react2["default"].createElement(_eui.EuiFlyout,{size:"s",onClose:onClose,"data-test-subj":"CreateIndexPatternPrompt"},_react2["default"].createElement(_eui.EuiFlyoutHeader,{hasBorder:true},_react2["default"].createElement(_eui.EuiText,{grow:false},_react2["default"].createElement("h2",null,_react2["default"].createElement(_react.FormattedMessage,{id:"kbn.management.indexPatternPrompt.title",defaultMessage:"About index patterns"})))),_react2["default"].createElement(_eui.EuiFlyoutBody,null,_react2["default"].createElement(_eui.EuiText,{textAlign:"left"},_react2["default"].createElement("p",null,_react2["default"].createElement(_react.FormattedMessage,{id:"kbn.management.indexPatternPrompt.subtitle",defaultMessage:"Index patterns allow you to bucket disparate data sources together so their shared fields may be queried in Kibana."}))),_react2["default"].createElement(_eui.EuiHorizontalRule,{margin:"l"}),_react2["default"].createElement(_eui.EuiText,{textAlign:"left"},_react2["default"].createElement("h3",null,_react2["default"].createElement(_react.FormattedMessage,{id:"kbn.management.indexPatternPrompt.examplesTitle",defaultMessage:"Examples of index patterns"}))),_react2["default"].createElement(_eui.EuiSpacer,null),_react2["default"].createElement(_eui.EuiDescriptionList,{className:"indexPatternListPrompt__descList"},_react2["default"].createElement(_eui.EuiDescriptionListTitle,null,_react2["default"].createElement(_react.FormattedMessage,{id:"kbn.management.indexPatternPrompt.exampleOneTitle",defaultMessage:"Single data source"})),_react2["default"].createElement(_eui.EuiDescriptionListDescription,null,_react2["default"].createElement(_react.FormattedMessage,{id:"kbn.management.indexPatternPrompt.exampleOne",defaultMessage:"Index a single data source named log-west-001 so you can build charts or query its contents fast."})),_react2["default"].createElement(_eui.EuiDescriptionListTitle,null,_react2["default"].createElement(_react.FormattedMessage,{id:"kbn.management.indexPatternPrompt.exampleTwoTitle",defaultMessage:"Multiple data sources"})),_react2["default"].createElement(_eui.EuiDescriptionListDescription,null,_react2["default"].createElement(_react.FormattedMessage,{id:"kbn.management.indexPatternPrompt.exampleTwo",defaultMessage:"Group all incoming data sources starting with log-west* so you can query against all your west coast server logs."})),_react2["default"].createElement(_eui.EuiDescriptionListTitle,null,_react2["default"].createElement(_react.FormattedMessage,{id:"kbn.management.indexPatternPrompt.exampleThreeTitle",defaultMessage:"Custom groupings"})),_react2["default"].createElement(_eui.EuiDescriptionListDescription,null,_react2["default"].createElement(_react.FormattedMessage,{id:"kbn.management.indexPatternPrompt.exampleThree",defaultMessage:"Specifically group your archived, monthly, roll-up metrics of those logs into a separate index pattern so you can aggregate historical trends to compare."})))))};exports.CreateIndexPatternPrompt=CreateIndexPatternPrompt},6439:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<div class="euiPage mgtPage">\n  <div id="management-sidenav" class="euiPageSideBar" style="position: static;" data-test-subj="managementNav"></div>\n  <main class="euiPageBody euiPageBody--restrictWidth-default mgtPage__body" ng-transclude></main>\n</div>\n'},6440:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<kbn-management-app>\n  <div id="management-landing"></div>\n</kbn-management-app>\n'},6441:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=_default;var _lodash=_interopRequireDefault(__webpack_require__(1));var _react=_interopRequireDefault(__webpack_require__(0));var _notify=__webpack_require__(24);var _errors=__webpack_require__(556);var _routes=_interopRequireDefault(__webpack_require__(34));var _eui=__webpack_require__(2);var _timers=__webpack_require__(6442);var _i18n=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var bannerId;var timeoutId;function displayBanner(){(0,_timers.clearTimeout)(timeoutId);bannerId=_notify.banners.set({id:bannerId,component:_react["default"].createElement(_eui.EuiCallOut,{color:"warning",iconType:"iInCircle",title:_i18n.i18n.translate("kbn.management.indexPattern.bannerLabel",{defaultMessage:"In order to visualize and explore data in Kibana, you'll need to create an index pattern to retrieve data from Elasticsearch."})})});timeoutId=setTimeout(function(){_notify.banners.remove(bannerId);timeoutId=undefined},15e3)}function _default(opts){opts=opts||{};var whenMissingRedirectTo=opts.whenMissingRedirectTo||null;_routes["default"].addSetupWork(function loadDefaultIndexPattern(Promise,$route,config,indexPatterns){var route=_lodash["default"].get($route,"current.$$route");if(!route.requireDefaultIndex){return}return indexPatterns.getIds().then(function(patterns){var defaultId=config.get("defaultIndex");var defined=!!defaultId;var exists=_lodash["default"].contains(patterns,defaultId);if(defined&&!exists){config.remove("defaultIndex");defaultId=defined=false}if(!defined){if(patterns.length>=1){defaultId=patterns[0];config.set("defaultIndex",defaultId)}else{throw new _errors.NoDefaultIndexPattern}}})}).afterWork(null,function(err,kbnUrl){var hasDefault=!(err instanceof _errors.NoDefaultIndexPattern);if(hasDefault||!whenMissingRedirectTo)throw err;kbnUrl.change(whenMissingRedirectTo());displayBanner()})}module.exports=exports.default},6442:function(module,exports,__webpack_require__){module.exports=__webpack_require__(18)(458)},6443:function(module,exports,__webpack_require__){"use strict";__webpack_require__(6444)},6444:function(module,exports,__webpack_require__){"use strict";__webpack_require__(24);__webpack_require__(451);__webpack_require__(263);var _index=_interopRequireDefault(__webpack_require__(6445));var _routes=_interopRequireDefault(__webpack_require__(34));var _modules=__webpack_require__(12);var _timefilter=__webpack_require__(74);__webpack_require__(2036);var _breadcrumbs=__webpack_require__(1033);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}var app=_modules.uiModules.get("apps/doc",["kibana/notify","kibana/courier","kibana/index_patterns"]);var resolveIndexPattern={indexPattern:function indexPattern(indexPatterns,savedSearches,$route){return indexPatterns.get($route.current.params.indexPattern)}};var k7Breadcrumbs=function k7Breadcrumbs($route){return[].concat(_toConsumableArray((0,_breadcrumbs.getRootBreadcrumbs)()),[{text:"".concat($route.current.params.index,"#").concat($route.current.params.id)}])};_routes["default"].when("/doc/:indexPattern/:index/:type",{template:_index["default"],resolve:resolveIndexPattern,k7Breadcrumbs:k7Breadcrumbs}).when("/doc/:indexPattern/:index",{template:_index["default"],resolve:resolveIndexPattern,k7Breadcrumbs:k7Breadcrumbs});app.controller("doc",function($scope,$route,es){_timefilter.timefilter.disableAutoRefreshSelector();_timefilter.timefilter.disableTimeRangeSelector();$scope.indexPattern=$route.current.locals.indexPattern;var computedFields=$scope.indexPattern.getComputedFields();es.search({index:$route.current.params.index,body:{query:{ids:{values:[$route.current.params.id]}},stored_fields:computedFields.storedFields,_source:true,script_fields:computedFields.scriptFields,docvalue_fields:computedFields.docvalueFields}}).then(function(resp){if(resp.hits){if(resp.hits.total<1){$scope.status="notFound"}else{$scope.status="found";$scope.hit=resp.hits.hits[0]}}})["catch"](function(err){if(err.status===404){$scope.status="notFound"}else{$scope.status="error";$scope.resp=err}})})},6445:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<div ng-controller="doc" class="app-container">\n  <div class="kuiViewContent">\n    \x3c!-- no results --\x3e\n    <div class="kuiViewContentItem" ng-if="status === \'notFound\'">\n      <div class="kuiInfoPanel kuiInfoPanel--error kuiVerticalRhythm">\n        <div class="kuiInfoPanelHeader">\n          <span class="kuiInfoPanelHeader__icon kuiIcon kuiIcon--error fa-warning"></span>\n          <span\n            class="kuiInfoPanelHeader__title"\n            i18n-id="kbn.doc.failedToLocateDocumentDescription"\n            i18n-default-message="Failed to locate document"\n          ></span>\n        </div>\n        <div class="kuiInfoPanelBody">\n          <div\n            class="kuiInfoPanelBody__message"\n            i18n-id="kbn.doc.couldNotFindDocumentsDescription"\n            i18n-default-message="Unfortunately I could not find any documents matching that id, of that type, in that index. I tried really hard. I wanted it to be there. Sometimes I swear documents grow legs and just walk out of the index. Sneaky. I wish I could offer some advice here, something to make you feel better"\n          ></div>\n        </div>\n      </div>\n    </div>\n\n    \x3c!-- error --\x3e\n    <div class="kuiViewContentItem" ng-if="status === \'error\'">\n      <div class="kuiInfoPanel kuiInfoPanel--error kuiVerticalRhythm">\n        <div class="kuiInfoPanelHeader">\n          <span class="kuiInfoPanelHeader__icon kuiIcon kuiIcon--error fa-warning"></span>\n          <span\n            class="kuiInfoPanelHeader__title"\n            i18n-id="kbn.doc.failedToExecuteQueryDescription"\n            i18n-default-message="Failed to execute query"\n          ></span>\n        </div>\n        <div class="kuiInfoPanelBody">\n          <div\n            class="kuiInfoPanelBody__message"\n            i18n-id="kbn.doc.somethingWentWrongDescription"\n            i18n-default-message="Oh no. Something went very wrong. Its not just that I couldn\'t find your document, I couldn\'t even try. The index was missing, or the type. Go check out Elasticsearch, something isn\'t quite right here."\n          ></div>\n        </div>\n      </div>\n    </div>\n\n    \x3c!-- loading --\x3e\n    <div class="kuiViewContentItem" ng-if="status === undefined">\n      <div class="kuiPanel kuiPanel--centered">\n        <div\n          class="kuiTableInfo"\n          i18n-id="kbn.doc.loadingDescription"\n          i18n-default-message="Loading"\n        ></div>\n      </div>\n    </div>\n\n    \x3c!-- result --\x3e\n    <div class="kuiViewContentItem" ng-if="status === \'found\'">\n      <doc-viewer hit="hit" index-pattern="indexPattern" data-test-subj="doc-hit"></doc-viewer>\n    </div>\n  </div>\n</div>\n'},6446:function(module,exports,__webpack_require__){"use strict";var _routes=_interopRequireDefault(__webpack_require__(34));var _i18n=__webpack_require__(5);var _dev_tools=__webpack_require__(550);var _feature_catalogue=__webpack_require__(128);__webpack_require__(1e3);__webpack_require__(6447);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_routes["default"].when("/dev_tools",{resolve:{redirect:function redirect(Private,kbnUrl){var items=Private(_dev_tools.DevToolsRegistryProvider).inOrder;kbnUrl.redirect(items[0].url.substring(1))}}});_routes["default"].defaults(/^\/dev_tools(\/|$)/,{badge:function badge(uiCapabilities){if(uiCapabilities.dev_tools.save){return undefined}return{text:_i18n.i18n.translate("kbn.devTools.badge.readOnly.text",{defaultMessage:"Read only"}),tooltip:_i18n.i18n.translate("kbn.devTools.badge.readOnly.tooltip",{defaultMessage:"Unable to save"}),iconType:"glasses"}},k7Breadcrumbs:function k7Breadcrumbs(){return[{text:_i18n.i18n.translate("kbn.devTools.k7BreadcrumbsDevToolsLabel",{defaultMessage:"Dev Tools"}),href:"#/dev_tools"}]}});_feature_catalogue.FeatureCatalogueRegistryProvider.register(function(){return{id:"console",title:_i18n.i18n.translate("kbn.devTools.consoleTitle",{defaultMessage:"Console"}),description:_i18n.i18n.translate("kbn.devTools.consoleDescription",{defaultMessage:"Skip cURL and use this JSON interface to work with your data directly."}),icon:"consoleApp",path:"/app/kibana#/dev_tools/console",showOnHomePage:true,category:_feature_catalogue.FeatureCatalogueCategory.ADMIN}})},6447:function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(12);var _dev_tools=__webpack_require__(550);var _dev_tools_app=_interopRequireDefault(__webpack_require__(6448));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_modules.uiModules.get("apps/dev_tools").directive("kbnDevToolsApp",function(Private,$location){var devToolsRegistry=Private(_dev_tools.DevToolsRegistryProvider);return{restrict:"E",replace:true,template:_dev_tools_app["default"],transclude:true,scope:{topNavConfig:"="},bindToController:true,controllerAs:"kbnDevToolsApp",controller:function controller(){this.devTools=devToolsRegistry.inOrder;this.currentPath="#".concat($location.path());this.onClick=function(item,$event){if(item.disabled){$event.preventDefault()}}}}})},6448:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<div class="devApp app-container">\n    \x3c!-- Tabs. --\x3e\n  <div class="euiTabs" role="tablist">\n    <a\n      role="tab"\n      aria-selected="{{kbnDevToolsApp.currentPath === item.url}}"\n      ng-repeat="item in kbnDevToolsApp.devTools"\n      class="euiTab"\n      ng-class="{\'euiTab-isSelected\': kbnDevToolsApp.currentPath === item.url, \'euiTab-isDisabled\': item.disabled}"\n      ng-disabled="item.disabled"\n      kbn-href="{{::item.url}}"\n      ng-click="kbnDevToolsApp.onClick(item, $event)"\n      tooltip="{{ item.tooltipContent }}"\n      tooltip-placement="bottom"\n      tooltip-popup-delay="0"\n      tooltip-append-to-body="1"\n    >\n      {{::item.display}}\n    </a>\n  </div>\n  <main class="devApp__container" role="tabpanel" ng-transclude></main>\n</div>\n'},6449:function(module,exports,__webpack_require__){"use strict";var _lodash=_interopRequireDefault(__webpack_require__(1));var _query_filter=__webpack_require__(188);var _routes=_interopRequireDefault(__webpack_require__(34));var _i18n=__webpack_require__(5);__webpack_require__(6450);var _index=_interopRequireDefault(__webpack_require__(6468));var _breadcrumbs=__webpack_require__(1033);var _new_platform=__webpack_require__(32);var _subscribe_with_scope=__webpack_require__(511);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}_routes["default"].when("/context/:indexPatternId/:type/:id*",{controller:ContextAppRouteController,k7Breadcrumbs:function k7Breadcrumbs($route){var indexPattern=$route.current.locals.indexPattern;var id=$route.current.params.id;return[].concat(_toConsumableArray((0,_breadcrumbs.getRootBreadcrumbs)()),[{text:_i18n.i18n.translate("kbn.context.breadcrumb",{defaultMessage:"Context of {indexPatternTitle}#{docId}",values:{indexPatternTitle:indexPattern.title,docId:id}})}])},controllerAs:"contextAppRoute",resolve:{indexPattern:function indexPattern($route,indexPatterns){return indexPatterns.get($route.current.params.indexPatternId)}},template:_index["default"]});function ContextAppRouteController($routeParams,$scope,AppState,config,indexPattern,Private){var _this=this;var queryFilter=Private(_query_filter.FilterBarQueryFilterProvider);this.state=new AppState(createDefaultAppState(config,indexPattern));this.state.save(true);$scope.$watchGroup(["contextAppRoute.state.columns","contextAppRoute.state.predecessorCount","contextAppRoute.state.successorCount"],function(){return _this.state.save(true)});var updateSubsciption=(0,_subscribe_with_scope.subscribeWithScope)($scope,queryFilter.getUpdates$(),{next:function next(){_this.filters=_lodash["default"].cloneDeep(queryFilter.getFilters())}});$scope.$on("$destroy",function(){updateSubsciption.unsubscribe()});this.anchorType=$routeParams.type;this.anchorId=$routeParams.id;this.indexPattern=indexPattern;this.discoverUrl=_new_platform.npStart.core.chrome.navLinks.get("kibana:discover").url;this.filters=_lodash["default"].cloneDeep(queryFilter.getFilters())}function createDefaultAppState(config,indexPattern){return{columns:["_source"],filters:[],predecessorCount:parseInt(config.get("context:defaultSize"),10),sort:[indexPattern.timeFieldName,"desc"],successorCount:parseInt(config.get("context:defaultSize"),10)}}},6450:function(module,exports,__webpack_require__){"use strict";var _lodash=_interopRequireDefault(__webpack_require__(1));var _compat=__webpack_require__(2075);var _modules=__webpack_require__(12);var _app=_interopRequireDefault(__webpack_require__(6452));__webpack_require__(6453);__webpack_require__(6456);var _sorting=__webpack_require__(677);var _query_parameters=__webpack_require__(2076);var _query=__webpack_require__(6459);var _timefilter=__webpack_require__(74);var _setup=__webpack_require__(84);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}_setup.data.filter.loadLegacyDirectives();var _module=_modules.uiModules.get("apps/context",["elasticsearch","kibana","kibana/config","kibana/notify","ngRoute"]);_module.directive("contextApp",function ContextApp(){return{bindToController:true,controller:(0,_compat.callAfterBindingsWorkaround)(ContextAppController),controllerAs:"contextApp",restrict:"E",scope:{anchorType:"=",anchorId:"=",columns:"=",indexPattern:"=",filters:"=",predecessorCount:"=",successorCount:"=",sort:"=",discoverUrl:"="},template:_app["default"]}});function ContextAppController($scope,config,Private){var _this=this;var queryParameterActions=Private(_query_parameters.QueryParameterActionsProvider);var queryActions=Private(_query.QueryActionsProvider);_timefilter.timefilter.disableAutoRefreshSelector();_timefilter.timefilter.disableTimeRangeSelector();this.state=createInitialState(parseInt(config.get("context:step"),10),(0,_sorting.getFirstSortableField)(this.indexPattern,config.get("context:tieBreakerFields")),this.discoverUrl);this.actions=_lodash["default"].mapValues(_objectSpread({},queryParameterActions,queryActions),function(action){return function(){return action(_this.state).apply(void 0,arguments)}});this.constants={FAILURE_REASONS:_query.FAILURE_REASONS,LOADING_STATUS:_query.LOADING_STATUS};$scope.$watchGroup([function(){return _this.state.rows.predecessors},function(){return _this.state.rows.anchor},function(){return _this.state.rows.successors}],function(newValues){var _this$actions;return(_this$actions=_this.actions).setAllRows.apply(_this$actions,_toConsumableArray(newValues))});$scope.$watchCollection(function(){return _objectSpread({},_lodash["default"].pick(_this,_query_parameters.QUERY_PARAMETER_KEYS),{indexPatternId:_this.indexPattern.id})},function(newQueryParameters){var queryParameters=_this.state.queryParameters;if(newQueryParameters.indexPatternId!==queryParameters.indexPatternId||newQueryParameters.anchorType!==queryParameters.anchorType||newQueryParameters.anchorId!==queryParameters.anchorId||!_lodash["default"].isEqual(newQueryParameters.sort,queryParameters.sort)){_this.actions.fetchAllRowsWithNewQueryParameters(_lodash["default"].cloneDeep(newQueryParameters))}else if(newQueryParameters.predecessorCount!==queryParameters.predecessorCount||newQueryParameters.successorCount!==queryParameters.successorCount||!_lodash["default"].isEqual(newQueryParameters.filters,queryParameters.filters)){_this.actions.fetchContextRowsWithNewQueryParameters(_lodash["default"].cloneDeep(newQueryParameters))}});$scope.$watchCollection(function(){return{predecessorCount:_this.state.queryParameters.predecessorCount,successorCount:_this.state.queryParameters.successorCount}},function(newParameters){_lodash["default"].assign(_this,newParameters)})}function createInitialState(defaultStepSize,tieBreakerField,discoverUrl){return{queryParameters:(0,_query_parameters.createInitialQueryParametersState)(defaultStepSize,tieBreakerField),rows:{all:[],anchor:null,predecessors:[],successors:[]},loadingStatus:(0,_query.createInitialLoadingStatusState)(),navigation:{discover:{url:discoverUrl}}}}},6451:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.callAfterBindingsWorkaround=callAfterBindingsWorkaround;exports.InitAfterBindingsWorkaround=void 0;function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var InitAfterBindingsWorkaround=function InitAfterBindingsWorkaround($injector,$attrs,$element,$scope,$transclude){var _this=this;_classCallCheck(this,InitAfterBindingsWorkaround);if(!this.initAfterBindings){throw new Error("When using inheritance you must move the logic in the constructor to the `initAfterBindings` method")}this.$onInit=function(){$injector.invoke(_this.initAfterBindings,_this,{$attrs:$attrs,$element:$element,$scope:$scope,$transclude:$transclude})}};exports.InitAfterBindingsWorkaround=InitAfterBindingsWorkaround;_defineProperty(InitAfterBindingsWorkaround,"$inject",["$injector","$attrs","$element","$scope","$transclude"]);function callAfterBindingsWorkaround(constructor){return function InitAfterBindingsWrapper($injector,$attrs,$element,$scope,$transclude){var _this2=this;this.$onInit=function(){$injector.invoke(constructor,_this2,{$attrs:$attrs,$element:$element,$scope:$scope,$transclude:$transclude})}}}},6452:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<filter-bar\n  class-name="\'globalFilterGroup__filterBar\'"\n  filters="contextApp.state.queryParameters.filters"\n  on-filters-updated="contextApp.actions.updateFilters"\n  index-patterns="[contextApp.indexPattern]"\n></filter-bar>\n\n\x3c!-- Error feedback --\x3e\n<div\n  class="kuiViewContent kuiViewContentItem"\n  ng-if="contextApp.state.loadingStatus.anchor.status === contextApp.constants.LOADING_STATUS.FAILED"\n>\n  <div class="kuiInfoPanel kuiInfoPanel--error kuiVerticalRhythm">\n    <div class="kuiInfoPanelHeader">\n      <span class="kuiInfoPanelHeader__icon kuiIcon kuiIcon--error fa-warning"></span>\n      <span\n        class="kuiInfoPanelHeader__title"\n        i18n-id="kbn.context.failedToLoadAnchorDocumentDescription"\n        i18n-default-message="Failed to load the anchor document"\n      ></span>\n    </div>\n\n    <div class="kuiInfoPanelBody">\n      <div\n        class="kuiInfoPanelBody__message"\n        ng-if="contextApp.state.loadingStatus.anchor.reason === contextApp.constants.FAILURE_REASONS.INVALID_TIEBREAKER"\n        i18n-id="kbn.context.noSearchableTiebreakerFieldDescription"\n        i18n-default-message="No searchable tiebreaker field could be found in the index pattern {indexPatternId}. Please change the advanced setting {tieBreakerFields} to include a valid field for this index pattern."\n        i18n-values="{\n          indexPatternId: contextApp.state.queryParameters.indexPatternId,\n          html_tieBreakerFields: \'<code>context:tieBreakerFields</code>\'\n        }"\n      >\n      </div>\n      <div\n        class="kuiInfoPanelBody__message"\n        ng-if="contextApp.state.loadingStatus.anchor.reason === contextApp.constants.FAILURE_REASONS.UNKNOWN"\n      >\n        <span\n          i18n-id="kbn.context.reloadPageDescription.reloadOrVisitTextMessage"\n          i18n-default-message="Please reload or visit"\n          i18n-description="Part of composite text kbn.context.reloadPageDescription.reloadOrVisitTextMessage + kbn.context.reloadPageDescription.discoverLinkText + kbn.context.reloadPageDescription.selectValidAnchorDocumentTextMessage"\n        ></span>\n        <a\n          ng-href="{{ contextApp.state.navigation.discover.url }}"\n          i18n-id="kbn.context.reloadPageDescription.discoverLinkText"\n          i18n-default-message="Discover"\n          i18n-description="Part of composite text kbn.context.reloadPageDescription.reloadOrVisitTextMessage + kbn.context.reloadPageDescription.discoverLinkText + kbn.context.reloadPageDescription.selectValidAnchorDocumentTextMessage"\n        ></a>\n        <span\n          i18n-id="kbn.context.reloadPageDescription.selectValidAnchorDocumentTextMessage"\n          i18n-default-message="to select a valid anchor document."\n          i18n-description="Part of composite text kbn.context.reloadPageDescription.reloadOrVisitTextMessage + kbn.context.reloadPageDescription.discoverLinkText + kbn.context.reloadPageDescription.selectValidAnchorDocumentTextMessage"\n      ></span>\n    </div>\n    </div>\n  </div>\n</div>\n\n<main\n  class="kuiViewContent kuiViewContentItem"\n  ng-if="contextApp.state.loadingStatus.anchor.status !== contextApp.constants.LOADING_STATUS.FAILED"\n>\n  \x3c!-- Controls --\x3e\n  <div class="kuiBar kuiVerticalRhythm">\n    <div class="kuiBarSection">\n      <context-loading-button\n        data-test-subj="predecessorLoadMoreButton"\n        is-disabled="![\n          contextApp.constants.LOADING_STATUS.LOADED,\n          contextApp.constants.LOADING_STATUS.FAILED,\n        ].includes(contextApp.state.loadingStatus.predecessors.status)"\n        icon="\'fa-chevron-up\'"\n        ng-click="contextApp.actions.fetchMorePredecessorRows()"\n      >\n        <span\n          i18n-id="kbn.context.loadMoreDescription"\n          i18n-default-message="Load {defaultStepSize} more"\n          i18n-values="{\n            defaultStepSize: contextApp.state.queryParameters.defaultStepSize\n          }"\n        ></span>\n      </context-loading-button>\n      <context-size-picker\n        count="contextApp.state.queryParameters.predecessorCount"\n        data-test-subj="predecessorCountPicker"\n        is-disabled="contextApp.state.loadingStatus.anchor.status !== contextApp.constants.LOADING_STATUS.LOADED"\n        on-change-count="contextApp.actions.fetchGivenPredecessorRows"\n      ></context-size-picker>\n      <span\n        i18n-id="kbn.context.newerDocumentsDescription"\n        i18n-default-message="newer documents"\n      ></span>\n      <span\n        class="kuiStatusText kuiStatusText--warning"\n        ng-if="(contextApp.state.loadingStatus.predecessors.status === contextApp.constants.LOADING_STATUS.LOADED)\n          && (contextApp.state.queryParameters.predecessorCount > contextApp.state.rows.predecessors.length)"\n      >\n        <span class="kuiStatusText__icon kuiIcon fa-bolt"></span>\n        <span ng-bind-template="Only {{ contextApp.state.rows.predecessors.length }} documents newer than the anchor could be found."></span>\n      </span>\n    </div>\n\n    <div class="kuiBarSection">\n    </div>\n  </div>\n\n  \x3c!-- Loading feedback --\x3e\n  <div\n    ng-if="[\n      contextApp.constants.LOADING_STATUS.UNINITIALIZED,\n      contextApp.constants.LOADING_STATUS.LOADING,\n    ].includes(contextApp.state.loadingStatus.anchor.status)"\n    class="kuiPanel kuiPanel--centered kuiVerticalRhythm"\n  >\n    <div\n      class="kuiTableInfo"\n      i18n-id="kbn.context.loadingDescription"\n      i18n-default-message="Loading"\n    ></div>\n  </div>\n\n  \x3c!-- Table --\x3e\n  <div\n    ng-if="contextApp.state.loadingStatus.anchor.status === contextApp.constants.LOADING_STATUS.LOADED"\n    class="kuiPanel kuiVerticalRhythm"\n  >\n    <div class="discover-table" fixed-scroll>\n      <doc-table\n        filter="contextApp.actions.addFilter"\n        hits="contextApp.state.rows.all"\n        index-pattern="contextApp.indexPattern"\n        sorting="contextApp.state.queryParameters.sort"\n        columns="contextApp.state.queryParameters.columns"\n        infinite-scroll="true"\n        minimum-visible-rows="contextApp.state.rows.all.length"\n      ></doc-table>\n    </div>\n  </div>\n\n  \x3c!-- Controls --\x3e\n  <div class="kuiBar kuiVerticalRhythm">\n    <div class="kuiBarSection">\n      <context-loading-button\n        data-test-subj="successorLoadMoreButton"\n        is-disabled="![\n          contextApp.constants.LOADING_STATUS.LOADED,\n          contextApp.constants.LOADING_STATUS.FAILED,\n        ].includes(contextApp.state.loadingStatus.successors.status)"\n        icon="\'fa-chevron-down\'"\n        ng-click="contextApp.actions.fetchMoreSuccessorRows()"\n      >\n        <span\n          i18n-id="kbn.context.loadMoreDescription"\n          i18n-default-message="Load {defaultStepSize} more"\n          i18n-values="{\n            defaultStepSize: contextApp.state.queryParameters.defaultStepSize\n          }"\n        ></span>\n      </context-loading-button>\n      <context-size-picker\n        count="contextApp.state.queryParameters.successorCount"\n        data-test-subj="successorCountPicker"\n        is-disabled="contextApp.state.loadingStatus.anchor.status !== contextApp.constants.LOADING_STATUS.LOADED"\n        on-change-count="contextApp.actions.fetchGivenSuccessorRows"\n      ></context-size-picker>\n      <div\n        i18n-id="kbn.context.olderDocumentsDescription"\n        i18n-default-message="older documents"\n      ></div>\n      <span\n        class="kuiStatusText kuiStatusText--warning"\n        ng-if="(contextApp.state.loadingStatus.successors.status === contextApp.constants.LOADING_STATUS.LOADED)\n          && (contextApp.state.queryParameters.successorCount > contextApp.state.rows.successors.length)"\n      >\n        <span class="kuiStatusText__icon kuiIcon fa-bolt"></span>\n        <span ng-bind-template="Only {{ contextApp.state.rows.successors.length }} documents older than the anchor could be found."></span>\n      </span>\n    </div>\n\n    <div class="kuiBarSection">\n    </div>\n  </div>\n</main>\n'},6453:function(module,exports,__webpack_require__){"use strict";__webpack_require__(6454)},6454:function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(12);var _loading_button=_interopRequireDefault(__webpack_require__(6455));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _module=_modules.uiModules.get("apps/context",["kibana","ngRoute"]);_module.directive("contextLoadingButton",function ContextLoadingButton(){return{replace:true,restrict:"E",scope:{isDisabled:"=",icon:"="},template:_loading_button["default"],transclude:true}})},6455:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<button\n  class="kuiButton kuiButton--basic kuiButton--iconText"\n  ng-disabled="isDisabled"\n>\n  <span class="kuiButton__inner">\n    <span\n      class="kuiButton__icon kuiIcon fa-spinner fa-spin"\n      ng-class="isDisabled ? [\'fa-spinner\', \'fa-spin\'] : [icon]"\n    />\n    <span ng-transclude />\n  </span>\n</button>\n'},6456:function(module,exports,__webpack_require__){"use strict";var _lodash=_interopRequireDefault(__webpack_require__(1));var _modules=__webpack_require__(12);var _compat=__webpack_require__(2075);var _size_picker=_interopRequireDefault(__webpack_require__(6457));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _module=_modules.uiModules.get("apps/context",["kibana"]);_module.directive("contextSizePicker",function ContextSizePicker(){return{bindToController:true,controller:(0,_compat.callAfterBindingsWorkaround)(ContextSizePickerController),controllerAs:"contextSizePicker",link:linkContextSizePicker,replace:true,restrict:"E",require:"ngModel",scope:{count:"=",isDisabled:"=",onChangeCount:"="},template:_size_picker["default"]}});function linkContextSizePicker(scope,element,attrs,ngModel){scope.countModel=ngModel}function ContextSizePickerController($scope){var _this=this;$scope.$watch(function(){return _this.count},function(){return $scope.countModel.$rollbackViewValue()});this.getOrSetCount=function(count){return _lodash["default"].isUndefined(count)?_this.count:_this.onChangeCount(count)}}},6457:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<input\n  class="kuiTextInput cxtSizePicker"\n  ng-disabled="contextSizePicker.isDisabled"\n  ng-model-options="{updateOn: \'change\', getterSetter: true, debounce: 200}"\n  ng-model="contextSizePicker.getOrSetCount"\n  type="number"\n>\n'},6458:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.QueryParameterActionsProvider=QueryParameterActionsProvider;var _lodash=_interopRequireDefault(__webpack_require__(1));var _query_filter=__webpack_require__(188);var _filter_manager=__webpack_require__(1029);var _constants=__webpack_require__(2077);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function QueryParameterActionsProvider(indexPatterns,Private){var queryFilter=Private(_query_filter.FilterBarQueryFilterProvider);var filterGen=(0,_filter_manager.getFilterGenerator)(queryFilter);var setPredecessorCount=function setPredecessorCount(state){return function(predecessorCount){return state.queryParameters.predecessorCount=clamp(_constants.MIN_CONTEXT_SIZE,_constants.MAX_CONTEXT_SIZE,predecessorCount)}};var increasePredecessorCount=function increasePredecessorCount(state){return function(){var value=arguments.length>0&&arguments[0]!==undefined?arguments[0]:state.queryParameters.defaultStepSize;return setPredecessorCount(state)(state.queryParameters.predecessorCount+value)}};var setSuccessorCount=function setSuccessorCount(state){return function(successorCount){return state.queryParameters.successorCount=clamp(_constants.MIN_CONTEXT_SIZE,_constants.MAX_CONTEXT_SIZE,successorCount)}};var increaseSuccessorCount=function increaseSuccessorCount(state){return function(){var value=arguments.length>0&&arguments[0]!==undefined?arguments[0]:state.queryParameters.defaultStepSize;return setSuccessorCount(state)(state.queryParameters.successorCount+value)}};var setQueryParameters=function setQueryParameters(state){return function(queryParameters){return Object.assign(state.queryParameters,_lodash["default"].pick(queryParameters,_constants.QUERY_PARAMETER_KEYS))}};var updateFilters=function updateFilters(){return function(filters){queryFilter.setFilters(filters)}};var addFilter=function addFilter(state){return function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(field,values,operation){var indexPatternId,newFilters,indexPattern;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:indexPatternId=state.queryParameters.indexPatternId;newFilters=filterGen.generate(field,values,operation,indexPatternId);queryFilter.addFilters(newFilters);_context.next=5;return indexPatterns.get(indexPatternId);case 5:indexPattern=_context.sent;indexPattern.popularizeField(field.name,1);case 7:case"end":return _context.stop()}}},_callee)}));return function(_x,_x2,_x3){return _ref.apply(this,arguments)}}()};return{addFilter:addFilter,updateFilters:updateFilters,increasePredecessorCount:increasePredecessorCount,increaseSuccessorCount:increaseSuccessorCount,setPredecessorCount:setPredecessorCount,setQueryParameters:setQueryParameters,setSuccessorCount:setSuccessorCount}}function clamp(minimum,maximum,value){return Math.max(Math.min(maximum,value),minimum)}},6459:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"QueryActionsProvider",{enumerable:true,get:function get(){return _actions.QueryActionsProvider}});Object.defineProperty(exports,"FAILURE_REASONS",{enumerable:true,get:function get(){return _constants.FAILURE_REASONS}});Object.defineProperty(exports,"LOADING_STATUS",{enumerable:true,get:function get(){return _constants.LOADING_STATUS}});Object.defineProperty(exports,"createInitialLoadingStatusState",{enumerable:true,get:function get(){return _state.createInitialLoadingStatusState}});var _actions=__webpack_require__(6460);var _constants=__webpack_require__(1041);var _state=__webpack_require__(6467)},6460:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.QueryActionsProvider=QueryActionsProvider;var _lodash=_interopRequireDefault(__webpack_require__(1));var _i18n=__webpack_require__(5);var _react=_interopRequireDefault(__webpack_require__(0));var _markdown=__webpack_require__(508);var _notify=__webpack_require__(24);var _anchor=__webpack_require__(6461);var _context=__webpack_require__(6462);var _query_parameters=__webpack_require__(2076);var _constants=__webpack_require__(1041);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function QueryActionsProvider(Private,Promise){var fetchAnchor=Private(_anchor.fetchAnchorProvider);var _Private=Private(_context.fetchContextProvider),fetchSurroundingDocs=_Private.fetchSurroundingDocs;var _Private2=Private(_query_parameters.QueryParameterActionsProvider),increasePredecessorCount=_Private2.increasePredecessorCount,increaseSuccessorCount=_Private2.increaseSuccessorCount,setPredecessorCount=_Private2.setPredecessorCount,setQueryParameters=_Private2.setQueryParameters,setSuccessorCount=_Private2.setSuccessorCount;var setFailedStatus=function setFailedStatus(state){return function(subject){var details=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return state.loadingStatus[subject]=_objectSpread({status:_constants.LOADING_STATUS.FAILED,reason:_constants.FAILURE_REASONS.UNKNOWN},details)}};var setLoadedStatus=function setLoadedStatus(state){return function(subject){return state.loadingStatus[subject]={status:_constants.LOADING_STATUS.LOADED}}};var setLoadingStatus=function setLoadingStatus(state){return function(subject){return state.loadingStatus[subject]={status:_constants.LOADING_STATUS.LOADING}}};var fetchAnchorRow=function fetchAnchorRow(state){return function(){var _state$queryParameter=state.queryParameters,indexPatternId=_state$queryParameter.indexPatternId,anchorType=_state$queryParameter.anchorType,anchorId=_state$queryParameter.anchorId,sort=_state$queryParameter.sort,tieBreakerField=_state$queryParameter.tieBreakerField;if(!tieBreakerField){return Promise.reject(setFailedStatus(state)("anchor",{reason:_constants.FAILURE_REASONS.INVALID_TIEBREAKER}))}setLoadingStatus(state)("anchor");return Promise["try"](function(){return fetchAnchor(indexPatternId,anchorType,anchorId,[_lodash["default"].zipObject([sort]),_defineProperty({},tieBreakerField,sort[1])])}).then(function(anchorDocument){setLoadedStatus(state)("anchor");state.rows.anchor=anchorDocument;return anchorDocument},function(error){setFailedStatus(state)("anchor",{error:error});_notify.toastNotifications.addDanger({title:_i18n.i18n.translate("kbn.context.unableToLoadAnchorDocumentDescription",{defaultMessage:"Unable to load the anchor document"}),text:_react["default"].createElement(_markdown.MarkdownSimple,null,error.message)});throw error})}};var fetchSurroundingRows=function fetchSurroundingRows(type,state){var _state$queryParameter2=state.queryParameters,indexPatternId=_state$queryParameter2.indexPatternId,filters=_state$queryParameter2.filters,sort=_state$queryParameter2.sort,tieBreakerField=_state$queryParameter2.tieBreakerField,anchor=state.rows.anchor;var count=type==="successors"?state.queryParameters.successorCount:state.queryParameters.predecessorCount;if(!tieBreakerField){return Promise.reject(setFailedStatus(state)(type,{reason:_constants.FAILURE_REASONS.INVALID_TIEBREAKER}))}setLoadingStatus(state)(type);var _sort=_slicedToArray(sort,2),sortField=_sort[0],sortDir=_sort[1];return Promise["try"](function(){return fetchSurroundingDocs(type,indexPatternId,anchor,sortField,tieBreakerField,sortDir,count,filters)}).then(function(documents){setLoadedStatus(state)(type);state.rows[type]=documents;return documents},function(error){setFailedStatus(state)(type,{error:error});_notify.toastNotifications.addDanger({title:_i18n.i18n.translate("kbn.context.unableToLoadDocumentDescription",{defaultMessage:"Unable to load documents"}),text:_react["default"].createElement(_markdown.MarkdownSimple,null,error.message)});throw error})};var fetchContextRows=function fetchContextRows(state){return function(){return Promise.all([fetchSurroundingRows("predecessors",state),fetchSurroundingRows("successors",state)])}};var fetchAllRows=function fetchAllRows(state){return function(){return Promise["try"](fetchAnchorRow(state)).then(fetchContextRows(state))}};var fetchContextRowsWithNewQueryParameters=function fetchContextRowsWithNewQueryParameters(state){return function(queryParameters){setQueryParameters(state)(queryParameters);return fetchContextRows(state)()}};var fetchAllRowsWithNewQueryParameters=function fetchAllRowsWithNewQueryParameters(state){return function(queryParameters){setQueryParameters(state)(queryParameters);return fetchAllRows(state)()}};var fetchGivenPredecessorRows=function fetchGivenPredecessorRows(state){return function(count){setPredecessorCount(state)(count);return fetchSurroundingRows("predecessors",state)}};var fetchGivenSuccessorRows=function fetchGivenSuccessorRows(state){return function(count){setSuccessorCount(state)(count);return fetchSurroundingRows("successors",state)}};var fetchMorePredecessorRows=function fetchMorePredecessorRows(state){return function(){increasePredecessorCount(state)();return fetchSurroundingRows("predecessors",state)}};var fetchMoreSuccessorRows=function fetchMoreSuccessorRows(state){return function(){increaseSuccessorCount(state)();return fetchSurroundingRows("successors",state)}};var setAllRows=function setAllRows(state){return function(predecessorRows,anchorRow,successorRows){return state.rows.all=[].concat(_toConsumableArray(predecessorRows||[]),_toConsumableArray(anchorRow?[anchorRow]:[]),_toConsumableArray(successorRows||[]))}};return{fetchAllRows:fetchAllRows,fetchAllRowsWithNewQueryParameters:fetchAllRowsWithNewQueryParameters,fetchAnchorRow:fetchAnchorRow,fetchContextRows:fetchContextRows,fetchContextRowsWithNewQueryParameters:fetchContextRowsWithNewQueryParameters,fetchGivenPredecessorRows:fetchGivenPredecessorRows,fetchGivenSuccessorRows:fetchGivenSuccessorRows,fetchMorePredecessorRows:fetchMorePredecessorRows,fetchMoreSuccessorRows:fetchMoreSuccessorRows,setAllRows:setAllRows}}},6461:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.fetchAnchorProvider=fetchAnchorProvider;var _lodash=_interopRequireDefault(__webpack_require__(1));var _i18n=__webpack_require__(5);var _courier=__webpack_require__(451);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function fetchAnchorProvider(indexPatterns,Private){var SearchSource=Private(_courier.SearchSourceProvider);return function(){var _fetchAnchor=_asyncToGenerator(regeneratorRuntime.mark(function _callee(indexPatternId,anchorType,anchorId,sort){var indexPattern,searchSource,response;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return indexPatterns.get(indexPatternId);case 2:indexPattern=_context.sent;searchSource=(new SearchSource).setParent(false).setField("index",indexPattern).setField("version",true).setField("size",1).setField("query",{query:{constant_score:{filter:{ids:{type:anchorType,values:[anchorId]}}}},language:"lucene"}).setField("sort",sort);_context.next=6;return searchSource.fetch();case 6:response=_context.sent;if(!(_lodash["default"].get(response,["hits","total"],0)<1)){_context.next=9;break}throw new Error(_i18n.i18n.translate("kbn.context.failedToLoadAnchorDocumentErrorDescription",{defaultMessage:"Failed to load anchor document."}));case 9:return _context.abrupt("return",_objectSpread({},_lodash["default"].get(response,["hits","hits",0]),{$$_isAnchor:true}));case 10:case"end":return _context.stop()}}},_callee)}));function fetchAnchor(_x,_x2,_x3,_x4){return _fetchAnchor.apply(this,arguments)}return fetchAnchor}()}},6462:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.fetchContextProvider=fetchContextProvider;var _courier=__webpack_require__(451);var _sorting=__webpack_require__(677);var _date_conversion=__webpack_require__(1040);var _fetch_hits_in_interval=__webpack_require__(6463);var _generate_intervals=__webpack_require__(6464);var _get_es_query_search_after=__webpack_require__(6465);var _get_es_query_sort=__webpack_require__(6466);function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}var DAY_MILLIS=24*60*60*1e3;var LOOKUP_OFFSETS=[0,1,7,30,365,1e4].map(function(days){return days*DAY_MILLIS});function fetchContextProvider(indexPatterns,Private){var SearchSourcePrivate=Private(_courier.SearchSourceProvider);return{fetchSurroundingDocs:fetchSurroundingDocs};function fetchSurroundingDocs(_x,_x2,_x3,_x4,_x5,_x6,_x7,_x8){return _fetchSurroundingDocs.apply(this,arguments)}function _fetchSurroundingDocs(){_fetchSurroundingDocs=_asyncToGenerator(regeneratorRuntime.mark(function _callee(type,indexPatternId,anchor,timeField,tieBreakerField,sortDir,size,filters){var indexPattern,searchSource,sortDirToApply,nanos,timeValueMillis,intervals,documents,_iteratorNormalCompletion,_didIteratorError,_iteratorError,_iterator,_step,interval,remainingSize,searchAfter,sort,hits;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return indexPatterns.get(indexPatternId);case 2:indexPattern=_context.sent;_context.next=5;return createSearchSource(indexPattern,filters);case 5:searchSource=_context.sent;sortDirToApply=type==="successors"?sortDir:(0,_sorting.reverseSortDir)(sortDir);nanos=indexPattern.isTimeNanosBased()?(0,_date_conversion.extractNanos)(anchor._source[timeField]):"";timeValueMillis=nanos!==""?(0,_date_conversion.convertIsoToMillis)(anchor._source[timeField]):anchor.sort[0];intervals=(0,_generate_intervals.generateIntervals)(LOOKUP_OFFSETS,timeValueMillis,type,sortDir);documents=[];_iteratorNormalCompletion=true;_didIteratorError=false;_iteratorError=undefined;_context.prev=14;_iterator=intervals[Symbol.iterator]();case 16:if(_iteratorNormalCompletion=(_step=_iterator.next()).done){_context.next=30;break}interval=_step.value;remainingSize=size-documents.length;if(!(remainingSize<=0)){_context.next=21;break}return _context.abrupt("break",30);case 21:searchAfter=(0,_get_es_query_search_after.getEsQuerySearchAfter)(type,documents,timeField,anchor,nanos);sort=(0,_get_es_query_sort.getEsQuerySort)(timeField,tieBreakerField,sortDirToApply);_context.next=25;return(0,_fetch_hits_in_interval.fetchHitsInInterval)(searchSource,timeField,sort,sortDirToApply,interval,searchAfter,remainingSize,nanos);case 25:hits=_context.sent;documents=type==="successors"?[].concat(_toConsumableArray(documents),_toConsumableArray(hits)):[].concat(_toConsumableArray(hits.slice().reverse()),_toConsumableArray(documents));case 27:_iteratorNormalCompletion=true;_context.next=16;break;case 30:_context.next=36;break;case 32:_context.prev=32;_context.t0=_context["catch"](14);_didIteratorError=true;_iteratorError=_context.t0;case 36:_context.prev=36;_context.prev=37;if(!_iteratorNormalCompletion&&_iterator["return"]!=null){_iterator["return"]()}case 39:_context.prev=39;if(!_didIteratorError){_context.next=42;break}throw _iteratorError;case 42:return _context.finish(39);case 43:return _context.finish(36);case 44:return _context.abrupt("return",documents);case 45:case"end":return _context.stop()}}},_callee,null,[[14,32,36,44],[37,,39,43]])}));return _fetchSurroundingDocs.apply(this,arguments)}function createSearchSource(_x9,_x10){return _createSearchSource.apply(this,arguments)}function _createSearchSource(){_createSearchSource=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(indexPattern,filters){return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:return _context2.abrupt("return",(new SearchSourcePrivate).setParent(false).setField("index",indexPattern).setField("filter",filters));case 1:case"end":return _context2.stop()}}},_callee2)}));return _createSearchSource.apply(this,arguments)}}},6463:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.fetchHitsInInterval=fetchHitsInInterval;var _date_conversion=__webpack_require__(1040);var _sorting=__webpack_require__(677);function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function fetchHitsInInterval(_x,_x2,_x3,_x4,_x5,_x6,_x7,_x8){return _fetchHitsInInterval.apply(this,arguments)}function _fetchHitsInInterval(){_fetchHitsInInterval=_asyncToGenerator(regeneratorRuntime.mark(function _callee(searchSource,timeField,sort,sortDir,interval,searchAfter,maxCount,nanosValue){var range,_interval,start,stop,response;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:range={format:"strict_date_optional_time"};_interval=_slicedToArray(interval,2),start=_interval[0],stop=_interval[1];if(start){range[sortDir===_sorting.SortDirection.asc?"gte":"lte"]=(0,_date_conversion.convertTimeValueToIso)(start,nanosValue)}if(stop){range[sortDir===_sorting.SortDirection.asc?"lte":"gte"]=(0,_date_conversion.convertTimeValueToIso)(stop,nanosValue)}_context.next=6;return searchSource.setField("size",maxCount).setField("query",{query:{constant_score:{filter:{range:_defineProperty({},timeField,range)}}},language:"lucene"}).setField("searchAfter",searchAfter).setField("sort",sort).setField("version",true).fetch();case 6:response=_context.sent;return _context.abrupt("return",response.hits?response.hits.hits:[]);case 8:case"end":return _context.stop()}}},_callee)}));return _fetchHitsInInterval.apply(this,arguments)}},6464:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.asPairs=asPairs;exports.generateIntervals=generateIntervals;var _sorting=__webpack_require__(677);var _marked=regeneratorRuntime.mark(asPairs);function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function asPairs(iterable){var currentPair,_iteratorNormalCompletion,_didIteratorError,_iteratorError,_iterator,_step,value;return regeneratorRuntime.wrap(function asPairs$(_context){while(1){switch(_context.prev=_context.next){case 0:currentPair=[];_iteratorNormalCompletion=true;_didIteratorError=false;_iteratorError=undefined;_context.prev=4;_iterator=iterable[Symbol.iterator]();case 6:if(_iteratorNormalCompletion=(_step=_iterator.next()).done){_context.next=15;break}value=_step.value;currentPair=[].concat(_toConsumableArray(currentPair),[value]).slice(-2);if(!(currentPair.length===2)){_context.next=12;break}_context.next=12;return currentPair;case 12:_iteratorNormalCompletion=true;_context.next=6;break;case 15:_context.next=21;break;case 17:_context.prev=17;_context.t0=_context["catch"](4);_didIteratorError=true;_iteratorError=_context.t0;case 21:_context.prev=21;_context.prev=22;if(!_iteratorNormalCompletion&&_iterator["return"]!=null){_iterator["return"]()}case 24:_context.prev=24;if(!_didIteratorError){_context.next=27;break}throw _iteratorError;case 27:return _context.finish(24);case 28:return _context.finish(21);case 29:case"end":return _context.stop()}}},_marked,null,[[4,17,21,29],[22,,24,28]])}function generateIntervals(offsets,startTime,type,sort){var offsetSign=sort===_sorting.SortDirection.asc&&type==="successors"||sort===_sorting.SortDirection.desc&&type==="predecessors"?1:-1;return asPairs([].concat(_toConsumableArray(offsets.map(function(offset){return startTime+offset*offsetSign})),[null]))}},6465:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getEsQuerySearchAfter=getEsQuerySearchAfter;var _date_conversion=__webpack_require__(1040);function getEsQuerySearchAfter(type,documents,timeFieldName,anchor,nanoSeconds){if(documents.length){var afterTimeRecIdx=type==="successors"&&documents.length?documents.length-1:0;var afterTimeDoc=documents[afterTimeRecIdx];var afterTimeValue=nanoSeconds?(0,_date_conversion.convertIsoToNanosAsStr)(afterTimeDoc._source[timeFieldName]):afterTimeDoc.sort[0];return[afterTimeValue,afterTimeDoc.sort[1]]}return[nanoSeconds?(0,_date_conversion.convertIsoToNanosAsStr)(anchor._source[timeFieldName]):anchor.sort[0],anchor.sort[1]]}},6466:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getEsQuerySort=getEsQuerySort;function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function getEsQuerySort(timeField,tieBreakerField,sortDir){return[_defineProperty({},timeField,sortDir),_defineProperty({},tieBreakerField,sortDir)]}},6467:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createInitialLoadingStatusState=createInitialLoadingStatusState;var _constants=__webpack_require__(1041);function createInitialLoadingStatusState(){return{anchor:_constants.LOADING_STATUS.UNINITIALIZED,predecessors:_constants.LOADING_STATUS.UNINITIALIZED,successors:_constants.LOADING_STATUS.UNINITIALIZED}}},6468:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<context-app\n  anchor-type="contextAppRoute.anchorType"\n  anchor-id="contextAppRoute.anchorId"\n  columns="contextAppRoute.state.columns"\n  discover-url="contextAppRoute.discoverUrl"\n  index-pattern="contextAppRoute.indexPattern"\n  filters="contextAppRoute.filters"\n  predecessor-count="contextAppRoute.state.predecessorCount"\n  successor-count="contextAppRoute.state.successorCount"\n  sort="contextAppRoute.state.sort"\n></context-app>\n'},6469:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.aggResponseIndex=void 0;var _build_hierarchical_data=__webpack_require__(1401);var _point_series=__webpack_require__(1403);var _tabify=__webpack_require__(796);var aggResponseIndex={hierarchical:_build_hierarchical_data.buildHierarchicalData,pointSeries:_point_series.buildPointSeriesData,tabify:_tabify.tabifyAggResponse};exports.aggResponseIndex=aggResponseIndex},661:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<div>\n  \x3c!-- Global settings --\x3e\n  <div class="visEditorSidebar__section">\n    <div class="visEditorSidebar__sectionTitle">\n      <div\n        i18n-id="kbnVislibVisTypes.editors.pointSeries.settingsTitle"\n        i18n-default-message="Settings"\n      ></div>\n    </div>\n\n    <div class="visEditorSidebar__formRow">\n      <label\n        class="visEditorSidebar__formLabel"\n        for="legendPosition"\n        i18n-id="kbnVislibVisTypes.editors.pointSeries.legendPositionLabel"\n        i18n-default-message="Legend Position"\n      ></label>\n      <div class="visEditorSidebar__formControl">\n        <select\n          id="legendPosition"\n          class="kuiSelect visEditorSidebar__select"\n          ng-model="editorState.params.legendPosition"\n          ng-options="position for position in [\'top\', \'left\', \'right\', \'bottom\']"\n        ></select>\n      </div>\n    </div>\n\n    <div class="visEditorSidebar__formRow">\n      <label\n        class="visEditorSidebar__formLabel"\n        for="showCursor"\n        i18n-id="kbnVislibVisTypes.editors.pointSeries.showTooltipLabel"\n        i18n-default-message="Show Tooltip"\n      ></label>\n      <div class="visEditorSidebar__formControl">\n        <input class="kuiCheckBox" id="showCursor" type="checkbox" ng-model="editorState.params.addTooltip">\n      </div>\n    </div>\n\n    <div class="visEditorSidebar__formRow" ng-show="vis.hasSchemaAgg(\'segment\', \'date_histogram\')">\n      <label\n        class="visEditorSidebar__formLabel"\n        for="currentTimeMarker"\n        i18n-id="kbnVislibVisTypes.editors.pointSeries.currentTimeMarkerLabel"\n        i18n-default-message="Current Time Marker"\n      ></label>\n      <div class="visEditorSidebar__formControl">\n        <input class="kuiCheckBox" id="currentTimeMarker" type="checkbox"\n               ng-model="editorState.params.addTimeMarker"\n               ng-checked="editorState.params.addTimeMarker"\n        >\n      </div>\n    </div>\n\n    <div class="visEditorSidebar__formRow" ng-show="!vis.hasSchemaAgg(\'segment\', \'date_histogram\')">\n      <label\n        class="visEditorSidebar__formLabel"\n        for="orderBuckets"\n        i18n-id="kbnVislibVisTypes.editors.pointSeries.orderBucketsBySumLabel"\n        i18n-default-message="Order Buckets by Sum"\n      ></label>\n      <div class="visEditorSidebar__formControl">\n        <input class="kuiCheckBox" id="orderBuckets" type="checkbox" ng-model="editorState.params.orderBucketsBySum">\n      </div>\n    </div>\n\n    <div class="visEditorSidebar__formRow" ng-show="vis.type.type === \'histogram\'">\n      <label \n        class="visEditorSidebar__formLabel"\n        for="showLabels"\n        i18n-id="kbnVislibVisTypes.editors.pointSeries.showLabels"\n        i18n-default-message="Show values on chart"\n      ></label>\n      <div class="visEditorSidebar__formControl">\n        <input class="kuiCheckBox" id="showLabels" type="checkbox" ng-model="editorState.params.labels.show">\n      </div>  \n    </div>\n\n    <vislib-grid></vislib-grid>\n  </div>\n\n</div>'},662:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PANEL_TYPES=void 0;var PANEL_TYPES={TABLE:"table",GAUGE:"gauge",MARKDOWN:"markdown",TOP_N:"top_n",TIMESERIES:"timeseries",METRIC:"metric"};exports.PANEL_TYPES=PANEL_TYPES},663:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getVisualizeLoader=getVisualizeLoader;exports.VisualizeLoaderProvider=VisualizeLoaderProvider;exports.VisualizeLoader=void 0;var _chrome=_interopRequireDefault(__webpack_require__(19));var _query_filter=__webpack_require__(188);var _embedded_visualize_handler=__webpack_require__(5721);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var VisualizeLoader=function(){function VisualizeLoader(savedVisualizations,pipelineDataLoader,Private){_classCallCheck(this,VisualizeLoader);this.savedVisualizations=savedVisualizations;this.pipelineDataLoader=pipelineDataLoader;this.Private=Private}_createClass(VisualizeLoader,[{key:"embedVisualizationWithId",value:function(){var _embedVisualizationWithId=_asyncToGenerator(regeneratorRuntime.mark(function _callee(element,savedVisualizationId,params){var _this=this;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:return _context.abrupt("return",new Promise(function(resolve,reject){_this.savedVisualizations.get(savedVisualizationId).then(function(savedObj){var handler=_this.renderVis(element,savedObj,params);resolve(handler)},reject)}));case 1:case"end":return _context.stop()}}},_callee)}));function embedVisualizationWithId(_x,_x2,_x3){return _embedVisualizationWithId.apply(this,arguments)}return embedVisualizationWithId}()},{key:"embedVisualizationWithSavedObject",value:function embedVisualizationWithSavedObject(el,savedObj,params){return this.renderVis(el,savedObj,params)}},{key:"getVisualizationList",value:function getVisualizationList(){return this.savedVisualizations.find().then(function(result){return result.hits})}},{key:"renderVis",value:function renderVis(container,savedObj,params){var vis=savedObj.vis,description=savedObj.description,searchSource=savedObj.searchSource;vis.description=description;vis.searchSource=searchSource;if(!params.append){container.innerHTML=""}var element=document.createElement("div");element.className="visualize";element.setAttribute("data-test-subj","visualizationLoader");container.appendChild(element);container.style.display="flex";if(params.cssClass){params.cssClass.split(" ").forEach(function(cssClass){element.classList.add(cssClass)})}var dataAttrs=params.dataAttrs;if(dataAttrs){Object.keys(dataAttrs).forEach(function(key){element.setAttribute("data-".concat(key),dataAttrs[key])})}var handlerParams=_objectSpread({},params,{queryFilter:this.Private(_query_filter.FilterBarQueryFilterProvider),Private:this.Private,pipelineDataLoader:this.pipelineDataLoader});return new _embedded_visualize_handler.EmbeddedVisualizeHandler(element,savedObj,handlerParams)}}]);return VisualizeLoader}();exports.VisualizeLoader=VisualizeLoader;function VisualizeLoaderProvider(savedVisualizations,interpreterConfig,Private){return new VisualizeLoader(savedVisualizations,interpreterConfig.enableInVisualize,Private)}function getVisualizeLoader(){return _chrome["default"].dangerouslyGetActiveInjector().then(function($injector){var Private=$injector.get("Private");return Private(VisualizeLoaderProvider)})}},664:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.replaceVars=replaceVars;var _lodash=_interopRequireDefault(__webpack_require__(1));var _handlebars=_interopRequireDefault(__webpack_require__(1980));var _i18n=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function replaceVars(str){var args=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var vars=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};try{var template=_handlebars["default"].compile(str,{strict:true,knownHelpersOnly:true});var string=template(_lodash["default"].assign({},vars,{args:args}));return string}catch(e){if(e.toString().indexOf("Parse error")!==-1){return str}else if(e.message.indexOf("not defined in")!==-1){var badVar=e.message.split(/"/)[1];e.error={caused_by:{reason:_i18n.i18n.translate("tsvb.replaceVars.errors.unknownVarDescription",{defaultMessage:"{badVar} is an unknown variable",values:{badVar:"{{"+badVar+"}}"}}),title:_i18n.i18n.translate("tsvb.replaceVars.errors.unknownVarTitle",{defaultMessage:"Error processing your markdown"})}}}else{e.error={caused_by:{reason:_i18n.i18n.translate("tsvb.replaceVars.errors.markdownErrorDescription",{defaultMessage:"Please verify you are only using markdown, known variables, and built-in Handlebars expressions"}),title:_i18n.i18n.translate("tsvb.replaceVars.errors.markdownErrorTitle",{defaultMessage:"Error processing your markdown"})}}}return e}}},665:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.EXTENDED_STATS_TYPES=exports.METRIC_TYPES=void 0;var METRIC_TYPES={PERCENTILE:"percentile",PERCENTILE_RANK:"percentile_rank",TOP_HIT:"top_hit",COUNT:"count",DERIVATIVE:"derivative",STD_DEVIATION:"std_deviation",VARIANCE:"variance",SUM_OF_SQUARES:"sum_of_squares",CARDINALITY:"cardinality"};exports.METRIC_TYPES=METRIC_TYPES;var EXTENDED_STATS_TYPES=[METRIC_TYPES.STD_DEVIATION,METRIC_TYPES.VARIANCE,METRIC_TYPES.SUM_OF_SQUARES];exports.EXTENDED_STATS_TYPES=EXTENDED_STATS_TYPES},666:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SeriesConfig=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(17));var _react=_interopRequireDefault(__webpack_require__(0));var _data_format_picker=__webpack_require__(1010);var _create_select_handler=__webpack_require__(50);var _create_text_handler=__webpack_require__(64);var _yes_no=__webpack_require__(200);var _index_pattern=__webpack_require__(291);var _eui=__webpack_require__(2);var _react2=__webpack_require__(10);var _setup=__webpack_require__(84);var _storage=__webpack_require__(122);var _get_default_query_language=__webpack_require__(164);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var QueryBarInput=_setup.data.query.ui.QueryBarInput;var localStorage=new _storage.Storage(window.localStorage);var SeriesConfig=function SeriesConfig(props){var defaults={offset_time:"",value_template:""};var model=_objectSpread({},defaults,props.model);var handleSelectChange=(0,_create_select_handler.createSelectHandler)(props.onChange);var handleTextChange=(0,_create_text_handler.createTextHandler)(props.onChange);var htmlId=(0,_eui.htmlIdGenerator)();var seriesIndexPattern=props.model.override_index_pattern&&props.model.series_index_pattern?props.model.series_index_pattern:props.indexPatternForQuery;return _react["default"].createElement("div",{className:"tvbAggRow"},_react["default"].createElement(_data_format_picker.DataFormatPicker,{onChange:handleSelectChange("formatter"),value:model.formatter}),_react["default"].createElement(_eui.EuiHorizontalRule,{margin:"s"}),_react["default"].createElement(_eui.EuiFormRow,{id:htmlId("series_filter"),label:_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.seriesConfig.filterLabel",defaultMessage:"Filter"}),fullWidth:true},_react["default"].createElement(QueryBarInput,{query:{language:model.filter&&model.filter.language?model.filter.language:(0,_get_default_query_language.getDefaultQueryLanguage)(),query:model.filter&&model.filter.query?model.filter.query:""},onChange:function onChange(filter){return props.onChange({filter:filter})},appName:"VisEditor",indexPatterns:[seriesIndexPattern],store:localStorage,showDatePicker:false})),_react["default"].createElement(_eui.EuiHorizontalRule,{margin:"s"}),_react["default"].createElement(_eui.EuiFlexGroup,{gutterSize:"s"},_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiFormRow,{id:htmlId("template"),label:_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.seriesConfig.templateLabel",defaultMessage:"Template"}),helpText:_react["default"].createElement("span",null,_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.seriesConfig.templateHelpText",defaultMessage:"eg. {templateExample}",values:{templateExample:_react["default"].createElement(_eui.EuiCode,null,"{{value}}/s")}})),fullWidth:true},_react["default"].createElement(_eui.EuiFieldText,{onChange:handleTextChange("value_template"),value:model.value_template,fullWidth:true}))),_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiFormRow,{id:htmlId("offsetSeries"),label:_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.seriesConfig.offsetSeriesTimeLabel",defaultMessage:"Offset series time by (1m, 1h, 1w, 1d)",description:"1m, 1h, 1w and 1d are required values and must not be translated."})},_react["default"].createElement(_eui.EuiFieldText,{"data-test-subj":"offsetTimeSeries",onChange:handleTextChange("offset_time"),value:model.offset_time})))),_react["default"].createElement(_eui.EuiHorizontalRule,{margin:"s"}),_react["default"].createElement(_eui.EuiFlexGroup,{gutterSize:"s",responsive:false,wrap:true},_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiFormLabel,null,_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.seriesConfig.overrideIndexPatternLabel",defaultMessage:"Override Index Pattern?"})),_react["default"].createElement(_eui.EuiSpacer,{size:"s"}),_react["default"].createElement(_yes_no.YesNo,{value:model.override_index_pattern,name:"override_index_pattern",onChange:props.onChange})),_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_index_pattern.IndexPattern,{onChange:props.onChange,model:props.model,fields:props.fields,prefix:"series_",disabled:!model.override_index_pattern}))))};exports.SeriesConfig=SeriesConfig;SeriesConfig.propTypes={fields:_propTypes["default"].object,model:_propTypes["default"].object,onChange:_propTypes["default"].func,indexPatternForQuery:_propTypes["default"].string}},667:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ColorRules=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(17));var _react=_interopRequireWildcard(__webpack_require__(0));var _lodash=_interopRequireDefault(__webpack_require__(1));var _add_delete_buttons=__webpack_require__(163);var _collection_actions=__webpack_require__(289);var _color_picker=__webpack_require__(198);var _eui=__webpack_require__(2);var _react2=__webpack_require__(10);var _i18n=__webpack_require__(5);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var ColorRulesUI=function(_Component){_inherits(ColorRulesUI,_Component);function ColorRulesUI(props){var _this;_classCallCheck(this,ColorRulesUI);_this=_possibleConstructorReturn(this,_getPrototypeOf(ColorRulesUI).call(this,props));_this.renderRow=_this.renderRow.bind(_assertThisInitialized(_this));return _this}_createClass(ColorRulesUI,[{key:"handleChange",value:function handleChange(item,name){var _this2=this;var cast=arguments.length>2&&arguments[2]!==undefined?arguments[2]:String;return function(e){var handleChange=_collection_actions.collectionActions.handleChange.bind(null,_this2.props);var part={};part[name]=cast(_lodash["default"].get(e,"[0].value",_lodash["default"].get(e,"target.value")));if(part[name]==="undefined")part[name]=undefined;if(part[name]===NaN)part[name]=undefined;handleChange(_lodash["default"].assign({},item,part))}}},{key:"renderRow",value:function renderRow(row,i,items){var _this3=this;var defaults={value:0};var model=_objectSpread({},defaults,row);var handleAdd=_collection_actions.collectionActions.handleAdd.bind(null,this.props);var handleDelete=_collection_actions.collectionActions.handleDelete.bind(null,this.props,model);var intl=this.props.intl;var operatorOptions=[{label:intl.formatMessage({id:"tsvb.colorRules.greaterThanLabel",defaultMessage:"> greater than"}),value:"gt"},{label:intl.formatMessage({id:"tsvb.colorRules.greaterThanOrEqualLabel",defaultMessage:">= greater than or equal"}),value:"gte"},{label:intl.formatMessage({id:"tsvb.colorRules.lessThanLabel",defaultMessage:"< less than"}),value:"lt"},{label:intl.formatMessage({id:"tsvb.colorRules.lessThanOrEqualLabel",defaultMessage:"<= less than or equal"}),value:"lte"}];var handleColorChange=function handleColorChange(part){var handleChange=_collection_actions.collectionActions.handleChange.bind(null,_this3.props);handleChange(_lodash["default"].assign({},model,part))};var htmlId=(0,_eui.htmlIdGenerator)(model.id);var selectedOperatorOption=operatorOptions.find(function(option){return model.operator===option.value});var labelStyle={marginBottom:0};var secondary;if(!this.props.hideSecondary){secondary=_react["default"].createElement(_react.Fragment,null,_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiFormLabel,{style:labelStyle},_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.colorRules.setSecondaryColorLabel",defaultMessage:"and {secondaryName} to",values:{secondaryName:this.props.secondaryName},description:"Part of a larger string: Set {primaryName} to {color} and {secondaryName} to {color} if metric is {greaterOrLessThan} {value}."}))),_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_color_picker.ColorPicker,{onChange:handleColorChange,name:this.props.secondaryVarName,value:model[this.props.secondaryVarName]})))}return _react["default"].createElement(_eui.EuiFlexGroup,{wrap:true,responsive:false,gutterSize:"s",key:model.id,alignItems:"center",className:"tvbColorRules__rule"},_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiFormLabel,{style:labelStyle},_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.colorRules.setPrimaryColorLabel",defaultMessage:"Set {primaryName} to",values:{primaryName:this.props.primaryName},description:"Part of a larger string: Set {primaryName} to {color} and {secondaryName} to {color} if metric is {greaterOrLessThan} {value}."}))),_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_color_picker.ColorPicker,{onChange:handleColorChange,name:this.props.primaryVarName,value:model[this.props.primaryVarName]})),secondary,_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_eui.EuiFormLabel,{style:labelStyle,htmlFor:htmlId("ifMetricIs")},_react["default"].createElement(_react2.FormattedMessage,{id:"tsvb.colorRules.ifMetricIsLabel",defaultMessage:"if metric is",description:"Part of a larger string: Set {primaryName} to {color} and {secondaryName} to {color} if metric is {greaterOrLessThan} {value}."}))),_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiComboBox,{id:htmlId("ifMetricIs"),options:operatorOptions,selectedOptions:selectedOperatorOption?[selectedOperatorOption]:[],onChange:this.handleChange(model,"operator"),singleSelection:{asPlainText:true},fullWidth:true})),_react["default"].createElement(_eui.EuiFlexItem,null,_react["default"].createElement(_eui.EuiFieldNumber,{"aria-label":intl.formatMessage({id:"tsvb.colorRules.valueAriaLabel",defaultMessage:"Value"}),value:model.value,onChange:this.handleChange(model,"value",Number),fullWidth:true})),_react["default"].createElement(_eui.EuiFlexItem,{grow:false},_react["default"].createElement(_add_delete_buttons.AddDeleteButtons,{onAdd:handleAdd,onDelete:handleDelete,disableDelete:items.length<2,responsive:false})))}},{key:"render",value:function render(){var _this$props=this.props,model=_this$props.model,name=_this$props.name;if(!model[name])return _react["default"].createElement("div",null);var rows=model[name].map(this.renderRow);return _react["default"].createElement("div",null,rows)}}]);return ColorRulesUI}(_react.Component);ColorRulesUI.defaultProps={name:"color_rules",primaryName:_i18n.i18n.translate("tsvb.colorRules.defaultPrimaryNameLabel",{defaultMessage:"background"}),primaryVarName:"background_color",secondaryName:_i18n.i18n.translate("tsvb.colorRules.defaultSecondaryNameLabel",{defaultMessage:"text"}),secondaryVarName:"color",hideSecondary:false};ColorRulesUI.propTypes={name:_propTypes["default"].string,model:_propTypes["default"].object,onChange:_propTypes["default"].func,primaryName:_propTypes["default"].string,primaryVarName:_propTypes["default"].string,secondaryName:_propTypes["default"].string,secondaryVarName:_propTypes["default"].string,hideSecondary:_propTypes["default"].bool};var ColorRules=(0,_react2.injectI18n)(ColorRulesUI);exports.ColorRules=ColorRules},670:function(module,exports,__webpack_require__){"use strict";var _lodash=__webpack_require__(1);var _chrome=_interopRequireDefault(__webpack_require__(19));var _routes=_interopRequireDefault(__webpack_require__(34));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_routes["default"].addSetupWork(function(uiCapabilities,kbnBaseUrl,$route,kbnUrl){var route=(0,_lodash.get)($route,"current.$$route");if(!route.requireUICapability){return}if(!(0,_lodash.get)(uiCapabilities,route.requireUICapability)){var url=_chrome["default"].addBasePath("".concat(kbnBaseUrl,"#/home"));kbnUrl.redirect(url);throw _routes["default"].WAIT_FOR_URL_CHANGE_TOKEN}})},671:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.EmbeddableFactoriesRegistryProvider=void 0;var _registry=__webpack_require__(107);var EmbeddableFactoriesRegistryProvider=(0,_registry.uiRegistry)({index:["name"],name:"embeddableFactories"});exports.EmbeddableFactoriesRegistryProvider=EmbeddableFactoriesRegistryProvider},672:function(module,exports,__webpack_require__){module.exports=__webpack_require__(18)(2714)},673:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"isDefaultValue",{enumerable:true,get:function get(){return _is_default_value.isDefaultValue}});Object.defineProperty(exports,"toEditableConfig",{enumerable:true,get:function get(){return _to_editable_config.toEditableConfig}});Object.defineProperty(exports,"getCategoryName",{enumerable:true,get:function get(){return _get_category_name.getCategoryName}});Object.defineProperty(exports,"DEFAULT_CATEGORY",{enumerable:true,get:function get(){return _default_category.DEFAULT_CATEGORY}});Object.defineProperty(exports,"getAriaName",{enumerable:true,get:function get(){return _get_aria_name.getAriaName}});var _is_default_value=__webpack_require__(6287);var _to_editable_config=__webpack_require__(6288);var _get_category_name=__webpack_require__(6290);var _default_category=__webpack_require__(2062);var _get_aria_name=__webpack_require__(2061)},674:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _fetch_export_by_type=__webpack_require__(6320);Object.keys(_fetch_export_by_type).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _fetch_export_by_type[key]}})});var _fetch_export_objects=__webpack_require__(6321);Object.keys(_fetch_export_objects).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _fetch_export_objects[key]}})});var _in_app_url=__webpack_require__(2063);Object.keys(_in_app_url).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _in_app_url[key]}})});var _get_relationships=__webpack_require__(6322);Object.keys(_get_relationships).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _get_relationships[key]}})});var _get_saved_object_counts=__webpack_require__(6323);Object.keys(_get_saved_object_counts).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _get_saved_object_counts[key]}})});var _get_saved_object_label=__webpack_require__(6324);Object.keys(_get_saved_object_label).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _get_saved_object_label[key]}})});var _import_file=__webpack_require__(6325);Object.keys(_import_file).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _import_file[key]}})});var _import_legacy_file=__webpack_require__(6326);Object.keys(_import_legacy_file).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _import_legacy_file[key]}})});var _parse_query=__webpack_require__(6327);Object.keys(_parse_query).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _parse_query[key]}})});var _resolve_import_errors=__webpack_require__(6328);Object.keys(_resolve_import_errors).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _resolve_import_errors[key]}})});var _resolve_saved_objects=__webpack_require__(2066);Object.keys(_resolve_saved_objects).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _resolve_saved_objects[key]}})});var _log_legacy_import=__webpack_require__(6329);Object.keys(_log_legacy_import).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _log_legacy_import[key]}})});var _process_import_response=__webpack_require__(6330);Object.keys(_process_import_response).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _process_import_response[key]}})});var _get_default_title=__webpack_require__(6331);Object.keys(_get_default_title).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _get_default_title[key]}})});var _find_objects=__webpack_require__(6332);Object.keys(_find_objects).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _find_objects[key]}})})},675:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getListBreadcrumbs=getListBreadcrumbs;exports.getCreateBreadcrumbs=getCreateBreadcrumbs;exports.getEditBreadcrumbs=getEditBreadcrumbs;exports.getEditFieldBreadcrumbs=getEditFieldBreadcrumbs;exports.getCreateFieldBreadcrumbs=getCreateFieldBreadcrumbs;var _management=__webpack_require__(349);var _i18n=__webpack_require__(5);function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function getListBreadcrumbs(){return[_management.MANAGEMENT_BREADCRUMB,{text:_i18n.i18n.translate("kbn.management.indexPatterns.listBreadcrumb",{defaultMessage:"Index patterns"}),href:"#/management/kibana/index_patterns"}]}function getCreateBreadcrumbs(){return[].concat(_toConsumableArray(getListBreadcrumbs()),[{text:_i18n.i18n.translate("kbn.management.indexPatterns.createBreadcrumb",{defaultMessage:"Create index pattern"}),href:"#/management/kibana/index_pattern"}])}function getEditBreadcrumbs($route){var indexPattern=$route.current.locals.indexPattern;return[].concat(_toConsumableArray(getListBreadcrumbs()),[{text:indexPattern.title,href:"#/management/kibana/index_patterns/".concat(indexPattern.id)}])}function getEditFieldBreadcrumbs($route){var fieldName=$route.current.params.fieldName;return[].concat(_toConsumableArray(getEditBreadcrumbs($route)),[{text:fieldName}])}function getCreateFieldBreadcrumbs($route){return[].concat(_toConsumableArray(getEditBreadcrumbs($route)),[{text:_i18n.i18n.translate("kbn.management.indexPatterns.createFieldBreadcrumb",{defaultMessage:"Create field"})}])}},676:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PER_PAGE_INCREMENTS=exports.MAX_SEARCH_SIZE=exports.MAX_NUMBER_OF_MATCHING_INDICES=exports.ESTIMATED_NUMBER_OF_SYSTEM_INDICES=void 0;var ESTIMATED_NUMBER_OF_SYSTEM_INDICES=100;exports.ESTIMATED_NUMBER_OF_SYSTEM_INDICES=ESTIMATED_NUMBER_OF_SYSTEM_INDICES;var MAX_NUMBER_OF_MATCHING_INDICES=100;exports.MAX_NUMBER_OF_MATCHING_INDICES=MAX_NUMBER_OF_MATCHING_INDICES;var MAX_SEARCH_SIZE=MAX_NUMBER_OF_MATCHING_INDICES+ESTIMATED_NUMBER_OF_SYSTEM_INDICES;exports.MAX_SEARCH_SIZE=MAX_SEARCH_SIZE;var PER_PAGE_INCREMENTS=[5,10,20,50];exports.PER_PAGE_INCREMENTS=PER_PAGE_INCREMENTS},677:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getFirstSortableField=getFirstSortableField;exports.reverseSortDir=reverseSortDir;exports.SortDirection=void 0;var SortDirection;exports.SortDirection=SortDirection;(function(SortDirection){SortDirection["asc"]="asc";SortDirection["desc"]="desc"})(SortDirection||(exports.SortDirection=SortDirection={}));var META_FIELD_NAMES=["_seq_no","_doc","_uid"];function getFirstSortableField(indexPattern,fieldNames){var sortableFields=fieldNames.filter(function(fieldName){return META_FIELD_NAMES.includes(fieldName)||(indexPattern.fields.byName[fieldName]||{sortable:false}).sortable});return sortableFields[0]}function reverseSortDir(sortDirection){return sortDirection===SortDirection.asc?SortDirection.desc:SortDirection.asc}}})["plugin"];